# Contributor: Mathieu Clabaut <mathieu.clabaut@gmail.com>
# Updated by: John C F <john.ch.fr@gmail.com>
pkgname=cudd
pkgver=2.5.1
pkgrel=1
pkgdesc="Package for manipulation of Binary Decision Diagrams (BDDs), Algebraic Decision Diagrams (ADDs) and Zero-suppressed Binary Decision Diagrams (ZDDs)"
arch=('i686' 'x86_64')
url="http://vlsi.colorado.edu/~fabio/CUDD/cuddIntro.html"
license=('unknown')
depends=()
makedepends=(gcc)
source=("ftp://vlsi.colorado.edu/pub/$pkgname-$pkgver.tar.gz"
	    Makefile)
md5sums=('e2a514c2d309feab6b697195b7615b8b' '20f2b0da31d5e1fee13ca603f2811717')

build() {
  cd "$pkgname-$pkgver"
  [ "$CARCH" == "i686" ] && sed -i '64s/#//' Makefile
  [ "$CARCH" == "x86_64" ] && sed -i '70s/#//' Makefile
  cp ../Makefile .
  for i in  cudd dddmp mtr st util epd
  do
    echo -e "libso:\n\tgcc -shared \$(POBJ) -o ../lib/lib$i.so\n" >> $i/Makefile
  done
  mkdir lib

  make || return 1
  make libso || return 1
}

package() {
  cd "$pkgname-$pkgver"
  mkdir -p $pkgdir/usr/lib/cudd
  install lib/* $pkgdir/usr/lib/cudd
  mkdir -p $pkgdir/usr/share/licenses/cudd
  install LICENSE $pkgdir/usr/share/licenses/cudd
  mkdir -p $pkgdir/usr/share/cudd/cudd/doc
  cp -r cudd/doc/*  $pkgdir/usr/share/cudd/cudd/doc
  mkdir -p $pkgdir/usr/share/cudd/st/doc
  cp -r st/doc/*  $pkgdir/usr/share/cudd/st/doc
  mkdir -p $pkgdir/usr/share/cudd/mtr/doc
  cp -r mtr/doc/*  $pkgdir/usr/share/cudd/mtr/doc
  mkdir -p $pkgdir/usr/share/cudd/dddmp/doc
  cp -r dddmp/doc/*  $pkgdir/usr/share/cudd/dddmp/doc
  mkdir -p $pkgdir/usr/include/cudd
  cp -L include/* $pkgdir/usr/include/cudd

  #DESTDIR="${pkgdir}" make install
}

