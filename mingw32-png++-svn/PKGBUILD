# Maintainer: Adam Nielsen <malvineous@shikadi.net>

pkgname=mingw32-png++-svn
_pkgname=png++
pkgver=20110310
pkgrel=1
license=('custom')
pkgdesc="a C++ wrapper for libpng"
arch=('any')
url="http://savannah.nongnu.org/projects/pngpp/"
provides=("mingw32-${_pkgname}")
conflicts=("mingw32-${_pkgname}")
depends=('mingw32-libpng')
source=()
md5sums=()

_svnroot='svn://svn.sv.nongnu.org/pngpp/trunk/'

build() {
	cd "${srcdir}"
	msg "Downloading from SVN..."

	if [ -d "trunk" ] ; then
		cd "trunk" && svn update
		msg "The local files are updated."
	else
		svn checkout "$_svnroot"
		cd "trunk"
	fi

	make docs
	make
}

package() {
	cd "$srcdir/trunk"
	make install PREFIX="${pkgdir}/usr/i486-mingw32"
	#mkdir -p "${pkgdir}/usr/i486-mingw32/include" || return 1
	#mkdir -p "${pkgdir}/usr/i486-mingw32/share/doc" || return 1
	mkdir -p "${pkgdir}/usr/i486-mingw32/share/licenses/$_pkgname" || return 1
	cd "$srcdir/trunk"
	cp -f COPYING "${pkgdir}/usr/i486-mingw32/share/licenses/$_pkgname"
}

