# Maintainer: Schnouki <thomas.jost@gmail.com>
# Contributor: JaDa <jada@archlinux.us>

pkgname=google-perftools
pkgver=1.7
pkgrel=1
pkgdesc="Fast, mutli-threaded malloc() and nifty performance analysis tools by google."
arch=('i686' 'x86_64')
url="http://code.google.com/p/google-perftools/"
license=('BSD')
depends=('perl')
[[ "$CARCH" == "x86_64" ]] && depends=('perl' 'libunwind>=0.99')
optdepends=(
    'graphviz: for pprof graphical output routines'
    'gv: for pprof --gv mode'
)
source=(http://google-perftools.googlecode.com/files/$pkgname-$pkgver.tar.gz)
md5sums=('5839cab3723e68a86ed327ebb54d54bc')
sha1sums=('e3a65f71aee9270572f7aafa421858e39da1a9a8')

build() {
  cd "$srcdir/$pkgname-$pkgver"
  ./configure --prefix=/usr
  make
}

package() {
  cd "$srcdir/$pkgname-$pkgver"
  make DESTDIR="$pkgdir" install
}
