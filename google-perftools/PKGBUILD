# Maintainer: Schnouki <thomas.jost@gmail.com>
# Contributor: JaDa <jada@archlinux.us>
# Contributor: Joaquim Pedro (osmano807) <osmano807@gmail.com>

pkgname=google-perftools
pkgver=1.8.1
pkgrel=1
pkgdesc="Fast, mutli-threaded malloc() and nifty performance analysis tools by google."
arch=('i686' 'x86_64')
url="http://code.google.com/p/google-perftools/"
license=('BSD')
depends=('perl')
[[ "$CARCH" == "x86_64" ]] && depends=('perl' 'libunwind>=0.99')
optdepends=(
    'graphviz: for pprof graphical output routines'
    'gv: for pprof --gv mode'
)
source=(http://google-perftools.googlecode.com/files/$pkgname-$pkgver.tar.gz)
md5sums=('6003e5a8f4bfa4409f5dc35ea7d4012d')
sha256sums=('e923cae8926882c85507ae1a1dc2a4a19c726e92368d4e7c20ba4b963b0c3215')

build() {
  cd "$srcdir/$pkgname-$pkgver"

  ./configure --prefix=/usr
  make
}

package() {
  cd "$srcdir/$pkgname-$pkgver"
  make DESTDIR="$pkgdir" install
}
