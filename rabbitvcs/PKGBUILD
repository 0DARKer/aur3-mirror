# Maintainer: Alessandro Nakamuta <alessandro dot ufms at gmail dot com>
# Contributor: leniviy <basinilya at gmail dot com>

pkgname=rabbitvcs
pkgver=0.14.2.1
pkgrel=2
pkgdesc="A project with the goal of developing a collection of utilities to allow for better client integration with some of the popular version control systems (core)"
arch=('i686' 'x86_64')
url="http://rabbitvcs.org/"
install=${pkgname}.install
depends=('pygtk>=2.12' 'pygobject>=2.14' 'python-configobj>=4.4.0' 'pysvn-py2>=1.5.2' 'subversion>=1.4.6' 'git' 'python-dulwich>=0.6.0' 'meld' 'python-simplejson')
#makedepends=()
#backup=()
license=('GPL')
source=(http://rabbitvcs.googlecode.com/files/$pkgname-$pkgver.tar.gz)
md5sums=('db6f73014639d93653f3e2af2b0ed11f')

build(){
	cd "$srcdir/$pkgname-$pkgver"
	
	sed -i "s#env python#env python2#" setup.py
	find . -name "*.py" | xargs grep -l sys.executable | xargs sed -i 's|sys\.executable|"/usr/bin/python2"|g'
	
	python2 setup.py install --root="$pkgdir" --optimize=1
}
