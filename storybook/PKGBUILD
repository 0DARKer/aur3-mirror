# Contributor: Dan Serban

pkgname=storybook
pkgver=2.1.15
pkgrel=3
pkgdesc="Open Source Novel Writing Software for Novelists, Authors and Creative Writers"
arch=(any)
url=http://storybook.intertec.ch/joomla/index.php/download
license=('GPL')
depends=('java-runtime')
source=("http://downloads.sourceforge.net/project/storybook2/storybook/2.1.15/storybook-2.1.15-linux.run")
md5sums=('aecbb4cb777d69d00eee917d656173ed')
options=('!strip')

build()
{
  mkdir -p "$pkgdir/usr/share/storybook"
  chmod +x storybook-2.1.15-linux.run
  ./storybook-2.1.15-linux.run --noexec --keep --target "$pkgdir/usr/share/storybook"
  mkdir -p "$pkgdir/usr/bin"
  echo "#!/bin/bash" > "$pkgdir/usr/bin/storybook"
  echo "cd /usr/share/storybook" >> "$pkgdir/usr/bin/storybook"
  echo "java -Xmx256m -splash:splash.png -jar lib/storybook.jar" >> "$pkgdir/usr/bin/storybook"
  chmod +x "$pkgdir/usr/bin/storybook"
  mkdir -p "$pkgdir/usr/share/applications"
  DESKTOPFILE="$pkgdir/usr/share/applications/storybook.desktop"
cat >$DESKTOPFILE <<EOF
[Desktop Entry]
Encoding=UTF-8
Name=Storybook
GenericName=Open Source Novel Writing Software
Comment=Open Source Novel Writing Software for Novelists, Authors and Creative Writers
Exec=/usr/bin/storybook
Terminal=false
MultipleArgs=false
Type=Application
Icon=/usr/share/storybook/storybook-icon.png
Categories=Office;Education;TextTools;Java
EOF
}
