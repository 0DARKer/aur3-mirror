# Maintainer: OS Hazard <oshazard+aur@gmail.com>
# Contributor: Kyle Keen <keenerd@gmail.com>
pkgname=apacman
pkgver=0.7
pkgrel=3
pkgdesc="AUR wrapper forked from packer"
url="http://github.com/oshazard/apacman"
license="GPL"
arch=('any')
makedepends=('unzip')
depends=('bash' 'ca-certificates' 'curl' 'grep' 'jshon' 'sed' 'tar' 'which' 'wget')
optdepends=('apacman-deps: Required AUR build depends')
provides=('packer')
source=("https://github.com/oshazard/apacman/archive/master.zip")
md5sums=('dcbcfbe5c2173f1e284f20129089d474')
install=$pkgname.install

package() {
  cd "${srcdir}/apacman-master"

  # Install script
  mkdir -p "$pkgdir/usr/bin"
  install -m755 apacman "$pkgdir/usr/bin/apacman"

  # Create saved package cache directory
  mkdir -p "$pkgdir/var/cache/apacman/pkg"

  # Install manpage
  mkdir -p "$pkgdir/usr/share/man/man8"
  install -m644 apacman.8 "$pkgdir/usr/share/man/man8/apacman.8"

  # Install GPLv3
  mkdir -p "${pkgdir}/usr/share/licenses/${pkgname}"
  install -m644 LICENSE "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
}
