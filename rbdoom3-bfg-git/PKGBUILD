# Maintainer: M0Rf30

pkgname=rbdoom3-bfg-git
pkgver=199.a22a3f6
pkgrel=1
pkgdesc="Doom 3 BFG source code (Robert Beckebans repo)."
arch=(i686 x86_64)
url="https://github.com/RobertBeckebans/RBDOOM-3-BFG"
license=('GPL')
groups=(games)
depends=('libgl' 'alsa-lib' 'openal' 'libxxf86vm' 'libstdc++5' 'sdl')
makedepends=('git' 'cmake' 'zip')
optdepends=('alsa-plugins: pulseaudio-support'
	    'libpulse: pulseaudio support')

install=rbdoom3-bfg-git.install
source=('rbdoom3-bfg::git://github.com/hexameron/RBDOOM-3-BFG.git'
'rbdoom3.launcher' 'rbdoom3.desktop' 'rbdoom3.png')


build() {
 msg "Starting configure & make..."
  cd rbdoom3-bfg/neo
  sh  cmake-eclipse-linux-profile.sh
  cd ../build
  make
}

package() {
  cd rbdoom3-bfg
  install -m 755 -d "$pkgdir"/opt/rbdoom3/base
  install -m 755 build/RBDoom3BFG "$pkgdir"/opt/rbdoom3
  install -m 755 base/default.cfg "$pkgdir"/opt/rbdoom3/base/
  install -D -m 755 $srcdir/rbdoom3.launcher $pkgdir/usr/bin/rbdoom3
  install -D -m 644 "$srcdir"/rbdoom3.png "$pkgdir"/usr/share/pixmaps/rbdoom3.png
  install -D -m 644 "$srcdir"/rbdoom3.desktop "$pkgdir"/usr/share/applications/rbdoom3.desktop
}

pkgver() {
  cd rbdoom3-bfg
  echo $(git rev-list --count master).$(git rev-parse --short master)
}

md5sums=('SKIP'
	 '89792b386443a456a9e756ec9c2f2e96'
         'fe745e7f4a56a99f5cf4cfbf1e1fdf43'
         'aad66f68d95f9f40eb6ebe71c89f6bab')
