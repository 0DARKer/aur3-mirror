# Maintainer: yugrotavele <yugrotavele at archlinux dot us>
# Contributor: Sven Salzwedel <sven_salzwedel@web.de>
# Contributor: Olaf Leidinger <leidola@newcon.de>

pkgname=gscan2pdf
pkgver=0.9.31
pkgrel=2
pkgdesc='A GUI to produce a multipage PDF from a scan'
arch=('i686' 'x86_64')
url='http://gscan2pdf.sourceforge.net/'
license=('GPL')
depends=('xsane' 'gtk2-perl' 'perl-locale-gettext' 'libtiff' 'sane'
         'perl-gtk2-ex-simple-list' 'imagemagick' 'perl-config-general>=2.40'
         'perl-pdf-api2' 'perl-goo-canvas' 'perl-gtk2-imageview' 'perl-sane' 
         'perl-test-critic' 'perl-set-intspan' 'perl-proc-processtable')
optdepends=('djvulibre' 'unpaper' 'tesseract' 'gocr' 'ocropus' 'xdg-utils')
source=(http://downloads.sourceforge.net/$pkgname/$pkgname-$pkgver.tar.gz
        gscan2pdf-remove-forks.patch)
md5sums=('e92ee7b07ffd3543faf8a64940ad65dc'
         '6520bb27e1010896216b83cf86cb49b1')

build() {
  cd ${startdir}/src/${pkgname}-${pkgver}
  patch -Np1 -i $srcdir/gscan2pdf-remove-forks.patch
  perl Makefile.PL
  make || return 1
  make DESTDIR=${startdir}/pkg install
  
  /usr/bin/find ${startdir}/pkg -name '.packlist' -exec rm '{}' \;
  /usr/bin/find ${startdir}/pkg -name 'perllocal.pod' -exec rm '{}' \;
}
