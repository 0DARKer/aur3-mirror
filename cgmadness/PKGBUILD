# Maintainer: Dany Martineau <dany.luc.martineau@gmail.com>

pkgname=cgmadness
pkgver=1.2.2_xmas
_realver=1.2.2_Xmas
pkgrel=4
pkgdesc="Based on the classic game Marble Madness: Xmas Edition"
arch=(i686 x86_64)
depends=('freeglut' 'glew' 'libgl')
makedepends=('make')
source=(http://downloads.sourceforge.net/${pkgname}/${pkgname}-${_realver}-src.tar.bz2 
        cgmadness.desktop http://cgmadness.sourceforge.net/download.php?id=7
        http://cgmadness.sourceforge.net/download.php?id=8
        http://cgmadness.sourceforge.net/download.php?id=9)
url="http://cgmadness.sourceforge.net/"
license=('GPL')
md5sums=('9bd4e1d7f531342024b8251914ad845b' '2f0165307b27bca0ddca98a83713d51d'
         'bef4464923d64f2798df42e8e27c743a' '917dd32fe9bc50594ef5495cc383f207'
         'ddf3171ee4ef1612e06106a661f19362' )

build() {
  cd ${srcdir}/${pkgname}
  mkdir -p ${pkgdir}/usr/share/{applications,cgmadness}
  make || return 1
  cp -R {data,levels,cgmadness} ${pkgdir}/usr/share/cgmadness
  chmod 777 ${pkgdir}/usr/share/cgmadness/levels
  install ${srcdir}/cgmadness.desktop ${pkgdir}/usr/share/applications
  install -D -m644 ${srcdir}/download.php?id=7 ${pkgdir}/usr/share/cgmadness/levels/gianko1.cgm
  install -D -m644 ${srcdir}/download.php?id=8 ${pkgdir}/usr/share/cgmadness/levels/gianko2.cgm
  install -D -m644 ${srcdir}/download.php?id=9 ${pkgdir}/usr/share/cgmadness/levels/gianko3.cgm
}
