# Maintainer: moostik <mooostik_at_gmail.com>

pkgname=geogebra-beta
_withmaxima=false # change it to "true" to use Maxima as CAS in GeoGebra
pkgver=3.9.169.0
pkgrel=1
pkgdesc="Dynamic mathematics software with interactive graphics, algebra and spreadsheet"
arch=('any')
url='http://www.geogebra.org/'
license=('GPL' 'CCPL:by-sa')
# Application and source code under GPL / Language files under CCPL
depends=('java-runtime')
optdepends=('maxima: can be used as CAS in geogebra')
install=('geogebra-beta.install')
_root=http://www.geogebra.org/webstart/history/${pkgver}/unpacked/
source=(${_root}geogebra.jar
	${_root}geogebra_algos.jar
	${_root}geogebra_cas.jar
	${_root}geogebra_export.jar
	${_root}geogebra_gui.jar
	${_root}geogebra_javascript.jar
	${_root}geogebra_main.jar
	${_root}geogebra_properties.jar
	${_root}geogebra_usb.jar
	${_root}jlatexmath.jar
	${_root}jlm_cyrillic.jar
	${_root}jlm_greek.jar
	$pkgname.png
	$pkgname.desktop
	$pkgname.sh
	$pkgname-maxima.sh)
noextract=('*.jar')

build() {
  # Installing application
  cd $srcdir
  install -d -m755 $pkgdir/usr/share/java/$pkgname
  install -D -m644 *.jar $pkgdir/usr/share/java/$pkgname
  if [ $_withmaxima = "true" ]; then
    install -D -m755 $pkgname-maxima.sh $pkgdir/usr/bin/$pkgname
  else
    install -D -m755 $pkgname.sh $pkgdir/usr/bin/$pkgname
  fi

  # Creating menu item
  install -D -m644 $pkgname.png $pkgdir/usr/share/pixmaps/$pkgname.png
  install -D -m644 $pkgname.desktop $pkgdir/usr/share/applications/$pkgname.desktop
}

md5sums=('1e65fa0329b01bf158b4baf33b00a701'
         '381954a7f3e929989231e5666de8ee4c'
         'f91b52b3bf6619bcd9f549cefadf39e0'
         'dfda666eff538779ac6386735695d2cb'
         'bdc69d6eb4f6fb9de8851db2aabfdb25'
         'b35d915dcd59d1d036505a0b7673af88'
         '3d3caa62a753e4d5f98f4cf4b03f926f'
         '54b24f50b89bc3c3400c9e18fa5d0eed'
         '5c6d8ad58031ac4c6830fba24c4e2a6e'
         'eb2449f6db0152fbe9ff3ee5d32066c9'
         '73ff2c34a502dd206d6979f498f1f36e'
         'c1df287345fd8dd3c39502ea21f24d0b'
         'e324ee3a2bb438cee625e3f29770a315'
         '2aadddf1d1651b0cb17d379e2bf1cc9e'
         '86d7c63ef47a425e46cf6cc84a784ddd'
         'fad0531a4312f392b4ba36ee26326160')
