pkgname=tworld2
pkgver=2.0.0
pkgrel=1
pkgdesc="A Chip's Challenge clone."
url="http://madhavshanbhag.sitesled.com/Landlubber/TileWorld/"
arch=(i686 x86_64)
depends=(sdl)
license=(GPL)
source=(http://madhavshanbhag.sitesled.com/Landlubber/TileWorld/tworld-$pkgver.tar.gz
        tworld.desktop
        tworld.png)
sha1sums=(67cce6f2ddff610376b2f8bed77aa3e2a072bc31
          ecdf03587576473fa659c22db9f1272c680fba14
          5a398a2a0a3e00ceb4b85837790bf567efff0e63)
md5sums=(c3d04f89f456457299fe4f90acd02e13
         f68c1c6b4f1d4ccf1884c97cdca5464a
         88f3904891fda2454c297eb447c21e21)

build () {
	cd $srcdir/
        patch -p0 < ../tworld2-integer-types.patch
        cd tworld-$pkgver
        patch -p1 < ../../tworld2-iceblock.patch

	make || return 1
	make DESTDIR=$pkgdir install

	mkdir -p "$pkgdir"/usr/share/{applications,pixmaps}
	cd ..
	install -m644 tworld.desktop "$pkgdir/usr/share/applications/"
	install -m644 tworld.png "$pkgdir/usr/share/pixmaps/tworld.png"
}
