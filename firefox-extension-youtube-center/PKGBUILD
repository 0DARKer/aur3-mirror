_plugin_name=youtube_center
_plugin_version=2.1.0

pkgname=firefox-extension-youtube-center
pkgver=$_plugin_version
pkgrel=1
pkgdesc="YouTube Center contains all kind of different useful functions which makes your visit on YouTube much more entertaining."

license=('MIT')
arch=('any')
url="https://addons.mozilla.org/en-us/firefox/addon/youtube-center/"
depends=("firefox")

source=("https://addons.mozilla.org/firefox/downloads/file/240658/${_plugin_name}-${_plugin_version}.xpi")
sha256sums=('5d27d9b2109407c5284358fd24c317e33846bdae24a41b469d32b8e7c3b9f37b')

package() {
  cd $srcdir

  emid=$(sed -n '/.*<em:id>\(.*\)<\/em:id>.*/{s//\1/p;q}' install.rdf) || return 1
  local dstdir=$pkgdir/usr/lib/firefox/browser/extensions/${emid}

  install -d $dstdir
  cp -r * $dstdir
  rm $dstdir/$_plugin_name-$_plugin_version.xpi
  chmod -R 755 $dstdir
}
