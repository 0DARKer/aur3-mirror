#Contributor: Artyom Smirnov <smirnoffjr@gmail.com>
pkgname=go-oo-bin-ru
pkgver=3.0.1
_subver=3.0.1
_build=9379
pkgrel=1
pkgdesc="Go-OO Russian Language Pack and Help"
arch=('i686' 'x86_64')
url="http://go-oo.org/discover/"
license=('LGPL')
makedepends=('rpmextract')
depends=('go-oo-bin-base')

[ "$CARCH" = "x86_64" ] && _arch=x86_64
[ "$CARCH" = "i686" ] && _arch=i586

source=(http://go-oo.mirrorbrain.org/stable/linux-$_arch/$_subver/ooobasis3.0-ru{,-base,-binfilter,-calc,-draw,-impress,-math,-res,-writer}-$pkgver-$_build.$_arch.rpm
        http://go-oo.mirrorbrain.org/stable/linux-$_arch/$_subver/openoffice.org3-ru-$pkgver-$_build.$_arch.rpm)


md5sums=('2483173eb86ef1263e9677e70601b17e'
         '6689edfb60ff79621af0ba14095820fc'
         'fe7cecdb26ea3d76d16ca8c8fa4da99d'
         'c13bf115cdcd1f530c78f599e175dadc'
         '624b4e471438d32c548a9de58165c028'
         '9c9afd96f88cc1f06e057e494975aa5b'
         'e47ae70413b83afd962b8507c3a4fa6a'
         'c48b39fd1504c720e5c18b7ec5d7ad6a'
         '6e3ee19d13570711640c73b8a3b93cd6'
         '0c7422493175fc689f33f4662df4f962')
[ "$CARCH" = "x86_64" ] && md5sums=('5cfce166a18af684656cdc2ed4f8e913'
         '05de0d7af2aaabfdcaf842975bd77beb'
         '045420b11bf05f8a264aa624665e0d0a'
        'c8de7c2484ff6f4233495750038432a8'
         '25d2e709637bedab2d60e6cefadd84b8'
         '4181bf67d7a6e6f4a11c95abf4b176e7'
         '451fca09951da7b948c9a1a16987a8ba'
         '36fc588701ca5f2cfcc4bf066baa113d'
         'c4ab844b6ee00d1e2e03a1efd84d40f8'
         '01b34f307b46cb6d3619fa93d616b895')

build() {
    cd $startdir/src/

    for i in $(ls *.rpm); do
        rpmextract.sh $i
    done

    #"base" install
    cp ${srcdir}/opt ${pkgdir} -r

    ## Step 1
    cd ${pkgdir}/opt/openoffice.org || return 1
    cd basis3.0 || return 1

    ## Step 2
    cd ${pkgdir}/opt/ || return 1
    mv openoffice.org/basis3.0/ openoffice.org3/ || return 1
    cd openoffice.org3/ || return 1
    mv basis3.0 basis-link || return 1

    ## Step 3
    cd ${pkgdir}/opt/ || return 1
    rmdir ${pkgdir}/opt/openoffice.org || return 1
    mv openoffice.org3 go-oo || return 1
}


