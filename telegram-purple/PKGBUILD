# Maintainer: Francisco Demartino <demartino.francisco@gmail.com>

pkgname=telegram-purple
pkgver=0.6
pkgrel=1
pkgdesc="Adds support for Telegram to Pidgin, Adium, Finch and other Libpurple based messengers."
arch=("any")
url="https://github.com/majn/telegram-purple"
license=("GPL")
makedepends=("git")
depends=('glib2' 'openssl' 'libpurple' 'zlib')
source=("git+https://github.com/majn/telegram-purple#tag=v${pkgver}"
        "0001-Bugfix-always-respect-DESTDIR-in-Makefile.patch")
sha512sums=('SKIP'
            '82c137913b121c615e172d105df1ca76dcbc3834f07cad7337e08fb2b73e164baa565c6e91ab603769aed87efec01c4901c2f1b8a534a19f2f72cd3487cff269')

prepare() {
	cd "${srcdir}/${pkgname}"
	git submodule update --init --recursive
        patch -p1 < "${srcdir}/0001-Bugfix-always-respect-DESTDIR-in-Makefile.patch"
}

package() {
	cd "${srcdir}/${pkgname}"

	./configure
	make DESTDIR="$pkgdir/"
	make DESTDIR="$pkgdir/" install
}
