# Contributor: Luis Sarmiento < lgsarmientop@unal.edu.co >
# Maintainer: Luis Sarmiento < lgsarmientop@unal.edu.co >

pkgname=go4
pkgver=4.5.1
pkgrel=1
pkgdesc='Object-oriented system (GSI Object Oriented On-line Off-line system) based on ROOT'
arch=('any')
depends=('root' 'qt')
url="http://www-win.gsi.de/go4/"
license=('GPL')
source=("http://www-linux.gsi.de/~go4/download/${pkgname}-${pkgver}.tar.gz"
	"linkX11.path"
	"Makefile.patch"
)
md5sums=('996722e7e07139e74ac1bf52d5cf2fca'
	'aa75f1d873cbd4bf691f98196a870cdc'
	'623fd3036c094d8d74ffafac9e152cd5'
	)

build() {
  	cd ${pkgname}-${pkgver}
	patch -Np2 < ${srcdir}/linkX11.path
	make \
	     GO4PREFIX=/usr \
	     withqt=4 \
	     rpath=true \
	     GO4_OS=Linux \
	     -j16
}

package() {
	  cd ${pkgname}-${pkgver}
	  patch -Np2 < ${srcdir}/Makefile.patch
	  make DESTDIR="${pkgdir}" install
	  cd ..
	  install -Dm644 "${pkgname}-${pkgver}/Go4License.txt" "$pkgdir/usr/share/licenses/${pkgname}/Go4License.txt"
}