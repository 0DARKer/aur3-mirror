# Maintainer: Carl Mueller  archlinux at carlm e4ward com

pkgname=publictransport-plasmoid
pkgver=0.10_beta5
pkgrel=1
pkgdesc="Kdeplasma plasmoid with departure board for a given stop"
arch=('i686' 'x86_64')
url="http://www.kde-look.org/content/show.php/PublicTransport?content=106175"
license=('GPL')
depends=("publictransport-library=$pkgver" 'kwebkitpart' 'kdebase-workspace')
makedepends=('cmake' 'automoc4')
options=()
conflicts=(kde-extragear-plasmoids)
source=(http://www.kde-look.org/CONTENT/content-files/106175-publictransport-${pkgver}.tar.gz)
md5sums=('1743bfa9575c5ec6885d09d34a5b3ab6')
build() {
  cd $srcdir/publictransport-${pkgver}
  cd plasma-dataengine-publictransport-*
    cmake -DCMAKE_INSTALL_PREFIX=`kde4-config --prefix` .
    make || return 1
    make DESTDIR="$pkgdir/" install
  cd ../plasma-applet-publictransport-*
    cmake -DCMAKE_INSTALL_PREFIX=`kde4-config --prefix` .
    make || return 1
    make DESTDIR="$pkgdir/" install
  cd ../plasma-applet-flights-*
    cmake -DCMAKE_INSTALL_PREFIX=`kde4-config --prefix` .
    make || return 1
    make DESTDIR="$pkgdir/" install
  cd ../plasma-applet-graphicaltimetableline-*
    cmake -DCMAKE_INSTALL_PREFIX=`kde4-config --prefix` .
    make || return 1
    make DESTDIR="$pkgdir/" install
  cd ../plasma-runner-publictransport-*
    cmake -DCMAKE_INSTALL_PREFIX=`kde4-config --prefix` .
    make || return 1
    make DESTDIR="$pkgdir/" install
  cd ../publictransport-icons-*
    cmake -DCMAKE_INSTALL_PREFIX=`kde4-config --prefix` .
    make || return 1
    make DESTDIR="$pkgdir/" install
  cd ../plasma-dataengine-openstreetmap-*
    cmake -DCMAKE_INSTALL_PREFIX=`kde4-config --prefix` .
    make || return 1
    make DESTDIR="$pkgdir/" install
#  cd ../timetablemate-*
#    cmake -DCMAKE_INSTALL_PREFIX=`kde4-config --prefix` .
#    make || return 1
#    make DESTDIR="$pkgdir/" install
}
