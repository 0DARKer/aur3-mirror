# Contributor: Carl Mueller  archlinux at carlm e4ward com

pkgname=publictransport-plasmoid
pkgver=0.10beta3
pkgrel=1
pkgdesc="Kdeplasma plasmoid with departure board for a given stop"
arch=('i686' 'x86_64')
url="http://www.kde-look.org/content/show.php/PublicTransport?content=106175"
license=('GPL')
depends=('publictransport-library' 'kwebkitpart' 'kdebase-workspace>=4.2')
makedepends=('cmake' 'automoc4')
options=()
conflicts=(kde-extragear-plasmoids)
source=(http://www.kde-look.org/CONTENT/content-files/106175-publictransport-${pkgver}.tar.gz)
md5sums=('d08151f1ed292ff0a4c09b9364d0a0bc')
build() {
  cd $srcdir/publictransport-${pkgver}_timetablemate-*
  cd plasma-dataengine-publictransport-*
  cmake -DCMAKE_INSTALL_PREFIX=`kde4-config --prefix` .
  make || return 1
  make DESTDIR="$pkgdir/" install
  cd ../plasma-applet-publictransport-*
  cmake -DCMAKE_INSTALL_PREFIX=`kde4-config --prefix` .
  make || return 1
  make DESTDIR="$pkgdir/" install
  cd ../plasma-applet-flights-*
  cmake -DCMAKE_INSTALL_PREFIX=`kde4-config --prefix` .
  make || return 1
  make DESTDIR="$pkgdir/" install
  cd ../plasma-applet-graphicaltimetableline-*
  cmake -DCMAKE_INSTALL_PREFIX=`kde4-config --prefix` .
  make || return 1
  make DESTDIR="$pkgdir/" install
  cd ../plasma-runner-publictransport-*
  cmake -DCMAKE_INSTALL_PREFIX=`kde4-config --prefix` .
  make || return 1
  make DESTDIR="$pkgdir/" install
  cd ../publictransport-icons-*
  cmake -DCMAKE_INSTALL_PREFIX=`kde4-config --prefix` .
  make || return 1
  make DESTDIR="$pkgdir/" install
  cd ../plasma-dataengine-openstreetmap-*
  cmake -DCMAKE_INSTALL_PREFIX=`kde4-config --prefix` .
  make || return 1
  make DESTDIR="$pkgdir/" install
  #cd ../timetablemate-*
  #cmake -DCMAKE_INSTALL_PREFIX=`kde4-config --prefix` .
  #make || return 1
  #make DESTDIR="$pkgdir/" install
}
