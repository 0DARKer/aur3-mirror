# Contributor: Carl Mueller  archlinux at carlm e4ward com

pkgname=publictransport-plasmoid
pkgver=0.10beta2
_ver=0.10
_strmapver=0.1.1
_runnerver=0.1.1
_ttver=0.2.2
pkgrel=1
pkgdesc="Kdeplasma plasmoid with departure board for a given stop"
arch=('i686' 'x86_64')
url="http://www.kde-look.org/content/show.php/PublicTransport?content=106175"
license=('GPL')
depends=('publictransport-library' 'kwebkitpart' 'kdebase-workspace>=4.2')
makedepends=('cmake' 'automoc4')
options=()
conflicts=(kde-extragear-plasmoids)
source=(http://www.kde-look.org/CONTENT/content-files/106175-publictransport-${pkgver}.tar.gz)
md5sums=('ec94ffab25ca52c5b55cfd097efc4aa0')
build() {
  cd $srcdir/publictransport-${pkgver}_timetablemate-${_ttver}
  cd plasma-dataengine-publictransport-$_ver
  cmake -DCMAKE_INSTALL_PREFIX=`kde4-config --prefix` .
  make || return 1
  make DESTDIR="$pkgdir/" install
  cd ../plasma-applet-publictransport-$_ver
  cmake -DCMAKE_INSTALL_PREFIX=`kde4-config --prefix` .
  make || return 1
  make DESTDIR="$pkgdir/" install
  cd ../plasma-runner-publictransport-$_runnerver
  cmake -DCMAKE_INSTALL_PREFIX=`kde4-config --prefix` .
  make || return 1
  make DESTDIR="$pkgdir/" install
  cd ../publictransport-icons-$_ver
  cmake -DCMAKE_INSTALL_PREFIX=`kde4-config --prefix` .
  make || return 1
  make DESTDIR="$pkgdir/" install
  cd ../plasma-dataengine-openstreetmap-$_strmapver
  cmake -DCMAKE_INSTALL_PREFIX=`kde4-config --prefix` .
  make || return 1
  make DESTDIR="$pkgdir/" install
  #cd ../timetablemate-$_ttver
  #cmake -DCMAKE_INSTALL_PREFIX=`kde4-config --prefix` .
  #make || return 1
  #make DESTDIR="$pkgdir/" install
}
