# Contributor: Rick W. Chen <stuffcorpse at archlinux dot us>

pkgname=msp430mcu
pkgver=20110613
pkgrel=1
pkgdesc="C headers and binutils linker scripts for microcontrollers in the MSP430 family"
arch=(any)
url="http://mspgcc4.sourceforge.net/"
license=('GPL')
makedepends=('python2')
source=("http://sourceforge.net/projects/mspgcc/files/${pkgname}/${pkgname}-${pkgver}.tar.bz2")
sha1sums=('79904ac0c1852c6846cadbb21a0cb77a47adcdcd')

_builddir="${srcdir}/build"

build() {
  cp -r "${srcdir}/msp430mcu-${pkgver}" ${_builddir} && cd ${_builddir}
  sed -i -e "s|python |python2 |" $(find ./scripts/ -name '*.sh')
  export MSP430MCU_ROOT=$(pwd)
  ./scripts/build.sh
}

package() {
  cd ${_builddir}
  ./scripts/install.sh "${pkgdir}/usr"
}

# vim:set sts=2 ts=2 sw=2 et:
