# Maintainer: Dan Serban

pkgname=steadyflow-all-inclusive
pkgver=0.1.7
pkgrel=1
pkgdesc="A download manager that aims for minimalism, ease of use, and a clean, malleable codebase"
arch=(i686 x86_64)
url=https://launchpad.net/steadyflow
license=(GPLv3)
depends=(libgee)
install=steadyflow-all-inclusive.install
_filearch=i386
[ "${CARCH}" = "x86_64" ] && _filearch=amd64
_steadyflow_deb_ver="0+sikon1~natty1"
_libnotify1_pkg_ver=0.5.0
_libnotify1_deb_ver=2
_libappindicator1_pkg_ver=0.3.0
_libappindicator1_deb_ver=0ubuntu1
_libindicator3_pkg_ver=0.3.22
_libindicator3_deb_ver=0ubuntu1
_libdbusmenu_gtk3_pkg_ver=0.4.3
_libdbusmenu_gtk3_deb_ver=0ubuntu3
_libdbusmenu_glib3_pkg_ver=0.4.3
_libdbusmenu_glib3_deb_ver=0ubuntu3

build()
{
  wget "http://ppa.launchpad.net/sikon/steadyflow/ubuntu/pool/main/s/steadyflow/steadyflow_${pkgver}-${_steadyflow_deb_ver}_${_filearch}.deb"
  ar -xv "steadyflow_${pkgver}-0+sikon1~natty1_${_filearch}.deb"
  bsdtar -xvf data.tar.gz -C "${pkgdir}"
  rm data.tar.gz
  wget "http://mirrors.kernel.org/debian/pool/main/libn/libnotify/libnotify1_${_libnotify1_pkg_ver}-${_libnotify1_deb_ver}_${_filearch}.deb"
  ar -xv "libnotify1_${_libnotify1_pkg_ver}-${_libnotify1_deb_ver}_${_filearch}.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  install -Dm644 usr/lib/libnotify.so.1.2.3 "${pkgdir}"/usr/lib/libnotify.so.1
  wget "http://archive.ubuntu.com/ubuntu/pool/main/liba/libappindicator/libappindicator1_${_libappindicator1_pkg_ver}-${_libappindicator1_deb_ver}_${_filearch}.deb"
  ar -xv "libappindicator1_${_libappindicator1_pkg_ver}-${_libappindicator1_deb_ver}_${_filearch}.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  install -Dm644 usr/lib/libappindicator.so.1.0.0 "${pkgdir}"/usr/lib/libappindicator.so.1
  wget "http://archive.ubuntu.com/ubuntu/pool/main/libi/libindicator/libindicator3_${_libindicator3_pkg_ver}-${_libindicator3_deb_ver}_${_filearch}.deb"
  ar -xv "libindicator3_${_libindicator3_pkg_ver}-${_libindicator3_deb_ver}_${_filearch}.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  install -Dm644 usr/lib/libindicator.so.3.0.0 "${pkgdir}"/usr/lib/libindicator.so.3
  wget "http://archive.ubuntu.com/ubuntu/pool/main/libd/libdbusmenu/libdbusmenu-gtk3_${_libdbusmenu_gtk3_pkg_ver}-${_libdbusmenu_gtk3_deb_ver}_${_filearch}.deb"
  ar -xv "libdbusmenu-gtk3_${_libdbusmenu_gtk3_pkg_ver}-${_libdbusmenu_gtk3_deb_ver}_${_filearch}.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  install -Dm644 usr/lib/libdbusmenu-gtk.so.3.0.14 "${pkgdir}"/usr/lib/libdbusmenu-gtk.so.3
  wget "http://archive.ubuntu.com/ubuntu/pool/main/libd/libdbusmenu/libdbusmenu-glib3_${_libdbusmenu_glib3_pkg_ver}-${_libdbusmenu_glib3_deb_ver}_${_filearch}.deb"
  ar -xv "libdbusmenu-glib3_${_libdbusmenu_glib3_pkg_ver}-${_libdbusmenu_glib3_deb_ver}_${_filearch}.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  install -Dm644 usr/lib/libdbusmenu-glib.so.3.0.14 "${pkgdir}"/usr/lib/libdbusmenu-glib.so.3
}
