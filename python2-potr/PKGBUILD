# Maintainer: Michael DÃ¼ll <mail@akurei.me>

pkgname=python2-potr
pkgver=1.0.0
pkgrel=4
pkgdesc="This is a pure Python2 OTR implementation; it does not bind to libotr."
arch=(any)
url="https://github.com/afflux/pure-python-otr"
license=('LGPL')
depends=('python2' 'python2-crypto')
conflicts=('python-potr-git' 'python-potr')
replaces=('python-potr')
#options=(!emptydirs)
source=("https://github.com/afflux/pure-python-otr/tarball/${pkgver}")

PYTHON=`which python2`

#build() {
#  cd $srcdir/afflux*
#  set_python2
#  $PYTHON ./setup.py build
#}

prepare() {
  cd $srcdir/afflux*
  set_python2
}

package() {
  cd $srcdir/afflux*
  $PYTHON ./setup.py install --root=$pkgdir/
}

# To use python2 instead of default python v3.
set_python2() {
  for file in $(find . -name '*.py' -print); do
    sed -i 's_^#!.*/usr/bin/python_#!/usr/bin/python2_' "${file}"
    sed -i 's_^#!.*/usr/bin/env.*python_#!/usr/bin/env python2_' "${file}"
  done
}


# vim:set ts=2 sw=2 et:
sha512sums=('cf5b2f0787acda237a4d67cbef99f51f060b81a54b1d4fe8ebdf620729bac6f50412ebe8402e68469b956d9782025bc7fea2ad677af3fa66582132ff55bac2a0')
