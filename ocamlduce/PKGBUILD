# Maintainer: spider-mario <spidermario@free.fr>
# Contributor: Guillem Rieu <guillemr@gmx.net>
pkgname=ocamlduce
pkgver=3.12.0
_name=cduce
_ver=0.5.3
pkgrel=1
pkgdesc="A modified version of OCaml with CDuce features (XML expressions, regular expression types...)"
arch=(i686 x86_64)
url="http://www.cduce.org/ocaml"
license=('custom:MIT')
groups=('devel')
depends=('ocaml' 'ocaml-findlib' 'pcre-ocaml' 'ulex' 'ocamlnet' 'ocaml-pxp')
options=('!strip' '!makeflags')
source=(http://www.cduce.org/download/$_name-$_ver.tar.gz
        http://caml.inria.fr/pub/distrib/ocaml-3.12/ocaml-3.12.0.tar.gz)
md5sums=('5506326db28419b3f578ff225417448f'
         '3ba7cc65123c3579f14e7c726d3ee782')

build() {
  cd "$srcdir/$_name-$_ver"

  ./configure --prefix=/usr --mliface="$srcdir/ocaml-3.12.0"
  make
}

package() {
  cd "$srcdir/$_name-$_ver"

  mkdir -p "$pkgdir/$(ocamlfind printconf destdir)"

  export OCAMLFIND_DESTDIR="$pkgdir/$(ocamlfind printconf destdir)"

  make BINDIR="$pkgdir/usr/bin" MANDIR="$pkgdir/usr/share/man" DOCDIR="$pkgdir/usr/share/doc/ocamlduce" install

  mkdir -p "$pkgdir/usr/share/licenses/ocamlduce"
  install LICENSE "$pkgdir/usr/share/licenses/ocamlduce/"
}

# vim:set ts=2 sw=2 et:
