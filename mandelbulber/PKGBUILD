# Maintainer: Wilfried Fauvel <wilfried.fauvel at gmail>

pkgname=mandelbulber
pkgver=0.97
pkgrel=2
pkgdesc='Mandelbulber is an easy to use, handy but experimental application designed to help you render 3D Mandelbrot fractals called Mandelbulb and some other kind of 3D fractals like Mandelbox, Bulbbox, Juliabulb, Menger Sponge.'
arch=('i686' 'x86_64')
url='http://mandelbulber.sourceforge.net'
license=('GPL')
depends=('gtk2' 'libjpeg' 'libsndfile')
source=(http://downloads.sourceforge.net/project/${pkgname}/${pkgname}${pkgver}.tar.gz )
install=mandelbulber.install
md5sums=('07ad10bfac2d62f5f0838f1569e2a2e8')

build() {
  cd ${srcdir}/${pkgname}${pkgver}/src/Release

  # Clean up pre-compiled binaries
  make clean || return 1

  # Build
  make all || return 1

  # Install
  install -m755 -d "${pkgdir}/usr/share/${pkgname}"
  install -m755 -d "${pkgdir}/usr/bin"
  install -Dm755 "${srcdir}/${pkgname}${pkgver}/src/Release/${pkgname}" \
                 "${pkgdir}/usr/bin/" || return 1

  install -m755 -d "${pkgdir}/usr/share/${pkgname}/.${pkgname}"
  mv ${srcdir}/${pkgname}${pkgver}/.${pkgname} ${pkgdir}/usr/share/${pkgname}/
  chmod -R 755 ${pkgdir}/usr/share/${pkgname}/.${pkgname}
}

