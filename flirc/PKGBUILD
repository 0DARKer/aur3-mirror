# Maintainer: cornholio <vigo.the.unholy.carpathian@gmail.com>

pkgname=flirc
pkgver=1.2.2
pkgrel=2
pkgdesc="Take control of your media center and the clutter off your living room table"
arch=("i686" "x86_64" "armv6h")
url="http://flirc.tv"
license=("GPL")

if [[ "$CARCH" == 'i686' ]]; then
	depends=("qt4" "libusbx")
	source=("http://downloads.flirc.tv/release/gui/linux/Flirc-v${pkgver}.zip" "51-flirc.rules" "Flirc.desktop" "Flirc.png")
	sha1sums=('e1fe9c616f3aeef07f836948a88ed42f66492d93' 'dec59eb14109e2cc26ac0b9c099dd37b51357225' '91678f551295e0c044ee012b92c9a9b7f3e33332' '0b0a7346dd6e8d0c430e7cb0328ee403bd1b62b8')
fi
if [[ "$CARCH" == 'x86_64' ]]; then
	depends=("qt4" "libusbx")
	source=("http://downloads.flirc.tv/release/gui/linux/Flirc-v${pkgver}-x64.zip" "51-flirc.rules" "Flirc.desktop" "Flirc.png")
	sha1sums=('f2728488dc2e78a9b1d81d0b7ba6e4f67abdfc18' 'dec59eb14109e2cc26ac0b9c099dd37b51357225' '91678f551295e0c044ee012b92c9a9b7f3e33332' '0b0a7346dd6e8d0c430e7cb0328ee403bd1b62b8')
fi
if [[ "$CARCH" == 'armv6h' ]]; then
	depends=("libusbx")
	source=("http://downloads.flirc.tv/release/gui/linux/Flirc-v${pkgver}.zip" "51-flirc.rules" "Flirc.desktop" "Flirc.png")
	sha1sums=('e1fe9c616f3aeef07f836948a88ed42f66492d93' 'dec59eb14109e2cc26ac0b9c099dd37b51357225' '91678f551295e0c044ee012b92c9a9b7f3e33332' '0b0a7346dd6e8d0c430e7cb0328ee403bd1b62b8')
fi


build() {

	cd "${srcdir}"
}

package() {

	mkdir -p "${pkgdir}/etc/udev/rules.d"
	cp -L "${srcdir}/51-flirc.rules" "${pkgdir}/etc/udev/rules.d/"

	if [[ "$CARCH" == 'armv6h' ]]; then
		mkdir "${pkgdir}/usr"
		mv "${srcdir}/release/rpi" "${pkgdir}/usr/bin"
	
	else
		mkdir -p "${pkgdir}/usr/share/pixmaps"
		mkdir -p "${pkgdir}/usr/share/applications"
		cp -L "${srcdir}/Flirc.desktop" "${pkgdir}/usr/share/applications/"
		cp -L "${srcdir}/Flirc.png" "${pkgdir}/usr/share/pixmaps/"
		if [[ "$CARCH" == 'i686' ]]; then
			mv "${srcdir}/release/linux" "${pkgdir}/usr/bin"
		else
			mv "${srcdir}/Flirc-v${pkgver}-x64" "${pkgdir}/usr/bin"
		fi
	fi
}
