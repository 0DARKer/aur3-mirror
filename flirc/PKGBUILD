# Maintainer: cornholio <vigo.the.unholy.carpathian@gmail.com>

pkgname=flirc
pkgver=1.2.6
pkgrel=1
pkgdesc="Take control of your media center and the clutter off your living room table"
arch=("i686" "x86_64" "armv6h")
url="http://flirc.tv"
license=("GPL")

if [[ "$CARCH" == 'i686' ]]; then
	depends=("qt4" "libusbx")
	source=("http://downloads.flirc.tv/release/gui/linux/Flirc-v${pkgver}.zip" "51-flirc.rules" "Flirc.desktop" "Flirc.png")
	sha1sums=('03a4194c81d43ed56eda2c8c9dec0869c24256e5' 'dec59eb14109e2cc26ac0b9c099dd37b51357225' '91678f551295e0c044ee012b92c9a9b7f3e33332' '0b0a7346dd6e8d0c430e7cb0328ee403bd1b62b8')
fi
if [[ "$CARCH" == 'x86_64' ]]; then
	depends=("qt4" "libusbx")
	source=("http://downloads.flirc.tv/release/gui/linux/Flirc-v${pkgver}-x64.zip" "51-flirc.rules" "Flirc.desktop" "Flirc.png")
	sha1sums=('0f7e8432566f1bda2505e6173063445a17069655' 'dec59eb14109e2cc26ac0b9c099dd37b51357225' '91678f551295e0c044ee012b92c9a9b7f3e33332' '0b0a7346dd6e8d0c430e7cb0328ee403bd1b62b8')
fi
if [[ "$CARCH" == 'armv6h' ]]; then
	depends=("libusbx")
	source=("http://downloads.flirc.tv/release/gui/linux/Flirc-v${pkgver}.zip" "51-flirc.rules" "Flirc.desktop" "Flirc.png")
	sha1sums=('03a4194c81d43ed56eda2c8c9dec0869c24256e5' 'dec59eb14109e2cc26ac0b9c099dd37b51357225' '91678f551295e0c044ee012b92c9a9b7f3e33332' '0b0a7346dd6e8d0c430e7cb0328ee403bd1b62b8')
fi

package() {

	mkdir -p "${pkgdir}/etc/udev/rules.d"
	cp -L "${srcdir}/51-flirc.rules" "${pkgdir}/etc/udev/rules.d/"

	if [[ "$CARCH" == 'armv6h' ]]; then
		mkdir "${pkgdir}/usr"
		mv "${srcdir}/release/rpi" "${pkgdir}/usr/bin"
	
	else
		mkdir -p "${pkgdir}/usr/share/pixmaps"
		mkdir -p "${pkgdir}/usr/share/applications"
		cp -L "${srcdir}/Flirc.desktop" "${pkgdir}/usr/share/applications/"
		cp -L "${srcdir}/Flirc.png" "${pkgdir}/usr/share/pixmaps/"
		if [[ "$CARCH" == 'i686' ]]; then
			mv "${srcdir}/release/linux" "${pkgdir}/usr/bin"
		else
			mv "${srcdir}/Flirc-v${pkgver}-x64" "${pkgdir}/usr/bin"
		fi
	fi
}
