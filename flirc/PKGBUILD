# Maintainer: cornholio <vigo.the.unholy.carpathian@gmail.com>

pkgname=flirc
pkgver=1.2.2
pkgrel=1
pkgdesc="Take control of your media center and the clutter off your living room table"
arch=("i686" "x86_64" "armv6h")
url="http://flirc.tv"
license=("GPL")

if [[ "$CARCH" == 'i686' ]]; then
	depends=("qt4" "libusbx")
	source=("http://apt.flirc.tv/arch/x64/binary/flirc_0.96-1_amd64.deb" "http://downloads.flirc.tv/release/gui/linux/Flirc-v${pkgver}.zip")
	sha1sums=('a0ab3cd514271a4220a43203c4bd4fb51c60502a' 'e1fe9c616f3aeef07f836948a88ed42f66492d93')
fi
if [[ "$CARCH" == 'x86_64' ]]; then
	depends=("qt4" "libusbx")
	source=("http://apt.flirc.tv/arch/x64/binary/flirc_0.96-1_amd64.deb" "http://downloads.flirc.tv/release/gui/linux/Flirc-v${pkgver}-x64.zip")
	sha1sums=('a0ab3cd514271a4220a43203c4bd4fb51c60502a' 'f2728488dc2e78a9b1d81d0b7ba6e4f67abdfc18')
fi
if [[ "$CARCH" == 'armv6h' ]]; then
	depends=("libusbx")
	source=("http://apt.flirc.tv/arch/x64/binary/flirc_0.96-1_amd64.deb" "http://downloads.flirc.tv/release/gui/linux/Flirc-v${pkgver}.zip")
	sha1sums=('a0ab3cd514271a4220a43203c4bd4fb51c60502a' 'e1fe9c616f3aeef07f836948a88ed42f66492d93')
fi


build() {

	cd "${srcdir}"
	tar xzf data.tar.gz
}

package() {

	cp -r "${srcdir}/etc" "${pkgdir}/"

	if [[ "$CARCH" == 'armv6h' ]]; then
		mkdir "${pkgdir}/usr"
		mv "${srcdir}/release/rpi" "${pkgdir}/usr/bin"
	
	else
		mkdir -p "${pkgdir}/usr/share"
		cp -r "${srcdir}/usr/share/pixmaps" "${pkgdir}/usr/share/"
		cp -r "${srcdir}/usr/share/applications" "${pkgdir}/usr/share/"
		if [[ "$CARCH" == 'i686' ]]; then
			mv "${srcdir}/release/linux" "${pkgdir}/usr/bin"
		else
			mv "${srcdir}/Flirc-v${pkgver}-x64" "${pkgdir}/usr/bin"
		fi
	fi
}
