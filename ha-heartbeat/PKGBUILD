# Maintainer: Lucio zara <pennegaatgmaildotcom>

pkgname=ha-heartbeat
pkgver=3.0.3
pkgrel=2
pkgdesc="Daemon that provides cluster infrastructure services to its clients"
arch=('i686' 'x86_64')
url="http://linux-ha.org/wiki/Heartbeat"
license=('GPL')
makedepends=('docbook-xsl')
depends=('ha-glue' 'gnutls')
source=("http://hg.linux-ha.org/heartbeat-STABLE_3_0/archive/STABLE-${pkgver}.tar.bz2")
md5sums=('7277c3a5baefc2562b79684a67fff1a9')
options=('!libtool' 'strip')
build() {
	CLUSTER_USER=hacluster
	CLUSTER_GROUP=haclient
	PREFIX=/usr
	PREFIXETC=/etc
	PREFIXINIT=${PREFIXETC}/rc.d
	PREFIXVAR=/var
	cd "${srcdir}/Heartbeat-3-0-STABLE-${pkgver}"
	./bootstrap
	./configure \
		--prefix=$PREFIX 					\
		--localstatedir=${PREFIXVAR} 		\
		--sysconfdir=${PREFIXETC}			\
		--with-initdir=${PREFIXINIT}		\
		--enable-static=no					\
		--enable-fatal-warnings=no
	make || return 1
	make DESTDIR="${pkgdir}" install || return 1
}