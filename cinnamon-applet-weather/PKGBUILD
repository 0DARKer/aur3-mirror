# Maintainer: ktalog <thektalog@gmail.com>

pkgname=cinnamon-applet-weather
pkgver=1.0
pkgrel=1
pkgdesc="Cinnamon applet"
arch=('any')
url="http://cinnamon-spices.linuxmint.com/applets/view/17"
license=('GPL')
depends=('cinnamon' 'gtk3' 'dconf')
install=$pkgname.install
source=('http://cinnamon-spices.linuxmint.com/uploads/applets/1OF1-JK0C-X9BP.zip')
md5sums=('f8ef3be31bfec83ca44d7e00dd8a051c')

build() {
	cd ${srcdir}/cinnamon-weather/
	
	cinnamon_dir="$pkgdir/usr/share/cinnamon/applets/cinnamon-weather@mockturtl"
	bin_dir="$pkgdir/usr/bin"
	gschema_dir="$pkgdir/usr/share/glib-2.0/schemas"

	mkdir -p $cinnamon_dir
	mkdir -p $bin_dir
	mkdir -p $gschema_dir
	
	#fix cinnamon-weather-settings
	sed -i 's|CinnamonWeatherSettings|WeatherConfigurator|' "cinnamon-weather-settings" 
	
	cp -f metadata.json applet.js $cinnamon_dir
	cp -f cinnamon-weather@mockturtl.gschema.xml $gschema_dir
	cp -f cinnamon-weather-settings $bin_dir
}
