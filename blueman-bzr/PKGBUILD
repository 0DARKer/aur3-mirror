# Maintainer: Marcus Ekwall (mekwall) <marcus.ekwall@gmail.com>
# Updated to use bazaar by Bence Szab√≥ <szbence@gmail.com>
# Based on pkgbuild by Abhishek Dasgupta <abhidg@gmail.com>

pkgname=blueman-bzr
pkgver=639
pkgrel=1
pkgdesc="GTK+ bluetooth management utility"
arch=('i686' 'x86_64')
license=('GPL')
install=$pkgname.install
url="http://blueman-project.org"
depends=('gnome-python' 'python-notify' 'python-pybluez' 'bluez>=4.21' 'dbus-python' 'gnome-python' 'gtk2>=2.12' 'glib2>=2.12' 'pygobject>=2.12' 'intltool' 'libbtctl>=0.10.0-2' 'gconf>=2.0' 'startup-notification>=0.9' 'hicolor-icon-theme')
makedepends=('bzr' 'pyrex' 'pkgconfig')
optdepends=("gnome-bluetooth: Send files over bluetooth"
	    "gnome-vfs-obexftp, nautilus: To view OBEX ftp shares"
	    "btsco: For bluetooth audio")
conflicts=('blueman' 'blueman-svn')
source=('blueman-bzr.install')
md5sums=('79f231bdcaa24ae0d7f4f9c10e33b384')

_bazaarbranch="lp:blueman"
_bazaarmod="blueman"

build() {
  cd $startdir/src
  msg "Connecting to bazaar server...."
  bzr branch $_bazaarbranch

  msg "Bazaar checkout done or server timeout"
  msg "Starting make..."
  cd $_bazaarmod
  #
  # BUILD
  #
  ./autogen.sh --prefix=/usr --sysconfdir=/etc --enable-hal

  # clear tmp
  make clean
  make || return 1
  make DESTDIR=$startdir/pkg install || return 1
}
