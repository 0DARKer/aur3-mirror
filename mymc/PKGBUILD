pkgname=mymc
pkgver=2.6
pkgrel=4
pkgdesc="command line utility for working with PlayStation 2 memory card images (.ps2) as used by the PlayStation 2 emulator PCSX2"
arch=(i686 x86_64)
url="http://www.csclub.uwaterloo.ca:11068/mymc"
license=("public domain")
source=("http://www.csclub.uwaterloo.ca:11068/mymc/mymc-pysrc-$pkgver.zip"
"compile.py"
"mymc.sh"
"mymc-gui.sh"
"mymc.desktop")
depends=(python2)
makedepends=(dos2unix)
optdepends=("wxpython: to use mymc-gui")
md5sums=('1aa53a148ceae3a9c0c2a64fe671734d'
				 'f3315a7dc7d0969b000084c7de4c7c4f'
				 '13d7120f6b7a9c91731e570929336638'
				 '57d999fe20a64d2e08cfcd352236459b'
				 'f2354c4dd21e325534e2da231af5498d')

build() {
	mkdir -p "$srcdir/build"
	find $srcdir -name '*.py' -o -name '*.txt' | xargs -rtl1 -I {} mv {} "$srcdir/build"
	cd $srcdir
	find . -type f -exec dos2unix {} \;
	mv "build/compile.py" .
	python2 compile.py
}
package() {
	cd "$srcdir/build"
	find . -name '*.py' -o -name '*.pyc' -o -name '*.txt' | xargs -rtl1 -I {} install -Dm644 {} "$pkgdir/usr/lib/mymc/"{}
	install -Dm755 "$srcdir/mymc.sh" "$pkgdir/usr/bin/mymc"
	install -m755 "$srcdir/mymc-gui.sh" "$pkgdir/usr/bin/mymc-gui"
	install -Dm644 "$srcdir/mymc.desktop" "$pkgdir/usr/share/applications/mymc.desktop"
	install -Dm644 README.txt "$pkgdir/usr/share/licenses/$pkgname/README.txt"
}
