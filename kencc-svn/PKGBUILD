# Maintainer: Jens Staal <staal1978@gmail.com>

pkgname=kencc-svn
pkgver=20100731
pkgrel=1
pkgdesc="A port of the plan9 c-compiler, including its POSIX mode"
arch=('i686')
license=('MIT''custom:LPL')
url="http://gsoc.cat-v.org/projects/kencc/"
depends=('plan9') #9base or plan9port
makedepends=('subversion')
source=('configure')
md5sums=('1ead297e7563ee42ad6801cd824c270b')


build() {
  cd $srcdir

# Update the repo, else clone a new one
	if [ -d ken-cc-read-only ]; then
		cd ken-cc-read-only
		svn up
		cd $srcdir
	else
		svn checkout http://ken-cc.googlecode.com/svn/trunk/ ken-cc-read-only
	fi


  rm -rf $srcdir/build
  cp -ar $srcdir/ken-cc-read-only $srcdir/build
  cd $srcdir/build
  cp $srcdir/configure $srcdir/build/configure
  ./configure
  PATH=$srcdir/build/bin:/opt/plan9/bin:$PATH
  mk
  mk install
}

package() {
  mkdir -p $pkgdir/opt/plan9/bin

  install -m755 $srcdir/build/bin/* $pkgdir/opt/plan9/bin/
#  install -Dm644 $srcdir/kenc/LICENCE $pkgdir/usr/share/licences/kencc/LICENCE
}