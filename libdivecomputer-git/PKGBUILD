# Maintainer: Francois Boulogne <fboulogne at april dot org>
pkgname=libdivecomputer-git
pkgver=v0.4.0.r14.gc524986
pkgrel=1
pkgdesc="library for communication with dive computers from various manufacturers"
arch=('i686' 'x86_64')
url="http://www.divesoftware.org/"
license=('LGPL')
depends=()
optdepends=()
makedepends=('git' 'make')
provides=()
conflicts=('libdivecomputer')
source=("git://libdivecomputer.git.sourceforge.net/gitroot/libdivecomputer/libdivecomputer")
md5sums=('SKIP')


pkgver() {
      cd "$srcdir/libdivecomputer"
      git describe --long | sed -E 's/([^-]*-g)/r\1/;s/-/./g'
}


build() {

  cd "$srcdir/libdivecomputer"

  #
  # BUILD HERE
  #
  #Fix for automake > 1.12
  sed -i -e "s/# Initialize libtool\./m4_ifdef([AM_PROG_AR], [AM_PROG_AR])/" configure.ac
  autoreconf -i
  ./configure --prefix=/usr
  make
}

package() {
  cd "$srcdir/libdivecomputer"
  make DESTDIR="$pkgdir" install
}

# vim:set ts=2 sw=2 et:
