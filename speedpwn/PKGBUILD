# Maintainer: Smith314 <smith-@live.de>

pkgname=speedpwn
pkgver=20110902
pkgrel=1
pkgdesc="Active WPA/2 Bruteforcer, original created to prove weak standard key generation in different ISP labeled routers"
arch=('i686' 'x86_64')
url="http://gitorious.org/speedpwn"
license=('GPLv3')
depends=('openssl')
makedepends=('git')
provides=('speedpwn')
source=(http://download.aircrack-ng.org/aircrack-ng-1.1.tar.gz http://smith.freeunix.net/patch-common)
md5sums=('f7a24ed8fad122c4187d06bfd6f998b4' '6191a238e4f8110900a1a3621238d19f')

_gitroot="git://gitorious.org/speedpwn/speedpwn.git"
_gitname="speedpwn"

build() {
	cd "${srcdir}"
	tar xfz aircrack-ng-1.1.tar.gz
	cd aircrack-ng-1.1
	patch -p1 < ../patch-common
	cd "src/"
	msg "Connecting to GIT server..."
	if [ -d ${_gitname} ]; then
		cd "${_gitname}" && git pull origin
		msg "The local files are updated."
		cd "../"
	else
		git clone "${_gitroot}" "${_gitname}"
	fi
	cp ${_gitname}/* .
	cd osdep
	make
	cd "../"
	gcc -o ${srcdir}/speedpwn speedpwn.c common.c osdep/libosdep.a crypto.c -lssl
}

package() {
	cd ${srcdir}
	install -D -m755 speedpwn "$pkgdir/usr/bin/speedpwn"
}
