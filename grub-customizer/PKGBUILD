# Maintainer: eBait <info@ebait.org>

pkgname=grub-customizer
pkgver=70
pkgrel=1
pkgdesc="GUI for customizing GRUB2 or BURG"
url="https://launchpad.net/grub-customizer"
arch=('i686' 'x86_64')
license=("GPL3")
groups=()
depends=('cmake' 'gettext' 'gtkmm')
optdepends=()
makedepends=('bzr')
provides=(grub-customizer)
conflicts=()
replaces=()
backup=()
options=()
install=
source=()
noextract=()
md5sums=()

_bzrmod=grub-customizer
_bzrtrunk=lp:${_bzrmod}

build() {
cd $srcdir/

msg "Connecting to the server..."
if [ ! -d ./${_bzrmod} ]; then
bzr branch ${_bzrtrunk} -r ${pkgver}
else
cd ${_bzrmod} && bzr pull -r ${pkgver}
fi
msg "BZR checkout done or server timeout."

cd "${srcdir}/${_bzrmod}"

msg "Starting make..."
cmake .&& make
make install DESTDIR=$pkgdir || return 1

msg "Moving some files for the Arch Packaging Standards..."
cd $pkgdir/usr/local/
mv bin $pkgdir/usr
mv lib $pkgdir/usr
cd share
mv * $pkgdir/usr/share
cd $pkgdir/usr
rm local -R
}

