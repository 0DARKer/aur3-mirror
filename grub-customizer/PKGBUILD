# Maintainer: David Runge <david[d]runge[a]frqrec[d]com>
pkgname=grub-customizer
pkgver=2.5.5
pkgbranch=2.5
pkgrel=1
pkgdesc="Customize the bootloader (GRUB2 or BURG)"
url="https://launchpad.net/grub-customizer"
arch=('i686' 'x86_64')
license=("GPL3")
depends=('gettext' 'gtkmm' 'openssl' 'hicolor-icon-theme' 'gksu')
optdepends=('hwinfo')
makedepends=('cmake')
provides=(grub-customizer)
backup=('etc/grub-customizer/grub.cfg')
options=()
install=${pkgname}.install
source=("http://launchpad.net/${pkgname}/${pkgbranch}/${pkgver}/+download/${pkgname}_${pkgver}.tar.gz" \
        grub.cfg)
md5sums=('00054ddc903e5b8dd87c6aa26e1b825a' \
         'f914f23d66341925238fd0d1922d2b85')

build() {
cd ${srcdir}/
msg "Starting make..."
cmake .&& make
make install DESTDIR=${pkgdir} || return 1
msg "Converting package"
mv ${pkgdir}/usr/local/share/* ${pkgdir}/usr/share
rmdir ${pkgdir}/usr/local/share
mv ${pkgdir}/usr/local/* ${pkgdir}/usr/
rm -r ${pkgdir}/usr/local
msg "Fixing grub-customizer.desktop file"
sed -i '/^Exec=/s/grub-customizer$/gksu\ grub-customizer/' ${pkgdir}/usr/share/applications/grub-customizer.desktop
sed -i '/^X-Ubuntu/d' ${pkgdir}/usr/share/applications/grub-customizer.desktop
msg "Installing custom config to: /etc/grub-customizer/grub.cfg"
install -d ${pkgdir}/etc/grub-customizer
install -Dm644 ${srcdir}/grub.cfg ${pkgdir}/etc/grub-customizer/grub.cfg
}
# vim:set ts=2 sw=2 et:
