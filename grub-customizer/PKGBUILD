# Maintainer: eBait <info@ebait.org>

pkgname=grub-customizer
pkgver=2.5.3
pkgbranch=2.5
pkgrel=1
pkgdesc="GUI for customizing GRUB2 or BURG"
url="https://launchpad.net/grub-customizer"
arch=('i686' 'x86_64')
license=("GPL3")
groups=()
depends=('cmake' 'gettext' 'gtkmm' 'openssl')
optdepends=('hwinfo')
makedepends=()
provides=(grub-customizer)
conflicts=()
replaces=()
backup=()
options=()
install=
source=(http://launchpad.net/$pkgname/$pkgbranch/$pkgver/+download/$pkgname\_$pkgver.tar.gz)
noextract=()
md5sums=('2dba63d1774907b8d536f55f7110cdc8')

build() {
cd $srcdir/
msg "Starting make..."
cmake .&& make

msg "Installing grub-customizer"
make install DESTDIR=$pkgdir || return 1

msg "Creating Arch specific config"
cd $pkgdir
mkdir etc
mkdir etc/grub-customizer
cd $pkgdir/etc/grub-customizer/
echo "MKCONFIG_CMD=grub-mkconfig" >> grub.cfg
echo "UPDATE_CMD=grub-mkconfig -o /boot/grub/grub.cfg" >> grub.cfg
echo "INSTALL_CMD=grub-install" >>grub.cfg
echo "MKFONT_CMD=grub-mkfont" >>grub.cfg
echo "CFG_DIR=/etc/grub.d" >>grub.cfg
echo "OUTPUT_DIR=/boot/grub" >>grub.cfg
echo "OUTPUT_FILE=/boot/grub/grub.cfg" >>grub.cfg
echo "SETTINGS_FILE=/etc/default/grub" >>grub.cfg

msg "Moving some files for the Arch Packaging Standards..."
cd $pkgdir/usr/local/
mv bin $pkgdir/usr
mv lib $pkgdir/usr
cd share
mv * $pkgdir/usr/share
cd $pkgdir/usr
rm local -R
}

