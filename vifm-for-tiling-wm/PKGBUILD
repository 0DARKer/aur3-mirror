# Maintainer: Carl Mueller  archlinux at carlm e4ward com
# 
# Tiling window managers have trouble with vifm, which shows up
# in only part of the window.  This patch fixes the problem. 

pkgname=vifm-for-tiling-wm
_pkgname=vifm
pkgver=0.5
pkgrel=3
pkgdesc="vifm file manager for tiling window managers"
arch=('i686' 'x86_64')
url="http://vifm.sourceforge.net/"
license=('GPL')
replaces=('vifm')
depends=('ncurses')
source=(http://downloads.sourceforge.net/$_pkgname/$_pkgname-$pkgver.tar.bz2 ncurses58.patch)
md5sums=('76818f02d6acd4997d1f41db932438aa' '49a1e1f299afd18e336cf85dcd5d67e2')
build() {
   cd ${srcdir}/$_pkgname-$pkgver
   patch -Np1 -i $srcdir/ncurses58.patch
   sed -i '284a \
   	\/* Redraw window. *\/\
	redraw_window();\
	curs_set(0);\
	' src/vifm.c
   export CFLAGS="$CFLAGS -g"
   export CXXFLAGS="$CXXFLAGS -g"
   ./configure --prefix=/usr --enable-debug
   make
   make DESTDIR=${pkgdir} install
}
