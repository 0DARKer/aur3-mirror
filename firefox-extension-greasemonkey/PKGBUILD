# Maintainer: Vinycius Maia <suportevg@uol.com.br>

pkgname=firefox-extension-greasemonkey
pkgdesc='Customize the way a web page displays or behaves, by using small bits of JavaScript.'
url=http://www.greasespot.net/
pkgver=1.0
pkgrel=1
arch=(any)
license=(BSD MIT MPL)
depends=("firefox>=3.0" "firefox<16.0")
source=(https://addons.mozilla.org/firefox/downloads/latest/748/addon-748-latest.xpi)
md5sums=('bbd31812fe8f645fe51344fe06b8159c')

package() {
	cd "$srcdir"
	
	emid=$(sed -n '/.*<em:id>\(.*\)<\/em:id>.*/{s//\1/p;q}' install.rdf) || return 1
	sed -i 's#<em:maxVersion>.*</em:maxVersion>#<em:maxVersion>11.*</em:maxVersion>#' install.rdf
	
	install -d "${pkgdir}/usr/lib/firefox/extensions/${emid}"
	mv * "${pkgdir}/usr/lib/firefox/extensions/${emid}"
	rm "${pkgdir}/usr/lib/firefox/extensions/${emid}/addon-748-latest.xpi"
	chmod -R 755 "${pkgdir}/usr/lib/firefox/extensions/${emid}"
}

