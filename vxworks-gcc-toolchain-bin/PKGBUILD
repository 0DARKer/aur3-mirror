#Maintainer: Alex Brinister (alex_brinister@yahoo.com)
pkgname=vxworks-gcc-toolchain-bin
pkgver=1.3
pkgrel=1
pkgdesc="A GCC toolchain for VxWorks 6.3 C/C++ developement - binaries"
arch=('i686' 'x86_64')
url="http://firstforge.wpi.edu/sf/projects/c--11_toochain"
license=('GPL')
provides=('vxworks-gcc-toolchain')
depends=('zlib' 'cloog' 'isl' 'xz' 'expat')
options=('!strip' '!libtool' '!zipman')
install=$pkgname.install
if test "$CARCH" == i686; then
	source=(
		https://www.dropbox.com/s/08ltbwu8byu5z43/$pkgname-$pkgver-$CARCH.tar.xz
		VXWORKS_LICENSE
)
	sha512sums=(
		e118e408feb2edad7153979f4ba5a90e5bcf51e0a3f138239b665825c0adff415e363c6bab15d8ea8292f59a0a916628d0e5d1bb89b04675111c5c900ec6a796
		72b3925f853d8e8bc26594cda084b3cb66a11e4fe206bb1c5e219e7c43cc56022e377f9f9822f4a8e13555a33fe9e695cddc8ac4f92c02e4f491419dd6d07c45
)
else
	source=(
		https://www.dropbox.com/s/rwcjrhtrfezi0wg/$pkgname-$pkgver-$CARCH.tar.xz
		VXWORKS_LICENSE
)
	sha512sums=(
		9f130f4cce12376d6638a649f7b963c0dd5e128a19f231348892cb9c43ae00dc8c5b8b917b13054f273a6ac77a3052cecbb3ec3d296591d1c24ca2c0ff1d06c0			
		72b3925f853d8e8bc26594cda084b3cb66a11e4fe206bb1c5e219e7c43cc56022e377f9f9822f4a8e13555a33fe9e695cddc8ac4f92c02e4f491419dd6d07c45
)
fi

package(){
  cd $srcdir
  tar -xJf $pkgname-$pkgver-$CARCH.tar.xz

  cd "$pkgname-$pkgver"
  cp -dpr --no-preserve=ownership ./usr $pkgdir/

  cd $startdir && install -D -m644 VXWORKS_LICENSE "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
}
