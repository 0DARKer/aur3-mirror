# Maintainer: ValHue <vhuelamo_at_gmail_dot_com>

pkgname=multisystem
pkgver=1.0249
pkgrel=1
pkgdesc="A GUI tool to create a usb system that can boot multiple distro's"
url="http://liveusb.info/dotclear/index.php"
arch=('i686' 'x86_64')
license=('GPL3')
depends=('cdrkit' 'cryptsetup' 'dosfstools' 'gksu' 'grub-bios' 'gtkdialog' 'gvfs' 'hdparm' 'imagemagick' 'lsb-release' 'lsof' 'mtools' 'qemu-kvm' 'rsync' 'squashfs-tools' 'sudo' 'syslinux' 'unzip' 'wmctrl' 'xdotool' 'xterm' 'xxd' 'zenity')
optdepends=('fatresize: The FAT16/FAT32 non-destructive resizer.')
source=("http://liveusb.info/multisystem/${pkgname}.tar.bz2" 'update-grub2' 'multisystem-liveusb.desktop' 'multisystem-vbox.desktop')
md5sums=('12536d862f6803d28cd2480e6740736a'
         '9363ccaa6f7cd907e48b76d5acb24319'
         'fcbd4d83f639d89675210236fb62f885'
         '45b2d475a24af0a4a3554d29e7cbe0fc')

build() {
    cd "${srcdir}/${pkgname}"

    sed -i '/fatresize/d' dependances.txt
    sed -i '227,236d' gui_multisystem.sh

    mkdir -p ${pkgdir}/usr/local/share/${pkgname}
    mv * ${pkgdir}/usr/local/share/${pkgname}
    mkdir -p ${pkgdir}/usr/share/applications
    mkdir -p ${pkgdir}/usr/local/share/pixmaps
    mkdir -p ${pkgdir}/bin

    cp ${srcdir}/*.desktop ${pkgdir}/usr/share/applications
    cp ${srcdir}/update-grub2 ${pkgdir}/bin
    cp ${pkgdir}/usr/local/share/${pkgname}/img/*.png ${pkgdir}/usr/local/share/pixmaps
    cp ${pkgdir}/usr/local/share/${pkgname}/pixmaps/multisystem-liveusb.png ${pkgdir}/usr/local/share/pixmaps
    cp ${pkgdir}/usr/local/share/${pkgname}/pixmaps/multisystem-vbox.png ${pkgdir}/usr/local/share/pixmaps
}
