# Maintainer : Keshav P R <skodabenz at rocketmail dot com>
# Contributor: Alessio 'mOLOk' Bolognino <themolok@gmail.com>

_ver="3.0"

pkgname="gnu-efi"
pkgver="${_ver}l"
pkgrel=1
pkgdesc="Library for building UEFI Applications"
url="http://sourceforge.net/projects/gnu-efi/"
license=('GPL')
arch=('i686' 'x86_64')
makedepends=()
depends=('pciutils')
options=(!strip)

source=("http://download.sourceforge.net/gnu-efi/gnu-efi_${pkgver}.orig.tar.gz"
		'efipciio.h')

sha256sums=('0eb6d68f250c1f439c1ee98a5a713ab8ef7ba84ee32e3945dd355f16aeef6880'
			'4db4ede136224d51a7e7e798de98e30d42c6023f4b262cfe2f0f4bb00d8d1665')

build() {
	
	cd "${srcdir}/gnu-efi-${_ver}"
	
	## Apply patch to correct make error for static libs
	# patch -Np1 -i "${srcdir}/gnu-efi_static_libs_make_error.patch"
	
	## Add the missing header file
	install -D -m644 "${srcdir}/efipciio.h" "${srcdir}/gnu-efi-${_ver}/inc/efipciio.h"
	echo
	
	CFLAGS="" make
	echo
	
}

package() {
	
	cd "${srcdir}/gnu-efi-${_ver}"
	
	make INSTALLROOT="${pkgdir}/usr/" install
	echo
	
}
