# Contributor: Tilman Blumenbach <tilman (at) ax86 (dot) net>

pkgname='geonext'
pkgver='1.73'
pkgrel=6
pkgdesc='Dynamic mathematics software, tool for creating geometric constructions.'
arch=('i686' 'x86_64')
url='http://geonext.uni-bayreuth.de'
license=('GPL')
depends=('java-runtime')
source=("http://geonext.uni-bayreuth.de/data/download/${pkgver}/geonext.${pkgver}.zip"
	'geonext.sh')
noextract=("geonext.${pkgver}.zip")
md5sums=('213903394a95a59e316dd58de1ec8d98'
	 '1513455f755a4e718b40e063ac06d13f')

build()
{
	mkdir -p "${pkgdir}/opt" "${pkgdir}/usr/bin"
	cd "${pkgdir}/opt"

	# Unzip the geonext files
	unzip "${srcdir}/${noextract[0]}"
	mv geonext_install geonext
	rm -f geonext/install
	
	# Set permissions
	chmod 755 geonext
	chmod 644 geonext/*

	# Copy the startup script
	cp "${srcdir}/geonext.sh" "${pkgdir}/usr/bin/geonext"
	chmod 755 "${pkgdir}/usr/bin/geonext"

	return 0
}
