# Maintainer: Laurent Carlier <lordheavym@gmail.com>
# Contributor: Thomas Dziedzic < gostrc at gmail >

pkgname='mupen64plus-beta'
pkgver='1.99.4'
pkgrel='1'
pkgdesc='Nintendo64 Emulator (beta build)'
arch=('i686' 'x86_64')
url='http://code.google.com/p/mupen64plus/'
license=('GPL2')
depends=('mesa' 'libsamplerate' 'libpng' 'sdl' 'freetype2')
source=("http://mupen64plus.googlecode.com/files/mupen64plus-bundle-src-$pkgver.tar.gz")
md5sums=('81c4f11c341d7ea4dbd81cf2f0467dc2')
provides=('mupen64plus')
conflicts=('mupen64plus')

build() {
  cd mupen64plus-bundle-src-$pkgver

  ./m64p_build.sh
}

package() {
  cd mupen64plus-bundle-src-$pkgver

  # set LDCONFIG since we are using fakeroot and scripts run root commands by checking the uid
  ./m64p_install.sh DESTDIR="$pkgdir" PREFIX='/usr' MANDIR='/usr/share/man' LDCONFIG='true'
}
