#Maintainer: Xyne <ac xunilhcra enyx, backwards>
pkgname=autochown
pkgver=2013.3.4
pkgrel=2
pkgdesc='Monitor multiple directories using glob patterns and automatically adjust file ownership and permissions.'
arch=(i686 x86_64)
license=(GPL)
url="http://xyne.archlinux.ca/projects/autochown"
makedepends=(cmake rabbit_tree)
source=(
  http://xyne.archlinux.ca/projects/autochown/src/autochown-2013.3.4.tar.xz
  http://xyne.archlinux.ca/projects/autochown/src/autochown-2013.3.4.tar.xz.sig
)
sha512sums=(
  7253f2be29c705f4f5bfaf5f3d4c6cb5be0789744436c6f4adcaef7ef9f4b1468424dfbd975a35d5d8892e1ffdbb422d90b7248e57d0731d41dafb702ed8da1a
  57dceacad2dbdf2b1cca237064b1d54087da991d1d77697ad1a6320bedd8c744bd56016e3c8269ffbc847ce297cad72c37317928e3d46d7f67069207a16a8e0c
)
md5sums=(
  f84fab5fea07d87cab27e1a1f24d89c9
  4d9b267d75d41d3ded8fc6d6b13c9899
)

build ()
{
  mkdir -p "$srcdir/build"
  rm -fr "$srcdir/build/"*
  cd -- "$srcdir/build"
  cmake ../"$pkgname-$pkgver" -DCMAKE_INSTALL_PREFIX=/usr
  make
}

package ()
{
  cd -- "${srcdir}/${pkgname}-${pkgver}"
  install -Dm755 "${pkgname}d" "$pkgdir/etc/rc.d/${pkgname}d"
  install -Dm644 "$pkgname.service" "$pkgdir/usr/lib/systemd/system/$pkgname.service"
  install -Dm644 "${pkgname}d.conf" "${pkgdir}/etc/${pkgname}d.conf"
  install -Dm644 "man/${pkgname}.1.gz" "${pkgdir}/usr/share/man/man1/${pkgname}.1.gz"

  cd -- "$srcdir/build"
  make install DESTDIR="$pkgdir"
}


# vim: set ts=2 sw=2 et:
