# Maintainer: Martin Peres <martin.peres[at]free[dot]fr>
pkgname=nouveau-fw
pkgver=0.1
pkgrel=2
pkgdesc="This package provides video & pgraph firmwares for all NVIDIA chipsets that need them."
url="http://nouveau.freedesktop.org/wiki/"
arch=('any')
license=('custom')
depends=()
optdepends=()
makedepends=('python2')
conflicts=()
replaces=()
backup=()
install=''
source=("https://raw.github.com/imirkin/re-vp2/2a029e7c1e406217ec19ff6010c2f587476b9618/extract_firmware.py"
        "http://us.download.nvidia.com/XFree86/Linux-x86_64/319.23/NVIDIA-Linux-x86_64-319.23.run")
md5sums=('abd5f48418b1ea2a2196d0c8b3b43398'
         'd4a2f01cbc3217444ac57e7da7ffe63f')

build() {
  cd "${srcdir}/"
  sh NVIDIA-Linux-x86_64-319.23.run --extract-only
  python2 extract_firmware.py
}

package() {
  cd "${srcdir}/"
  mkdir -p "$pkgdir/lib/firmware/nouveau/"
  cp -a nv* vuc-* "$pkgdir/lib/firmware/nouveau/"
}

# vim:set ts=2 sw=2 et:
