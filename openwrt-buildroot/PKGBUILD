# Maintainer: onny <onny@project-insanity.org>
# Contributor: onny <onny@project-insanity.org>

pkgname=openwrt-buildroot
pkgver=10.03
pkgrel=1
pkgdesc="A cross-compilation toolchain and a root filesystem for embedded systems"
arch=('i686' 'x86_64')
url="http://openwrt.org"
license="GPL3"
makedepends=('subversion' 'unzip' 'libxslt' 'fastjar' 'sdcc' 'ruby' 'perl-extutils-makemaker' 'intltool' 'jikes')
backup=()

build() {
	cd "$srcdir"
	msg "Connecting to SVN server...."

	svn checkout svn://svn.openwrt.org/openwrt/tags/backfire_$pkgver

	msg "SVN checkout done or server timeout"
	msg "Starting make..."
	 
	cd trunk
	./scripts/feeds update -a
	./scripts/feeds install -a
	make prereq
	make menuconfig
	make defconfig
	make
} 
package () {
	mkdir -p $pkgdir/opt/openwrt-buildroot
	cp -a $srcdir/trunk/* /opt/openwrt-buildroot/
}
