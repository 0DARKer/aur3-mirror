#Maintainer: Andrzej Giniewicz <gginiu@gmail.com>

pkgname=restview
pkgver=2.1.1
pkgrel=1
pkgdesc="A viewer for ReStructuredText documents that renders them on the fly."
arch=(any)
url="http://mg.pov.lt/restview/"
license=('GPL')
depends=('python2-docutils')
makedepends=('python2-setuptools')
optdepends=('python2-pygments')
options=(!emptydirs)
source=(http://pypi.python.org/packages/source/r/restview/restview-${pkgver}.tar.gz)
md5sums=('2297d82666f312b66eb3740f73b1bba6')

prepare() {
  cd "$srcdir"/${pkgname}-$pkgver

  sed -e "s|#![ ]*/usr/bin/python$|#!/usr/bin/python2|" \
      -e "s|#![ ]*/usr/bin/env python$|#!/usr/bin/env python2|" \
      -e "s|#![ ]*/bin/env python$|#!/usr/bin/env python2|" \
      -i $(find . -name '*.py')
}

package() {
  cd "$srcdir"/${pkgname}-$pkgver
  python2 setup.py build
}

package() {
  cd "$srcdir"/${pkgname}-$pkgver

  python2 setup.py install --root="$pkgdir"/ --optimize=1
}

