# Contributor: Piotr Beling <qwak@stud.ics.p.lodz.pl>

pkgname=dds
pkgver=1.1.9
pkgrel=1
arch=(i686 x86_64)
pkgdesc="bridge double dummy solver"
url="http://web.telia.com/~u07502278/"
source=($url/dds${pkgver//./}-src.zip)
license=('GPL')
depends=()
options=()

build() {
    cd $startdir/src					|| return 1
    ln -s dll.h dds.h
    ln -s dds.cpp dds.c

    #Fixed some errors in source:
#    sed -i  \
#	-e 's/void InitStart(void);/EXTERN_C void InitStart(void);/g' \
#	dds.c
#    patch -p1 < longlong.patch
    
    gcc $CFLAGS -c dds.c -o dds.o			|| return 1
    ar rc libdds.a dds.o				|| return 1
    ranlib libdds.a					|| return 1
    
    local destdir=$startdir/pkg/usr			|| return 1
    install -d $destdir/{include,lib}			|| return 1
    install -m644 dll.h $destdir/include/dds.h		|| return 1
    install libdds.a $destdir/lib			|| return 1
}

md5sums=('726f40a6263cf62b283328e603d71f9e')
