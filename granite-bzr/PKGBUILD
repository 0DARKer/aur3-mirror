pkgname=granite-bzr
pkgver=latest
pkgrel=1
pkgdesc="A development library by the elementary Project."
arch=(i686 x86_64)
url=https://launchpad.net/granite
license=(GPL)
depends=('glib2' 'gobject-introspection' 'gtk3' 'vala-git')
makedepends=('bzr' 'cmake')
provides=(granite)

_bzrtrunk="lp:granite"
_bzrmod="granite"

build()
{
  cd "${srcdir}"

  msg "Connecting to the server...."

  if [ -d ${_bzrmod} ]; then
    bzr up ${_bzrmod}
    msg "The local files are updated."
  else
    bzr co ${_bzrtrunk}
  fi

  msg "BZR checkout done or server timeout"
  msg "Starting make..."

  cd granite
  mkdir build; cd build
  cmake .. -DCMAKE_INSTALL_PREFIX=/usr
  make
  make DESTDIR="${pkgdir}" install
}
