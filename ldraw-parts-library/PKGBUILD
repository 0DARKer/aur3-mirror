pkgname=ldraw-parts-library
pkgver=2011_01
pkgrel=1
pkgdesc="A collection of LDraw-format CAD files representing many of LEGO bricks produced"
arch=(i686 x86_64)
url="http://www.ldraw.org/Article13.html"
license="custom:OPL"
install=ldraw-parts-library.install
source=(http://www.ldraw.org/library/updates/complete.zip \
ldraw-parts-library.sh \
license.txt)
md5sums=('8bd3685696f44ef2298ca7658cc2784d' '2acda6add7ed39994a710bd70aa96fc1'\
 '9c453a67d9ea51795c1563427ef092f4')
 
build() {
  cd ${startdir}/src/ldraw/
 
  # Install data
  mkdir -p ${startdir}/pkg/usr/share/ldraw
  mv p ${startdir}/pkg/usr/share/ldraw/p
  mv parts ${startdir}/pkg/usr/share/ldraw/parts
 
  # Fix permissions
  find ${startdir}/pkg/usr/share/ldraw -type f -exec chmod 644 {} +
  find ${startdir}/pkg/usr/share/ldraw -type d -exec chmod 755 {} +
 
  # Install the Open Publication license
  install -D -m644 ../license.txt ${startdir}/pkg/usr/share/licenses/${pkgname}/license.txt
 
  install -D -m755 ../ldraw-parts-library.sh ${startdir}/pkg/etc/profile.d/ldraw-parts-library.sh
}
