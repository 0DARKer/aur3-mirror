# Contributor: Darwin Bautista <djclue917@gmail.com>

pkgname=ldraw-parts-library
pkgver=0.27_20051228
pkgrel=6
pkgdesc="A collection of LDraw-format CAD files representing many of LEGO bricks produced"
arch=(i686 x86_64)
url="http://www.ldraw.org/index.php?name=News&file=article&sid=13"
license="custom:OPL"
install=ldraw-parts-library.install
source=(http://www.ldraw.org/files/unix-complete.tgz \
        ldraw-parts-library.sh \
        license.txt)
md5sums=('8c38924de12bf3b76e73eeed45d1b561' '2acda6add7ed39994a710bd70aa96fc1'\
         '9c453a67d9ea51795c1563427ef092f4')

build() {
  cd ${startdir}/src/LDRAW/

  # Install data
  mkdir -p ${startdir}/pkg/usr/share/ldraw
  mv PARTS/S PARTS/s
  mv P ${startdir}/pkg/usr/share/ldraw/p
  mv PARTS ${startdir}/pkg/usr/share/ldraw/parts

  # Fix permissions
  find ${startdir}/pkg/usr/share/ldraw -type f -exec chmod 644 {} +
  find ${startdir}/pkg/usr/share/ldraw -type d -exec chmod 755 {} +

  # Install the Open Publication license
  install -D -m644 ../license.txt ${startdir}/pkg/usr/share/licenses/${pkgname}/license.txt

  install -D -m755 ../ldraw-parts-library.sh ${startdir}/pkg/etc/profile.d/ldraw-parts-library.sh
}
