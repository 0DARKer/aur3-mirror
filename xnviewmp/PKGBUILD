# Maintainer: osily <ly50247 at gmail dot com>
# Contributor: Olivier Duclos <olivier.duclos gmail.com>
# Contributor: wido <widomaker2k7@gmail.com>
# Contributor: VuDu <vudu 'dot' curse 'at' gmail 'dot' com>
# Contributor: Houlala <houlala 'at' gmail 'dot' com>

pkgname=xnviewmp
pkgver=0.39
pkgrel=1
pkgdesc='An efficient image viewer, browser and converter (beta release).'
arch=('i686' 'x86_64')
url='http://newsgroup.xnview.com/viewtopic.php?f=60&t=24056'
license=('custom')
depends=('glib2' 'expat')
source=('http://download.xnview.com/XnViewMP-linux.tgz')
md5sums=('cab11ea66f42f2186fb625259f9eea5a')

[ "$CARCH" = 'x86_64' ] && source=('http://download.xnview.com/XnViewMP-linux-x64.tgz') \
						&& md5sums=('bd68eae3382a674fe7efdc5a2512dd2a')

source=(${source[@]} 'XnViewMP.desktop')
md5sums=(${md5sums[@]} '638f2dc5ee0c9ed0e2106c1cc5bb1a5f')


build() {
	cp XnViewMP.desktop ${srcdir}/XnViewMP || return 1
	cd ${srcdir}/XnViewMP

	install -dm 755 ${pkgdir}/usr/share/${pkgname} || return 1
	cp -R * ${pkgdir}/usr/share/${pkgname} || return 1

	install -Dm 644 XnViewMP.desktop ${pkgdir}/usr/share/applications/${pkgname}.desktop || return 1

	install -dm 755 ${pkgdir}/usr/bin/ || return 1
	cd ${pkgdir}/usr/bin/
	ln -s ../share/${pkgname}/xnview.sh ${pkgname} || return 1
}

