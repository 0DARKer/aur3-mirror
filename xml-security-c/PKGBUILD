# Contributor: kevku <kevku@gmx.com>
# Contributor: Kaiting Chen <kaitocracy@gmail.com>

pkgname='xml-security-c'
pkgver='1.6.1'
pkgrel='1'
pkgdesc='Apache C++ XML security libraries'
arch=('i686' 'x86_64')
url='http://santuario.apache.org/'
license=('GPL')
depends=('xerces-c' 'xalan-c>=1.11_pre1153059' 'openssl' 'nss')
source=('1.6.1-nss-compilation-fix.patch'
        "http://ftp.wayne.edu/apache/santuario/c-library/$pkgname-$pkgver.tar.gz")
md5sums=('4fec2e5292767f3777ef6c5fd6f49376'
         '808316c80a7453b6d50a0bceb7ebe9bc')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  patch -Np1 -i $srcdir/1.6.1-nss-compilation-fix.patch
  ./configure --prefix=/usr \
    --with-openssl \
    --with-xerces \
    --with-xalan \
    --with-nss \
    --disable-static
  mkdir -p xsec/yes/lib
  make
}

package(){
  cd "${srcdir}/${pkgname}-${pkgver}"
  make DESTDIR="$pkgdir" install
}
