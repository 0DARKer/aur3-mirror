pkgname=unicon
pkgver=11.7
pkgrel=1
pkgdesc="Very high level object-oriented network-savvy, graphics-savvy programming language with a syntax similar to Pascal or C"
arch=(i686 x86_64)
url="http://unicon.sourceforge.net"
license="GPL"
conflicts=(icon)
provides=(icon)
options=(!emptydirs)
source=("http://unicon.sourceforge.net/dist/uni.zip")
depends=(libx11)
makedepends=(unzip)
md5sums=('014bd5fef7b16e6bc6dfb7cc9cf6e6ff')

build() {
	cd "$srcdir"
	if [ "$CARCH" = "x86_64" ] ; then
    make X-Configure name=x86_64_linux
  else
    make X-Configure name=x86_32_linux
  fi
	make Unicon
	sed -i -e "s,^\t\tcp doc.*,# omitted," Makefile
}


package() {
  cd "$srcdir"
  make Install dest="$pkgdir/usr/share/unicon"
  mkdir -p "$pkgdir/usr/bin"
  ln -s "$pkgdir/usr/share/unicon/bin/icont" "$pkgdir/usr/bin/icont"
  ln -s "$pkgdir/usr/share/unicon/bin/iconx" "$pkgdir/usr/bin/iconx"
  ln -s "$pkgdir/usr/share/unicon/bin/ivib" "$pkgdir/usr/bin/ivib"
  ln -s "$pkgdir/usr/share/unicon/bin/ivibmigrate" "$pkgdir/usr/bin/ivibmigrate"
  ln -s "$pkgdir/usr/share/unicon/bin/patchstr" "$pkgdir/usr/bin/patchstr"
  ln -s "$pkgdir/usr/share/unicon/bin/udb" "$pkgdir/usr/bin/udb"
  ln -s "$pkgdir/usr/share/unicon/bin/ui" "$pkgdir/usr/bin/unicon-ide"
  ln -s "$pkgdir/usr/share/unicon/bin/unicon" "$pkgdir/usr/bin/unicon"
  ln -s "$pkgdir/usr/share/unicon/bin/unidep" "$pkgdir/usr/bin/unidep"
  ln -s "$pkgdir/usr/share/unicon/bin/unidoc" "$pkgdir/usr/bin/unidoc"
}
