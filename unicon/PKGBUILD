# Maintainer: Limao Luo <luolimao+AUR@gmail.com>

pkgname=unicon
pkgver=12.0
pkgrel=2
pkgdesc="Unicon is a very high level, goal-directed, object-oriented, general purpose applications language."
arch=(i686 x86_64)
url=http://unicon.sourceforge.net
license=(GPL)
conflicts=(icon unicon-svn)
provides=(icon)
options=(!emptydirs)
source=(http://$pkgname.sourceforge.net/dist/uni.zip)
depends=(libgl libiodbc libjpeg-turbo libxext)
sha256sums=('e9d67fd026f54c0d2b58066dac89a1535fcab7f2ca434f5400fd65fdf4cbee33')
sha512sums=('f51b18b49d2a6e15c87a2b0703e360e5e6bd4b927f9c651d56516a8e24b2c90139c8e5426d5d03a9c2f060a9c699f7747f686dd7e58f1daaf15f083d93250b75')

build() {
    cd "$srcdir"
    if [[ $CARCH == "x86_64" ]] ; then
        make X-Configure name=x86_64_linux
    else
        make X-Configure name=x86_32_linux
    fi
    make Unicon
    sed -i "s:^\t\tcp doc.*:\t\t# omitted:" Makefile
}

package() {
    exit 0
    cd "$srcdir"
    install -d "$pkgdir"/usr/share/unicon
    make Install dest="$pkgdir"/usr/share/unicon

    install -d "$pkgdir/usr/bin"
    for i in icon{t,x} ivib{,migrate} patchstr udb ui uni{con,dep,doc}; do
        ln -s /usr/share/$pkgname/bin/$i "$pkgdir"/usr/bin/$i
    done
}
