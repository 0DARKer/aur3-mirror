# Maintainer: moostik <mooostik_at_gmail.com>

pkgname=pysatellites-svn
_pkgname=pysatellites
pkgver=61
pkgrel=2
pkgdesc="PySatellites is a simulator of 2D trajectories of satellites"
url='http://outilsphysiques.tuxfamily.org/pmwiki.php/Oppl/Pysatellites'
license=('GPL3') 
arch=('any')
depends=('pyqt' 'python-matplotlib')
makedepends=('docbook-xsl')
optdepends=('xplanet: to use xplanet data'
	    'celestia: to use celestia data')
source=($pkgname.desktop
	$pkgname.png)
_svntrunk=svn://svn.tuxfamily.org/svnroot/oppl/${_pkgname}/trunk
_svnmod=${_pkgname}

build() {
  svn co $_svntrunk $_svnmod
  msg "SVN checkout done or server timeout"
  msg "Starting make..."
  cd ${srcdir}/$_svnmod
  pyuic4 graphe.ui > UI_graphe.py
  pyuic4 pysat.ui > UI_pysat.py
  xsltproc --nonet /usr/share/xml/docbook/xsl-stylesheets-1.75.2/manpages/docbook.xsl manpage.xml
  python setup.py install --root=$pkgdir/ --optimize=1
}

package() {
  cd $srcdir/$_svnmod
  install -D -m755 ${_pkgname} $pkgdir/usr/bin/${_pkgname}
  install -D -m644 ${_pkgname}.1 $pkgdir/usr/share/man/man1/${_pkgname}.1
  # Creating menu item
  install -D -m644 $srcdir/$pkgname.png $pkgdir/usr/share/pixmaps/${_pkgname}.png
  install -D -m644 $srcdir/$pkgname.desktop $pkgdir/usr/share/applications/${_pkgname}.desktop
}

md5sums=('7e32597d54dd793bb8aa2695a766e083'
         '4dcce3ad8fbf1e0309a4505136ded7ec')
