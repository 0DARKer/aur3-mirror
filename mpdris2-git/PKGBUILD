# Maintainer: Alucryd <alucryd@gmail.com>
# Credits : Andr√© Prata <andreprata@bugflux.org> for the intial PKGBUILD
pkgname="mpdris2-git"
pkgver=20110610
pkgrel=1
pkgdesc="MPRIS2 support for MPD"
url="https://github.com/eonpatapon/mpDris2"
arch=('x86_64' 'i686')
license=('GPL3')
depends=('mpd' 'dbus-python' 'pygobject' 'python' 'python-mpd')

_gitroot="https://github.com/eonpatapon/mpDris2.git"
_gitname="mpdris2"

build() {
    cd ${srcdir}
    msg "Connecting to the GIT server..."
    if [[ -d ${srcdir}/${_gitname} ]] ; then
    	cd ${_gitname}
    	git pull origin
    	msg "The local files are updated..."
    else
    	git clone ${_gitroot} ${_gitname}
        cd ${_gitname}
    fi
    msg "GIT checkout done."
}

package() {
	cd "${srcdir}/${_gitname}"
  install -m 0644 -D mpDris2.conf ${pkgdir}/etc/mpDris2.conf
  install -m 0644 -D org.mpris.MediaPlayer2.mpd.service ${pkgdir}/usr/share/dbus-1/services/org.mpris.MediaPlayer2.mpd.service
  install -m 0755 -D mpDris2 ${pkgdir}/usr/bin/mpDris2
}
