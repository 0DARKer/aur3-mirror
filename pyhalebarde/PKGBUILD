# Contributor: Eric Forgeot < http://anamnese.online.fr >

pkgname=pyhalebarde
pkgver=0.2
pkgrel=1
pkgdesc="An adaptation of the Halebarde et Gonfanon board game with pygame."
arch=('i686' 'x86_64')
url="https://code.launchpad.net/pyhalebarde"
license=('GPL')
depends=('pygame')

source=(http://code.launchpad.net/pyhalebarde/0.2/${pkgver}/+download/${pkgname}_${pkgver}.orig.tar.gz)
md5sums=('c485a7ae82bec5f7468180a877dbbaa2')  

build() {
	cd $startdir/src/pyhalebarde-$pkgver
	sed -i -e "s/share\/games/share/g" $srcdir/${pkgname}-$pkgver/setup.py
	sed -i -e "s/share\/games/share/g" $srcdir/${pkgname}-$pkgver/halebarde/ui.py
	#sed -i -e "s/share\/games/share\/g" $srcdir/pyhalebarde-$pkgver/build/lib/halebarde/ui.py
#	sed -i -e "s/json.read/json.loads/g" $srcdir/pyhalebarde-$pkgver/halebarde/ui.py
	sed -i -e "s/usr\/games/usr\/bin/g" $srcdir/${pkgname}-$pkgver/pyhalebarde.desktop
	sed -i -e "s/DATA_FILES.append((\"games/DATA_FILES.append((\"bin/g" $srcdir/${pkgname}-$pkgver/setup.py
	mkdir -p $pkgdir/usr/share/${pkgname}
	mkdir -p $pkgdir/usr/share/pixmap
	mkdir -p $pkgdir/usr/share/applications
	mkdir -p $pkgdir/usr/share/locale/fr/LC_MESSAGES/
	mkdir -p $pkgdir/usr/share/locale/${pkgname}/LC_MESSAGES/
	python setup.py build || return 1
    python setup.py install --root=$pkgdir
	
}
