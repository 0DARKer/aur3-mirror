# Maintainer: Dan Serban
# Contributor: Liu Chang <goduck777@gmail.com>

pkgname=pdftk-bin
pkgver=1.44
pkgrel=4
pkgdesc="PDFTK is a simple tool for doing everyday things with PDF documents. The package is built from binary executables available in Debian repositories"
url=http://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/
arch=(i686 x86_64)
license=(GPL)
provides=(pdftk)
conflicts=(pdftk pdfchain-all-inclusive)
_filearch=i386 && _soarch=i386
[ "$CARCH" = "x86_64" ] && _filearch=amd64 && _soarch=x86_64
_pdftk_debian_ver=1.44-3
_libgcj12_debian_ver=4.6.1-2

build()
{
  _url_prefix="http://mirrors.kernel.org/debian/pool/main"

  # --- pdftk ---
  _file="pdftk_${_pdftk_debian_ver}_${_filearch}.deb"
  wget "${_url_prefix}/p/pdftk/${_file}"
  bsdtar -xf "${_file}" data.tar.gz
  bsdtar -xf data.tar.gz -C "${pkgdir}"
  rm data.tar.gz

  # --- libgcj12 ---
  _file="libgcj12_${_libgcj12_debian_ver}_${_filearch}.deb"
  wget "${_url_prefix}/g/gcj-4.6/${_file}"
  bsdtar -xf "${_file}" data.tar.gz
  bsdtar -xf data.tar.gz usr/lib/i386-linux-gnu/libgcj.so.12.0.0
  rm data.tar.gz
  install -Dm644 usr/lib/${_soarch}-linux-gnu/libgcj.so.12.0.0 "${pkgdir}"/usr/lib/libgcj.so.12
}

