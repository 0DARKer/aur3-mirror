# Contributor: Anton Bazhenov <anton.bazhenov at gmail>
# Contributor: Jaroslav Lichtblau <tu@dragonlord.cz>
# Contributor: Michael Liptrap <xenobrain@gmail.com

pkgname=pcgen
pkgver=5.16.2
pkgrel=2
pkgdesc="An open source RPG character generator and maintenance program"
arch=('any')
url="http://pcgen.sourceforge.net/"
license=('LGPL' 'custom')
depends=('java-runtime')
source=(http://downloads.sourceforge.net/$pkgname/$pkgname${pkgver//./}_full.zip
        $pkgname.sh
	PCGen_icon.png
	pcgen.desktop)
md5sums=('f8abe32649c41dd166b9c9c6e552ea82'
         '24ac58619b0f435ea032aef2c0cdee56'
	 '74f84ab162a7c9237ae3395300659dab'
	 'cdff5f15405135a4c77468ef82e6d93b')

build(){
  cd "$srcdir"/$pkgname${pkgver//./}

# Install program files
  rm -f *.bat
  install -m755 -d "$pkgdir"/opt/$pkgname
  cp -r * "$pkgdir"/opt/$pkgname/

# Install icon
    install -D -m 644 $srcdir/PCGen_icon.png \
        $pkgdir/usr/share/pixmaps/PCGen_icon.png

# Set permissions
  find "$pkgdir"/opt/$pkgname -type f -exec chmod 644 {} +
  find "$pkgdir"/opt/$pkgname -type d -exec chmod 755 {} +
  chmod 755 "$pkgdir"/opt/$pkgname/*.sh
  chmod 666 "$pkgdir"/opt/$pkgname/*.{ini,properties}

# Install custom licenses
  install -m755 -d "$pkgdir"/usr/share/licenses/$pkgname
  install -m644 -t "$pkgdir"/usr/share/licenses/$pkgname \
    docs/acknowledgments/{ogllicense,publishersandsources,skinlflicense}.html

# Install launcher
  install -Dm755 ../$pkgname.sh "$pkgdir"/usr/bin/$pkgname

# Install menu launcher
    install -D -m 644 $srcdir/pcgen.desktop \
        $pkgdir/usr/share/applications/pcgen.desktop
}
