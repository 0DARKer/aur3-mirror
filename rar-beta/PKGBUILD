# Maintainer: TuxSpirit <tuxspirit AT archlinux DOT fr> 

pkgname=rar-beta
pkgver=4.0.b7
pkgrel=1
pkgdesc="A command-line port of the rar compression utility (BETA VERSION 20 FEB 2011)"
arch=('i686' 'x86_64')
url="http://www.rarlab.com"
license=('custom')
depends=('gcc-libs')
conflicts=('rar' 'bin32-rar' 'unrar')
backup=('etc/rarfiles.lst')
provides=('rar' 'unrar')
if [ "$CARCH" = "i686" ]; then
    source=(http://www.rarlab.com/rar/rarlinux-$pkgver.tar.gz 
            rar.1)
    md5sums=('345803c920d967350839a0e0c6ef13d6'
             'b404d5ed6df6c46c732acb38344c36bc')
elif [ "$CARCH" = "x86_64" ]; then
    source=(http://www.rarlab.com/rar/rarlinux-x64-$pkgver.tar.gz
            rar.1)
     md5sums=('217c3c012435d42bd0b5b27e342f860b'
              'b404d5ed6df6c46c732acb38344c36bc')     
fi

build() {
 
  mkdir -p ${pkgdir}/usr/share/doc/${pkgname} || return 1
  mkdir -p ${pkgdir}/usr/share/man/man1 || return 1
 
  cd ${srcdir}/rar
  
  install -Dm755 rar ${pkgdir}/usr/bin/rar || return 1
  install -Dm755 unrar ${pkgdir}/usr/bin/unrar || return 1

  install -Dm755 default.sfx ${pkgdir}/usr/lib/default.sfx || return 1

  install -Dm644 rarfiles.lst ${pkgdir}/etc/rarfiles.lst || return 1

  install -Dm755 rar_static ${pkgdir}/usr/share/${pkgname}/rar_static || return 1

  install -Dm644 license.txt ${pkgdir}/usr/share/licenses/${pkgname}/LICENSE || return 1

  install -m644 {*.htm,*.txt} ${pkgdir}/usr/share/doc/${pkgname} || return 1

  install -m644 ${srcdir}/rar.1 ${pkgdir}/usr/share/man/man1/rar.1 || return 1
}  
