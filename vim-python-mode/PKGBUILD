# Maintainer: Thomas Dziedzic < gostrc at gmail >

pkgname=vim-python-mode
pkgver=0.4.2
pkgrel=2
pkgdesc='Python-mode is a vim plugin that allows you to use the pylint, rope, pydoc library in vim to provide features like python code looking for bugs, refactoring and some other useful things.'
arch=('any')
license=('LGPL3')
url='https://github.com/klen/python-mode'
depends=('vim')
makedepends=('git')

build() {
  local _gitroot='git://github.com/klen/python-mode.git'

  if [[ -d python-mode ]]; then
    cd python-mode
    git pull
  else
    git clone ${_gitroot}
    cd python-mode
  fi

  git checkout -b ${pkgver}

  # rename to use binaries on archlinux
  #sed \
  #  -e "s/let {a:name} = a:default/& . '2'/" \
  #  -i autoload/pymode.vim
}

# used for !() remove when pacman 4 finally comes out :DDD
shopt -s extglob

package() {
  cd python-mode

  install -d ${pkgdir}/usr/share/vim/vimfiles/

  cp -r !(.gitignore|Changelog.rst|README.rst) \
    ${pkgdir}/usr/share/vim/vimfiles/
}
