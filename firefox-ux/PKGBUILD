# Maintainer: Isaac Aggrey <isaac.aggrey@gmail.com>
# Contributors: 

pkgname=firefox-ux
pkgdesc='Standalone web browser from Mozilla, UX nightly build'
url=http://www.mozilla.org/projects/firefox/
pkgver=25.0a1
pkgrel=3
arch=('i686' 'x86_64')
license=('MPL' 'GPL' 'LGPL')
source=('firefox-ux.desktop' 'firefox-ux-safe.desktop')
depends=('desktop-file-utils' 'libxt' 'mime-types' 'nss' 'shared-mime-info')
sha512sums=(
'a29cf51c22f02fb350364047a3f47dbcef419f2592ef6e1f759d51e8bdf2f7eb2244bf9800e3d2d0e4a2127f13953b3ca2616370fa84d37697711de0a46fc24f' 
'ca99fab33dd26d0762372d9b5f38a0d37b391650a201a6f84406b3ccc5efe884fb1b577d3ebf38c2fa7e8b147a22140331647d81c7a81e6b399f45600bba49aa'
)

package() {
	FX_SRC="firefox-${pkgver}.en-US.linux-${CARCH}.tar.bz2"
	FX_SRC_URI="http://ftp.mozilla.org/pub/firefox/nightly/latest-ux/${FX_SRC}"

	msg "Downloading..."
	wget -N ${FX_SRC_URI}
	msg "Extracting..."
	bsdtar -x -f ${FX_SRC}
	msg "Packaging..."

	mkdir -p "${pkgdir}"/{usr/{bin,share/{applications,pixmaps}},opt}
	cp -r firefox "${pkgdir}/opt/firefox-ux"

	ln -s /opt/firefox-ux/firefox "${pkgdir}/usr/bin/firefox-ux"
	install -m644 "${srcdir}"/{firefox-ux.desktop,firefox-ux-safe.desktop} "${pkgdir}/usr/share/applications/"
    install -m644 "${srcdir}/firefox/browser/icons/mozicon128.png" "${pkgdir}/usr/share/pixmaps/firefox-ux-icon.png"
}
