# Maintainer: Artur Szymczak < artur at nadzieja dot pl >
pkgname=tuned
pkgver=2.2.0
pkgrel=2
pkgdesc="A tool that performs monitoring and adaptive configuration of the system according to selected profile."
arch=('any')
url="https://fedorahosted.org/tuned/"
license=('GPL')
changelog=${pkgname}.changelog
makedepends=('make' 'patch')
depends=('python2' 'python2-configobj' 'python2-decorator' 'python2-dbus' 'dbus-glib' 'python2-gobject2' 'python2-pyudev' 'cpupower' 'hdparm')
optdepends=('powertop' 'systemtap' 'virt-what')
backup=('etc/tuned/active_profile')
source=("https://fedorahosted.org/releases/t/u/tuned/tuned-${pkgver}.tar.bz2" 'archlinux_specific.patch')
sha256sums=('29e3b74cb4bf7acdcb2cd1ae6086bbec21c733d5eb7e648a116be38d0e2b12af'
            '916d1d749597b61dbd5966de0b0f368218c184ea99c8266ed6c30c9081183176')
options=('!strip')

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  patch -p1 -i "${srcdir}/archlinux_specific.patch"
  make DESTDIR="${pkgdir}" UNITDIR="/usr/lib/systemd/system" install
}
