# Contributor: Yejun Yang ( yejunx AT gmail DOT com )

pkgname='sid-milter'
pkgver=1.0.0
pkgrel=1
pkgdesc="The sid-milter package is an open source implementation of the Sender-ID and SPF sender authentication systems."
arch=('i686' 'x86_64')
url="http://sid-milter.sourceforge.net/"
license=('SENDMAIL')
depends=('libmilter' 'postfix>=2.5')
backup=('etc/conf.d/sid-filter.conf')
install=sid-milter.install
source=("http://superb-east.dl.sourceforge.net/sourceforge/sid-milter/$pkgname-$pkgver.tar.gz"
	'sid-filter'
	'sid-filter.conf')

md5sums=('1fe0651bc27938ebd0d7c91d58d4ad5a'
         'b7d4edfa0e923954c011187fc09d4ec1'
         '396d6c1e101fff789c50368772fe4c95')

build() {
  cd $srcdir/$pkgname-$pkgver
  mkdir -p $pkgdir/usr/sbin $pkgdir/usr/bin $pkgdir/usr/man/man8 
  make || return 1
  make DESTDIR=$pkgdir install || return 1
  mv $pkgdir/usr/bin/sid-filter $pkgdir/usr/sbin/sid-filter
  mkdir -p $pkgdir/etc/rc.d $pkgdir/etc/conf.d
  install -m755 $srcdir/sid-filter $pkgdir/etc/rc.d
  install -m644 $srcdir/sid-filter.conf $pkgdir/etc/conf.d
  mkdir -p $pkgdir/usr/share/licenses/$pkgname
  install -m644 LICENSE $pkgdir/usr/share/licenses/$pkgname
}
