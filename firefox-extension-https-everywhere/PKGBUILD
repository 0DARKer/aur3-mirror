# Maintainer: Hyacinthe Cartiaux <hyacinthe.cartiaux@free.fr>
# Based on PKGBUILD firefox-extension-video-downloadhelper

_plugin_name=https-everywhere
_plugin_version=1.2
pkgdesc="Plugin for firefox which ensures you are using https whenever it's possible."
license=('GPL2')

pkgname=firefox-extension-$_plugin_name
pkgver=$_plugin_version
pkgrel=1
arch=('any')
url="https://www.eff.org/https-everywhere"
depends=("firefox>=3.0" "firefox<10.0")
source=("https://www.eff.org/files/https-everywhere-latest.xpi")
md5sums=('c39416a445b3709c0c0f6ded2be37eb9')

build() {
  cd $srcdir
  emid=$(sed -n '/.*<em:id>\(.*\)<\/em:id>.*/{s//\1/p;q}' install.rdf) || return 1
  local dstdir=$pkgdir/usr/lib/firefox/extensions/${emid}
  install -d $dstdir
  mv * $dstdir
  rm $dstdir/https-everywhere-latest.xpi
  chmod -R 755 $dstdir
}
