# Maintainer: jfperini <@jfperini>
# Contributor: jfperini <@jfperini>

pkgname=qremotecontrol-server-git
pkgver=0.r42.739afa3
pkgrel=1
pkgdesc="QRemoteControl is a remote control application for your mobile phone. This is the server part of QRemoteControl."
arch=('any')
url="http://qremote.org/"
license=('GPL v3')
depends=('qt4')
makedepends=('git')
conflicts=('qremotecontrol-server')
provides=('qremotecontrol-server')
source=("$pkgname"::'git+http://git.code.sf.net/p/qrc/gitcode')
# Because the sources are not static, skip Git checksum:
md5sums=('SKIP')

pkgver() {
  cd "$srcdir/$pkgname/"
  # Use the tag of the last commit
  printf "0.r%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse --short HEAD)"
}


prepare() {
  cd "$srcdir/$pkgname/"
  qmake-qt4
}


build() {
  cd "$srcdir/$pkgname"
  make   CXXFLAGS+="$CXXFLAGS -W -D_REENTRANT \$(DEFINES)" LDFLAGS+="$LDFLAGS"
}




package() {
  cd "$srcdir/$pkgname"
  make INSTALL_ROOT="$pkgdir" install
}
