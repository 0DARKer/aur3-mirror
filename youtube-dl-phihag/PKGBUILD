# Maintainer: Austin <doorknob60@gmail.com>

pkgname=youtube-dl-phihag
pkgver=20111119
pkgrel=1
pkgdesc="Phihag's more up to date fork of youtube-dl, a downloader for video hosting sites such as Youtube"
arch=('any')
url="https://github.com/phihag/youtube-dl"
license=('custom:public domain')
depends=('python2')
makedepends=('git')
conflicts=('youtube-dl')
provides=('youtube-dl')
_gitroot="https://github.com/phihag/youtube-dl.git"
_gitname="youtube-dl"
build() {
  cd "$srcdir"
  msg "Connecting to GIT server...."

  if [ -d $_gitname ] ; then
    cd $_gitname && git pull origin
    msg "The local files are updated."
  else
    git clone $_gitroot $_gitname
  fi

  msg "GIT checkout done or server timeout"
  msg "Starting make..."

  rm -rf "$srcdir/$_gitname-build"
  git clone "$srcdir/$_gitname" "$srcdir/$_gitname-build"
}
package() {
  cd "$srcdir/$_gitname-build"
  sed -i 's|#!/usr/bin/env python|#!/usr/bin/env python2|' youtube-dl
  install -D -m755 youtube-dl "${pkgdir}/usr/bin/youtube-dl"
}
