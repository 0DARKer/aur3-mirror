pkgname=pysoy-hg
pkgver=1589
pkgrel=1
pkgdesc=''
arch=('i686' 'x86_64')
url='http://www.pysoy.org/'
license=('GPL')
depends=('python3' 'libdrm' 'mesa' 'libgee' 'gtk2' 'gtkglext' 'ode')
makedepends=('mercurial' 'gcc' 'vala' 'orc' 'pkg-config')

_hgroot='http://hg.pysoy.org/'
_hgrepo='pysoy'

build() {
  cd $srcdir

  # Update the repo, else clone a new one
  if [ -d $_hgrepo ]; then
    cd $_hgrepo
    python setup.py clean
    hg pull -u
  else
    hg clone ${_hgroot}/${_hgrepo}
    cd $_hgrepo
  fi

  msg "Starting build process."
  python setup.py build || return 1
}

package() {
  cd $srcdir/"$_hgrepo"
  python setup.py install --prefix $pkgdir/usr || return 1
}
