# Maintainer: Arthur Zamarin <arthurzam@gmail.com> 

pkgbase=qcustomplot
pkgname=('qcustomplot' 'qcustomplot-doc')
pkgver=1.2.1
pkgrel=2
pkgdesc="Qt Plotting Widget for the Qt 5.x"
arch=(i686 x86_64)
url="http://www.qcustomplot.com/"
license=('GPL')
makedepends=('qt5-base')
source=("http://www.qcustomplot.com/release/1.2.1/QCustomPlot.tar.gz"
        "http://www.qcustomplot.com/release/1.2.1/QCustomPlot-sharedlib.tar.gz")
sha256sums=('4f416be8182941d0e37f4fccf5d103bae088f4dd44938bfd52a01811b6fcdabf'
            '16b3f59182d3703152589d71da580fbded0a67f88ab7df81b86095422d27685b')

prepare() {
  cp -r ${srcdir}/qcustomplot-sharedlib ${srcdir}/qcustomplot/
}

build() {
  msg "building qhexedit"
  cd "${srcdir}/qcustomplot/qcustomplot-sharedlib/sharedlib-compilation"
  qmake-qt5 sharedlib-compilation.pro
  make -f Makefile.Release -j$(nproc)
}
 
package_qcustomplot() {
  depends=('qt5-base')

  cd "${srcdir}/qcustomplot/qcustomplot-sharedlib/sharedlib-compilation"
  mkdir -p "${pkgdir}/usr/lib/"
  cp libqcustomplot.so* "${pkgdir}/usr/lib/" --preserve=links

  cd "${srcdir}/qcustomplot/"
  mkdir -p "${pkgdir}/usr/include/"
  cp qcustomplot.h "${pkgdir}/usr/include/" --preserve=links
}
 
package_qcustomplot-doc() {
  depends=('qt5-tools')
  pkgdesc="Qt Plotting Widget for the Qt 5.x - documentation"
  install='qcustomplot-doc.install'

  mkdir -p "${pkgdir}/usr/share/doc/qcustomplot"
  cp "${srcdir}/qcustomplot/documentation/"* "${pkgdir}/usr/share/doc/qcustomplot" -r --preserve=links
}
