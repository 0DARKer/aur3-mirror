# Maintainer: lobotomius at gmail dot com

pkgname=hermires
pkgver=1.28
pkgrel=1
pkgdesc="Multiplatform c64 graphics editor"
arch=('any')
url="http://sourceforge.net/projects/hermires/"
license=('GPL')
depends=(allegro4)
source=('http://downloads.sourceforge.net/hermires/HermIRES-1.28.zip' 'hermires.patch')
md5sums=('c86759f9c43cb7f11d8b92b8a40a97ea' '9d433e30af0347c9d12f124cd3e68404')

build() {
	cd "$srcdir/HermIRES-$pkgver/source"
	patch -Np1 -i "$srcdir/hermires.patch" HermIRES.cpp
	make
}

package() {
	cd "$srcdir/HermIRES-$pkgver/source"
	chmod 755 ../HermIRES

	mkdir -p "$pkgdir/usr/bin" \
		"$pkgdir/usr/share/icons" \
		"$pkgdir/usr/share/applications" \
		"$pkgdir/usr/share/hermires"

	cp ../HermIRES "$pkgdir/usr/bin"
	cp HermIRES.png "$pkgdir/usr/share/icons"
	cp HermIRES.desktop "$pkgdir/usr/share/applications"
	cp -r "$srcdir/HermIRES-$pkgver/palettes" "$pkgdir/usr/share/hermires"
	cp -r "$srcdir/HermIRES-$pkgver/examples" "$pkgdir/usr/share/hermires"
}
