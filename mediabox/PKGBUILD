# Maintainer: Phillipe Smith <phillipe@archlinux.com.br>
pkgname=mediabox
pkgver=3.00
pkgrel=1
pkgdesc="MediaBox is a minimalistic GTK+ player based on GStreamer."
arch=('i686' 'x86_64')
url="http://gtk-apps.org/content/show.php/MediaBox+Reloaded?content=151673"
license=('GPL')
depends=('gtk2' 'libglade' 'dbus' 'dbus-python' 'python2' 'pyxdg' 'pygtk' 'python-rsvg' 'python-imaging' 'python-notify' 'cddb-py' 'mutagen' 'gstreamer0.10-python')
optdepends=('python-gudev-git: Support for playing DVD'
            'gstreamer0.10-python: Python bindings for GStreamer 0.10')
source=("http://gtk-apps.org/CONTENT/content-files/151673-${pkgname}_${pkgver}-${pkgrel}~mickyz.deb")
md5sums=('cd333efc13fae0349ca7d2ce690d09c4')

build() {  
  tar -zxf $srcdir/data.tar.gz  
}

package() {  
  cp -r $srcdir/usr/ $pkgdir  
  install -Dm 755 ${pkgdir}/usr/share/${pkgname}/pix/app48.png ${pkgdir}/usr/share/pixmaps/${pkgname}.png
  install -Dm 755 ${srcdir}/usr/share/${pkgname}/src/mutag ${pkgdir}/usr/bin/mutag
  mv ${pkgdir}/usr/share/applications/decibel.desktop ${pkgdir}/usr/share/applications/media.desktop
  for file in $(grep -Elr "(.*/python|exec.*python)" $pkgdir); do sed 's/python/python2/' -i $file; done
}
