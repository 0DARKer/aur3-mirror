pkgname=gpaste-git
_gitname=GPaste
pkgver=2.99.2_29_gc93a4ac
pkgrel=1
pkgdesc="Clipboard management system with a gnome-shell extension"
license=('GPL3')
url="https://github.com/Keruspe/GPaste"
source=("http://www.imagination-land.org/files/$pkgname-$pkgver.tar.xz")
source=('git+https://github.com/Keruspe/GPaste.git')
makedepends=('vala' 'intltool' 'git')
options=(!libtool)
provides=('gpaste')
conflicts=('gpaste')
depends=('dbus-core' 'libxml2' 'libxcb' 'xcb-util-keysyms' 'gtk3' 'gnome-shell>=3.4.0')
install=gpaste.install

arch=('i686' 'x86_64')
md5sums=(SKIP)

pkgver() {
  cd "$srcdir/$_gitname"
  echo $(git describe | sed 's#-#_#g;s#v##')
}

build () {
    cd "$srcdir/$_gitname"
    
    ./autogen.sh
    ./configure --sysconfdir=/etc       \
                --enable-systemd
    make
}

package () {
    cd "$srcdir/$_gitname"
    make DESTDIR="$pkgdir" install

    # bash/zsh completion support
    install -Dp -m0644 data/completions/gpaste     \
        "$pkgdir/etc/bash_completion.d/gpaste"
    install -Dp -m0644 data/completions/_gpaste    \
        "$pkgdir/usr/share/zsh/site-functions/_gpaste"
}
# expandtab:tabstop=4:shiftwidth=4
