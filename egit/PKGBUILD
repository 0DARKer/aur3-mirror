pkgname=egit
pkgver=0.10.1
pkgrel=1
pkgdesc="An eclipse team provider for git"
arch=('any')
url="http://www.eclipse.org/egit/"
license=('EPL')
depends=('eclipse>=3.6' "jgit>=$pkgver")
source=("org.eclipse.egit_$pkgver-feature.jar::http://www.jgit.org/updates/features/org.eclipse.egit_$pkgver.jar"
        "http://www.jgit.org/updates/plugins/org.eclipse.egit_$pkgver.jar"
        "http://www.jgit.org/updates/plugins/org.eclipse.egit.core_$pkgver.jar"
        "http://www.jgit.org/updates/plugins/org.eclipse.egit.ui_$pkgver.jar")
noextract=("org.eclipse.egit_$pkgver-feature.jar"
          "org.eclipse.egit_$pkgver.jar"
          "org.eclipse.egit.core_$pkgver.jar"
          "org.eclipse.egit.ui_$pkgver.jar")

build() {
  _dest="$pkgdir/usr/share/eclipse/dropins/$pkgname/eclipse"

  install -d -m755 "$_dest/features/org.eclipse.egit_$pkgver" || return 1
  cd "$_dest/features/org.eclipse.egit_$pkgver"
  jar xf "$srcdir/org.eclipse.egit_$pkgver-feature.jar" feature.xml || return 1

  for i in "" .core .ui; do
    install -D -m644 "$srcdir/org.eclipse.egit${i}_$pkgver.jar" \
      "$_dest/plugins/org.eclipse.egit${i}_$pkgver.jar" || return 1
  done

  ln -s "/usr/share/java/jgit/org.eclipse.jgit.jar" \
    "$_dest/plugins/org.eclipse.jgit_$pkgver.jar" || return 1
}

# vim:set ts=2 sw=2 et:
sha256sums=('d782c294fd6bef5ab5353b4da768c5b469332bd43a97971b6201316dd9096bc9'
            '9a4998bdc38052165c5ffcde0e65bcbfa0f6288f06e88155e39b40b3517167b5'
            '8b01fcd51887d58c616c36bac2deb379fc2869256487a9656b1aeec0b60f16ca'
            '479959c04b0515c591bd76bd51abfa12a9a0344da4d9c054c086df971d223d89')
