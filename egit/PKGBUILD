pkgname=egit
pkgver=0.12.1
pkgrel=1
pkgdesc="An eclipse team provider for git"
arch=('any')
url="http://www.eclipse.org/egit/"
license=('EPL')
depends=('eclipse>=3.6' "jgit>=$pkgver")
source=("org.eclipse.egit_$pkgver-feature.jar::http://www.jgit.org/updates/features/org.eclipse.egit_$pkgver.jar"
        "http://www.jgit.org/updates/plugins/org.eclipse.egit_$pkgver.jar"
        "http://www.jgit.org/updates/plugins/org.eclipse.egit.core_$pkgver.jar"
        "http://www.jgit.org/updates/plugins/org.eclipse.egit.ui_$pkgver.jar"
        "http://www.jgit.org/updates/plugins/org.eclipse.egit.doc_$pkgver.jar")
noextract=("org.eclipse.egit_$pkgver-feature.jar"
          "org.eclipse.egit_$pkgver.jar"
          "org.eclipse.egit.core_$pkgver.jar"
          "org.eclipse.egit.ui_$pkgver.jar"
          "org.eclipse.egit.doc_$pkgver.jar")
sha256sums=('dff8169305f24b240a1694f433348fe20be8d045c1229d68b27e85a5eda645a8'
            '748a01afc6d627a07a7c2a7bc61780702be450487bd286c7d8aad78b70e94aea'
            'b6a3a53f7d8fd74e72c62998f7910824f748345cc161c9ce7d89fa82ea2794ca'
            '7c8949771557a0617b3ef370d3c3052c3b183c5b4f6b57eab98e9cf488f82217'
            '95216b1acafcfdbd9f8960882e1e1b38f04b0108b75a5d4f8b8d9f9ee03513f6')

build() {
  _dest="$pkgdir/usr/share/eclipse/dropins/$pkgname/eclipse"

  install -d -m755 "$_dest/features/org.eclipse.egit_$pkgver" || return 1
  cd "$_dest/features/org.eclipse.egit_$pkgver"
  jar xf "$srcdir/org.eclipse.egit_$pkgver-feature.jar" feature.xml feature.properties license.html edl-v10.html || return 1

  for i in "" .core .ui .doc; do
    install -D -m644 "$srcdir/org.eclipse.egit${i}_$pkgver.jar" \
      "$_dest/plugins/org.eclipse.egit${i}_$pkgver.jar" || return 1
  done
}

# vim:set ts=2 sw=2 et:
