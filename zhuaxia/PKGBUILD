# Maintainer: Kai Yuan <kent.yuan @t gmail d@t com>
pkgname=zhuaxia
pkgver=20140607
pkgrel=1
pkgdesc="cli tool to download mp3 from xiami.com"
arch=('any')
url="https://github.com/sk1418/zhuaxia"
license=('MIT')
makedepends=('git')
depends=('python2' 'python2-requests' 'python2-mutagen' 'python2-setuptools')
_gitroot="https://github.com/sk1418/zhuaxia.git"
_gitname="zhuaxia"



package() {
  cd ${srcdir}/
msg "Connecting to the GIT server...."
    if [[ -d ${srcdir}/${_gitname} ]] ; then
        cd ${_gitname}
        git pull origin master
        msg "The local files are updated..."
    else
        git clone ${_gitroot}
      fi
    cd "${srcdir}/${_gitname}" 
    git checkout master
    msg "GIT checkout done."

  find . -name "*.py" |xargs sed -i "s|/usr/bin/python|&2|" 

  python2 setup.py install --root="$pkgdir" --prefix="/usr" || return 1
}

# vim:set ts=2 sw=2 et:
