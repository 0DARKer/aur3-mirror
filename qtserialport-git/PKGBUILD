# Maintainer: aleksonik <imsnet@yandex.ru>

pkgname=qtserialport-git
pkgver=20120607
pkgrel=1
pkgdesc="The QtSerialPort module is an add-on for the Qt5 library, providing a single interface for both hardware and virtual serial ports. Also added support and for library Qt4."
arch=('i686' 'x86_64')
url="http://qt-project.org/wiki/QtSerialPort"
license=('LGPL')
depends=(qt)
makedepends=('git')
provides=('qtserialport')
_gitroot='git://gitorious.org/qtplayground/qtserialport.git'


build() {
  cd ${srcdir}
  git clone ${_gitroot}
  cd ${srcdir}/qtserialport

  qmake || return 1
  make  || return 1


  cd ${srcdir}/qtserialport
  install -Dm644 ./include/QtAddOnSerialPort/serialport-global.h ${pkgdir}/usr/include/QtAddOnSerialPort/serialport-global.h
  install -Dm644 ./include/QtAddOnSerialPort/serialport.h ${pkgdir}/usr/include/QtAddOnSerialPort/serialport.h
  install -Dm644 ./include/QtAddOnSerialPort/serialportinfo.h ${pkgdir}/usr/include/QtAddOnSerialPort/serialportinfo.h


  install -Dm755 ./src/libSerialPort.so.1.0.0 ${pkgdir}/usr/lib/libSerialPort.so.1.0.0

  cd ${pkgdir}/usr/lib/
  ln -s libSerialPort.so.1.0.0 libSerialPort.so.1.0
  ln -s libSerialPort.so.1.0.0 libSerialPort.so.1
  ln -s libSerialPort.so.1.0.0 libSerialPort.so
  
}



