# Maintainer: Steven Vancoillie <steven<dot>vancoillie[at]gmail[dot]com>
pkgname=likwid
pkgver=3.1.2
pkgrel=1
pkgdesc="Lightweight performance tools"
url="http://likwid.googlecode.com"
_url="ftp://ftp.fau.de/pub/likwid/"
arch=('x86_64' 'i686')
license=('GPLv3')
depends=()
makedepends=()
optdepends=('perl: for likwid-mpirun and likwid-perfscope'
            'openmpi: for likwid-mpirun'
            'gnuplot: for likwid-perfscope')
conflicts=()
source=("${_url}/${pkgname}-${pkgver}.tar.gz")
md5sums=('0cce57767de624f51e0b90a06b47bcb2')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  sed -i -e \
	  "12s:/usr/local:/usr:; 13s:/man:/share/man:"\
	  config.mk 
  make
  
  if [[ ${CARCH} == x86_64 ]]
  then
	  make likwid-bench
  fi
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  make PREFIX="${pkgdir}/usr" install 
}
