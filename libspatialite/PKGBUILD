# Maintainer: Pietro Zambelli <peter.zamb at gmail dot com>
pkgname=libspatialite
_realname=libspatialite-amalgamation
pkgver=2.3.1
pkgrel=1
pkgdesc="the main core of the Spatial DBMS engine; an internal copy of SQLite \
is included, so this library implements a complete DBMS engine with no need \
for external components."
arch=('i686' 'x86_64')
url="http://www.gaia-gis.it/spatialite-2.3.0/index.html"
license=('MPL v1.1')
depends=('geos' 'proj')
options=('libtool')
source=("http://www.gaia-gis.it/spatialite/${_realname}-${pkgver}.tar.gz")
md5sums=('3e1b15a55a0bd511e6437fdb604a10b1')


build() {
  cd "${srcdir}/${_realname}-${pkgver}"

  msg "Starting configure..."
  ./configure \
    --prefix=/usr \
    --with-proj-include=/usr/include \
    --with-proj-lib=/usr/lib \
    --with-geos-include=/usr/include/geos \
    --with-geos-lib=/usr/lib || return 1

  msg "Starting make..."
  make || return 1

  msg "Starting install..."
  make DESTDIR=$pkgdir install-strip || return 1
}
