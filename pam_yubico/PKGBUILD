# Maintainer: Linus Karlsson <arch at zozs dot se>
# Contributor: Peter Hultqvist <endnode dot se>
# Contributor: Fernando Jim√©nez Solano <fjim at sdfeu dot org>
pkgname=pam_yubico
pkgver=2.11
pkgrel=1
pkgdesc="Yubico Pluggable Authentication Module (PAM) "
arch=('i686' 'x86_64')
url="http://code.google.com/p/yubico-pam/"
license=('custom:BSD')
depends=('glibc' 'ykclient' 'ykpers')
makedepends=('gcc' 'make')
source=(
	"http://yubico-pam.googlecode.com/files/$pkgname-$pkgver.tar.gz"
	"workaround_pam_bug.patch"
)
sha1sums=('e841ab473fee7c28af96e4d18fef427a8e1a947b'
	  '2686396c8cff564d6d220b47418cd19b3e0e25bc')

build()
{
	cd $srcdir/$pkgname-$pkgver/
	patch -Np1 -i $srcdir/workaround_pam_bug.patch
	./configure --prefix=/usr --with-pam-dir=/lib/security || return 1
	make || return 1
	make DESTDIR="$pkgdir/" install || return 1

	install -D -m0644 $srcdir/$pkgname-$pkgver/COPYING $pkgdir/usr/share/licenses/$pkgname/COPYING || return 1
}
