# Maintainer: Chipster Julien <julien dot chipster @ archlinux dot fr>
pkgname=sshd_autoban
url="http://www.google.fr"
pkgver=0.1
pkgrel=2
pkgdesc="A ssh autoban for fast and slow brute force attack"
arch=('any')
license=('GPL')
depends=(python python-yaml)
source=($pkgname-$pkgver.tar.gz)
md5sums=('e2c7391164dd4f3de79af59fdb1e1b02')
install=sshd_autoban.install

build()
{
 echo "nothing to do"
 # nothing to do
}
package()
{
  # Create directories	
  cd "$srcdir/$pkgname-$pkgver"
  mkdir -p "$pkgdir/etc"
  mkdir -p "$pkgdir/usr/bin"
  mkdir -p "$pkgdir/usr/lib/systemd/system"
  mkdir -p "$pkgdir/var/log/sshd_autoban"
  
  # Copy
  
  cp -a sshd_autoban.py "$pkgdir/usr/bin/sshd_autoban"
  cp -a sshd_autoban.conf "$pkgdir/etc"
  cp -a system_d "$pkgdir/usr/lib/systemd/system/sshd_autoban.service"
  touch "$pkgdir/var/log/sshd_autoban/banned_ip"

  # Fixing right
  
  chmod 644 "$pkgdir/etc/sshd_autoban.conf"
  chmod 644 "$pkgdir/var/log/sshd_autoban"
  chmod 755 "$pkgdir/usr/bin/sshd_autoban"
}
