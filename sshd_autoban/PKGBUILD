# Maintainer: Chipster Julien <julien dot chipster @ archlinux dot fr>
pkgname=sshd_autoban
url="http://www.google.fr"
pkgver=0.3
pkgrel=2
pkgdesc="A ssh autoban for fast and slow brute force attack"
arch=('any')
license=('GPL')
depends=(python python-yaml)
source=($pkgname-$pkgver.tar.gz)
md5sums=('a53bde4eb9ac61d105f49591e40d87f9')
install=sshd_autoban.install

build()
{
 echo "nothing to do"
 # nothing to do
}
package()
{
  # Create directories	
  cd "$srcdir/$pkgname-$pkgver"
  mkdir -p "$pkgdir/etc/sshd_autoban"
  mkdir -p "$pkgdir/usr/bin"
  mkdir -p "$pkgdir/usr/lib/systemd/system"
  mkdir -p "$pkgdir/var/log/sshd_autoban"
  
  # Copy
  
  cp -a sshd_autoban.py "$pkgdir/usr/bin/sshd_autoban"
  cp -a mailer_python.py "$pkgdir/usr/bin/mailer_python"
  cp -a sshd_autoban.conf "$pkgdir/etc/sshd_autoban/sshd_autoban_example.conf"
  cp -a system_d "$pkgdir/usr/lib/systemd/system/sshd_autoban.service"

  # Fixing right
  
  chmod 644 "$pkgdir/etc/sshd_autoban/sshd_autoban_example.conf"
  chmod 644 "$pkgdir/var/log/sshd_autoban"
  chmod 755 "$pkgdir/usr/bin/sshd_autoban"
  chmod 755 "$pkgdir/usr/bin/mailer_python"
}
