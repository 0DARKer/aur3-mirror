# Maintainer:  jfperini <@jfperini>
# Contributor: jfperini <@jfperini>

pkgname=openasb-server
_realname=openasb-server
pkgdesc="Software to manage LAN-House and Cyber ​​Café (Client)."
pkgver=0.7.962
pkgrel=1
arch=('any')
url="http://www.openasb.com"
changelog=ChangeLog
license=('custom')
depends=('gambas3-gb-image>=3.5' 'gambas3-gb-image<=3.99.0' 'gambas3-gb-qt4>=3.5' 'gambas3-gb-qt4<=3.99.0' 'gambas3-gb-form>=3.5' 'gambas3-gb-form<=3.99.0' 'gambas3-gb-crypt>=3.5' 'gambas3-gb-crypt<=3.99.0' 'gambas3-gb-db>=3.5' 'gambas3-gb-db<=3.99.0' 'gambas3-gb-db-form>=3.5' 'gambas3-gb-db-form<=3.99.0' 'gambas3-gb-desktop>=3.5' 'gambas3-gb-desktop<=3.99.0' 'gambas3-gb-form-dialog>=3.5' 'gambas3-gb-form-dialog<=3.99.0' 'gambas3-gb-settings>=3.5' 'gambas3-gb-settings<=3.99.0' 'gambas3-gb-net>=3.5' 'gambas3-gb-net<=3.99.0' 'gambas3-gb-net-curl>=3.5' 'gambas3-gb-net-curl<=3.99.0' 'gambas3-gb-qt4-ext>=3.5' 'gambas3-gb-qt4-ext<=3.99.0' 'gambas3-gb-qt4-webkit>=3.5' 'gambas3-gb-qt4-webkit<=3.99.0' 'gambas3-gb-sdl-sound>=3.5' 'gambas3-gb-sdl-sound<=3.99.0' 'gambas3-gb-v4l>=3.5' 'gambas3-gb-v4l<=3.99.0' 'gambas3-gb-web>=3.5' 'gambas3-gb-web<=3.99.0' 'gambas3-runtime>=3.5' 'gambas3-runtime<=3.99.0' 'gambas3-gb-web>=3.5' 'gambas3-gb-web<=3.99.0' 'gambas3-gb-v4l>=3.5' 'gambas3-gb-v4l<=3.99.0' 'gambas3-gb-settings>=3.5' 'gambas3-gb-settings<=3.99.0' 'gambas3-gb-sdl-sound>=3.5' 'gambas3-gb-sdl-sound<=3.99.0' 'gambas3-gb-qt4-webkit>=3.5' 'gambas3-gb-qt4-webkit<=3.99.0' 'gambas3-gb-qt4-ext>=3.5' 'gambas3-gb-qt4-ext<=3.99.0' 'gambas3-gb-qt4>=3.5' 'gambas3-gb-qt4<=3.99.0' 'gambas3-gb-net-curl>=3.5' 'gambas3-gb-net-curl<=3.99.0' 'gambas3-gb-net>=3.5' 'gambas3-gb-net<=3.99.0' 'gambas3-gb-image>=3.5' 'gambas3-gb-image<=3.99.0' 'gambas3-gb-form-dialog>=3.5' 'gambas3-gb-form-dialog<=3.99.0' 'gambas3-gb-form>=3.5' 'gambas3-gb-form<=3.99.0' 'gambas3-gb-desktop>=3.5' 'gambas3-gb-desktop<=3.99.0' 'gambas3-gb-db-form>=3.5' 'gambas3-gb-db-form<=3.99.0' 'gambas3-gb-db>=3.5' 'gambas3-gb-db<=3.99.0' 'gambas3-gb-crypt>=3.5' 'gambas3-gb-crypt<=3.99.0' 'vinagre' 'wakeonlan')
makedepend=('gambas3-devel')
source=(https://dl.dropboxusercontent.com/u/148494036/GNU-Linux/OpenASB/${_realname}-$pkgver.tar.bz2 license.txt\
        'openasb-server.desktop' 'openasb-server.png')
md5sums=('024bdeba421fc5914d334f7b03057ff9'
         'b6f1380e33b47d0ed95c7ba1b3f4ec73'
         'c88a98613381689fad6f6e1c2b0caba3'
         'f6ac343a6232a97f604cf20ec27e175c')

build() {
  cd ${srcdir}/${_realname}

  /usr/bin/gbc3 -e -a -g -t -x  && gba3
}

package() {
  cd ${srcdir}/${_realname}

  install -d ${pkgdir}/usr/bin
  install -m755 openasb-server.gambas ${pkgdir}/usr/bin/openasb-server
  install -D ../openasb-server.png \
    ${pkgdir}/usr/share/pixmaps/openasb-server.png
  install -D ../openasb-server.desktop \
    ${pkgdir}/usr/share/applications/openasb-server.desktop
  install -Dm644 ${srcdir}/license.txt ${pkgdir}/usr/share/licenses/openasb-server/license.txt
}
