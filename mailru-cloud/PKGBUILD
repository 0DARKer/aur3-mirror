# Contributor: ReNoM <renom@list.ru>
pkgname=mailru-cloud
pkgver=14.01.1500
pkgrel=2
pkgdesc="Client of Cloud@Mail.Ru (Mail.Ru free online storage)."
 
arch=("i686" "x86_64")
 
url="http://cloud.mail.ru/"
license=("custom")
 
depends=("libsm" "gtk2")

case "$CARCH" in
	"i686")
		source=("https://desktopcloud.cdnmail.ru/linux/i386/cloud")
		sha256sums=("e070c6aff1867ff4436ed7ac04c341f0a82c5db98b8104eb355866d87a523127")
		;;
	"x86_64")
		source=("https://desktopcloud.cdnmail.ru/linux/amd64/cloud")
		sha256sums=("d0a320ff438e545298714f02078c6820c0e47d945ba64dc5dc86ac098f79a227")
		;;
	*)
		echo "Unsupported arch: $CARCH"
		exit 1
		;;
esac

source+=("https://cloud.mail.ru/apple-touch-icon.png" "https://cloud.mail.ru/LA/index.html" "mailru-cloud.desktop")
sha256sums+=("fa859a57460a938c77c1feffefd628ac38f583e887d65a07e4fee2f60030b571" "59ac32892873abc3062564b08e2f0734dd6b26b7d44060cb91bcf2bebee0871e" "88fd84cd7f5ca8495e93d3abf79e1a8b6e5b5660d741153f4d8afa6542c8d65a")

package () {
	mkdir -p $pkgdir/usr/share/{applications,pixmaps,licenses/${pkgname}}
	install -Dm755 $srcdir/cloud $pkgdir/usr/bin/${pkgname}
	install -Dm644 $startdir/mailru-cloud.desktop $pkgdir/usr/share/applications/
	install -Dm644 $startdir/apple-touch-icon.png $pkgdir/usr/share/pixmaps/mailru-cloud.png
	install -Dm644 $startdir/index.html $pkgdir/usr/share/licenses/${pkgname}/LICENSE.html
}

