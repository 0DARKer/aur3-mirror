#Maintainer: Nathan Owe <ndowens.aur at gmail dot com>
#Contributor: scj <scj archlinux us>
pkgname=4th
pkgver=3.61.3
pkgrel=1
pkgdesc="A Forth Compiler"
arch=('i686' 'x86_64')
url="http://www.xs4all.nl/~thebeez/4tH/index.html"
license=('LGPL')
depends=('glibc')
install=
source=("http://4th.googlecode.com/files/${pkgname}-${pkgver}-unix.tar.gz"
        "Makefile.patch")
md5sums=('ed9a8d44766af8d86f322d0d593990ce'
         '124ded30fea1a6378bd034b100b2405a')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}-unix/sources"
  patch -uNi ${srcdir}/Makefile.patch
  if [ "$CARCH" == "x86_64" ]; then
    cp include/* . ;
  fi
  make
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}-unix/sources"
  install -d ${pkgdir}/usr/{share/{doc,man}/4th,{lib,bin}}
  make BINARIES=${pkgdir}/usr/bin \
       LIBRARIES=${pkgdir}/usr/lib \
       DOCDIR=${pkgdir}/usr/share/doc \
       MANDIR=${pkgdir}/usr/share/man install
}
