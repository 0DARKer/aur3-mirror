# Maintainer : Daniel T. Borelli < daltomi@aol.com >
# Contributor: sekret
# Contributor: flu

pkgname=flvlc
pkgver=2.4.0
pkgrel=2
pkgdesc='FLTK media player by libvlc'
arch=('i686' 'x86_64')
#url="http://sourceforge.net/p/flvlc/"
url='https://bitbucket.org/daltomi/flvlc'
license=('GPL3')
depends=('fltk' 'vlc')
makedepends=('git' 'cmake')
options=('!buildflags')
_gitroot=$url.git
_gitname='flvlc'


prepare() {
  cd "$srcdir"
  msg "Connecting to GIT server...."

  if [[ -d "$_gitname" ]]; then
    cd "$_gitname" && git pull origin
    msg "The local files are updated."
  else
    git clone "$_gitroot" --depth=1 --single-branch --branch "v.$pkgver" "$_gitname"
  fi

  msg "GIT checkout done or server timeout"
}

build() {
  src_git=$srcdir/$_gitname/

  #Build  
  msg "Starting build..."
  cd $src_git/
  cmake -DCMAKE_BUILD_TYPE=Release && make
}

package() {
 #cd "${srcdir}"
 install -Dm0755 $srcdir/$_gitname/flvlc "${pkgdir}/usr/bin/flvlc"
}

# vim:set ts=2 sw=2 et:
