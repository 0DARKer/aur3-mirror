# Maintainer: Adam Hani Schakaki <krzd@krzd.net>
# Contributor: Andreas Wagner <Andreas dot Wagner at em dot uni-frankfurt dot de>

pkgname=gnome-scan
pkgver=0.7.2
pkgrel=2
pkgdesc="A Gnome scanning program which integrates to the desktop like print is."
arch=('i686' 'x86_64')
url="http://www.gnome.org/projects/gnome-scan/index"
license=('GPL2')
depends=('gegl' 'gimp' 'sane' 'intltool' 'gconf' 'gtk2')
conflicts=('gnome-scan-svn' 'gnomescan')
replaces=('gnomescan')
source=("http://ftp.acc.umu.se/pub/GNOME/sources/$pkgname/${pkgver:0:3}/$pkgname-$pkgver.tar.bz2"
        "gegl012.diff")
sha256sums=(`wget ${source/.t*}.sha256sum -qO - | grep tar.bz2 | cut -d " " -f1`
            'e8bf363a0f7b6618951052d016f7a12be44bf6afb20cbdd5e8b5401b669294b7')

build() {
	cd "$srcdir/$pkgname-$pkgver"
	patch -p 0 < ../gegl012.diff
	export CFLAGS=`pkg-config --libs gthread-2.0`
	./configure --prefix=/usr
	make
}

package() {
        cd "$srcdir/$pkgname-$pkgver"
	make DESTDIR="$pkgdir" install
}

