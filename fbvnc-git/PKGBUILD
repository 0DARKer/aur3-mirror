pkgname=fbvnc-git
pkgver=20130111
pkgrel=1
pkgdesc="A small framebuffer vnc viewer"
arch=('i686' 'x86_64')
url="http://repo.or.cz/w/fbvnc.git"
license=('custom:BSD')
depends=()
makedepends=('git')
source=()
md5sums=()

_gitroot=git://repo.or.cz/fbvnc.git
_gitname=fbvnc

build() {
  cd "${srcdir}"

  msg "Connecting to GIT server..."

  if [[ -d ${_gitname} ]]; then
    cd "${_gitname}"
    git pull origin
    msg "The local files are updated"
  else
    git clone "${_gitroot}"
    cd "${_gitname}"
  fi

  msg "Checkout done or server timeout"

  rm -rf "${srcdir}/${_gitname}-build"
  git clone "${srcdir}/${_gitname}" "${srcdir}/${_gitname}-build"
  cd "${srcdir}/${_gitname}-build"

  msg "Starting make..."
  make fbvnc
}

package() {
  install -D -m 755 "${srcdir}/${_gitname}-build/${_gitname}" "${pkgdir}/usr/bin/${_gitname}"
}

