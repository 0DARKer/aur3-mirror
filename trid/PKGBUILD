# Contributor: p2k <Patrick.Schneider@uni-ulm.de>
pkgname=trid
pkgver=2.0
pkgrel=1
pkgdesc="TrID - An utility designed to identify file types from their binary signatures"
arch=('i686' 'x86_64')
url="http://mark0.net/soft-trid-e.html"
license=('CUSTOM')
depends=()
makedepends=()
source=(http://mark0.net/download/trid_linux.zip http://mark0.net/download/triddefs.zip)
md5sums=('e1d727115cfe51b44a9bb405bd3bf418'
         '40fee4f26e9f03f141d7761418281e32')

build() {
  cd "$srcdir"

  install -D trid "$pkgdir/opt/trid/trid"
  install -m 644 TrIDDefs.TRD "$pkgdir/opt/trid/triddefs.trd"
  install -m 644 readme_e.txt "$pkgdir/opt/trid/README"

  mkdir -p "$pkgdir/usr/bin"
  cat > "$pkgdir/usr/bin/trid" <<EOF
#!/bin/bash

t="\$1"
shift 1
d=\`pwd\`

if [ "\$t" != "" -a "\${t:0:1}" != "/" ];then
  t="\$d/""\$t"
fi

cd /opt/trid
./trid "\$t" \$*

EOF
  chmod +x "$pkgdir/usr/bin/trid"
}

# vim:set ts=2 sw=2 et:
