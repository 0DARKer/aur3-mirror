# Contributor: Daniel Isenmann <daniel.isenmann [at] gmx.de>
pkgname=lxdvdrip
pkgver=1.74
pkgrel=1
pkgdesc="lxdvdrip is able to rip a DVD title or chapters, reauthor the files to a DVD-Structure, preview the Files and burn to a DVD+/-R"
url="http://developer.berlios.de/projects/lxdvdrip/"
license="GPL"
depends=('dvdauthor' 'mplayer' 'dvd+rw-tools' 'transcode' 'dvdwizard' 'libdvdread' 'libdvdnav')
makedepends=('libdvdread')
conflicts=('mpgtx')
provides=('mpgtx')
arch=('i686' 'x86_64')
source=(http://download.berlios.de/lxdvdrip/$pkgname-$pkgver.tar.gz make.patch)
md5sums=('211d644316ccf1fe98619e8af466b6f7'
         '1e364214e174850d7dcf4d2a009f957d')
build()
{
  cd $startdir/src/$pkgname

  mkdir -p $startdir/pkg/{etc,usr/bin,usr/share/man/man1}

  patch -Np0 -i ../make.patch || return 1

  make || return 1
  make INSTALLDIR=$startdir/pkg/usr/ install

  cp doc-pak/lxdvdrip.conf.EN $startdir/pkg/etc

  cd vamps && make PREFIX=$startdir/pkg/usr/ install || return 1
  cd ..
  cd dvdbackup && make INSTALLDIR=$startdir/pkg/usr/ install || return 1
  cd ..
  cd requant && make PREFIX=$startdir/pkg/usr/ install || return 1
  cd ..
  cd buffer && make INSTBIN=$startdir/pkg/usr/bin/ install || return 1 
  cd ..
  cp mpgtx/mpgtx $startdir/pkg/usr/bin
}
