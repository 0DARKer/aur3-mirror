# Maintainer: Andreas B. Wagner <AndreasBWagner@pointfree.net>
# Maintainer: Bhoppi Chaw <bhoppi@hotmail.com>
# Contributor: Thiago Coutinho
# Contributor: Thomas Dziedzic

pkgname=ns-3
pkgver=3.14.1
pkgrel=1
pkgdesc='Discrete-event network simulator to replace ns-2'
arch=('i686' 'x86_64')
url='http://www.nsnam.org/'
license=('GPL')
depends=('gsl'
'gtk2'
'libxml2'
'python2'
'sqlite3')
makedepends=('fakeroot'
'findutils')
#optdepends=('openmpi: mpi support')
source=("http://www.nsnam.org/release/ns-allinone-$pkgver.tar.bz2")

build()
{
	# _use_mpi='--enable-mpi'
	#echo '********************************'
	#echo '* To compile with mpi support, you should edit this PKGBUILD file'
	#echo '* and UNCOMMENT "_use_mpi" variable.'
	#echo '********************************'

	# build ns-3
	cd $srcdir/ns-allinone-$pkgver/
	sed -i 's/python/python2.7/g' build.py
	echo $srcdir/ns-allinone-$pkgver/build.py
	./build.py
}
package()
{
	cd $srcdir/ns-allinone-$pkgver/ns-$pkgver
	python2.7 ./waf --prefix=/usr --destdir=$pkgdir/ install
}

md5sums=('ea4b6f76e28110890d18f82f2b7cb407')
