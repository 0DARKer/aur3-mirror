# fedoracoin-qt-git Arch PKGBUILD
# Maintainer mxtm <max@mxtm.me>
# Based off of the dogecoin-qt-git PKGBUILD, based off of primecoin-qt's PKGBUILD by Daniel Spies

pkgname=fedoracoin-qt-git
_gitname=fedoracoin
_binname=fedoracoin
pkgver=0.41.5b4b2cb
pkgrel=4
pkgdesc="A QT wallet for the FedoraCoin cryptocurrency, git version."
arch=('x86_64' 'i686')
url="https://bitcointalk.org/index.php?topic=380466.0"
license=('MIT')
provides=('fedoracoin-qt')
conflicts=('fedoracoin-qt')
depends=('qt4' 'miniupnpc' 'boost-libs')
makedepends=('boost' 'gcc' 'make' 'git')
source=('git+https://github.com/invisibel/fedoracoin.git'
        'fedoracoin-qt.pro'
        'fedoracoin.desktop')
install=fedoracoin-qt-git.install

sha256sums=(SKIP
            '1e6b4791f2a6b01138321917c091be8f6b6c0afe324a5ab9420cd387864ba5af'
            'c452d62cfae7c5a5fbb6ce82a50dc844816e9c0517f8216d8ba393cfaf86b88f')

## files & commands for building
_qmake=qmake-qt4

pkgver() {
	cd ${_gitname}
	echo $(git describe --always | sed 's/-/./g')
}
    

build() {
	cd ${_gitname}

	rm fedoracoin-qt.pro

	mv $srcdir/fedoracoin-qt.pro $srcdir/${_gitname}/fedoracoin-qt.pro
	
	${_qmake} ${_binname}-qt.pro
		
	make ${MAKEFLAGS} || make ${MAKEFLAGS}
}

package() {
	install -Dm644 ${_binname}.desktop ${pkgdir}/usr/share/applications/${_binname}.desktop

	cd ${_gitname}
	install -Dm755 ${_binname}-qt "$pkgdir"/usr/bin/${_binname}-qt
	install -Dm644 COPYING "$pkgdir/usr/share/licenses/$pkgname/COPYING"
	install -Dm644 src/qt/res/icons/bitcoin.png "$pkgdir"/usr/share/pixmaps/${_binname}.png
}
