# Maintainer: Louis Tim Larsen <louis(a)louis.dk>
# Contributor: twa022 <twa022@gmail.com>

pkgname=mythtv-status
pkgver=0.10.4
pkgrel=2
pkgdesc="Display MythTV status information"
arch=(any)
url="http://www.etc.gen.nz/projects/mythtv/$pkgname.html"
license=('GPL3')
depends=('perl-xml-libxml' 'perl-date-manip' 'perl-libwww' 'perl-mime-tools' 'perl-sys-sigaction' 'perl-config-autoconf' 'perl-yaml' )
optdepends=('mythtv' 'conky')
makedepends=('git' 'gzip')
source=("git+http://git.etc.gen.nz/$pkgname.git" "http://sources.gentoo.org/cgi-bin/viewvc.cgi/gentoo-x86/media-tv/mythtv-status/files/mythtv-status.1")
md5sums=('SKIP' '1a5b8ad2a8a5de0e5f90156db2ccac53')

pkgver() {
	cd "$srcdir/$pkgname"
	git tag | sort -n | tail -n1
}

package () {
	cd "$srcdir/$pkgname/bin/"
	install -Dm755 "$pkgname" "$pkgdir/usr/bin/$pkgname"
	install -m755 mythtv_recording_now "$pkgdir/usr/bin/"
	install -m755 mythtv_recording_soon "$pkgdir/usr/bin/"
	
        cd "$srcdir/$pkgname/"
        install -Dm644 ChangeLog "$pkgdir/usr/share/doc/mythtv-status/changelog"
        install -m644 FAQ "$pkgdir/usr/share/doc/mythtv-status/"
        install -m644 README "$pkgdir/usr/share/doc/mythtv-status/"

	cd "$srcdir/$pkgname/man/"
 	gzip -c "$srcdir/mythtv-status.1" > mythtv-status.1.gz
 	gzip -c mythtv_recording_now.1 > mythtv_recording_now.1.gz 
 	gzip -c mythtv_recording_soon.1 > mythtv_recording_soon.1.gz
 	install -Dm644 mythtv-status.1.gz "$pkgdir/usr/share/man/man1/mythtv-status.1.gz"
 	install -m644 mythtv_recording_now.1.gz "$pkgdir/usr/share/man/man1/"
 	install -m644 mythtv_recording_soon.1.gz "$pkgdir/usr/share/man/man1/" 	
}
