# Maintainer: ssf <punx69 at gmx dot net>
pkgname=xfce-icon-theme-ivy-svn
pkgver=r262
pkgrel=1
pkgdesc="A very minimalistic icon theme for Xfce"
arch=("any")
url="http://sixsixfive.deviantart.com/art/Ivy-371216510"
license=("CCPL:cc-by-sa-4.0")
optdepends=('tango-icon-theme: for missing icons')
makedepends=('subversion' 'librsvg' 'sed' 'imagemagick' 'optipng' 'gtk-update-icon-cache')
provides=("xfce-icon-theme-ivy=$pkgver")
_svntrunk=https://github.com/sixsixfive/ivy/trunk
_svnmod="$pkgname"

pkgver() {
	cd "$srcdir"/"$_svnmod"  >/dev/null 2>&1
	local ver="$(svnversion)"
	printf "r%s" ""$ver//[[:alpha:]]""
}

build() {
	cd "$srcdir"
	msg "Connecting to SVN server...."
	if [ -d "$_svnmod/.svn" ]; then
		(cd "$_svnmod" && svn up .)
	else
		svn co "$_svntrunk" --config-dir ./ "$_svnmod"
	fi
	msg "SVN checkout done or server timeout"
}

package() {
	cd "$srcdir"/"$_svnmod"
	./build.sh
	mkdir -p "$pkgdir"/usr/share/icons
	if [ -d "$srcdir"/"$_svnmod"/ivy-png ]; then
		mv ivy-png  "$pkgdir"/usr/share/icons/ivy-png
	elif [ -d "$srcdir"/"$_svnmod"/ivy-svg ]; then
		mv ivy-svg  "$pkgdir"/usr/share/icons/ivy-svg
	elif [ -d "$srcdir"/"$_svnmod"/ivy-mixed ]; then
		mv ivy-mixed  "$pkgdir"/usr/share/icons/ivy-mixed
	else
		exit 1
	fi
}
