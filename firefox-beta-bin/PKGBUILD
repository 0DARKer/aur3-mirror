# Contributor: speed145a <speed145a(at)hotmail(dot)com>
# Contributor: Schnouki
# Maintainer : Axilleas P <markelos@archlinux.gr>

pkgname=firefox-beta-bin
pkgver=5.0b3
pkgrel=1
pkgdesc='Standalone web browser from mozilla.org, beta build binaries.'
url='http://www.mozilla.com/en-US/firefox/fx/'
arch=('i686' 'x86_64')
depends=('gtk2' 'dbus-glib' 'desktop-file-utils' 'libxt' 'mime-types' 'nss' 'shared-mime-info')
license=('MPL' 'GPL' 'LGPL')
source=("ftp://ftp.mozilla.org/pub/firefox/releases/${pkgver}/linux-${CARCH}/en-US/firefox-${pkgver}.tar.bz2"
        "$pkgname.desktop" 
        "$pkgname-safe.desktop")
sha512sums=('a06dd90d83e16ad62ff600d8640d97d95fe18b5c8d5237aba34035c086eb7593760f44620198d67a32f569773f6f64e63ba398d83bac4ba432ebb1110e2a25f5'
			'76819ef9e595cf9bdb3d032b191d55e798f6c49905089d21e411fcfe43841289b8681311ef8d47a33ec2c019a6824976b7a2ce544ef54879884afb33647fea01'
			'6e4d00841ce972a4f8c76944767e7aaf72ac195a5346e8676855a703e630e8cf48c7c9290df592de01bef07512c576c771f144d0c0589af0523d1b4b82b681c5')

[[ "$CARCH" == "i686" ]] && sha512sums[0]="909bda0d2ab251186d3d3e534a27acfbfc333ad1fa8dcaf1b80ae48c9738627d419976da7d45dafa33f648e90aeb359a1b8b76312b4a26df90f071dea79f2e7f" 

build() {
	cd $srcdir
#	uncomment this line to remove them if you want
#	rm -rf $_pkgname/{extensions,plugins,searchplugins}
	
	mkdir -p $pkgdir/{usr/{bin,share/{applications,pixmaps}},opt}
	cp -r firefox $pkgdir/opt/$pkgname-$pkgver

	ln -s /opt/$pkgname-$pkgver/firefox $pkgdir/usr/bin/$pkgname
	install -m644 $srcdir/{$pkgname.desktop,$pkgname-safe.desktop} $pkgdir/usr/share/applications/
	install -m644 $srcdir/firefox/icons/mozicon128.png $pkgdir/usr/share/pixmaps/${pkgname}-icon.png
}
