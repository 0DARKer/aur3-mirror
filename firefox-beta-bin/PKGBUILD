# Contributor: speed145a <speed145a(at)hotmail(dot)com>
# Contributor: Schnouki
# Maintainer : Axilleas P <markelos@archlinux.gr>

pkgname=firefox-beta-bin
pkgver=5.0b1
pkgrel=1
pkgdesc='Standalone web browser from mozilla.org, beta build binaries.'
url='http://mozilla.org/'
arch=('i686' 'x86_64')
depends=('gtk2' 'dbus-glib' 'desktop-file-utils' 'libxt' 'mime-types' 'nss' 'shared-mime-info')
license=('MPL' 'GPL' 'LGPL')
source=("ftp://ftp.mozilla.org/pub/firefox/nightly/5.0b1-candidates/build1/linux-${CARCH}/en-US/firefox-${pkgver}.tar.bz2"
        "$pkgname.desktop" 
        "$pkgname-safe.desktop")
sha512sums=('aecaf2f2d6d3da06ec4d3684ce00d08a7e788022b252a1e229f2c19199bfde0b4cba2e87df83237e061fd8dfc6192e0f075d9096199edfdd7842fbef2d14c3b1'
			'76819ef9e595cf9bdb3d032b191d55e798f6c49905089d21e411fcfe43841289b8681311ef8d47a33ec2c019a6824976b7a2ce544ef54879884afb33647fea01'
			'6e4d00841ce972a4f8c76944767e7aaf72ac195a5346e8676855a703e630e8cf48c7c9290df592de01bef07512c576c771f144d0c0589af0523d1b4b82b681c5')

[[ "$CARCH" == "i686" ]] && sha512sums[0]="7322cb353d096f0ccac01a5b1a22448e8fda39ba679580320af9105282369855f3fdc335a42639680f9aef6b85a2a6cb951c4ce87840f1400bb1591cb4c2738e" 

build() {
	cd $srcdir
#	uncomment this line to remove them if you want
#	rm -rf $_pkgname/{extensions,plugins,searchplugins}
	
	mkdir -p $pkgdir/{usr/{bin,share/{applications,pixmaps}},opt}
	cp -r firefox $pkgdir/opt/$pkgname-$pkgver

	ln -s /opt/$pkgname-$pkgver/firefox $pkgdir/usr/bin/$pkgname
	install -m644 $srcdir/{$pkgname.desktop,$pkgname-safe.desktop} $pkgdir/usr/share/applications/
	install -m644 $srcdir/firefox/icons/mozicon128.png $pkgdir/usr/share/pixmaps/${pkgname}-icon.png
}
