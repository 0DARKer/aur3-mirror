# Contributor: speed145a <speed145a(at)hotmail(dot)com>
# Contributor: Schnouki
# Maintainer : Axilleas P <markelos@archlinux.gr>

pkgname=firefox-beta-bin
pkgver=5.0b2
pkgrel=1
pkgdesc='Standalone web browser from mozilla.org, beta build binaries.'
url='http://mozilla.org/'
arch=('i686' 'x86_64')
depends=('gtk2' 'dbus-glib' 'desktop-file-utils' 'libxt' 'mime-types' 'nss' 'shared-mime-info')
license=('MPL' 'GPL' 'LGPL')
source=("ftp://ftp.mozilla.org/pub/firefox/releases/${pkgver}/linux-${CARCH}/en-US/firefox-${pkgver}.tar.bz2"
        "$pkgname.desktop" 
        "$pkgname-safe.desktop")
sha512sums=('c0074a0a5df8d8d5d8dab2c9795dceb0ab8b19473b7369aa2825b0f10071ec7c60f27e7405182ea42f12fe0a5ecd16fef0c95e8c5beb35f5e4b1b033ebbf30b7'
			'76819ef9e595cf9bdb3d032b191d55e798f6c49905089d21e411fcfe43841289b8681311ef8d47a33ec2c019a6824976b7a2ce544ef54879884afb33647fea01'
			'6e4d00841ce972a4f8c76944767e7aaf72ac195a5346e8676855a703e630e8cf48c7c9290df592de01bef07512c576c771f144d0c0589af0523d1b4b82b681c5')

[[ "$CARCH" == "i686" ]] && sha512sums[0]="9e9ed2e51904dd882aff71f79c8ffc270a5ef522c1bcfa55cc46c5110265b2b8a2bffec930246358e0a39abfcc460e5d88df229e50b2125d123460d1327b9dc0" 

build() {
	cd $srcdir
#	uncomment this line to remove them if you want
#	rm -rf $_pkgname/{extensions,plugins,searchplugins}
	
	mkdir -p $pkgdir/{usr/{bin,share/{applications,pixmaps}},opt}
	cp -r firefox $pkgdir/opt/$pkgname-$pkgver

	ln -s /opt/$pkgname-$pkgver/firefox $pkgdir/usr/bin/$pkgname
	install -m644 $srcdir/{$pkgname.desktop,$pkgname-safe.desktop} $pkgdir/usr/share/applications/
	install -m644 $srcdir/firefox/icons/mozicon128.png $pkgdir/usr/share/pixmaps/${pkgname}-icon.png
}
