# Contributor: speed145a <speed145a(at)hotmail(dot)com>
# Contributor: Schnouki
# Maintainer : Axilleas P <markelos@archlinux.gr>

pkgname=firefox-beta-bin
pkgver=4.2a1pre
pkgrel=1
pkgdesc='Standalone web browser from mozilla.org, beta build and pre - binaries.'
url='http://nightly.mozilla.org/'
arch=('i686' 'x86_64')
depends=('gtk2' 'dbus-glib' 'desktop-file-utils' 'libxt' 'mime-types' 'nss' 'shared-mime-info')
license=('MPL' 'GPL' 'LGPL')
source=("http://ftp.mozilla.org/pub/mozilla.org/firefox/nightly/latest-trunk/firefox-${pkgver}.en-US.linux-${CARCH}.tar.bz2"
        "$pkgname.desktop" 
        "$pkgname-safe.desktop")
md5sums=('7bd92abaa007d84254012d75324ce245'
         '07ba13b1e632ccad9b30ea64f6e74fb3'
         '9e521c10b0e2e167c8326377b6c39f55')
sha1sums=('f44c61361c3f742534bb7d6bd2ad38028eda5669'
          'dd2afa6a6369b9c6ca549152d2df46794b3b385d'
          '30990dafa5bea211ea2b84dadb56ac68324f48a3')
[[ "$CARCH" == "i686" ]] && md5sums[0]="62fc9dd2bd16dda172fd01e1334f01d9" && sha1sums[0]="a7f3fd7a6ea64bc5e7c3c2b159b0ef9135a3b684"

build() {
	cd $srcdir
#	uncomment this line to remove them if you want
#	rm -rf $_pkgname/{extensions,plugins,searchplugins}
	
	mkdir -p $pkgdir/{usr/{bin,share/{applications,pixmaps}},opt}
	cp -r firefox $pkgdir/opt/$pkgname-$pkgver

	ln -s /opt/$pkgname-$pkgver/firefox $pkgdir/usr/bin/$pkgname
	install -m644 $srcdir/{$pkgname.desktop,$pkgname-safe.desktop} $pkgdir/usr/share/applications/
	install -m644 $srcdir/firefox/icons/mozicon128.png $pkgdir/usr/share/pixmaps/${pkgname}-icon.png
}
