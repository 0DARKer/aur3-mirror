#CONTRIBUTOR: Zephyr

pkgname=plasma-menu-bar
pkgver=0.1.14
pkgrel=3
pkgdesc="Plasmoid to display menubar of application windows"
url="https://launchpad.net/plasma-widget-menubar"
arch=('i686' 'x86_64')
license=('GPL')
depends=('kdebase-workspace>=4.6.0' 'appmenu-qt' 'qjson')
makedepends=('cmake' 'automoc4')
optdepends=('appmenu-gtk: Showing GTK+ Apps menus')
source=("http://launchpad.net/plasma-widget-menubar/trunk/${pkgver}/+download/plasma-widget-menubar-${pkgver}.tar.bz2"
        'shadow.patch' 'mouse_interval.diff' 'menu_animation.diff')
sha1sums=('f41ec456dbe7083d5fd4255f6189b5e4da67121b'
          '053a1abe6df2c9834a1e6e99538513725ba66222'
          '9cf6463a877023ac9e17ac9c7f55c8f42bbb2a6f'
          'e6c329fb509c29b6448f07c61c86066cadbfa468')

build() {
  cd ${srcdir}/plasma-widget-menubar-${pkgver}

  #Upstream Patches
  patch -Np0 -i ${srcdir}/shadow.patch
  patch -Np0 -i ${srcdir}/mouse_interval.diff
  patch -Np0 -i ${srcdir}/menu_animation.diff

  cmake -DCMAKE_INSTALL_PREFIX=`kde4-config --prefix`
  make
}

package() {
  cd "${srcdir}/plasma-widget-menubar-${pkgver}"
  make DESTDIR=${pkgdir} install
}
# vim:syntax=sh
