# Contributor: Julien Quintard <mycure@gmail.com>
# Maintainer: Julien Quintard <mycure@gmail.com>

pkgname=mingw32-jsoncpp
pkgver=0.5.0
pkgrel=1
pkgdesc="A JSON C++ library"
arch=('any')
url="http://jsoncpp.sourceforge.net/"
license=('Public')
makedepends=('scons' 'gcc')
depends=('gcc-libs')
source=("http://sourceforge.net/projects/jsoncpp/files/jsoncpp/0.5.0/jsoncpp-src-${pkgver}.tar.gz/download")
md5sums=('24482b67c1cb17aac1ed1814288a3a8f')
options=('!strip' '!buildflags')

build()
{
  cd ${srcdir}/jsoncpp-src-${pkgver}
  scons platform=mingw
}

package(){
  cd ${srcdir}/jsoncpp-src-${pkgver}
  mkdir -p ${pkgdir}/usr/i486-mingw32/include
  cp -r include/json ${pkgdir}/usr/i486-mingw32/include/json
  mkdir -p ${pkgdir}/usr/i486-mingw32/lib
  cp buildscons/mingw/src/lib_json/libjson_mingw_libmt.a ${pkgdir}/usr/i486-mingw32/lib/
  cd ${pkgdir}/usr/i486-mingw32/lib/
  ln -sf libjson_mingw_libmt.a libjsoncpp.a
  cd ${pkgdir}/usr/i486-mingw32/include/
  mv json jsoncpp
}
