# $Id: PKGBUILD 71340 2010-03-06 18:44:25Z andrea $
# Maintainer: rtfreedman (rob<d0t>til<d0t>freedman<aT>gmail<d0t>com

pkgname=easytag-git
pkgver=20130221
pkgrel=1
pkgdesc="Utility for viewing, editing and writing ID3 tags - git version"
arch=('i686' 'x86_64')
license=('GPL')
url='http://projects.gnome.org/easytag/'

depends=('id3lib' 'taglib' 'libid3tag' 'gtk2' 'libvorbis' 'flac' 'speex' 'wavpack' 'desktop-file-utils' 'hicolor-icon-theme')

makedepends=('git')
conflicts=('easytag')

_gitroot="git://git.gnome.org/easytag"
_gitname="easytag"

install=easytag.install

build() {
  
  cd ${srcdir}
  msg "Connecting to GIT server...."

  if [ -d "${srcdir}/${_gitname}" ] ; then
    ( cd ${_gitname} && git pull --rebase )
  else
    git clone ${_gitroot}
  fi

  rm -rf ${_gitname}-build
  git clone ${_gitname} ${_gitname}-build
  cd ${_gitname}-build
    
msg "GIT checkout done or server timeout"
  msg "Starting make..."

  ./autogen.sh
  ./configure --prefix=/usr 
  make
}

package() {
  cd ${srcdir}/${_gitname}-build
  make DESTDIR=${pkgdir} install
}
