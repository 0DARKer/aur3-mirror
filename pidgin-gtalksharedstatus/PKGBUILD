# Maintainer: Ng Oon-Ee <ngoonee.talk@gmail.com>

pkgname=pidgin-gtalksharedstatus
_realname=gtalk-shared-status
pkgver=0.2.3
pkgrel=1
pkgdesc="Adds Google Shared Status compatibility that permits to set the status for all the resources connected. This allows to go Invisible on GTalk."
url="http://www.siorarina.net/gtalk-shared-status/"
arch=('i686' 'x86_64')
license=('GPL')
depends=('libpurple')
makedepends=('pkg-config')
source=(http://www.siorarina.net/gss/src/${_realname}-${pkgver}.src.tar.gz)
md5sums=('69b762351a89ea23336917f5006f80d5')

# Note from the author of this plugin, put here for any future maintainers of this package:-
# Don't know if you're still interested but I've created an autotools
# version. The only thing that makes me 'cheat' is to override pkglibdir
# because (at least in Debian) plugins are installed in /usr/lib/purple-2 dir
# so the final install dir is pkglibdir = $(prefix)/lib/purple-2. Don't know
# if it's a good idea to do that but for now is the only solution I've found.
# Please let me know if there're issues.
#
# He is contactable at Federico Zanco <federico.zanco@gmail.com>

build() {
  cd ${srcdir}/${_realname}-${pkgver}
  make
  sed -i -e "s|~/.purple/plugins|${pkgdir}/usr/lib/pidgin|" Makefile
}

package() {
  cd ${srcdir}/${_realname}-${pkgver}
  make install
}
