# Contributor: Tilo Brueckner  blueperil at gmx de

pkgname=perl-filesys-smbclient
_realname=Filesys-SmbClient
pkgver=3.99_40
pkgrel=1
pkgdesc="Interface for access Samba filesystem with libsmclient.so"
arch=('i686' 'x86_64')
url="http://search.cpan.org/dist/${_realname}/"
license=('PerlArtistic')
depends=('perl>=5.10.0' 'smbclient')
options=(!emptydirs)
source=(http://search.cpan.org/CPAN/authors/id/P/PH/PHILIPP/${_realname}-${pkgver}.tar.gz
        disable_request.patch)
sha256sums=('6a1e725be86f2b04ccd2e8f7ca4eb0b8208b12967052a1b3f7e1a1cd040ac5e5'
            '9f72c4b5c9797250e7fc7a3d36cdaf704c558fcffe85733abc561b811e391b7e')

build() {
    cd ${startdir}/src/${_realname}-${pkgver}
    
    # get rid of the requests while configuring
    patch -Np1 -i "${srcdir}/disable_request.patch" || return 1
    
    # install module in vendor directories.
    perl Makefile.PL INSTALLDIRS=vendor || return 1
    make  || return 1
}

package() {
    cd ${startdir}/src/${_realname}-${pkgver}
    make install DESTDIR=${startdir}/pkg || return 1
}
