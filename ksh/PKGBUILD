# Contributor: Mark Taylor <skymt0@gmail.com>
# Contributor: Stefan Husmann <stefan-husmann@t-online.de>
# Contributor: xduugu

# AT&T requires the user to agree to a license agreement before
# downloading the source, so I didn't include the direct URLs in the
# PKGBUILD. Just visit 'http://www.research.att.com/~gsf/download/',
# download 'ast-ksh.2009-05-05.tgz' and 'INIT.2009-05-05.tgz', and
# place them in the same directory as the PKGBUILD before running
# makepkg

pkgname=ksh
pkgver=2009.05.05
pkgrel=2
pkgdesc="AT&T's Korn shell"
arch=('i686' 'x86_64')
url="http://www.kornshell.com/"
license=('CPL')
conflicts=('pdksh')
source=("INIT.2009-05-05.tgz" "ast-ksh.2009-05-05.tgz")
md5sums=('e941c0a95b73c8309e6afff10f79d988'
         'dff46f3e047ac35ac78a81c52938991b')
sha256sums=('70954fa9af98a6e0b98bb5125e20340b68affa9495670f617e7ffd51baf17092'
            '82bdc0d4d9f41e7cc010d8f98e2aa2dfd44cab97a38987e34c92b9d3035ff9e3')

build() {
  cd "$srcdir"

  bin/package make || return 1

  # Install manually to avoid nmake dep
  install -Dm755 arch/linux.*/bin/ksh $pkgdir/bin/ksh || return 1
  for _i in 1 3; do
    install -d $pkgdir/usr/share/man/man${_i} || return 1
    cp -r arch/linux.*/man/man${_i} $pkgdir/usr/share/man/man${_i}
  done
}
