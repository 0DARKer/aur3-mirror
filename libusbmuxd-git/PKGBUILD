# Maintainer: Michael Gerhaeuser <michael dot gerhaeuser at gmail dot com>

pkgname=libusbmuxd-git
pkgver=0.r9.7e87847
pkgrel=1
pkgdesc="The usbmuxd communication interface library"
url="http://www.libimobiledevice.org/"
arch=('i686' 'x86_64')
license=('LGPL2.1')
depends=('usbmuxd-git')
makedepends=('git')
provides=('libusbmuxd')
conflicts=('libusbmuxd')

source="git+http://git.sukimashita.com/libusbmuxd.git"
sha512sums=('SKIP')
_gitname="libusbmuxd"

pkgver() {
    cd $srcdir/$_gitname
    printf "0.r%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse --short HEAD)"
}

build() {
    cd ${srcdir}/$_gitname
    msg "Starting make..."

    ./autogen.sh --prefix=/usr --without-cython
    make || return 1
}

package() {
  cd $srcdir/$_gitname
  make DESTDIR=$pkgdir install || return 1
}
