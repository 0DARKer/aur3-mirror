pkgname=simplescreenrecorder
pkgver=0.0.6
pkgrel=1
pkgdesc="A feature-rich screen recorder that supports X11 and OpenGL."
arch=("i686" "x86_64")
url="http://www.maartenbaert.be/simplescreenrecorder/"
license=("GPL3")
depends=("qt4" "ffmpeg" "alsa-lib" "libgl" "glu" "libx11" "libxext" "libxfixes")
if test "$CARCH" == x86_64; then
	optdepends=("lib32-simplescreenrecorder: OpenGL recording of 32-bit applications")
fi
makedepends=("git" "pkg-config" "grep")
options=("!libtool")
install=simplescreenrecorder.install

build() {
	cd "${srcdir}"
	
	git clone https://github.com/MaartenBaert/ssr.git
	cd ssr
	git checkout 0.0.6
	
	export CPPFLAGS="$CPPFLAGS -DNDEBUG -DQT_NO_DEBUG -DTEST_USE_FFMPEG_VERSIONS=1"
	
	./configure --prefix=/usr
	make -j "$( grep -c "^processor" /proc/cpuinfo )"
	
}

package() {
	cd "${srcdir}"
	
	cd ssr
	
	make DESTDIR="${pkgdir}" install
	
}
