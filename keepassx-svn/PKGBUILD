# Contributor teddy_beer_maniac <teddy_beer_maniac@wp.pl>

pkgname=keepassx-svn
pkgver=200
pkgrel=1
pkgdesc="Cross platform password manager"
arch=('i686' 'x86_64')
url="http://www.keepassx.org/"
license=('GPL2')
depends=('qt')
source=()
provides=('keepassx')
conflicts=('keepassx')
md5sums=()
_svntrunk='https://keepassx.svn.sourceforge.net/svnroot/keepassx/trunk/'
_svnmod='keepassx'

build() {
	cd $startdir/src

	if [ -d $_svnmod/.svn ]; then
        	(cd $_svnmod && svn up -r $pkgver)
	else
		svn co $_svntrunk --config-dir ./ -r $pkgver $_svnmod
	fi

	msg "SVN checkout done or server timeout"
	msg "Starting make..."

	rm -r $startdir/src/$_svnmod-build
        cp -r $_svnmod $_svnmod-build
	cd $_svnmod-build

	qmake PREFIX=/usr
	make || return 1
	make INSTALL_ROOT=$startdir/pkg install
}
