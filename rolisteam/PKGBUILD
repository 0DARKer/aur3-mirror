# Maintainer : Antoine Albertelli < antoinea101 at gmail dot com >
# Contributor: Eric Forgeot < http://anamnese.online.fr >
pkgname=rolisteam
pkgver=1.6.0
pkgrel=1
pkgdesc="An online role game playing software."
arch=('i686', 'x86_64')
url="http://www.rolisteam.org"
license=('GPL')
depends=('phonon')
source=(http://rolisteam.googlecode.com/files/${pkgname}-${pkgver}.tar.gz)
md5sums=('94f4620c70dda63eb509ae2a88aa417b')

build() {
	# Generates translation files
	cd $srcdir/${pkgname}-${pkgver}/traduction
	lrelease *.ts

    # Simple patch on phonon include directories
	cd $srcdir/${pkgname}-${pkgver}
	sed -i -e "s/<Phonon/<phonon/" src/LecteurAudio.h

    # Generates the makefile and runs it.
	qmake-qt4 
	make
} 

package() {
	cd $srcdir/${pkgname}-${pkgver}
    install -D -m755 bin/rolisteam $pkgdir/usr/bin/rolisteam
	install -D -m644 ${pkgname}.desktop $pkgdir/usr/share/applications/${pkgname}.desktop
}

