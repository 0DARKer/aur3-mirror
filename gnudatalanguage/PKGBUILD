# Maintainer: Orlando Garcia Feal <rodland at gmail dot com>

pkgname=gnudatalanguage
pkgver=0.9
pkgrel=1
pkgdesc="An IDL (Interactive Data Language) compatible incremental compiler (ie. runs IDL programs)"
arch=('i686' 'x86_64')
url="http://gnudatalanguage.sourceforge.net/"
license=('GPL')
depends=('python2' 'plplot' 'gsl' 'imagemagick>=6.4.0.2' 'readline' 'hdf5' 'netcdf' 'wxgtk')
makedepends=('python-numarray')
options=('!makeflags')
source=(http://downloads.sourceforge.net/gnudatalanguage/gdl-${pkgver}.tar.gz gdl.profile)
md5sums=('dd357a8b2569629ba8d29078200d45e7'
         'f09b277f4b4fee3bedcc57c5add1ffe7')

build() {
  cd ${startdir}/src/gdl-${pkgver}
  aclocal
  autoconf
  libtoolize --copy --force 
  ./configure --prefix=/usr --with-python --enable-python_version=2.7 --with-Magick \
    --without-hdf CPPFLAGS="${CPPFLAGS} -I/usr/include/ImageMagick -I/usr/include/python2.7"
  make || return 1
  make DESTDIR=${startdir}/pkg install

  install -d ${startdir}/pkg/usr/lib/gdl
  cp -r src/pro/* ${startdir}/pkg/usr/lib/gdl
  chmod -R 644 ${startdir}/pkg/usr/lib/gdl	 
  install -D -m755 ../gdl.profile ${startdir}/pkg/etc/profile.d/gdl.sh
}
