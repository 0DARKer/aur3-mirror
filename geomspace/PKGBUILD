# Maintainer:  Michael Kogan <michael dot kogan at gmx dot net>

pkgname=geomspace
pkgver=0.8
pkgrel=5
pkgdesc="A browser for geometric (i.e. Euclidean, Riemann, Minkowski) spaces"
arch=('i686' 'x86_64')
url="https://sourceforge.net/projects/geomspace/"
license=('GPL')
depends=('glui')
source=(http://downloads.sourceforge.net/project/$pkgname/$pkgver/GeomSpace$pkgver-src.tar.gz http://downloads.sourceforge.net/project/$pkgname/Theory/UniformGeomSpace-2010.11.02-en.pdf make.patch)
md5sums=('cceb4a914b0d3d26ca4e6d1714b16467' '14560f6f2cba975be1ba8d047b5acec5' '899865b93ed52799f31dd3b2ff8b7f84')
sha1sums=('526a5116f506b9d4f7e4f386559e4d335822c84f' 'd224bb95140684449b7ce7ec81fc54dff1e02717' '38ec7e6a2da646981b31e1118863ef766e8512a9')

build() {
    cp /usr/lib/libglui.a $srcdir/GeomSpace/extern/lib/
    if [ -f /usr/include/glui.h ]; then
    	cp /usr/include/glui.h $srcdir/GeomSpace/extern/include/GL/
    fi
    cd $srcdir/GeomSpace/make
    patch Makefile < $srcdir/make.patch
    make || return 1
}
package() {
    install -D -m755 $srcdir/GeomSpace/bin/GeomSpace $pkgdir/usr/bin/geomspace
    install -D -m644 $srcdir/GeomSpace/DeveloperManual.pdf $pkgdir/usr/share/doc/$pkgname/DeveloperManual.pdf
    install -D -m644 $srcdir/GeomSpace/UserManual.pdf $pkgdir/usr/share/doc/$pkgname/UserManual.pdf
    install -D -m644 $srcdir/UniformGeomSpace-2010.11.02-en.pdf $pkgdir/usr/share/doc/$pkgname/UniformGeomSpace-2010.11.02-en.pdf
    msg "The user manual and a document containing a theory explanation have been installed to /usr/share/doc/$pkgname!"
}
