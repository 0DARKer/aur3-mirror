# Maintainer:  Michael Kogan <michael dot kogan at gmx dot net>
# Contributor:  Jakub Klinkovsk√Ω	<kuba dot klinkovsky at gmail.com>

pkgname=geomspace
pkgver=0.11
pkgrel=3
pkgdesc="A browser for geometric (i.e. Euclidean, Riemann, Minkowski) spaces"
arch=('i686' 'x86_64')
url="https://sourceforge.net/projects/geomspace/"
license=('GPL')
depends=('libxpm' 'mesa' 'fltk')
source=("http://downloads.sourceforge.net/project/$pkgname/$pkgver/GeomSpace-$pkgver-src.tar.gz"
        "http://downloads.sourceforge.net/project/$pkgname/Theory/UniformGeomSpace-2010.11.02-en.pdf"
        "http://sourceforge.net/projects/geomspace/files/Models/5Cubes.gmsp"
        "http://sourceforge.net/projects/geomspace/files/Models/5Tetra.gmsp"
        "make.patch"
        "geomspace.png"
        "geomspace.desktop"
        "linux.mk")
sha1sums=('03adf3621eb8a68d92f0eaf7c918f93bdc3ae2ab'
          'd224bb95140684449b7ce7ec81fc54dff1e02717'
          'c046032724f667a9d11c41856db351d3ef338713'
          '6a25b29dd104a8326722ae7261c9f4afb14f5944'
          '47e0f6b73a9eb5c7ac708b1711f50d128384f23d'
          '7a85229fe2b49a2ea7f745f9b078bf7364cac115'
          '9ea1201969d3fea1a17d5addad1aa724dd189112'
          'ccaf6d31aaf08d5f594af987fa6776f2ddb14b06')

build() {
    cd "$srcdir/GeomSpace/make"
    cp "$srcdir/linux.mk" .
    patch Makefile < "$srcdir/make.patch"
    echo "OS = linux" > platform
    make
}
package() {
    install -D -m755 "$srcdir/GeomSpace/bin/GeomSpace" "$pkgdir/usr/bin/geomspace"
    install -D -m644 "$srcdir/GeomSpace/doc/DeveloperManual.pdf" "$pkgdir/usr/share/doc/$pkgname/DeveloperManual.pdf"
    install -D -m644 "$srcdir/GeomSpace/doc/UserManual.pdf" "$pkgdir/usr/share/doc/$pkgname/UserManual.pdf"
    install -D -m644 "$srcdir/UniformGeomSpace-2010.11.02-en.pdf" "$pkgdir/usr/share/doc/$pkgname/UniformGeomSpace-2010.11.02-en.pdf"
    install -D -m644 "$srcdir/$pkgname.desktop" "$pkgdir/usr/share/applications/$pkgname.desktop"
    install -D -m644 "$srcdir/$pkgname.png" "$pkgdir/usr/share/pixmaps/$pkgname.png"
    install -d -m755 "$pkgdir/usr/share/$pkgname/models"
    install -D -m644 "$srcdir/5Cubes.gmsp" "$pkgdir/usr/share/$pkgname/models"
    install -D -m644 "$srcdir/5Tetra.gmsp" "$pkgdir/usr/share/$pkgname/models"   

    msg "\033[31;1m The user manual and a document containing a theory explanation have been installed to /usr/share/doc/$pkgname. It is strongly recommended to read them in order to use Geomspace! \033[0m"
    msg "\033[31;1m Some models of geometrical objects have been installed to /usr/share/$pkgname/models. Additional models can be found at http://sourceforge.net/projects/geomspace/files/Models/ \033[0m"
}