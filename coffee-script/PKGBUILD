# Maintainer: Simon Lipp <aur@simon.lipp.name>
# Contributor: Chris Bolton <http://scr.im/chris-kun>
# Contributor: Sergei Lebedev <superbobry at gmail dot com>

pkgname=coffee-script
pkgver=1.0.0
pkgrel=1
pkgdesc='CoffeeScript is a little language that compiles into JavaScript.'
arch=any
url=http://coffeescript.org
license=(custom)
makedepends=(nodejs)
source=(http://github.com/jashkenas/coffee-script/tarball/$pkgver)
md5sums=('cce9d12ed9dea7ce820836b420a41a59')

build() {
  cd $srcdir/jashkenas-coffee-script-*

  install -dm755 $pkgdir/usr/bin &&
  bin/cake --prefix $pkgdir/usr install &&
   
  install -Dm644 LICENSE $pkgdir/usr/share/licenses/${pkgname}/LICENSE &&
  install -Dm644 README $pkgdir/usr/share/doc/${pkgname}/README &&

  rm -rf $pkgdir/usr/bin/cake $pkgdir/usr/bin/coffee &&
  ln -s /usr/lib/coffee-script/bin/coffee $pkgdir/usr/bin/coffee &&
  ln -s /usr/lib/coffee-script/bin/cake $pkgdir/usr/bin/cake || return 1
}
