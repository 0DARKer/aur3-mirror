# Maintainer: Pierre Neidhardt <ambrevar at gmail dot com>

pkgname=libimago2-svn
pkgver=94
pkgrel=1
pkgdesc="Image file format I/O library"
url="http://gfxtools.sourceforge.net/"
license=('custom')
arch=(i686 x86_64)
provides=('libimago')
conflicts=('libimago')

_svntrunk="http://gfxtools.svn.sourceforge.net/svnroot/gfxtools/libimago2"
_svnmod="libimago2"

build() {
    if [ -d ${_svnmod}/.svn ]; then
        (cd ${_svnmod} && svn up -r ${pkgver})
    else
        svn co ${_svntrunk} --config-dir ./ ${_svnmod}
    fi

    msg "SVN checkout done or server timeout."
    msg "Starting make..."

    cd "${srcdir}"/libimago2
    sed -i 's|PREFIX = /usr/local|PREFIX = /usr|' configure
    ./configure --prefix=/usr
    make
}

package() {
    cd "${srcdir}"/libimago2
    DESTDIR=${pkgdir} make install
}
