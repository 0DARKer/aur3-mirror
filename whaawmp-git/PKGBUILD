# Maintainer: Jakob Nixdorf <flocke@user-helfen-usern.de>

pkgname=whaawmp-git
pkgver=20090312
pkgrel=2
pkgdesc="A GTK+ Media player written in python and using gstreamer"
arch=('i686' 'x86_64')
url="http://home.gna.org/whaawmp/"
license=('GPL3')
makedepends=('intltool' 'git')
depends=('pygtk' 'gstreamer0.10-python' 'pyxdg' 'gstreamer0.10-good')
conflicts=('whaawmp' 'whaawmp-svn')
provides=('whaawmp' 'whaawmp-svn')
source=()
md5sums=()

_gitroot=git://gitorious.org/whaawmp/mainline.git
_gitname=mainline

build() {

  cd ${srcdir}
  msg "Connecting to gitorious.org GIT server...."

  if [ -d ${srcdir}/$_gitname ] ; then
  cd $_gitname && git pull origin
  msg "The local files are updated."
  else
  git clone $_gitroot
  fi

  msg "GIT checkout done or server timeout"
  msg "Starting make..."

  git clone $_gitname $_gitname-build
  cd ${srcdir}/$_gitname-build

  ./setup.py build
  ./setup.py install --prefix=/usr --root=$startdir/pkg || return 1

}
