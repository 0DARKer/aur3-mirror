# Maintainer: Daniele Paolella <dp@mcrservice.it>
pkgname=supervisor
pkgver=3.0a9
pkgrel=2
pkgdesc='A system for controlling process state under UNIX'
arch=('i686' 'x86_64')
url='http://supervisord.org'
license=('custom')
depends=('python>=2.5', 'setuptools' 'meld3>=0.6.5')
backup=('etc/supervisord.conf')
changelog=ChangeLog
source=("http://dist.supervisord.org/$pkgname-$pkgver.tar.gz"
        'supervisor')
md5sums=('23bf9f3d40b653a7495b710d18237e66'
         'de39a63165fb7a796156b6924e8789a1')

build() {
  cd "$srcdir/$pkgname-$pkgver"
  python2 setup.py install --prefix=/usr --root=$pkgdir || return 1
  install -D -m600 "$srcdir/$pkgname-$pkgver/build/lib/$pkgname/skel/sample.conf" \
    "$pkgdir/etc/supervisord.conf"
  install -D "$srcdir/supervisor" "$pkgdir/etc/rc.d/supervisor"
  mkdir -p "$pkgdir/usr/share/licenses/$pkgname"
  mv "$pkgdir/usr/doc/COPYRIGHT.txt" "$pkgdir/usr/share/licenses/$pkgname"
  mv "$pkgdir/usr/doc/LICENSES.txt" "$pkgdir/usr/share/licenses/$pkgname"
  mkdir -p "$pkgdir/usr/share/doc"
  mv "$pkgdir/usr/doc" "$pkgdir/usr/share/doc/$pkgname"
}

# vim:set ts=2 sw=2 et:
