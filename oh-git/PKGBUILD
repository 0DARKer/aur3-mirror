 
# Maintainer: Jens Staal <staal1978@gmail.com>

pkgname=oh-git
# Shell formerly known as "gosh"
pkgver=20110727
pkgrel=1
pkgdesc="A Plan9 rc-inspired UNIX shell written in Go"
arch=('i686' 'x86_64')
url="https://github.com/michaelmacinnis/oh#readme"
license=('MIT')
depends=('go-tecla-git' 'libtecla' 'go')
provides=('oh')
install=('oh.install')
makedepends=('git')

_gitroot=('git://github.com/michaelmacinnis/oh.git')
_gitname=('oh')

 if [ ${CARCH}=x86_64 ]
    then
     _arch="amd64"
   else
     _arch="i386"
 fi

build() {
 cd $srcdir

msg "getting oh sources"
   if [ -d $_gitname ] ; then
    cd $_gitname && git pull $_gitroot
    msg "The local files are updated."
  else
    git clone $_gitroot $_gitname
  fi

msg "setting up build directory"
  rm -rf $srcdir/build
  cp -ar $srcdir/$_gitname $srcdir/build
  cd $srcdir/build
  make
}

package() {
 mkdir -p $pkgdir/usr/bin
 install -m755 $srcdir/build/oh $pkgdir/usr/bin/
 mkdir -p $pkgdir/usr/share/licenses/oh
 install -m644 $srcdir/oh/LICENSE $pkgdir/usr/share/licenses/oh/LICENSE
}
