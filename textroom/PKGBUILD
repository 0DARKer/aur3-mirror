# Contributor: Guillem Rieu <guillemr@gmx.net>
# Contributor SpepS <archspepser at yahoo dot it>

pkgname=textroom
pkgver=0.6.5
pkgrel=2
pkgdesc="TextRoom is a simple full-screen text editor heavily inspired by similar text editors such as Q10 and JDarkRoom."
arch=(i686 x86_64)
url="http://code.google.com/p/textroom/"
license=('GPL')
depends=('qt>=4.5.1' 'sdl_mixer' 'hunspell')
source=(http://textroom.googlecode.com/files/$pkgname-$pkgver.tar.gz)
md5sums=('940ed9475c260264ecf84edf72bb095a')

build() {
  cd "$srcdir/$pkgname-$pkgver"

  # hunspell fix
  sed 's+-lhunspell+-lhunspell-1.2+' -i textroom.pro || return 1
  # sound dir fix
  sed 's+/usr/share/sounds+/usr/share/sounds/textroom+g' -i textroom.pro -i src/textroom.cpp || return 1
  # dictionary fix
  sed 's+/usr/share/myspell/dicts/+/usr/share/myspell/+g' -i src/textroom.cpp || return 1

  # build
  qmake || return 1
  make || return 1
  make INSTALL_ROOT="$pkgdir" \
    install_data install_target install_icon install_mime install_desktop
}

# vim:set ts=2 sw=2 et:
