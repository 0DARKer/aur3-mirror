# Maintainer: Lukas Jirkovsky <l.jirkovsky@gmail.com>
pkgname=openafs-features-libafs
pkgver=1.5.78
pkgrel=1
pkgdesc="OpenAFS libafs kernel module for modular Features package"
arch=('i686' 'x86_64')
url="http://www.openafs.org/"
license=('custom')
depends=('openafs-features')
makedepends=('kernel26-headers')
install=openafs.install
source=(http://www.openafs.org/dl/openafs/$pkgver/openafs-$pkgver-src.tar.bz2)
md5sums=('d2ad44d1642f25fce6ac2d2944439559')

build() {
  cd "$srcdir/openafs-$pkgver"

  ./configure --prefix=/usr --sysconfdir=/etc --libexecdir=/usr/lib/openafs \
    --with-krb5-conf=/usr/bin/krb5-config --with-linux-kernel-packaging
}

package() {
  cd "$srcdir/openafs-$pkgver"

  make DESTDIR="$pkgdir/" install_only_libafs

  # remove rendundant directories
  rm -rf "$pkgdir"/usr

  # install license
  install -D -m644 src/LICENSE "$pkgdir"/usr/share/licenses/$pkgname/LICENSE
}

# vim:set ts=2 sw=2 et:
