# Maintainer: Anonymo <meowdib at gmail dot com>
# Maintainer: Luca Bennati <lucak3 at gmail dot com>

pkgname=freetype2-lcd_
pkgver=2.4.5
pkgrel=1
pkgdesc="TrueType font rendering library for LCD Displays"
arch=('i686' 'x86_64')
license=('GPL')
url="http://freetype.sourceforge.net"
depends=('zlib' 'cairo>=1.10.0' 'libxft-lcd')
provides=("freetype2=${pkgver}")
conflicts=('freetype2' 'freetype2-lcd')
options=('!libtool')
source=(http://downloads.sourceforge.net/sourceforge/freetype/freetype-$pkgver.tar.bz2
	freetype-2-quantization_fix.patch
	ftoption.h)

build() {
  cd "$srcdir/freetype-$pkgver"
  cp ../../ftoption.h include/freetype/config/ftoption.h
  cp ../../freetype-2-quantization_fix.patch src/autofit/freetype-2-quantization_fix.patch
  cd src/autofit
  patch -p0 -i ./freetype-2-quantization_fix.patch
  cd ../../

  ./configure --prefix=/usr
  make
}

package() {
  cd "$srcdir"
  make -C "freetype-$pkgver" DESTDIR="$pkgdir" install
}

md5sums=('90428a6d8ec4876cd1eb94858c2a59b0'
         '385162f4a3e01653d55ab9a9be0c8808'
         '5a8171040609dc6f67048e955b5b1324')
