# Maintainer: Karol "Kenji Takahashi" Wo≈∫niak <kenji.sx>

pkgname=cpputest
pkgver=3.4
pkgrel=1
pkgdesc="unit testing and mocking framework for C/C++"
url="http://cpputest.org"
arch=('i686' 'x86_64')
license=('BSD')
provides=('cpputest')
source=("https://github.com/${pkgname}/${pkgname}/archive/v${pkgver}.tar.gz"
        "gcc48.patch")
md5sums=('6be44249262a6433ce2fb1196245b2b2'
         'aa899934613b8e3a0ee6e0137ab85b3f')

build() {
    cd ${srcdir}/${pkgname}-${pkgver}

    patch -p1 -i ${srcdir}/gcc48.patch
    autoconf

    ./configure --disable-maintainer-mode --prefix=/usr
    make
}

package() {
    cd ${srcdir}/${pkgname}-${pkgver}

    make DESTDIR=${pkgdir} install

    install -Dm644 COPYING "${pkgdir}/usr/share/licenses/${pkgname}/COPYING"
}
