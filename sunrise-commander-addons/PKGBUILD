# Maintainer: Stefan Husmann <stefan-husmann@t-online.de>
pkgname=sunrise-commander-addons  
pkgver=5r392
pkgrel=1
pkgdesc="Addons for Sunrise Commander"
url="http://www.emacswiki.org/emacs/Sunrise_Commander"
arch=('any')
license=('GPL')
depends=('sunrise-commander')
_emacs_major_version=$(emacs --version | head -1|cut -b 11,12)
source=(http://www.emacswiki.org/emacs/download/sunrise-x-buttons.el \
  http://www.emacswiki.org/emacs/download/sunrise-x-mirror.el \
  http://www.emacswiki.org/emacs/download/sunrise-x-popviewer.el \
  http://www.emacswiki.org/emacs/download/sunrise-x-loop.el \
  http://www.emacswiki.org/emacs/download/sunrise-x-modeline.el \
  http://www.emacswiki.org/emacs/download/sunrise-x-tree.el \
  http://www.emacswiki.org/emacs/download/sunrise-x-checkpoints.el \
  http://www.emacswiki.org/emacs/download/sunrise-x-old-checkpoints.el)
md5sums=('de7fb73568f229974e4b0515bdf27dd5'
         '5c2d4f7347c9c6b31a1f47ccce019c10'
         '59388053c1f7ac4f34bbb403d1ce9f1b'
         '829cb9d2c9e93ea80df41668be449f2d'
         'c9888debb4700010cca94a42963a03be'
         '226761720f3489e67b5540784324a9d7'
         '8e2e41ff10e5e5d9cf007a247e46e75d'
         'd9bc45ad832e3b46d29db57bfa77a8b3')

build() {
  cd "$srcdir"
  if [ ${_emacs_major_version} == 22 ]; then
    rm sunrise-x-checkpoints.el
  else
    rm sunrise-x-old-checkpoints.el
  fi
  for _i in *.el
  do
    emacs --batch -q -f batch-byte-compile ${_i}
  done 
}
package() {
  install -d $pkgdir/usr/share/emacs/site-lisp
  cd "$srcdir"
  for _i in *.el
  do
    install ${_i} $pkgdir/usr/share/emacs/site-lisp/${_i}
    install ${_i}c $pkgdir/usr/share/emacs/site-lisp/${_i}c
  done
}
