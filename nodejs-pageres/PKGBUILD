# Maintainer: Johannes Schleifenbaum <johannes [at] js-webcoding [dot] de>
# Please report issues at https://github.com/jojosch/pkgbuilds

pkgname=nodejs-pageres
pkgver=0.4.0
pkgrel=1
pkgdesc="Get screenshots of websites in different resolutions"
arch=(any)
url="https://github.com/sindresorhus/pageres"
license=("MIT")
depends=('nodejs')
optdepends=()
source=(
    "http://registry.npmjs.org/${pkgname/nodejs-/}/-/${pkgname/nodejs-/}-${pkgver}.tgz"
    "LICENSE"
)
noextract=("${pkgname/nodejs-/}-${pkgver}.tgz")
sha1sums=(
  '7596ffd865dc2468a5183dab0ae91e60b033ec48'
  '855b17174b0193c9fbcaf000327b2bcb3d4c38fd'
)
sha256sums=(
  '2aab5f175362e3f837e26c32b4ad29079a2f71a63ba4eacaf645c546327bf4f3'
  'a09bad52fe9deab4338f4f80105f8b8d0c10a2618a8b4517a2cf260b48d968d2'
)

package() {
  cd "${srcdir}"
  install -D -m644 LICENSE "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"

  local _npmdir="${pkgdir}/usr/lib/node_modules/"
  mkdir -p "$_npmdir"
  cd "$_npmdir"

  npm install --user root -g --prefix "${pkgdir}/usr" "${pkgname/nodejs-/}@${pkgver}"
}
