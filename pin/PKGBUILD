# Maintainer: Roni Choudhury <aichoudh@gmail.com>
pkgname=pin
vendor_pkgver=2.8-37300-gcc.3.4.6-ia32_intel64-linux
pkgver=${vendor_pkgver//-/_}
pkgrel=1
pkgdesc="Pin is a tool for the dynamic instrumentation of programs."
gccver=3.4.6
arch=('any')
url="http://www.pintool.org"
license=('custom')
groups=()
depends=('gcc>=3.4' 'bash')
makedepends=()
optdepends=()
provides=()
conflicts=()
replaces=()
backup=()
options=('!strip')
install=
changelog=
source=(http://www.cs.virginia.edu/kim/publicity/pin/kits/$pkgname-$vendor_pkgver.tar.gz pin.sh)
noextract=()
md5sums=('d8da75214565346ebf195341c3c2a8dd'
         '3b1d1a6b21786ad9dbcd649337519ca5')

build() {
  cd "$srcdir/$pkgname-$vendor_pkgver"

  # Copy pin executables, etc. to the /opt/pin directory (because pin
  # uses a non-standard FHS for its stuff).
  mkdir -p ${pkgdir}/opt/pin
  cp -a doc extras ia32 intel64 source ${pkgdir}/opt/pin
  install -m 644 README ${pkgdir}/opt/pin
  install pin ${pkgdir}/opt/pin

  # Copy license documents to license directory.
  mkdir -p ${pkgdir}/usr/share/licenses/pin
  install -m 644 LICENSE ${pkgdir}/usr/share/licenses/pin

  # Copy shell script for modifying path.
  cd "$srcdir"
  mkdir -p ${pkgdir}/etc/profile.d 
  install pin.sh ${pkgdir}/etc/profile.d
}
