# Maintainer: Denis Kasak <reversed(moc.liamg@kasak.sined)>

pkgname=python-pysocks-git
pkgver=1.20
pkgrel=2
pkgdesc="Routes sockets of any TCP service through a SOCKS4, SOCKS5 or HTTP proxy (Anorov fork of socksipy)"
arch=('any')
license=('BSD')
url="https://github.com/Anorov/PySocks"
depends=('python')
provides=('socksipy')
conflicts=('socksipy')
source=('setup.py')
md5sums=('7c2c95e99893626f27bed79b8dd42995')

_gitroot="git://github.com/Anorov/PySocks.git"
_gitname="PySocks"

build() {
  cd "$srcdir"
  msg "Connecting to GIT server...."

  if [ -d $_gitname ]; then
    cd $_gitname && git pull origin
    msg "The local files are updated."
  else
    git clone $_gitroot $_gitname
  fi

  msg "GIT checkout done or server timeout"

  cp "$srcdir/setup.py" "$srcdir/$_gitname/"
}

package() {
  cd "$srcdir/$_gitname"
  python setup.py install --root="$pkgdir/" --optimize=1
}

# vim:set ts=2 sw=2 et:
