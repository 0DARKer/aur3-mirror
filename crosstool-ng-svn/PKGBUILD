# Contributor: Jussi Timperi <jussi.timperi@gmail.com>

pkgname=crosstool-ng-svn
pkgver=1454
pkgrel=1
pkgdesc="Crosstool-NG aims at building (cross) toolchains."
arch=('i686' 'x86_64')
url="http://ymorin.is-a-geek.org/dokuwiki/projects/crosstool"
license=('GPL')
source=()
md5sums=()
depends=('bash')
conflicts=('crosstool-ng')
makedepends=('subversion')

_svntrunk=http://ymorin.is-a-geek.org/svn/crosstool-ng/trunk
_svnmod=crosstool-ng

build() {

  	cd ${srcdir}

  	if [ -d $_svnmod/.svn ]; then
    	(cd $_svnmod && svn up -r $pkgver)
  	else
    	svn co $_svntrunk --config-dir ./ -r $pkgver $_svnmod
  	fi

  	msg "SVN checkout done or server timeout"
  	msg "Starting make..."

  	cp -r $_svnmod $_svnmod-build
  	cd $_svnmod-build

	./configure --prefix=/usr || return 1
	make || return 1
	make DESTDIR=$startdir/pkg install || return 1

	rm -rf ${srcdir}/$_svnmod-build

}
