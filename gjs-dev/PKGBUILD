# Maintainer: Det <nimetonmaili at gmail a-dot com>
# Based on [testing]'s gjs

_pkgbase=gjs
pkgname=gjs-dev
pkgver=0.7.10
_majorver=(`echo ${pkgver} | egrep -o '[0-9]+\.[0-9]*+'`)
pkgrel=1
pkgdesc="Javascript Bindings for GNOME - Bleeding edge version"
arch=('i686' 'x86_64')
url="http://live.gnome.org/Gjs"
license=('GPL')
depends=('gobject-introspection-dev>=0.10.0' 'xulrunner>=1.9.2')
conflicts=('gjs')
provides=("gjs=${pkgver}")
options=('!libtool')
source=(http://ftp.gnome.org/pub/GNOME/sources/${_pkgbase}/${_majorver}/${_pkgbase}-${pkgver}.tar.bz2)
sha256sums=(`wget ${source/.t*}.sha256sum -qO - | grep tar.bz2 | cut -d " " -f1`)

build() {
  cd ${_pkgbase}-${pkgver}
  sed -i 's|python|python2|' scripts/make-tests
  ./configure --prefix=/usr --disable-static
  make
}

package() {
  cd ${_pkgbase}-${pkgver}
  make -j1 DESTDIR="${pkgdir}" install
}