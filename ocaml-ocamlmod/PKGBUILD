# Maintainer: Sergei Lebedev <superbobry@gmail.com>
pkgname=ocaml-ocamlmod
pkgver=0.0.1
pkgrel=1
pkgdesc="OCaml library to generate modules from source files."
url="http://forge.ocamlcore.org/projects/ocamlmod/"
license="LGPL"
arch=("i686" "x86_64")
depends=("ocaml" "ocaml-findlib")
source=("https://forge.ocamlcore.org/frs/download.php/623/ocamlmod-$pkgver.tar.gz")
sha256sums=("b0565250f85e38c57470e03c01b47aafc3e9d42d6f08268968507d9057c2ad42")
options=(!strip)

build () {
  cd "$srcdir/${pkgname/ocaml-/}-$pkgver"
  ocaml setup.ml -configure --prefix /usr --destdir ${pkgdir}
  ocaml setup.ml -build
}

package () {
  cd "$srcdir/${pkgname/ocaml-/}-$pkgver"

  OCAMLFIND_DESTDIR="${pkgdir}$(ocamlfind printconf destdir)"

  mkdir -p "${OCAMLFIND_DESTDIR}"
  ocaml setup.ml -install || return 1
}
