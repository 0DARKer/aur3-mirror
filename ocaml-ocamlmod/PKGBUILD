# Maintainer: Sergei Lebedev <superbobry@gmail.com>
pkgname=ocaml-ocamlmod
pkgver=0.0.1
pkgrel=2
pkgdesc="OCaml library to generate modules from source files."
url="http://forge.ocamlcore.org/projects/ocamlmod/"
license="LGPL"
arch=("i686" "x86_64")
depends=("ocaml" "ocaml-findlib")
source=("http://forge.ocamlcore.org/frs/download.php/623/ocamlmod-$pkgver.tar.gz")
sha256sums=('b0565250f85e38c57470e03c01b47aafc3e9d42d6f08268968507d9057c2ad42')
options=(!strip)

build () {
  cd "$srcdir/${pkgname/ocaml-/}-$pkgver"
  make CONFIGUREFLAGS="--prefix /usr --destdir $pkgdir" build doc
}

package () {
  cd "$srcdir/${pkgname/ocaml-/}-$pkgver"
  export OCAMLFIND_DESTDIR="${pkgdir}$(ocamlfind printconf destdir)"
  install -dm 755 "$OCAMLFIND_DESTDIR"
  make install
}
