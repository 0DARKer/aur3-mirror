# Contributor: Jakob Nixdorf <jakob.nixdorf@online.de>
# Contributor: Evangelos Foutras <foutrelis@gmail.com>
# Maintainer: Dany Martineau <dany.luc.martineau gmail com>

pkgname=childsplay
pkgver=1.5.1
pkgrel=1
pkgdesc="A suite of educational games for young children"
arch=('i686' 'x86_64')
url="http://www.schoolsplay.org/"
license=('GPL')
depends=('python-pygame' 'pygtk' 'python2-sqlalchemy' 'python2-numpy')
optdepends=('childplay-alphabet-sounds')
install=childsplay.install
source=(http://downloads.sourceforge.net/schoolsplay/$pkgname-$pkgver.tgz
        childsplay.desktop setup.py.diff)
md5sums=('6ed368af17e7e2fd129b0b9c5d4921ec'
         '3aa3a801911797bf61a10e4cb7fd5e5a'
         'f1fbb5db75c21c7116aff8d60382a2b0')

build() {
  cd "$srcdir/$pkgname-$pkgver"

  patch -Np0 -i "$srcdir/setup.py.diff" || return 1

  PREFIX="$pkgdir/usr" python2 setup.py install --root="$pkgdir" --optimize=1 || return 1

  install -D -m644 "$srcdir/childsplay.desktop" \
                   "$pkgdir/usr/share/applications/childsplay.desktop"
  install -D -m644 lib/SPData/menu/default/logo_cp_32x32.xpm \
                   "$pkgdir/usr/share/pixmaps/childsplay.xpm"
}

# vim:set ts=2 sw=2 et:
