# Maintainer: Gustavo Castro <gustawho[at]gmail[dot]>
pkgname=berry
pkgver=1.0.0
pkgrel=3
pkgdesc="Modern image viewer, focused on better user interface. Written in Qt5/QML2"
url="http://aseman.co/en/products/berry/"
arch=(any)
license=('GPL3')
depends=('exiv2' 'qt5-base' 'qt5-declarative' 'qt5-svg' 'qt5-multimedia' 'qt5-graphicaleffects' 'qt5-imageformats')
makedepends=('gcc' 'make')
source=("http://aseman.co/downloads/${pkgname}/1/${pkgname}-${pkgver}-src.tar.gz"
        'berry.desktop')
sha512sums=('06289812b6d709bc2db64b41832974a66e8a38e19efef19ef1560717dc0929639aaf912319b6eed986f4422fa273c987f17e5921024b0b155288a2509b995d6b'
            '328bfaa509e2fa1cdcc45e75a106d744f4614a51f4560b054ec17753806b8bd5e8ebd27232dfcadcea52ed983d27a94b22cafa76baaae87b06da5d76a9c3dfbe')

build() {
   cd "${srcdir}/berry"
   mkdir build && cd build
   qmake -r ..
   make
   make clean
}

package() {
  cd "${srcdir}/${pkgname}/build"
  mkdir -p "${pkgdir}/usr/bin" "${pkgdir}/usr/share/applications"
  mkdir -p "${pkgdir}/usr/share/${pkgname}" "${pkgdir}/usr/share/${pkgname}/files" "${pkgdir}/usr/share/${pkgname}/files/icons" "${pkgdir}/usr/share/${pkgname}/files/translations"
  install -m755 "${pkgname}" "${pkgdir}/usr/share/${pkgname}"
  install -m644 files/icons/* "${pkgdir}/usr/share/${pkgname}/files/icons"
  install -m644 files/translations/* "${pkgdir}/usr/share/${pkgname}/files/translations"
  install -m644 "${srcdir}/berry.desktop" "${pkgdir}/usr/share/applications"
  ln -s "/usr/share/${pkgname}/${pkgname}" "${pkgdir}/usr/bin/${pkgname}" 
}
