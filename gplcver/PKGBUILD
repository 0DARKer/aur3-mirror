# Contributor: Anton Bazhenov <anton.bazhenov at gmail>
# Contributor: Simon Ding <dingsm@gmail.com>

pkgname=gplcver
pkgver=2.12a
pkgrel=2
pkgdesc="Free Verilog simulator with a feature set and performance similar to Verilog-XL"
arch=('i686' 'x86_64')
url="http://sourceforge.net/projects/gplcver/"
license=('GPL2')
depends=('glibc')
source=(http://downloads.sourceforge.net/$pkgname/$pkgname-$pkgver.src.tar.bz2 \
  $pkgname.patch)
md5sums=('857a15a9ebc8ef63ece01502509cbeb7'
         '3fd1b9be9b8552916b2a41e7cd245791')

build() {
  cd $srcdir/$pkgname-$pkgver.src/src
  patch -p0 -i ../../$pkgname.patch || return 1
  if [ `uname -m` = "x86_64" ]; then
    make -f makefile.amd64 cver || return 1
  else
    make -f makefile.lnx cver || return 1
  fi
  install -m755 -d $pkgdir/usr/share/doc/$pkgname
  install -m644 -D ../doc/* $pkgdir/usr/share/doc/$pkgname/
  install -m755 -D ../bin/cver $pkgdir/usr/bin/cver
}
