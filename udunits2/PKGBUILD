# Contributor: Graziano Giuliani

pkgname=udunits2
pkgdname="udunits"
pkgver=2.1.11
pkgrel=3
pkgdesc="A program for conversion and manipulation of units of quantities"
arch=('i686' 'x86_64')
url="http://www.unidata.ucar.edu/software/udunits/"
license=('custom')
depends=('glibc')
makedepends=('bison' 'flex')
options=('!libtool')
conflicts=(udunits)
source=(ftp://ftp.unidata.ucar.edu/pub/${pkgdname}/${pkgdname}-$pkgver.tar.gz)
md5sums=('92fcd78aa8c616a210d1375dfe2ec222')

build() {
  cd "$srcdir"/${pkgdname}-$pkgver
  ./configure --prefix=/usr || return 1
  make || return 1
  make DESTDIR="$pkgdir" install || return 1
  make DESTDIR="$pkgdir" install-info install-html install-pdf || return 1
  install -Dm644 LICENSE "$pkgdir"/usr/share/licenses/$pkgname/LICENSE
  ln -sf /usr/lib/libudunits2.a "$pkgdir"/usr/lib/libudunits.a
  install -m 644 lib/udunits.h "$pkgdir"/usr/include/udunits.h
}
