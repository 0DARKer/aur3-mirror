pkgname=lzham
pkgver=1.0
pkgrel=1
pkgdesc="Lossless data compression codec with LZMA-like ratios but 1.5x-8x faster decompression speed"
license=('MIT')
arch=('i686' 'x86_64')
url="https://github.com/richgel999/lzham_codec"
depends=('gcc-libs')
makedepends=('cmake')
conflicts=('zlib')
provides=('zlib')
source=("https://github.com/richgel999/lzham_codec/archive/v1_0_release.tar.gz")
md5sums=('ea57059a8fdb874a91986d4bce37df00')

prepare() {
  cd lzham_codec-1_0_release
}

build() {
  cd lzham_codec-1_0_release
  mkdir -p build && pushd build
  cmake -DCMAKE_INSTALL_PREFIX=/usr \
    -DBUILD_SHARED_LIBS=ON -DCMAKE_SKIP_RPATH=ON ..
  make
}

package() {
  cd lzham_codec-1_0_release
  install -d "$pkgdir"/usr/{include,lib}
  install -m644 include/*.h "$pkgdir"/usr/include
  install -m644 `find build -name *.so`  "$pkgdir"/usr/lib
  install -Dm644 LICENSE "$pkgdir"/usr/share/licenses/lzham/LICENSE
}

