#Contributor: twa022 <twa022 at gmail dot com>

pkgname=zeitgeist-dataprovider-firefox
pkgdesc="Zeitgeist dataprovider for firefox"
pkgver=110
pkgrel=1
arch=('i386' 'x86_64')
url="https://launchpad.net/zeitgeist-dataproviders"
license=('GPL3')
depends=('libzeitgeist' 'firefox>=3.5' 'firefox<4.0')
makedepends=('bzr' 'xulrunner>=1.9.1' 'xulrunner<2.0')

_bzrmod=zeitgeist-dataproviders
_bzrtrunk=http://bazaar.launchpad.net/~zeitgeist-dataproviders/zeitgeist-dataproviders/trunk

build() {
  cd $startdir/src
  msg "Connecting to the server...."

  if [ -d ./$_bzrmod ]; then
    cd ./$_bzrmod && bzr up && cd ..
  else
    bzr co --lightweight $_bzrtrunk $_bzrmod
  fi
  
  cp -r $_bzrmod $_bzrmod-build
  cd $_bzrmod-build
  
  ./autogen.sh --prefix=/usr
  cd firefox-libzg
  make
  make DESTDIR=$pkgdir install
} 
