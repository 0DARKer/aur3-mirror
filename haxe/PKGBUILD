pkgname=haxe
pkgver=2.06
pkgrel=1
pkgdesc="haXe (pronounced as hex) is an open source programming language."
arch=('i686' 'x86_64')
url="http://haxe.org"
license=('GPL')
makedepends=('ocaml' 'cvs' 'zlib')
optdepends=('neko')
options=('!strip')
install=${pkgname}.install
source=('http://haxe.org/file/install.ml')
md5sums=('a0997e50f14575b7c552c164a9664a8a')

build() {
  cd "$srcdir"
  sed -i 's+:anonymous+:anonymous:anonymous+' install.ml || return 1 
  ocaml install.ml
  install -d ${pkgdir}/usr/bin/ ${pkgdir}/opt/haxe/
  cp -r haxe/std ${pkgdir}/opt/haxe/
  cp bin/* ${pkgdir}/usr/bin/
  find "$pkgdir" -name ".svn" -print0 | xargs -0 rm -rf

  ## Uncomment the following if you have neko installed and want to build
  ## haxedoc and haxelib, too.
  #export HAXE_LIBRARY_PATH="haxe/std:." 
  #bin/haxe haxe/std/tools/haxedoc/haxedoc.hxml
  #bin/haxe haxe/std/tools/haxelib/haxelib.hxml
  #cp haxedoc haxelib ${pkgdir}/usr/bin/
}

# vim:set ts=2 sw=2 et:
