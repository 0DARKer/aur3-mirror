# Maintainer: Techlive Zheng<techlivezheng [at] gmail [dot] com>
pkgname=ispcp-omega
pkgdesc="A project founded to build a Multi Server Control and Administration Panel without limits."
pkgver=1.0.7
pkgrel=1
arch=('i686' 'x86_64')
url="http://isp-control.net/"
license=('MPL' 'LGPL' 'GPLv2')
groups=()
depends=(
#        '#base'
#        'tar'
#        'wget'
#        'gzip'
#        'bash'
#        'bzip2'
#        'diffutils'
#        '#base-devel'
#        'gcc'
#        'make'
#        'patch'
#        '#core'
        'iptables'
#        '#extra'
        'lynx'
        'ispell'
        'procmail'
#        '#community'
        'bind>=9'
        'postfix'
        'dnsutils'
        'postgrey'
#        '#AUR'
        'awstats'
        'rkhunter'
        'chkrootkit'
        'policyd-weight'
        'php-pear'
        'php'
        'php-gd'
        'php-cgi'
        'php-mcrypt'
#        '#lsb-base'
#        '#php5-adodb'
#        '#original-awk'
#        '#libsasl2-modules'
        'mod_fcgid'
        'mod_fastcgi'
        'perl-berkeleydb'
        'perl-crypt-cbc'
        'perl-crypt-blowfish'
        'perl-crypt-passwdmd5'
        'perl-date-calc'
        'perl-date-manip'
        'perl-datetime'
        'perl-datetime-timezone'
        'perl-digest-md5'
        'perl-dbd-mysql'
        'perl-dbi'
        'perl-file-copy-recursive'
        'perl-file-mimeinfo'
        'perl-io-stringy'
        'perl-mail-sendmail'
        'perl-mailtools'
        'perl-html-parser'
        'perl-net-dns'
        'perl-net-libidn'
        'perl-net-netmask'
        'perl-term-readkey'
        'perl-term-read-password'
        'libsasl>=2'
        'perl-timedate'
        'proftpd'
        'proftpd-mysql'
        'openssh'
        'xz'
        'glibc'
        'perl-mime-tools'
        'libmysqlclient'
        'libmcrypt'
        'glibc'
        'mysql-clients'
        'mysql'
#        'courier-mta'
        'courier-imap'
        'courier-maildrop'
        'courier-authlib'
        'apache'
        'perl'
        'php'
        'cyrus-sasl'
#        'perl-snmp-session'
#        'perl-net-stmp-server'
        )
optdepends=()
makedepends=()
provides=()
replaces=()
conflicts=()
backup=()
options=()
install=${pkgname}.install
source=("ispcp-omega-${pkgver}.tar.bz2::http://sourceforge.net/project/downloading.php?group_id=189485&filename=ispcp-omega-${pkgver}.tar.bz2")
noextract=()
changelog=Changelog

build() {
  cd "$srcdir/$pkgname-$pkgver"

  sed -i "s:HOST_OS=debian:HOST_OS=arch:g" Makefile
  sed -i "s:/var/www:/srv/http:g" Makefile
  sed -i "s:cd ./configs && \\\$(MAKE) install:#cd ./configs && \\\$(MAKE) install:g" Makefile
  find . -name Makefile -print | xargs sed -i "s:/usr/bin/install:install:g"
}

package() {
  cd "$srcdir/$pkgname-$pkgver"

  make INST_PREF="$pkgdir" install
}

md5sums=('dfebf84b49d59ef46c3b5710811ec772')
