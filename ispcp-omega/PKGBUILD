# Maintainer: Techlive Zheng<techlivezheng [at] gmail [dot] com>
pkgname=ispcp-omega
pkgdesc="A project founded to build a Multi Server Control and Administration Panel without limits."
pkgver=1.0.7
pkgrel=1
arch=('i686' 'x86_64')
url="http://isp-control.net/"
license=('MPL' 'LGPL' 'GPLv2')
groups=()
depends=(
        'apache'
        'awstats'
        'bind>=9'
        'chkrootkit'
        'courier-authlib'
        'courier-imap'
        'courier-maildrop'
        'cyrus-sasl'
        'dnsutils'
        'iptables'
        'ispell'
        'libmcrypt'
        'libmysqlclient'
        'libsasl>=2'
        'lynx'
        'mod_fastcgi'
        'mod_fcgid'
        'mysql'
        'mysql-clients'
        'net-snmp'
        'openssh'
        'perl'
        'perl-berkerleydb'
        'perl-crypt-blowfish'
        'perl-crypt-cbc'
        'perl-crypt-passwdmd5'
        'perl-date-calc'
        'perl-date-manip'
        'perl-datetime'
        'perl-datetime-timezone'
        'perl-dbd-mysql'
        'perl-dbi'
        'perl-digest-md5'
        'perl-file-copy-recursive'
        'perl-file-mimeinfo'
        'perl-html-parser'
        'perl-io-stringy'
        'perl-mail-sendmail'
        'perl-mailtools'
        'perl-mime-tools'
        'perl-net-dns'
        'perl-net-libidn'
        'perl-net-netmask'
        'perl-net-stmp-server'
        'perl-term-readkey'
        'perl-term-readpasswrd'
        'perl-timedate'
        'php'
        'php-cgi'
        'php-gd'
        'php-mcrypt'
        'php-pear'
        'postfix'
        'postgrey'
        'procmail'
        'proftpd'
        'proftpd-mysql'
        'rkhunter'
        'xz'
        )
optdepends=()
makedepends=()
provides=()
replaces=()
conflicts=()
backup=()
options=()
install=${pkgname}.install
source=("ispcp-omega-${pkgver}.tar.bz2::http://sourceforge.net/project/downloading.php?group_id=189485&filename=ispcp-omega-${pkgver}.tar.bz2")
noextract=()
changelog=Changelog

build() {
  cd "$srcdir/$pkgname-$pkgver"

  sed -i "s:HOST_OS=debian:HOST_OS=arch:g" Makefile
  sed -i "s:/var/www:/srv/http:g" Makefile
  sed -i "s:cd ./configs && \\\$(MAKE) install:#cd ./configs && \\\$(MAKE) install:g" Makefile
  find . -name Makefile -print | xargs sed -i "s:/usr/bin/install:install:g"
}

package() {
  cd "$srcdir/$pkgname-$pkgver"

  make INST_PREF="$pkgdir" install
}

md5sums=('dfebf84b49d59ef46c3b5710811ec772')
