# Maintainer: Dany Martineau <dany.luc.martineau gmail com>

pkgname=opensonic
pkgver=0.1.4
pkgrel=1
pkgdesc="Game based on the Sonic the Hedgehog universe."
arch=('i686' 'x86_64')
url="http://opensnc.sourceforge.net/"
license=('GPL')
depends=('libpng' 'allegro' 'dumb')
makedepends=('cmake')
install=(opensonic.install)
source=("http://heanet.dl.sourceforge.net/project/opensnc/Open Sonic/${pkgver}/opensnc-src-${pkgver}.tar.gz"
	  opensonic.desktop)
md5sums=('069fa14f43251b218b4fd81378d1cd78'
         '29ba0a89203cd59cef11ad465ef7145f')

build() {
cd ${srcdir}/opensnc-src-${pkgver}/
unset LDFLAGS
./configure --prefix=/usr
make
}

package() {
cd ${srcdir}/opensnc-src-${pkgver}/
make DESTDIR=${pkgdir} install
mkdir -p ${pkgdir}/usr/share/applications
install ${srcdir}/opensonic.desktop ${pkgdir}/usr/share/applications
install icon.png ${pkgdir}/usr/share/opensonic
mkdir -p ${pkgdir}/usr/bin
echo "cd '/usr/share/opensonic/' && ./opensonic" > ${pkgdir}/usr/bin/opensonic
chmod 755 ${pkgdir}/usr/bin/opensonic
}