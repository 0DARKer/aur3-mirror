# Maintainer: Alexander Baldeck <kth5@archlinuxppc.org>
pkgname=charles
pkgver=3.5.2
pkgrel=1
epoch=
pkgdesc="Web debugging proxy application"
arch=(any)
url="http://www.charlesproxy.com"
license=('custom' 'custom:bounce' 'APACHE')
depends=('java-runtime')
source=(http://www.charlesproxy.com/assets/release/${pkgver}/charles.tar.gz
        charles-arch.patch
        charles.desktop)
md5sums=('49498a331ae53fc1bb02c21d8bcd3be9'
         '8cdedb70530e1dd0093723625f194fba'
         'ce55a3c7dda2773a79f6bdd99d55df7a')

build() {
  cd "$srcdir/$pkgname"
  patch -Np1 -i ${srcdir}/charles-arch.patch

  install -D -m755 ${srcdir}/${pkgname}/bin/charles.sh ${pkgdir}/usr/bin/charles

  for fn in ${srcdir}/${pkgname}/lib/*; do
    install -D -m644 ${fn} ${pkgdir}/usr/share/java/${pkgname}/$(basename ${fn})
  done

  for fn in ${srcdir}/${pkgname}/etc/*; do
    install -D -m644 ${fn} ${pkgdir}/usr/share/apps/${pkgname}/$(basename ${fn})
  done

  install -D -m644 ${srcdir}/${pkgname}/docs/licenses/bounce-license.txt ${pkgdir}/usr/share/licenses/${pkgname}/bounce-license.txt


  install -D -m644 ${srcdir}/charles.desktop ${pkgdir}/usr/share/applications/charles.desktop
}

# vim:set ts=2 sw=2 et:
