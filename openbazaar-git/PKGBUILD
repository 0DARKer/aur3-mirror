#Maintainer: M0Rf30

pkgname=openbazaar-git
pkgver=812.c511e55
pkgrel=1
pkgdesc="A decentralized marketplace proof of concept. It is based off of the POC code by the darkmarket team and protected by the GPL"
arch=('i686' 'x86_64')
url="http://openbazaar.org"
license=('GPL3')
depends=('python2-qrcode' 'python2-requests' 'python2-pyzmq' 'python2-ecdsa' 'python2-pyelliptic-git' 'python2-obelisk' 'python2-gnupg' 'python2-pycountry' 'python2-ipy')
makedepends=('git')
source=('openbazaar::git+https://github.com/OpenBazaar/OpenBazaar.git'
	openbazaar.service
	openbazaar.sh)
install=openbazaar-git.install

package(){
  cd ${srcdir}
  rm -r openbazaar/{pyelliptic,pybitmessage,ecdsa}
  install -dm777 ${pkgdir}/opt/openbazaar/logs
  cp -r openbazaar/* ${pkgdir}/opt/openbazaar/
  install -Dm644 "${srcdir}/openbazaar.service" "${pkgdir}/usr/lib/systemd/system/openbazaar.service"
  install -Dm775 "${srcdir}/openbazaar.sh" "${pkgdir}/usr/bin/openbazaar"
}

pkgver() {
  cd openbazaar
  echo $(git rev-list --count master).$(git rev-parse --short master)
}

md5sums=('SKIP'
         'd7e2f41528075bc20824d7eb616e09e9'
         '20c0cd21704978a07def5c25cd887714')
