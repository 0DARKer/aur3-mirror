# Maintainer: Max Pray a.k.a. Synthead <synthead@gmail.com>

pkgname=caelum-hg
_pkgname=caelum
pkgver=7
pkgrel=1
pkgdesc="Library for Ogre targeted to help creating photorealistic atmospheric effects"
arch=('i686' 'x86_64')
url="http://www.ogre3d.org/tikiwiki/Caelum"
depends=('ogre' 'cegui-ogre')
makedepends=('mercurial')
conflicts=('caelum')
provides=('caelum')
license=('LGPL')

_hgroot="https://caelum.googlecode.com/hg"
_hgrepo="caelum"

build() {
 cd "$srcdir/$_hgrepo"
 cmake -DCMAKE_INSTALL_PREFIX=/usr .
 make
}

package() {
 cd "$srcdir/$_hgrepo"

 # Won't install unless this extists
 [ ! -d doc ] && mkdir doc
 [ ! -f doc/html ] && touch doc/html

 make DESTDIR="$pkgdir" install
 install -Dm 644 "$pkgdir/usr/doc/ReadMe.txt" "$pkgdir/usr/share/$_pkgname/ReadMe.txt"
 rm -rf "$pkgdir/usr/doc"
}
