# Maintainer: lks <lukas dot graetz at web dot de>
_pkgname=cbootimage
pkgname=${_pkgname}-git
pkgver=1.3.8.g502b180
pkgrel=1
pkgdesc="Tools to dump and generate boot config table on Tegra devices"
arch=('i686' 'x86_64' 'armv7h')
license=('GPL')
url="http://http.download.nvidia.com/tegra-public-appnotes/bct-overview.html"
makedepends=('git' 'automake' 'autoconf')
provides=('cbootimage=1.3')
conflicts=('cbootimage')
source=('git://github.com/NVIDIA/cbootimage.git')
md5sums=('SKIP')

#_gitroot="git://nv-tegra.nvidia.com/tools/cbootimage.git"

pkgver() {
  cd "$srcdir/$_pkgname"
  # The version is 1.3 not 1.2!
  git describe | sed 's|-|.|g;s|v1.2|1.3|'
}

build() {
  cd "$srcdir/$_pkgname"
  autoreconf --install --symlink
  ./configure --prefix=/usr
}

package() {
  cd "$srcdir/$_pkgname"
  make DESTDIR="${pkgdir}" install
}
