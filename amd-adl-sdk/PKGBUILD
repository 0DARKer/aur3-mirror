# Maintainer: Vi0L0 <vi0l093@gmail.com>

# NOTE: Download ADL_SDK_6.0.zip manually from 
# http://developer.amd.com/tools-and-sdks/graphics-development/display-library-adl-sdk/
# and paste it next to this PKGBUILD

pkgname="amd-adl-sdk"
pkgver=6.0
pkgrel=1
pkgdesc="API to access display driver functionality for AMD graphics cards."
arch=('i686' 'x86_64')
url="http://developer.amd.com/tools-and-sdks/graphics-development/display-library-adl-sdk/"
license=('AMD-ADL')
depends=('catalyst-utils' 'gcc')
install=${pkgname}.install
options=('!strip')
source=("http://developer.amd.com/tools-and-sdks/graphics-development/display-library-adl-sdk/ADL_SDK_6.0.zip")
md5sums=('4d95f578843c99f911c90a8bc6d7e97c')

prepare() {
    sed -i -e '/include/a \#include <wchar.h>' ${srcdir}/include/adl_structures.h
}

build() {
    cd ${srcdir}/adlutil
    gcc main.c -o adlutil -DLINUX -ldl -I ../include/
}

package() {
    install -m755 -d ${pkgdir}/usr/bin
    install -m755 ${srcdir}/adlutil/adlutil ${pkgdir}/usr/bin

    install -m755 -d ${pkgdir}/usr/include/ADL
    install -m644 ${srcdir}/include/* ${pkgdir}/usr/include/ADL

    install -m755 -d ${pkgdir}/usr/share/doc/ADL
    mv -v ${srcdir}/Public-Documents ${srcdir}/Sample ${srcdir}/Sample-Managed ${srcdir}/ADL_SDK.html ${pkgdir}/usr/share/doc/ADL
}