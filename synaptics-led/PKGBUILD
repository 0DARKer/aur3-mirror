# Maintainer: Matthew Monaco <dgbaley27@verizon.net>

_kver=2.6.39

pkgname=synaptics-led
pkgver=$_kver
pkgrel=1

arch=(i686 x86_64)
license=GPL2
url="http://www.kernel.org"
pkgdesc="Synaptics LED enabled psmouse kernel module"

source=(
        ftp://ftp.kernel.org/pub/linux/kernel/v2.6/linux-$_kver.tar.bz2
        config.i686
        config.x86_64
        synled.patch
)

md5sums=(
         1aab7a741abe08d42e8eccf20de61e05
         f8a7d74f688c409e4ca646b8d02051b9
         9d5b4e405a256ecfd9b5bf1d7734d0a6
         6d565328f36c6ca20b439f29bffc43bb
)

build() {

	cd ${srcdir}/linux-$_kver

	patch -Np1 -i ${srcdir}/synled.patch

	cp ${srcdir}/config.${CARCH} .config

	make ${MAKEFLAGS} MOUSE_PS2_SYNAPTICS_LED=y M=drivers/input/mouse
}

package() {

	tdir=${pkgdir}/lib/modules/${_kver}-ARCH/updates/drivers/input/mouse

	mkdir -p $tdir

	cp ${srcdir}/linux-$_kver/drivers/input/mouse/psmouse.ko $tdir
}
