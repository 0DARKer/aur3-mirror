# Contributor: portix <portix@gmx.net>

pkgname=dwb-gtk3-hg
pkgver=1024
pkgrel=1
pkgdesc="A webkit web browser with vi-like keyboard shortcuts, latest hg-pull, GTK3-version" 
url="http://portix.bitbucket.org/dwb/"
arch=('i686' 'x86_64')
license=('GPL')
depends=('libwebkit3' 'gtk3')
provides=(dwb)
conflicts=(dwb dwb-hg)
makedepends=('pkgconfig' 'mercurial')

hgroot="https://bitbucket.org/portix"
hgrepo="dwb"

build() {
  cd "$srcdir" 
  if [ -d "${hgrepo}" ]; then
    cd $hgrepo
    hg pull -u || true
  else 
    hg clone "$hgroot/$hgrepo" || true
  fi
  # Update to correct package version  

  rm -rf $srcdir/$hgrepo-build
  cp -a ${srcdir}/${hgrepo} ${srcdir}/${hgrepo}-build
  cd ${srcdir}/${hgrepo}-build
  make GTK=3
}
package() {
  cd ${srcdir}/${hgrepo}-build
  make DESTDIR=${pkgdir} install 
}
