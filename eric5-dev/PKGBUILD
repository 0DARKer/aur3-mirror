# Contributor: Andr√© Vitor de Lima Matos <http://www.google.com/profiles/andre.vmatos>
# Based on the PKGBUILD eric4-stable

pkgname=eric5-dev
pkgver=5.1
pkgrel=20110123
_pkgver="eric5-${pkgver}-snapshot-${pkgrel}"
pkgdesc='A full-featured Python IDE that is written in PyQt4 using the QScintilla2 editor widget (Development release).'
_src_url='http://downloads.sourceforge.net/eric-ide'
arch=('any')
url='http://eric-ide.python-projects.org/index.html'
license=('GPL3')
depends=('python>=3.1' 'python-qscintilla' 'python-qt')
conflicts=()
provides=('eric')
#install=${pkgname}.install
source=("${_src_url}/${_pkgver}.tar.gz")
md5sums=('5ec9396774deb7e3a7b6fc6f2d23f12d')

build() {
    cd "${srcdir}/${_pkgver}"

#    _inst_dir='/usr/lib/python3.1/site-packages'

#       msg "Applying install permissions patch..."
#       patch -p2 install.py < ${startdir}/perms.patch

    python install.py -c -b "/usr/bin" -i "${pkgdir}" || return 1

    # Creating version independant symlinks
    ln -s /usr/bin/eric5 "${pkgdir}/usr/bin/eric" || return 1
    ln -s /usr/bin/eric5-api "${pkgdir}/usr/bin/eric-api" || return 1
    ln -s /usr/bin/eric5-compare "${pkgdir}/usr/bin/eric-compare" || return 1
    ln -s /usr/bin/eric5-configure "${pkgdir}/usr/bin/eric-configure" || return 1
    ln -s /usr/bin/eric5-diff "${pkgdir}/usr/bin/eric-diff" || return 1
    ln -s /usr/bin/eric5-doc "${pkgdir}/usr/bin/eric-doc" || return 1
    ln -s /usr/bin/eric5-editor "${pkgdir}/usr/bin/eric-editor" || return 1
    ln -s /usr/bin/eric5-helpviewer "${pkgdir}/usr/bin/eric-helpviewer" || return 1
    ln -s /usr/bin/eric5-plugininstall "${pkgdir}/usr/bin/eric-plugininstall" || return 1
    ln -s /usr/bin/eric5-pluginrepository "${pkgdir}/usr/bin/eric-pluginrepository" || return 1
    ln -s /usr/bin/eric5-pluginuninstall "${pkgdir}/usr/bin/eric-pluginuninstall" || return 1
    ln -s /usr/bin/eric5-qregexp "${pkgdir}/usr/bin/eric-qregexp" || return 1
    ln -s /usr/bin/eric5-re "${pkgdir}/usr/bin/eric-re" || return 1
    ln -s /usr/bin/eric5-tray "${pkgdir}/usr/bin/eric-tray" || return 1
    ln -s /usr/bin/eric5-trpreviewer "${pkgdir}/usr/bin/eric-trpreviewer" || return 1
    ln -s /usr/bin/eric5-uipreviewer "${pkgdir}/usr/bin/eric-uipreviewer" || return 1
    ln -s /usr/bin/eric5-unittest "${pkgdir}/usr/bin/eric-unittest" || return 1
        
        # Removing problematic file on this release, no colateral effects
    rm -f ${pkgdir}/usr/lib/python3.1/site-packages/eric5/eric5config.pyc
}

