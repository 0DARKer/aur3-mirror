pkgname=orxonox-svn
pkgver=0.0.3
pkgrel=1
pkgdesc="Orxonox - the hottest 3D action shooter ever to exist"
arch=('i686' 'x86_64')
url="http://www.orxonox.net/"
license=('GPL')
depends=('ogre' 'cegui-ogre' 'boost' 'lua' 'tcl' 'openal' 'freealut' 'libvorbis' 'zlib')
makedepends=('subversion' 'cmake')
provides=('orxonox')
conflicts=('orxonox')
md5sums=()

_svncode=http://svn.orxonox.net/game/code/branches/kicklib
_svndata=http://svn.orxonox.net/game/data/trunk

_svn_code_dir=orxonox
_svn_data_dir=data_extern

build() {

  msg "Checking out code repository..."
  if [ -d ${_svnmod}/.svn ]; then
    (cd ${_svn_code_dir} && svn up)
  else
    svn co ${_svncode} ${_svn_code_dir}
  fi

  msg "Checking out data repository..."
  if [ -d ${_svn_data_dir}/.svn ]; then
    (cd ${_svn_data_dir} && svn up)
  else
    svn co ${_svndata} ${_svn_data_dir}
  fi

  msg "Configuring package..."
  cd ${_svn_code_dir}
  if [ ! -d build ]; then
    mkdir build
  fi
  cd build  
  cmake .. -DCMAKE_BUILD_TYPE=Release -DORXONOX_RELEASE=TRUE -DCMAKE_INSTALL_PREFIX=/usr

  msg "Building package..."
  make || return 1
  make DESTDIR="${pkgdir}" install || return 1
}
