# Contributor: Lex Black <autumn-wind at web dot de>
# Contributor: fnord0 < fnord0 AT riseup DOT net >

pkgname=webgoat
pkgver=5.4
pkgrel=2
pkgdesc="WebGoat is a deliberately insecure J2EE web application designed to teach web application security concepts"
arch=('i686' 'x86_64')
url="http://code.google.com/p/webgoat"
license=('GPLv2')
depends=('jre')
optdepends=("webscarab: proxy for analyzing applications that communicate using the HTTP and HTTPS protocols, used to help solve most WebGoat lessons"
  	    "paros: MitM HTTP/HTTPS proxy, spider, XSS and injection scanner + more, used to help solve WebGoat lessons")
source=("https://github.com/WebGoat/WebGoat/archive/$pkgname-$pkgver.tar.gz"
    "webgoat")
sha256sums=('9801cd5657dbec8d5d54c5f18518352e60d07cdcea289b34233dc1f796b5f212'
            '0bccf041d6d33935197c449af219e2fd5a001c41e87e9e7487628f1d3bd0a12c')
install="webgoat.install"


package() {
  cd ${srcdir}/WebGoat-$pkgname-$pkgver

  install -d ${pkgdir}/usr/share/webgoat
  install -d ${pkgdir}/usr/share/webgoat/doc
  install -d ${pkgdir}/usr/bin
  for doc in readme.txt; do
        install -Dm644 ${doc} ${pkgdir}/usr/share/webgoat/doc/${doc}
  done
  cp -pR java tomcat ${pkgdir}/usr/share/${pkgname}
  install -D -m755 webgoat.sh ${pkgdir}/usr/share/${pkgname}
  install -D -m755 ${startdir}/${pkgname} ${pkgdir}/usr/bin/${pkgname}
}
