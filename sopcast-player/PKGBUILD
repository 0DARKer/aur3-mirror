# Maintainer: archtux <antonio.arias99999 at gmail.com>

pkgname=sopcast-player
pkgver=0.7.2
pkgrel=5
pkgdesc='GUI front-end to p2p TV sopcast'
arch=('i686' 'x86_64')
url='http://code.google.com/p/sopcast-player/'
license='GPL2'
depends=('gtk2' 'hicolor-icon-theme' 'pygtk' 'python2' 'sopcast' 'vlc')
makedepends=('gettext')
options=('!makeflags')
[ "$CARCH" == "x86_64" ] && depends=('bin32-sopcast' 'gtk2' 'hicolor-icon-theme' 'pygtk' 'python2' 'vlc')
install=sopcast-player.install
source=(http://sopcast-player.googlecode.com/files/$pkgname-$pkgver.tar.gz)
md5sums='08c65c84d9d215ca42dcf210a92fd618'

build() {
  cd $srcdir/$pkgname

  # Python2 fix
  sed -i 's#PYTHON ?= $(BINDIR)/python#\02#' Makefile

  # cpointer patch
  sed -i 's_Event, ctypes.c\_void\_p_ctypes.POINTER(Event), ctypes.c\_void\_p_' lib/vlc_1_0_x.py

  # Build
  make
  make DESTDIR=$pkgdir install
}
