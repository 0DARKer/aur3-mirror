# Maintainer: archtux <antonio.arias99999 at gmail.com>

pkgname=sopcast-player
pkgver=0.7.2
pkgrel=4
pkgdesc='GUI front-end to p2p TV sopcast'
arch=('i686' 'x86_64')
url='http://code.google.com/p/sopcast-player/'
license='GPL2'
depends=('gtk2' 'hicolor-icon-theme' 'pygtk' 'python2' 'sopcast' 'vlc>=1.1.5')
makedepends=('gettext')
options=('!makeflags')
[ "$CARCH" == "x86_64" ] && depends=('bin32-sopcast' 'gtk2' 'hicolor-icon-theme' 'pygtk' 'python2' 'vlc>=1.1.5')
install=sopcast-player.install
source=(http://sopcast-player.googlecode.com/files/$pkgname-$pkgver.tar.gz)
md5sums=('08c65c84d9d215ca42dcf210a92fd618')

build() {
  cd $srcdir/$pkgname

  # Python2 fix
  sed -i 's#PYTHON ?= $(BINDIR)/python#\02#' Makefile

  # Build
  make
  make DESTDIR=$pkgdir install

  # Patch vlc 1.0.x obsolete
  cd $pkgdir/usr/share/sopcast-player/lib
  sed -i '/import vlc_1_0_x/d' VLCWidget.py
  rm vlc_1_0_x.py*
}
