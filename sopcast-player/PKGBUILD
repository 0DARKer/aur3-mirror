# Maintainer: archtux <antonio dot arias99999 at gmail.com>

pkgname=sopcast-player
pkgver=0.7.2
pkgrel=6
pkgdesc="GUI front-end to p2p TV sopcast"
arch=('i686' 'x86_64')
url="http://code.google.com/p/sopcast-player/"
license=('GPL2')
depends=('gtk2' 'hicolor-icon-theme' 'pygtk' 'python2' 'sopcast' 'vlc')
makedepends=('gettext')
options=('!makeflags')
install=sopcast-player.install
source=(http://sopcast-player.googlecode.com/files/$pkgname-$pkgver.tar.gz
        sopcast-player.install)
md5sums=('08c65c84d9d215ca42dcf210a92fd618'
         '0f088e605fc9ef60007f8a3ea9fbdff4')

build() {
  cd $srcdir/$pkgname

  # Python2 fix
  sed -i 's#PYTHON ?= $(BINDIR)/python#\02#' Makefile

  # cpointer patch
  sed -i 's_Event, ctypes.c\_void\_p_ctypes.POINTER(Event), ctypes.c\_void\_p_' lib/vlc_1_0_x.py

  # Build
  make
  make DESTDIR=$pkgdir install
}
