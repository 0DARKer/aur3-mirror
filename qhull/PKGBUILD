# $Id: PKGBUILD 26 2008-05-13 14:22:16Z djclue917 $
# Stefan Husmann <stefan-husmann@t-online.de>
# Contributor: Jason Taylor <jftaylor21@gmail.com>
# Contributor: Darwin Bautista <djclue917@gmail.com>

pkgname=qhull
pkgver=2010.1
pkgrel=1
pkgdesc="A general dimension code for computing convex hulls and related structures"
arch=('i686' 'x86_64')
url="http://www.qhull.org/"
license=('custom')
depends=('glibc')
makedepends=('cmake')
source=(http://www.qhull.org/download/$pkgname-$pkgver-src.tgz)
md5sums=('e64138470acdeb18f752a0bc2a11ceb4')
options=('!libtool')

build() {
  cd "$srcdir/$pkgname-$pkgver"
  [ -d build ] || mkdir build
  cd build
  cmake -DCMAKE_INSTALL_PREFIX=/usr /usr/lib ..
  make
}
package() { 
  cd "$srcdir/$pkgname-$pkgver"
  install -d $pkgdir/usr/lib
  install -d $pkgdir/usr/bin
  install -d $pkgdir/usr/include/$pkgname
  install -d $pkgdir/usr/share/man/man1
  install -m755 build/src/rbox $pkgdir/usr/bin
  
  install -m644 build/src/lib* $pkgdir/usr/lib
  find . -name *.h -exec install -m644 {} $pkgdir/usr/include/$pkgname \;
  install -m644 html/rbox.man $pkgdir/usr/share/man/man1/rbox.1
  install -m644 html/qhull.man $pkgdir/usr/share/man/man1/qhull.1
  # Install license
  install -D -m644 COPYING.txt "$pkgdir/usr/share/licenses/$pkgname/license.txt"
}
