# Maintainer: Mike Swanson <mikeonthecomputer@gmail.com>

pkgname=reposurgeon
pkgver=1.7
pkgrel=1
pkgdesc="performs surgery on version control repositories"
arch=('any')
url="http://www.catb.org/~esr/reposurgeon/"
license=('BSD')
depends=('python')
source=(http://www.catb.org/~esr/reposurgeon/$pkgname-$pkgver.tar.gz)
sha256sums=('9a37339e735a44f0b0840b5481532d7071f6aa9dd186f3fc7479dbffd06563ca')

build() {
  cd "$srcdir/$pkgname-$pkgver"
  sed -i -e '
    2037,+1 { D }
    2039 { s/    raise/raise/ }
    2040,+5 { D }' reposurgeon
}

package() {
  cd "$srcdir/$pkgname-$pkgver"
  install -Dm755 reposurgeon "$pkgdir/usr/bin/reposurgeon"
  install -Dm644 reposurgeon.1 "$pkgdir/usr/share/man/man1/reposurgeon.1"
}

# vim:set ts=2 sw=2 et:
