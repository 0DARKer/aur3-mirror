# Maintainer: Remi Gacogne <rgacogne-arch at coredump dot fr>

pkgname=getdns
pkgver=0.1.1
pkgrel=1
pkgdesc="A modern asynchronous DNS API"
arch=('i686' 'x86_64')
url="http://getdnsapi.net/"
license=('BSD')
depends=('libev' 'libevent' 'unbound' 'libidn')
source=(https://github.com/getdnsapi/${pkgname}/archive/v${pkgver}.tar.gz)
md5sums=('9e70ec75a06535d09757a1bb9a180746')
sha256sums=('b35168b97100b029b567054c51421295d783e8ccea177eabcd3b2864c75efd7d')
sha512sums=('2385a99566a39862d270fd3306a3bb66e3f88b6054374f8cadaf5ef1ed42e4af8188a5de54b688322ea0c52f92bd43f782aa93ec537b78d95e973d68497115f1')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}/"
  ./configure          \
    --prefix=/usr      \
    --sysconfdir=/etc  \
    --disable-rpath    \
    --with-libev       \
    --with-libevent
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}/"

  make prefix="${pkgdir}/usr" install

  install -D -m644 LICENSE "${pkgdir}/usr/share/licenses/$pkgname/LICENSE"
}
