# Maintainer: Aki Jenkinson <aki@aki.pw>
pkgname=twd
pkgver=1.0.0
pkgrel=1
pkgdesc="A node-webkit based wrapper to TweetDeck"
arch=("any")
url="https://github.com/passcod/twd/"
license=("custom")
depends=("node-webkit")
makedepends=("git")
source=("https://passcod.name/twd/bin/twd-${pkgver}.nw"
        "license::https://raw.github.com/passcod/passcod.github.com/source/source/_posts/2012-11-07-unlicensing-everything-because-mit-aint-enough.markdown"
        "https://passcod.name/twd/icon.png"
        "twd.desktop"
        "twd")

noextract=("twd-${pkgver}.nw")

build() {
    cd "${srcdir}"
    sed -e "/---/,/---/{s/---//p;d}" -i license
    sed "s/<!--more-->//" -i license
    sed "s/(VERSION)/${pkgver}/g" -i twd
}

package() {
    cd "$srcdir"
    install -Dm644 "twd-${pkgver}.nw" "${pkgdir}/usr/lib/twd/twd-${pkgver}.nw"
    install -Dm644 license "${pkgdir}/usr/share/licences/${pkgname}/LICENSE"
    install -Dm644 icon.png "${pkgdir}/usr/share/pixmaps/twd.png"
    install -Dm755 twd "${pkgdir}/usr/bin/twd"
    install -Dm755 twd.desktop "${pkgdir}/usr/share/applications/twd.desktop"
}

# vim:set ts=4 sw=4 et:
sha512sums=('7bced42efebc451fb4af2297ad5c7cb4d154bd19c5fda65b14b799f1f4106d6b718b82f72c72ebca308efd00b4bf597bedf1bd80378bb5b965b67d90f2067f10'
            'f6acc67d62daeeab449796afbe6fa8107591594fffe21080bd11f912b9723879030a7e53a23091386a578c414fe2c7e7b56b68b457d7ce0e9dc08f6120b63d89'
            '49989c834446058f8a6bdb4a37797e25f4aa93a115891f99b8e67b2faeecf5888efa58112b680ce100d93a36d78acd607e3cd80294c8d7d075b2211eecc7fceb'
            '78ce08754b85ea55a1fb01f505d243c3e8ad0665596b9bd4b9908a10d9bf92092a100413695faa54915e72a772790af4b7277aa027b095ac6919f449bb1f75b6'
            'd8b9fbfcb6a13b7b64ea399b991786ea16ef83f5f4669903d8e03308d8f71ae04569b9dece5f22887fc051f1c34908d28622091263362b2973b6bca36d136eed')
