# Contributor: Ali H. Caliskan <ali.h.caliskan AT gmail DOT com>

pkgname=hdjcpl
pkgver=1.09
pkgrel=2
pkgdesc="Hercules DJ Control Panel let you control the Hercules DJ hardware settings"
arch=('i686' 'x86_64')
url="http://ts.hercules.com/eng/"
license=('Custom')
makedepends=('rpmextract')
source=('ftp://ftp.hercules.com/pub/webupdate/DJCSeries/Hercules_DJSeries_Linux.tgz'
	'http://dfn.dl.sourceforge.net/sourceforge/wxwindows/wxWidgets-2.8.10.tar.gz'
	'hdjcpl.diff'
	'hdjcpl2.diff')
md5sums=('498cf0ff144f20106718932ab22571ce'
	 '05b32ca051651f4b1885a90f62969faf'
	 '454bff2d31c326cdc6153ebeb9b3a712'
	 '8e232ab429545f5679256a55ac3f5cfc')

build() {
	cd $srcdir
    if [ "$CARCH" = "x86_64" ]; then
   	  tar -zxvf Control\ Panel/hdjcpl-1.09.tar.gz 
	  mkdir -p $pkgdir/usr/share/applications
	  mkdir -p $pkgdir/usr/share/pixmaps	
	  cd wxWidgets-2.8.10
	  mkdir buildgtk
	  cd buildgtk
	  ../configure --with-gtk --enable-gtk2 --with-libpng=builtin --enable-shared=no \
   --disable-debug --disable-debug_info --disable-gif \
   --disable-pcx --disable-tga --disable-iff --disable-pnm \
   --disable-joystick --disable-splash --disable-sound \
   --disable-protocols --disable-dragimage --disable-metafile \
   --disable-splines --disable-tipdlg --disable-finddlg \
   --disable-wizarddlg --disable-numberdlg --disable-fontdlg \
   --disable-coldlg --disable-protocol-http --disable-protocol-ftp \
   --disable-protocol-file --disable-calendar --disable-datepick \
   --disable-filepicker --disable-fontpicker --disable-dirpicker \
   --disable-colourpicker --disable-printarch --disable-ftp --disable-http \
   --disable-fileproto --disable-mdi --disable-mdidoc --disable-logdialog \
   --disable-logwin --disable-loggui --disable-xrc --disable-url \
   --disable-gauge --disable-grid --disable-dataviewctrl \
   --disable-hyperlink --disable-treebook --disable-toolbook \
   --disable-treectrl --disable-spinbtn --disable-spinctrl \
   --disable-searchctrl --disable-progressdlg --disable-htmlhelp \
   --disable-mshtmlhelp --disable-help --disable-notebook \
   --disable-docview --disable-animatectrl --disable-collpane \
   --disable-dirdlg --disable-aui --disable-bmpbutton \
   --disable-bmpcombobox --disable-choicebook --disable-listbook \
   --disable-sash --disable-tabdialog --disable-dialupman \
   --disable-printfposparam --disable-textdlg --disable-choicedlg \
   --disable-mousewheel --disable-apple_ieee --disable-fs_inet \
   --disable-mediactrl --disable-filedlg --disable-aboutdlg \
   --disable-richtext --disable-odcombobox --disable-imaglist \
   --disable-scrollbar --disable-splitter --disable-slider \
   --disable-statbmp --disable-togglebtn --disable-fs_zip \
   --disable-arcstream --disable-tbarnative --disable-tipwindow \
   --disable-choice --without-libtiff --without-expat --disable-dnd \
   --disable-webkit --disable-gstreamer8 --disable-zipstream \
   --disable-tarstream --disable-unicode --disable-tooltips \
   --disable-busyinfo --disable-metafiles --disable-fs_archive \
   --disable-validators --disable-clipboard --without-gnomeprint \
   --without-regex --without-libmspack --disable-palette \
   --disable-miniframe --disable-largefile --disable-html \
   --without-libjpeg --without-libsdl --without-opengl --without-odbc
	  make || return 1
    fi

    # temporary solution, patch will not be used for i686
	#cd $srcdir/$pkgname-$pkgver
	#patch -p0 < $srcdir/hdjcpl2.diff

    if [ "$CARCH" = "x86_64" ]; then
	  cd $srcdir/$pkgname-$pkgver
	  patch -p0 < $srcdir/hdjcpl2.diff
	  patch -p0 < $srcdir/hdjcpl.diff
	  ./configure --prefix=/usr
	  make || return 1
	  make DESTDIR="$pkgdir" install || return
    else
      cd  $srcdir/Control\ Panel
      rpmextract.sh hdjcpl-1.09-1.i386.rpm
      cp -r usr $pkgdir
    fi
}


