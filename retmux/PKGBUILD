# Maintainer: Kai Yuan <kent.yuan @t gmail d@t com>
pkgname=retmux
pkgver=20131231
pkgrel=1
pkgdesc="tmux sessions backup and restore tool"
arch=('any')
url="https://github.com/sk1418/retmux"
license=('MIT')
makedepends=('git')
depends=('python2' 'tmux' 'python2-setuptools')
#source=("https://github.com/sk1418/${pkgname}/archive/${pkgver}.tar.gz")
#source=("https://passwdmanager.googlecode.com/files/${pkgname}_${pkgver}.tar.gz")
#_gitroot="git@github.com:sk1418/retmux.git"
_gitroot="https://github.com/sk1418/retmux.git"
_gitname="retmux"



package() {
  cd ${srcdir}/
msg "Connecting to the GIT server...."
    if [[ -d ${srcdir}/${_gitname} ]] ; then
        cd ${_gitname}
        git pull origin
        msg "The local files are updated..."
    else
        git clone ${_gitroot}
      fi
    cd "${srcdir}/${_gitname}" 
    git checkout master
    msg "GIT checkout done."

  find . -name "*.py" |xargs sed -i "s|/usr/bin/python|&2|" 

  python2 setup.py install --root="$pkgdir" --prefix="/usr" || return 1
}

# vim:set ts=2 sw=2 et:
