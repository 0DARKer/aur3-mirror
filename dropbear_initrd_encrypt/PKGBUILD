pkgname=dropbear_initrd_encrypt
pkgver=0.8
pkgrel=4
pkgdesc="provides SSH access in initrd to enter root luks passphrase "
arch=('i686' 'x86_64')
url="http://blog.hq.h-ix.net/2009/08/08/luks-pass-over-ssh-archlinux/"
license=('GPL')
depends=("dropbear" "cryptsetup")
backup=(lib/initcpio/hooks/dropbear)
install=$pkgname.install
source=(dropbear_hook dropbear_install encryptssh_hook encryptssh_install)

md5sums=('472f27660eef2602ed29d59e53fbd090'
         'ae955dd1e435a40cac171c658f686146'
         '8ba25c6501d42bd6704f2c3a4c5567ff'
         '021ed02865e4043e5929737430242616')

build() {
  mkdir -p "$pkgdir"/lib/initcpio/hooks
  mkdir -p "$pkgdir"/lib/initcpio/install

  install dropbear_hook "$pkgdir"/lib/initcpio/hooks/dropbear
  install dropbear_install "$pkgdir"/lib/initcpio/install/dropbear
  install encryptssh_hook "$pkgdir"/lib/initcpio/hooks/encryptssh
  install encryptssh_install "$pkgdir"/lib/initcpio/install/encryptssh
}
