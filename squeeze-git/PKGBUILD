# Mantainer: Stein Krauz <steinkrauz@yahoo.com>
# Contributor: Jan Jezek <honzin.jezek@gmail.com>
# Contributor: Skunnyk <skunnyk@archlinux.fr>
# Contributor : Pablo Lezaeta <prflr88@gmail.com>

_pkgname=squeeze
pkgname=squeeze-git
pkgver=0.4.90git
pkgrel=2
pkgdesc="Squeeze is  a modern and advanced archive manager for the Xfce Desktop Environment"
arch=(i686 x86_64)
license=('GPL2')
url="http://www.xfce.org/"
groups=('xfce4-git')
makedepends=('git' 'xfce4-dev-tools' 'pkgconfig' 'gtk-doc' 'intltool' 'xfconf')
depends=('libxfce4util' 'hicolor-icon-theme' 'dbus-glib' 'gtk2' 'gtk3' 'desktop-file-utils')
conflicts=('squeeze')
provides=("squeeze" "squeeze-git")
options=('!libtool')
install=squeeze.install
#branch=("stephan/new-ui")
_branch=("master")
source=(git+git://git.xfce.org/apps/squeeze#branch=$_branch)
md5sums=('SKIP')

pkgver(){
  cd $srcdir/$_pkgname
  echo "$pkgver.$(git describe | sed 's/.*-//' |sed 's/-/./g')"
}

build(){
  cd $srcdir/$_pkgname

  mkdir -p m4

  ./autogen.sh --prefix=/usr --sysconfdir=/etc --libexecdir=/usr/lib/$_pkgname \
  --localstatedir=/var --disable-debug --bindir=/usr/bin --sbindir=/usr/bin \
  --libdir=/usr/lib 

  make
}

package() {
	cd $srcdir/$_pkgname
	make DESTDIR=$pkgdir sbindir=/usr/bin install
}

