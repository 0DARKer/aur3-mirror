
pkgname=wicd-kde-git
pkgver=20110210
pkgrel=1
pkgdesc="Wicd client build on the KDE Development Platform"
arch=("i686" "x86_64")
url="https://projects.kde.org/projects/extragear/network/wicd-kde/"
license=('GPL')
depends=('kdelibs' 'qt' 'wicd-nogtk')
makedepends=('cmake' 'git' 'automoc4')
conflicts=('wicd-client-kde' 'wicd-client-kde-git')
_gitroot="git://anongit.kde.org/wicd-kde"
_gitname="wicd-kde"
source=(download_i18n.sh)
md5sums=('95a87a95db07989aac5a95762c8bab48')


build() {
	msg "Connecting to GIT server...."

	
	[ -d $_gitname ] && {
		cd $_gitname
		git pull origin
		cd ..

		msg "Local files have been updated."
	} || {
		git clone $_gitroot
	}

	msg "GIT checkout done or server timeout"

	rm -rf $_gitname-build
	git clone $_gitname $_gitname-build
        cp download_i18n.sh $_gitname-build
	cd $_gitname-build
	echo 'add_subdirectory( i18n )' >> CMakeLists.txt
	msg "Starting make..."
        ./download_i18n.sh
        cmake -DCMAKE_INSTALL_PREFIX=`kde4-config --prefix` -DPYTHONBIN=python2 . || return 1
        make || return 1
	make DESTDIR=${pkgdir} install || return 1
  
}


