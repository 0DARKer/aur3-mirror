# Maintainer: SpepS <dreamspepser at yahoo dot it>

pkgname=andromeda
pkgver=0.0.0.1 # last git until first release
pkgrel=1
pkgdesc="Cross-platform file manager, written on Qt"
arch=('i686' 'x86_64')
url="https://gitorious.org/$pkgname"
license=('LGPL')
depends=('qtwebkit')
makedepends=('cmake')
install="$pkgname.install"
source=("https://gitorious.org/andromeda/andromeda/archive-tarball/master")
md5sums=(`wget -qO- $source | md5sum | cut -c -32`)

build() {
  cd "$srcdir/$pkgname-$pkgname"

  # x86_64 lib path fix
  sed -i '/LIB_SUFFIX/s/64//' cmake/LibSuffix.cmake

  # navigation panel background color fix (for dark themes)
  sed -i '/pal/d' src/plugins/filemanagerplugin/navigationpanel.cpp

  [ -d bld ] || mkdir bld && cd bld
  cmake .. -DCMAKE_INSTALL_PREFIX=/usr
  make
}

package() {
  cd "$srcdir/$pkgname-$pkgname/bld"
  make DESTDIR="$pkgdir/" install
}

# vim:set ts=2 sw=2 et:
