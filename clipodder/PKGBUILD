pkgname=clipodder
pkgver=20110925
pkgrel=1
pkgdesc="Lightweight command line podcast downloader"
arch=('any')
url="https://github.com/Afterburn/clipodder"
license=('GPL')
depends=(python-pycurl python-feedparser python2)
replaces=('clipodder')
_gitroot="https://Afterburn@github.com/Afterburn/clipodder.git"
_gitname="clipodder"


build()
{
cd ${srcdir}

    msg "Connecting to the GIT server...."
    if [[ -d ${srcdir}/${_gitname} ]] ; then
        cd ${_gitname}
        git pull origin
        msg "The local files are updated..."
    else
        git clone ${_gitroot} --depth=1
    fi
    
    msg "GIT checkout done."

    msg "Starting make for: ${pkgname}"
    
    if [[ -d ${srcdir}/${_gitname}-build ]]; then
       msg "Cleaning the previous build directory..." 
       rm -rf ${srcdir}/${_gitname}-build
    fi

    mv ${srcdir}/${_gitname} ${srcdir}/${_gitname}-build
    
    cd ${srcdir}/${_gitname}-build/
        
    echo `pwd`
    mkdir -p ${pkgdir}/usr/bin
    cp ${_gitname} $pkgdir/usr/bin/clipodder || return 1
    

}
