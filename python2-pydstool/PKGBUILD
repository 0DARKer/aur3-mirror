# Maintainer: Michael Schubert <mschu.dev at gmail>

pkgname=python2-pydstool
_pkgname=pydstool
_pkgName=PyDSTool
pkgver=0.88.110218
pkgrel=1
pkgdesc="Simulation and analysis environment for dynamical systems"
url="http://www2.gsu.edu/~matrhc/ProjectOverview.html"
license=('BSD')
arch=('any')
depends=('python2-numpy' 'python2-scipy')
makedepends=('dos2unix')
optdepends=('python-sloppycell')
source=("http://sourceforge.net/projects/$_pkgname/files/$_pkgname/$pkgver/$_pkgName-$pkgver.zip/download")
options=('!emptydirs')
md5sums=('e64490eb03a1cd8e69c0521fc9ac38c0')

build() {
  cd "$srcdir/$_pkgName"
  make unixify
  find . -name "*.py" | xargs sed -i '1s/python2.3$/python2/'
}

package() {
  pydir=`python2 -c "from distutils.sysconfig import get_python_lib; print get_python_lib()"`
  mkdir -p "$pkgdir/$pydir"
  cp -R "$srcdir/$_pkgName" "$pkgdir/$pydir"
  echo $_pkgName > "$pkgdir/$pydir/PyDSTools.pth"
}
