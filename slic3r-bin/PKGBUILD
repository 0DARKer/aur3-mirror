#Maintainer: DaZ <daz.root+arch@gmail.com> 
pkgname=slic3r-bin
pkgrel=3
pkgdesc="An STL-to-GCODE translator for RepRap 3D printers, aiming to be a modern and fast alternative to Skeinforge"
pkgver=0.9.9
_pkgver="0-9-9"
arch=('i686' 'x86_64')
url=("http://www.slic3r.org")
conflicts=('slic3r' 'slic3r-git')
depends=('perl' 'libpng12')
license=('AGPL3')

if [ "$CARCH" = "i686" ]; then
    _arch='x86'
    md5sums=('62d4ad5b2576f88920951620dc2cab07'
             '11c59f0d3addd33b14d9ccd9406db8db')
elif [ "$CARCH" = "x86_64" ]; then
    _arch='x86_64'
    md5sums=('7a122b617b3ec61781019ab9ad9cbafc'
             '11c59f0d3addd33b14d9ccd9406db8db')
fi

source=("http://dl.slic3r.org/linux/slic3r-linux-${_arch}-${_pkgver}.tar.gz"
        "package.lib")

package()
{
    install -d "${pkgdir}/opt"
    install -d -m655 "${srcdir}/Slic3r/lib/vrt/528ccea98cad02a5f453a7135f9ca183/"
    install -m644 "${srcdir}/package.lib" "${srcdir}/Slic3r/lib/vrt/528ccea98cad02a5f453a7135f9ca183/"
    cp -R "${srcdir}/Slic3r" "${pkgdir}/opt/slic3r"
    install -d "${pkgdir}/usr/bin"
    ln -s "/opt/slic3r/bin/slic3r" "${pkgdir}/usr/bin/slic3r"
}
