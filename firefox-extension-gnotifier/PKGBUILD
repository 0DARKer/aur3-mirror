# Maintainer: XZS <d.f.fischer at web dot de>
pkgname=firefox-extension-gnotifier
pkgver=1.7.7
pkgrel=1
pkgdesc='Add-on for Firefox that enable integration with GNOME native notification system.'
url='https://addons.mozilla.org/en-US/firefox/addon/gnotifier/'
arch=('any')
license=('MPLv2')
depends=('firefox' 'libnotify')
source=("https://addons.mozilla.org/firefox/downloads/file/256730/gnotifier-1.7.7-fx-linux.xpi")
md5sums=('54af32cc3c6c82e63ca3212119fba1f3')

build() {
  cd "$srcdir"
  [[ -d $pkgname-extract ]] || mkdir $pkgname-extract
  unzip -q -d $pkgname-extract gnotifier-$pkgver-fx-linux.xpi
}

package() {
  cd "$srcdir/$pkgname-extract"
  local emid=$(sed -n '/.*<em:id>\(.*\)<\/em:id>.*/{s//\1/p;q}' install.rdf)
  local dstdir=$pkgdir/usr/lib/firefox/browser/extensions/$emid
  install -d $dstdir
  mv * $dstdir
}
