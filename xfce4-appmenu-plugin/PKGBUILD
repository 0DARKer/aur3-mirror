# Maintainer: M4rQu1Nh0S <zonadomarquinhos@gmail.com>
# Contributor: Victor AurÃ©lio <victor.feradecs@gmail.com>

pkgname=xfce4-appmenu-plugin
pkgver=0.10
_pkgver=0.10-0~2~precise1
pkgrel=3
pkgdesc="Global menu plugin for Xfce, based on Ubuntu's Indicator framework"
arch=('i686' 'x86_64')
url="https://launchpad.net/xfce-appmenu-plugin"
license=('GPL')
depends=('appmenu-gtk2' 'appmenu-qt' 'xfce4-panel' 'libindicator' 'indicator-appmenu' 'xdg-utils' )
makedepends=('intltool')
optdepends=('appmenu-gtk3: support for GTK3 applications'
'globalmenu-extension: support for Firefox/Thunderbird app menus'
'gtk2-ubuntu: support for GTK2 applications'
'gtk3-ubuntu: support for GTK3 applications'
'libreoffice-extension-menubar: support for LibreOffice')
install=$pkgname.install
patch=xfce4-panel-plugin-new_indicator.patch
source=('https://launchpad.net/~the-warl0ck-1989/+archive/xfce-appmenu-plugin/+files/xfce4-appmenu-plugin_0.10-0~2~precise1.tar.gz' 'xfce4-panel-plugin-new_indicator.patch' 'indicator.patch')
md5sums=('7434b16b841eea5f01651ab69ed6066e'
         '36598e981329d5c26daa96343793b1d5'
         '4eec6ccd4a6742f792879e71c8e7d5b4')

build() {
  patch -Np0 < xfce4-panel-plugin-new_indicator.patch
  patch -Np0 < indicator.patch
  cd "$srcdir/recipe-{debupstream}-0~{revno}/panel-plugin/"

  cd "$srcdir/recipe-{debupstream}-0~{revno}"

  ./configure --prefix=/usr --sysconfdir=/etc --localstatedir=/var --disable-static --libexecdir=/usr/libexec \

  make
}

package() {
  cd "$srcdir/recipe-{debupstream}-0~{revno}"

  make DESTDIR="$pkgdir/" install
}
