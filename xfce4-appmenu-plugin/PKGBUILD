# Contributor: Coman Mihai <mihai.m1x.ro>

pkgname=xfce4-appmenu-plugin
pkgver=20111208
pkgrel=1
pkgdesc="Global menu plugin for Xfce, based on Ubuntu's Indicator framework"
arch=('i686' 'x86_64')
url="https://launchpad.net/xfce-appmenu-plugin"
license=('GPL2')
depends=('qt-ubuntu' 'gtk2-ubuntu' 'gtk3-ubuntu' 'indicator-appmenu' 'appmenu-gtk2' 'appmenu-gtk3' 'appmenu-qt')
makedepends=('bzr')
#optdepends=('')

_bzrtrunk="lp:~the-warl0ck-1989/xfce-appmenu-plugin/stable-1"
_bzrmod="stable-1"

build() {
  cd "${srcdir}"

  msg "Connecting to the server...."

  if [ -d ${_bzrmod} ]; then
    bzr up ${_bzrmod}
    msg "The local files are updated."
  else
    bzr co ${_bzrtrunk} ${_bzrmod}
  fi

  msg "BZR checkout done or server timeout"
  msg "Starting make..."

  cd "${_bzrmod}"
  ./configure --libexecdir=/usr/lib/xfce4-indicator-plugin/ --prefix=/usr
  make
}

package() {

cp -r "${srcdir}"/stable-1/debian/xfce4-appmenu-plugin/usr "${pkgdir}"/

}

