# Maintainer: bubla <matej.tyc@gmail.com>
# Contributor: Pierre Bourdon <delroth@gmail.com>

pkgname=mingw32-libjpeg
pkgver=8.0.2
pkgrel=2
pkgdesc="Library of JPEG support functions"
arch=('any')
url="http://www.ijg.org/"
license=('custom')
depends=('glibc')
makedepends=('mingw32-gcc' 'mingw32-w32api')
options=(!libtool)
source=(http://www.ijg.org/files/jpegsrc.v8b.tar.gz)
md5sums=('e022acbc5b36cd2cb70785f5b575661e')

build() {
  cd $srcdir/jpeg-8b

  # mingw32 have problems with --hash-style=gnu (default value)
  unset LDFLAGS
  ./configure --host=i486-mingw32 --prefix=/usr/i486-mingw32 --mandir=/usr/i486-mingw32/share/man
  make || return 1
  make DESTDIR=$pkgdir install || return 1

  # See FS#11116 - re-assess current need sometime...
  install -m644 jpegint.h $pkgdir/usr/i486-mingw32/include/jpegint.h
  
  install -Dm644 README $pkgdir/usr/i486-mingw32/share/licenses/${pkgname}/README
}

