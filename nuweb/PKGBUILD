# Maintainer: aksr <aksr at t-com dot me>
pkgname=nuweb
pkgver=1.58
pkgrel=1
epoch=
pkgdesc="A Simple Literate Programming Tool"
arch=(any)
url="http://nuweb.sourceforge.net/"
license=('unknown')
groups=()
depends=('texlive-core')
makedepends=()
checkdepends=()
optdepends=()
provides=()
conflicts=()
replaces=()
backup=()
options=()
install=
changelog=
source=("http://downloads.sourceforge.net/project/nuweb/$pkgname-$pkgver.tar.gz")
noextract=()
md5sums=('85ce11cfdf5d6ebc82309bcd3e26fd6f') #generate with 'makepkg -g'

build() {
	cd "$srcdir/$pkgname-$pkgver"

  latex nuwebdoc
  bibtex nuwebdoc
  latex nuwebdoc
  latex nuwebdoc

	make nuweb
}

check() {
	cd "$srcdir/$pkgname-$pkgver"
	make -k check
}

package() {
	cd "$srcdir/$pkgname-$pkgver"
  mkdir -p $pkgdir/usr/share/emacs/site-lisp

  install -D -m755 $srcdir/$pkgname-$pkgver/nuweb        $pkgdir/usr/bin/nuweb
  install -D -m644 $srcdir/$pkgname-$pkgver/nuweb.el     $pkgdir/usr/share/emacs/site-lisp/nuweb.el
  install -D -m644 $srcdir/$pkgname-$pkgver/README       $pkgdir/usr/share/nuweb/README

  install -D -m644 $srcdir/$pkgname-$pkgver/nuweb.w      $pkgdir/usr/share/nuweb/nuweb.w
  install -D -m644 $srcdir/$pkgname-$pkgver/nuwebsty.w   $pkgdir/usr/share/nuweb/nuwebsty.w
  install -D -m644 $srcdir/$pkgname-$pkgver/nuwebdoc.tex $pkgdir/usr/share/nuweb/nuwebdoc.tex
  install -D -m644 $srcdir/$pkgname-$pkgver/nuwebdoc.dvi $pkgdir/usr/share/nuweb/nuwebdoc.dvi
  install -D -m644 $srcdir/$pkgname-$pkgver/nuwebdoc.bbl $pkgdir/usr/share/nuweb/nuwebdoc.bbl

  install -D -m644 $srcdir/$pkgname-$pkgver/master.bib   $pkgdir/usr/share/nuweb/master.bib
  install -D -m644 $srcdir/$pkgname-$pkgver/misc.bib     $pkgdir/usr/share/nuweb/misc.bib
  install -D -m644 $srcdir/$pkgname-$pkgver/litprog.bib  $pkgdir/usr/share/nuweb/litprog.bib
  install -D -m644 $srcdir/$pkgname-$pkgver/bibnames.sty $pkgdir/usr/share/nuweb/bibnames.sty
  install -D -m644 $srcdir/$pkgname-$pkgver/html.sty     $pkgdir/usr/share/nuweb/html.sty
}

