diff -Naru mozcdic-ut-20110722.orig//12-get-mozc-hyouki.rb mozcdic-ut-20110722/12-get-mozc-hyouki.rb
--- mozcdic-ut-20110722.orig//12-get-mozc-hyouki.rb	2011-07-19 22:48:19.000000000 +0900
+++ mozcdic-ut-20110722/12-get-mozc-hyouki.rb	2011-07-22 17:31:51.000000000 +0900
@@ -1,4 +1,5 @@
 #!/usr/bin/ruby
+# -*- encoding: utf-8 -*-
 
 #############################
 # get_hyouki
diff -Naru mozcdic-ut-20110722.orig//14-sort-hyouki.rb mozcdic-ut-20110722/14-sort-hyouki.rb
--- mozcdic-ut-20110722.orig//14-sort-hyouki.rb	2011-07-19 22:48:19.000000000 +0900
+++ mozcdic-ut-20110722/14-sort-hyouki.rb	2011-07-22 17:31:51.000000000 +0900
@@ -1,4 +1,5 @@
 #!/usr/bin/ruby
+# -*- encoding: utf-8 -*-
 
 #############################
 # sort_hyouki
diff -Naru mozcdic-ut-20110722.orig//16-remove-same-hyouki.rb mozcdic-ut-20110722/16-remove-same-hyouki.rb
--- mozcdic-ut-20110722.orig//16-remove-same-hyouki.rb	2011-07-19 22:48:19.000000000 +0900
+++ mozcdic-ut-20110722/16-remove-same-hyouki.rb	2011-07-22 17:31:51.000000000 +0900
@@ -1,4 +1,5 @@
 #!/usr/bin/ruby
+# -*- encoding: utf-8 -*-
 
 #############################
 # remove_hyouki
diff -Naru mozcdic-ut-20110722.orig//18-remove-same-yomi.rb mozcdic-ut-20110722/18-remove-same-yomi.rb
--- mozcdic-ut-20110722.orig//18-remove-same-yomi.rb	2011-07-19 22:48:19.000000000 +0900
+++ mozcdic-ut-20110722/18-remove-same-yomi.rb	2011-07-22 17:31:51.000000000 +0900
@@ -1,4 +1,5 @@
 #!/usr/bin/ruby
+# -*- encoding: utf-8 -*-
 
 #############################
 # remove_yomi
diff -Naru mozcdic-ut-20110722.orig//20-limit-jinmei.rb mozcdic-ut-20110722/20-limit-jinmei.rb
--- mozcdic-ut-20110722.orig//20-limit-jinmei.rb	2011-07-19 22:48:19.000000000 +0900
+++ mozcdic-ut-20110722/20-limit-jinmei.rb	2011-07-22 17:31:51.000000000 +0900
@@ -1,4 +1,5 @@
 #!/usr/bin/ruby
+# -*- encoding: utf-8 -*-
 
 #############################
 # limit_jinmei
diff -Naru mozcdic-ut-20110722.orig//22-limit-meisi.rb mozcdic-ut-20110722/22-limit-meisi.rb
--- mozcdic-ut-20110722.orig//22-limit-meisi.rb	2011-07-19 22:48:19.000000000 +0900
+++ mozcdic-ut-20110722/22-limit-meisi.rb	2011-07-22 17:31:51.000000000 +0900
@@ -1,4 +1,5 @@
 #!/usr/bin/ruby
+# -*- encoding: utf-8 -*-
 
 #############################
 # limit_meisi
diff -Naru mozcdic-ut-20110722.orig//32-get-mozcdic-cost-range.rb mozcdic-ut-20110722/32-get-mozcdic-cost-range.rb
--- mozcdic-ut-20110722.orig//32-get-mozcdic-cost-range.rb	2011-07-19 22:48:19.000000000 +0900
+++ mozcdic-ut-20110722/32-get-mozcdic-cost-range.rb	2011-07-22 17:31:51.000000000 +0900
@@ -1,4 +1,5 @@
 #!/usr/bin/ruby
+# -*- encoding: utf-8 -*-
 
 #############################
 # get_cost
@@ -21,7 +22,7 @@
 		s = lines[i].chomp.split("	")
 
 		# get Japanese words
-		if s[-1].length == s[-1].split(//u).length * 3
+		if s[-1].length == s[-1].split(//u).length
 			t[p] = s[3].to_i
 			p = p + 1
 		end
diff -Naru mozcdic-ut-20110722.orig//34-change-to-mozcdic-order.rb mozcdic-ut-20110722/34-change-to-mozcdic-order.rb
--- mozcdic-ut-20110722.orig//34-change-to-mozcdic-order.rb	2011-07-19 22:48:19.000000000 +0900
+++ mozcdic-ut-20110722/34-change-to-mozcdic-order.rb	2011-07-22 17:31:51.000000000 +0900
@@ -1,4 +1,5 @@
 #!/usr/bin/ruby
+# -*- encoding: utf-8 -*-
 
 #############################
 # hindo_order
diff -Naru mozcdic-ut-20110722.orig//36-apply-cost-and-hinsi.rb mozcdic-ut-20110722/36-apply-cost-and-hinsi.rb
--- mozcdic-ut-20110722.orig//36-apply-cost-and-hinsi.rb	2011-07-19 22:48:19.000000000 +0900
+++ mozcdic-ut-20110722/36-apply-cost-and-hinsi.rb	2011-07-22 17:31:51.000000000 +0900
@@ -1,4 +1,5 @@
 #!/usr/bin/ruby
+# -*- encoding: utf-8 -*-
 
 #############################
 # set_entries
diff -Naru mozcdic-ut-20110722.orig//38-change-mozc-branding.rb mozcdic-ut-20110722/38-change-mozc-branding.rb
--- mozcdic-ut-20110722.orig//38-change-mozc-branding.rb	2011-07-19 22:48:19.000000000 +0900
+++ mozcdic-ut-20110722/38-change-mozc-branding.rb	2011-07-22 17:31:51.000000000 +0900
@@ -1,4 +1,5 @@
 #!/usr/bin/ruby
+# -*- encoding: utf-8 -*-
 
 #############################
 # change_branding
diff -Naru mozcdic-ut-20110722.orig//generate-mozc-ut.sh mozcdic-ut-20110722/generate-mozc-ut.sh
--- mozcdic-ut-20110722.orig//generate-mozc-ut.sh	2011-07-22 05:17:14.000000000 +0900
+++ mozcdic-ut-20110722/generate-mozc-ut.sh	2011-07-22 17:54:48.000000000 +0900
@@ -16,14 +16,8 @@
 rm -f id.def
 rm -f ut-*.txt*
 
-rm -rf ../mozc-$MOZCVER/
 rm -rf ../mozc-ut-$MOZCVER/
 
-# unpack official mozc
-cd ..
-tar jxf mozc-$MOZCVER.tar.bz2
-cd -
-
 # get mozcdic
 cat ../mozc-$MOZCVER/data/dictionary/dictionary*.txt > mozcdic_all.txt
 ruby sort* mozcdic_all.txt
diff -Naru mozcdic-ut-20110722.orig//sortdic.rb mozcdic-ut-20110722/sortdic.rb
--- mozcdic-ut-20110722.orig//sortdic.rb	2011-07-19 22:48:19.000000000 +0900
+++ mozcdic-ut-20110722/sortdic.rb	2011-07-22 17:31:51.000000000 +0900
@@ -1,4 +1,5 @@
 #!/usr/bin/ruby
+# -*- encoding: utf-8 -*-
 
 #############################
 # sort lines
