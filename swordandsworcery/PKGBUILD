# Maintainer: Eric Anderson <ejona86 at gmail dot com>

pkgname=swordandsworcery
pkgver=1.0
pkgrel=1
pkgdesc="An exploratory action adventure videogame with an emphasis on audiovisual style"
url="http://www.swordandsworcery.com/"
license=('custom')
arch=('i686' 'x86_64')
makedepends=()
options=(!strip)
_gamepkg="${pkgname}-linux-${pkgver}-1338343971.tar.gz"
source=("${pkgname}.desktop"
        'http://www.swordandsworcery.com/storage/icon_512.png'
        "${_gamepkg}")
md5sums=('b39e28e0efadc998d4f9aec0a9f821fb'
         '071d74203e593188ee28c0913d57d4ff'
         '3e9eaf4ada5cf0ae01ae525a9225da94')
_gamedirname=SwordAndSworceryEP

build() {
    cd ${srcdir}
    msg "Extracting..."
    tar xzf "$startdir/${_gamepkg}"
}

package(){
    cd ${srcdir}

    mkdir -p "${pkgdir}/opt/"
    cp -R "${srcdir}/${_gamedirname}" "${pkgdir}/opt/"

    install -D -m644 "${srcdir}/icon_512.png" \
        "${pkgdir}/opt/${_gamedirname}/icon_512.png"

    install -D -m644 "${srcdir}/${pkgname}.desktop" \
        "${pkgdir}/usr/share/applications/${pkgname}.desktop"

    install -D -m644 "${pkgdir}/opt/${_gamedirname}/eula.txt" \
        "${pkgdir}/usr/share/licenses/${pkgname}/license"

    mkdir -p "${pkgdir}/usr/bin"
    ln -s "/opt/${_gamedirname}/run.sh" "${pkgdir}/usr/bin/${pkgname}"
}
