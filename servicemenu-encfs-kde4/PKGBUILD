# Maintainer: Hyacinthe Cartiaux <hyacinthe.cartiaux@free.fr>
# Contributor: damian01w <damian01w@gmail.com>
pkgname=servicemenu-encfs-kde4
pkgver=0.3
pkgrel=2
pkgdesc="One KDE servicemenu for encfs encrypted directories."
arch=('i686' 'x86_64')
url="http://kde-apps.org/content/show.php?content=57086"
license=('GPL3')
depends=('kdebase-workspace' 'encfs')
source=("http://www.egregorion.net/works/servicemenus/servicemenu-encfs_${pkgver}-kde4.tar.gz"
        'french.patch' )
md5sums=('b1e42cfa0fc036f345036842c9fa48dd'
         'ae52e9de974182bd4a863990af8bb807' )

build() {
  tar -xvf ${srcdir}/servicemenu-encfs_${pkgver}-kde4.tar.gz

  cd ${srcdir}/servicemenu-encfs_${pkgver}-kde4

  # Add French language support
  patch -Np1 -i ../french.patch
}

package() {
  prefix=$(kde4-config --prefix)

  mkdir -p ${pkgdir}/${prefix}/share/kde4/services/ServiceMenus/
  install -m 644 ${srcdir}/servicemenu-encfs_${pkgver}-kde4/desktop/encfs.desktop ${pkgdir}/${prefix}/share/kde4/services/ServiceMenus/

  mkdir -p ${pkgdir}/usr/bin/
  install -m 755 ${srcdir}/servicemenu-encfs_${pkgver}-kde4/bin/encfs_kmenu.sh ${pkgdir}/usr/bin/
}

# vim:set ts=2 sw=2 et:
