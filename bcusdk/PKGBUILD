# Contributor: Thijs Vermeir <thijsvermeir@gmail.com>

pkgbase=('bcusdk')
pkgname=('eibd')
pkgver=0.0.4
pkgrel=3
pkgdesc=""
arch=('i686' 'x86_64')
url="http://www.auto.tuwien.ac.at/~mkoegler/index.php/bcusdk"
license=('LGPL')
depends=('pthsem')
options=('!libtool')
source=(http://www.auto.tuwien.ac.at/~mkoegler/eib/bcusdk_${pkgver}.tar.gz eibd)

build() {
  cd "${srcdir}/${pkgbase}-${pkgver}"

  ./configure \
    --prefix=/usr \
    --enable-onlyeibd \
    --enable-eibnetip \
    --enable-eibnetiptunnel

  cd "${srcdir}/${pkgbase}-${pkgver}/common"
  make

  cd "${srcdir}/${pkgbase}-${pkgver}/eibd"
  make
}

package_eibd() {
  pkgdesc="eibd server"

  install -Dm755 $srcdir/eibd $pkgdir/etc/rc.d/eibd

  cd "${srcdir}/${pkgbase}-${pkgver}/eibd"
  make DESTDIR="${pkgdir}" install

  cd ${pkgdir}
  rm -rf usr/share
  cd usr/bin
  rm -rf `ls | grep -v eib`
}

md5sums=('14138f457d6530bf45cf6a966fde9d5f'
         '2ee495203c054a49a156d685ce7efc21')
