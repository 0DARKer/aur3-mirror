#Maintainer: Lothar_m <lothar_m at riseup dot net>

pkgname='ducklauncher'
_gitname='launcher'
pkgver=20140415
pkgrel=1
arch=('i686' 'x86_64')
url="https://github.com/the-duck/launcher"
depends=('python2-pyside' 'python2-xlib' 'pygtk' 'python2-wnck' 'python2-cssutils')
license=('MIT')
pkgdesc="Duck Launcher Application Laucher"
provides=(ducklauncher)
conflicts=(ducklauncher)
source=("git://github.com/the-duck/launcher.git"
		)
md5sums=('SKIP'
		)

pkgver() {
	cd "$srcdir/$_gitname"
	# Use tag of the last commit, but removing the prefix
	git describe --long | sed -r 's/^v//;s/([^-]*-g)/r\1/;s/-/./g'
}

build() {
	cd "${_gitname}"
	cd "$srcdir/$_gitname"
}


package() {
	## Install executables
	install -D -m755 "$srcdir/$_gitname/duck-launcher/Apps.py" "$pkgdir/usr/bin/duck-launcher/Apps.py"
	install -D -m755 "$srcdir/$_gitname/duck-launcher/Config.py" "$pkgdir/usr/bin/duck-launcher/Config.py"
	install -D -m755 "$srcdir/$_gitname/duck-launcher/Files.py" "$pkgdir/usr/bin/duck-launcher/Files.py"
	install -D -m755 "$srcdir/$_gitname/duck-launcher/Main.py" "$pkgdir/usr/bin/duck-launcher/Main.py"
	install -D -m755 "$srcdir/$_gitname/duck-launcher/Settings.py" "$pkgdir/usr/bin/duck-launcher/Settings.py"
	install -D -m755 "$srcdir/$_gitname/duck-launcher/Window.py" "$pkgdir/usr/bin/duck-launcher/Window.py"
	install -D -m755 "$srcdir/$_gitname/duck-launcher/XlibStuff.py" "$pkgdir/usr/bin/duck-launcher/XlibStuff.py"

	## Install icons
	install -D -m644 "$srcdir/$_gitname/icons/add.svg" "$pkgdir/usr/share/duck-launcher/icons/add.svg"
	install -D -m644 "$srcdir/$_gitname/icons/apps.svg" "$pkgdir/usr/share/duck-launcher/icons/apps.svg"
	install -D -m644 "$srcdir/$_gitname/icons/back.svg" "$pkgdir/usr/share/duck-launcher/icons/back.svg"
	install -D -m644 "$srcdir/$_gitname/icons/close.svg" "$pkgdir/usr/share/duck-launcher/icons/close.svg"
	install -D -m644 "$srcdir/$_gitname/icons/file.svg" "$pkgdir/usr/share/duck-launcher/icons/file.svg"
	install -D -m644 "$srcdir/$_gitname/icons/folder.svg" "$pkgdir/usr/share/duck-launcher/icons/folder.svg"
	install -D -m644 "$srcdir/$_gitname/icons/home.svg" "$pkgdir/usr/share/duck-launcher/icons/home.svg"
	install -D -m644 "$srcdir/$_gitname/icons/open-apps.svg" "$pkgdir/usr/share/duck-launcher/icons/open-apps.svg"
	install -D -m644 "$srcdir/$_gitname/icons/quit.svg" "$pkgdir/usr/share/duck-launcher/icons/quit.svg"
	install -D -m644 "$srcdir/$_gitname/icons/settings.svg" "$pkgdir/usr/share/duck-launcher/icons/settings.svg"
	install -D -m644 "$srcdir/$_gitname/icons/star.svg" "$pkgdir/usr/share/duck-launcher/icons/star.svg"
	install -D -m644 "$srcdir/$_gitname/icons/win.svg" "$pkgdir/usr/share/duck-launcher/icons/win.svg"

	## Install Desktop File
	install -D -m644 "$srcdir/$_gitname/duck-launcher.desktop" "$pkgdir/usr/share/applications/duck-launcher.desktop"
}
