#Contributor: Rafael Garcia <rafael.garcia.gallego@gmail.com>

pkgname=slmenu-hg
pkgver=0
pkgrel=1
pkgdesc="Dmenu spinoff for the console"
url="https://bitbucket.org/rafaelgg/slmenu"
arch=('i686' 'x86_64')
license=('MIT')
makedepends=('mercurial' 'sed' 'pkgconfig')
optdepends=('xsel: X11 integration')
source=()
md5sums=()

_hgroot='https://bitbucket.org/rafaelgg'
_hgrepo='slmenu'

build() {
        cd $startdir/src

        # update the repo, else clone a new one
        if [ -d $_hgrepo ]; then
                cd $_hgrepo
                make clean
                hg pull -u
        else
                hg clone ${_hgroot}/${_hgrepo}
                cd $_hgrepo
        fi

        make PREFIX=/usr DESTDIR=$pkgdir clean install || return 1

        mkdir -p $startdir/pkg/usr/share/licenses/slmenu
        cp LICENSE $startdir/pkg/usr/share/licenses/slmenu
}

