# Contributer: Rikles (style.boubou at gmail dot fr)
pkgname=dragonmemory
pkgver=1.0
pkgrel=2
pkgdesc="Simple and fun memory game."
arch=('any')
url="http://dragontech.net/index.php/games-en"
license=('GPL')
depends=('sdl_image')
makedepends=('tar')
source=("http://dragontech.net/index.php/games-en?file=tl_files/dragontech/Software/DragonMemory/DragonMemory-${pkgver}.tgz")
noextract=("DragonMemory-${pkgver}.tgz")
md5sums=('fb7d282fff66274357e50dd93f77a2e9')

build() {
  unzip "${srcdir}/${pkgname}-${pkgver}.zip" -d "${srcdir}/${pkgname}-${pkgver}"
  tar -xf "${srcdir}/DragonMemory-${pkgver}.tgz"
}

package() {
  cat > "${srcdir}/DragonMemory"

  cat > "${srcdir}/DragonMemory.desktop"
[Desktop Entry]
Type=Application
Version=1.0
Name=Dragon Memory
Comment=Simple and fun memory game.
Exec=${pkgname}
Terminal=false
Categories=Game;

  mkdir -p "${pkgdir}/opt/${pkgname}"
  cp -r "${srcdir}/DragonMemory/"* "${pkgdir}/opt/${pkgname}/"
  install -D -m 755 "${srcdir}/DragonMemory" "${pkgdir}/usr/bin/${pkgname}"
  install -D -m 644 "${srcdir}/DragonMemory.desktop" "${pkgdir}/usr/share/applications/${pkgname}.desktop"
  chmod 755 "${pkgdir}/opt/${pkgname}/${pkgname}"
}
