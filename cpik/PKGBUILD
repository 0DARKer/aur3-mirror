# Maintainer: Kevin Cox (youarefunny - ktcox@rogers.com)
pkgname=cpik
pkgver=0.5.2
_pkgver=$(echo $pkgver | tr -d '.')
pkgrel=4
pkgdesc='The C compiler for PIC18 devices'
url='http://pikdev.free.fr/'
license=('GPL')
arch=('i686' 'x86_64')
depends=('gcc-libs')
install=
source=("http://pikdev.free.fr/$pkgname-$pkgver-1-src.tar.gz"
		"http://pikdev.free.fr/$pkgname-$pkgver-1-bin.tar.gz")
md5sums=('9b8329e3e533383104c10253d9bec156'
		 'af412c6747d532c1c615c59cbcb7688d')

build() {
	cd "${srcdir}/cpik"	# Source Directory
	
	qmake -o Makefile "cpik${_pkgver}.pro"
	make release
	install -Dm755 "cpik-$pkgver" "${pkgdir}/usr/bin/cpik-$pkgver"    #  We can't make intall to a prefix so we'll have to do it manually
	ln -s "${pkgdir}/usr/bin/cpik-$pkgver" "${pkgdir}/usr/bin/cpik"
	
	cd ${srcdir}/cpik$_pkgver	# Binary Directory
	
	install -dm644 "include/*" "${pkgdir}/usr/share/cpik/$pkgver/include"    # Copy some files over
	install -dm644 "lib/*" "${pkgdir}/usr/share/cpik/$pkgver/lib"            #
	install -dm644 "src/*" "${pkgdir}/usr/share/cpik/$pkgver/src"            #
	install -dm644 "doc/*" "${pkgdir}/usr/share/cpik/$pkgver/doc"            #
	install -dm755 "man1/*" "${pkgdir}/usr/share/man/man1"                   #
}
