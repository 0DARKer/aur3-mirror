# Maintainer: Davide Iosca <dvdios[at]aol[dot]com>
pkgname=clingo
groups=('potassco')
pkgver=3.0.5
pkgrel=1
pkgdesc="A bottom up grounder for logic programs."
arch=('x86_64' 'i686')
url="http://potassco.sourceforge.net/"
license=('GPL3')
depends=('boost-libs>=1.37.1-1' 'lua51' 'gcc-libs')
makedepends=('boost>=1.37.1-1' 'cmake>=2.6')
source=("http://downloads.sourceforge.net/project/potassco/${pkgname}/${pkgver}/${pkgname}-${pkgver}-source.tar.gz")
md5sums=('75526ce68e20c7487240a09a2cd4d0ae')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}-source"
# Add paths to lua libraries (CMake module FindLUA51 doesn't work correctly when lua 5.2 is installed)
  cmake_options="-DWITH_LUA=system \
    -DCMAKE_CXX_FLAGS=-fpermissive \
    -DLUA_INCLUDE_DIR='/usr/include/lua5.1' \
    -DLUA_LIBRARY='/usr/lib/liblua5.1.so' \
    -DLUA_LIBRARIES='/usr/lib/liblua5.1.so;/usr/lib/libm.so;/usr/lib/libdl.so'" make -e
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}-source/build/release/bin"
  install -D "${pkgname}" "${pkgdir}/usr/bin/${pkgname}"
}
