# Maintainer: CyrIng <xfreq[at]cyring.fr>

pkgname=xfreq-2.0-git
pkgver=2.0_b0.32
pkgrel=1
pkgdesc="Intel Core Monitoring"
arch=('x86_64')
url="http://code.google.com/p/xfreq/"
license=('GPL2')
depends=('libx11')
makedepends=('libx11' 'git')
conflicts=('xfreq-git')
options=('!emptydirs')
branch="2.0"
source=()
md5sums=('SKIP')

build() {
	git clone https://code.google.com/p/xfreq/ -b ${branch} --single-branch .
	cd "${srcdir}/${branch}/svr"
	make
	cd "${srcdir}/${branch}/cli"
	make
	cd "${srcdir}/${branch}/gui"
	make
}

package() {
	mkdir -p ${pkgdir}/usr/bin
	cd "${srcdir}/${branch}/svr"
	install -m 755 bin/xfreq-intel ${pkgdir}/usr/bin/
        install -Dm 644 xfreq-intel.service "${pkgdir}/usr/lib/systemd/system/xfreq-intel.service"
	cd "${srcdir}/${branch}/cli"
	install -m 755 bin/xfreq-cli ${pkgdir}/usr/bin/
	cd "${srcdir}/${branch}/gui"
	install -m 755 bin/xfreq-gui ${pkgdir}/usr/bin/
# Post installation of the SystemD service.
	install=xfreq.install
}
