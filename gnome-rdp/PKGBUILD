# Maintainer: Hyperair <hyperair@gmail.com>
# Contributor: kumico <norrian@gmail.com>
# Contributor: adamruss <mail@russ.co.il>
pkgname=gnome-rdp
pkgver=0.2.3
pkgrel=3
url="http://gnome-rdp.linuxforge.hu/"
pkgdesc="Remote Desktop Client for the GNOME Desktop with RDP/VNC/SSH capabilities; Written in (Mono) C#."
arch=('i686' 'x86_64')
depends=('rdesktop' 'tightvnc' 'openssh' 'knockd' 'gnome-terminal' 'gtk-sharp-2' 'gnome-sharp' 'gnome-desktop-sharp' 'gnome-keyring-sharp' 'nant')
license=('GPL' 'LGPL')
source=(http://downloads.sourceforge.net/sourceforge/${pkgname}/${pkgname}-${pkgver}.tar.gz
        vnccommand.patch
	gnome-rdp-logo.png
	gnome-rdp.desktop)

install=gnome-rdp.install

build() {
  export MONO_SHARED_DIR="$srcdir/.wapi"
  mkdir -p "$MONO_SHARED_DIR"
  cd "$srcdir/${pkgname}-${pkgver}"

  # patch  
  patch -Np1 -i ../vnccommand.patch || return 1
  cp -f $srcdir/gnome-rdp-logo.png $srcdir/$pkgname-$pkgver/icons
  
  # build
  nant || return 1

  # install
  mkdir -p $startdir/pkg/usr/lib/gnome-rdp/
  mkdir -p $startdir/pkg/usr/bin
  mkdir -p $startdir/pkg/usr/share/applications
  mkdir -p $startdir/pkg/usr/share/pixmaps

  cp $srcdir/$pkgname-$pkgver/build/gnome-rdp $startdir/pkg/usr/bin
  cp $srcdir/gnome-rdp.desktop $startdir/pkg/usr/share/applications
  cp $srcdir/$pkgname-$pkgver/build/gnome-rdp.exe $startdir/pkg/usr/lib/gnome-rdp/
  cp $srcdir/gnome-rdp-logo.png $startdir/pkg/usr/share/pixmaps/gnome-rdp.png
  chmod +x $startdir/pkg/usr/bin/gnome-rdp

  rm -rf "$MONO_SHARED_DIR"
}
md5sums=('1297c536e8d84c05113bc744d6829b54'
         'f52b591634c64d959491ddb612320ae2'
         'db32cf86981d76a7d882b43d78cacc61'
         'd016bdb5b41c219293b762dc85f94059')
