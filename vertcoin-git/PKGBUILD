#Maintainer: Lothar_m <lothar_m at riseup dot net>

pkgname='vertcoin-git'
_gitname='vertcoin'
pkgver=0.8.6.2
pkgrel=1
arch=('i686' 'x86_64')
url="http://www.vertcoin.org/"
depends=('qt4>=4.6' 'boost-libs>=1.46' 'miniupnpc>=1.6' 'qrencode>=3.4.3')
makedepends=('boost' 'automoc4' 'qrencode' 'miniupnpc' 'git')
license=('MIT')
pkgdesc="Peer-to-peer network based digital currency (includes 
both the qtclient and the headless daemon)"
provides=(vertcoin)
conflicts=(vertcoin)
source=("git://github.com/vertcoin/vertcoin.git")
md5sums=('SKIP')

build() {
  cd "${_gitname}"
  cd "$srcdir/$_gitname"

  # and make qt gui
  qmake-qt4 USE_QRCODE=1 USE_UPNP=1
  make

 # make vertcoin daemon
   cd "$srcdir/$_gitname/src"
     make $MAKEFLAGS -f makefile.unix
}


package() {
 # install vertcoin-qt client
   install -D -m755 "$srcdir/$_gitname/vertcoin-qt" "$pkgdir/usr/bin/vertcoin-qt"

 # install vertcoin daemon
   install -D -m755 "$srcdir/$_gitname/src/vertcoind" "$pkgdir/usr/bin/vertcoind"

 # install license
   install -D -m644 "$srcdir/$_gitname/COPYING" "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
}

