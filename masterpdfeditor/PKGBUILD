# Maintainer: Miguel Revilla <yo@miguelrevilla.com>
# Contributor: Ferik <djferik at gmail dot com>

pkgname=masterpdfeditor
pkgver=1.9.24
pkgrel=1
pkgdesc="A complete solution for creation and editing PDF files. (Free for non-commercial use)"
url="http://code-industry.net/free-pdf-editor.php"
arch=('i686' 'x86_64')
license=('custom')
depends=('qt4')
source=(${pkgname}.desktop)
md5sums=('cccf3261909560a03d8cde922a4bb28d')

if [[ $CARCH == 'i686' ]]; then
   source+=(http://code-industry.net/public/MasterPDFEditor-${pkgver}.i386.tar.gz)
   md5sums+=('a8af63df9f6a82ccf6155fa40b30fd12')
elif [[ $CARCH == 'x86_64' ]]; then
   source+=(http://code-industry.net/public/MasterPDFEditor-${pkgver}.${CARCH}.tar.gz)
   md5sums+=('cbb7ead7ae20713a710665e8516e25a5')
fi

package() {
	mkdir -p "${pkgdir}/opt/masterpdfeditor"
	cd "${srcdir}/MasterPDFEditor"
	/bin/tar cf - * | ( cd "${pkgdir}"/opt/masterpdfeditor; tar xfp - )
	install -D -m755 "${srcdir}"/MasterPDFEditor/lang/*.qm "${pkgdir}"/opt/masterpdfeditor/lang
	install -D -m755 "${srcdir}"/MasterPDFEditor/lang/*.ts "${pkgdir}"/opt/masterpdfeditor/lang
	install -D -m644 "${srcdir}"/MasterPDFEditor/License.txt "${pkgdir}"/usr/share/licenses/masterpdfeditor/LICENSE
	install -D -m644 "${srcdir}"/MasterPDFEditor/master-pdf-editor.png "${pkgdir}"/usr/share/pixmaps/pdfeditor.png
	install -D -m644 "${srcdir}"/masterpdfeditor.desktop "${pkgdir}"/usr/share/applications/masterpdfeditor.desktop
	rm "${pkgdir}"/opt/masterpdfeditor/License.txt
	chmod 644 "${pkgdir}"/opt/masterpdfeditor/changelog
	chmod 644 "${pkgdir}"/opt/masterpdfeditor/lang/*
	chmod 755 "${pkgdir}"/opt/masterpdfeditor/lang
	mkdir -p "${pkgdir}"/usr/bin
	ln -s /opt/masterpdfeditor/master-pdf-editor "${pkgdir}"/usr/bin/pdfeditor
}
