# Contributor: Alexsandr Pavlov <kidoz at mail dot ru>
pkgname=ruby-rails-aio
pkgver=3.2.3
#Core
_actionmailer_pkgver=${pkgver}
_actionpack_pkgver=${pkgver}
_activemodel_pkgver=${pkgver}
_activerecord_pkgver=${pkgver}
_activeresource_pkgver=${pkgver}
_activesupport_pkgver=${pkgver}
_bundler_pkgver=1.0.21
_rails_pkgver=${pkgver}
_railties_pkgver=${pkgver}
#Depends
_arel_pkgver=3.0.2
_builder_pkgver=3.0.0
_erubis_pkgver=2.7.0
_hike_pkgver=1.2.1
_i18n_pkgver=0.6.0
_journey_pkgver=1.0.1
_json_pkgver=1.6.1
_mail_pkgver=2.4.4
_mime_types_pkgver=1.17.2
_multi_json_pkgver=1.0.4
_polyglot_pkgver=0.3.3
_rack_pkgver=1.4.0
_rack_cache_pkgver=1.2
_rack_ssl_pkgver=1.3.2
_rack_test_pkgver=0.6.1
_sprockets_pkgver=2.1.2
_thor_pkgver=0.14.6
_tilt_pkgver=1.3.3
_treetop_pkgver=1.4.10
_tzinfo_pkgver=0.3.31
pkgrel=2
pkgdesc="The open source web application framework for the Ruby programming language."
arch=(any)
url="http://www.rubyonrails.org"
license=('MIT')
depends=('ruby' 'rubygems')
provides=("ruby-actionmailer=${_actionmailer_pkgver}" "ruby-actionpack=${_actionpack_pkgver}" "ruby-activemodel=${_activemodel_pkgver}" \
		"ruby-activerecord=${_activerecord_pkgver}" "ruby-activeresource=${_activeresource_pkgver}" "ruby-activesupport=${_activesupport_pkgver}" \
		"ruby-arel=${_arel_pkgver}" "ruby-builder=${_builder_pkgver}" "ruby-bundler=${_bundler_pkgver}" "ruby-erubis=${_erubis_pkgver}" \
		"ruby-hike=${_hike_pkgver}" "ruby-i18n=${_i18n_pkgver}" "ruby-journey=${_journey_pkgver}" "ruby-json=${_json_pkgver}" \
		"ruby-mail=${_mail_pkgver}" "ruby-mime-types=${_mime_types_pkgver}" "ruby-multi_json=${_multi_json_pkgver}" "ruby-polyglot=${_polyglot_pkgver}" \
		"ruby-rack=${_rack_pkgver}" "ruby-rack-cache=${_rack_cache_pkgver}" "ruby-rack-ssl=${_rack_ssl_pkgver}" "ruby-rack-test=${_rack_test_pkgver}" \
		"ruby-rails=${pkgver}" "ruby-railties=${_railties_pkgver}" "ruby-sprockets=${_sprockets_pkgver}" "ruby-thor=${_thor_pkgver}" "ruby-tilt=${_tilt_pkgver}" \
		"ruby-treetop=${_treetop_pkgver}" "ruby-tzinfo=${_tzinfo_pkgver}")

conflicts=('ruby-rack' 'ruby-rack110' 'ruby-rack1xx' 'rails' 'ruby-rails' 'ruby-rails2xx' 'ruby-rails2xx-aio')

source=(http://gems.rubyforge.org/gems/actionmailer-${_actionmailer_pkgver}.gem
		http://gems.rubyforge.org/gems/actionpack-${_actionpack_pkgver}.gem
		http://gems.rubyforge.org/gems/activemodel-${_activemodel_pkgver}.gem
		http://gems.rubyforge.org/gems/activerecord-${_activerecord_pkgver}.gem
		http://gems.rubyforge.org/gems/activeresource-${_activeresource_pkgver}.gem
		http://gems.rubyforge.org/gems/activesupport-${_activesupport_pkgver}.gem
		http://gems.rubyforge.org/gems/bundler-${_bundler_pkgver}.gem
		http://gems.rubyforge.org/gems/rails-${_rails_pkgver}.gem
		http://gems.rubyforge.org/gems/railties-${_railties_pkgver}.gem
		http://gems.rubyforge.org/gems/arel-${_arel_pkgver}.gem
		http://gems.rubyforge.org/gems/builder-${_builder_pkgver}.gem
		http://gems.rubyforge.org/gems/erubis-${_erubis_pkgver}.gem
		http://gems.rubyforge.org/gems/hike-${_hike_pkgver}.gem
		http://gems.rubyforge.org/gems/i18n-${_i18n_pkgver}.gem
		http://gems.rubyforge.org/gems/journey-${_journey_pkgver}.gem
		http://gems.rubyforge.org/gems/json-${_json_pkgver}.gem
		http://gems.rubyforge.org/gems/mail-${_mail_pkgver}.gem
		http://gems.rubyforge.org/gems/mime-types-${_mime_types_pkgver}.gem
		http://gems.rubyforge.org/gems/multi_json-${_multi_json_pkgver}.gem
		http://gems.rubyforge.org/gems/polyglot-${_polyglot_pkgver}.gem
		http://gems.rubyforge.org/gems/rack-${_rack_pkgver}.gem
		http://gems.rubyforge.org/gems/rack-cache-${_rack_cache_pkgver}.gem
		http://gems.rubyforge.org/gems/rack-ssl-${_rack_ssl_pkgver}.gem
		http://gems.rubyforge.org/gems/rack-test-${_rack_test_pkgver}.gem
		http://gems.rubyforge.org/gems/sprockets-${_sprockets_pkgver}.gem
		http://gems.rubyforge.org/gems/thor-${_thor_pkgver}.gem
		http://gems.rubyforge.org/gems/tilt-${_tilt_pkgver}.gem
		http://gems.rubyforge.org/gems/treetop-${_treetop_pkgver}.gem
		http://gems.rubyforge.org/gems/tzinfo-${_tzinfo_pkgver}.gem)

noextract=(actionmailer-${_actionmailer_pkgver}.gem
		actionpack-${_actionpack_pkgver}.gem
		activemodel-${_activemodel_pkgver}.gem
		activerecord-${_activerecord_pkgver}.gem
		activeresource-${_activeresource_pkgver}.gem
		activesupport-${_activesupport_pkgver}.gem
		bundler-${_bundler_pkgver}.gem
		rails-${_rails_pkgver}.gem
		railties-${_railties_pkgver}.gem
		arel-${_arel_pkgver}.gem
		builder-${_builder_pkgver}.gem
		erubis-${_erubis_pkgver}.gem
		hike-${_hike_pkgver}.gem
		i18n-${_i18n_pkgver}.gem
		journey-${_journey_pkgver}.gem
		json-${_json_pkgver}.gem
		mail-${_mail_pkgver}.gem
		mime-types-${_mime_types_pkgver}.gem
		multi_json-${_multi_json_pkgver}.gem
		polyglot-${_polyglot_pkgver}.gem
		rack-${_rack_pkgver}.gem
		rack-cache-${_rack_cache_pkgver}.gem
		rack-ssl-${_rack_ssl_pkgver}.gem
		rack-test-${_rack_test_pkgver}.gem
		sprockets-${_sprockets_pkgver}.gem
		thor-${_thor_pkgver}.gem
		tilt-${_tilt_pkgver}.gem
		treetop-${_treetop_pkgver}.gem
		tzinfo-${_tzinfo_pkgver}.gem)
		
md5sums=('3faef04d83fa02ad02fb67aacf74e946'
		 '619678c7bf71be7deafcb16efae09ce5'
		 'b44836312701c713aaf811440c16d5ed'
		 '0115690994036c2a2fd17a141393e8c6'
		 'c23f95dbc18e6c43e070519fb5543f55'
		 '2ad46d1695282863d06f44f47b85ce9b'
		 '3878473cbaa1355cbc332f2b8ef44de7'
		 '45f83130a43c3de866887d524c2504ee'
		 'a3a5c2fb4ea53740ca8b26aa294e0ff0'
		 '7436bc52ddb27274c939147d563835ce'
		 'cf9d2693d684a749e35dda886c4dc23c'
		 'cca3cf13ef951d1fc8c124d2fde52565'
		 'fc7d49a1d99eb4e7812e134d3e609346'
		 'fb94282dab8aadb7de15db134f8133ff'
		 '053b7b35bf362ac54e4dac08bd654f8f'
		 '1dddafdc136e77ee96834c7a0eed38f3'
		 'bacad77f57d123cf58de6c2de47d19b0'
		 'ecc7a90a252de99a164d86b4a154da67'
		 'e3feb320993a12eebea40af2496878e8'
		 '01e313080095caf4dc7ab71fd572a377'
		 'c2a2100159ebd81ceffc20bd38323152'
		 'ccdcdd7302394e05d3033d683b658556'
		 '45da2233b7580af57fbe9cbecb54e369'
		 '8226527d4c84f96107bcf7aa87700d3c'
		 'fa33f46bc07204c16a49d5a28ea6b60f'
		 'd52dcc3cc08a2e6443bba665c2123a59'
		 '499458da7755dddaee177922f1641659'
		 '5b83a9e84b0ca16aa669d546798d5fdc'
		 '8290c9397dbadf3c5a764883e6ff10e1')

_gem_list=(actionmailer-${_actionmailer_pkgver}
		actionpack-${_actionpack_pkgver}
		activemodel-${_activemodel_pkgver}
		activerecord-${_activerecord_pkgver}
		activeresource-${_activeresource_pkgver}
		activesupport-${_activesupport_pkgver}
		bundler-${_bundler_pkgver}
		rails-${_rails_pkgver}
		railties-${_railties_pkgver}
		arel-${_arel_pkgver}
		builder-${_builder_pkgver}
		erubis-${_erubis_pkgver}
		hike-${_hike_pkgver}
		i18n-${_i18n_pkgver}
		journey-${_journey_pkgver}
		json-${_json_pkgver}
		mail-${_mail_pkgver}
		mime-types-${_mime_types_pkgver}
		multi_json-${_multi_json_pkgver}
		polyglot-${_polyglot_pkgver}
		rack-${_rack_pkgver}
		rack-cache-${_rack_cache_pkgver}
		rack-ssl-${_rack_ssl_pkgver}
		rack-test-${_rack_test_pkgver}
		sprockets-${_sprockets_pkgver}
		thor-${_thor_pkgver}
		tilt-${_tilt_pkgver}
		treetop-${_treetop_pkgver}
		tzinfo-${_tzinfo_pkgver})

build() {
  cd "${srcdir}"
  export HOME=/tmp
  local _gemdir="$(ruby -rubygems -e'puts Gem.default_dir')"
  for _gem_name in ${_gem_list[*]}
    do gem install --no-user-install --ignore-dependencies -i "${pkgdir}${_gemdir}" -n "${pkgdir}/usr/bin" ${_gem_name}.gem
  done
}
