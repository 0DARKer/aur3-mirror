# Contributor: Alexsandr Pavlov <kidoz at mail dot ru>
pkgname=ruby-rails-aio
pkgver=3.1.1
#Core
_actionmailer_pkgver=${pkgver}
_actionpack_pkgver=${pkgver}
_activemodel_pkgver=${pkgver}
_activerecord_pkgver=${pkgver}
_activeresource_pkgver=${pkgver}
_activesupport_pkgver=${pkgver}
_bundler_pkgver=1.0.21
_rails_pkgver=${pkgver}
_railties_pkgver=${pkgver}
#Depends
_abstract_pkgver=1.0.0
_arel_pkgver=2.2.1
_builder_pkgver=3.0.0
_erubis_pkgver=2.7.0
_hike_pkgver=1.2.1
_i18n_pkgver=0.6.0
_json_pkgver=1.6.1
_mail_pkgver=2.3.0
_mime_types_pkgver=1.17.2
_multi_json_pkgver=1.0.3
_polyglot_pkgver=0.3.2
_rack_pkgver=1.3.5
_rack_cache_pkgver=1.1
_rack_mount_pkgver=0.8.3
_rack_ssl_pkgver=1.3.2
_rack_test_pkgver=0.6.1
_rdoc_pkgver=3.11
_sprockets_pkgver=2.0.3
_thor_pkgver=0.14.6
_tilt_pkgver=1.3.3
_treetop_pkgver=1.4.10
_tzinfo_pkgver=0.3.30
pkgrel=1
pkgdesc="Is an open source web application framework for the Ruby programming language."
arch=(any)
url="http://www.rubyonrails.org"
license=('MIT')
depends=('ruby' 'rubygems')
provides=('ruby-actionmailer' 'ruby-actionpack' 'ruby-activemodel' 'ruby-activerecord' 'ruby-activeresource' 'ruby-activesupport'
		'ruby-arel' 'ruby-builder' 'ruby-bundler' 'ruby-erubis' 'ruby-hike' 'ruby-i18n' 'ruby-json'
		'ruby-mail' 'ruby-mime-types' 'ruby-multi_json' 'ruby-polyglot' 'ruby-rack' 'ruby-rack-cache'
		'ruby-rack-mount' 'ruby-rack-ssl' 'ruby-rack-test' 'ruby-rails' 'ruby-railties' 'ruby-rdoc' 'ruby-sprockets' 'ruby-thor' 'ruby-tilt'
		'ruby-treetop' 'ruby-tzinfo')

conflicts=('ruby-rack' 'ruby-rack110' 'ruby-rack1xx' 'rails' 'ruby-rails' 'ruby-rails2xx' 'ruby-rails2xx-aio')

source=(http://gems.rubyforge.org/gems/actionmailer-${_actionmailer_pkgver}.gem
		http://gems.rubyforge.org/gems/actionpack-${_actionpack_pkgver}.gem
		http://gems.rubyforge.org/gems/activemodel-${_activemodel_pkgver}.gem
		http://gems.rubyforge.org/gems/activerecord-${_activerecord_pkgver}.gem
		http://gems.rubyforge.org/gems/activeresource-${_activeresource_pkgver}.gem
		http://gems.rubyforge.org/gems/activesupport-${_activesupport_pkgver}.gem
		http://gems.rubyforge.org/gems/bundler-${_bundler_pkgver}.gem
		http://gems.rubyforge.org/gems/rails-${_rails_pkgver}.gem
		http://gems.rubyforge.org/gems/railties-${_railties_pkgver}.gem
		http://gems.rubyforge.org/gems/arel-${_arel_pkgver}.gem
		http://gems.rubyforge.org/gems/builder-${_builder_pkgver}.gem
		http://gems.rubyforge.org/gems/erubis-${_erubis_pkgver}.gem
		http://gems.rubyforge.org/gems/hike-${_hike_pkgver}.gem
		http://gems.rubyforge.org/gems/i18n-${_i18n_pkgver}.gem
		http://gems.rubyforge.org/gems/json-${_json_pkgver}.gem
		http://gems.rubyforge.org/gems/mail-${_mail_pkgver}.gem
		http://gems.rubyforge.org/gems/mime-types-${_mime_types_pkgver}.gem
		http://gems.rubyforge.org/gems/multi_json-${_multi_json_pkgver}.gem
		http://gems.rubyforge.org/gems/polyglot-${_polyglot_pkgver}.gem
		http://gems.rubyforge.org/gems/rack-${_rack_pkgver}.gem
		http://gems.rubyforge.org/gems/rack-cache-${_rack_cache_pkgver}.gem
		http://gems.rubyforge.org/gems/rack-mount-${_rack_mount_pkgver}.gem
		http://gems.rubyforge.org/gems/rack-ssl-${_rack_ssl_pkgver}.gem
		http://gems.rubyforge.org/gems/rack-test-${_rack_test_pkgver}.gem
		http://gems.rubyforge.org/gems/rdoc-${_rdoc_pkgver}.gem
		http://gems.rubyforge.org/gems/sprockets-${_sprockets_pkgver}.gem
		http://gems.rubyforge.org/gems/thor-${_thor_pkgver}.gem
		http://gems.rubyforge.org/gems/tilt-${_tilt_pkgver}.gem
		http://gems.rubyforge.org/gems/treetop-${_treetop_pkgver}.gem
		http://gems.rubyforge.org/gems/tzinfo-${_tzinfo_pkgver}.gem
		)

noextract=(actionmailer-${_actionmailer_pkgver}.gem
		actionpack-${_actionpack_pkgver}.gem
		activemodel-${_activemodel_pkgver}.gem
		activerecord-${_activerecord_pkgver}.gem
		activeresource-${_activeresource_pkgver}.gem
		activesupport-${_activesupport_pkgver}.gem
		bundler-${_bundler_pkgver}.gem
		rails-${_rails_pkgver}.gem
		railties-${_railties_pkgver}.gem
		arel-${_arel_pkgver}.gem
		builder-${_builder_pkgver}.gem
		erubis-${_erubis_pkgver}.gem
		hike-${_hike_pkgver}.gem
		i18n-${_i18n_pkgver}.gem
		json-${_json_pkgver}.gem
		mail-${_mail_pkgver}.gem
		mime-types-${_mime_types_pkgver}.gem
		multi_json-${_multi_json_pkgver}.gem
		polyglot-${_polyglot_pkgver}.gem
		rack-${_rack_pkgver}.gem
		rack-cache-${_rack_cache_pkgver}.gem
		rack-mount-${_rack_mount_pkgver}.gem
		rack-ssl-${_rack_ssl_pkgver}.gem
		rack-test-${_rack_test_pkgver}.gem
		rdoc-${_rdoc_pkgver}.gem
		sprockets-${_sprockets_pkgver}.gem
		thor-${_thor_pkgver}.gem
		tilt-${_tilt_pkgver}.gem
		treetop-${_treetop_pkgver}.gem
		tzinfo-${_tzinfo_pkgver}.gem)

md5sums=('e56ef028edc069bb75970064d533c4d2'
		 '4cb953a8188d2e72ebfd3a2482de7d42'
		 '564bdb2dd7656ca316a618e23148bd39'
		 '88ddb762f30bf9d8f88319e19dbbb3f4'
		 '2c7006ac01a5e23baedbe249d5c9a5ff'
		 '7cfaed88c03a01237bfe0a86268cddc4'
		 '3878473cbaa1355cbc332f2b8ef44de7'
		 '44d52cca2af8a110bc7df8698d77fd1f'
		 'ab308009c977561e64a0c9d3bd38a470'
		 '984b6cbe44546a7aeaa7370a85597cac'
		 'cf9d2693d684a749e35dda886c4dc23c'
		 'cca3cf13ef951d1fc8c124d2fde52565'
		 'fc7d49a1d99eb4e7812e134d3e609346'
		 'fb94282dab8aadb7de15db134f8133ff'
		 '1dddafdc136e77ee96834c7a0eed38f3'
		 'da4561f0362889f20e38049e8a132e54'
		 'ecc7a90a252de99a164d86b4a154da67'
		 '59cbca421061ecaf85c99b667f2d0623'
		 '11cc7c80ed309ecae6fe97b099d94665'
		 'fb10eec9ba62cd18e346ed5bd28577b6'
		 '0606345ecceeb3388c52a5a99d95d258'
		 'b59590c704d11e965a5ade3875d00b91'
		 '45da2233b7580af57fbe9cbecb54e369'
		 '8226527d4c84f96107bcf7aa87700d3c'
		 '626e5a31ec3597221459d9eca4c9355e'
		 'a7620fac4095187410117f572ca0d421'
		 'd52dcc3cc08a2e6443bba665c2123a59'
		 '499458da7755dddaee177922f1641659'
		 '5b83a9e84b0ca16aa669d546798d5fdc'
		 '7d0455624483bcab7de56cfd33549685')

_gem_list=(actionmailer-${_actionmailer_pkgver}
		actionpack-${_actionpack_pkgver}
		activemodel-${_activemodel_pkgver}
		activerecord-${_activerecord_pkgver}
		activeresource-${_activeresource_pkgver}
		activesupport-${_activesupport_pkgver}
		bundler-${_bundler_pkgver}
		rails-${_rails_pkgver}
		railties-${_railties_pkgver}
		arel-${_arel_pkgver}
		builder-${_builder_pkgver}
		erubis-${_erubis_pkgver}
		hike-${_hike_pkgver}
		i18n-${_i18n_pkgver}
		json-${_json_pkgver}
		mail-${_mail_pkgver}
		mime-types-${_mime_types_pkgver}
		multi_json-${_multi_json_pkgver}
		polyglot-${_polyglot_pkgver}
		rack-${_rack_pkgver}
		rack-cache-${_rack_cache_pkgver}
		rack-mount-${_rack_mount_pkgver}
		rack-ssl-${_rack_ssl_pkgver}
		rack-test-${_rack_test_pkgver}
		sprockets-${_sprockets_pkgver}
		thor-${_thor_pkgver}
		tilt-${_tilt_pkgver}
		treetop-${_treetop_pkgver}
		tzinfo-${_tzinfo_pkgver})

build() {
  cd "${srcdir}"
  export HOME=/tmp
  local _gemdir="$(ruby -rubygems -e'puts Gem.default_dir')"
  for _gem_name in ${_gem_list[*]}
    do gem install --ignore-dependencies -i "${pkgdir}${_gemdir}" -n "${pkgdir}/usr/bin" ${_gem_name}.gem
  done

  gem install --ignore-dependencies -i "${pkgdir}${_gemdir}" rdoc-${_rdoc_pkgver}.gem
}
