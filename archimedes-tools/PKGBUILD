# Maintainer: eolianoe <eolianoe AT gmail DoT com>
# Maintainer: A Austin <acm.austin at gmail.com>
# Contributor: Martin Ortbauer <mortbauer@gmail.com>

pkgbase=("archimedes-tools")
pkgname=("triangle" "showme")
pkgver="1.6"
pkgrel="3"
arch=("any")
url="http://www.cs.cmu.edu/~quake/archimedes.html"
license=("custom")
source=(http://www.netlib.org/voronoi/triangle.zip)
md5sums=('10aff8d7950f5e0e2fb6dd2e340be2c9') 
makedepends=("libx11")

build(){
  gcc $CFLAGS -o triangle triangle.c -lm
  gcc $CFLAGS -DTRILIBRARY -Wall -fpic -c triangle.c
  gcc $CFLAGS -shared -o libtriangle.so triangle.o

  gcc $CFLAGS -o showme showme.c -lX11
}

package_triangle() {
  pkgver="1.6"
  pkgrel="3"
  url="http://www.cs.cmu.edu/~quake/triangle.html"
  pkgdesc="Command Line Interface Creation Kit"

  install -Dm755 triangle "$pkgdir/usr/bin/triangle"

  install -Dm644 triangle.h "$pkgdir/usr/include/triangle.h"
  install -Dm644 libtriangle.so "$pkgdir/usr/lib/libtriangle.so"
  install -Dm644 "${srcdir}/README" "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
}

package_showme() {
  pkgver="1.3"
  pkgrel="3"
  url="http://www.cs.cmu.edu/~quake/showme.html"
  pkgdesc="Command Line Interface Creation Kit"
  depends=("libx11")

  install -Dm755 showme "$pkgdir/usr/bin/showme"
  install -Dm644 "${srcdir}/README" "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
}
