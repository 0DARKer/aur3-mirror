# Maintainer: Limao Luo <luolimao+AUR@gmail.com>
# Contributor: TDY <tdy@gmx.com>

pkgname=aws
pkgver=1.80
pkgrel=1
pkgdesc="A simple Perl interface to Amazon's EC2/S3/SQS/SDB/ELB services"
arch=(i686 x86_64)
url=http://timkay.com/$pkgname/
license=(custom)
install=$pkgname.install
source=($pkgname-$pkgver::https://github.com/timkay/$pkgname/raw/master/$pkgname aws{rc,secret})
sha256sums=('e344ae697114e4699b8f40f965713658ff04b3a76ba93a649f5455e87edfa301'
    '56e97b20a82310b9a00fbcbfad00552689d84d393b3a3d563112d32e16ac0735'
    '91cdafd4793fdf65eba5aaa63b84d6772b6abfdcfb047aac317b6c5fe16ede4e')
sha512sums=('6339da2c6af0952af7a3255e4abb854769287b1746a76150dc9374c3beeed34266f236858f82653202f2d3b363576f84716dcfd03ed4725674c83d8e3f4aa25a'
    '8f61aa32e63e008645cae14dcba6b05add68a389eef2010338c594e8713e82eb501bed1cdfd26f5c5c8954184a5eeba4c7167d6044ba876219f8b5550b8309f6'
    'b6bf86b2f4315924fcca269931575f78e749ab30881bf1ac97f541eec6d08c9b3ffde0c7cdd451ef08e0fd94a83714124ba7b78d7d2b8d8f52dd647d359d8ba0')

package() {
    cd "$srcdir"
    sed -n '3,17 s/#[ ]*//p' $pkgname-$pkgver > COPYING
    install -Dm755 $pkgname-$pkgver "$pkgdir"/usr/bin/$pkgname
    install -Dm644 awsrc "$pkgdir"/usr/share/$pkgname/awsrc
    install -Dm644 awssecret "$pkgdir"/usr/share/$pkgname/awssecret
    install -Dm644 COPYING "$pkgdir"/usr/share/licenses/$pkgname/COPYING

    cd "$pkgdir"/usr/bin/
    ./aws --link=short
}
