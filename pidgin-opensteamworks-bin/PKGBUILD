# Maintainer: sumt <sumt at sci dot fi>
# Contributor: onny <onny@project-insanity.org>

pkgname=pidgin-opensteamworks-bin
pkgver=1.4
pkgrel=1
pkgdesc="A plugin to connect to Steam Friends/Steam IM (purple plugin). "
url=('https://code.google.com/p/pidgin-opensteamworks')
arch=('i686' 'x86_64')
license=('GPL3')
depends=('libpurple' 'json-glib')
makedepends=('unzip')
if [ "$CARCH" = "x86_64" ]; then
  source=("http://pidgin-opensteamworks.googlecode.com/svn/trunk/steam-mobile/releases/libsteam64-$pkgver.so"
	  "https://pidgin-opensteamworks.googlecode.com/files/icons.zip")
  sha512sums=('c9e0c8a5dbdc2c4285224cd6d94003e0436e6119748b678688b54bb332524c3b7f975533a958a0e3635699a5321f45830233a690f6fb32fcc96b637808d0e1fd'
	      '823f400bb4df9c6ddb65d8a01ec182fbbadeb955bc3e9590e88773b092b0cf79e50fc6c20d9b72def7fe9f8d6e1ac7cc087fbdb3f6ed4b76c343a29f18e6ea06')
else
  source=("http://pidgin-opensteamworks.googlecode.com/svn/trunk/steam-mobile/releases/libsteam-$pkgver.so"
	  "https://pidgin-opensteamworks.googlecode.com/files/icons.zip")
  sha512sums=('cbac64795b794d64acae82dc036c4ee8f16b6c60c4aa1cc9ae8b4d7b075bdcca184cf080695a151fe4da0fbd8ffff1d4160b19a06420a642922e8b7ea2b8620a'
	      '823f400bb4df9c6ddb65d8a01ec182fbbadeb955bc3e9590e88773b092b0cf79e50fc6c20d9b72def7fe9f8d6e1ac7cc087fbdb3f6ed4b76c343a29f18e6ea06')
fi

package() {
  # installing purple plugin
  install -Dm755 libsteam*-$pkgver.so "$pkgdir/usr/lib/purple-2/libsteam.so"
  # installing icons
  mkdir -p "$pkgdir/usr/share/pixmaps/pidgin/protocols"
  unzip "icons.zip" -d "$pkgdir/usr/share/pixmaps/pidgin/protocols/"
}
