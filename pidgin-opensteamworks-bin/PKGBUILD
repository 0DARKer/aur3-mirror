# Maintainer: onny <onny@project-insanity.org>
# Contributor: onny <onny@project-insanity.org>

pkgname=pidgin-opensteamworks-bin
pkgver=1.2
pkgrel=4
pkgdesc="A plugin to connect to Steam Friends/Steam IM (purple plugin). "
url=('https://code.google.com/p/pidgin-opensteamworks')
arch=('i686' 'x86_64')
license=('GPL3')
depends=('libpurple' 'json-glib')
makedepends=('unzip')
if [ "${CARCH}" = "x86_64" ]; then
  source=('https://pidgin-opensteamworks.googlecode.com/files/libsteam64-1.2.so'
	  'https://pidgin-opensteamworks.googlecode.com/files/icons.zip')
  sha512sums=('7f8beec7260f538a29e98046ba07687c9e218f0b044877e291852e064e9025a6b4224da522d84cbe46e897556a97d8c34ebd49ba784d8150ac75718bc8e95b17'
	    '823f400bb4df9c6ddb65d8a01ec182fbbadeb955bc3e9590e88773b092b0cf79e50fc6c20d9b72def7fe9f8d6e1ac7cc087fbdb3f6ed4b76c343a29f18e6ea06')
else
  source=('https://pidgin-opensteamworks.googlecode.com/files/libsteam-1.1.so'
	  'https://pidgin-opensteamworks.googlecode.com/files/icons.zip')
  sha512sums=('e38aa789a4d85abaee0bd2834165a3a910496e4a15d34d68af4795c0ed5e66258182422c70736a6ffade7e05651ebef66ee1d6ffe2d8342f87b5c6292fd8e464'
	      '823f400bb4df9c6ddb65d8a01ec182fbbadeb955bc3e9590e88773b092b0cf79e50fc6c20d9b72def7fe9f8d6e1ac7cc087fbdb3f6ed4b76c343a29f18e6ea06')
fi

package() {
  # installing purple plugin
  install -Dm755 $srcdir/libsteam*.so "$pkgdir/usr/lib/purple-2/libsteam.so"
  # installing icons
  mkdir -p $pkgdir/usr/share/pixmaps/pidgin/protocols
  unzip $srcdir/icons.zip -d "$pkgdir/usr/share/pixmaps/pidgin/protocols/"
}
