# Maintainer: Jeremy Newton (Mystro256)
# Special Thanks to Ivan Nikolaev <voidexp@gmail.com> for assistance of PKGBUILD

pkgname=guitar-pro
pkgver=6.0.9
pkgrel=5
pkgdesc="A popular tablature editor software for guitar, bass, and many other instruments."
arch=('i686' 'x86_64')
if [[ $CARCH == "x86_64" ]]; then
  depends=('lib32-libpulse' 'lib32-libgl' 'qt' 'lib32-libxslt' 'lib32-portaudio' 'gksu' 'pulseaudio')
  makedepends=('binutils-multilib' 'tar')
else
  depends=('libpulse' 'libgl' 'qt' 'libxslt' 'portaudio' 'gksu' 'pulseaudio')
  makedepends=('binutils' 'tar')
fi
url="http://www.guitar-pro.com"
license=('Nonfree')
# Modified launcher to make sure libz.so.1 is removed after updating
source=('gp-launcher.sh' 'http://dl.dropbox.com/u/42480493/GuitarPro6Latest/gp6-full-linux-demo-r9980.deb')
md5sums=('49a6297cb1d1ed776644e3d340356d3c' 
'497305fe23b0c2be25c3a630cc1371a7')

build() {
	cd "$srcdir"
     
        ar vx gp6-full-linux-demo-r9980.deb || return 1
     
        tar xvzf data.tar.gz || return 1
}
     
package() {  
        cd "$srcdir"
     
	# A little fix
        rm -f ./opt/GuitarPro6/libz.so.1

        rm -f ./opt/GuitarPro6/gp-launcher.sh
	cp -p gp-launcher.sh ./opt/GuitarPro6/
     
        mv -v opt $pkgdir
        mv -v usr $pkgdir
}
     
