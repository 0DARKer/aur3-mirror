# This is an example PKGBUILD file. Use this as a start to creating your own,
# and remove these comments. For more information, see 'man PKGBUILD'.
# NOTE: Please fill out the license field for your package! If it is unknown,
# then please put 'unknown'.

# Maintainer: Alex Jones <alexsimonjones@gmail.com>
# Contributor: Dragan Glumac <dragan.glumac@gmail.com
pkgname=jnxlibc
pkgver=1.0.0
pkgrel=1
pkgdesc="General purpose C library with many useful components"
arch=('any')
url="http://github.com/AlexsJones/jnxlibc"
license=('GPL')
groups=('base-devel')
depends=('glibc' 'doxygen')
options=()
source=("https://github.com/AlexsJones/jnxlibc/archive/${pkgver}.tar.gz")
md5sums=('d9f49fe593c16de5b879a7b9e824bf35')
build() {
  cd $srcdir/${pkgname}-${pkgver}
  ./configure
  make
  cd test && ./run_tests
  cd ../ && doxygen
}

package() {
  cd $srcdir/${pkgname}-${pkgver}
  mkdir -p "$pkgdir/usr"
  mkdir -p "$pkgdir/usr/include/"
  mkdir -p "$pkgdir/usr/lib/"
  mkdir -p "$pkgdir/usr/share/man/man3"
  cp lib/libjnxc.so.1.0 "$pkgdir/usr/lib"
  cp -rf lib/jnxc_headers "$pkgdir/usr/include"
  ln -sf "$pkgdir/usr/lib/libjnxc.so.1.0" "$pkgdir/usr/lib/libjnxc.so"
  ln -sf "$pkgdir/usr/lib/libjnxc.so.1.0" "$pkgdir/usr/lib/libjnxc.so.1"
  cp docs/man/man3/* "$pkgdir/usr/share/man/man3/" 
}
