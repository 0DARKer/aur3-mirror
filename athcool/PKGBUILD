# Maintainer graysky <graysky AT archlnux.us>
pkgname=athcool
pkgver=0.3.12
pkgrel=4
pkgdesc="Enables powersaving mode on AMD Duron/Athlon/Athlon XP processors."
url="http://members.jcom.home.ne.jp/jacobi/linux/softwares.html#athcool"
depends=('pciutils')
license="GPL"
arch=('i686')
source=(http://members.jcom.home.ne.jp/jacobi/linux/files/$pkgname-$pkgver.tar.gz
$pkgname-$pkgver.quiet.patch
$pkgname-$pkgver.buildfix.patch
$pkgname.service)
sha256sums=('8a80654cb616064d60e6188fe6d426fe104a439930fceab865930bf1c9ffbbc9'
'77872bd1351d84776fd3dfd9130f958dc8d42a55a0b1472477bd9aadbb55cf33'
'1b52e456c534c352ce6c59f28265ceeba6baee536bbcbb25579c0763763d838f'
'a23c4749fcfa6624909ba21e2e3c10a646e331ad06de34eb66bfc0e904268a20')

build() {
	cd "$srcdir/$pkgname-$pkgver"
	patch -Np1 -i "$srcdir/$pkgname-0.3.12.quiet.patch"
	patch -Np1 -i "$srcdir/$pkgname-0.3.12.buildfix.patch"
	make
}

package() {
	cd "$srcdir/$pkgname-$pkgver"
	make DESTDIR="$pkgdir" install
	install -Dm644 "$srcdir"/$pkgname.service "$pkgdir/usr/lib/systemd/system/$pkgname.service"
}

