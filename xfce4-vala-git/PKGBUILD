# Maintainer: ponsfoot <cabezon dot hashimoto at gmail dot com>

pkgname=xfce4-vala-git
pkgver=20121027
pkgrel=1
pkgdesc="Vala bindings for the Xfce framework"
arch=('i686' 'x86_64')
license=('GPL2')
url="http://wiki.xfce.org/vala-bindings"
groups=('xfce4-goodies-git')
depends=('vala')
makedepends=('xfce4-dev-tools' 'pkgconfig' 'git')
provides=('xfce4-vala')
conflicts=('xfce4-vala')

_gitname="xfce4-vala"
_gitroot=git://git.xfce.org/bindings/xfce4-vala

build() {
    cd "${srcdir}"
    msg "Getting sources..."

    if [[ -d "$_gitname" ]] ; then
      (cd "$_gitname" ; git pull origin)
      msg "The local files are updated."
    else
      git clone $_gitroot $_gitname --depth=1
    fi

    rm -rf ${_gitname}-build 
    cp $_gitname ${_gitname}-build -r
    cd ${_gitname}-build

    msg "Starting build..."

    ./autogen.sh --prefix=/usr --sysconfdir=/etc --libexecdir=/usr/lib \
      --localstatedir=/var 
}

package() {
    cd "${srcdir}/${_gitname}-build"
    make DESTDIR="${pkgdir}" install
}
