# Maintainer:  Gordin <9ordin @t gmail>

pkgname=flow
_pkgname=git
pkgver=0.1.0
pkgrel=2
pkgdesc="A static typechecker for JavaScript"
arch=('i686' 'x86_64')
url="http://flowtype.org/"
license=('BSD')
depends=('elfutils')
makedepends=('ocaml')
source=("https://github.com/facebook/flow/archive/v${pkgver}.tar.gz")
sha256sums=('28aabd4a3b093f9bb1676a8dee9b5b4adf473071435278b543ebed4e77507a41')


build() {
  cd "$srcdir/$pkgname-$pkgver"

  make
}

check() {
  cd "$srcdir/$pkgname-$pkgver"

  make test
}

package() {
  cd "$srcdir/$pkgname-$pkgver"

  mkdir -p ${pkgdir}/usr/bin
  install -D -m755 "bin/flow" "$pkgdir"/usr/bin/flow
  mkdir -p ${pkgdir}/usr/share/licenses/flow
  cp LICENSE ${pkgdir}/usr/share/licenses/flow
  mkdir -p ${pkgdir}/usr/share/$pkgname/examples
  cp -a ./bin/examples/examples/* "$pkgdir"/usr/share/$pkgname/examples
}
