pkgname=tuxonice-userui
pkgver=1.1
pkgrel=3
pkgdesc="TuxOnIce userspace user interface"
url="http://www.tuxonice.net/"
license=("GPL")
install=tuxonice-userui.install
arch=('i686' 'x86_64')
depends=('bash' 'libmng' 'libpng' 'libjpeg' 'lcms' 'freetype2')
makedepends=('')
options=('!makeflags')
source=($pkgname-$pkgver.zip::https://github.com/NigelCunningham/Tuxonice-Userui/zipball/v1.1
    'userui-install'
    'userui-hook'
    'pm-utils-hook'
    'Makefile.diff'
)


build() {
  cd ${srcdir}/NigelCunningham-Tuxonice-Userui-6bc721b/
  patch -p1 < $srcdir/Makefile.diff
  make USE_FBSPLASH=yes
}

package () {
  cd ${srcdir}/NigelCunningham-Tuxonice-Userui-6bc721b/

  install -D -m644 $srcdir/userui-install $pkgdir/usr/lib/initcpio/install/userui
  install -D -m644 $srcdir/userui-hook $pkgdir/usr/lib/initcpio/hooks/userui
  install -D -m755 $srcdir/pm-utils-hook $pkgdir/etc/pm/sleep.d/80tuxonice-userui
  make DESTDIR=$pkgdir PREFIX=/usr install
}

md5sums=('d83beaf4d261354272e28d2847e79e68'
         'a8e8ecb03e319321713652e25bc34a98'
         '96a359994273ab0e8baa198914ef0433'
         '2f20475979c45787120f7f0b0270a523'
         'aa3ab056e74b4bb01c9f8855789c9ee7'
)
