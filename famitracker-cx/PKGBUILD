# Maintainer: Lara Maia <lara@craft.net.br>

pkgname=famitracker-cx
pkgdesc='NES/Famicom music tracker for Linux'
url='http://code.google.com/p/famitracker-cx/'
pkgrel=2
pkgver=0.4.1a_p4
arch=(x86_64 i686)
license=GPL
depends=('qt4' 'boost-libs')
provices=('famitracker')
conflicts=('famitracker')
makedepends=('cmake' 'boost' 'boost-libs')
optdepends=('jack: Jack support'
            'alsa-lib: Alsa support')
source=('http://famitracker-cx.googlecode.com/files/famitracker-cx_0.4.1a-p4_src.tar.gz')
sha1sums=('430c021c17958bd2c3b0264742e1e8dd24c6128f')

build() {
	cd $srcdir
	
	if [ -d "${pkgname}-build" ]; then
		rm -rf ${pkgname}-build/*
	else
		mkdir ${pkgname}-build
	fi
	
	cd ${pkgname}-build
	
	cmake ${srcdir}/${pkgname%%-*}    \
			-DCMAKE_BUILD_TYPE=release \
			-DCMAKE_INSTALL_PREFIX="/usr" \
			-DQT_QMAKE_EXECUTABLE=qmake4
           
   make
}

package() {
	cd "${srcdir}/${pkgname}-build"
	
	make DESTDIR="$pkgdir" install
}
