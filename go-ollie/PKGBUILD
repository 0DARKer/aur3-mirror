# Contributor: Jesse Jaara <jesse.jaara@gmail.com>
pkgname=go-ollie
pkgver=1.3
pkgrel=3
pkgdesc="Go Ollie is a platform game with beautifully rendered scenes and animations."
arch=(i686 x86_64)
url="http://www.tweeler.com/index.php?PAGE=goollie_linux"
license=('GPL3')
depends=('imagemagick' 'sdl_mixer' 'libtuxcap')
makedepends=('cmake')
source=('http://www.tweeler.com/GoOllie_1.3_src.tar.gz' 'GoOllie.desktop')
md5sums=('242d761cd9ee31cb0ba0b3d5602620f8'
         '4eaf304382561db34416712f30620de5')

build() {
  cd "$srcdir/GoOllie_1.3_src"

  sed 's|libtuxcap.so.4.0|libtuxcap.so|' -i src/CMakeLists.txt
  sed 's:/usr/share/games/goollie:/usr/share/goollie:' -i src/main.cpp

  cmake ./
  make
}

package() {
  cd "$srcdir/GoOllie_1.3_src"

  mkdir -p $pkgdir/usr/share/pixmaps
  mkdir  $pkgdir/usr/share/applications
  mkdir -p $pkgdir/usr/share/goollie
  mkdir  $pkgdir/usr/bin

  install -o root -g root -m 755 ./GoOllie $pkgdir/usr/bin/GoOllie

  cp -r ./data/* $pkgdir/usr/share/goollie/
  cp ./src/*py $pkgdir/usr/share/goollie/

  cp ../../GoOllie.desktop $pkgdir/usr/share/applications/
  cp ./data/extraResources/Logos/icon.png $pkgdir/usr/share/pixmaps/goollie.png
}
md5sums=('242d761cd9ee31cb0ba0b3d5602620f8'
         '39d95ef38fb201ccce55743e499fe30b')
