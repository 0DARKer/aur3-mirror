#!/bin/sh
## Streets of Rage Remake 5
## Linux wrapper for multi-user support.

## Where to store the session. You can customize this variable.
SORR_SESSION="$HOME/.sorr"


SORR_FOLDER="$(dirname "$(realpath "$0")")"

[ ! -d "$SORR_SESSION" ] && mkdir -p "$SORR_SESSION"
[ ! -h "$SORR_SESSION/bgdc" ] && ln -sf "$SORR_FOLDER/bgdc" "$SORR_SESSION/"
[ ! -h "$SORR_SESSION/bgdi" ] && ln -sf "$SORR_FOLDER/bgdi" "$SORR_SESSION/"
[ ! -h "$SORR_SESSION/libs" ] && ln -sf "$SORR_FOLDER/libs" "$SORR_SESSION/"
[ ! -h "$SORR_SESSION/palettes" ] && ln -sf "$SORR_FOLDER/palettes" "$SORR_SESSION/"
[ ! -h "$SORR_SESSION/SorMaker.dat" ] && ln -sf "$SORR_FOLDER/SorMaker.dat" "$SORR_SESSION/"
[ ! -h "$SORR_SESSION/SorR.dat" ] && ln -sf "$SORR_FOLDER/SorR.dat" "$SORR_SESSION/"

[ ! -d "$SORR_SESSION/mod" ] && mkdir -p "$SORR_SESSION/mod"
[ ! -d "$SORR_SESSION/mod/games" ] && mkdir -p "$SORR_SESSION/mod/games"
[ ! -h "$SORR_SESSION/mod/music" ] && ln -sf "$SORR_FOLDER/mod/music" "$SORR_SESSION/mod/"
[ ! -h "$SORR_SESSION/mod/namesong.txt" ] && ln -sf "$SORR_FOLDER/mod/namesong.txt" "$SORR_SESSION/mod/"
[ ! -h "$SORR_SESSION/mod/system.txt" ] && ln -sf "$SORR_FOLDER/mod/system.txt" "$SORR_SESSION/mod/"

(cd "$SORR_SESSION" && LD_LIBRARY_PATH=./libs ./bgdi ./SorR.dat)
