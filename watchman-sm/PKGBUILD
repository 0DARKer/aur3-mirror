# Maintainer Jack Frost <fbt@fleshless.org>

pkgname='watchman-sm'
pkgdesc='A service manager for linux written in bash'
license='BSD'
pkgver=1.6.9
pkgrel=2
arch='any'
url='https://github.com/fbt/watchman'

provides=( 'watchman-sm' )
conflicts=( 'watchman-sm' )

optdepends=( 'watchman-sm-services-git: example scripts that mostly work out of the box on arch' )

source=( "https://github.com/fbt/watchman/archive/${pkgver}.zip" )
md5sums=('b2cb3cff1834418a49799e4fc31450be')

build() {
	cd "${srcdir}/watchman-${pkgver}"
	make
}

package() {
	cd "${srcdir}/watchman-${pkgver}"
	make DESTDIR="$pkgdir" USR='/usr' install

	# a link to provide a system-wide 'service' script
	cd $pkgdir/usr/bin; ln -s watchman-service service
}
