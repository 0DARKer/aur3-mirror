# Mainteiner:     mmm 
pkgname=gpuocelot-svn
pkgver=2.1.2018
pkgrel=2
pkgdesc="Ocelot emulation allows CUDA programs to be executed on NVIDIA/AMD GPUs and x86-CPUs at full speed without recompilation"
arch=('i686' 'x86_64')
url="https://code.google.com/p/gpuocelot/"
license=('BSD')
depends=('cuda' 'boost' 'llvm-svn' 'glew')
makedepends=('gcc>=4.5' 'svn' 'scons' 'flex' 'bison' 'mesa')
provides=('gpuocelot')
source=('archlinux_build.patch')

build()
{
  cd $srcdir
  msg "Connecting to $pkgname SVN server..."
  mkdir -p $pkgname
  cd $pkgname
  if [[ -d .svn ]]; then 
	svn cleanup && svn up
  else svn checkout http://gpuocelot.googlecode.com/svn/trunk/ocelot . || return 1
  fi

  msg "SVN checkout done"
  msg "Starting make..."

#patch for issue: https://groups.google.com/forum/#!msg/gpuocelot/CmbCDkiD098/NH0eOMonFqQJ 
#patch .release_build/ocelot/ptxgrammar.hpp < $startdir/archlinux_build.patch

  python2 build.py --install -p$pkgdir
}

package()
{
echo "Not ready yet"
}
md5sums=('3b9b1ecea8ba56dc826f5bd6d68cd894')
