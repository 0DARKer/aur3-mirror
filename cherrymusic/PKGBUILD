# Maintainer: 6arms1leg <m.brnsfld {at} googlemail {d0t} com>
# Contributor: Tom Wallroth <tomwallroth {at} gmail {d0t} com>
pkgname=cherrymusic
pkgver=0.24.1
pkgrel=1
pkgdesc="A standalone HTML5 (with Flash fallback) music streaming server based on CherryPy and jPlayer."
arch=('any')
url="http://fomori.org/cherrymusic"
license=('GPL3')
depends=('python>=2.6' 'python-cherrypy>=3')
makedepends=('python')
optdepends=('python3-stagger-svn' 'lame' 'vorbis-tools' 'flac' 'faad2' 'mpg123' 'ffmpeg' 'imagemagick')
options=(!emptydirs)
install=cherrymusic.install
source=($pkgname-${pkgver//_/-}.tar.gz::https://github.com/devsnd/cherrymusic/archive/0.24.1.tar.gz)
sha512sums=('190ed826bb80df4574a475e8784eec100e1e1f69fdc67ca656be0a97c7e5a80534ffac15bd233083c573f3710118d966bbca948b9be608b5706705a8494daca8')

_mandir=/usr/share/man

package() {
  cd "$srcdir/$pkgname-${pkgver//_/-}"
  python setup.py install --root="$pkgdir/" --optimize=1
  echo -e '\033[1;32minstalling manpages...\033[0m'
  install -Dm644 doc/man/cherrymusic.1.gz "$pkgdir$_mandir/man1/cherrymusic.1.gz"
  install -Dm644 doc/man/cherrymusic.conf.5.gz "$pkgdir$_mandir/man5/cherrymusic.conf.5.gz"
  install -Dm644 doc/man/cherrymusicd.8.gz "$pkgdir$_mandir/man8/cherrymusicd.8.gz"
}

# vim:set ts=2 sw=2 et:
