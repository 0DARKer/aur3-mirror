# Maintainer: Michael Schubert <mschu.dev at gmail>
# Contributor: David Campbell <davekong@archlinux.us>

pkgname=neuron
pkgver=7.2
pkgrel=2
pkgdesc="Empirically-based simulations of neurons and networks of neurons"
arch=('i686' 'x86_64')
url="http://www.neuron.yale.edu"
license=('GPL')
depends=('interviews' 'openmpi')
optdepends=('python2-numpy' 'python2-scipy' 'mpich2')
source=("http://www.neuron.yale.edu/ftp/neuron/versions/v$pkgver/nrn-$pkgver.tar.gz" "nrn-7.2.patch")
options=('')
md5sums=('5486709b6366add932e3a6d141c4f7ad' 'd805cffa4dad4434ba3b586e1cb1e77e')

build() {
  cd "$srcdir/nrn-$pkgver"
  patch -p1 -i $srcdir/nrn-$pkgver.patch
  ./configure --prefix=/usr --bindir=/usr/bin --libdir=/usr/lib \
              --with-nrnpython=/usr/bin/python2 --with-paranrn \
	      --with-numpy
  make 
}

package() {
  cd "$srcdir/nrn-$pkgver"
  make DESTDIR="$pkgdir/" install
  cd "src/nrnpython/"
  python2 setup.py install
}
