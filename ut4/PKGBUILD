pkgname=ut4
ver=06645b9
pkgver=08092014_${ver}
pkgrel=1
pkgdesc="The new Unreal Tournament based on Unreal Engine 4. These are PRE-ALPHA Prototype Builds. Seriously. Super early testing."
arch=("x86_64")
url="https://ut.rushbase.net/raxxy/Builds"
license=('custom')
depends=()
makedepends=("unrar") #Oh come on!
options=()
logo='https://fbcdn-profile-a.akamaihd.net/hprofile-ak-xpf1/v/t1.0-1/p160x160/10314451_740393202680278_8895664656812191470_n.jpg?oh=633179b3561c096adfdd961857f1d2e1&oe=54814FDB&__gda__=1416081725_fe0895ee089114f4c6eb0777d7dd6ab7'
source=("https://ut.rushbase.net/raxxy/Builds/OldBuilds/UT-LINUX-${ver}.rar"
        "logo.jpg::$logo"
        "UnrealTournament4.desktop")
noextract=("UT-LINUX-${ver}.rar")

prepare() {
        rm -rf LinuxNoEditor
        unrar x UT-LINUX-${ver}.rar
}

build() {
        chmod 755 LinuxNoEditor/UnrealTournament/Binaries/Linux/UnrealTournament
}

#check() {
#	cd "$srcdir/$pkgname-$pkgver"
#	make -k check
#}

package() {
        install -d "$pkgdir/opt"
        cp -ra LinuxNoEditor/ "$pkgdir/opt/ut4"

        chgrp -R games "$pkgdir/opt/ut4"
        chmod -R g+rw "$pkgdir/opt/ut4/UnrealTournament/Saved" #TODO: Only make writeable what needs to be

        install -d "$pkgdir/usr/bin"
        ln -s /opt/ut4/UnrealTournament/Binaries/Linux/UnrealTournament "$pkgdir/usr/bin/UnrealTournament4"

        install -d "$pkgdir/usr/share/icons/"
        install logo.jpg "$pkgdir/usr/share/icons/UT4.jpg"

        install -d "$pkgdir/usr/share/applications/"
        install UnrealTournament4.desktop "$pkgdir/usr/share/applications/"
}

md5sums=('d8f0e00214f918bc05774206d6a87489'
         '838d82a7659349ab780589f9fcff0936'
         'dbd246fcf6a1063e4c399d7486731852')
