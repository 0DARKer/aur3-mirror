# Maintainer: Arvedui <arvedui@posteo.de>
# Contributor: haagch <haagch@studi.informatik.uni-stuttgart.de>

pkgname=ut4
ver=2376563
pkgver=${ver}
pkgrel=1
pkgdesc="PRE-ALPHA of the new Unreal Tournament based on Unreal Engine 4. Registration at the forum required. Download zip file and put it in the directory with the PKGBUILD"
arch=("x86_64")
url="https://forums.unrealtournament.com/showthread.php?12011-Unreal-Tournament-Pre-Alpha-Playable-Build"
license=('custom')
depends=()
makedepends=("unzip")
options=()
#source=("https://ut.rushbase.net/raxxy/Builds/OldBuilds/UT-LINUX-${ver}.rar"
#source=("https://ut.rushbase.net/rush/UT-LINUX-${ver}.rar"
source=("UnrealTournament-Client-XAN-${ver}-Linux.zip"
        #"logo.jpg::$logo" removing logo for now
        "UnrealTournament4.desktop")
md5sums=('8cf3e6ad7dca9005b4569a16c7230ace'
         #'838d82a7659349ab780589f9fcff0936'
         'a772d51f5a37e45e9f770daac8aaec0c')

_root=LinuxNoEditor

package() {
        install -d "$pkgdir/opt"
        cp -ra $_root "$pkgdir/opt/ut4"

        chgrp -R games "$pkgdir/opt/ut4"
        chmod -R a+rw "$pkgdir/opt/ut4/UnrealTournament/Saved"

        chmod +x "$pkgdir/opt/ut4/Engine/Binaries/Linux/UE4"

        install -d "$pkgdir/usr/bin"
        ln -s /opt/ut4/Engine/Binaries/Linux/UE4 "$pkgdir/usr/bin/UnrealTournament4"

        install -d "$pkgdir/usr/share/icons/"

        install -d "$pkgdir/usr/share/applications/"
        install UnrealTournament4.desktop "$pkgdir/usr/share/applications/"
}
