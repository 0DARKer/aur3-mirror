pkgname=ut4
ver=2276868
pkgver=${ver}
pkgrel=1
pkgdesc="PRE-ALPHA of the new Unreal Tournament based on Unreal Engine 4. Registration at the forum required. Download zip file and put it in the directory with the PKGBUILD"
arch=("x86_64")
url="https://forums.unrealtournament.com/showthread.php?12011-Unreal-Tournament-Pre-Alpha-Playable-Build"
license=('custom')
depends=()
makedepends=("unzip")
options=()
logo='https://fbcdn-profile-a.akamaihd.net/hprofile-ak-xpf1/v/t1.0-1/p160x160/10314451_740393202680278_8895664656812191470_n.jpg?oh=633179b3561c096adfdd961857f1d2e1&oe=54814FDB&__gda__=1416081725_fe0895ee089114f4c6eb0777d7dd6ab7'
#source=("https://ut.rushbase.net/raxxy/Builds/OldBuilds/UT-LINUX-${ver}.rar"
#source=("https://ut.rushbase.net/rush/UT-LINUX-${ver}.rar"
source=("UnrealTournament-Client-XAN-${ver}-Linux.zip"
        "logo.jpg::$logo"
        "UnrealTournament4.desktop")

_root=++depot+UE4-UT-CL-${ver}/LinuxNoEditor

#prepare() {
#}

build() {
        chmod 755 "$srcdir/$_root/UnrealTournament/Binaries/Linux/UnrealTournament" # come on
}

#check() {
#	cd "$srcdir/$pkgname-$pkgver"
#	make -k check
#}

package() {
        install -d "$pkgdir/opt"
        cp -ra $_root "$pkgdir/opt/ut4"

        chgrp -R games "$pkgdir/opt/ut4"
        chmod -R a+rw "$pkgdir/opt/ut4/UnrealTournament/Saved"

        install -d "$pkgdir/usr/bin"
        ln -s /opt/ut4/UnrealTournament/Binaries/Linux/UnrealTournament "$pkgdir/usr/bin/UnrealTournament4"

        install -d "$pkgdir/usr/share/icons/"
        install logo.jpg "$pkgdir/usr/share/icons/UT4.jpg"

        install -d "$pkgdir/usr/share/applications/"
        install UnrealTournament4.desktop "$pkgdir/usr/share/applications/"
}

md5sums=('7e7485b2d3123245b52bf89fdbfdadd3'
         '838d82a7659349ab780589f9fcff0936'
         'dbd246fcf6a1063e4c399d7486731852')
