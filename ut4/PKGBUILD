# Maintainer: Arvedui <arvedui@posteo.de>
# Contributor: haagch <haagch@studi.informatik.uni-stuttgart.de>

pkgname=ut4
pkgver=2394268
pkgrel=3
pkgdesc="PRE-ALPHA of the new Unreal Tournament based on Unreal Engine 4. Registration at the forum required. Download zip file and put it in the directory with the PKGBUILD"
arch=("x86_64")
url="https://forums.unrealtournament.com/showthread.php?12011-Unreal-Tournament-Pre-Alpha-Playable-Build"
DLAGENTS+=('file::/usr/bin/echo "Could not find %u. Manually download it to \"$(pwd)\", from https://forums.unrealtournament.com/showthread.php?12011-Unreal-Tournament-Pre-Alpha-Playable-Build. Registration required."; exit 1')
license=('custom')
depends=()
makedepends=("unzip")
options=()
source=("file://UnrealTournament-Client-XAN-${pkgver}-Linux.zip"
        #"logo.jpg::$logo" removing logo for now
        "UnrealTournament4.desktop"
        UnrealTournament)
md5sums=('81465c5882cbd14d37de5a012f58ca0c'
         #'838d82a7659349ab780589f9fcff0936'
         'a772d51f5a37e45e9f770daac8aaec0c'
         'efa65066895edf401d9465fc69973c51')

_root=LinuxNoEditor

package() {
        install -d "$pkgdir/opt"
        cp -ra $_root "$pkgdir/opt/ut4"

        chgrp -R games "$pkgdir/opt/ut4"
        chmod -R a+rw "$pkgdir/opt/ut4/UnrealTournament/Saved"

        chmod +x "$pkgdir/opt/ut4/Engine/Binaries/Linux/UE4"

        install -d "$pkgdir/usr/bin"
        #ln -s /opt/ut4/Engine/Binaries/Linux/UE4 "$pkgdir/usr/bin/UnrealTournament4"
        install UnrealTournament "$pkgdir/usr/bin/UnrealTournament"

        install -d "$pkgdir/usr/share/icons/"

        install -d "$pkgdir/usr/share/applications/"
        install UnrealTournament4.desktop "$pkgdir/usr/share/applications/"


}
