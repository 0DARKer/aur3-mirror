# Contributor: core <angrycore@gmail.com>
pkgname=qmmp-fooui-git
pkgver=20100614
pkgrel=1
pkgdesc="Foobar-like interface for qmmp. Git version."
arch=('i686' 'x86_64')
license=('GPL2')
url="http://gitorious.org/qmmp-fooui"
depends=('qmmp')
makedepends=('git') 
install=qmmp-fooui.install
source=('qmmp-fooui.desktop')
md5sums=('620d7c274d116ef15f805bd841492413')

_gitroot="git://gitorious.org/qmmp-fooui/qmmp-fooui.git"
_gitname="qmmp-foou"

build() {
  cd ${srcdir}
  if [[ -d $_gitname ]]; then
    cd $_gitname
    git pull || return 1
  else
    git clone $_gitroot $_gitname  && cd $_gitname || return 1
  fi

  cd ${srcdir}
  cp -r $_gitname $_gitname-build 
  cd $_gitname-build

  msg "Starting make..."
  qmake
  make
  mkdir -p ${pkgdir}/usr/bin
  cp ${srcdir}/$_gitname-build/qmmp_ui ${pkgdir}/usr/bin/qmmp-fooui
  mkdir -p ${pkgdir}/usr/share/applications/
  cp ${srcdir}/qmmp-fooui.desktop ${pkgdir}/usr/share/applications/
}
