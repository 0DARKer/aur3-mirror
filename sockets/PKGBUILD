# Contributor: pullmoll <sf@i2pmail.org>
pkgname=sockets
pkgver=2.3.9.5
pkgrel=2
pkgdesc="C++ class library wrapping the berkeley sockets C API"
arch=('i686' 'x86_64')
url="http://www.alhem.net/Sockets/"
license=('GPL')
makedepends=('make' 'gcc' 'sed>=4.2' 'patch')
depends=('gcc-libs' 'glibc' 'openssl')
source=(http://www.alhem.net/Sockets/Sockets-$pkgver.tar.gz
	openssl-1_0_0-fix.diff)
md5sums=('2a06e34affe06327a8926ed975c1e9f8'
         '797a6cb2c0bae10cd0117a617e781f32')
build() {
  cd $startdir/src/Sockets-$pkgver
  patch -Np1 -i $startdir/src/openssl-1_0_0-fix.diff 
  sed -e "s/\/\/#define ENABLE_SOCKS4/#define ENABLE_SOCKS4/g" -i sockets-config.h
  make PREFIX=/usr
}

package() {
  cd $startdir/src/Sockets-$pkgver
  make PREFIX=$startdir/pkg/usr install
}
