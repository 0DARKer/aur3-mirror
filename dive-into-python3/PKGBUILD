# Maintainer: Tianjiao Yin <ytj000@gmail.com>
pkgname=dive-into-python3
pkgver=20110917
pkgrel=1
pkgdesc="A Python book for experienced programmers."
arch=('any')
url="http://diveintopython3.org/"
license=('CCPL:cc-by-sa')
source=("http://diveintopython3.org/d/diveintopython3-html-latest.zip"
"http://gpiancastelli.altervista.org/dip3-it/d/diveintopython3-it-html-latest.zip"
"http://diveintopython3.py.cz/PonormeSeDoPythonu3-html.zip"
)
noextract=(PonormeSeDoPythonu3-html.zip)

# Chinese request svn, Spanish request latex2html and hg.
makedepends=(subversion latex2html mercurial)

build() {
  cd $srcdir

  # You can remove chinese, spanish or english as you like.
  # But don't remove czech and italian, or you will got error.

  # Czech
  mkdir -p python/cs
  cd python/cs
  bsdtar -xf ../../PonormeSeDoPythonu3-html.zip
  cd $srcdir
  rm *.zip
  # Italian
  mv *-it-* python/it
  # English
  mv diveintopython3-* python/en


  # Chinese
  cd python
  svn checkout http://openbookproject.googlecode.com/svn/trunk/DIP3_zh/ zh
  cd $srcdir

  # Spanish
  mkdir tmp
  cd tmp
  hg clone https://code.google.com/p/inmersionenpython3/ es
  cd es
  mkdir output_html
  latex2html -dir=./output_html -html_version 4.0,latin,unicode inmersionEnPython.tex
  mv output_html $srcdir/python/es
  cd $srcdir

  # No Russian
}

package() {
  cd ${pkgdir}
  mkdir -p usr/share/doc
  mv ${srcdir}/python usr/share/doc/dive-into-python3
}

md5sums=('70e9a61106af35bbe4b818fdb4b9e7a7'
         '3980326304219a4719c454edfee5326e'
         '261af30b93a379e8001c46abfda49f22')
# vim:set ts=2 sw=2 et:
