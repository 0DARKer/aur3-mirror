# Maintainer: Alexander 'hatred' Drozdov <adrozdoff@gmail.com>
pkgname=routeconverter
pkgver=2.0
pkgrel=1
pkgdesc="A free tool to edit and convert routes, tracks and waypoints."
arch=(i686 x86_64)
url="http://www.routeconverter.de/en"
license=('GPL')
depends=('java-environment=6')
optdepends=('gpsbabel: for some additional format support')
changelog=ChangeLog
source=(routeconverter
        routeconverter-cli
        http://www.routeconverter.de/download/RouteConverterCmdLine.jar)
[ "$CARCH" == "i686" ]   && source=(${source[@]} http://www.routeconverter.de/download/RouteConverterLinux.jar)
[ "$CARCH" == "x86_64" ] && source=(${source[@]} http://www.routeconverter.de/download/RouteConverterLinux64.jar)

md5sums=('54d546c2dc4052175dfbbb0ed2b66a1c'
         'fdf570309917df1c1536b7e3c7740b33'
         'eda792c206d43f9dc5fe2824bc60d195')
[ "$CARCH" == "i686" ]   && md5sums=(${md5sums[@]} '735a2ced3f62a1cadcd2a37a76888e1e')
[ "$CARCH" == "x86_64" ] && md5sums=(${md5sums[@]} 'c34059bbd32f4583ae77e1ead5eca2f4')

noextract=(RouteConverterCmdLine.jar
           RouteConverterLinux.jar
           RouteConverterLinux64.jar)

build() {
  cd "$srcdir"
}

package() {
  cd "$srcdir"

  install -m 755 -o root -g root -d ${pkgdir}/usr/bin
  install -m 755 -o root -g root -d ${pkgdir}/usr/lib/${pkgname}
  install -m 755 -o root -g root \
			${srcdir}/routeconverter \
			${srcdir}/routeconverter-cli \
			${pkgdir}/usr/bin/
  install -m 644 -o root -g root \
			${srcdir}/RouteConverterCmdLine.jar \
			${pkgdir}/usr/lib/${pkgname}/

  [ "$CARCH" == "i686" ] && \
  install -m 644 -o root -g root \
			${srcdir}/RouteConverterLinux.jar \
			${pkgdir}/usr/lib/${pkgname}/ || true

  [ "$CARCH" == "x86_64" ] && \
  install -m 644 -o root -g root \
			${srcdir}/RouteConverterLinux64.jar \
			${pkgdir}/usr/lib/${pkgname}/ || true

}

