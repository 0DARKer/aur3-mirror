# Contributor: Baptiste Grenier <baptiste@bapt.name>
pkgname=ttf-andika
pkgver=1.0
pkgrel=3
pkgdesc="A sans serif, Unicode-compliant font designed especially for literacy use"
url="http://scripts.sil.org/cms/scripts/page.php?site_id=nrsi&item_id=andika"
arch=('i686' 'x86_64')
license=('custom:OFL')
depends=('fontconfig' 'xorg-fonts-encodings' 'xorg-font-utils')
conflicts=('ttf-sil-fonts')
install=andika.install
source=('http://scripts.sil.org/cms/scripts/render_download.php?site_id=nrsi&format=file&media_id=AndikaBasicR_10&filename=AndikaBasicR_10.zip'
        'http://scripts.sil.org/cms/scripts/render_download.php?site_id=nrsi&format=file&media_id=Andika_Basic_Regular_Compact_1.0&filename=Andika_Basic_Regular_Compact_1.0.zip')
md5sums=('1a8b028ccea53e93fc4f34ca226f2b02'
         'aae5384c3cfd3d48c233e12af9d11f0b')

build() {
  mkdir -p ${srcdir}/fontfiles

  # Let's do a clean work and put all the fonts together, lowercase
  cd ${srcdir}
  find ./ -iname \*.ttf -exec cp "{}" ./fontfiles ";"
  cd ${srcdir}/fontfiles
  for fontname in * ; do
    newname=$(tr '[:upper:]' '[:lower:]' <<< ${fontname})
    if [ ! ${newname} == ${fontname} ] ; then
      mv ${fontname} ${newname}
    fi
  done

  # Font installation
  mkdir -p  ${pkgdir}/usr/share/fonts/TTF
  install -D -m644 ${srcdir}/fontfiles/*.ttf ${pkgdir}/usr/share/fonts/TTF

  install -D -m644 ${srcdir}'/AndikaBasicR_10/OFL.txt' ${pkgdir}/usr/share/licenses/${pkgname}/OFL
}

# vim:set ts=2 sw=2 et:
