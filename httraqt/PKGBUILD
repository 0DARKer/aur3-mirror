# Contributer: giacomogiorgianni@gmail.com 

pkgname=httraqt
name=HTTraQt
pkgver=1.0.4
pkgrel=1
pkgdesc="HTTraQt is the clone from WinHTTrack tool. GUI is based on Qt4 libriaries."
arch=('i686' 'x86_64')
url="http://qt-apps.org/content/show.php/HTTraQt?content=155711"
depends=('qt>=4' 'httrack>=3')
makedepends=('cmake' 'automoc4' 'gcc')
source=("http://freefr.dl.sourceforge.net/project/$pkgname/$pkgname-$pkgver.tar.gz")
#options=('!strip')
license=('GPL')
#install=${pkgname}.install
md5sums=('3cfa926bdf78e1722f9abddb7229fc0e')

build() {
  cd "${srcdir}/$pkgname-$pkgver"
  sed -i "71s|includes|include|g" CMakeLists.txt
  #cd build
  cmake -DCMAKE_INSTALL_PREFIX=/usr .
  make
}

package() {
  cd "${srcdir}/${pkgname}-$pkgver"
  #mkdir -p "${pkgdir}/usr/bin" "${pkgdir}/usr/share/applications" "${pkgdir}/usr/share/pixmaps" "${pkgdir}/usr/share/$pkgname"
  mkdir -p ${pkgdir}/usr/{bin,share/{applications,pixmaps,$pkgname}}
  install -p -m755 "$pkgname" "${pkgdir}/usr/bin/$pkgname"
  cp -r {lang,help} "${pkgdir}/usr/share/$pkgname"
  install -p -m644 "desktop/$pkgname.desktop" "${pkgdir}/usr/share/applications/"
  install -Dm644 "sources/icons/$pkgname-32.xpm"  "$pkgdir/usr/share/pixmaps/$pkgname-32.xpm"
  #make DESTDIR="$pkgdir" install
}
