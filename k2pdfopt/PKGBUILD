# Maintainer: Facundo Tuesca <facutuesca at gmail dot com>

pkgname=k2pdfopt
pkgver=2.14
pkgrel=1
pkgdesc="A tool that optimizes PDF files for viewing on mobile readers"
arch=('i686' 'x86_64')
url="http://www.willus.com/k2pdfopt/"
license=('AGPL3')
depends=('ghostscript'
	'zlib>=1.2.8'
	'libpng>=1.6.3'
	'libjpeg-turbo>=1.3.0-4')
makedepends=('cmake>=2.6')
optdepends=('djvulibre>=3.5.25.3: djvu support')
source=("http://www.willus.com/${pkgname}/src/${pkgname}_v${pkgver}_src.zip"
	"${pkgname}.patch")
md5sums=('2ecd5ded8c184bf2b008acd6e300c870'
         '73ec669236bb7b2a19aade18c1e8dd5e')

prepare() {
	cd "${srcdir}/${pkgname}_v${pkgver}"
	patch -p1 -i "${srcdir}/${pkgname}.patch"
}

build() {
	cd "${srcdir}/${pkgname}_v${pkgver}"
	cmake CMakeLists.txt
	make
}

package() {
	cd "${srcdir}/${pkgname}_v${pkgver}"
	mkdir -p "${pkgdir}/usr/bin/"
	cp ${pkgname} "${pkgdir}/usr/bin/"
}
