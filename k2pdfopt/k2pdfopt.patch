diff -aur k2pdfopt_v2.14/k2pdfoptlib/k2publish.c k2pdfopt_v2.14.new/k2pdfoptlib/k2publish.c
--- k2pdfopt_v2.14/k2pdfoptlib/k2publish.c	2013-11-16 15:48:19.000000000 -0300
+++ k2pdfopt_v2.14.new/k2pdfoptlib/k2publish.c	2014-03-20 19:27:50.603080660 -0300
@@ -37,6 +37,7 @@
 #else
     void *ocrwords;
 #endif
+    ocrwords=NULL;
 
 #ifdef HAVE_MUPDF_LIB
     if (wtcs==NULL)
@@ -51,9 +52,6 @@
         ocrwords=&_ocrwords;
         ocrwords_init(ocrwords);
         }
-    else
-#else
-    ocrwords=NULL;
 #endif
     bmp=&_bmp;
     bmp_init(bmp);
diff -aur k2pdfopt_v2.14/willuslib/array.c k2pdfopt_v2.14.new/willuslib/array.c
--- k2pdfopt_v2.14/willuslib/array.c	2012-12-21 18:58:10.000000000 -0300
+++ k2pdfopt_v2.14.new/willuslib/array.c	2014-03-20 19:31:32.343084829 -0300
@@ -1034,7 +1034,7 @@
 void arrayf_sort(float *a,int n)
 
     {
-    sort(a,(long)n);
+    willus_sort(a,(long)n);
     }
 
 
diff -aur k2pdfopt_v2.14/willuslib/dtcompress.c k2pdfopt_v2.14.new/willuslib/dtcompress.c
--- k2pdfopt_v2.14/willuslib/dtcompress.c	2013-12-31 13:41:16.000000000 -0300
+++ k2pdfopt_v2.14.new/willuslib/dtcompress.c	2014-03-20 19:31:58.110085313 -0300
@@ -21,6 +21,7 @@
 **
 */
 #include "willus.h"
+#include <string.h>
 
 /*
 ** If zlib is not available, streams are not compressed.
diff -aur k2pdfopt_v2.14/willuslib/math.c k2pdfopt_v2.14.new/willuslib/math.c
--- k2pdfopt_v2.14/willuslib/math.c	2013-08-15 21:33:50.000000000 -0300
+++ k2pdfopt_v2.14.new/willuslib/math.c	2014-03-20 19:30:49.103084016 -0300
@@ -532,7 +532,7 @@
 
 
 
-void sort(float *x,int n)
+void willus_sort(float *x,int n)
 
     {
     int top,n1;
diff -aur k2pdfopt_v2.14/willuslib/ocrjocr.c k2pdfopt_v2.14.new/willuslib/ocrjocr.c
--- k2pdfopt_v2.14/willuslib/ocrjocr.c	2012-11-12 13:09:42.000000000 -0300
+++ k2pdfopt_v2.14.new/willuslib/ocrjocr.c	2014-03-20 19:28:40.786081603 -0300
@@ -29,6 +29,8 @@
 #ifdef HAVE_GOCR_LIB
 #include <gocr.h>
 
+job_t *JOB;
+
 /*
 ** bmp8 must be grayscale
 ** (x1,y1) and (x2,y2) from top left of bitmap
@@ -66,6 +68,7 @@
     h=y2-y1+1;
     dh=h+bw*2;
     job=&_job;
+    JOB=job;
     job_init(job);
     job_init_image(job);
     // willus_mem_alloc_warn((void **)&job->src.p.p,w*h,funcname,10);
diff -aur k2pdfopt_v2.14/willuslib/string.c k2pdfopt_v2.14.new/willuslib/string.c
--- k2pdfopt_v2.14/willuslib/string.c	2013-08-18 15:09:46.000000000 -0300
+++ k2pdfopt_v2.14.new/willuslib/string.c	2014-03-20 19:30:13.152083340 -0300
@@ -81,7 +81,7 @@
 ** Returns NULL if EOF, otherwise returns pointer to the string.
 **
 */
-char *get_line(char *buf,int max,FILE *f)
+char *willus_get_line(char *buf,int max,FILE *f)
 
     {
     int     i;
diff -aur k2pdfopt_v2.14/willuslib/willus.h k2pdfopt_v2.14.new/willuslib/willus.h
--- k2pdfopt_v2.14/willuslib/willus.h	2013-12-31 13:59:25.000000000 -0300
+++ k2pdfopt_v2.14.new/willuslib/willus.h	2014-03-20 19:31:06.319084339 -0300
@@ -214,9 +214,6 @@
 ** CMAKE handles the defines, not this source
 ** (Mod from Dirk Thierbach, 31-Dec-2013)
 */
-#ifdef USE_CMAKE
-#include "config.h"
-#else /* USE_CMAKE */
 
 #ifndef HAVE_Z_LIB
 #define HAVE_Z_LIB
@@ -259,16 +256,13 @@
 ** (K2pdfopt does not need Jasper or GSL.)
 **
 */
-#ifdef HAVE_JASPER_LIB
-/* Don't have Jasper */
-#undef HAVE_JASPER_LIB
+#ifndef HAVE_JASPER_LIB
+#define HAVE_JASPER_LIB
 #endif
-#ifdef HAVE_GSL_LIB
-/* Don't have GSL */
-#undef HAVE_GSL_LIB
+#ifndef HAVE_GSL_LIB
+#define HAVE_GSL_LIB
 #endif
 
-#endif /* USE_CMAKE */
 /*
 ** Consistency check
 */
@@ -531,7 +525,7 @@
                       int *n,FILE *err);
 int    readxyz_ex    (char *filename,double **x,double **y,double **z,
                       int *n,FILE *err,int ignore_after_semicolon);
-void   sort          (float *x,int n);
+void   willus_sort          (float *x,int n);
 void   sortd         (double *x,int n);
 void   sorti         (int *x,int n);
 void   sortxy        (float *x,float *y,int n);
@@ -600,7 +594,7 @@
 /* string.c */
 void   clean_line    (char *buf);
 void   clean_line_end(char *buf);
-char  *get_line      (char *buf,int max,FILE *f);
+char  *willus_get_line      (char *buf,int max,FILE *f);
 char  *get_line_cf   (char *buf,int max,FILE *f);
 int   mem_get_line_cf(char *buf,int maxlen,char *cptr,long *cindex,long csize);
 int    in_string     (char *buffer,char *pattern);
