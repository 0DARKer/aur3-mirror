# Contributor: Nguyen Ha Duong <cmpitg@gmail.com>
# Contributor: Ngo Trung <ndtrung4419@gmail.com>
# Contributor: Dam Tien Long <longdt90@gmail.com>

pkgname="ibus-bogo"
pkgver=0.3
pkgrel=1
pkgdesc=" Bogo Engine for Ibus"

arch=('i686' 'x86_64')
url="https://github.com/BoGoEngine"
license=('GPL V3')
depends=('ibus' 'python' 'python-gobject' 'python-pyside-tools' 'libwnck3')
makedepends=('git' 'cmake' 'gcc')
provides=('ibus-bogo')
source=('non-unity.patch')
sha1sums=("f3846122619acfa5ab288d302c74177f7cdb192b")
_gitpython="https://github.com/BoGoEngine/ibus-bogo-python.git"
_gitpythonname="ibus-bogo-python"


build()  {
	
	cd ${srcdir}	
	
	if [ -d ${_gitpythonname} ] ; then
		cd ${srcdir}/${_gitpythonname} && git pull 
		msg "Local ${srcdir}/${_gitpythonname} updated" 
		
	else 
		git clone ${_gitpython} ${_gitpythonname}
		
	fi
	
	msg "Starting make..."
	        
	# Building ibus-bogo-python
	
	cd ${srcdir}/${_gitpythonname}
	
	# patch non-unity
	echo "$(pwd)"
        if [[ $(patch -Np0 < ${srcdir}/non-unity.patch) != 0 ]] ; then 
        	:
        fi
        	 
        
	if [ -d build ]; then
	cd build 
        else 
		mkdir build
		cd build
	fi
        
	cmake -DCMAKE_INSTALL_PREFIX:PATH="${pkgdir}/usr" ..
	make
	}
package() {
	cd ${srcdir}/${_gitpythonname}/build
	make install
	}
	
