# Maintainer:  Yangtse Su<yangtsesu@gmail.com>

pkgname=upeditor
pkgver=1.0
pkgrel=3
pkgdesc='unionpay security control plugin'
url='https://online.unionpay.com/'
arch=('i686' 'x86_64')
license=('unknown')
depends=('openssl')
_installer="UPEditor-$pkgver-Linux-x86-Install"
source=("https://online.unionpay.com/mer/resources/js/ocx/UPEditorLinux.tar.bz2")
md5sums=('92aead8d2bb41ae039568a023a6eb9c8')

if [ "$CARCH" = "x86_64" ]; then
  _installer="UPEditor-$pkgver-Linux-$CARCH-Install"
  source=("https://online.unionpay.com/mer/resources/js/ocx/UPEditorLinux64.tar.bz2")
  md5sums=('7e1ada3a7a41b1913df551ce14a23e18')
fi

build(){
    cd ${srcdir}
    ./"$_installer" --prefix ${srcdir}/extract/ --mode silent --temp ${srcdir}
}

package(){
    install -D -m755 ${srcdir}/extract/libnpUPEditor.so ${pkgdir}/usr/lib/mozilla/plugins/libnpUPEditor.so
}
