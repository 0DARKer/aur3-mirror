pkgname=serf
pkgver=0.6.1
pkgrel=1
pkgdesc="a C-based HTTP client library"
arch=('i686' 'x86_64')
license=('apache' 'bsd')
depends=('apr-util>=1.3.2-2')
makedepends=('apache>=2.2.9-3' 'python>=2.6-1' 'autoconf')
source=(http://serf.googlecode.com/files/$pkgname-$pkgver.tar.bz2 serf-include-before-cflags-patch.patch serf_compiler.patch)
md5sums=('14267fa2b49aa3484366e713970384a5'
	 '9c85648821f6c8787f7960b0456aebc0'
	 '5802c72dd5121806744f00f30c9f57da')

url="http://code.google.com/p/serf/"

build() {
  cd $srcdir/$pkgname-$pkgver

  patch -p0 < ../serf-include-before-cflags-patch.patch || return 1
  patch -p0 < ../serf_compiler.patch || return 1

  autoreconf || return 1
  ./configure --prefix=/usr --with-apr=/usr --with-apr-util=/usr || return 1

  make
  make DESTDIR=$pkgdir install || return 1
}
