# Maintainer: Vinicius de √Åvila jorge <vinicius.avila.jorge@gmail.com>

pkgname=('libpurple-meanwhile')
pkgver=2.7.9
pkgrel=2
arch=('i686' 'x86_64')
url="http://pidgin.im/"
license=('GPL')
pkgdesc="IM library extracted from Pidgin. Enable protocol Lotus Sametime"
depends=('farsight2' 'libsasl' 'dbus-glib' 'silc-toolkit' 'nss' 'cyrus-sasl-plugins' 'meanwhile' 'tcl' 'tk')
optdepends=('dbus-python: for purple-remote and purple-url-handler')
replaces=('libpurple')
provides=('libpurple')
source=(http://downloads.sourceforge.net/pidgin/pidgin-${pkgver}.tar.bz2)
md5sums=('9bc6cf953ed7d383b215fa8487bf8829')

build() {
    cd "${srcdir}/pidgin-${pkgver}"
    sed -i "s#env python#env python2#" */plugins/*.py
    sed -i "s#env python#env python2#" libpurple/purple-{remote,notifications-example,url-handler}
    ./configure --prefix=/usr \
                --sysconfdir=/etc \
                --disable-schemas-install \
                --disable-gnutls \
                --enable-cyrus-sasl \
                --disable-doxygen \
                --enable-nm \
            		--with-python=/usr/bin/python2 \
                --with-system-ssl-certs=/etc/ssl/certs
    make -C libpurple
}
package() {
    cd "${srcdir}/pidgin-${pkgver}"
    make -C libpurple DESTDIR=${pkgdir} install
}
