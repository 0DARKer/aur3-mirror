# Maintainer: Eric Hansen <ehansen at securityfor dot us>
pkgname=sinfo
pkgver=0.0.43
pkgrel=1
pkgdesc="A monitoring tool for networked computers."
url="http://www.ant.uni-bremen.de/whomes/rinas/sinfo/"
source=(http://www.ant.uni-bremen.de/whomes/rinas/sinfo/download/${pkgname}-${pkgver}.tar.gz)
license=('GPL')
arch=('any')
depends=('boost' 'ncurses' 'asio')
md5sums=('f5d8e2e2eaa2dc07030793a303d815c0')
groups=()
optdepends=()
provides=()
makedepends=()
conflicts=()
replaces=()
backup=()
options=()
install=
changelog=
noextract=()

build() {
	# sinfo requires boost_signals-mt (multithreaded), which doesn't exist in Arch...
	if [ ! -f "/usr/lib/libboost_signals-mt.a" ];
	then
		msg "!! libboost_signals-mt does not exist...fixing!"
		ln -s /usr/lib/libboost_signals.a /usr/lib/libboost_signals-mt.a
	else
		msg "signals does exist."
	fi

	cd "${srcdir}/${pkgname}-${pkgver}"
	LDFLAGS=
	./configure --prefix=/usr --with-ncurses
	make
}

package() {
	cd "$srcdir/$pkgname-$pkgver"
	make DESTDIR="$pkgdir/" install
}
