# Maintainer: Jaroslav Lichtblau <dragonlord@aur.archlinux.org>
# Contributor: Arnaud Durand-Favreau <biginoz at FREE point FR>

pkgname=mkgmap
pkgver=r1894
pkgrel=1
pkgdesc="Utility for making maps for Garmin GPS devices"
arch=('any')
url="http://www.mkgmap.org.uk/index.html"
license=('GPL')
depends=('java-runtime')
source=( http://www.mkgmap.org.uk/snapshots/$pkgname-$pkgver.tar.gz)
sha256sums=('e5b4da55a8397aaba1cb6779573eb8f56f23f61d5f127173ccec0ee75ca8f2f9')
    
package() {
  cd ${srcdir}/$pkgname-$pkgver

  install -D -m644 mkgmap.jar ${pkgdir}/usr/share/java/$pkgname/$pkgname.jar
  install -D -m644 doc/$pkgname.1 ${pkgdir}/usr/share/man/man1/$pkgname.1

#executable file
  install -d ${pkgdir}/usr/bin
  echo "#!/bin/sh" > ${pkgdir}/usr/bin/$pkgname
  echo CLASSPATH="/usr/share/java/mkgmap/mkgmap.jar" >> ${pkgdir}/usr/bin/$pkgname
  echo java -jar \"\${CLASSPATH}\" \"\$@\" >> ${pkgdir}/usr/bin/$pkgname
  chmod 755 ${pkgdir}/usr/bin/$pkgname
}
