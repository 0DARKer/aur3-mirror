# Maintainer: Jaroslav Lichtblau <dragonlord@aur.archlinux.org>
# Contributor: Arnaud Durand-Favreau <biginoz at FREE point FR>

pkgname=mkgmap
pkgver=r1871
pkgrel=1
pkgdesc="Utility for making maps for Garmin GPS devices"
arch=('any')
url="http://www.mkgmap.org.uk/index.html"
license=('GPL')
depends=('java-runtime')
source=( http://www.mkgmap.org.uk/snapshots/$pkgname-${pkgver}.tar.gz)
sha256sums=('6bbfd60f0e6464f4ca2803e4327e417906ee52e8ba3107669845965999da8a65')
    
package() {
  cd ${srcdir}/$pkgname-$pkgver

  install -D -m644 mkgmap.jar ${pkgdir}/usr/share/java/$pkgname/$pkgname.jar
  install -D -m644 doc/$pkgname.1 ${pkgdir}/usr/share/man/man1/$pkgname.1

#executable file
  install -d ${pkgdir}/usr/bin
  echo "#!/bin/sh" > ${pkgdir}/usr/bin/$pkgname
  echo CLASSPATH="/usr/share/java/mkgmap/mkgmap.jar" >> ${pkgdir}/usr/bin/$pkgname
  echo java -jar \"\${CLASSPATH}\" \"\$@\" >> ${pkgdir}/usr/bin/$pkgname
  chmod 755 ${pkgdir}/usr/bin/$pkgname
}
