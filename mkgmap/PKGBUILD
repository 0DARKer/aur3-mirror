# Maintainer: Jaroslav Lichtblau <dragonlord@aur.archlinux.org>
# Contributor: Arnaud Durand-Favreau <biginoz at FREE point FR>

pkgname=mkgmap
pkgver=r2540
pkgrel=1
pkgdesc="Utility for making maps for Garmin GPS devices"
arch=('any')
url="http://www.mkgmap.org.uk/index.html"
license=('GPL')
depends=('java-runtime')
source=(http://www.mkgmap.org.uk/snapshots/$pkgname-$pkgver.tar.gz)
sha256sums=('7fb029b98558cfb5d9a17e659f3cf2f6bab5705beb5707ad637f2f54b3519cba')
    
package() {
  cd ${srcdir}/$pkgname-$pkgver

  install -D -m644 mkgmap.jar ${pkgdir}/usr/share/java/$pkgname/$pkgname.jar
  install -D -m644 doc/$pkgname.1 ${pkgdir}/usr/share/man/man1/$pkgname.1

#executable file
  install -d ${pkgdir}/usr/bin
  echo "#!/bin/sh" > ${pkgdir}/usr/bin/$pkgname
  echo CLASSPATH="/usr/share/java/mkgmap/mkgmap.jar" >> ${pkgdir}/usr/bin/$pkgname
  echo java -jar \"\${CLASSPATH}\" \"\$@\" >> ${pkgdir}/usr/bin/$pkgname
  chmod 755 ${pkgdir}/usr/bin/$pkgname
}
