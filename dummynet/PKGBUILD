 # Contributor: gamanakis

pkgname=dummynet
pkgver=20130607
pkgrel=2
pkgdesc="A live network emulation tool, originally designed for testing networking protocols, and since then used for a variety of applications including bandwidth management."
arch=('i686' 'x86_64')
license=('GPL')
makedepends=('linux-headers')
depends=('linux')
install=dummynet.install
source=('http://info.iet.unipi.it/~luigi/doc/20130607-ipfw3.tgz'
	'3.14.patch')
md5sums=('004e65e6d545a89c4dcc3e741e287444'
         'c88294cd59521da7fc4c4385ba2c8343')
url="http://info.iet.unipi.it/~luigi/dummynet/"

build() {
  cd $srcdir/ipfw3-2012
  patch -p1 < $srcdir/3.14.patch
  make
}

package() {
 cd $srcdir/ipfw3-2012/ipfw
 install -Dm755 ipfw $pkgdir/usr/bin/ipfw
 cd $srcdir/ipfw3-2012/kipfw-mod
 install -Dm755 ipfw_mod.ko $pkgdir/usr/lib/modules/`uname -r`/extramodules/ipfw_mod.ko
}

