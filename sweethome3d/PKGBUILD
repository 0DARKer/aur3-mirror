# Maintainer:  Biginoz <biginoz at free.fr>
# Contributor : Tdy  <tdy@gmx.com>
pkgname=sweethome3d
pkgver=3.5
pkgrel=4
pkgdesc="An interior design application"
arch=('i686' 'x86_64')
_arch=x64
url="http://www.sweethome3d.eu/"
license=('GPL')
depends=('java-runtime' 'libgl')
[[ $CARCH = i686 ]] && optdepends=('java3d: for 3d modeling') && _arch=x86
source=(http://downloads.sourceforge.net/$pkgname/SweetHome3D-$pkgver-linux-$_arch.tgz
        $pkgname.desktop $pkgname.png sweethome3d)

md5sums=('c5b00448fbcc7cc4572b86430fc5a6bb'
         '9f9e75883dbc5ca7ed14d6e6b1a0f72a'
         '4fa1604285c1d8c474e3a914b6a4e6ce'
'1de0b3afedec48ba2fe2b7039cc7e480')


[[ $CARCH = x86_64 ]] && md5sums[0]='c2e36e365de6b6896213808fc2ed9c46'
package() {
  cd "$srcdir"
  install -d SweetHome3D-$pkgver  "$pkgdir/usr/share/java/$pkgname"
  cd SweetHome3D-$pkgver
  cp -r * "$pkgdir/usr/share/java/$pkgname"
  install -Dm644 ../$pkgname.png "$pkgdir/usr/share/pixmaps/$pkgname.png"
  install -Dm644 ../$pkgname.desktop \
    "$pkgdir/usr/share/applications/$pkgname.desktop"
  install -Dm755 ../sweethome3d "$pkgdir/usr/bin/sweethome3d"

# remove useless old version java
  rm -rf $pkgdir/usr/share/java/sweethome3d/jre1.6.0_32
  sed -i -e 's:PROGRAM_DIR"/jre1.6.0_32:JAVA_HOME":g' \
  $pkgdir/usr/share/java/sweethome3d/SweetHome3D
}
