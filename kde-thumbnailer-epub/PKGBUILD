# Maintainer: Limao Luo <luolimao+AUR@gmail.com>
# Contributor: Faheem Pervez <trippin1@gmail.com>

pkgname=kde-thumbnailer-epub
pkgver=0.3.1
pkgrel=1
pkgdesc="Thumbnailer to show ePub cover previews in KDE file managers (Dolphin and Konqueror)"
arch=(i686 x86_64)
url=http://kde-apps.org/content/show.php/KDE+ePub+Thumbnailer?content=151210
license=('GPL')
depends=(ebook-tools kdebase-workspace)
makedepends=(automoc4 cmake kdelibs)
source=(http://kde-apps.org/CONTENT/content-files/151210-$pkgname-$pkgver.tar.gz)
sha256sums=('3c6b3bc3e9dc7b5abbe83cc3e97fcfaa050ae91fece1e8c6b7a95c97dbc44bd8')
sha512sums=('ea72b00131e88e0874f5fbeaab25bac067d93ebcd797a06965712985672986b62756de53903e0ed85144c9c889516089e481efbe7cf8d5a8ba5cd906fdbade11')

build() {
    install -d build/
    cd build/
    cmake ../$pkgname-$pkgver/ \
        -DCMAKE_INSTALL_PREFIX=$(kde4-config --prefix) \
        -DCMAKE_BUILD_TYPE=Release \
        -DQT_QMAKE_EXECUTABLE=qmake-qt4
    make
}

package() {
    make -C build DESTDIR="$pkgdir" install
}
