# Maintainer: Michael Schubert <mschu.dev at gmail>
# Contributor: Anton Bazhenov <anton.bazhenov at gmail>
# Contributor: Ricardo Honorato <rikardo.horo@gmail.com>

pkgname=taverna
pkgver=2.2.0
pkgrel=1
pkgdesc=('Taverna is a tool for designing and executing workflows')
arch=('any')
url=('http://www.taverna.org.uk/')
license=('LGPL')
depends=('java-runtime' 'graphviz')
source=(http://launchpad.net/$pkgname/t2/$pkgver/+download/$pkgname-workbench-$pkgver.tar.gz)
md5sums=('760a6f0a030902c44c9e164bd7d022f3')

build() {
  cd $srcdir/$pkgname-workbench-$pkgver
  install -m755 -d $pkgdir/opt/taverna
  cp -r ./* $pkgdir/opt/taverna/
  # set permissions
  find $pkgdir/opt/taverna -type d -exec chmod 755 {} +
  find $pkgdir/opt/taverna -type f -exec chmod 644 {} +
  chmod go+w $pkgdir/opt/taverna/repository
  chmod go+w $pkgdir/opt/taverna/conf/*.{properties,xml}
  chmod a+x $pkgdir/opt/taverna/*.sh
  # install launcher, desktop file and icon
  mkdir -p $pkgdir/usr/bin
  ln -s /opt/taverna/taverna.sh $pkgdir/usr/bin/taverna
#  install -Dm755 $pkgname.sh "$pkgdir"/usr/bin/$pkgname
##  install -Dm644 ../$pkgname.desktop "$pkgdir"/usr/share/applications/$pkgname.desktop
##  install -Dm644 ../$pkgname.png "$pkgdir"/usr/share/pixmaps/$pkgname.png
}
