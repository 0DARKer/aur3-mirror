# Maintainer: Michael Schubert <mschu.dev at gmail>
# Contributor: Anton Bazhenov <anton.bazhenov at gmail>
# Contributor: Ricardo Honorato <rikardo.horo@gmail.com>

pkgname=taverna
pkgver=2.4.0
pkgrel=1
pkgdesc='A tool for designing and executing workflows'
arch=('any')
url=('http://www.taverna.org.uk/')
license=('LGPL')
depends=('java-runtime' 'graphviz')
optdepends=('r')
source=("http://launchpad.net/taverna/t2/$pkgver/+download/taverna-workbench-$pkgver.tar.gz")
noextract=("taverna-workbench-$pkgver.tar.gz")
md5sums=('a9aa2d9d5992e42a726da38f52c1844c')

package() {
    mkdir -p "$pkgdir/"{opt/taverna,usr/bin}
    tar -C "$pkgdir/opt/taverna" \
        -xzvf taverna-workbench-$pkgver.tar.gz --strip-components 1

    find "$pkgdir" -type d -exec chmod 755 {} +
    find "$pkgdir" -type f -exec chmod 644 {} +
    chmod a+x "$pkgdir"/opt/taverna/*.sh

    ln -s /opt/taverna/taverna.sh "$pkgdir/usr/bin/taverna"
    ln -s /opt/taverna/executeworkflow.sh "$pkgdir/usr/bin/executeworkflow"
}
