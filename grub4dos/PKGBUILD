# Maintainer:  Daniel YC Lin <dlin.tw (at) gmail.com>
# Contributor: Daniel YC Lin <dlin.tw (at) gmail.com>

# I've tried to build from source, but it failed in my x86_64 machine.
# So, this script only grab binary from exist zip format file.

pkgname=grub4dos
pkgver=0.4.6a_20130521
_pkgver=0.4.6a
_pkgdate=2013-05-21
pkgrel=1
#pkgver=${_pkgver}_${_pkgdate//-/}  # this method will failed on aur webpage

# the following line will let aur php page failed
#_pkgver=${pkgver/_*}  # right trim of _...
#_date=${pkgver/*_} # left trim of ..._
#_pkgdate=${_date:0:4}-${_date:4:2}-${_date:6:2}

pkgdesc="A GRUB boot loader support menu on windows(fat,ntfs)/linux(ext2,3,4)"
arch=(x86 x86_64) # both are same content
options=(!strip)
# namcap known warning
# grub4dos E: ELF file ('usr/sbin/bootlace.com') found in an 'any' package.
# grub4dos W: File (grub) exists in a non-standard directory.

url="http://code.google.com/p/grub4dos-chenall"
license=('GPL2')
backup=(etc/grub4dos.conf grub/menu.lst)
install=grub4dos.install
#  http://grubutils.googlecode.com/files/unifont-2011-05-10.zip
#  http://grub4dos-chenall.googlecode.com/files/arialuni_U16.zip
source=(
  http://grub4dos-chenall.googlecode.com/files/$pkgname-$_pkgver-$_pkgdate.7z
  http://grub4dos-chenall.googlecode.com/files/unifont.hex.gz
  README_arch.txt
  grub4dos.conf
  menu.lst
  )
#noextract=( http://grub4dos-chenall.googlecode.com/files/unifont.hex.gz )
noextract=(unifont.hex.gz)

package() {
  cd $srcdir/$pkgname-$_pkgver

  mkdir -p $pkgdir/{usr/bin,etc,grub,usr/share/doc/$pkgname}
  cp bootlace.com $pkgdir/usr/bin
  #cp bootlace64.com $pkgdir/usr/bin  # it can not run
  cp grldr grub.exe sample/default $pkgdir/grub
  cp docs/* $pkgdir/usr/share/doc/$pkgname
  cp $srcdir/grub4dos.conf $pkgdir/etc
  for n in menu.lst unifont.hex.gz ; do
    cp $srcdir/$n $pkgdir/grub
  done
  cp $srcdir/README_arch.txt $pkgdir/usr/share/doc/$pkgname
}

md5sums=('e9c95df32d95f85854ca3e88e363f3c0'
         '9afd47aaf5bcc56ab733facdc0ef30db'
         'a890e86d3583663219f6a57102c16982'
         '283a3e55667f7ce0d6333106b333376d'
         '37460192150d1908622a9b771452692c')
# vim:set ts=2 sw=2 et:
