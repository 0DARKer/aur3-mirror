# Contributor: Markus M. May <mmay@javafreedom.org>
# Contributor: Niel Drummond <niel.drummond@grumpytoad.org>
# Maintainer: Alexsandr Pavlov <kidoz at mail dot ru>
pkgname=rails
pkgver=2.3.12
_rack_pkgver=1.1.0
pkgrel=1
pkgdesc="Is an open source web application framework for the Ruby programming language."
arch=(any)
url="http://www.rubyonrails.org/"
license=('MIT')
depends=('ruby' 'ruby-sqlite3')
provides=('ruby-rack=1.1.0' 'ruby-activeresource=2.3.11' 'ruby-actionmailer=2.3.11' 'ruby-actionpack=2.3.11'
			'ruby-activerecord=2.3.11' 'ruby-activesupport=2.3.11' 'ruby-rails=2.3.11')
conflicts=('ruby-rack' 'ruby-rack110' 'ruby-rack1xx' 'ruby-rails' 'ruby-rails-aio' 'ruby-rails2xx' 'ruby-rails2xx-aio')
source=(http://gems.rubyforge.org/gems/activeresource-$pkgver.gem
		http://gems.rubyforge.org/gems/actionmailer-$pkgver.gem
		http://gems.rubyforge.org/gems/actionpack-$pkgver.gem
		http://gems.rubyforge.org/gems/activerecord-$pkgver.gem
		http://gems.rubyforge.org/gems/activesupport-$pkgver.gem
		http://gems.rubyforge.org/gems/rack-$_rack_pkgver.gem
		http://gems.rubyforge.org/gems/rails-$pkgver.gem
		)

noextract=(activeresource-$pkgver.gem
			actionmailer-$pkgver.gem
			actionpack-$pkgver.gem
			activerecord-$pkgver.gem
			activesupport-$pkgver.gem
			rack-$_rack_pkgver.gem
			rails-$pkgver.gem
			)

md5sums=('2fb92a2469523700b5cc334531cd097b'
		'a4e1aa9aace56f4e3602293aced6cfc2'
		'b1e21b3391f062712156f79a57dea6fd'
		'3c1914e3090c3bc4103876ff69f7d02f'
		'f8bea1dae5bad9accf8be4fbb639d0c9'
		'f5ff2d6d348f41bb3833847223f792ce'
		'55fe9cdabe6a750e2633dc060fe40cff')

_gem_list=(activeresource-$pkgver
			actionmailer-$pkgver
			actionpack-$pkgver
			activerecord-$pkgver
			activesupport-$pkgver
			rack-$_rack_pkgver
			rails-$pkgver)

build() {
cd $srcdir
local _gemdir="$(ruby -rubygems -e'puts Gem.default_dir')"
for _gem_name in ${_gem_list[*]}
do gem install --ignore-dependencies -i "$pkgdir$_gemdir" -n "$pkgdir/usr/bin" $_gem_name.gem
done
}
