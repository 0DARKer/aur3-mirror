# Maintainer: XZS <d.f.fischer at web dot de>
pkgname=firefox-extension-hide-tab-bar-with-one-tab
pkgver=1.3
pkgrel=1
pkgdesc='Hide the tab bar if there is only one tab.'
url='http://forums.mozillazine.org/viewtopic.php?f=48&t=2141579'
arch=('any')
license=('MPLv2')
depends=('firefox')
source=("https://addons.mozilla.org/firefox/downloads/file/249890/hide_tab_bar_with_one_tab-${pkgver}-fx.xpi")
md5sums=('a2cd58a005b8b36351ef7a7ad8ad026c')

build() {
  cd "$srcdir"
  [[ -d $pkgname-extract ]] || mkdir $pkgname-extract
  unzip -q -d $pkgname-extract hide_tab_bar_with_one_tab-$pkgver-fx.xpi
}

package() {
  cd "$srcdir/$pkgname-extract"
  local emid=$(sed -n '/.*<em:id>\(.*\)<\/em:id>.*/{s//\1/p;q}' install.rdf)
  local dstdir=$pkgdir/usr/lib/firefox/browser/extensions/$emid
  install -d $dstdir
  mv * $dstdir
}
