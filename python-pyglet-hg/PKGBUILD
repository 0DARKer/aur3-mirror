# Maintainer: Allen Li <darkfeline@abagofapples.com>
pkgname=python-pyglet-hg
pkgver=1.2alpha1.2774.f8da1dcafc85
pkgrel=2
pkgdesc="A cross-platform windowing and multimedia library for Python 3."
arch=(any)
url="http://pyglet.org"
license=('BSD')
depends=('python')
optdepends=('avbin: for compressed audio/video')
makedepends=('python-distribute' 'mercurial')
conflicts=('python-pyglet')
provides=('python-pyglet')
source=("pyglet::hg+https://pyglet.googlecode.com/hg")
md5sums=("SKIP")

pkgver() {
  cd "$srcdir/repo"
  printf "r%s.%s" "$(hg identify -n)" "$(hg identify -i)"
}

build() {
  cd $srcdir/pyglet
  python setup.py build
}

package() {
  cd $srcdir/pyglet
  python setup.py install --root=$pkgdir --optimize=1
  mkdir -p $pkgdir/usr/share/licenses/$pkgname
  cp $srcdir/pyglet/LICENSE $pkgdir/usr/share/licenses/$pkgname
}
