# Maintainer: Laszlo Papp <djszapi @ gmail at com>
# Maintainer: Piotr Rogo≈ºa <rogoza dot piotr at gmail at com>

pkgname=vim-drawit
pkgver=10
_scriptid=8798
pkgrel=2
pkgdesc="Ascii drawing plugin: lines, ellipses, arrows, fills, and more!"
arch=('any')
url="http://www.vim.org/scripts/script.php?script_id=40"
license=('custom:vim')
depends=('vim-runtime' 'vim-cecutil')
groups=('vim-plugins')
install='vimdoc.install'
source=(${pkgname}.vba.gz::http://www.vim.org/scripts/download_script.php?src_id=${_scriptid}
        license.txt)

build() {
   cd $srcdir
   _vimdir='/usr/share/vim/vimfiles'
   install -d ${pkgdir}${_vimdir}/{doc,plugin,autoload}
   vim -c "UseVimball $srcdir" -c "q" ${pkgname}.vba

   tar -c ./ --exclude ${pkgname}.vba.gz | tar -x -C ${pkgdir}${_vimdir} || return 1
   install -Dm644 ${srcdir}/license.txt ${pkgdir}/usr/share/licenses/${pkgname}/license.txt || return 1
   rm -f ${pkgdir}${_vimdir}/.VimballRecord
   rm -f ${pkgdir}${_vimdir}/doc/tags 
   rm -f ${pkgdir}${_vimdir}/license.txt
   rm -f ${pkgdir}${_vimdir}/${pkgname}.vba
   # conflict with vim-manpageview
   rm -f ${pkgdir}${_vimdir}/plugin/cecutil.vim

}
md5sums=('95268486ce8c2a48054fc9ae57f8cae3'
         'efbd5986e691ce8c876fb86e8f5961ea')
