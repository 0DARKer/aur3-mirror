# Maintainer: Michael Schubert <mschu.dev at gmail>
# Contributor: moostik <mooostik_at_gmail.com>
# Contributor: mick elliot <micke@sfu.ca>
pkgname=emboss
_pkgname=EMBOSS
pkgver=6.4.0
pkgrel=1
pkgdesc="A collection of molecular biology applications"
arch=('x86_64' 'i686')
url="http://emboss.sourceforge.net/"
depends=('gd' 'libx11' 'pcre' 'java-runtime' 'libmysqlclient' 'postgresql-libs')
options=('!libtool')
license=('GPL2')
source=("ftp://emboss.open-bio.org/pub/EMBOSS/${_pkgname}-$pkgver.tar.gz")
md5sums=('54993a22064222b01bd4fc8086f7684d')

build() {
  cd "${srcdir}/${_pkgname}-$pkgver"
  CFLAGS="${CFLAGS} -I${JAVA_HOME}/include"
  ./configure --prefix=/usr --enable-large --with-x \
	--with-javaos="${JAVA_HOME}/include/linux"
  make
  find . -name "Makefile" | xargs sed -i "s:/usr/bin/install:/bin/install:"
}

package() {
  cd "${srcdir}/${_pkgname}-$pkgver"
  make prefix="${pkgdir}/usr" install
  rm -f "${pkgdir}/usr/include/{pcre,pcreposix}.h"
}
