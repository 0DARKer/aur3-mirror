# Contributor: Mario Danic <mario.danic>
# Contributor: Kambus

pkgname=bzr-fastimport
pkgver=0.10.0
pkgrel=2
pkgdesc="Bazaar Fast Import is a plugin providing fast loading of revision control data into Bazaar."
arch=(i686 x86_64)
url="https://launchpad.net/${pkgname}"
license=('GNU GPL v2' 'MIT')
groups=(bzr)
depends=('python2' 'setuptools' 'bzr' 'python2-fastimport-bzr')
makedepends=('bzr')
source=(http://launchpad.net/${pkgname}/trunk/${pkgver}/+download/${pkgname}-${pkgver}.tar.gz)

md5sums=('ed9dba180cd73e5fc312bc75c30a56d1')

build() {
  cd ${srcdir}/${pkgname}-${pkgver}

#   for _file in $(grep '#!/usr/bin/.*python' -r . | cut -d: -f1); do
#     sed -i 's/python/python2/' "$_file"
#   done
  sed -i "s/actual_args = \['python', /actual_args = \['python2', /" ./exporters/__init__.py

  python2 setup.py install --prefix'=/usr' --root=$pkgdir || return 1
}
