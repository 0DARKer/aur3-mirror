# Maintainer: Laszlo Papp <djszapi2 at gmail com>
pkgname=libftd2xx
pkgver=0.4.16
pkgrel=5
pkgdesc="Library that allows a direct access to a USB FTDI2XX chip based device"
arch=('i686' 'x86_64')
url="http://www.ftdichip.com/"
license=('GPL')
if [ "$CARCH" = "x86_64" ]; then
	depends=('lib32-glibc')
else
	depends=('glibc')
fi
options=(!strip)
source=(http://www.ftdichip.com/Drivers/D2XX/Linux/${pkgname}${pkgver}.tar.gz
        55-ft2232.rules)
md5sums=('5168ec5672aa10d005fc14a27678b4cc'
         '94115ee386fb14e363e01eec3fb32060')

build() {
  cd ${srcdir}/${pkgname}${pkgver}
  install -d ${pkgdir}/usr/{lib,include}
  install -d ${pkgdir}/etc/udev/rules.d
  install -Dm755 ${pkgname}.so.${pkgver} ${pkgdir}/usr/lib/${pkgname}.so
  ln -sf /usr/lib/${pkgname}.so ${pkgdir}/usr/lib/${pkgname}.so.${pkgver}
  install -Dm644 static_lib/${pkgname}.a.${pkgver} ${pkgdir}/usr/lib/${pkgname}.a
  ln -sf /usr/lib/${pkgname}.a ${pkgdir}/usr/lib/${pkgname}.a.${pkgver}
  install -m644 {ftd2xx,WinTypes}.h ${pkgdir}/usr/include/
  install -D -m755 ${srcdir}/55-ft2232.rules ${pkgdir}/etc/udev/rules.d/55-ft2232.rules
}
