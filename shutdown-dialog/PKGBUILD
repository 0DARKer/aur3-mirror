# Maintainer: doorknob60 <doorknob60 at gmail dot com>

pkgname=shutdown-dialog
pkgver=0.1.2
pkgrel=5
pkgdesc="A simple shutdown dialog programmed in python that allows you to logout, shutdown, and restart your computer from a GTK dialog. This is useful for people who use Openbox or other WMs besides Gnome and KDE. Now includes patch for suspend and hibernate support."
arch=(i686 x86_64)
url="http://www.penguindevelopment.org/index.php?title=Release:shutdown-dialog"
install=${pkgname}.install
license=('gpl')
groups=('system')
depends=('python2' 'pygtk' 'gksu')
optdepends=('pm-utils: suspend and hibernate support')
source=(http://proj.penguindevelopment.org/shutdown-dialog/shutdown-dialog-${pkgver}.tar.gz http://proj.penguindevelopment.org/shutdown-dialog/shutdown-dialog-${pkgver}-pm.patch gksudobug.patch)
md5sums=('3aa5aa315afbdf63c12b9b64eea27fb4'
         'dc286982acda0f40c2fcd22befd9878b'
         '4cb78424b4fc132e2f5871d7395062c4')

build() {
cd shutdown-dialog-$pkgver
# Fixes a bug where sometimes gksudo doesn't work, but gksu does, makes it use gksu instead
patch shutdown-dialog.py $srcdir/gksudobug.patch
# Comment the following line if you don't want suspend and hibernate support
patch shutdown-dialog.py $srcdir/shutdown-dialog-${pkgver}-pm.patch
# Because of the "Great Python Update"
sed -i 's/\#\!\/usr\/bin\/env python/\#\!\/usr\/bin\/env python2/' shutdown-dialog.py
install -d $pkgdir/usr/bin
install -D shutdown-dialog.py $pkgdir/usr/bin/
}
