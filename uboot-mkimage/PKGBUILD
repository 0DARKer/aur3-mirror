# Contributor: Philipp Schrader <philipp.schrader+arch@gmail.com>
pkgname=uboot-mkimage
pkgver=1.3.2
pkgrel=1
pkgdesc="U-Boot mkimage utility, which encapsulates a compressed uImage Linux kerel image with header information, CRC32 checksum, etc, for use with the U-Boot bootloader"
arch=('i686' 'x86_64')
url="http://www.denx.de/wiki/U-Boot/WebHome"
license=('GPL2' 'custom')
source=(ftp://ftp.denx.de/pub/u-boot/u-boot-${pkgver}.tar.bz2)

build() {
  cd "$srcdir/u-boot-${pkgver}/tools"

  # Remove unnecessary include lines from the Makefile
  sed -i 226d Makefile
  sed -i 109d Makefile

  # Build everything (Replace some default values that were originally
  # defined in the lines removed above)
  make CC=gcc SRCTREE=../ STRIP=strip mkimage || return 1

  # Since there's no install target, create our own method
  install -d "$pkgdir/usr/bin"
  install -m 755 -t "$pkgdir/usr/bin" mkimage
}

md5sums=('78b1c2722d3907b5fae2cd219dbaf927')

