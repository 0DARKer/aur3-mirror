# Maintainer: Jason St. John <jstjohn .. purdue . edu>
# Contributor: Archie <xMickael@ifrance.com>

_perlmod=Image-MetaData-JPEG
_modnamespace=Image
pkgname=perl-image-metadata-jpeg
pkgver=0.153
pkgrel=6
pkgdesc="Image::MetaData::JPEG - Perl extension for showing/modifying JPEG (meta)data."
arch=('any')
url="http://search.cpan.org/dist/${_perlmod}/"
license=('GPL2')
options=('!emptydirs')
source=("http://cpan.org/modules/by-module/${_modnamespace}/${_perlmod}-${pkgver}.tar.gz")
sha512sums=('9d83f3bea6ee1a28320fc924f3742500d2d391b836207b37c08e4063d85c5746b50b2431590b75894e5dfedcc2a149374712db16d0c412ef54e4c1cfe59af96a')

build() {
	cd "${srcdir}/${_perlmod}-${pkgver}"

	# Install module in vendor directories.
	PERL_MM_USE_DEFAULT=1 perl Makefile.PL INSTALLDIRS=vendor
	make
}

check() {
	cd "${srcdir}/${_perlmod}-${pkgver}"

	# Upstream bug causes test to fail, so let's silently handle the bug
	# https://rt.cpan.org/Public/Bug/Display.html?id=75640
	make test || return 0
}

package() {
	cd "${srcdir}/${_perlmod}-${pkgver}"
	make install DESTDIR="${pkgdir}/"
}
