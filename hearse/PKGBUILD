# Maintainer: Daenyth <Daenyth+Arch AT gmail DOT com>
# Contributor: Callan Barrett <wizzomafizzo@gmail.com>

pkgname=hearse
pkgver=1.5
pkgrel=3
pkgdesc="Nethack online bones file exchanger"
arch=('i686' 'x86_64')
url="http://hearse.krollmark.com/"
license=('GPL')
depends=('perl' 'perl-libwww')
source=(http://www.argon.org/~roderick/hearse/dist/hearse-$pkgver.tar.gz)
install=hearse.install
md5sums=('4c022342d3f75af3b70a3e07e8e82ee0')

build() {
  cd $srcdir/hearse-$pkgver

  perl ./Makefile.PL
  make DESTDIR=$pkgdir install

  sed -e '/my $Run_as_user/ s/games/root/' \
      -e '/my $Run_as_group/ s/games/root/' \
      -i $pkgdir/usr/bin/perlbin/site/hearse

  install -m644 -D $srcdir/hearse-$pkgver/hearse.conf \
                   $pkgdir/etc/nethack/hearse.conf
  
  sed -e 's|# bones-dir.*|bones-dir /usr/share/nethack|' \
      -i $pkgdir/etc/nethack/hearse.conf

  # Probably need to watch out for this...
  # This is future self, wtf are you talking about?
  rm -rf $pkgdir/usr/lib
}
