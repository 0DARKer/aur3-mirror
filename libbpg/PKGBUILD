# Maintainer: Johan PONIN <johan.ponin.pro at gmail dot com>
# Contributor: Alexander F RÃ¸dseth <xyproto@archlinux.org>

pkgname=libbpg
pkgver=0.9.2
pkgrel=2
pkgdesc='BPG Image Encoder and Decoder'
arch=('x86_64' 'i686')
url='http://bellard.org/bpg/'
license=('BSD' 'LGPL')
depends=('libpng' 'libjpeg-turbo')
optdepents=('x265 : optional external encoder')
source=("$url$pkgname-$pkgver.tar.gz" "enable-x265.patch")
options=('staticlibs')
sha256sums=('3a8e6e5738410857e2ed29f18f75d0c583666a48ea50ebae1c08bfc6fc9839e6'
         '27adbfbd6b40e11373e5661d20011445a2e928e82078e0c69b11ea3cebb5e189')

prepare () {
  cd $srcdir/$pkgname-$pkgver
  patch -p1 Makefile -i ../../enable-x265.patch 
}

build() {
  make -C "$pkgname-$pkgver"
}

package() {
  cd "$pkgname-$pkgver"
  install -Dm755 bpgdec "$pkgdir/usr/bin/bpgdec"
  install -Dm755 bpgenc "$pkgdir/usr/bin/bpgenc"
  install -Dm644 libbpg.a "$pkgdir/usr/lib/libbpg.a"
}

# vim:set ts=2 sw=2 et:
