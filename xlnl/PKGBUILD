# Maintainer: kusakata <shohei atmark kusakata period com>

pkgname=xlnl
pkgver=3.4.19
pkgrel=2
pkgdesc='Labyrinths & Legends - A Rogue-like Fantasy RPG (graphical version)'
arch=('i686' 'x86_64')
url="http://lnl.sourceforge.jp/en/"
license=('GPL')
depends=('gtk2' 'gpm' 'ncurses' 'sdl_mixer')
install=xlnl.install
source=("http://iij.dl.sourceforge.jp/lnl/50527/xlnl-${pkgver}.tar.gz" "http://iij.dl.sourceforge.jp/lnl/50529/xlnl-graph-${pkgver}-light.tar.gz" "xlnl.desktop")

build() {
	cd "${srcdir}/xlnl-${pkgver}"
	./configure --prefix=/usr
	cd "${srcdir}/xlnl-${pkgver}/src"
	sed -i 's/\-lSDL\ \-lSDL\_mixer/\-lSDL\ \-lX11\ \-lSDL\_mixer/g' Makefile
	cd "${srcdir}/xlnl-${pkgver}"
	make
}

package() {
	cd "${srcdir}/xlnl-${pkgver}"
	make DESTDIR="$pkgdir" install
	cd "${srcdir}"
	install -dm644 "$pkgdir/usr/share/${pkgname}"
	cp -r .lnl "$pkgdir/usr/share/${pkgname}"
	install -Dm644 xlnl.desktop "${pkgdir}/usr/share/applications/xlnl.desktop"
}

md5sums=('a76149313f0e92b01b9aa3ca567c95e1'
         '0bb58db54d97561eee08cb20debe573d'
         'bc8c61d2c809c0ad2d52fab4355b3c09')
