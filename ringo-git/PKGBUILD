 
# Maintainer: Jens Staal <staal1978@gmail.com>

pkgname=ringo-git
pkgver=20120718
pkgrel=1
pkgdesc="A runtime environment that runs Mac Applications on Linux"
arch=('i686' 'x86_64')
url="http://gitorious.org/ringo"
license=('BSD')
depends=('opencflite-svn' 'gnustep-gui' 'gnustep-make' 'gnustep-base')
makedepends=('clang' 'git')
options=(!strip)

_gitroot=('git://gitorious.org/ringo/ringo.git')
_gitname=('ringo')

build() {
 cd $srcdir

msg "getting ringo sources"
   if [ -d $_gitname ] ; then
    cd $_gitname && git pull $_gitroot
    msg "The local files are updated."
  else
    git clone $_gitroot $_gitname
  fi
  

msg "setting up build directory"
  rm -rf $srcdir/build #starting fresh
  cp -ar $srcdir/$_gitname $srcdir/build
  cd $srcdir/build
  msg2 "building ringo core libraries"
  ./configure
  make all
  
  #future: building iTerm (hence gnustep dependencies)
}

package() {
 cd $srcdir/build/build
 msg "packaging ringo core libraries"
 mkdir -p $pkgdir/usr/lib
 install -m0755 libmach.so $pkgdir/usr/lib/
 cp -ar System $pkgdir/usr/lib/
 
 #future: packaging iTerm and other applications
}
