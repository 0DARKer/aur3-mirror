# Contributor: Blaž Tomažič <blaz.tomazic@gmail.com>
pkgname=python-orange
pkgver=20110514 #$(date +"%Y%m%d")
pkgver_download=2011-05-14 #$(date +"%Y-%m-%d")
pkgrel=1
pkgdesc="Open source data visualization and analysis for novice and experts. Data mining through visual programming or Python scripting."
arch=('i686' 'x86_64')
url="http://www.ailab.si/orange"
license=('GPL')
depends=('python2' 'python2-numpy' 'python-numarray' 'python-numeric' 'python2-matplotlib')
optdepends=('pyqwt: GUI support' 'python-networkx')
source=("http://www.ailab.si/orange/download/orange-source-snapshot-$pkgver_download.zip")
md5sums=('dc08e8b83e7e2b6cfa2614338cbd6627')

_extract_dir="Orange-2.0.0b"

build() {
  cd "${srcdir}/${_extract_dir}"
  python2 setup.py build || return 1
}

package() {
  cd "${srcdir}/${_extract_dir}"
  python2 setup.py install --root="${pkgdir}" || return 1
  
  sed -i -e "s|#![ ]*/usr/bin/python$|#!/usr/bin/python2|" \
         -e "s|#![ ]*/usr/bin/env python$|#!/usr/bin/env python2|" \
         -e "s|#![ ]*/bin/env python$|#!/usr/bin/env python2|" \
             $(find ${pkgdir} -name '*.py')
}

# vim:set ts=2 sw=2 et:
