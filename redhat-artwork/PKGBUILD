# Contributor: Nazarov Pavel <genocid@rambler.ru>
pkgname=redhat-artwork
pkgver=13
pkgrel=1
pkgdesc="Artwork for Red Hat default look-and-feel (themes, icons) from Fedora"
arch=('i686' 'x86_64')
url="http://www.redhat.com"
license=('GPL')
depends=('gtk-bluecurve-engine')
makedepends=('rpmextract')
optdepends=('gdm: for gdm themes')
_rhlink=http://archives.fedoraproject.org/pub/archive/fedora/linux/releases/$pkgver/Everything/source/SRPMS/
source=($_rhlink/bluecurve-classic-metacity-theme-1.0.0-1.fc8.src.rpm \
	$_rhlink/bluecurve-gdm-theme-1.0.0-1.fc8.src.rpm \
	$_rhlink/bluecurve-gtk-themes-1.0.0-2.fc9.src.rpm \
	$_rhlink/bluecurve-icon-theme-8.0.2-2.fc10.src.rpm \
	$_rhlink/bluecurve-metacity-theme-1.0.0-1.fc8.src.rpm \
	$_rhlink/fedora-icon-theme-1.0.0-4.fc10.src.rpm \
	$_rhlink/fedorabubbles-gdm-theme-1.0.0-1.fc8.src.rpm \
	$_rhlink/fedoradna-gdm-theme-1.0.0-1.fc8.src.rpm \
	$_rhlink/fedoraflyinghigh-gdm-theme-1.0.0-1.fc8.src.rpm \
	$_rhlink/fedorainfinity-gdm-theme-8.0.1-1.fc8.src.rpm)
md5sums=('d3a0b2afb33de5bfc25fb825c122939d'
	'1b3b7719f0c988c0ab17aa3f001fb6c9'
	'4831b9336bcafb80a5b82643b86aa899'
	'c3c91a5ab0d4b18f4e19ba7d2d3064a6'
	'138379bdc3fed3ded991c018e6ae155c'
	'ad277f9e35153f9a596caff7ea6d03ba'
	'28d7cf7bb5caf6ea043c68b7e42e4cc4'
	'e55409f5a8db15afcbb6c72cb43f25b8'
	'a66da02b3491514b6ef0f30ceb5cef1a'
	'd5beb8e60310fa01873f2381178d1881')

build() {
    cd $srcdir
    mkdir ./archives
    cd ./archives
    
    # extracting rpm's
    for x in ../*.rpm; do
        rpmextract.sh $x
    done
    # extracting archives
    for x in ./*.tar.bz2; do
        tar -xvjf $x
    done
    rm -r ./*.tar.bz2
    rm -r ./*.spec

    # installing themes
    for x in ./*/; do
        cd $x
        ./configure --prefix=/usr
        cd ./theme
        make install DESTDIR=$pkgdir || return 1
        cd ../../
    done
    
    # cleaning
    rm -rf ./*/
}
