# Contributor: M0Rf30
pkgname=xplico
pkgver=0.7.0
pkgrel=1
arch=(i686 x86_64)
pkgdesc="Internet Traffic Decoder. Network Forensic Analysis Tool (NFAT)"
url="http://www.xplico.org/"
license=('GPL')
depends=('libpcap' 'sqlite3' 'sox' 'lame' 'perl' 'apache' 'php' 'php-sqlite' 'php-apache' 'php-pear' 'perl' 'libnet' 'recode' 
'videosnarf' 'python-httplib2')
optdepends=('ghostpdl: reconstruct document printed with network printer'
	    'videosnarf: decode VoIP based on RTP')
source=(http://downloads.sourceforge.net/xplico/$pkgname-$pkgver.tgz
xplico.conf)
install=xplico.install

build() {

    cd $srcdir/$pkgname-$pkgver

    msg "Updating the GeoLite City database..."
    wget -N http://geolite.maxmind.com/download/geoip/database/GeoLiteCity.dat.gz
    if [ -f GeoLiteCity.dat.gz ]; then gunzip GeoLiteCity.dat.gz; fi
    make -j1
    make DESTDIR=$pkgdir install    
    install -Dp $srcdir/$pkgname.conf $pkgdir/etc/httpd/conf/extra/httpd-$pkgname.conf
}

md5sums=('0d27690e2fd8516be2441393831f4026'
         '87f36288b4b0f455727fb7bf62077e67')
