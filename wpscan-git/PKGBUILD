# Maintainer: Evan Teitelman <teitelmanevan@gmail.com>

pkgname=wpscan-git
_pkgname=wpscan
pkgver=184
pkgrel=2
pkgdesc='A vulnerability scanner which checks the security of WordPress installations using a black box approach'
arch=('i686' 'x86_64')
url="http://code.google.com/p/wpscan/"
license=('GPL3')
makedepends=('subversion' 'rubygems')
source=("git+https://github.com/wpscanteam/wpscan")
md5sums=('SKIP')

package() {
  cd "$srcdir/$_pkgname"

  # Base directories.
  install -dm755 "$pkgdir/usr/bin"
  install -dm755 "$pkgdir/usr/share/wpscan"

  cp --no-preserve=ownership -r * "$pkgdir/usr/share/wpscan"

  # Joint script.
  cat > "$pkgdir/usr/bin/wpscan" <<EOF
#!/bin/sh
cd /usr/share/wpscan
ruby ./wpscan.rb "\$@"
EOF

  chmod +x "$pkgdir/usr/bin/wpscan"
}
