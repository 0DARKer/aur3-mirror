# Contributor: totoloco <totoloco at gmail dot com>
pkgname=flam3-svn
pkgver=875
pkgrel=1
pkgdesc="Fractal Flames are algorithmically generated images and animations"
arch=("i686" "x86_64")
url="http://flam3.com/"
license=('GPLv2')
depends=('expat' 'libjpeg' 'libpng')
makedepends=('subversion')
conflicts=('electricsheep<2.7' 'flam3')
provides=('flam3')

source=()
md5sums=()

_svntrunk="https://flam3.svn.sf.net/svnroot/flam3/trunk/src/"
_svnmod="flam3"

build() {
  msg "Starting SVN checkout..."
  cd $srcdir

  if [ -d $_svnmod/.svn ]; then
    (cd $_svnmod && svn up)
  else
    svn co $_svntrunk $_svnmod
  fi

  msg "SVN checkout done or server timeout"
  msg "Starting make..."  

  cd $srcdir/$_svnmod
  aclocal
  automake
  ./configure --prefix=/usr || return 1
  if [ ! -d m4 ]; then
    libtoolize --copy --force
  fi
  make || return 1
  make install DESTDIR=$pkgdir || return 1
}
