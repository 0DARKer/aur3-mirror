_pkgbasename=zziplib
pkgname=lib32-$_pkgbasename
pkgver=0.13.60
pkgrel=2
pkgdesc="A lightweight library that offers the ability to easily extract data from files archived in a single zip file (32 bit)"
arch=('x86_64')
url="http://zziplib.sourceforge.net"
license=('LGPL' 'MPL')
depends=('lib32-zlib' "$_pkgbasename")
makedepends=('python2' 'gcc-multilib')
options=('!libtool')
source=("http://downloads.sourceforge.net/${_pkgbasename}/${_pkgbasename}-${pkgver}.tar.bz2"
	'zziplib-0.13.60-ldflags.patch')
md5sums=('54a6aa53262483a4d54f7c59f0a7258b'
         'e585052f884525a338ca341b5d2957dc')

build() {
	cd ${srcdir}/${_pkgbasename}-${pkgver}

	patch -p1 -i ../zziplib-0.13.60-ldflags.patch

	./configure --prefix=/usr --libdir=/usr/lib32 \
			CC='gcc -m32' PYTHON='/usr/bin/python2'
	make
}

package() {
	cd ${srcdir}/${_pkgbasename}-${pkgver}
	make DESTDIR=${pkgdir} install
	rm -rf ${pkgdir}/usr/{bin,include,share}
}
