# Contributor: 3ED <krzysztof1987__at__gmail__dot__com>

pkgname=pydefrag-bzr
pkgver=121
pkgrel=1
pkgdesc="The defragmenter is written using a simple combination of filefrag (a readily available fragmentation checker for Linux) and atomic copy. Inspired by Gentoo's fragcheck.pl and Con Kolivas's defrag script. (pfbh branch)"
arch=('i686' 'x86_64')
url="https://code.launchpad.net/~brywilharris/pyfragtools/pfbh"
license=('GPL')
depends=('python')

_bzrtrunk='lp:~brywilharris/pyfragtools/pfbh'
_bzrmod='pydefrag'

build() {
  cd "${srcdir}"

  msg "Connecting to the server...."
  if [ ! -d "${srcdir}/${_bzrmod}" ]; then
    bzr co ${_bzrtrunk} ${_bzrmod} -r ${pkgver}
  else
    bzr up ${_bzrmod} -r ${pkgver}
  fi
  msg "BZR checkout done or server timeout"
}
package() {
  cd "${srcdir}/${_bzrmod}" || return 1
  install -d "${pkgdir}/usr/sbin" || return 1
  DESTDIR="${pkgdir}" make install || return 1
}
