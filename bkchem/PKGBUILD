# Maintainer: Xyne
# Contributor: Michal Bozon <michal.bozon__at__gmail.com>
pkgname=bkchem
pkgver=0.13.0
pkgrel=2
pkgdesc="Chemical drawing program"
arch=('i686' 'x86_64')
url="http://bkchem.zirael.org"
license=('GPL')
depends=('python2' 'tcl' 'tk')
source=(http://bkchem.zirael.org/download/$pkgname-$pkgver.tar.gz
        bkchem.install
        bkchem.desktop)
install=bkchem.install
optdepends=("pycairo: alternative PNG/PDF export"
            "stdinchi: standard InChI generation"
            "cinchi: InChI generation")

build() {
  cd "$srcdir/$pkgname-$pkgver"
  # Update for Python2
  find . -name 'setup.py' -exec sed -i 's@#! /usr/bin/python@#!/usr/bin/env python2@' {} \;

  python2 setup.py install --prefix=/usr   \
                          --root="$pkgdir"  \
                          --strip="$pkgdir"

  # Update for Python2
  sed -i 's@^python @python2 @' "$pkgdir/usr/bin/bkchem"

  install -Dm644 "$srcdir/$pkgname.desktop" \
          "$pkgdir/usr/share/applications/$pkgname.desktop"

}

md5sums=('41c55059794399526f4f6fc74af556bb'
         '113d090d44195e65da28b6e9a27b9de6'
         '9d58ab2448effa22b33f96c38656df27')
