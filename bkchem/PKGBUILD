# Maintainer: Xyne
# Contributor: Michal Bozon <michal.bozon__at__gmail.com>
pkgname=bkchem
pkgver=0.14.0_pre2
pkgver_=0.14.0-pre2
pkgrel=1
pkgdesc="Chemical drawing program"
arch=('i686' 'x86_64')
url="http://bkchem.zirael.org"
license=('GPL')
depends=('python2' 'tcl' 'tk')
source=(http://bkchem.zirael.org/download/$pkgname-$pkgver_.tar.gz
        bkchem.install
        bkchem.desktop)
install=bkchem.install
optdepends=("pycairo: alternative PNG/PDF export"
            "stdinchi: standard InChI generation"
            "cinchi: InChI generation")

build() {
  cd "$srcdir/$pkgname-$pkgver_"
  # Update for Python2
  find . -name 'setup.py' -exec sed -i 's@#! /usr/bin/python@#!/usr/bin/env python2@' {} \;

  python2 setup.py install --prefix=/usr   \
                          --root="$pkgdir"  \
                          --strip="$pkgdir"

  # Update for Python2
  sed -i 's@^python @python2 @' "$pkgdir/usr/bin/bkchem"

  install -Dm644 "$srcdir/$pkgname.desktop" \
          "$pkgdir/usr/share/applications/$pkgname.desktop"

}

md5sums=('e2a2ec2e4625acdefce1ad6eb2433291'
         'bf3ffb20a6abf2e2d4047d974a38bd67'
         '9d58ab2448effa22b33f96c38656df27')
