# Contributor: Heine Pedersen <heinep at gmail dot com>

_realname=WebGUI-Linux
_pkgver=2.1
_pkgrelmajor=12
_pkgrelminor=0419

pkgname=hptwebgui
pkgver=${_pkgver}.${_pkgrelmajor}${_pkgrelminor}
pkgrel=1

pkgdesc="WebGUI for HighPoint RocketRaid 2xxx/3xxx/4xxx RAID Controllers"
arch=('x86_64')
url="http://www.highpoint-tech.com"
license=('custom')
makedepends=('rpmextract')
provides=('hptwebgui')
conflicts=('hpt-cli')
install=hptwebgui.install
source=(http://www.highpoint-tech.cn/BIOS_Driver/GUI/linux/WebGui/${_realname}-v${_pkgver}-${_pkgrelmajor}${_pkgrelminor}.tgz
	hptwebgui.service)

if [[ $CARCH == 'i686' ]]; then
	md5sums=('43f698ae131ae0b1cdb45167a35e0436'
        	 'f44af0b640742dfcc08574d61da56744')
elif [[ $CARCH == 'x86_64' ]]; then
	md5sums=('f36fd76f58cb53eeea01b7ed063e05b1'
        	 'f44af0b640742dfcc08574d61da56744')
fi

build() {
	rpmextract.sh "${srcdir}"/hptsvr-https-${_pkgver}-${_pkgrelmajor}.${_pkgrelminor}.${arch}.rpm
	install -m755 -d "${pkgdir}/usr/bin"
	install -m755 -d "${pkgdir}/usr/share/hpt"
	install -m755 -d "${pkgdir}/usr/lib/systemd/system"
	install -m755 "${srcdir}/usr/bin/hptsvr" "${pkgdir}/usr/bin/"
	install -m644 "${srcdir}/hptwebgui.service" "${pkgdir}/usr/lib/systemd/system/"
	cp -R "${srcdir}/usr/share/hpt/"* "${pkgdir}/usr/share/hpt"
}
