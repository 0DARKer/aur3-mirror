# Contributor: Antonio Orefice <xt7player@gmail.com>
pkgname=xt7-player
pkgver=0.9.299
pkgrel=1
pkgdesc="Aims to be an 'almost complete' but usable mplayer gui"
arch=('i686' 'x86_64')
url="http://xt7player.altervista.org"
license=('GPL')
depends=('gambas2-runtime>=2.21.0-1' 'gambas2-gb-qt>=2.21.0-1' 'gambas2-gb-form>=2.21.0-1' 'gambas2-gb-desktop>=2.21.0-1' 'gambas2-gb-form-mdi>=2.21.0-1' 'gambas2-gb-net>=2.21.0-1' 'gambas2-gb-net-curl>=2.21.0-1' 'gambas2-gb-settings>=2.21.0-1' 'gambas2-gb-web>=2.21.0-1' 'gambas2-gb-xml>=2.21.0-1')
optdepends=('mplayer-svn: to use some additional features like adaptor selection')
makedepends=('gambas2-devel>=2.21.0-1')
provides=()
conflicts=()
replaces=()
backup=()
options=()
install=
source=(http://wpage.unina.it/aorefice/xt7player_dist/xt7-player-src-$pkgver.tar.gz)
noextract=()
# md5sums=() #generate with 'makepkg -g'
md5sums=('89b1733e0c2862bd0bc1d5058a3e72f2')

build() {
  cd "$srcdir/xt7-player-$pkgver"

  ./configure --prefix=/usr
  make || return 1
  make DESTDIR="$pkgdir/" install


#Installing docs and changelog
	mkdir -p $pkgdir/usr/share/doc/xt7-player-$pkgver/
	cp $srcdir/xt7-player-$pkgver/ChangeLog $pkgdir/usr/share/doc/xt7-player-$pkgver/
	cp $srcdir/xt7-player-$pkgver/README $pkgdir/usr/share/doc/xt7-player-$pkgver/
	bzip2 $pkgdir/usr/share/doc/xt7-player-$pkgver/ChangeLog
	bzip2 $pkgdir/usr/share/doc/xt7-player-$pkgver/README
#Installing pixmap
	mkdir -p $pkgdir/usr/share/pixmaps
	cp $srcdir/xt7-player-$pkgver/xt7-player/xt7-player.png $pkgdir/usr/share/pixmaps/xt7-player.png
#installing desktop item
	mkdir -p $pkgdir/usr/share/applications
	cd $pkgdir/usr/share/applications/
	echo "[Desktop Entry]" >xt7-player.desktop
	echo "Name=xt7-player" >>xt7-player.desktop
	echo "Comment=Yet another gui for mplayer" >>xt7-player.desktop
	echo "Exec=/usr/bin/xt7-player.gambas" >>xt7-player.desktop
	echo "Icon=/usr/share/pixmaps/xt7-player.png" >>xt7-player.desktop
	echo "Terminal=false" >>xt7-player.desktop
	echo "Type=Application" >>xt7-player.desktop
	echo "StartupNotify=true" >>xt7-player.desktop
	echo "Categories=Application;AudioVideo;Audio;Video;Player;" >>xt7-player.desktop
	echo "MimeType=application/ogg;application/x-ogg;application/sdp;application/smil;application/x-smil;application/streamingmedia;application/x-streamingmedia;application/vnd.rn-realmedia;application/vnd.rn-realmedia-vbr;audio/aac;audio/x-aac;audio/m4a;audio/x-m4a;audio/mp1;audio/x-mp1;audio/mp2;audio/x-mp2;audio/mp3;audio/x-mp3;audio/mpeg;audio/x-mpeg;audio/mpegurl;audio/x-mpegurl;audio/mpg;audio/x-mpg;audio/rn-mpeg;audio/scpls;audio/x-scpls;audio/vnd.rn-realaudio;audio/wav;audio/x-pn-windows-pcm;audio/x-realaudio;audio/x-pn-realaudio;audio/x-ms-wma;audio/x-pls;audio/x-wav;video/mpeg;video/x-mpeg;video/x-mpeg2;video/msvideo;video/x-msvideo;video/quicktime;video/vnd.rn-realvideo;video/x-ms-afs;video/x-ms-asf;video/x-ms-wmv;video/x-ms-wmx;video/x-ms-wvxvideo;video/x-avi;video/x-fli;video/x-theora;video/x-matroska;video/x-flv" >>xt7-player.desktop
  }
# vim:set ts=2 sw=2 et:
