# Maintainer: Hubert Grzeskowiak <arch (at) nemesis13 dot de>

pkgname=panda3d
pkgver=1.7.0
pkgrel=2
pkgdesc="A 3D game engine with Python bindings. SDK package."
arch=('any')
url="http://www.panda3d.org"
license=('BSD')
depends=('python' 'xorg-server' 'atk' 'freetype2' 'openssl' 'libpng' 'libjpeg' 'ffmpeg' 'libtiff' 'tinyxml' 'nvidia-cg-toolkit' 'ode' 'fmodex' 'libsquish' 'gtk2')

#-----------------------------------------------------------------------------
#
# You can safely remove some of the above dependencies if you're sure you won't
# need the features.
#
# WARNING: All make-time dependencies are also expected to be installed
#          afterwards at run-time. This is why it's useless to post-install
#          dependencies and why you can break your panda installation by
#          uninstalling those afterwards.
#          
#-----------------------------------------------------------------------------
# DEPENDENCY: FEATURE
#
# python: needed for building script and python bindings
# xorg-server: basic display stuff. required
# tinyxml: required
# openssl: 
# freetype2: font rendering
# libpng, libjpeg, libtiff: image libs
# libsquish: DXT file support
# ffmpeg: general audio and video
# nvidia-cg-toolkit: shader system
# ode: Open Dynamics Engine - physics
# openal: OpenAL audio
# fmodex: FMod audio
# gtk: PStats analysis and debugging tool
# atk: part of gtk? no idea really
#-----------------------------------------------------------------------------
source=("http://www.panda3d.org/download/panda3d-$pkgver/panda3d-$pkgver.tar.gz")
md5sums=('3b67dc79c1ca20dddabce4800615a360')

build() {
  #mkdir -p $pkgdir/opt/panda3d
  cd $srcdir/$pkgname-$pkgver
  python makepanda/makepanda.py --everything || return 1
  python makepanda/installpanda.py --destdir=$pkgdir || return 1
  install -D $srcdir/$pkgname-$pkgver/doc/LICENSE $pkgdir/usr/share/licenses/$pkgname/LICENSE
}
