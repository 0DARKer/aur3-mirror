# Contributor: lolilolicon <lolilolicon{at}gmail{dot}com>

pkgname=ffcast
pkgver=20091128
pkgrel=1
pkgdesc="bash script that takes screencast of given window/screen area using ffmpeg/xwininfo/xrectsel"
arch=('i686' 'x86_64')
url="http://github.com/lolilolicon/ffcast"
license=('GPL v3')
makedepends=('git')
depends=('bash>=3.2' 'ffmpeg>=0.5' 'x264>=20090416' 'xorg-utils' 'bc')
source=()
md5sums=()

_gitroot="git://github.com/lolilolicon/ffcast.git"
_gitname=master

build() {
  msg "Connecting to GIT server..."
  if [ -d "$srcdir/$pkgname" ]; then
    cd "$srcdir/$pkgname" && git pull origin $_gitname || return 1
  else
    git clone "$_gitroot" "$srcdir/$pkgname" || return 1
    cd "$srcdir/$pkgname" && git checkout $_gitname || return 1
  fi

  msg "GIT checkout done or server timeout"
  msg "Starting make..."

  rm -rf "$srcdir/$pkgname-build"
  git clone "$srcdir/$pkgname" "$srcdir/$pkgname-build"
  cd "$srcdir/$pkgname-build"

  make || return 1
  make PREFIX=/usr DESTDIR="$pkgdir" install || return 1
}

# vim:set ts=2 sw=2 et:
