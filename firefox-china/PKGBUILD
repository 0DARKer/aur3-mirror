# Contributor: Cheese Lee <cheeselee@126.com>

pkgname=firefox-china
pkgver=2009.1
_ffver=3.0
pkgrel=3
pkgdesc="Standalone web browser from mozillaonline.com modified for Chinese users"
url="http://g-fox.cn/index.html"
license=('MPL' 'GPL2' 'LGPL2')
arch=(i686)
provides=('firefox=3.0.8')
conflicts=('firefox' 'firefox-i18n')
install="bin32-firefox.install"
depends=('sqlite3' 'nss' 'libxt' 'gtk2' 'desktop-file-utils')
source=(FirefoxChinaEdition${pkgver}.tar.bz2::http://dl1.g-fox.cn/chinaedition/releases/zh-CN/FirefoxChinaEdition%20${pkgver}.tar.bz2
  firefox.desktop
  firefox-safe.desktop)
md5sums=('ff20934228daa3e78ad74f2602abe4c5'
         '382af5816b1cc9eb09a485c1b0d9e6b6'
	 '5e68cabfcf3c021806b326f664ac505e')

build() {
  install -d $startdir/pkg/usr/lib/firefox-${_ffver} $startdir/pkg/usr/bin/
  cp -a $startdir/src/firefox/* $startdir/pkg/usr/lib/firefox-${_ffver}
  ln -s /usr/lib/firefox-${_ffver}/firefox $startdir/pkg/usr/bin/firefox

  install -d ${startdir}/pkg/usr/share/applications/ ${startdir}/pkg/usr/share/pixmaps/
  install -m644 ${startdir}/src/firefox.desktop ${startdir}/pkg/usr/share/applications/
  install -m644 ${startdir}/src/firefox-safe.desktop ${startdir}/pkg/usr/share/applications/
  install -m644 ${startdir}/src/firefox/icons/mozicon128.png ${startdir}/pkg/usr/share/pixmaps/firefox.png
}
