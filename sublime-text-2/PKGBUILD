# Maintainer: Bartosz Chmura <chmurli at gmail dot com>

pkgname=sublime-text-2
pkgver=v2051
_pkgver=2051
pkgrel=3
pkgdesc="sophisticated text editor for code, html and prose"
arch=('any')
url="http://www.sublimetext.com/2"
license=('custom')
depends=(libpng12)
install=$pkgname.install
source=(http://www.sublimetext.com/Sublime%20Text%202%20Build%20${_pkgver}.tar.bz2
	http://www.sublimetext.com/Sublime%20Text%202%20Build%20${_pkgver}%20x64.tar.bz2
	sublime-text-2.desktop
	sublime-text-2-icon.png)
md5sums=('85e5a3f84d9b9aab8ebd82385b27cda4'
	'74f90ba015d3e1164ff341fa998e2934'
	'a45ed73fe4061e1bfa6b9cbb4700a034'
	'd08225e4b82a9de9a8fcbbf2b4aa6c23')


build () {

	
	mkdir -p ${pkgdir}/usr/bin/${pkgname}
	
	# remove 
	cd ${srcdir}
	yes | rm -Rf "Sublime Text 2" || return 1


	# cpu architecture
	if [ $(uname -m) = i686 ]
	then
		tar xvjf Sublime%20Text%202%20Build%20${_pkgver}.tar.bz2 || return 1
		arch=('i686')
	else
		tar xvjf Sublime%20Text%202%20Build%20${_pkgver}%20x64.tar.bz2 || return 1
		arch=('x86_64')
		
	fi

	cp -R Sublime\ Text\ 2/* ${pkgdir}/usr/bin/${pkgname} || return 1
	chmod -R 755 ${pkgdir}/usr/bin/${pkgname} || return 1

	# icon
	install -m 644 ${srcdir}/sublime-text-2-icon.png ${pkgdir}/usr/bin/${pkgname} || return 1

	
	install -d -m 755 ${pkgdir}/usr/share/applications || return 1
	install -m 644 ${srcdir}/sublime-text-2.desktop ${pkgdir}/usr/share/applications || return 1

	

}



