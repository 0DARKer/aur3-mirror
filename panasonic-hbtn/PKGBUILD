# $Id$
# Maintainer: Heiher <admin@heiher.info>

pkgname=panasonic-hbtn
pkgver=3.14.1ed3d95
pkgrel=2
pkgdesc="Panasonic Tablet Button driver"
arch=('i686' 'x86_64')
url="https://github.com/heiher/panasonic-hbtn"
license=('GPL')
depends=('linux')
install=module.install
source=(git://github.com/heiher/panasonic-hbtn#commit=1ed3d954685e84690d04e00c2db0eb0386318a9b)
sha1sums=('SKIP')

build() {
  cd ${pkgname}

  make
  gzip ${pkgname}.ko
}

package() {
  cd ${pkgname}

  KVER=`uname -r | grep -wo -P "^\d\.\d+"`
  EDIR=${pkgdir}/usr/lib/modules/extramodules-${KVER}-ARCH
  install -dm755 ${EDIR}
  install -m644 ${pkgname}.ko.gz ${EDIR}/${pkgname}.ko
}
