# Contributor: Vamp898 vamp898 at web dot de

pkgname=kde4-svn
pkgver=950485
pkgrel=2
pkgdesc="The KDE4-SVN Trunk"
arch=('i686' 'x86_64')
url="http://kde.org/"
license=( 'GPL' )
groups=( 'KDE' )
source=()
makedepends=()
optdepends=()
conflicts=( 'kdebase-workspace' 'kdeaccessibility' 'kdeadmin' 'kdeartwork' 'kdebase' 'kdebase-runtime' 'kdebase-workspace' 'kdeedu' 'kdegames' 'kdegraphics' 'kdelibs' 'kdemultimedia' 'kdenetwork' 'kdepim' 'kdepimlibs' 'kdeplasma-addons' 'kdesdk' 'kdetoys' 'kdeutils' 'kdewebdev' )
backup=()
options=()
noextract=()
md5sums=()
depends=( 'subversion' 'bzip2' 'libxslt' 'libxml2' 'libjpeg' 'libungif' 'shared-mime-info' 'mesa' 'boost' 'dbus' 'openssl' 'pkgconfig' 'xine-lib' 'clucene' 'redland' 'gpgme' 'hal' 'cmake' 'boost' 'qt' 'automoc4' 'akonadi' 'eigen' 'taglib' 'soprano' 'strigi' 'qimageblitz' 'phonon' )
makedepends=()
provides=( 'kdebase-workspace' 'kdeaccessibility' 'kdeadmin' 'kdeartwork' 'kdebase' 'kdebase-runtime' 'kdebase-workspace' 'kdeedu' 'kdegames' 'kdegraphics' 'kdelibs' 'kdemultimedia' 'kdenetwork' 'kdepim' 'kdepimlibs' 'kdeplasma-addons' 'kdesdk' 'kdetoys' 'kdeutils' 'kdevelop' 'kdevplatform' 'kdewebdev' )

_svntrunk=svn://anonsvn.kde.org/home/kde/trunk/KDE
_svnmod=KDE

build() {

       cd "$srcdir"
       
       if [ -d $_svnmod/.svn ]; then
	      (cd $_svnmod && svn up -r $pkgver)
       else
	      svn co $_svntrunk --config-dir ./ -r $pkgver $_svnmod
       fi
       
       cd ${_svnmod}
       cd kdelibs
       cmake . -DCMAKE_INSTALL_PREFIX=/usr/kde-trunk
       make || return 1
       make DESTDIR=$pkgdir install || return 1
       cd ..
       
       cd kdepimlibs
       cmake . -DCMAKE_INSTALL_PREFIX=/usr/kde-trunk
       make || return 1
       make DESTDIR=$pkgdir install || return 1
       cd ..
       
       cd kdebase
       cmake . -DCMAKE_INSTALL_PREFIX=/usr/kde-trunk
       make || return 1
       make DESTDIR=$pkgdir install || return 1
       cd ..
       
       cd kdeaccessibility
       cmake . -DCMAKE_INSTALL_PREFIX=/usr/kde-trunk
       make || return 1
       make DESTDIR=$pkgdir install || return 1
       cd ..
       
       cd kdeadmin
       cmake . -DCMAKE_INSTALL_PREFIX=/usr/kde-trunk
       make || return 1
       make DESTDIR=$pkgdir install || return 1
       cd ..
       
       cd kdeartwork
       cmake . -DCMAKE_INSTALL_PREFIX=/usr/kde-trunk
       make || return 1
       make DESTDIR=$pkgdir install || return 1
       cd ..
       
       cd kdebindings
       cmake . -DCMAKE_INSTALL_PREFIX=/usr/kde-trunk
       make || return 1
       make DESTDIR=$pkgdir install || return 1
       cd ..
       
       cd kdeedu
       cmake . -DCMAKE_INSTALL_PREFIX=/usr/kde-trunk
       make || return 1
       make DESTDIR=$pkgdir install || return 1
       cd ..
       
       cd kdegames
       cmake . -DCMAKE_INSTALL_PREFIX=/usr/kde-trunk
       make || return 1
       make DESTDIR=$pkgdir install || return 1
       cd ..
       
       cd kdegraphics
       cmake . -DCMAKE_INSTALL_PREFIX=/usr/kde-trunk
       make || return 1
       make DESTDIR=$pkgdir install || return 1
       cd ..
       
       cd kdemultimedia
       cmake . -DCMAKE_INSTALL_PREFIX=/usr/kde-trunk
       make || return 1
       make DESTDIR=$pkgdir install || return 1
       cd ..
       
       cd kdenetwork
       cmake . -DCMAKE_INSTALL_PREFIX=/usr/kde-trunk
       make || return 1
       make DESTDIR=$pkgdir install || return 1
       cd ..
       
       cd kdepim
       cmake . -DCMAKE_INSTALL_PREFIX=/usr/kde-trunk
       make || return 1
       make DESTDIR=$pkgdir install || return 1
       cd ..
       
       cd kdeplasma-addons
       cmake . -DCMAKE_INSTALL_PREFIX=/usr/kde-trunk
       make || return 1
       make DESTDIR=$pkgdir install || return 1
       cd ..
       
       cd kdesdk
       cmake . -DCMAKE_INSTALL_PREFIX=/usr/kde-trunk
       make || return 1
       make DESTDIR=$pkgdir install || return 1
       cd ..
       
       cd kdetoys
       cmake . -DCMAKE_INSTALL_PREFIX=/usr/kde-trunk
       make || return 1
       make DESTDIR=$pkgdir install || return 1
       cd ..
       
       cd kdeutils
       cmake . -DCMAKE_INSTALL_PREFIX=/usr/kde-trunk
       make || return 1
       make DESTDIR=$pkgdir install || return 1
       cd ..
       
       cd kdevelop
       cmake . -DCMAKE_INSTALL_PREFIX=/usr/kde-trunk
       make || return 1
       make DESTDIR=$pkgdir install || return 1
       cd ..
       
       cd kdevplatform
       cmake . -DCMAKE_INSTALL_PREFIX=/usr/kde-trunk
       make || return 1
       make DESTDIR=$pkgdir install || return 1
       cd ..
       
       cd kdewebdev
       cmake . -DCMAKE_INSTALL_PREFIX=/usr/kde-trunk
       make || return 1
       make DESTDIR=$pkgdir install || return 1
       cd ..
       
}
