pkgname=cgal
pkgver=3.9
pkgrel=4
_pkgid=29125
pkgdesc="Computational Geometry Algorithms Library"
arch=('i686' 'x86_64')
url="http://www.cgal.org"
source=(http://gforge.inria.fr/frs/download.php/$_pkgid/CGAL-$pkgver.tar.xz
        boost-1.48.patch)
depends=('mpfr' 'boost' 'gmp')
optdepends=('qt: for CGAL_Qt4')
makedepends=('cmake' 'xz')
license=('LGPL' 'custom:QPL')
md5sums=('797697130ff9231627521c0a38f16d2f'
         '62a49b37ff4d04daae9b3a03365de4ef')

build() {
  cd $srcdir/CGAL-$pkgver
  patch -p1 < $srcdir/boost-1.48.patch
  cmake . -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/usr
  make
  make install DESTDIR=$pkgdir

  for _license in LICENSE{,.FREE_USE,.QPL,.LGPL}; do
    install -D -m644 $srcdir/CGAL-$pkgver/$_license $pkgdir/usr/share/licenses/$pkgname/$_license
  done
}
