# Maintainer: Ben Fox-Moore <ben.foxmoore@gmail.com>
pkgname=livestreamer-twitch-gui
pkgver=v0.7.1
pkgrel=1
pkgdesc="A multi platform Twitch.tv browser for Livestreamer"
arch=("i686" "x86_64")
url="https://github.com/bastimeyer/livestreamer-twitch-gui"
license=("MIT")
depends=("livestreamer")
provides=("livestreamer-twitch-gui")
options=(!strip)
install=$pkgname.install
source=("add-menuitem-absolute-icons.patch")
source_i686=("https://github.com/bastimeyer/livestreamer-twitch-gui/releases/download/$pkgver/livestreamer-twitch-gui-$pkgver-linux32.tar.gz")
source_x86_64=("https://github.com/bastimeyer/livestreamer-twitch-gui/releases/download/$pkgver/livestreamer-twitch-gui-$pkgver-linux64.tar.gz")
sha256sums=("17587df57ccc22634825de81f8a609036d82e318965c89b4dc7dc6f8669e44ab")
sha256sums_i686=("0afd312e77754f712359de63fa1ce76a5c5417d960031696ae5c32c51635676e")
sha256sums_x86_64=("b9350224f04c0028f87bd852f7f0aca2017000a07ec95fbbacbf49fe2b564ca7")

package() {
	cd "$srcdir/$pkgname"

	install -d "$pkgdir/opt/$pkgname"
	install -d "$pkgdir/usr/bin/"

	patch -p3 add-menuitem.sh < ../add-menuitem-absolute-icons.patch
	sed -i "s:Exec=\$HERE/start.sh:Exec=/usr/bin/$pkgname:g" add-menuitem.sh

	cp -R * "$pkgdir/opt/$pkgname"

	ln -s "/opt/$pkgname/start.sh" "$pkgdir/usr/bin/$pkgname"
	ln -s "/usr/lib/libudev.so" "$pkgdir/opt/$pkgname/libudev.so.0"
}