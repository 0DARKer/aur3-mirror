# Maintainer: ahmad200512@yandex.ru
pkgname=teamcity
pkgver=7.1.1
pkgrel=2
pkgdesc="Famous continuous integration server from JetBrains"
arch=('any')
url="http://www.jetbrains.com/teamcity/"
license=('custom: TeamCity Professional Server license')
depends=('java-runtime')
install=$pkgname.install
source=(http://download.jetbrains.com/teamcity/TeamCity-${pkgver}.tar.gz teamcity.rc teamcity-and-agent.rc agent.rc)
md5sums=('451b1ddd5c8a25a251509859b986640f'
         'a8fac38f237b97bf69db04368bd5cdc7'
         '88236fb13e5c1cd387745b992f69595a'
         '8052fbb474687b4093eae428ece14ea2')
options=('!strip')
build() {
  mkdir -p ${pkgdir}/usr/share/teamcity
  mkdir -p ${pkgdir}/usr/share/licenses
  mkdir -p ${pkgdir}/etc/rc.d
  mkdir -p ${pkgdir}/opt/${pkgname}
  install -Dm755 ${srcdir}/teamcity.rc ${pkgdir}/etc/rc.d/teamcity
  install -Dm755 ${srcdir}/agent.rc ${pkgdir}/etc/rc.d/teamcity-agent
  install -Dm755 ${srcdir}/teamcity-and-agent.rc ${pkgdir}/etc/rc.d/teamcity-and-agent
  cp -R ${srcdir}/TeamCity/* ${pkgdir}/opt/${pkgname}
  ln -s /opt/${pkgname}/licenses ${pkgdir}/usr/share/licenses/teamcity
}

# vim:set ts=2 sw=2 et:
