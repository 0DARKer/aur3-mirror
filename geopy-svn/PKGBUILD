# Contributor:  Jose Negron <josenj.arch@mailnull.com>
# Maintainer: Jose Negron <josenj.arch@mailnull.com>

pkgname=geopy-svn
pkgver=75
pkgrel=2
pkgdesc="Geocoding toolbox for Python"
url="http://exogen.case.edu/projects/geopy"
license=('MIT')
arch=(i686 x86_64)

depends=()
makedepends=(subversion setuptools)
conflicts=('geopy')
provides=('geopy')

source=()
md5sums=()

_svntrunk=http://geopy.googlecode.com/svn/trunk
_svnmod=geopy

build() {
  cd $startdir/src

  if [ -d $_svnmod/.svn ]; then
    (cd $_svnmod && svn up -r $pkgver)
  else
    svn co $_svntrunk -r $pkgver $_svnmod
  fi

  cd $_svnmod
  python setup.py install --root=$startdir/pkg
  mkdir -p $startdir/pkg/usr/share/licenses/$pkgname
  mv LICENSE $startdir/pkg/usr/share/licenses/$pkgname
  find $startdir/pkg -name .svn -exec rm -rf {} \; > /dev/null 2>&1  

  rm -rf $startdir/src/$_svnmod-build
}

