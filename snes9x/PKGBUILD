# Contributor: bzt <unmacaque@gmail.com>

pkgname=snes9x-git
pkgbase=snes9x
pkgver=20110327
pkgrel=1
pkgdesc="A GTK+ port of the Snes9x emulator."
arch=('i686' 'x86_64')
url="http://www.snes9x.com"
license=('custom')
depends=('zlib' 'libpng' 'sdl' 'alsa-lib' 'libglade' 'libxv' 'gcc-libs' 
	 'libxext' 'libsm' 'libgl' 'libglade')
makedepends=('intltool' 'nasm' 'mesa' 'git' 'autogen')
provides=('snes9x' 'snes9x-gtk')
conflicts=('snes9x' 'snes9x-gtk')
install=snes9x-git.install

_gitroot=git://github.com/snes9xgit/snes9x.git
_gitname=snes9x

build() {
  cd "${srcdir}/"

  msg "Connecting to the GIT server...."
  
  if [[ -d "$srcdir/$_gitname" ]] ; then
    cd "$_gitname"
    git pull origin
    msg "The local files are updated."
  else
    git clone "$_gitroot"
  fi

  cd "${srcdir}/${pkgbase}/gtk"

  ./autogen.sh || return 1
  ./configure --prefix=/usr --with-netplay || return 1

  make || return 1
  make DESTDIR="${pkgdir}" install || return 1
}

