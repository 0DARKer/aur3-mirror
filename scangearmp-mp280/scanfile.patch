diff -aur src/scanfile.c src/scanfile.c
--- src/scanfile.c	2010-02-17 03:22:35.000000000 +0100
+++ src/scanfile.c	2012-02-06 12:15:48.011644562 +0100
@@ -386,7 +386,8 @@
 
 void write_data_for_png( png_structp png_ptr, png_bytep data, png_size_t length )
 {
-	FileControlWriteFile( *( (int *)png_ptr->io_ptr ), (CNMSLPSTR)data, length );
+	//FileControlWriteFile( *( (int *)png_ptr->io_ptr ), (CNMSLPSTR)data, length );
+	FileControlWriteFile( *( (int *)png_get_io_ptr(png_ptr) ), (CNMSLPSTR)data, length );
 
 	return;
 }
Seulement dans src: scanfile.c~
