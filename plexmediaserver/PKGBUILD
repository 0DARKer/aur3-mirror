# Contributor: Arthur <arthur.darcet@m4x.org>
pkgname=plexmediaserver
pkgver=0.9.3.5
pkgrel=3
pkgdesc="Plex Media Server for Linux"
url="http://www.plexapp.com"
arch=('i686' 'x86_64')
license=('closed')
depends=('avahi')
replace=('plex')

install='plexmediaserver.install'

if [ "$CARCH" = "i686" ]; then
	_arch='i386'
	md5sums=('eaafbaa6eea6432b997604063a659cf0')
elif [ "$CARCH" = "x86_64" ]; then
	_arch='amd64'
	md5sums=('96e9377639c0aa41bc37fe93313b3c2d')
	depends+=('lib32-libxml2' 'lib32-sqlite3' 'lib32-boost-libs' 'lib32-curl')
fi

source=("http://www.plexapp.com/repo/pool/main/p/plexmediaserver/plexmediaserver_0.9.3.5ubuntu1_${_arch}.deb" 'plexmediaserver')

md5sums+=('98372b82c0280744d52c1877bed7f6c4')


build() {
	ar -xv plexmediaserver_0.9.3.5ubuntu1_${_arch}.deb || return 1
	tar -zxf data.tar.gz || return 1
}

package(){
	mkdir -p $pkgdir/usr/lib/plexmediaserver
	mkdir -p $pkgdir/etc/rc.d
	
	cp -r usr/lib/plexmediaserver/* $pkgdir/usr/lib/plexmediaserver/
	install -D -m644 etc/default/plexmediaserver $pkgdir/etc/plexmediaserver.conf
	install -D -m755 plexmediaserver $pkgdir/etc/rc.d/
}
