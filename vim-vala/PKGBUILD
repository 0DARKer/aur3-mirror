pkgname=vim-vala
pkgver=0.1
pkgrel=1
pkgdesc="Support for vala language"
arch=('i686' 'x86_64')
url="http://live.gnome.org/Vala/Vim"
license=('unknown')
depends=('vim')
groups=('vim-plugins')
source=(vala.vim::"http://live.gnome.org/Vala/Vim?action=AttachFile&do=get&target=vala.vim")
md5sums=('8f9c2f58b1fee568bd0e7b73993752e6')

build() {
  cd ${srcdir}

  install -d ${pkgdir}/usr/share/vim/{syntax,plugin}

  install -m644 vala.vim ${pkgdir}/usr/share/vim/syntax/

  { echo 'autocmd BufRead *.vala,*.vapi set efm=%f:%l.%c-%[%^:]%#:\ %t%[%^:]%#:\ %m'
    echo 'au BufRead,BufNewFile *.vala,*.vapi setfiletype vala'
  } > ${pkgdir}/usr/share/vim/plugin/vala.vim
}
