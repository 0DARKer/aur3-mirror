# Maintainer: Chris Sakalis <chrissakalis@gmail.com>

pkgname=vim-obsession-git
pkgver=20130312
pkgrel=1
pkgdesc="tpope's session creation plugin."
arch=('any')
url="https://github.com/tpope/vim-obsession"
license=('custom:vim')
depends=("vim")
makedepends=("git")
provides=("vim-obsession")
conflicts=("vim-obsession")
groups=('vim-plugins')
source=('license.txt')
install=vimdoc.install

_gitroot="https://github.com/tpope/vim-obsession.git"
_gitname="vim-obsession"

md5sums=('5385d0749cd4b74b6bdcf3d08aed46cd')
sha256sums=('1b2b479e7c67f60da82107246a1e89668a30dcb4ae246cce876172e6530037d2')

build()
{
	msg "Connecting to GIT server...."

	cd $srcdir
	if [ -d $_gitname ] ; then
		cd $_gitname && git pull origin
		msg "The local files are updated."
	else
		git clone --depth=1 $_gitroot $_gitname
	fi

	msg "GIT checkout done or server timeout"
}

package()
{
	install -d ${pkgdir}/usr/share/vim/vimfiles/{doc,plugin}
	install -Dm644 ${srcdir}/${_gitname}/doc/obsession.txt ${pkgdir}/usr/share/vim/vimfiles/doc/obsession.txt
	install -Dm644 ${srcdir}/${_gitname}/plugin/obsession.vim ${pkgdir}/usr/share/vim/vimfiles/plugin/obsession.vim
	install -Dm644 ${srcdir}/license.txt ${pkgdir}/usr/share/licenses/${pkgname}/license.txt
}
