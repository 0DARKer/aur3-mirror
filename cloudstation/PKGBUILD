# Maintainer: Lev Lybin <lev.lybin@gmail.com>
# Contributor: Mikael Eriksson <mikael_eriksson@miffe.org>

pkgname=cloudstation
pkgver=3320
pkgrel=1
pkgdesc="Synology Cloud Station. Cloud Station allows you to sync files among your Synology NAS and computers"
arch=('i686' 'x86_64')
url="http://www.synology.com/"
license=('unknown')
depends=('libsm' 'qt5-base')
optdepends=('nautilus: For nautilus integration')
install=cloudstation.install

if test "$CARCH" = i686; then
    source=("http://global.download.synology.com/download/Tools/CloudStation/$pkgver/Linux/x32/synology-cloud-station-$pkgver.deb")
    md5sums=('03bce67137d0494ee85a9b7cefe09652')
fi

if test "$CARCH" = x86_64; then
    source=("http://global.download.synology.com/download/Tools/CloudStation/$pkgver/Linux/x64/synology-cloud-station-$pkgver.deb")
    md5sums=('c6f0844507420e4da256aa8eebbc0f6a')
fi

prepare() {
    cd "$srcdir"
    tar -zxf "$srcdir/data.tar.gz"
}

package() {
    cp -rp opt "$pkgdir/opt"

    install -Dm755 usr/lib/nautilus/extensions-3.0/libnautilus-cloud-extension.so "$pkgdir/usr/lib/nautilus/extensions-3.0/libnautilus-cloud-extension.so"
    install -Dm755 usr/bin/synology-cloud-station "$pkgdir/usr/bin/synology-cloud-station"
    install -Dm644 usr/share/applications/synology-cloud-station.desktop "$pkgdir/usr/share/applications/synology-cloud-station.desktop"
}
