# Maintainer: Lev Lybin <lev.lybin@gmail.com>
# Contributor: Mikael Eriksson <mikael_eriksson@miffe.org>

pkgname=cloudstation
pkgver=3317
pkgrel=1
pkgdesc="Synology Cloud Station. Cloud Station allows you to sync files among your Synology NAS and computers"
arch=(i686 x86_64)
url="http://www.synology.com/"
license=('unknown')
depends=('libsm' 'qt5-base')
optdepends=('nautilus>=3.4.2: For nautilus integration')
install=cloudstation.install

if test "$CARCH" = i686; then
	source=("http://global.download.synology.com/download/Tools/CloudStation/3317/Linux/x32/synology-cloud-station-3317.deb")
	md5sums=(584a5045d74466986446c67104e18a60)
fi

if test "$CARCH" = x86_64; then
	source=("http://global.download.synology.com/download/Tools/CloudStation/3317/Linux/x64/synology-cloud-station-3317.deb")
	md5sums=(b088b27ea9743b0c95224d3001084e8d)
fi

prepare() {
	cd ${startdir}/src
	tar -zxf ${startdir}/src/data.tar.gz 
}

package() {
 	cp -rp opt ${pkgdir}/opt
 	
	install -Dm755 ${srcdir}/usr/lib/nautilus/extensions-3.0/libnautilus-cloud-extension.so ${pkgdir}/usr/lib/nautilus/extensions-3.0/libnautilus-cloud-extension.so
	install -Dm755 ${srcdir}/usr/bin/synology-cloud-station ${pkgdir}/usr/bin/synology-cloud-station

	install -Dm644 ${srcdir}/usr/share/applications/synology-cloud-station.desktop ${pkgdir}/usr/share/applications/synology-cloud-station.desktop
}
