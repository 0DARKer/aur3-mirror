# Maintainer: Jonathan Lestrelin <zanko@daemontux.org>

pkgname=colout-git
_pkgname=colout
pkgver=20130404
pkgrel=1
pkgdesc="Reads text on stdin and produces output colorized and stylized output"
arch=('any')
url="http://nojhan.github.com/colout/"
license=('GPL')
depends=('python' 'python-pygments')
makedepends=('git')
provides=($_pkgname)
conflicts=($_pkgname)
_gitroot="git://github.com/nojhan/colout.git"
_gitname="colout"

build() {
	cd "$srcdir"
	msg "Performing source checkout..."
	if [ -d "$_gitname" ]; then
		cd "$_gitname"
		git pull origin || return 1
		cd ..
	else
		git clone "$_gitroot" || return 1
	fi
	msg "Source checkout finished."
}

package() {
	mkdir -p $pkgdir/usr/share/doc/colout
	mkdir -p $pkgdir/usr/share/colout
	mkdir -p $pkgdir/usr/bin
	cp $_gitname/*.py $pkgdir/usr/share/colout
	cp $_gitname/LICENSE $_gitname/README.md $pkgdir/usr/share/doc/colout
	chmod +x $pkgdir/usr/share/colout/colout.py
	ln -s /usr/share/colout/colout.py $pkgdir/usr/bin/colout
}

