# Maintainer: Adam Reichold <adamreichold@myopera.com>
# Contributor: Stefan Husmann <stefan-husmann@t-online.de>
pkgname=qpdfview-bzr
pkgver=56
pkgrel=2
pkgdesc='A tabbed PDF viewer using the poppler library.'
arch=('i686' 'x86_64')
url='http://launchpad.net/qpdfview'
license=('GPL3')
depends=('qt' 'poppler-qt')
makedepends=('bzr')
conflicts=('qpdfview')
_bzrtrunk='lp:qpdfview'
_bzrmod=qpdfview

build() {
  cd "$srcdir"

  msg 'Obtaining source code...'

  if [ -d qpdfview ] ; then
    cd $_bzrmod && bzr pull $_bzrtrunk
  else
    bzr branch $_bzrtrunk && cd $_bzrmod
  fi

  msg 'Building program...'

  qmake
  make
}

package() {
  cd "$srcdir/$_bzrmod"

  install -Dm755 "qpdfview" "$pkgdir/usr/bin/qpdfview"

  install -Dm644 "icons/qpdfview.png" "$pkgdir/usr/share/pixmaps/qpdfview.png"
  install -Dm644 "miscellaneous/qpdfview.desktop" "$pkgdir/usr/share/applications/qpdfview.desktop"
}
