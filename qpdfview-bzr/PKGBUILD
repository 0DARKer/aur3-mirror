# Maintainer: Adam Reichold <adamreichold@myopera.com>
pkgname=qpdfview-bzr
pkgver=20120207
pkgrel=1
pkgdesc="qpdfview is a tabbed PDF viewer using the poppler library."
url="http://launchpad.net/qpdfview"
arch=('i686' 'x86_64')
license=('GPL3')
depends=('qt' 'poppler-qt')
makedepends=('bzr')
source=()
md5sums=()

_branch="lp:qpdfview"
_dir="qpdfview"

build() {
  cd "$srcdir"

  msg "Obtaining source code..."

  if [ -d $_dir ] ; then
    cd $_dir && bzr pull $_branch
  else
    bzr branch $_branch && cd $_dir
  fi

  msg "Building program..."

  qmake
  make
}

package() {
  cd $srcdir/$_dir

  install -Dm755 "qpdfview" "$pkgdir/usr/bin/qpdfview"
  install -Dm644 "qpdfview.desktop" "$pkgdir/usr/share/applications/qpdfview.desktop"
}
