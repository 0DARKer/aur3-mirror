# Maintainer: rtfreedman (rob<d0t>til<d0t>freedman<aT>gmail<d0t>com

pkgname=midisnoop-git
pkgver=20130308
pkgrel=2
pkgdesc="A simple MIDI monitor and prober"
arch=('i686' 'x86_64')
url="http://midisnoop.googlecode.com/"
license=('GPL2')
depends=('qt4' 'rtmidi>=2.0.1')
makedepends=('git' 'python')

_gitroot="https://code.google.com/p/midisnoop/"
_gitname="midisnoop"

install=midisnoop.install

build() {
  cd "$srcdir"
  msg "Connecting to GIT server...."

  if [ -d "${srcdir}/${_gitname}" ] ; then
    ( cd ${_gitname} && git pull --rebase )
  else
    git clone ${_gitroot} ${_gitname}
  fi

  rm -rf ${_gitname}-build
  git clone ${_gitname} ${_gitname}-build
  cd ${_gitname}-build
    
  msg "GIT checkout done or server timeout"

  ./configure --prefix=/usr
  make
}

package() {
  cd ${srcdir}/${_gitname}-build
  make INSTALL_ROOT="$pkgdir/" install
}
