# Contributor: Jonas Heinrich <onny@project-insanity.org>
# Maintainer: Jonas Heinrich <onny@project-insanity.org>

# ToDo: Fix python26 dependency on gtk (pygtk)

pkgname=btlive
pkgver=0.4.11.191
pkgrel=4
pkgdesc="Bittorrent Live is a technology for p2p live streaming, client version"
arch=('i686' 'x86_64')
url="http://live.bittorrent.com"
_watch="http://live-installer-autoupdate.s3.amazonaws.com/latest_version.js"
license=('nonfree')
depends=('python26' 'python26-argparse')
if [ "${CARCH}" = "x86_64" ]; then
    _arch="amd64"
    md5sums=('14faf1ba9feed1a5542045d44e3c9495'
    '7bad98c51617cc85cf291716e9c66cd8'
    '8cd09efd274f09a5e26950107482bb8a')
else
    _arch="i386"
    md5sums=('5cdb40c99ea863d62da19bf0254558d0'
    '7bad98c51617cc85cf291716e9c66cd8'
    '8cd09efd274f09a5e26950107482bb8a')
fi 
source=("http://live-installer-autoupdate.s3.amazonaws.com/${pkgname}_${pkgver}_${_arch}.deb"
"${pkgname}.rc"
"${pkgname}.service")
options=('!strip')
build() {
    cd $srcdir
    ar x "${pkgname}_${pkgver}_${_arch}.deb"
    tar xvf data.tar.gz
}
package () {
    mkdir -p $pkgdir/usr/lib
    cp -r "$srcdir/usr" "$pkgdir/"

    # create /etc/rc.d/btlive
    mkdir -p "$pkgdir/etc/rc.d/"
    install -m 755 "$srcdir/btlive.rc" "$pkgdir/etc/rc.d/btlive"

    # Create btlive service
    mkdir -p "$pkgdir/usr/lib/systemd/system/"
    install -m 644 "$srcdir/btlive.service" "$pkgdir/usr/lib/systemd/system/"
}

# vim:set ts=4 sw=4 et:
