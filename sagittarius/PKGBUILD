# Maintainer: Andrea Girotto <andrea (dot) girotto (at) gmail (dot) com>
pkgname=sagittarius
pkgver=0.5.0
pkgrel=1
pkgdesc='R6RS/R7RS Scheme system.'
arch=('i686' 'x86_64')
license=('MIT')
makedepends=('cmake>=2.8.4')
depends=(gc libffi zlib unixodbc)
url=https://code.google.com/p/sagittarius-scheme/
source=(https://bitbucket.org/ktakashi/sagittarius-scheme/downloads/$pkgname-$pkgver.tar.gz)
md5sums=(93c0647cac1278b1e34234e260d51a3c)

build(){
 cd ${srcdir}/${pkgname}-${pkgver}

 cmake . -DCMAKE_INCLUDE_PATH=/usr/lib/libffi-3.0.13/include/ \
         -DCMAKE_LIBRARY_PATH=/usr/lib \
         -DINSTALL_PREFIX=/usr
 make
 make doc
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  make DESTDIR="${pkgdir}" install
  install -Dm644 Copyright "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
}

check() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  make test
  #./build/sash run-test.scm
}

