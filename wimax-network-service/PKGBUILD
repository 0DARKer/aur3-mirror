pkgname=wimax-network-service
pkgver=1.5.1
pkgrel=1
pkgdesc="WiMAX Network Service"
arch=('i686' 'x86_64')
url="http://linuxwimax.org"
license=('BSD')
depends=('kernel26>=2.6.35' 'libeap' 'wimax-tools' 'dhclient')
optdepends=('i2400m-firmware: for working with new intel 6x50 cards')
source=('http://linuxwimax.org/Download?action=AttachFile&do=get&target=wimax-1.5.1.tar.gz'
        'dhcp-renew.patch'
        'wimaxd.rc')

md5sums=('8d7fae21a62b5aeda3f730c484bdd5fb'
         'ff5e6d2277a5d2f4f60f0b3b3afaeb38'
         '99464624d412261e48d26c514cb9b059')

build() {
  cd ${srcdir}/wimax-1.5.1
  ./configure --sysconfdir=/etc --localstatedir=/var --mandir=/usr/share/man --prefix=/usr
  make
  make DESTDIR=${pkgdir} install
  rm -Rf ${pkgdir}/etc/init.d
  cd ${pkgdir}
  patch -Np0 < ${srcdir}/dhcp-renew.patch
  mkdir -p ${pkgdir}/etc/rc.d
  cp ${startdir}/wimaxd.rc ${pkgdir}/etc/rc.d/wimaxd
  chmod +x ${pkgdir}/etc/rc.d/wimaxd
}
