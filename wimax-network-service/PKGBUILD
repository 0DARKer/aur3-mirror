pkgname=wimax-network-service
pkgver=1.5.2
pkgrel=1
pkgdesc="WiMAX Network Service"
arch=('i686' 'x86_64')
url="http://linuxwimax.org"
license=('BSD')
depends=('libeap' 'wimax-tools' 'dhclient')
optdepends=('i2400m-firmware: for working with new intel 6x50 cards'
            'kernel26>=2.6.35: any kernel newer than 2.6.35 is required')
source=("http://linuxwimax.org/Download?action=AttachFile&do=get&target=wimax-${pkgver}.tar.gz"
        'dhcp-renew.patch'
        'wimaxd.rc')

md5sums=('66ac68d809bcba0771b55af68f4d2227'
         'ff5e6d2277a5d2f4f60f0b3b3afaeb38'
         '99464624d412261e48d26c514cb9b059')

build() {
  cd ${srcdir}/wimax-${pkgver}
  ./configure --sysconfdir=/etc --localstatedir=/var --mandir=/usr/share/man --prefix=/usr
  make
  make DESTDIR=${pkgdir} install
  rm -Rf ${pkgdir}/etc/init.d
  cd ${pkgdir}
  patch -Np0 < ${srcdir}/dhcp-renew.patch
  mkdir -p ${pkgdir}/etc/rc.d
  cp ${startdir}/wimaxd.rc ${pkgdir}/etc/rc.d/wimaxd
  chmod +x ${pkgdir}/etc/rc.d/wimaxd
}
