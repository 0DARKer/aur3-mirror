# Maintainer: Joris Steyn <jorissteyn@gmail.com>
# Contributor: Ondrej Kucera <ondrej.kucera@centrum.cz>

pkgname=httping
pkgver=2.3.1
pkgrel=1
pkgdesc="Httping is like 'ping' but for http-requests"
arch=(i686 x86_64)
depends=("openssl")
url=('http://www.vanheusden.com/httping/')
license=('GPL')
source=("http://www.vanheusden.com/httping/${pkgname}-${pkgver}.tgz"
        'fix-packaging-translation-destdir.patch')
md5sums=('c0297099adf96f80bd9e3a2902b456ae'
         '8a1ae972657ac5ab32441ddd68f3edfa')

build() {
  cd ${srcdir}/${pkgname}-${pkgver}
  sed -i -e 's%-DVERSION=\\"$(VERSION)\\"%-DVERSION=\\"$(VERSION)\\" -D_GNU_SOURCE%' Makefile
  patch -p1 < ../../fix-packaging-translation-destdir.patch
}

package() {
  cd ${srcdir}/${pkgname}-${pkgver}
  mkdir -p ${pkgdir}/usr/bin
  mkdir -p ${pkgdir}/usr/share/man/nl/man1
  mkdir -p ${pkgdir}/usr/share/locale/nl/LC_MESSAGES/
  make DESTDIR=${pkgdir} install
}
