# Contributer: Gustavo Alvarez <sl1pkn07@gmail.com>
pkgname=hlextract
pkgver=2.4.2
_pkgver=242
pkgrel=1
pkgdesc="Extract Tool and Lib for open BSP, GCF, NCF, PAK, VPK, WAD, XZP (Half-Life and other games)"
arch=('i686' 'x86_64')
url="http://nemesis.thewavelength.net/index.php?c=108"
license=('GPL' 'LGPL')
makedepends=('patch' 'hd2u')
provides=('hlextract' 'hllib')
source=(http://nemesis.thewavelength.net/files/files/hllib$_pkgver.zip
        hllib230-makefile.patch)
md5sums=('d89d53ff40a58062e13d5676fb871742'
         '049d11777005392e17674b193a5722da')

build() {
     patch -p1 < hllib230-makefile.patch
     sed -i 's|2.3.0|2.4.2|g' HLLib/Makefile
     make -C HLLib PREFIX=/usr
     gcc HLExtract/Main.c -o HLExtract/hlextract -lhl
}

package() {
     make -C HLLib -f Makefile install PREFIX="$pkgdir"/usr
     install -Dm755 $srcdir/HLExtract/hlextract $pkgdir/usr/bin/hlextract
     install -Dm755 $srcdir/Readme.txt $pkgdir/usr/share/doc/$pkgname/Readme.txt
     install -Dm755 $srcdir/GPL.txt $pkgdir/usr/share/licenses/$pkgname/GPL.txt
     install -Dm755 $srcdir/LGPL.txt $pkgdir/usr/share/licenses/$pkgname/LGPL.txt
}
