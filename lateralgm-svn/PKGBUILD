# Maintainer: RetroX <classixretrox@gmail.com>
pkgname=lateralgm-svn
pkgver=500
pkgrel=3
pkgdesc="An interface to create projects for YoYoGame's Game Maker."
pkglongdesc=\
"LateralGM IDE

An interface to create projects for YoYoGame's Game Maker."
pkgdebsection="devel"
arch=('any')
url="http://www.ismavatar.com/lgm"
license=('GPL')
depends=('java-runtime')
debdepends=('java-runtime')
makedepends=('subversion' 'eclipse-ecj' 'java-batik' 'java-batik-rasterizertask' 'apache-ant')
_svntrunk="https://lateralgm.svn.sourceforge.net/svnroot/lateralgm/LateralGM/trunk"
_svnmod="lgm"
source=(http://subclipse.tigris.org/files/documents/906/46267/svnant-1.3.0.zip
        http://www.svnkit.com/org.tmatesoft.svn_1.3.4.standalone.zip
        lateralgm)
md5sums=(3d896289151851f22bcf2fb1b3688a53
         9caaba27e8d338bebbe17d28497d3927
         bbab0ebc9c03c5708f34325c8d60bce8)

build()
{
  rm -rf ant_libs
  mkdir ant_libs
  cp /usr/share/java/batik/* ant_libs
  cp $srcdir/svnant-1.3.0/lib/* ant_libs
  ln -s /usr/share/java/{eclipse-,}ecj.jar ant_libs

  svn co $_svntrunk $_svnmod
  cd $_svnmod

  rm -f lgm*.jar
  ant jar-bin -lib $srcdir/ant_libs -Dbuild.compiler=org.eclipse.jdt.core.JDTCompilerAdapter
}

package()
{
  install -m755 -D $srcdir/lateralgm $pkgdir/usr/bin/lateralgm
  install -m644 -D $srcdir/$_svnmod/lgm*.jar $pkgdir/usr/share/java/lateralgm/lateralgm.jar
}
