# Maintainer: Sandro Dias Pinto Vitenti <sandro@isoftware.com.br>

pkgname=numcosmo
pkgver=0.9.0_4
pkgrel=2
pkgdesc="Numerical Cosmology - NumCosmo"
url="https://savannah.nongnu.org/projects/numcosmo/"
arch=('i686' 'x86_64')
license=('GPL')
depends=('glib' 'gsl' 'gmp' 'mpfr' 'sundials' 'sqlite3' 'fftw' 'nlopt' 'cfitsio' 'gtk-doc' 'libcuba')
optdepends=('atlas-lapack' 'levmar')
provides=('numcosmo')
conflicts=('numcosmo')
source=("http://download.savannah.gnu.org/releases/numcosmo/$pkgname-${pkgver//_/-}.tar.gz")
md5sums=("17fe4c7ef678aa5e385bab9ace863bdc")

build() {
  NCPU=`grep processor /proc/cpuinfo | wc -l`

  mkdir -p $srcdir/$pkgname-$pkgver-build
  cd $srcdir/$pkgname-$pkgver-build
  
  msg "Configuring ..."
  $srcdir/$pkgname-${pkgver//_[0-9]*/}/configure --prefix=/usr --enable-shared --with-thread-pool-max=$NCPU
  make
}

package() {
  cd $srcdir/$pkgname-$pkgver-build
  make DESTDIR=$pkgdir install
}
