#Maintainer: Abilng<abilngeorge@gmail.com>


pkgname="gnome-baxc"
pkgver=20120118
pkgrel=1
pkgdesc="A GUI to setting dynamic wallpaper for gnome (2/3)"
arch=(any)
license=('GPLv3')
source=()
url="http://github.com/abilng/gnome-baxc-gui"
depends=('python>=3' 'pyqt>=4')
makedepends=('git')
install=('gnome-baxc.install')
md5sums=()


_gitroot="git://github.com/abilng/gnome-baxc-gui.git"
_gitname="gnome-baxc"

build() {
	cd ${srcdir}
	msg "Connecting to GIT server..."
	if [[ -d ${_gitname} ]]; then
		(cd ${_gitname} && git pull origin)
	else
		git clone ${_gitroot} ${_gitname}
	fi
	msg "GIT checkout done or server timeout"

}

package() {
	cd ${srcdir}/
	install --mode=755 -D ${srcdir}/gnome-baxc/baxc ${pkgdir}/usr/share/gnome-baxc/gnome-baxc
	install --mode=755 -D ${srcdir}/gnome-baxc/gui.py ${pkgdir}/usr/share/gnome-baxc/gui.py
	install --mode=755 -D ${srcdir}/gnome-baxc/imagepro.py ${pkgdir}/usr/share/gnome-baxc/imagepro.py
	install --mode=755 -D ${srcdir}/gnome-baxc/xmlmsg.py ${pkgdir}/usr/share/gnome-baxc/xmlmsg.py
	install --mode=755 -D ${srcdir}/gnome-baxc/gnome-baxc.svg ${pkgdir}/usr/share/icons/hicolor/scalable/apps/gnome-baxc.svg
	install --mode=755 -D ${srcdir}/gnome-baxc/baxc ${pkgdir}/usr/bin/gnome-baxc
	install -D ${srcdir}/gnome-baxc/Gnome-Baxc.desktop ${pkgdir}/usr/share/applications/Gnome-Baxc.desktop
	cp -sf ${pkgdir}/usr/share/gnome-baxc/gnome-baxc ${pkgdir}/usr/bin/gnome-baxc
}
