#compdef catalyst_build_module

(( $+function[_arguments] )) ||
_arguments() {
    _args=(
        "help"
        "all"
        "remove"
        "remove_all"
        "ra"
        "${(f)$(find -L /usr/lib/modules -maxdepth 1 -mindepth 1 -type d ! -name "ext*" -printf "%f\n")}")
    compadd "$@" -k _args
}

case $CURRENT in
    2)
        shift words
        [[ $words[1] != -* ]] &&
            curcontext="${curcontext%:*}-${words[1]}:" _arguments
    ;;
esac
