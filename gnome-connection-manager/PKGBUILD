# Contributor: Nebulosa <nebulosa2007 na yandekse>

pkgname=gnome-connection-manager
pkgver=0.9.5
pkgrel=1
pkgdesc="Tabbed ssh connection manager for gtk+ environments."
arch=('i686' 'x86_64')
url="http://kuthulu.com/gcm/"
license=('GPL')
depends=('python2' 'pygtk' 'expect' 'vte' 'openssh')
source=("http://kuthulu.com/gcm/gnome-connection-manager_${pkgver}_all.tgz" "$pkgname.desktop")
md5sums=('d1ac4f57b9c3fcd335f9a0eaa649f22b'
         'da53e054b1d27b534299c04496bf17a9')

build() {  
  installdir="/usr/share/"
  
  cd ${srcdir}/gcm-${pkgver}
  sed -i "s#env python#env python2#" gnome_connection_manager.py
  install -d $pkgdir$installdir$pkgname
  install -D -m 755 -t $pkgdir$installdir$pkgname *.{py,expect}
  install -D -m 644 -t $pkgdir$installdir$pkgname *.{gif,png,glade,txt,pyc}
  
  #installing languages
  install -d $pkgdir$installdir$pkgname/lang
  directories=("en" "fr" "pl" "pt" "ru" )
  for ((i=0; i< ${#directories[@]}; i++)); do
    install -d $pkgdir$installdir$pkgname/lang/${directories[i]}/LC_MESSAGES
    install -D -m 644 lang/${directories[i]}/LC_MESSAGES/gcm-lang.mo $pkgdir$installdir$pkgname/lang/${directories[i]}/LC_MESSAGES/gcm-lang.mo
  done
  install -D -m 644 -t $pkgdir$installdir$pkgname/lang lang/*.po
  
  install -D -m 644 $srcdir/$pkgname.desktop $pkgdir$installdir/applications/$pkgname.desktop
}
