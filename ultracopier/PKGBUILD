# $Id: PKGBUILD, 2009/06/1$
# Maintainer: Maxime de Roucy <maxime.deroucy@gmail.com>
# Contributor: Maxime de Roucy <maxime.deroucy@gmail.com>
pkgname=ultracopier
pkgver=0.2.0.16
pkgrel=1
pkgdesc="Provide an advanced copier with play/pause/resume, with advanced management like playlist."
arch=(i686 x86_64)
url="http://ultracopier.first-world.info/"
license=('GPL3')
depends=('qt')
makedepends=('qt')
source=("http://files.first-world.info/ultracopier/${pkgver}/ultracopier-src-${pkgver}.tar.bz2")
md5sums=('d9ae8d02999e1a79b4dfd49f0268483c')

build() {
	cd "$srcdir/ultracopier-${pkgver}/src"

	sed -i -r 's/DEBUG_ULTRACOPIER [0-9]+/DEBUG_ULTRACOPIER 0/g' var.h || die "Error when set the debug level"

	qmake -project || exit 1
	qmake ultracopier.pro || exit 1
	make || exit 1

	install -D -m 644 "other/ultracopier.desktop"		"$pkgdir/usr/share/applications/ultracopier.desktop"
	install -D -m 644 "other/ultracopier-128x128.png"	"$pkgdir/usr/share/pixmaps/ultracopier.png"
	install -D -m 755 ultracopier	"$pkgdir/usr/bin/ultracopier"

	rm -f lang/*.ts
	chmod 644 lang/*.png
	rm -Rf styles/kde3/

	mkdir -p "$pkgdir/usr/share/ultracopier"
	cp -r lang "$pkgdir/usr/share/ultracopier/"
	cp -r styles "$pkgdir/usr/share/ultracopier/"
}
