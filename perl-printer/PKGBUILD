# Maintainer: lspci <agm2819[[aaaa]][[tttt]]gmail[[dd]][[oo]][[tt]][[cc]][[oo]][[mm]]>
#
#
pkgname=perl-printer
pkgver=0.70
pkgrel=4
pkgdesc="Perl module that provides various ways to print text to STDOUT, among other things."
arch=('i686' 'x86_64')
url="https://bitbucket.org/agalog/releases"
license=('BSD')
groups=('')
depends=('perl>=5.10.0') 
makedepends=('')
provides=()
conflicts=()
replaces=()
backup=()
options=()
source=("https://bitbucket.org/agalog/releases/downloads/$pkgname-$pkgver.tar.gz")
md5sums=('ab712e6f9bec7a07d1ca1ff6ab188d38')

build() {
    cd "$srcdir/Printer-$pkgver"
    # if this isn't included then h2xs 'causes break since I don't 
    # want to include the -O (overwite) option in the args for h2xs.  
    # Setting these env variables overwrites any command-line-options we don't want...
 ( export PERL_MM_USE_DEFAULT=1 PERL_AUTOINSTALL=--skipdeps \
     PERL_MM_OPT="INSTALLDIRS=vendor DESTDIR='$pkgdir'" \
     PERL_MB_OPT="--installdirs vendor --destdir '$pkgdir'" \
     MODULEBUILDRC=/dev/null
     make manifest
     /usr/bin/perl Makefile.PL
     make
 )
 mkdir -p "$pkgdir/usr/share/perl-printer/docs"
}
check() {
      cd "$srcdir/Printer-$pkgver"
     ( export PERL_MM_USE_DEFAULT=1 PERL5LIB=""
       make test
     )
}

package() {
    cd "$srcdir/Printer-$pkgver"
    make install
    find "$pkgdir" -name .packlist -o -name perllocal.pod -delete
    cp "$srcdir/Printer-$pkgver/README" "$srcdir/Printer-$pkgver/Changes" "$pkgdir/usr/share/perl-printer/docs/";
#    install -m 644 -D Println.3pm "$pkgdir/usr/share/man/man3/Println.3pm"
}

