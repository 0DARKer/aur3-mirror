# Contributor: WAntilles <wantilles@adslgr.com>

pkgname=addon-compatibility-reporter
pkgver=0.8
ffver=4.0b12
acrfilename=add_on_compatibility_reporter-$pkgver-tb+fx+sm.xpi
acrID="compatibility@addons.mozilla.org"
pkgrel=3
pkgdesc="Add-on Compatibility Reporter addon for Firefox Developer Previews & Betas"
arch=('any')
sourcetarballdir=https://addons.mozilla.org/firefox/downloads/file/112137
license=('MPL' 'GPL')
url="https://addons.mozilla.org/addon/15003/"
depends=('firefox=4.0b12')
groups=('firefox-essential-addons' 'firefox-best-addons')
source=($sourcetarballdir/$acrfilename)

build() {
    cd ${srcdir}
    install -m755 -d ${pkgdir}/usr/lib/firefox-$ffver/extensions/$acrID
    cp -a * ${pkgdir}/usr/lib/firefox-$ffver/extensions/$acrID
    rm -f ${pkgdir}/usr/lib/firefox-$ffver/extensions/$acrID/$acrfilename
    cd ${pkgdir}/usr/lib/firefox-$ffver/extensions/$acrID

    # Fix permissions
    find -type d -exec chmod 0755 \{\} \+
    find -type f -exec chmod 0644 \{\} \+
}

md5sums=('e34b0018af5684794a1d03c3e9bd5935')
