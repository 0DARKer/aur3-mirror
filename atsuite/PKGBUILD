# Maintainer: Piotr Mro≈ºek <dnadesigned[at]gmail[dot]com>
pkgname="atsuite"
pkgver=1.0.2
pkgrel=1
pkgdesc="ATSuite (Automatic Testing Suite) is a simple Script.ISOLUTION language interpreter intended for test automation."
arch=(any)
url="http://www.atsuite.com/"
license=('Artistic2.0')
depends=('java-environment')
source=(atsuite
	atsuite.desktop
	atsuite.png
	"http://atsuite.com/download/${pkgver}/ATSuite-${pkgver}.zip")
md5sums=('3cbd20ac4592bc9838f5cf57304e4c4c'
	'03df640615a0e0bca6b7566019c8f7b3'
	'53e60843c9aec343b033f18f048e41fb'
	'fd2e391177c60f55a4704956b89ac82d')

build() {
    # prepare the application files
    mkdir -p ${srcdir}/opt/${pkgname}
    # drop the version number from the main jar file and place in the target directory
    mv ${srcdir}/ATSuite-${pkgver}/ATSuite-${pkgver}.jar ${srcdir}/opt/${pkgname}/${pkgname}.jar
    # copy the rest of the content
    cp -r ${srcdir}/ATSuite-${pkgver}/* ${srcdir}/opt/${pkgname}
    cp ${srcdir}/${pkgname} ${srcdir}/opt/${pkgname}
    cp ${srcdir}/${pkgname}.png ${srcdir}/opt/${pkgname}
    # fix permissions dropped while compression with the zip format
    chmod -R a+x ${srcdir}/opt/${pkgname}/lib/linux
}

package() {
    # add the application files
    cp -r ${srcdir}/opt ${pkgdir}/opt
    # prepare and add the .desktop file
    mkdir -p ${pkgdir}/usr/share/applications
    cp ${pkgname}.desktop ${pkgdir}/usr/share/applications/${pkgname}.desktop
}
