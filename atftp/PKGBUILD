# Contributor: Benjamin Bukowski <benjamin.bukowski@gmail.com>

pkgname=atftp
pkgver=0.7.9.3
pkgrel=1
pkgdesc="a client/server implementation of the TFTP protocol that implements RFCs 1350, 2090, 2347, 2348, and 2349"
arch=('i686' 'x86_64')
url="http://freshmeat.net/projects/atftp/"
license=('GPL')
depends=('pcre' 'readline' 'tcp_wrappers')
makedepends=('bash' 'gcc')
conflicts=('netkit-tftp')
replaces=('netkit-tftp')
backup=()
install=
source=("http://ftp.debian.org/debian/pool/main/a/atftp/atftp_0.7.dfsg.orig.tar.gz"
				"http://ftp.debian.org/debian/pool/main/a/atftp/atftp_0.7.dfsg-9.3.diff.gz")

build() {
  cd $startdir/src/$pkgname-0.7.dfsg
 
  patch -p1 -i "$startdir/src/${pkgname}_0.7.dfsg-9.3.diff"

  ./configure --prefix=/usr --mandir=/usr/share/man \
              --enable-libreadline || return 1
  make || return 1
  make DESTDIR=$startdir/pkg install || return 1

  # remove in.tftpd link as it conflicts with extra/tftp-hpa
  rm "$startdir/pkg/usr/share/man/man8/in.tftpd.8"
  rm "$startdir/pkg/usr/sbin/in.tftpd"
}

md5sums=('aa269044a6f992eca78fee2f6119643c'
         '1ac894b037d5bd13ccd63cd60fcf2f92')
