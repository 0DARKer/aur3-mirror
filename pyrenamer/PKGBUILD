# Contributor: Arkham <arkham at archlinux dot us>
# Contributor: Christoph Zeiler <rabyte*gmail>
# Maintainer: Marcin Karpezo <sirmacik at gmail dot com>
# Maintainer: Lucas Salies Brum <lucas at archlinux dot com dot br>

pkgname=pyrenamer
pkgver=0.6.0
pkgrel=4
pkgdesc="An application for the mass renaming of files"
arch=('any')
url="http://www.infinicode.org/code/pyrenamer/"
license=('GPL')
depends=('gnome-python' 'gconf' 'hachoir-parser')
makedepends=('pkgconfig>=0.9' 'perlxml')
optdepends=('hachoir-metadata' 'python-eyed3')
install=$pkgname.install
source=(http://www.infinicode.org/code/pyrenamer/$pkgname-$pkgver.tar.gz)
md5sums=('a7159f803cd919ab76f17789189c577b')

build() {
    cd $pkgname-$pkgver
    
    find . -type f -exec sed -i 's@#!/usr.*python@#!/usr/bin/python2@' {} \;
    export PYTHON=python2

    ./configure --prefix=/usr --sysconfdir=/etc \
        --with-gconf-schema-file-dir=/usr/share/gconf/schemas
    make || return 1
    make DESTDIR=$pkgdir install || return 1
}
