# Maintainer: loonyphoenix (loonyphoenix at gmail)
# Contributor: Flamelab <panosfilip@gmail.com>
# Fixes and patches: WAntilles <wantilles@adslgr.com>

# This is a modified and (heavily) simplified version of smplayer-svn package. It builds an
# SMPlayer fork named SMPlayer2 by lachs0r, which fixes several issues with mplayer2 
# integration.

pkgname=smplayer2-git
pkgver=20111022
pkgrel=1
pkgdesc="A complete front-end for mplayer2"
url="https://github.com/lachs0r/SMPlayer2"
arch=('i686' 'x86_64')
license=('GPL')
depends=('qt>=4.7.2' 'mplayer')
makedepends=('git')
source=()

_gitroot="git://github.com/lachs0r/SMPlayer2.git"
_gitname="smplayer2"

build()

{
  cd "${srcdir}"

  if [ -d "${_gitname}" ]; then
    cd "${_gitname}"
    git pull
  else
    git clone "${_gitroot}" "${_gitname}" && cd "${_gitname}"
  fi

  cd "${srcdir}"

  if [ -d "${_gitname}-build" ]; then
        rm -rf "${_gitname}-build"
  fi
  cp -r "${_gitname} ${_gitname}-build"
  cd "${_gitname}-build"

  make PREFIX=/usr
}

package() { 
  cd "${srcdir}/${_gitname}-build"
  make PREFIX="${pkgdir}/usr" install
}
