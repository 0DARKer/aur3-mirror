# Contributor: Jens Staal <staal1978@gmail.com>
pkgname=fort77
pkgver=1.18
pkgrel=1
url="http://pubs.opengroup.org/onlinepubs/007908799/xcu/fort77.html"
license=("public domain")
pkgdesc="Compile Fortran code with your favourite C compiler (set CC)."
arch=('any')
depends=('f2c' 'perl')

source=('ftp://ftp.netbsd.org/pub/pkgsrc/packages/QNX/i386/6.4.0_head_20081005/All/fort77-1.18.tgz')
md5sums=('15c529d1b671736191d0a910db535422')

# Designed for gcc, but should work for others. Comment on build to expand list.
# Clang: works
# PCC: works

build() {
  rm -rf $srcdir/build
  cp -ar $srcdir/$pkgname-$pkgver $srcdir/build
  cd $srcdir/build

  sed -e 's~#!/usr/pkg/bin/perl -w~#!/usr/bin/perl -w~' \
     -e 's~# For use with gcc under Linux~# For use with Your
     Favourite Compiler under Linux~' \
     -i $srcdir/build/bin/fort77

}

package() {
  install -d "$pkgdir/usr/bin"
  install -d "$pkgdir/usr/share/man/5man/man1"
  
  install -Dm755 $srcdir/build/bin/fort77 $pkgdir/usr/bin/fort77
  install -Dm644 $srcdir/build/man/man1/fort77.1 $pkgdir/usr/share/man/man5/man1/fort77.1
}
