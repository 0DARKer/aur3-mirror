# Maintainer: Alfredo Ramos <alfredo dot ramos at yandex dot com>
# Contributor: kusakata <shohei atmark kusakata period com>

pkgname=freeminer
pkgver=0.4.9.3
pkgrel=2
pkgdesc="An open source sandbox game inspired by Minecraft."
arch=(
	"$CARCH"
)
url="http://freeminer.org/"
license=(
	"GPL3"
)

depends=(
	"irrlicht"
	"leveldb"
	"libvorbis"
	"openal"
	"sqlite"
	"curl"
	"luajit"
	"freetype2"
	"hicolor-icon-theme"
)
optdepends=()
makedepends=(
	"cmake"
	"make"
)
provides=(
	"${pkgname}=${pkgver}"
)
conflicts=(
	"${pkgname}"
)
replaces=(
	"${pkgname}"
)

install=${pkgname}.install

source=(
	"https://github.com/${pkgname}/${pkgname}/releases/download/${pkgver}/${pkgname}-${pkgver}.zip"
	"${pkgname}.install"
)
md5sums=(
	"a19f720edaaab381a956da16b73b991b"
	"fddfcb7efb5aad784ef04db97bba69e8"
)
sha512sums=(
	"5990c8d4c4ccf1e1a391bbcd08f771c69b88a3fe20acf077744b2b15ea0f75d10ebb79b7a0ebea47abee7eb3140d08cea2daa7f38018854e73a2b335d86cd301"
	"dbb54802291438a256147765325be970379ee761f20b85ec31d878d145dcccd209ae7e521ae1ee5981adff0c7f62a50b582c0d47db59d491db07c9df842e635c"
)

build() {
	# Building package
	cd ${srcdir}/${pkgname}-${pkgver}
	cmake -DCMAKE_INSTALL_PREFIX=/usr
	make -j4
}

package() {
	# Installing package
	cd ${srcdir}/${pkgname}-${pkgver}
	make install DESTDIR=${pkgdir}
}