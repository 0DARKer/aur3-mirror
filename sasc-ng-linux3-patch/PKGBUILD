# Maintainer: vaca
pkgdesc="Sasc-ng linux3 patch"
pkgname=('sascng-linux3-patch')
pkgrel=3
install=sascng-linux3-patch.install
_basekernel=3.0
pkgver=${_basekernel}
license=('GPL')
depends=('linux>=3.0' 'linux<3.1')
makedepends=('linux-headers>=3.0' 'linux-headers<3.1')
arch=(i686 x86_64)
url="http://www.kernel.org"
source=(http://kernelorg.mirrors.tds.net/pub/linux/kernel/v3.0/linux-${_basekernel}.tar.bz2
       	sasc-ng.patch)
md5sums=('398e95866794def22b12dfbc15ce89c0'
         '61441a8b4494b70ef06fde2c8a855818')

build() {
  cd ${srcdir}/linux-$_basekernel
  patch -Np1 -i ${srcdir}/sasc-ng.patch

  cd ${srcdir}/linux-$_basekernel/drivers/media/dvb/dvb-core
  mkdir -p ${pkgdir}/lib/modules/`uname -r`/kernel/drivers/media/dvb/dvb-core
  make -C /lib/modules/`uname -r`/build M=$(pwd) modules
  install -m0644 dvb-core.ko $startdir/pkg/lib/modules/`uname -r`/kernel/drivers/media/dvb/dvb-core
  find "$pkgdir" -name '*.ko' -exec gzip -9 {} \;

 
}

