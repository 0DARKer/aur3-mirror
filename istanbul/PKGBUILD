# Contributor: Angel 'angvp' Velasquez <angvp[at]archlinux.com.ve>
pkgname=istanbul
pkgver=0.2.2
pkgrel=4
pkgdesc="Desktop Session Recorder"
arch=('i686' 'x86_64')
url="http://live.gnome.org/Istanbul"
license=('GPL')
options=('!libtool')
depends=('gstreamer0.10' 'gnome-python-extras' 'gstreamer0.10-good-plugins' \
         'gstreamer0.10-python' 'python-xlib' 'libxdamage' 'libxext' 'libsm')
makedepends=('intltool' 'gettext')
install=istanbul.install
source=(http://zaheer.merali.org/istanbul-$pkgver.tar.bz2)
md5sums=('8ddcfd5a29dcd10fdafc10af9f66848b')
sha1sums=('f9649990429ef4fb083057685fec723c466ee4b0')

build() {
  cd $startdir/src/istanbul-$pkgver
  ./configure --prefix=/usr --disable-schemas-install --with-gconf-schema-file-dir=/usr/share/gconf/schemas
  make || return 1
  make prefix=$startdir/pkg/usr install

  mkdir -p ${startdir}/pkg/usr/share/gconf/schemas
  gconf-merge-schema ${startdir}/pkg/usr/share/gconf/schemas/${pkgname}.schemas ${startdir}/pkg/usr/etc/gconf/schemas/*.schemas
  rm -f ${startdir}/pkg/usr/etc/gconf/schemas/*.schemas
}
