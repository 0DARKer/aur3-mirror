# $Id: pkgbuild-mode.el,v 1.23 2007/10/20 16:02:14 juergen Exp $
# Contributor: m039 <m0391n (at) gmail (dot) com>

pkgname=skype-dynamic
pkgver="2.2.0"
pkgrel=1
pkgdesc="skype dynamic bynary files from the skype.com. Warning: This PKGBUILD file doesn't check the md5 hash sum!"
url="http://www.skype.com/intl/en-us/get-skype/on-your-computer/linux/"
arch=('x86_64' 'i686')          # I didn't test it on i686
license=('custom')

depends=('qt>=4.4.3' 'libxss' 'libxv' 'fontconfig' 'pcre' 'glib2')
makedepends=('wget' 'tar' 'bzip2')

# The dynamic file will be downloaded dynamically.. 
source=("fake")
md5sums=('d41d8cd98f00b204e9800998ecf8427e')

build() {
  cd $startdir/src

  if [ ! -e $pkgname.tar.bz2 ]; then
    wget "http://www.skype.com/go/getskype-linux-beta-dynamic" -O $pkgname.tar.bz2
  fi
  
  mkdir -p $startdir/pkg/opt/$pkgname
  mkdir -p $startdir/pkg/usr/bin

  tar -xjf $pkgname.tar.bz2 --strip-components=1 -C $startdir/pkg/opt/$pkgname

  ln -s /opt/$pkgname/skype $startdir/pkg/usr/bin/skype
}
