# Contributors:
#	Trương Xuân Tính <xuantinh@gmail.com>
#	henning mueller <henning@orgizm.net>

pkgname=pgpool-ii
_pkgname=pgpool-II
pkgver=3.0
pkgrel=2
pkgdesc='pgpool-II is a connection pool server for PostgreSQL'
arch=(i686 x86_64)
url='http://pgfoundry.org/projects/pgpool'
license=(custom)
depends=(postgresql-libs)
options=(!libtool)
replaces=(pgpool)
source=(
	http://pgfoundry.org/frs/download.php/2798/$_pkgname-$pkgver.tar.gz
)
md5sums=(
	d93a896ce185bff7920d4b603a4e9111
)

build() {
	cd $srcdir/$_pkgname-$pkgver
	./configure \
		--prefix=/usr \
		--sysconfdir=/etc/pgpool \
		--mandir=/usr/share/man
	make
}

package() {
	cd $srcdir/$_pkgname-$pkgver

	make DESTDIR=$pkgdir install

#	mkdir -p $pkgdir/{var/{log,run/pgpool},usr/share/doc}
	mkdir -p $pkgdir/{var/run/pgpool,usr/share/doc}

#	install -D $srcdir/$pkgname.rc $pkgdir/etc/rc.d/$pkgname
#	install -D $srcdir/$pkgname.confd $pkgdir/etc/conf.d/$pkgname

	install -D COPYING $pkgdir/usr/share/licenses/$pkgname/LICENSE
	cp -r doc $pkgdir/usr/share/doc/$pkgname

	mv $pkgdir/usr/share/$_pkgname $pkgdir/usr/share/$pkgname
	cp sample/* $pkgdir/usr/share/$pkgname
}
