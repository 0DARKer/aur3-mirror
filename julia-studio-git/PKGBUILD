# Maintainer: Alessandro Andrioni <alessandroandrioni@gmail.com>
pkgname=julia-studio-git
pkgver=20130224
pkgrel=1
pkgdesc="An IDE for the Julia Language"
arch=('i686' 'x86_64')
url="https://github.com/forio/julia-studio"
license=('GPL3')
depends=('qt')
makedepends=('git')
conflicts=('julia-studio')
provides=('julia-studio')

# for the future
#source=("git://github.com/forio/julia-studio.git")
# because the sources are not static, skip checksums
#md5sums=('SKIP')

_gitroot=git://github.com/forio/julia-studio.git
_gitname="julia-studio"

#pkgver() {
  #cd "$srcdir/$_gitname"
  #echo $(git describe --always | sed 's/-/./g')
  # for git, if the repo has no tags, comment out the above and uncommnet the next line:
  #echo "$(git shortlog | grep -c '\s\+').$(git describe --always)"
  # This will give you a count of the total commits and the hash of the commit you are on.
  # Useful if you're making a repository with git packages so that they can have sequential
  # version numbers. (Else a pacman -Syu may not update the package)
#}

build() {
  cd "$srcdir"

  echo "Updating from upstream"
  if [[ -d $_gitname ]]; then
    cd $_gitname && git pull origin && cd ..
  else
    git clone $_gitroot
  fi

  rm -rf $_gitname-build
  git clone $_gitname $_gitname-build

  echo "Compiling"
  cd "$srcdir/$_gitname-build"
  qmake -r
  make
}

package() {
  cd "$srcdir/$_gitname-build"
  make install INSTALL_ROOT=$pkgdir/usr
}

# vim:set ts=2 sw=2 et:
