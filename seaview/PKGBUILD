# Contributor: Nick B <Shirakawasuna at gmail _dot_com>
pkgname=seaview
pkgver=4.2.12
pkgrel=2
pkgdesc="A multiplatform GUI for multiple sequence alignment and molecular phylogeny."
arch=('i686' 'x86_64')
url="http://pbil.univ-lyon1.fr/software/seaview.html"
license=('custom')
depends=('clustalw' 'glibc' 'fltk' 'hicolor-icon-theme' 'muscle' 'phyml')
install='seaview.install'
source=('http://pbil.univ-lyon1.fr/software/seaview_data/seaview.tar.gz'
		'http://ftp.de.debian.org/debian/pool/non-free/s/seaview/seaview_4.2.10-1.debian.tar.gz'
		'seaview_black.patch')

build() {

  cd $srcdir/seaview
  patch -p1 < $srcdir/debian/patches/10_makefile.patch
  patch -p0 < $srcdir/seaview_black.patch
  make || return 1
  gzip ./seaview.1
  mkdir -p $pkgdir/usr/share/seaview
  mkdir -p $pkgdir/usr/bin/
  install -D -m755 $srcdir/seaview/seaview $pkgdir/usr/bin/seaview
  install -D -m644 $srcdir/seaview/seaview.xpm $pkgdir/usr/share/pixmaps/seaview.xpm
  install -D -m644 $srcdir/seaview/seaview.html $pkgdir/usr/share/seaview/seaview.html
  install -D -m644 $srcdir/seaview/seaview.1.gz $pkgdir/usr/share/man/man1/seaview.1.gz

  install -D -m644 $srcdir/debian/seaview.desktop $pkgdir/usr/share/applications/seaview.desktop
  install -D -m644 $srcdir/debian/seaview.svg $pkgdir/usr/share/icons/hicolor/scalable/apps/seaview.svg
  install -D -m644 $srcdir/debian/seaview.sharedmimeinfo $pkgdir/usr/share/mime/packages/seaview.xml
  install -D -m644 $srcdir/debian/copyright $pkgdir/usr/share/licenses/seaview/copyright

#  echo "#!/bin/bash" > $pkgdir/usr/bin/seaview
#  echo "" >> $pkgdir/usr/bin/seaview
#  echo "cd /usr/share/seaview" >> $pkgdir/usr/bin/seaview
#  echo "./seaview" >> $pkgdir/usr/bin/seaview
#  chmod 755 $pkgdir/usr/bin/seaview

}

md5sums=('17075715ed7ead1c666943c9f77548bf'
         'f4971c580a66af07b9da90c88a40f41a'
         '9cb1f5dbdcacb7521ce852e9fe5a9482')
