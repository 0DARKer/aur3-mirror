# Contributor: shild <sxp@bk.ru>
# Contributor: Marcel Wysocki <maci@satgnu.net>
# Maintainer: Marek Skrobacki <skrobul@skrobul.com>

pkgname=dynamips
pkgver=0.2.8
pkgrel=3
pkgdesc="Cisco 7200/3600 Simulator - emulates MIPS64 processor and CISCO hardware"
arch=('i686' 'x86_64')
url="http://www.ipflow.utc.fr/index.php/Cisco_7200_Simulator"
license=('GPL')
depends=('libpcap')
install=dynamips.install

# libelf linked statically
makedepends=('elfutils')

source=(http://switch.dl.sourceforge.net/project/gns-3/Dynamips/0.2.8-community/dynamips-0.2.8-community.source.zip
	dynamips_0.2.8RC2.diff)

md5sums=('d45a2e039095966818356fc78cab9c8f'
         'cfaa5420b02624bb79baee92d19d1037')
build() {
  if [ "$CARCH" == "x86_64" ]; then
  export DYNAMIPS_ARCH=amd64
  fi

  cd ${srcdir}/dynamips-0.2.8-community/
  patch -p1 < ../dynamips_0.2.8RC2.diff
  make || return 1
  make DESTDIR=${pkgdir}/usr install
}
