# Maintainer: Lauri Niskanen <ape@ape3000.com>
# Contributor: Jan de Groot <jgc@archlinux.org>
# Contributor: Alexander Baldeck <Alexander@archlinux.org
pkgname=xf86-input-evdev-remap
pkgver=2.3.2
pkgrel=2
pkgdesc="X.org evdev input driver patched to support keycode remapping"
arch=(i686 x86_64)
url="http://www.thenautilus.net/SW/xf86-input-evdev/"
license=('custom')
depends=('glibc')
makedepends=('pkgconfig' 'xorg-server>=1.7.0' 'inputproto>=2.0' 'randrproto>=1.3.1')
provides=("xf86-input-evdev=$pkgver")
conflicts=('xorg-server<1.7.0' 'xf86-input-evdev')
options=('!libtool')
groups=('xorg-input-drivers')
source=(http://xorg.freedesktop.org/releases/individual/driver/xf86-input-evdev-${pkgver}.tar.bz2 code-remap.patch)
sha1sums=('b3512cd2747727ec06733997067c7ff15f602115' 'f7ffd05c95598884443013b9fdde487bbf9a5462')

build() {
  cd "${srcdir}/xf86-input-evdev-${pkgver}"
  patch -Np0 -i ${srcdir}/code-remap.patch
  ./configure --prefix=/usr || return 1
  make || return 1
  make DESTDIR="${pkgdir}" install || return 1
  install -m755 -d "${pkgdir}/usr/share/licenses/${pkgname}"
  install -m644 COPYING "${pkgdir}/usr/share/licenses/${pkgname}/" || return 1
}
