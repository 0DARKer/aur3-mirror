pkgname=driveclient
pkgver=1.05
release=005848
pkgrel=2
pkgdesc="An agent for Rackspace Cloud Backup"
url="http://www.rackspace.com/knowledge_center/article/rackspace-cloud-backup-install-the-agent"
license=('Mixed')
arch=('any')
backup=('etc/driveclient/cacert.pem')
source=("http://agentrepo.drivesrvr.com/tar/driveclient-${pkgver}.${release}.tar.bz2" driveclient.service)
sha1sums=('c0b5bb3e96977f426b5943c4eb22ee86959b7b27' '8ab02182978d0665d7cd96f1b1e174df6b6c817e')

install=install

package() {
	install -D "${srcdir}/${pkgname}-${pkgver}.${release}/driveclient" "${pkgdir}/usr/local/bin/driveclient"
	install -D "${srcdir}/${pkgname}-${pkgver}.${release}/cacert.pem" "${pkgdir}/etc/driveclient/cacert.pem"
	install -D "${srcdir}/${pkgname}-${pkgver}.${release}/../../driveclient.service" "${pkgdir}/etc/systemd/system/driveclient.service"
	install -D -m0555 "${srcdir}/${pkgname}-${pkgver}.${release}/driveclient.init.arch" "${pkgdir}/etc/rc.d/driveclient"
	# still need directory which is not made by the above
	install -d ${pkgdir}/etc/systemd/system/multi-user.target.wants/
	ln -s "/etc/systemd/system/driveclient.service" "${pkgdir}/etc/systemd/system/multi-user.target.wants/driveclient.service"
}
