# Maintainer: cb7
# Updated October 15, 2011
pkgname=vitunes
pkgver=2.2
pkgrel=1
pkgdesc="vitunes is a curses-based playlist manager and media player for *nic operating systems with vim-like keybindings."
arch=('i686' 'x86_64')
install='update.patch'
license=('custom')
url="http://vitunes.org"
depends=('taglib' 'mplayer' 'ncurses')
makedepends=('git' 'make' 'gcc')
source=()
_hgrepo=https://github.com/ryanflannery/vitunes
_hgmod=vitunes

build() {
	rm -rf $_hgmod
	git clone $_hgrepo $_hgmod
	msg "Starting make..."
	cp ${startdir}/${install} ${srcdir}/$_hgmod/update.patch
	cd ${srcdir}/$_hgmod
	patch -p1 < update.patch
	make LDEPS='`taglib-config --libs` -ltag_c -lz -lstdc++' LDFLAGS='-lm -lncursesw -lutil $(LDEPS)' linux || return 1
	install -D -m 0555 vitunes $pkgdir/usr/bin/vitunes
	install -D -m 0444 vitunes.1 $pkgdir/usr/share/man/man1/vitunes.1
	rm -rf ${srcdir}/$_hgmod
}
