# Maintainer: Lex Black <autumn-wind at web dot de>

pkgname=python2-eispice-git
pkgver=20121213
pkgrel=1
pkgdesc="Clone of Berkley SPICE 3 Simulation Engine. Git version"
url="http://www.thedigitalmachine.net/eispice.html"
license=('GPL')
arch=('i686' 'x86_64')
makedepends=('python2' 'git')
depends=('python2' 'python2-numpy' 'python2-scipy')
conflicts=('eispice' 'python2-eispice')
provides=('eispice')
source=('headerfiles.patch')
md5sums=('4b1997b9d48ecf0258e2260a93179fd5')

_gitroot=git://github.com/Narrat/eispice
_gitname=eispice

#build() {
package() {
	msg "Connecting to the GIT server...."
	if [ -d $_gitname ]; then
		(cd $_gitname && git pull origin)
		rm -rf ${_gitname}-build
	else
		git clone $_gitroot #-b experimental
	fi

	cp -r ${_gitname} ${_gitname}-build 
	cd ${_gitname}-build
	
	# Applying patch for header files and python transition
	msg "Patching..."
	patch -p1 <$srcdir/headerfiles.patch

	msg "Starting build/packaging process."
	python2 setup.py install --root=${pkgdir}
	#make DESTDIR="$pkgdir/" install
}
