# Maintainer: Lex Black <autumn-wind at web dot de>

_pkgname=eispice
pkgname=python2-eispice-git
pkgver=20130111
pkgrel=2
pkgdesc="Clone of Berkley SPICE 3 Simulation Engine. Git version"
url="http://www.thedigitalmachine.net/eispice.html"
license=('GPL')
arch=('i686' 'x86_64')
makedepends=('python2' 'git')
depends=('python2-numpy' 'python2-scipy')
conflicts=('eispice' 'python2-eispice')
provides=('python2-eispice')
source=('git://github.com/Narrat/eispice#branch=master'
	'headerfiles.patch')
md5sums=('SKIP'
	'4b1997b9d48ecf0258e2260a93179fd5')


pkgver() {
	cd $_pkgname
	git log -1 --date=short | grep -Eo '[[:digit:]]{1,4}\-[[:digit:]]{1,2}\-[[:digit:]]{1,2}' | sed -e 's#-##g'
	#git describe | sed 's/^v//;s/-/./g'
}

#build() {
package() {
	cd $srcdir/${_pkgname}
	
	# Applying patch for header files and python transition
	msg "Patching..."
	patch -p1 <$srcdir/headerfiles.patch

	msg "Starting build/packaging process."
	python2 setup.py install --root=${pkgdir}
	#make DESTDIR="$pkgdir/" install
}
