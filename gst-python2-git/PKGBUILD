# Maintainer: Kerrick Staley <mail@kerrickstaley.com>

pkgname=gst-python2-git
pkgver=20121220
pkgrel=1
pkgdesc='GStreamer Python 2 overrides for the gobject-introspection-based pygst bindings (git version)'
arch=('i686' 'x86_64')
license=('LGPL')
depends=('gstreamer' 'python2' 'gobject-introspection')
url='http://gstreamer.freedesktop.org/modules/gst-python.html'

_gitroot='git://anongit.freedesktop.org/gstreamer/gst-python'
_gitname='gst-python'

build() {
    cd "$srcdir"
    
    msg 'Connecting to GIT server...'
    if [[ -d "$_gitname" ]]; then
        (cd "$_gitname" && git pull origin)
    else
        git clone --depth=1 "$_gitroot" "$_gitname"
    fi
    msg 'GIT checkout done'
    msg 'Starting make...'
}

package() {
    cd "$srcdir/$_gitname"
    
    ./autogen.sh --prefix=/usr PYTHON=/usr/bin/python2
    make || return 1
    make DESTDIR="$pkgdir" install || return 1
}
