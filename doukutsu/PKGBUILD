# Maintainer: Victor Feight <vrfeight3 at gmail dot com>
# Contributor: Frozen Fox <frozenfoxz at gmail dot com>

pkgname=doukutsu
pkgver=1.01
pkgrel=7
pkgdesc="Cave Story linux port by Simon Parzer and Peter Mackay"
url="http://doukutsu.livejournal.com"
arch=('i686' 'x86_64')
if [ "$CARCH" == "i686" ]; then
    depends=('sdl')
else
    depends=('lib32-sdl')
fi
license=('freeware')
source=("http://www.miraigamer.net/cavestory/downloads/linuxdoukutsu-$pkgver.tar.bz2"
    "http://www.cavestory.org/downloads/DoConfigure.zip"
	"doukutsu.desktop"
	"doukutsu-config.desktop"
	"doukutsu.png"
	"doukutsu")
md5sums=('ec08da7c45419bc7740b8149ec7340cf'
         '4f07e83ff8b775966f7b91440bb0a7ca'
         'd2633fb77949eb404f3199191e328bf3'
         'ca872e3276959cb523f57f0785c1a034'
         'd73dee54b24f2ceb21a50e2c8f71da10'
         '0bad0312fd7f924a333ff34bde61d138')
build() {
	cd "${srcdir}/linuxDoukutsu-1.01"

	install -dm755 ${pkgdir}/{opt/${pkgname},usr/share/{doc/${pkgname},applications}} || return 1
	cp -r {Config.dat,data,doc,doukutsu{,.bin}} "${pkgdir}/opt/${pkgname}/" || return 1

	install -Dm644 ${srcdir}/*.desktop "${pkgdir}/usr/share/applications/" || return 1
	install -Dm644 ${srcdir}/doukutsu.png "${pkgdir}/usr/share/pixmaps/doukutsu.png" || return 1
	install -Dm644 doc/* "${pkgdir}/usr/share/doc/${pkgname}/" || return 1

    install -Dm755 ${srcdir}/DoConfigure "${pkgdir}/opt/${pkgname}/DoConfigure" || return 1 
	install -Dm755 ${srcdir}/doukutsu "${pkgdir}/usr/bin/doukutsu" || return 1
	ln -s ${pkgdir}/usr/bin/doukutsu "${pkgdir}/usr/bin/cave-story" || return 1
}
