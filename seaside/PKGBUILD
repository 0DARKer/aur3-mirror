# Contributor: Daniel Milde <daniel@milde.cz>
pkgname=seaside
pkgver=3.0.3
pkgrel=1
pkgdesc="Web application framework written in Smalltalk"
arch=(i686 x86_64)
url="http://seaside.st/"
license=('MIT')
##if [ "$CARCH" = "x86_64" ]; then
##        depends=('lib32-alsa-lib' 'lib32-libvorbis' 'lib32-pango' 'lib32-mesa' 'lib32-nas' 'lib32-dbus-core' 'lib32-libxml2')
##else
##        depends=('alsa-lib' 'libvorbis' 'pango' 'mesa' 'nas' 'dbus-core' 'libxml2')
##fi

source=(http://www.seaside.st/distributions/Seaside-${pkgver}-OneClick.zip run.sh seaside.desktop)
md5sums=('97b52c81e54a68c942715060173bba50'\
		 'f202757123b2e587d7f7efde8c2958b9'\
		 'e33ed6f2119d9cd088803cf8b8c3b997')


build() {
	cd ${srcdir}/Seaside.app/
	rm -fr ${srcdir}/Seaside.app/Contents/MacOS/
	rm -fr ${srcdir}/Seaside.app/Contents/Windows/
	
	install -d --group=users ${pkgdir}/usr/share/seaside
	install -d ${pkgdir}/usr/bin/
	
	cp -fr ${srcdir}/Seaside.app/* ${pkgdir}/usr/share/seaside
	
	chgrp -R users ${pkgdir}/usr/share/seaside
	chmod -R 775 ${pkgdir}/usr/share/seaside
	
	install -Dm755 ${srcdir}/run.sh ${pkgdir}/usr/bin/seaside

	install -d ${pkgdir}/usr/share/applications
	install -Dm644 ${srcdir}/../${pkgname}.desktop ${pkgdir}/usr/share/applications/${pkgname}.desktop
	
	install -d ${pkgdir}/usr/share/pixmaps
	install ${srcdir}/Seaside.app/Contents/Resources/Squeak.png ${pkgdir}/usr/share/pixmaps/${pkgname}.png
}


