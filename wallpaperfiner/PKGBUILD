# Author: Peter Deak <hyper80[at]gmail[dot]com>
# Maintainer: Tomasz "ludvick' Niedzielski <ludvick0[at]gmail[dot]com>

pkgname=wallpaperfiner
_webname=wpfiner
_zipname=WallpaperFiner
pkgver=0.931
pkgrel=2
pkgdesc="Wallpaper Finer is small and easy to use utility which adjust images to fit desktop, and may set them as wallpaper"
arch=('i686' 'x86_64')
url='http://hyperprog.com/wpfiner/'
license=('GPL2')
depends=('qt>=4.8.0')
makedepends=('make')
source=(http://hyperprog.com/$_webname/$_webname-source-$pkgver.zip)
noextract=($source)
md5sums=('dd15971d91f8d2dabec89454c9f5db7e')

build() {
	cd "${srcdir}/${_zipname}"

	qmake -makefile
	make
}

package() {
	mkdir -p $pkgdir/usr/share/wallpaperfiner

	cd "${srcdir}/${_zipname}"

	install -Dm755 wallpaperfiner "$pkgdir/usr/bin/wallpaperfiner"
	install -Dm644 *.qm "$pkgdir/usr/share/wallpaperfiner/"
	install -Dm644 wpfiner.png "$pkgdir/usr/share/pixmaps/wallpaperfiner.png"

	cat > wallpaperfiner.desktop << EoF
[Desktop Entry]
Name=Wallpaper Finer
Comment=A small and easy to use utility which adjust images to fit desktop, and may set them as wallpaper
Type=Application
Categories=Qt;KDE;Graphics;
Icon=/usr/share/pixmaps/wallpaperfiner.png
Exec=/usr/bin/wallpaperfiner
Terminal=false
EoF

	install -Dm644 wallpaperfiner.desktop "$pkgdir/usr/share/applications/wallpaperfiner.desktop"
}