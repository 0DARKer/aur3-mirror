--- SConstruct.orig	2005-11-06 12:23:24.000000000 +0100
+++ SConstruct	2010-10-30 01:02:30.000000000 +0200
@@ -7,15 +7,15 @@
###############################################
# options
ipager_optfile = [ 'scons.opts', 'user.opts' ]
-ipager_options = Options(ipager_optfile)
-ipager_options.AddOptions(
- BoolOption('debug', 'build debug version', 0),
- BoolOption('debug_events', 'debug xserve events', 0),
+ipager_options = Variables(ipager_optfile)
+ipager_options.AddVariables(
+ BoolVariable('debug', 'build debug version', 0),
+ BoolVariable('debug_events', 'debug xserve events', 0),

- BoolOption('xinerama', 'support xinerama', 0),
+ BoolVariable('xinerama', 'support xinerama', 0),

- PathOption('PREFIX', 'install-path base', '/usr/local'),
- PathOption('DESTDIR', 'install to $DESTDIR/$PREFIX', '/')
+ PathVariable('PREFIX', 'install-path base', '/usr'),
+ PathVariable('DESTDIR', 'install to $DESTDIR/$PREFIX', '/')
)


@@ -31,9 +31,9 @@
ipager_env = Environment(options = ipager_options, ENV = os.environ)

ipager_env.Append(
- CPPFLAGS = [ '-Wall' ],
- CPPPATH = [ '/usr/X11R6/include' ],
- LIBPATH = ['/usr/X11R6/lib']
+ CPPFLAGS = [ '-Wall', '-march=native', '-O' ],
+ CPPPATH = [ '/usr/include' ],
+ LIBPATH = ['/usr/lib']
)

ipager_options.Update(ipager_env)
@@ -115,7 +115,7 @@
else:
print "yes"
ipager_env.AppendUnique(
- CPPPATH = imlib2_env.Dictionary()['CPPPATH'], 
+ CPPPATH = ['/usr/include'],
CCFLAGS = imlib2_env.Dictionary()['CCFLAGS'], 
LIBPATH = imlib2_env.Dictionary()['LIBPATH'],
LIBS = imlib2_env.Dictionary()['LIBS']
--- pager.cpp.orig	2005-11-06 12:23:24.000000000 +0100
+++ pager.cpp	2010-10-30 01:58:03.000000000 +0200
@@ -266,11 +266,12 @@
/* Window updates go here */
if (m_window_update.updateNetWindowList())
updateNetWindowList();
- if (m_window_update.displayIcons())
+ if (m_window_update.displayIcons()) {
if (m_window_update.motion())
displayIcons(m_window_update.getX(), m_window_update.getY());
else
displayIcons();
+ }