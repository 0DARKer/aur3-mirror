From d6fef27b4b0f2294572f00ed845804b353d4ddef Mon Sep 17 00:00:00 2001
From: Pale Moon <git-repo@palemoon.org>
Date: Thu, 5 Feb 2015 15:24:43 +0100
Subject: [PATCH] Fix Linux build issues for removal of crash reporter
 components.

---
 gfx/gl/GLContextProviderGLX.cpp   | 2 --
 toolkit/xre/nsX11ErrorHandler.cpp | 1 +
 2 files changed, 1 insertion(+), 2 deletions(-)

diff --git a/gfx/gl/GLContextProviderGLX.cpp b/gfx/gl/GLContextProviderGLX.cpp
index 5caeb7c..5f1ad3c 100644
--- a/gfx/gl/GLContextProviderGLX.cpp
+++ b/gfx/gl/GLContextProviderGLX.cpp
@@ -109,13 +109,11 @@ GLXLibrary::EnsureInitialized(LibType libType)
             return false;
         }
 
-        ScopedGfxFeatureReporter reporter(libGLfilename, forceFeatureReport);
         mOGLLibrary = PR_LoadLibrary(libGLfilename);
         if (!mOGLLibrary) {
             NS_WARNING("Couldn't load OpenGL shared library.");
             return false;
         }
-        reporter.SetSuccessful();
     }
 
     if (PR_GetEnv("MOZ_GLX_DEBUG")) {
diff --git a/toolkit/xre/nsX11ErrorHandler.cpp b/toolkit/xre/nsX11ErrorHandler.cpp
index aefc6ff..22be568 100644
--- a/toolkit/xre/nsX11ErrorHandler.cpp
+++ b/toolkit/xre/nsX11ErrorHandler.cpp
@@ -8,6 +8,7 @@
 #include "prenv.h"
 #include "nsXULAppAPI.h"
 #include "nsDebug.h"
+#include "nsString.h" // for nsAutoCString
 
 #include "mozilla/X11Util.h"
 #include <X11/Xlib.h>
