#Contributor:Andrea Tarocchi <valdar@email.it>
 pkgname=wesnoth-devel
 pkgver=1.9.3
 pkgrel=1
 pkgdesc="development version of a turn-based strategy game on a fantasy world"
 arch=('i686' 'x86_64')
 url="http://www.wesnoth.org/"
 license=('GPL')
 depends=('pango' 'sdl_ttf' 'sdl_net' 'sdl_mixer' 'sdl_image' 'boost' 'fribidi' 'ruby' 'dbus-core')
 install=${pkgname}.install
 source=(http://downloads.sourceforge.net/sourceforge/wesnoth/wesnoth-$pkgver.tar.bz2 \
 ${pkgname}.desktop \
 wesnoth_editor-devel.desktop \
 wesnoth-devel-icon.xpm \
 wesnoth-devel_editor-icon.xpm)
 md5sums=('dee499b683b8370f3e419c7c7a5a3f9b'
'a906eae5d541a51de77038469b1f794b'
'36c3cbe51dedaa07d2f16b35338664a5'
'b73f4fdefd3e7daa158cce278f11be64'
'931e7443fe37b2862ca59f65ded74a0b')
 
 build() {
 
 #CONFIGURING
 cd "${srcdir}/wesnoth-$pkgver"
 ./autogen.sh
 ./configure --prefix=/usr --enable-tools --enable-editor --enable-server \
 --with-preferences-dir=.wesnoth-devel --program-suffix=-devel --with-datadir-name=wesnoth-devel \
 --enable-campaign-server --with-fifodir=/var/run/wesnothd-devel --docdir=/usr/share/doc/wesnoth-devel \
 --mandir=/usr/share/man/wesnoth-devel
 #--disable-strict-compilation || return 1
 
 #PATCHING for libpng compatibility
 #cd ..
 #patch -p0 < ../libpng_compatibility_patch.patch || return 1
 
 #MAKING datarootdir=/usr/share datadir=/usr/share || return 1 might be another useful otion
 cd "${srcdir}/wesnoth-$pkgver"
 make
 
 # make pkgpythondir=${pkgdir}/usr/lib/python`python -c \
 # "import sys; print '%d' % (sys.version_info[0]);" \
 # `.`python -c "import sys; print '%d' % (sys.version_info[1]);" \
 # `/site-packages/wesnoth DESTDIR="${pkgdir}" install || return 1
 
 make DESTDIR="${pkgdir}" install
 
 #INSTALLING of menu entry and icons:
 install -D -m644 ../../wesnoth-devel.desktop ${pkgdir}/usr/share/applications/wesnoth-devel.desktop
 install -D -m644 ../../wesnoth-devel-icon.xpm ${pkgdir}/usr/share/pixmaps/wesnoth-devel-icon.xpm
 install -D -m644 ../../wesnoth-devel-icon.xpm ${pkgdir}/usr/share/icons/wesnoth-devel-icon.xpm
 
 install -D -m644 ../../wesnoth_editor-devel.desktop ${pkgdir}/usr/share/applications/wesnoth_editor-devel.desktop
 install -D -m644 ../../wesnoth-devel_editor-icon.xpm ${pkgdir}/usr/share/pixmaps/wesnoth-devel_editor-icon.xpm
 install -D -m644 ../../wesnoth-devel_editor-icon.xpm ${pkgdir}/usr/share/icons/wesnoth-devel_editor-icon.xpm
 
 chmod +x ${pkgdir}/var/run/wesnothd-devel
 chmod o+r ${pkgdir}/var/run/wesnothd-devel
 
 rm -f ${pkgdir}/usr/share/applications/wesnoth.desktop
 rm -f ${pkgdir}/usr/share/applications/wesnoth_editor.desktop
 rm -f ${pkgdir}/usr/share/icons/wesnoth-icon.png
 rm -f ${pkgdir}/usr/share/icons/wesnoth_editor-icon.png
 }