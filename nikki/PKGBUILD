# Maintainer: David Zaragoza <david@zaragoza.com.ve>
pkgname=nikki
pkgver=0.4.1
pkgrel=2
pkgdesc="Nikki and the robots: A game where you take the role of Nikki and try to cross those evil plans on behalf of a secret organization."
arch=(i686 x86_64)
url="http://joyridelabs.de/game/"
license=('LGPL')
depends=(curl libpng12 libsndfile gmp4 nas openal qt)
if test "$CARCH" == x86_64; then
  source=(http://updates.joyridelabs.de/nikki/default/linux/x86_64/$pkgname.tar.gz
          run.sh
	  nikki.desktop)
  md5sums=('a4c0e4528f820fe901e48ff83e9b9b5f'
           'b6738126010d04292a3218ee46f2c554'
           'c82bb275b339252b49d629528111efc1')
fi
if test "$CARCH" == i686; then
  source=(http://updates.joyridelabs.de/nikki/default/linux/i386/$pkgname.tar.gz 
          run.sh
          nikki.desktop)
  md5sums=('89da93478f5c51256e7f3f09e883eeb9'
           'b6738126010d04292a3218ee46f2c554'
           'c82bb275b339252b49d629528111efc1')
fi

package() {
  mkdir -p "${pkgdir}/usr/bin"
  mkdir -p "${pkgdir}/opt"
  install -D $startdir/run.sh "${pkgdir}/usr/bin/nikki"
  cp -r "nikki" "$pkgdir/opt"
  rm $pkgdir/opt/nikki/libaudio.so.2 $pkgdir/opt/nikki/libgmp.so.3 $pkgdir/opt/nikki/libopenal.so.1 $pkgdir/opt/nikki/libpng12.so.0 $pkgdir/opt/nikki/libQtCore.so.4 $pkgdir/opt/nikki/libQtGui.so.4 $pkgdir/opt/nikki/libQtOpenGL.so.4
  install -Dm 644 $srcdir/nikki/data/png/icon-64.png $pkgdir/usr/share/pixmaps/nikki.png
  install -Dm 644 $startdir/nikki.desktop $pkgdir/usr/share/applications/nikki.desktop
}
