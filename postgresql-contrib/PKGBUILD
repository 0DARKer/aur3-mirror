# $Id: PKGBUILD,v 1.11 2008/06/10 09:30:10 $
# Maintainer: Kravchuk Sergei <alfss.obsd@gmail.com>
pkgname=postgresql-contrib
pkgver=8.4.4
pkgrel=1
pkgdesc="PostgreSQL Contrib Package"
arch=(i686 x86_64)
license=('BSD')
url="http://www.postgresql.org/"
depends=('openssl>=1.0.0a' 'zlib' 'readline' 'perl' 'python' 'tcl' 'libxml2' 'libxslt' 'pam' 'postgresql>=8.4.4')
options=('!makeflags')
source=(ftp://ftp.postgresql.org/pub/source/v${pkgver}/postgresql-${pkgver}.tar.bz2)
md5sums=('4bf2448ad965bca3940df648c02194df')

build() {
  cd $startdir/src/postgresql-$pkgver || return 1

  # configure
  ./configure  --prefix=/usr --with-openssl --datadir=/usr/share/postgresql \
     --with-libxml --with-libxslt --with-pam --with-ldap --with-perl --with-python --with-tcl || return 1

  # make and install
  make || return 1

  cd $startdir/src/postgresql-$pkgver/contrib

  make || return 1

  make DESTDIR=${startdir}/pkg install || return 1
  rm ${startdir}/pkg/usr/lib/postgresql/adminpack.so                                                                       
  rm ${startdir}/pkg/usr/share/postgresql/contrib/adminpack.sql                                                          
  rm ${startdir}/pkg/usr/share/postgresql/contrib/uninstall_adminpack.sql
}
