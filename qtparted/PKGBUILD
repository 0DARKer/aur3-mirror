# Contributor: Piotr Rogo≈ºa <rogoza dot piotr at gmail dot com>
# Created: 21/09/2010
pkgname=qtparted
pkgver=0.4.5
pkgrel=3
pkgdesc='QTParted is a Partition Magic clone written in C++ using the Qt toolkit'
arch=('i686' 'x86_64')
url='http://qtparted.sourceforge.net/'
license=('GPL2')
depends=('parted>=1.6' 'qt3' 'e2fsprogs' 'dosfstools' 'jfsutils' 'progsreiserfs' 'xfsprogs')
makedepends=('ntfsprogs')
optdepends=('gksu: to run gparted directly from menu')
source=(http://downloads.sourceforge.net/sourceforge/${pkgname}/${pkgname}-${pkgver}.tar.bz2
ped_free.diff.gz
version.patch.diff.gz
ftp://ftp.debian.org/debian/pool/main/q/qtparted/qtparted_0.4.5-4.diff.gz)

build() {
  cd "$srcdir/$pkgname-$pkgver"

  gunzip ${srcdir}/version.patch.diff.gz -c | patch -p0 || return 1
  gunzip ${srcdir}/qtparted_0.4.5-4.diff.gz -c | patch -p1 || return 1
  gunzip ${srcdir}/ped_free.diff.gz -c | patch -p0 || return 1

  ./configure --prefix=/usr --mandir=/usr/share/man
  make || return 1
  make DESTDIR="${pkgdir}" install || return 1
  sed -i -e "s:Exec=su-to-root -X -c /usr/sbin:Exec=gksu /usr/sbin:g" ${pkgdir}/usr/share/applications/qtparted.desktop || return 1
}

# vim:set ts=2 sw=2 et ft=sh:
md5sums=('4541c0aa5475ba38d3cc518c921c8a34'
         '27f6297f0913bc664935d7add8b867f6'
         'd07200d76f1277ec3c0dc4557df7c41e'
         'd950d41d24448ec50f503067dd22d5c6')
