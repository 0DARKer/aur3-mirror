# Maintainer: Daniel Sandman <revoltism@gmail.com>

pkgname=budgie-git
pkgver=2.r127.gd2c453d
pkgrel=1
pkgdesc="A simple and distraction free GTK+ media player created by Ikey Doherty. Written in C."
arch=('i686' 'x86_64')
url="http://ikeydoherty.github.io/budgie/"
license=('GPL2')
depends=('gtk3>=3.12' 'glib2' 'gst-plugins-base-libs' 'id3lib' 'xdg-user-dirs' 'gdbm' 'dconf' 'gsettings-desktop-schemas' 'desktop-file-utils')
makedepends=('git')
conflicts=('musicplayer' 'budgie')
provides=('budgie-media-player')
install='budgie-git.install'
source=("$pkgname"::'git+https://github.com/evolve-os/budgie-media-player.git#branch=master')
md5sums=('SKIP')

pkgver() {
     cd "$srcdir/$pkgname"
     git describe --long --tags | sed -r 's/^v//;s/([^-]*-g)/r\1/;s/-/./g'
     #echo $(git describe --tags) | sed -e 's/^v//' -e 's/[-: ]/./g'
}

build() {
     cd "$srcdir/$pkgname"
     ./autogen.sh
     ./configure --prefix=/usr --disable-schemas-compile
     make
}

package() {
     cd "$srcdir/$pkgname"
     make PREFIX=/usr DESTDIR="$pkgdir" install
     install -D -m644 README.mkd "$pkgdir/usr/share/doc/$pkgname/README"
     install -D -m644 COPYING "$pkgdir/usr/share/licenses/$pkgname/COPYING"
}
