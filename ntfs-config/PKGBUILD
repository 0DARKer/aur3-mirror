# Maintainer: Limao Luo <luolimao@gmail.com>
# Contributor: Joao Cordeiro <jlcordeiro@gmail.com>

pkgname=ntfs-config
pkgver=1.0.1
pkgrel=8
pkgdesc="Enable/disable NTFS write support with a simple click"
arch=(any)
url=http://flomertens.free.fr/ntfs-config/
license=(GPL2)
depends=(ntfs-3g pygtk udev)
makedepends=(perl-xml-parser)
optdepends=('hal: external devices'
    'gnome-mount: external devices (or any other that can handle ntfs-3g using hal as backend)'
    'device-mapper: crypt, lvm and raid devices'
    'e2fsprogs: blkid')
source=(http://l42y.googlecode.com/files/$pkgname-$pkgver.tar.gz $pkgname.diff)
sha256sums=('611dbcfa7aebf44ef8ad170d16952e256aec055e4f2cb334cf20a12a75bbdcb2'
    '9678a4ba11dc0b9ff72aa1722cc837a1303abe19a96e2268d89bd170e71dde77')
sha512sums=('f09cd863b35dfdd53ee24b2f663bf356de5b270f13020553002aadf68c84ea2d2aa704a3b3e7f8e4d0cb468eb5dfc568229cc04c8555ba2848142959e89f0b52'
    '15e79833ed153ab0625ba0969c9d3dbeb2b27f82e71496fa1b8390d7c3d3d251706ece0387b2a14eb97215f0bdd48f4182fadc52ebe452654938fc77a1806d36')

build() {
    cd "$srcdir"/$pkgname-$pkgver/
    msg2 "patching configuration file..."
    patch -Np2 -i ../$pkgname.diff
    msg2 "running autoconf..."
    autoconf
    msg2 "configuring..."
    ./configure --prefix=/usr
    msg2 "starting make..."
    make
}

package() {
    cd "$srcdir"/$pkgname-$pkgver/
    make DESTDIR="$pkgdir" install
}
