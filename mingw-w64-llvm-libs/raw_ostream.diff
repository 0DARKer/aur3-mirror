--- raw_ostream.cpp.old	2013-03-27 11:30:00.000000000 -0700
+++ raw_ostream.cpp	2013-06-15 18:28:24.932143426 -0700
@@ -222,7 +222,7 @@
 }
 
 raw_ostream &raw_ostream::operator<<(double N) {
-#ifdef _WIN32
+#if defined(_WIN32) && !defined(__MINGW32__) && !defined(__MINGW64__)
   // On MSVCRT and compatible, output of %e is incompatible to Posix
   // by default. Number of exponent digits should be at least 2. "%+03d"
   // FIXME: Implement our formatter to here or Support/Format.h!
