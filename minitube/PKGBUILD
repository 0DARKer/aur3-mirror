# Maintainer: Frikilinux <frikilinux at frikilinux.com.ar>

pkgname=minitube
pkgver=1.4.1
pkgrel=1
pkgdesc="A native YouTube client in QT. Watch YouTube videos without Flash Player"
arch=('i686' 'x86_64')
url="http://flavio.tordini.org/minitube"
license=('GPL3')
depends=('phonon' 'qt')
optdepends=('phonon-xine: for xine backend'
            'phonon-gstreamer: for gstreamer backend'
            'gstreamer0.10-plugins: to get all videos to play with phonon-gstreamer'
            'phonon-mplayer-git: for mplayer backend (from AUR)'
            'phonon-vlc-git: for vlc backend (from AUR)')
install=minitube.install
source=(http://flavio.tordini.org/files/${pkgname}/${pkgname}-${pkgver}.tar.gz)
sha256sums=('30f04f66aa7cd75c0755684fb210baeec67833759ef1697ca2baa038fea6b557')

build() {
        cd "${srcdir}"/${pkgname}
        qmake PREFIX="/usr"
}
package() {
	cd "${srcdir}"/${pkgname}
        make install INSTALL_ROOT="${pkgdir}"

# Workaround to get correct locale
	mv "${pkgdir}"/usr/bin/minitube "${pkgdir}"/usr/share/minitube/minitube
	echo '#!/bin/sh' >> "${pkgdir}"/usr/bin/minitube
	echo 'cd /usr/share/minitube/' >> "${pkgdir}"/usr/bin/minitube
	echo './minitube "$@"' >> "${pkgdir}"/usr/bin/minitube
	chmod 755 "${pkgdir}"/usr/bin/minitube
}

