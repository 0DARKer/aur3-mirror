# Maintainer: M0Rf30

pkgname=assaultcube-reloaded
pkgver=2.4
pkgrel=1
pkgdesc='AssaultCube Reloaded'
arch=('i686' 'x86_64')
url='http://acreloaded.tk/'
license=('GPL3')
depends=('sdl' 'sdl_mixer' 'sdl_image' 'openal' 'zlib' 'gcc-libs' 'libgl')
makedepends=('mesa')
source=(#"http://assaultcuber.googlecode.com/files/acr240-src.zip"
        "http://assaultcuber.googlecode.com/files/acr240-l.tar.gz"
        'acreloaded'
        'acreloaded-server'
        'acreloaded.desktop'
        'acreloaded.png')

build() {
  cd ${srcdir}/source

  # We'll use official binaries for cheat protection or some stuff.
  # Upstream is strange.
  #make
}

package() {
  #cd ${pkgver}/source/src

  #install -Dm755 ac_client ${pkgdir}/usr/bin/ac_client
  #install -Dm755 ac_server ${pkgdir}/usr/bin/ac_server
  cd ${srcdir}/

  mkdir -p ${pkgdir}/usr/share/acreloaded/packages
  mkdir -p ${pkgdir}/usr/bin

  if [[ $CARCH == "x86_64" ]]; then
    cp bin_linux/linux_64_client ${pkgdir}/usr/bin/acreloaded_client
    cp bin_linux/linux_64_server ${pkgdir}/usr/bin/acreloaded_server
  else
    cp bin_linux/linux_client ${pkgdir}/usr/bin/acreloaded_client
    cp bin_linux/linux_server ${pkgdir}/usr/bin/acreloaded_server
  fi
  cp -rf bot config docs locale packages ${pkgdir}/usr/share/acreloaded
  install -Dm644 ${srcdir}/acreloaded.png ${pkgdir}/usr/share/pixmaps/acreloaded.png
  install -Dm644 ${srcdir}/acreloaded.desktop ${pkgdir}/usr/share/applications/acreloaded.desktop
  install -Dm644 docs/package_copyrights.txt ${pkgdir}/usr/share/licenses/${pkgname}/LICENSE
  install -Dm755 ${srcdir}/acreloaded ${pkgdir}/usr/bin/acreloaded
  install -Dm755 ${srcdir}/acreloaded-server ${pkgdir}/usr/bin/acreloaded-server
}

# vim: sw=2:ts=2 et:

md5sums=('a491779056186f05a3a9062c5328ac49'
         '1b7ae5b2fbab6315e4ace7770ba008cc'
         '36f3c9ccebefe0e83b12c6e5da18b99d'
         '24f729d2ffc496c5a5e57c9f33e72888'
         'f688c59ecee2ebc5c589720aa1480765')
