# Maintainer: Vlatko Kosturjak <kost@linux.hr>
# Based on suricata by Jaroslav Lichtblau <dragonlord@aur.archlinux.org>

pkgname=suricata-dev
_pkgname=suricata
pkgver=2.0rc1
pkgrel=1
pkgdesc="An Open Source Next Generation Intrusion Detection and Prevention Engine - Development version"
arch=('i686' 'x86_64')
url="http://openinfosecfoundation.org/index.php/download-suricata"
license=('GPL2')
depends=('libcap-ng' 'libnet' 'libpcap' 'libyaml' 'pcre' )
conflicts=('libhtp' 'suricata')
provides=('libhtp' 'suricata')
optdepends=('snort: suricata can use rulesets provided by snort')
source=(http://openinfosecfoundation.org/download/$_pkgname-$pkgver.tar.gz)
sha256sums=('068f3b94925bdae4baf626a40c67b656bfcc1b4417562ae8d590046c9072a40a')

build() {
  cd ${srcdir}/$_pkgname-$pkgver

  ./configure --prefix=/usr
  make
}

package() {
  cd ${srcdir}/$_pkgname-$pkgver

  make DESTDIR=${pkgdir} install

  install -d ${pkgdir}/var/log/$_pkgname
  install -D -m644 $_pkgname.yaml ${pkgdir}/usr/share/$_pkgname/$_pkgname.yaml
}
