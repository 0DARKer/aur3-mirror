pkgname=libdbusmenu-qt-bzr
pkgver=196
pkgrel=1
pkgdesc="A library that provides a Qt implementation of the DBusMenu spec"
arch=('i686' 'x86_64')
url="https://launchpad.net/libdbusmenu-qt"
license=('GPL')
depends=('qt')
makedepends=('cmake' 'bzr')

_bzrbranch=lp:libdbusmenu-qt
_bzrmod=libdbusmenu-qt

build() {
  cd ${srcdir}

  msg "Connecting to the server...."

  if [ ! -d ./${_bzrmod} ]; then
    bzr co ${_bzrbranch} ${_bzrmod}
  else
    bzr up ${_bzrmod}
  fi

  msg "BZR checkout done or server timeout"
  msg "Starting make..."
  mkdir ${_bzrmod}-build
  cd ${_bzrmod}-build
  cmake $startdir/src/${_bzrmod} -DCMAKE_BUILD_TYPE=debugfull \
				 -DCMAKE_INSTALL_PREFIX=/opt/kde4
  make
}

package() {
  cd ${srcdir}/${_bzrmod}-build
  make DESTDIR=${pkgdir} install
  rm -rf $startdir/src/${_bzrmod}-build
} 