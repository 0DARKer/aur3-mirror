# Maintainer: Tim Besard <tim $dot$ besard $at$ gmail $dot$ com>
# Contributor: Jelle van der Waa <jellevdwaa @ gmail.com>
# Contributor: Pieter Kokx <pieter $at$ kokx $dot$ .nl>

pkgname=whatpulse
pkgver=2.4.1
pkgrel=2
pkgdesc="A small application that measures your keyboard/mouse usage, down- & uploads and your uptime."
arch=(i686 x86_64)
url=http://www.whatpulse.org
license=(custom:whatpulse_tos)
install=whatpulse.install
depends=(qt4)
optdepends=(
    'systray: any systray, like gnome-panel'
    'libpcap: network statistics'
)

md5sums=('')
case $CARCH in
    i686)
        _arch=32bit
        md5sums[0]='ad60a31bec31f65ae73f0e072d937867'
        ;;
    x86_64)
        _arch=64bit
        md5sums[0]='0673fdeab61118190d8811c7408f692b'
        ;;
esac
source=("http://whatpulse.org/files/whatpulse-linux-$_arch-$pkgver.tar.gz")

package() {
    cd $srcdir/
    mkdir -p ${pkgdir}/usr/bin
    install -m0755 whatpulse ${pkgdir}/usr/bin/
    
    mkdir -p ${pkgdir}/etc/udev/rules.d/
    cat >${pkgdir}/etc/udev/rules.d/99-whatpulse-input.rules <<__EOF__
KERNEL=="event*", NAME="input/%k", MODE="640", GROUP="input"
__EOF__
}
