# Contributor: Jelle van der Waa <jellevdwaa @ gmail.com>
# Contributor: Tim Besard <tim $dot$ besard $at$ gmail $dot$ com>

pkgname=whatpulse
pkgver=1.1
pkgrel=2
pkgdesc="WhatPulse client for Linux"
arch=('i686' 'x86_64')
url="http://www.whatpulse.org"
license=('custom')
install='whatpulse.install'
depends=('qt' 'udev' 'libxext' 'fontconfig' 'libxrender' 'libpng' 'glib2' 'libsm')
optdepends=('systray: any systray, like gnome-panel')
source=("http://jmrk.whatpulse.org/1.1/WhatPulse-Linux32-1.1.tar.gz")
[ "$CARCH" = "x86_64" ] && source[0]='http://jmrk.whatpulse.org/1.1/WhatPulse-Linux64-1.1.tar.gz'
md5sums=('988f1208ac7f471de2ac52c618afcb91')
[ "$CARCH" = "x86_64" ] && md5sums[0]='e75f6399cc8336201048a8689171216a'

build() {
	cd $srcdir/
	mkdir -p ${pkgdir}/usr/bin
	install -m0755 WhatPulse ${pkgdir}/usr/bin/
	
	mkdir -p ${pkgdir}/etc/udev/rules.d/
	echo "KERNEL==\"event*\",       NAME=\"input/%k\", MODE=\"640\", GROUP=\"input\"" >> ${pkgdir}/etc/udev/rules.d/99-whatpulse-input.rules
}

