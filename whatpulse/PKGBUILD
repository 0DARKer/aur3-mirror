# Maintainer: Tim Besard <tim $dot$ besard $at$ gmail $dot$ com>
# Contributor: Jelle van der Waa <jellevdwaa @ gmail.com>
# Contributor: Pieter Kokx <pieter $at$ kokx $dot$ .nl>

pkgname=whatpulse
pkgver=2.4
pkgrel=1
pkgdesc="A small application that measures your keyboard/mouse usage, down- & uploads and your uptime."
arch=('i686' 'x86_64')
url="http://www.whatpulse.org"
license=('unknown')
install='whatpulse.install'
depends=('qt4' 'udev' 'qtwebkit' 'openssl')
optdepends=(
	'systray: any systray, like gnome-panel'
	'libpcap: network statistics'
)
source=("http://whatpulse.org/files/whatpulse-linux-32bit-$pkgver.tar.gz")
[ "$CARCH" = "x86_64" ] && source[0]="http://whatpulse.org/files/whatpulse-linux-64bit-$pkgver.tar.gz"
md5sums=('d86ce7cbb897e311fab342e6eedd57d6')
[ "$CARCH" = "x86_64" ] && md5sums[0]='3611bb2e70fbe6b788eeb1c077519980'

package() {
        cd $srcdir/
        mkdir -p ${pkgdir}/usr/bin
        install -m0755 whatpulse ${pkgdir}/usr/bin/
        
        mkdir -p ${pkgdir}/etc/udev/rules.d/
        echo "KERNEL==\"event*\",       NAME=\"input/%k\", MODE=\"640\", GROUP=\"input\"" >> ${pkgdir}/etc/udev/rules.d/99-whatpulse-input.rules
}
