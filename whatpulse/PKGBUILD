# Maintainer: Tim Besard <tim $dot$ besard $at$ gmail $dot$ com>
# Contributor: Jelle van der Waa <jellevdwaa @ gmail.com>
# Contributor: Pieter Kokx <pieter $at$ kokx $dot$ .nl>

pkgname=whatpulse
pkgver=2.0.4
pkgrel=1
pkgdesc="WhatPulse client for Linux"
arch=('i686' 'x86_64')
url="http://www.whatpulse.org"
license=('custom')
install='whatpulse.install'
depends=('qt' 'udev' 'qtwebkit' 'openssl' 'libpcap')
optdepends=('systray: any systray, like gnome-panel')
source=("http://whatpulse.org/files/whatpulse-linux-32bit-$pkgver.tar.gz")
[ "$CARCH" = "x86_64" ] && source[0]="http://whatpulse.org/files/whatpulse-linux-64bit-$pkgver.tar.gz"
md5sums=('204a6dd7d2679d495fe3c8eb9ac50da0')
[ "$CARCH" = "x86_64" ] && md5sums[0]='531ab15fecb87e154e9ee8e9a56c28bd'

build() {
        cd $srcdir/
        mkdir -p ${pkgdir}/usr/bin
        install -m0755 whatpulse ${pkgdir}/usr/bin/
        
        mkdir -p ${pkgdir}/etc/udev/rules.d/
        echo "KERNEL==\"event*\",       NAME=\"input/%k\", MODE=\"640\", GROUP=\"input\"" >> ${pkgdir}/etc/udev/rules.d/99-whatpulse-input.rules
}
