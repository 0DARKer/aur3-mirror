# $Id: pkgbuild-mode.el,v 1.23 2007/10/20 16:02:14 juergen Exp $
# Maintainer: oslik <oslik@mail.ru>
# based on "aury-git" package by Fabien Devaux
_gitname=mksv3
_py=python2
pkgname=$_gitname-git
pkgver=20120530
pkgrel=1
pkgdesc="Code editor"
url="http://hlamer.github.com/mksv3/"
arch=('i686')
license=('GPLv2')
depends=('python2-qscintilla' 'python2-pyparsing' 'python2-pygments' 'python2-markdown')
#makedepends=()
#conflicts=()
#replaces=()
#backup=()
#install=
#source=($pkgname-$pkgver.tar.gz)
_gitroot="git://github.com/hlamer/$_gitname.git"

md5sums=()

build() {
    cd $srcdir

    msg "Connecting to GIT server..."
    if [[ -d ${_gitname} ]]; then
        (cd ${_gitname} && git pull origin)
    else
        git clone --depth=1 ${_gitroot} ${_gitname}
    fi

    msg "GIT checkout done or server timeout"
    msg "Starting make..."

    rm -rf ${_gitname}-build
    cp -r ${_gitname} ${_gitname}-build

    cd ${srcdir}/${_gitname}-build

    $_py setup.py build || exit 1
    $_py setup.py install --root="${pkgdir}" --optimize=1

    rm -rf ${_gitname}-build
}
