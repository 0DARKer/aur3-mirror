# $Id: PKGBUILD 31413 2009-03-26 21:59:10Z jgc $
# Maintainer: Jan de Groot <jgc@archlinux.org>
# Contributor: Tom K <tomk@runbox.com>

_name=ekiga
pkgname=${_name}-lite
pkgver=3.3.0
pkgrel=2
pkgdesc="Ekiga lite version (no evolution, gnome) - VOIP/Videoconferencing app (SIP and H.323 support)"
url="http://www.ekiga.org"
license=(GPL)
arch=(i686 x86_64)
depends=('opal>=3.8.3' 'ptlib>=2.8.3' 'libsigc++>=2.2.8' 'libxv' 'gtk2>=2.12.0' 'gstreamer0.10-base' 'perl' 'boost-libs')
makedepends=('pkgconfig' 'intltool' 'boost')
conflicts=('ekiga')
provides=('gnomemeeting')
replaces=('gnomemeeting')
options=(!emptydirs)
groups=('gnome-extra')
source=(http://ftp.gnome.org/pub/gnome/sources/${_name}/${pkgver%.*}/${_name}-${pkgver}.tar.bz2)
sha256sums=('3fb22704e44afebf4294632505fb7a13f3eccb152fcb5878e97aa556d9486d2c')

build() {
  cd "${srcdir}/${_name}-${pkgver}"
  ./configure --prefix=/usr --sysconfdir=/etc \
              --localstatedir=/var \
              --disable-schemas-install \
              --disable-avahi \
              --disable-dbus \
              --disable-eds \
              --disable-gconf \
              --disable-gdu \
              --disable-gnome \
              --disable-ldap \
              --disable-notify \
              --disable-scrollkeeper \
              --enable-gstreamer \
              || return 1
  #sed -i -e 's/-fno-exceptions//' lib/engine/components/opal/Makefile || return 1
  make || return 1
  make DESTDIR="${pkgdir}" install || return 1
}
