# $Id: PKGBUILD 31413 2009-03-26 21:59:10Z jgc $
# Maintainer: Jan de Groot <jgc@archlinux.org>
# Contributor: Tom K <tomk@runbox.com>

_name=ekiga
pkgname=${_name}-lite
pkgver=3.2.7
pkgrel=1
pkgdesc="Ekiga lite version (no evolution, gnome) - VOIP/Videoconferencing app (SIP and H.323 support)"
url="http://www.ekiga.org"
license=(GPL)
arch=(i686 x86_64)
depends=('opal>=3.6.8' 'libsigc++>=2.2.8' 'libxv' 'gtk2>=2.12.0' 'gstreamer0.10-base')
makedepends=('pkgconfig' 'intltool')
conflicts=('ekiga')
provides=('gnomemeeting')
replaces=('gnomemeeting')
options=(!emptydirs)
groups=('gnome-extra')
source=(http://ftp.gnome.org/pub/gnome/sources/${_name}/3.2/${_name}-${pkgver}.tar.bz2)
sha256sums=('f25a1309b68eafe69f0d7aed461bc9a8196939060543d09bd2f19e0bb1e3fd8f')

build() {
  cd "${srcdir}/${_name}-${pkgver}"
  ./configure --prefix=/usr --sysconfdir=/etc \
              --localstatedir=/var \
              --disable-schemas-install \
              --disable-avahi \
              --disable-dbus \
              --disable-eds \
              --disable-gconf \
              --disable-gdu \
              --disable-gnome \
              --disable-ldap \
              --disable-notify \
              --disable-scrollkeeper \
              --enable-gstreamer \
              || return 1
  #sed -i -e 's/-fno-exceptions//' lib/engine/components/opal/Makefile || return 1
  make || return 1
  make DESTDIR="${pkgdir}" install || return 1
}
