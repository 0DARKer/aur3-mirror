pkgname=libevdevc
pkgdesc="Chromium OS libevdev"
pkgver=0.1
pkgrel=1
arch=(i686 x86_64)
url="https://github.com/hugegreenbug/libevdevc"
license=('custom:chromiumos')
_gitname='libevdevc'
depends=('glibc')
makedepends=('git' 'python2' 'check' 'valgrind' 'doxygen')

source=("$_gitname::git+https://github.com/hugegreenbug/libevdevc.git"
  p1.patch)

md5sums=('SKIP'
		 'ea554f0b65b3651ebc5c05905e63eda1')

prepare() {
  cd "$srcdir/$_gitname"
  patch -Np1 -i ../p1.patch
}

build() {
  cd "$srcdir/$_gitname"
  make
}

check() {
  cd "$srcdir/$_gitname"
  make check || /bin/true
}

package() {
  make -C "$srcdir/$_gitname" DESTDIR="${pkgdir}" install
}
