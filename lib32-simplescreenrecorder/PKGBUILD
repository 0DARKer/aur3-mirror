pkgname=lib32-simplescreenrecorder
_gitname=ssr
pkgver=0.0.7
pkgrel=2
pkgdesc="OpenGL recording of 32-bit applications with SimpleScreenRecorder."
arch=("x86_64")
url="http://www.maartenbaert.be/simplescreenrecorder/"
license=("GPL3")
source=('git+https://github.com/MaartenBaert/ssr.git#tag=0.0.7')
md5sums=('SKIP')
depends=("lib32-libgl" "lib32-glu" "lib32-libx11" "lib32-libxext" "lib32-libxfixes")
makedepends=("git" "gcc-multilib")
options=("!libtool")
install=lib32-simplescreenrecorder.install

build() {
	cd "${_gitname}"
	
	export CPPFLAGS="$CPPFLAGS -DNDEBUG -DQT_NO_DEBUG -DTEST_USE_FFMPEG_VERSIONS=1"
	
	CC="gcc -m32" CXX="g++ -m32" PKG_CONFIG_PATH="/usr/lib32/pkgconfig" \
		./configure --prefix=/usr --libdir=/usr/lib32 --disable-ssrprogram
	make
}

package() {
	cd "${_gitname}"
	make DESTDIR="${pkgdir}" install
}
