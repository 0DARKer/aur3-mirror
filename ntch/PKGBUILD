# Maintainer: kusakata <shohei atmark kusakata period com>

pkgname=ntch
pkgver=1.0.1.6
_sfver=59863
pkgrel=1
pkgdesc="A console-based 2channel browser"
url="http://sourceforge.jp/projects/ntch/"
license=('GPL3')
arch=('i686' 'x86_64')
depends=('gdbm' 'ncurses' 'openssl' 'sqlite')
_mirror="jaist" # "jaist" "iij" "osdn" "keihanna"
source=("http://${_mirror}.dl.sourceforge.jp/ntch/${_sfver}/ntch-${pkgver}.tgz")

prepare() {
  cd "${srcdir}/ntch-${pkgver}/src"
  sed -i 's/ncursesw\///' main.c
  cd "${srcdir}/ntch-${pkgver}/src/ui"
  sed -i 's/ncursesw\///' disp_win.c
  sed -i 's/ncursesw\///' disp_threadlist.c
  sed -i 's/ncursesw\///' disp_string.c
  sed -i 's/ncursesw\///' disp_reslist.c
  sed -i 's/ncursesw\///' disp_html_result.c
  sed -i 's/ncursesw\///' disp_editor.c
  sed -i 's/ncursesw\///' disp_board_menu.c
}

build() {
  cd "${srcdir}/ntch-${pkgver}"
  
  ./configure
  make
}

package() {
  cd "${srcdir}/ntch-${pkgver}"

  install -dm755 "${pkgdir}/usr/bin"
  install -m755 ntch "${pkgdir}/usr/bin"
}

md5sums=('41694aca4dfcc0a0faa7074c71444d6b')
