#
# PKGBUILD for package elkirtasse
#
# Copyright (c) 2011-2013 abouzakaria (source),
# 
#
# Please submit bugfixes or comments via
# http://elkirtasse.sourceforge.net
#
# mod by سليمان السهمي <sahmi.soulaimane@gmail.com>

pkgname=elkirtasse-stable
pkgver=3.6.8
pkgrel=1
pkgdesc=" Islamic reference books reader, editor, and manager. "
arch=('i686' 'x86_64')
url="http://elkirtasse.sourceforge.net"
license=('GPL')
depends=('qt4' 'mesa-libgl')
optdepends=('mdbtools: import shamela books')
makedepends=('make')
source=("https://build.opensuse.org/source/home:abouzakaria/elkirtasse/elkirtasse_${pkgver}.tar.gz")
md5sums=('b8e374978ab2af299156e99bae3ac4f7')

build() {
  cd ${srcdir}/elkirtasse_${pkgver}
 
  qmake-qt4 elkirtasse.pro
  make 
}

package() {
  cd ${srcdir}/elkirtasse_${pkgver}
 
  
  #make INSTALL_PREFIX="$pkgdir" install
  
   mkdir -p ${pkgdir}/usr/bin
   mkdir -p ${pkgdir}/usr/lib/elkirtasse/plugins
   mkdir -p ${pkgdir}/usr/share/elkirtasse
   mkdir -p ${pkgdir}/usr/share/icons
    
   cp -R usr/share/elkirtasse ${pkgdir}/usr/share
   cp -R usr/share/icons ${pkgdir}/usr/share
   cp -R usr/bin/elkirtasse ${pkgdir}/usr/bin
        
   install -D -m 644 -T usr/share/applications/elkirtasse.desktop ${pkgdir}/usr/share/applications/elkirtasse.desktop
    
   cp -f usr/share/elkirtasse/plugins/libkirtassecdrom.so ${pkgdir}/usr/lib/elkirtasse/plugins/libkirtassecdrom.so
   cp -f usr/share/elkirtasse/plugins/libkirtassenet.so ${pkgdir}/usr/lib/elkirtasse/plugins/libkirtassenet.so
   cp -f usr/share/elkirtasse/plugins/libkirtasserowat.so ${pkgdir}/usr/lib/elkirtasse/plugins/libkirtasserowat.so
}
