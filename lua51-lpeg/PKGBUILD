# Maintainer: Gianni Vialetto <gianni@rootcube.net>

pkgname=lua51-lpeg
pkgver=0.12
pkgrel=4
pkgdesc='Pattern-matching library for Lua (5.1 - rocks compatibile)'
arch=('i686' 'x86_64')
url="http://www.inf.puc-rio.br/~roberto/lpeg"
license=('MIT')
depends=('lua51')
makedepends=('luarocks')
source=("http://luarocks.org/repositories/rocks/lpeg-0.12-1.rockspec"
    "LICENSE")
md5sums=('71500f98f925c5ba73ae9a2a4ae72949'
         'dccb97b431c3a3ccaacc216c6242e9fd')
changelog=CHANGELOG

build() {
  luarocks install lpeg-$pkgver-1.rockspec --to="$srcdir"
}

package() {
    install -Dm0644 "$srcdir/lib/lua/5.1/lpeg.so" "$pkgdir/usr/lib/lua/5.1/lpeg.so"
    install -Dm0644 "$srcdir/share/lua/5.1/re.lua" "$pkgdir/usr/share/lua/5.1/re.lua"
    install -Dm0644 "$srcdir/LICENSE" "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
}
