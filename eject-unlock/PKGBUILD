# $Id$
# Contributor: Natrio <natrio@list.ru>
# Contributor: dorphell <dorphell@archlinux.org>
# Contributor: Tom Newsom <Jeepster@gmx.co.uk>

pkgname=eject-unlock
pkgver=2.1.5
pkgrel=1
pkgdesc="A program for ejecting removable media under software control. Patched for unlock tray and SCSI compability on new kernels."
arch=('i686' 'x86_64')
url="http://eject.sourceforge.net/"
license=('GPL')
conflicts=('eject')
provides=('eject')
depends=('glibc')
source=("ftp://ftp.archlinux.org/other/eject/eject-${pkgver}.tar.bz2"
        'eject-2.1.5-handle-spaces.patch'
        'eject-2.1.5-rw-unlock.patch')
md5sums=('5a6cab2184ae4ed21128054d931d558f'
         '595b97c3bd56fd41e3b01b07885f81dc'
         'b7400a96cb271e0756e91e3c5aae50f9')

build() {
  cd "${srcdir}/eject"
  patch -Np0 -i "${srcdir}/eject-2.1.5-handle-spaces.patch" || exit 1
  patch -p1 -i "${srcdir}/eject-2.1.5-rw-unlock.patch" || exit 1
  ./configure --prefix=/usr --mandir=/usr/share/man || exit 1
  make
}

package() {
  cd "${srcdir}/eject"
  make DESTDIR="${pkgdir}" install
}
