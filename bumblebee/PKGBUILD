# This script is incomplete and in development.

# Maintainer: Samsagax <samsagax@gmail.com>

pkgname=bumblebee
pkgver=2.3.2
pkgrel=1
pkgdesc="Stable branch of Bumblebee. Optimus Support for Linux Through VirtualGL. Power management not supported"
arch=('i686' 'x86_64')
depends=('xorg-utils' 'virtualgl-bin>=2.2.90' 'nvidia-utils-bumblebee')
#optdepends=('acpi_call: turn on/off discrete card (unstable)')
if [ "$CARCH" = "x86_64" ]; then
     optdepends=('virtualgl32-bin: run 32bit applications with optirun'
                'lib32-nvidia-utils-bumblebee: run 32bit applications with optirun')
fi
url="https://github.com/Bumblebee-Project/Bumblebee"
license=("GPL3")
install=('bumblebee.install')
conflicts=('bumblebee-nouveau')
provides=('bumblebee')
source=("https://github.com/downloads/Bumblebee-Project/Bumblebee/$pkgname-$pkgver.tar.gz")
md5sums=('cc7ca68f10908c126c3e4fb1fed949a8')

_temp_dir="$srcdir/install-temp"

build() {
    cd "$srcdir/$pkgname-$pkgver"
    mkdir -p $_temp_dir
    ./install --dest-dir=$_temp_dir --actions=build,install --skip-stages=welcome,finish
}

package() {
    cd "$_temp_dir"
    cp -a etc usr "$pkgdir"
}
