# Maintainer: Guillaume ALAUX <guillaume at archlinux dot org>
# Contributor: Andreas W. Hauser <andy-aur@splashground.de>

pkgname=glassfish
pkgver=2.1.1_b31
pkgrel=1
pkgdesc="application server (like tomcat) based on Java EE 5 from Sun"
url="https://glassfish.dev.java.net/"
license=(GPL CDDL)
depends=(java-runtime apache-ant)
makedepends=(java-runtime)
arch=(i686 x86_64)
options=(!strip)
source=(http://dlc.sun.com.edgesuite.net/javaee5/v2.1.1/promoted/Linux/glassfish-installer-v${pkgver/_/-}-linux.jar)
md5sums=('e30b912305b7547c576cdcdfb637aac9')
noextract=(glassfish-installer-v${pkgver/_/-}-linux.jar)
install=$pkgname.install

build() {
	cd $startdir/src
	echo a | java -Xmx256m -jar glassfish-installer-v${pkgver/_/-}-linux.jar -console

	cd glassfish
	chmod -R +x lib/ant/bin

	cd ..
	mkdir $startdir/pkg/opt
	mv glassfish $startdir/pkg/opt/
}
