# Maintainer: GordonGR <gordongr@freemail.gr>
pkgname=coolvlviewer-stable
pkgver=1.26.2.16
pkgrel=1
pkgdesc="The Cool VL Viewer (formerly known as 'Cool SL Viewer' which first public release was v1.18.4.3, released on 2007-11-16) is a third-party viewer for Second Life (C) and OpenSim grids. In the name, 'VL' of course stands for virtual life (native 32bit)"
url="http://sldev.free.fr"
license=('custom')
depends=('openal' 'gnome-vfs' 'gtk2' 'libpng' 'dbus-glib' 'libidn' 'sdl' 'mesa')
optdepends=('gstreamer0.10: For video support - may need good, bad and ugly plugins')
[ "$CARCH" = "x86_64" ] && depends=('lib32-gtk2' 'lib32-libpng' 'lib32-openal' 'lib32-libidn' 'lib32-sdl' 'lib32-mesa')
[ "$CARCH" = "x86_64" ] && optdepends=('lib32-nvidia-utils: GL support for NVIDIA drivers')
arch=('i686' 'x86_64')
conflicts=('coolvlviewer-experimental')
install=coolvlviewer.install
source=("http://sldev.free.fr/binaries/CoolVLViewer-${pkgver}-Linux-x86-Setup"
        "coolvlviewer.desktop"
        "coolvlviewer.launcher")
md5sums=('77add1eb72def61f9172253bd84f6564'
         '49387ad5acd802defe2c2ca1f162cf55'
         'fd78de1f6c1333a5120ece89873515e0')

build() {
    cd $srcdir
    # Run the installer
    chmod +x CoolVLViewer-${pkgver}-Linux-x86-Setup
    ./CoolVLViewer-${pkgver}-Linux-x86-Setup --mode silent --destination $srcdir/coolvlviewer/

}

package(){
   
   
    # Install Desktop File
    install -D -m644 $srcdir/coolvlviewer.desktop \
        $pkgdir/usr/share/applications/coolvlviewer.desktop
 
    # Install Icon File
    install -D -m755 $srcdir/coolvlviewer/cvlv_icon.png \
        $pkgdir/usr/share/pixmaps/clvl_icon.png

    # Install Launcher
    install -D -m755 $srcdir/../coolvlviewer.launcher \
        $pkgdir/usr/bin/coolvlviewer
    # Install License
    install -D -m644 $srcdir/coolvlviewer/licenses.txt \
        $pkgdir/usr/share/licenses/$pkgname/LISENSE
    # Move Data to Destination Directory
    install -d $pkgdir/opt/
    mv coolvlviewer/ $pkgdir/opt/

  

}
