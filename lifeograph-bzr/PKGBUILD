# Maintainer : JabaDisa <admin at jabadisa dot com>

pkgname=lifeograph-bzr
pkgver=1591
pkgrel=1
pkgdesc="An off-line and private journal and note taking application."
arch=('i686' 'x86_64')
url="https://launchpad.net/lifeograph"
license=('GPL3')
depends=('bzr' 'gtkmm3' 'enchant' 'libgcrypt' 'hicolor-icon-theme')
conflicts=('lifeograph')
makedepends=()
install="$pkgname.install"
source=()
md5sums=()

bzrtrunk='lp:lifeograph'
bzrmod=${pkgname}

build() {
  cd ${srcdir}
  
  msg "Connecting to the server...."

  bzr branch ${bzrtrunk} ${bzrmod} -r revno:${pkgver}

  msg "BZR checkout done or server timeout"

  msg "Removing old build directory..."
  rm -rf $srcdir/$bzrmod-build
  msg "Creating build directory..."
  cp -r $srcdir/$bzrmod $srcdir/$bzrmod-build
  cd "$srcdir/$bzrmod-build"

  cmake -DCMAKE_INSTALL_PREFIX:PATH=/usr .
  make
}

package() {
  cd "$srcdir/$pkgname-build"
  make DESTDIR="$pkgdir/" install
}
