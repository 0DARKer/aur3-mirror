# Maintainer: GazJ Gary James <garyjames82 at gmail dot com>

pkgname=caduntu-svn
pkgver=100
pkgrel=1
pkgdesc="Caduntu is a 2D CAD drawing tool based on the community edition of QCad"
arch=('i686' 'x86_64')
url="http://www.caduntu.org/"
license=('GPL')
depends=(qt)
makedepends=(subversion)
provides=(caduntu)
source=("caduntu.desktop")
md5sums=('993683237e7eb74d5470cf3683380243')

_svntrunk='https://caduntu.svn.sourceforge.net/svnroot/caduntu'
_svnmod='caduntu'

build() {
	cd $srcdir

	msg "Connecting to the SVN server..."

	# Determine whether the source needs to be updated or installed
	if [ -d "${_svnmod}/.svn" ]; then
		svn up -r ${pkgver} ${_svnmod}
	else
		svn co ${_svntrunk} -r ${pkgver} ${_svnmod}
	fi
	cd $srcdir/caduntu/trunk	
	qmake
	make
}

package() {
  cd $srcdir/caduntu/trunk
  install -D -m 755 unix/caduntu $pkgdir/usr/bin/caduntu
  install -D -m 664 $srcdir/caduntu.desktop $pkgdir/usr/share/applications/caduntu.desktop
  mkdir -p $pkgdir/usr/share/caduntu/
  cp -r unix/resources/* $pkgdir/usr/share/caduntu/
}
