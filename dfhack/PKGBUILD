# Maintainer: Klaas Boesche <aurkagebe AT gmail.com>
# Contributor: Mark Pustjens <pustjens@dds.nl>
# Contributor: Daenyth <Daenyth+Arch AT gmail DOT com>
# Contributor: Chee Sing Lee <cheesinglee AT gmail DOT com>
pkgname=dfhack
_pkgver=0.34.11-r3
pkgver=0.34.11_r3
pkgrel=1
pkgdesc="A Dwarf Fortress memory access library and a set of basic tools that use it."
arch=('i686' 'x86_64')
url="https://github.com/peterix/dfhack"
license=('custom')
depends=()
if test "$CARCH" == "x86_64"; then
  depends+=(lib32-libpng12 lib32-libjpeg6)
fi
conflicts=(dfhack-git)
provides=(dfhack)
source=("http://dethware.org/${pkgname}/download/${pkgname}-${_pkgver}-Linux.tar.gz")
sha256sums=('4d1bb4e191a18b6596a0fa6b0f97112a7a9fe4d16717412bd7f31eaecef3cade')
_dffolder="/opt/df_linux"

package() {
  install -d ${pkgdir}/${_dffolder}
  install ${srcdir}/dfhack ${pkgdir}/${_dffolder}/
  install ${srcdir}/dfhack.init-example ${pkgdir}/${_dffolder}/
  install -d ${pkgdir}/usr/share/licenses/${pkgname}/
  install ${srcdir}/hack/LICENSE ${pkgdir}/usr/share/licenses/${pkgname}/
  cp -r ${srcdir}/hack ${pkgdir}/${_dffolder}/
  cp -r ${srcdir}/stonesense ${pkgdir}/${_dffolder}/
  find ${pkgdir} -type f -print0 | xargs -0 chmod 644 
  find ${pkgdir} -type d -print0 | xargs -0 chmod 755
  chmod 755 ${pkgdir}/${_dffolder}/dfhack
  chmod 755 ${_dffolder}
}

# vim:set ts=2 sw=2 et:
