# $Id: pkgbuild-mode.el,v 1.23 2007/10/20 16:02:14 juergen Exp $
# Maintainer: Cong Gu <gucong43216@gmail.com>
pkgname=lammps  
pkgver=3Apr13
pkgrel=1 
pkgdesc="Large-scale Atomic/Molecular Massively Parallel Simulator."
url="http://lammps.sandia.gov/"
arch=('i686' 'x86_64')
license=('GPL')
depends=('fftw' 'openmpi')
makedepends=()
source=(http://lammps.sandia.gov/tars/lammps.tar.gz
  fftw3.patch)
md5sums=('58e121ae3688bde5c138c5210e476c46'
         '05eb4e2e9bd70ea62818d637875a5dfb')
build() {
  cd $srcdir/$pkgname-$pkgver
  patch -Np0 < ../fftw3.patch
  cd $srcdir/$pkgname-$pkgver/src
  # add whatever package you need in here.
  make yes-user-sph
  
  make openmpi || return 1
}

package() {
  mkdir -p $pkgdir/usr/share/lammps
  mkdir -p $pkgdir/usr/share/doc/lammps
  cd $srcdir/$pkgname-$pkgver
  install -Dm 755 src/lmp_openmpi $pkgdir/usr/bin/lmp_openmpi
  cp bench examples $pkgdir/usr/share/lammps -r
  cp doc/* $pkgdir/usr/share/doc/lammps -r
}
