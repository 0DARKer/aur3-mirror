# Maintainer: mirandir <mirandir@orange.fr>

pkgname=heebo-git
_realname=heebo
pkgver=8c21e7e
pkgrel=2
pkgdesc="Heebo is an adaptation of the classic Match-3 genre puzzle game. Align the quirky Heebos into lines of three or more. Simple but highly addictive!"
arch=('i686' 'x86_64')
url=('http://saz.im/software/heebo.html')
license=('GPL')
depends=('qt4')
makedepends=('git')
source=('heebo.desktop'
        'mainpage.patch'
        'about.html'
        'help.html'
        heebo::git+git://gitorious.org/heebo/heebo.git)
md5sums=('37edccdc2a199db0d3370015b6813b0e'
         '2b9a3a0486db63b59a1929a3d31441e4'
         'f62e97e7bd0bf5155664767f03ac47f8'
         '259e2544794f9ed7d39021d09ccb4c65'
         'SKIP')

pkgver() {
  cd "${srcdir}/${_realname}"
  git describe --always | sed 's|-|.|g'
}

build() {
  cd $srcdir/$_realname/src/qml
        patch -lp0 < $srcdir/mainpage.patch
  cd $srcdir/$_realname/build/desktop

        qmake-qt4 || return 1
        make || return 1
}

package() {
    cd $srcdir

   install -d $pkgdir/usr/bin
   install -d $pkgdir/usr/share/{applications,icons,heebo}
   
   install -D -m 644 $srcdir/$_realname/doc/heebo_app_icon_256.png $pkgdir/usr/share/icons/heebo.png
   install -D -m 755 $srcdir/$_realname/build/desktop/heebo $pkgdir/usr/bin/heebo
   install -D -m 644 heebo.desktop $pkgdir/usr/share/applications/
   install -D -m 644 about.html $pkgdir/usr/share/heebo/
   install -D -m 644 help.html $pkgdir/usr/share/heebo/
}
