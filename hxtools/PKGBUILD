# Maintainer: Evilandi666 <evilandi.aur(at)googlemail.com>
pkgname=hxtools
pkgver=20110721
pkgrel=1
pkgdesc="A collection of tools and scripts that have accumulated over the years, and each of which seems to be too small to warrants its own project."
arch=('i686' 'x86_64')
url="http://jengelh.medozas.de/projects/hxtools/"
license=('GPL3')
depends=('libhx>=3.4' 'perl')
makedepends=('sed')
source=(http://jftp.medozas.de/hxtools/hxtools-20110721.tar.xz)
md5sums=('48ddb0aa36a33cf6505db4787ccd38fc')

build() {
  cd $srcdir/$pkgname-$pkgver
  #########################################################################
  ## fixing http://dev.medozas.de/gitweb.cgi?p=hxtools;a=commit;h=8d9aec05126d1cef56de2d4c8b3b044b5152221b 
  ## only for 20110721 
  ## delete the two sed lines when buildung a other release than 20110721
  sed -i 's/#define _GNU_SOURCE 1//g' sadmin/ofl.c
  sed -i 's!^ \*\/! \*\/\n#define _GNU_SOURCE 1!g' sadmin/newns.c
  #########################################################################
  ./configure --libexecdir=/usr/lib --prefix=/usr --sysconfdir=/etc --localstatedir=/var
  make || return 1
  make DESTDIR=$pkgdir install || return 1
}
