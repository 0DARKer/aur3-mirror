# Maintainer: Serge Ziryukin <ftrvxmtrx@gmail.com>
pkgname=ocaml-camomile
pkgver=0.8.1
pkgrel=2
pkgdesc="Comprehensive Unicode library for OCaml"
arch=('i686' 'x86_64')
url="http://camomile.sf.net"
license=('LGPL')
depends=('ocaml' 'ocaml-findlib>=1.2.3')
install=
source=(http://downloads.sourceforge.net/${pkgname/ocaml-}/${pkgname/ocaml-/}-$pkgver.tar.bz2)
md5sums=('999fc48a71030a1e765b85e3c1e7b933')
options=(!strip !makeflags)

build() {
  cd "$srcdir/${pkgname/ocaml-/}-$pkgver"

  ./configure --prefix=/usr
  mkdir -p $pkgdir$(ocamlfind printconf destdir) || return 1
  mkdir -p $pkgdir/usr/bin
  sed -i -e 's|ocamlfind install|ocamlfind install -destdir '$pkgdir$(ocamlfind printconf destdir)'|' Makefile || return 1
  make || return 1
  make DATADIR="$pkgdir/usr/share" BINDIR="$pkgdir/usr/bin" install
  install -Dm 644 COPYING $pkgdir/usr/share/licenses/$pkgname/LICENSE
}

