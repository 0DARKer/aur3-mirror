# $Id: PKGBUILD 89697 2010-09-03 10:45:46Z remy $
# Maintainer: 
# Contributor: Judd <jvinet@zeroflux.org>

pkgname=lib32-libevent
_pkgname=libevent
pkgver=1.4.14b
pkgrel=2
pkgdesc="An event notification library"
license=('GPL2')
arch=('i686' 'x86_64')
url="http://www.monkey.org/~provos/libevent/"
depends=('glibc')
makedepends=('gcc-multilib')
source=("http://www.monkey.org/~provos/libevent-$pkgver-stable.tar.gz")
options=('!libtool')
md5sums=('a00e037e4d3f9e4fe9893e8a2d27918c')

build() {
  cd $srcdir/$_pkgname-$pkgver-stable

  export CC='gcc -m32'
  export CXX="g++ -m32"
  export PKG_CONFIG_PATH=/usr/lib32/pkgconfig

  sed -i 's#python#python2#' event_rpcgen.py
  ./configure --prefix=/usr --libdir=/usr/lib32 --sysconfdir=/etc
  make || return 1
}

package() {
  cd $srcdir/$_pkgname-$pkgver-stable
  make DESTDIR=$pkgdir install || return 1
  rm -rf ${pkgdir}/usr/bin
  rm -rf ${pkgdir}/usr/share
  rm -rf ${pkgdir}/usr/include
}
