# Maintainer: Limao Luo <luolimao@gmail.com>

pkgname=blaba
pkgver=1.0b2
pkgrel=4
pkgdesc="BLABA (Bryan Lunduke's Awesome Blocks of Awesome): A graphical video game editor"
url="http://lunduke.com/?page_id=3152"
arch=('i686' 'x86_64')
license=('custom:GLL')
depends=('gtk2' 'desktop-file-utils')
provides=('blaba')
if test "$CARCH" == x86_64; then
    depends+=('lib32-gtk2')
    optdepends+=(
	'lib32-libcanberra: To get rid of an annoying error'
	'lib32-gtk-engines: Needed to get a decent look & feel')
fi
install="blaba.install"
source=(
    'http://www.lunduke.com/blaba/blaba-linux-beta-2.tar.gz'
    'LICENSE'
    'blaba.desktop'
    'BLABAIcon.png')
sha256sums=(
    '8b5b9c3fa959ef7a6858d5a3d7d13af0270451a4d3a927794a641a0a88360611'
    '870a9a45df91e2cb5017e8d6d29467e859809105b6830e7124fe97637b07d973'
    'cab6012edad034cf785544aecc0456241980c88cffc53c5ae4cbf98632e3e902'
    'b89d0c18cfb6a116f2c95a2326c7ce9e42b7169d9361add5260534ad3ba7edcd')
sha512sums=(
    'dbe1af1cbc7a005ec995d882db790b03258283e1bb23074abeb8ca7f0362f7696ac50e18c4cc12737b5a7f28e0442e4a503cf6c731ee62f5e4359b81a69971f6'
    '69bfd303f6e152da51fd87ab5d20e989332b919206311fc4b88c85ecd5aa96bad3287bdc3dfbc3ad72401560133d0b2877be4fb67a09cce03f8c1f5ba2db6d5b'
    '2f4b3d1dfe6dd89d06de2ab97bcd3716507d40588fc6f821fcf7b939f6e1027653fc7dc10af6bea6b8237a9097648efda71fc0ef55488b1268256070f24c7e08'
    'ef0dc0d070dc6a0eb3c37052b4bda82b42aefb1950d64ea9685de44dc10762a35021f4f5993c92d0670d134f99d3c5bba662f6eebebd55bbd99c38a2893b0c4a')

build() {
    cd $srcdir
    tar xzf blaba-linux-beta-2.tar.gz
    mkdir opt/
    mv blaba/ opt/blaba/
    mv BLABAIcon.png opt/blaba
    mv opt/ $pkgdir/.
    install -D LICENSE $pkgdir/usr/share/licenses/$pkgname/LICENSE
    desktop-file-install blaba.desktop --dir="${pkgdir}/usr/share/applications/"
}

package() {
    install -dD $pkgdir/opt/* /opt/.
}
