# Maintainer: smldis <dise.utils@gmail.com>

pkgname=('op' 'opgui')
pkgbase='openprogrammer'
pkgver=0.9.0
pkgrel=1
pkgdesc="Gui and Command Line software for Open Programmer a simple Usb Ic programmer, I2C and SPI controller"
arch=('any')
url="http://openprog.altervista.org/"
license=('GPL2')
makedepends=('cmake')
source=("http://downloads.sourceforge.net/project/openprogrammer/OP/op_$pkgver.tar.gz" 
	"http://downloads.sourceforge.net/project/openprogrammer/OPGUI/opgui_$pkgver.tar.gz"
	'CMakeListsop.txt' 'CMakeListsopgui.txt')
md5sums=('aefaa1b226719cea0acd99f6e5773431'
	 '9e37baa215d812962d3acea1f9451c37'
         'cc7160c0d00ef069acc17ff9748d3a03'
         '0090a5e011acc917ab35f9831233984a')
build() {
  cd "$srcdir"
  mv CMakeLists${pkgname[0]}.txt ${pkgname[0]}/CMakeLists.txt
  install -d build${pkgname[0]}
  cd build${pkgname[0]}
  cmake ../${pkgname[0]} -DCMAKE_INSTALL_PREFIX=/usr
  make

  cd "$srcdir"
  mv CMakeLists${pkgname[1]}.txt ${pkgname[1]}/CMakeLists.txt
  install -d build${pkgname[1]}
  cd build${pkgname[1]}
  cmake ../${pkgname[1]} -DCMAKE_INSTALL_PREFIX=/usr
  make
}

package_op() {
pkgdesc="Command Line software for Open Programmer a simple Usb Ic programmer, I2C and SPI controller"

  cd "$srcdir/build${pkgname[0]}"
  make DESTDIR="${pkgdir}" install
}

package_opgui() {
depends=('gtk2')
pkgdesc="Gui software for Open Programmer a simple Usb Ic programmer, I2C and SPI controller"

  cd "$srcdir/build${pkgname[1]}"
  make DESTDIR="${pkgdir}" install
}