# Contributor: Stefan Husmann 
# Maintainer: Eric Forgeot < http://esclinux.tk >

pkgname=textallion
pkgver=2011_05_27
pkgrel=1
pkgdesc="A simple word processor based on txt2tags and its markup, for publishing prose, literature, poetry in HTML, PDF or EPUB, and also cyoa (gamebooks & renpy)"
arch=('any')
url="http://anamnese.online.fr/site2/textallion/docs/presentation.html"
license=('BSD')
depends=('python2')
makedepends=('gzip')
optdepends=('texlive-humanities: export to pdf' 'calibre: export to epub' 'tidyhtml: cleaning html for epub export' 'psutils: advanced postscript operations like making booklets' 'ttf-linux-libertine: xetex optional backend' 'imagemagick: generate personalised covers' 'perl: for renpy export')
source=(http://textallion.googlecode.com/files/textallion_2011-05-27_signac.zip )
md5sums=('e80c8de4dc1aa2323e58f568f390d4ea')

build() {
  cd $srcdir/${pkgname}
    	mkdir -p $pkgdir/usr/bin/
	mkdir -p $pkgdir/usr/share/${pkgname}
	cp -fr $srcdir/${pkgname}/* $pkgdir/usr/share/${pkgname}
	rm $pkgdir/usr/share/${pkgname}/textallion_install.sh
	chmod -R 755 $pkgdir/usr/share/textallion/
	chmod +x $pkgdir/usr/share/textallion/core/textallion.sh
	chmod +x $pkgdir/usr/share/textallion/contrib/txt2tags/txt2tags

    echo "sh /usr/share/textallion/core/textallion.sh" > $pkgdir/usr/bin/textallion
    chmod +x $pkgdir/usr/bin/textallion
}
