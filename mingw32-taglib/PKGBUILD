pkgname=mingw32-taglib
pkgver=1.7
pkgrel=1
arch=(any)
pkgdesc="Taglib for mingw"
license=('GPL')
depends=(mingw32-zlib)
makedepends=(mingw32-gcc cmake)
options=(!strip !buildflags)
url="http://developer.kde.org/~wheeler/taglib.html"
source=("http://developer.kde.org/~wheeler/files/src/taglib-1.7.tar.gz"
"cmake-toolchain.cmake")
md5sums=('6a7e312668f153fa905a81714aebc257'
         'dd2b2db48187dff84050fe191d309d81')

build()
{
  cd $srcdir/taglib-$pkgver
  
  if [ -d build ] ; then
    rm -R build
  fi
  
  unset LDFLAGS
  
  mkdir build && cd build
  cmake .. \
    -DCMAKE_INSTALL_PREFIX=/usr/i486-mingw32/ \
    -DCMAKE_TOOLCHAIN_FILE=${srcdir}/cmake-toolchain.cmake \
    -DWITH_ASF=ON -DWITH_MP4=ON
  make
}

package() {
  cd "$srcdir/taglib-$pkgver/build"
  
  make DESTDIR=${pkgdir} install
}
