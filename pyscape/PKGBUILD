# Maintainer:Martin C. Doege <mdoege at compuserve dot com>

pkgname=pyscape
pkgver=20141216.0722238
pkgrel=1
pkgdesc="A Python soundscape tool"
arch=('any')
url="http://mdoege.github.com/PyScape/"
license=('GPL')
depends=('python2' 'tk' 'openal' 'freealut' 'python2-imaging')
makedepends=('git')
provides=('pyopenal')
conflicts=('pyopenal')
md5sums=('SKIP')
source=("git://github.com/mdoege/PyScape.git")
_gitname="PyScape"
PKGEXT='.pkg.tar'

pkgver() {
	cd "$_gitname"
	git log -1 --format='%cd.%h' --date=short | tr -d -
}

package() {
	cd ${_gitname}
	mkdir -p $pkgdir/usr/bin
	cp pyscape.py $pkgdir/usr/bin/pyscape
	mkdir -p $pkgdir/usr/share/icons
	cp desktop/pyscape.svg $pkgdir/usr/share/icons
	mkdir -p $pkgdir/usr/share/applications
	cp desktop/pyscape.desktop $pkgdir/usr/share/applications
	mkdir -p $pkgdir/usr/share/pyscape
	cp -r sounds presets backgrounds $pkgdir/usr/share/pyscape
	mkdir -p $pkgdir/usr/lib/python2.7/site-packages/openal
	cp openal/* $pkgdir/usr/lib/python2.7/site-packages/openal
	mkdir -p $pkgdir/usr/share/locale/de/LC_MESSAGES
	cp mo/de/LC_MESSAGES/pyscape.mo $pkgdir/usr/share/locale/de/LC_MESSAGES/
}
