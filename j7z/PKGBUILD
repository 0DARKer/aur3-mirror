# J7Z: Installer: Arch
# Contributor: Xavion <Xavion (dot) 0 (at) Gmail (dot) com>

pkgname=j7z
realname=J7Z
oldname=q7z
oldername=k7z
pkgver=1.0.0
pkgrel=1
pkgdesc="An alternative 7-Zip GUI"
arch=("any")
url=http://${realname}.Xavion.name
license=("LGPL3")
#depends=("java-runtime>=6" "p7zip>=4.57")
depends=("java-runtime>=6" "p7zip>=4.57" "tar>=1.15")
makedepends=("make>=3.80" "apache-ant>=1.8" "java-environment>=6")
optdepends=("p7zip-gui: The GUI component of P7Zip"
			#"tar: Supports POSIX attributes"
			"xz-utils: Supports XZ archives"
			"bzip2: Supports BZip2 archives"
			"gzip: Supports GZip archives")
conflicts=(${oldname} ${oldername})
replaces=(${oldname} ${oldername})
install="${realname}.install"
source=(http://prdownloads.sourceforge.net/${oldername}/${realname}-${pkgver}.tar.bz2)

build() {
	cd ${srcdir}/${realname}/Build

	# Environment
	source /etc/profile.d/jre.sh || source /etc/profile.d/openjdk6.sh || return 1
	source /etc/profile.d/apache-ant.sh || return 1

	#make uninstall || return 1
	#make clean || return 1
	make -j1 || return 1
	#make || return 1
}

package() {
	cd ${srcdir}/${realname}/Build

	make DESTDIR=${pkgdir} install || return 1

	# Messages
	msg "Seek further information or send feedback via the 'Help' menu."
}

sha1sums=('034cec0ce89fa728164aaeed338db34ca78d2e6f')
