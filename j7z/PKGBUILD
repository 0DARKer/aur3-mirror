# J7Z: Installer: Arch
# Contributor: Xavion <Xavion (dot) 0 (at) Gmail (dot) com>

pkgname=j7z
realname=J7Z
oldname=q7z
oldername=k7z
pkgver=1.0.1
pkgrel=1
pkgdesc="An alternative 7-Zip GUI"
arch=("any")
url=http://${realname}.Xavion.name
license=("LGPL3")
depends=("java-runtime>=6" "p7zip>=4.57")
makedepends=("make>=3.80")
#makedepends=("make>=3.80" "apache-ant>=1.8" "java-environment>=6")
optdepends=("p7zip-gui: The 7-Zip GUI"
			"gtk-kde4: KDE style support"
			"tar: Supports POSIX attributes"
			"bsdtar: Supports POSIX attributes"
			"gzip: Supports GZip archives")
			"bzip2: Supports BZip2 archives"
			"xz-utils: Supports XZ archives"
conflicts=(${oldname} ${oldername})
replaces=(${oldname} ${oldername})
install="${realname}.install"
#source=(http://prdownloads.sourceforge.net/${oldername}/${realname}-${pkgver}.src.tar.bz2)
source=(http://prdownloads.sourceforge.net/${oldername}/${realname}-${pkgver}.bin.tar.bz2)

build() {
	cd "${srcdir}"/${realname}/Build

	# Fixes
	sed -i 's|$(if $(Ant),,$(error Error:|#$(if $(Ant),,$(warning Warning|g' Makefile

	# Environment
	source /etc/profile.d/jre.sh || source /etc/profile.d/openjdk6.sh
	#source /etc/profile.d/apache-ant.sh

	#make uninstall
	#make clean
	make
}

package() {
	cd "${srcdir}"/${realname}/Build

	make DESTDIR="${pkgdir}" install

	# Messages
	msg "Seek further information or send feedback via the 'Help' menu."
}

#sha1sums=('59e522c80139fc9e4a06d78ec14baebb68f99fec')
sha1sums=('204729c121a2b5b4fa88fbdd93a7f8c6b1147d6c')
