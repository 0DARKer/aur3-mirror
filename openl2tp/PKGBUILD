# Maintainer: Aleksey Frolov <atommixz@gmail.com>
# Contributor: Orivej Desh <smpuj@bk.ru>
pkgname=openl2tp
pkgver=1.8
pkgrel=1
pkgdesc="L2TP client / server, written by Katalix Systems specifically for Linux"
arch=("i686" "x86_64")
url="http://opensource.katalix.com/openl2tp"
license=("GPL")
depends=('readline' 'ppp' 'rpcbind')
makedepends=('kernel26-headers')
source=(http://downloads.sourceforge.net/$pkgname/$pkgname-$pkgver.tar.gz 
	rc.openl2tpd)
options=(!emptydirs)

build() {
	cd $pkgname-$pkgver
	
	sed -i -e 's|-Werror||' Makefile
	sed -i -e 's|source|build|' Makefile

	make 
	make PPPD_VERSION=`pacman -Q ppp | awk '{print $2}' | awk -F- '{print $1}'` DESTDIR=$pkgdir install
	
	install -Dm755 ../rc.openl2tpd $pkgdir/etc/rc.d/openl2tpd
}

md5sums=('e3d08dedfb9e6a9a1e24f6766f6dadd0'
         '3a3efcf023c3a4019af031f21f7fbcc1')
