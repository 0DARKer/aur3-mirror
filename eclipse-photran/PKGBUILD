# Contributor: Andr√© Fettouhi <A.Fettouhi@gmail.com>

pkgname=eclipse-photran
pkgver=7.0.1
_ptprel=5.0.1
_ptptag=201107131351
pkgrel=2
pkgdesc="IDE for Fortran 77, 90, and 95 based on Eclipse and the CDT"
url="http://www.eclipse.org/photran/"
arch=('any')
license=('custom')
depends=("eclipse>=3.7" "eclipse-cdt>=8.0.0")
source=(http://download.eclipse.org/tools/ptp/builds/${_ptprel}/I.I${_ptptag}/ptp-master-${_ptprel}-I${_ptptag}.zip)
md5sums=('d9e98ad1b121eefd1eea37bc15d61dd3')

build() {
	installdir="${pkgdir}"/usr/share/eclipse/dropins/photran
	cd "${srcdir}"
	install -d "${installdir}"/eclipse/{plugins,features}
	cp plugins/org.eclipse.photran.*.jar "${installdir}"/eclipse/plugins
	cp plugins/org.eclipse.rephraserengine.*.jar "${installdir}"/eclipse/plugins
	rm "${installdir}"/eclipse/plugins/*intel*
	rm "${installdir}"/eclipse/plugins/*xlf*
	cp features/org.eclipse.photran_$pkgver.${_ptptag}.jar "${installdir}"/eclipse/features
	cp features/org.eclipse.rephraserengine_$pkgver.${_ptptag}.jar "${installdir}"/eclipse/features
}

