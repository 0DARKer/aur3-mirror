# Maintainer: James McGlashan <james[at]jamesm[dot]com[dot]au>

pkgname=oh-my-zsh-git
pkgver=20111203
pkgrel=1
pkgdesc="A handful of functions, auto-complete helpers, and stuff that makes you shout."
arch=('any')
url="http://github.com/robbyrussell/oh-my-zsh"
license=('unknown')
depends=('zsh>=4.3.9')
makedepends=('git')
optdepends=('python' 'curl' 'git' 'pkgtools')
install='oh-my-zsh.install'
conflicts=('grml-zsh-config')

# Cleaner _git format
_gitdomain='github.com'
_gituser='jamesm-sitegen'
_gitname='oh-my-zsh'
_gitroot="https://$_gitdomain/$_gituser/$_gitname.git"

build() {
  cd "$srcdir"
  msg "Connecting to GIT server.... [$_gitdomain:$_gituser:$_gitname]"
  if [ -d $_gitname ] ; then
    cd $_gitname && git pull origin
    msg "The local files are updated."
  else
    git clone --depth=1 $_gitroot $_gitname
  fi
  msg "GIT checkout done or server timeout"
}

package() {
  install -d "$pkgdir/usr/share/oh-my-zsh"
  cp -r oh-my-zsh/* "$pkgdir/usr/share/oh-my-zsh"

  mkdir -p "$pkgdir/usr/share/zsh/site-functions"
  cp "$pkgdir/usr/share/oh-my-zsh/omz" "$pkgdir/usr/share/zsh/site-functions/"
}

# vim:set ts=2 sw=2 et:
