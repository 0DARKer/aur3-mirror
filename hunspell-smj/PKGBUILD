# Contributor: Kevin Brubeck Unhammer <unhammer@gmail.com>
# Maintainer: Kevin Brubeck Unhammer <unhammer@gmail.com>

pkgname=hunspell-smj
pkgver=1.0beta7.20090316
pkgrel=1
pkgdesc="Lule SÃ¡mi (smj) dictionary for Hunspell"
arch=('i686' 'x86_64')
url="http://www.divvun.no/en/userdocs/X-spell/install_linux.html"
license=('GPL')
depends=('hunspell')
# Can't find a static link to 1.0beta7.20090316, so this PKGBUILD might eventually need the pkgver changed
source=(http://divvun.no/static_files/$pkgname.tar.gz)
md5sums=('37960e793e7253642dee35b37e925abf')

build() {
  cd $srcdir/$pkgname-$pkgver/
  make || return 1
  make DESTDIR=$startdir/pkg install || return 1

  # Ensure that LibreOffice finds them:
  mkdir -p $startdir/pkg/usr/share/hunspell
  ln -s $startdir/pkg/usr/share/myspell/dicts/smj.dic $startdir/pkg/usr/share/hunspell/
  ln -s $startdir/pkg/usr/share/myspell/dicts/smj.aff $startdir/pkg/usr/share/hunspell/
  ln -s $startdir/pkg/usr/share/myspell/dicts/smj_NO.dic $startdir/pkg/usr/share/hunspell/
  ln -s $startdir/pkg/usr/share/myspell/dicts/smj_NO.aff $startdir/pkg/usr/share/hunspell/
  ln -s $startdir/pkg/usr/share/myspell/dicts/smj_SE.dic $startdir/pkg/usr/share/hunspell/
  ln -s $startdir/pkg/usr/share/myspell/dicts/smj_SE.aff $startdir/pkg/usr/share/hunspell/

  # I believe dictionary.lst should be a user-configurable file, in
  # any case it would get overwritten if new packages wanted to do the
  # same thing, and the dictionaries seems to work without this:
  rm -f $startdir/pkg/usr/share/myspell/dicts/dictionary.lst

  # For some reason, my KDE shows the languages as
  # " (Noreg)" and " (Sverige)" instead of
  # "Lulesamisk (Noreg)" and "Lulesamisk (Sverige)".
  # However, LibreOffice shows the correct names.
}
