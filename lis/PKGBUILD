pkgname=lis
pkgver=1.2.126
pkgrel=0
pkgdesc="Lis is a library of Iterative Solvers for linear systems."
url="http://www.ssisc.org/lis"
depends=('gcc-libs')
makedepends=('binutils' 'awk')
arch=('i686' 'x86_64')
conflicts=('lis')
provides=('lis')
source=(${url}/dl/${pkgname}-${pkgver}.tar.gz)
license=('custom')
md5sums=('a85378c648cf6dd1bf4cb292abd08a36')

build() {

	cd "${srcdir}/${pkgname}-${pkgver}"

    msg 'Build lis'
    ./configure \
		--prefix=/usr \
		--enable-mpi \
		--enable-omp \
		--enable-fma \
		--enable-longlong \
		--disable-dependency-tracking \
		--enable-shared

	make

    msg 'Check lis'
	make check
}

package() {

   cd "${srcdir}/${pkgname}-${pkgver}"
   make install DESTDIR=${pkgdir}

   cd ${pkgdir}/usr/share
   mkdir -p licenses/lis
   mv doc/lis/COPYING licenses/lis
}

