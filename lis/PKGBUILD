pkgname=lis
pkgver=1.4.3
pkgrel=0
pkgdesc="Lis is a library of Iterative Solvers for linear systems."
url="http://www.ssisc.org/lis"
depends=('gcc-libs' 'openmpi')
makedepends=()
arch=('i686' 'x86_64')
conflicts=('lis')
provides=('lis')
source=(${url}/dl/${pkgname}-${pkgver}.tar.gz)
license=('custom')
options=('!strip')
md5sums=('53619674519dcb4fb14fc126f66d68dc')

build() {

	cd "${srcdir}/${pkgname}-${pkgver}"

    msg 'Build lis'
    ./configure \
		--prefix=/usr \
		--enable-mpi \
		--enable-omp \
		--enable-fma \
		--enable-shared \
		--enable-static \
		--disable-dependency-tracking \

        #--enable-debug

	make

    msg 'Check lis'
	make check
}

package() {

   cd "${srcdir}/${pkgname}-${pkgver}"
   make install DESTDIR=${pkgdir}

   cd ${pkgdir}/usr/share
   mkdir -p licenses/lis
   mv doc/lis/COPYING licenses/lis
}
