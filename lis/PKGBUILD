# Maintainer: D. Naumov <aur[at]naumov[dot]de>
pkgname=lis
pkgver=1.4.11
pkgrel=0
pkgdesc="Library of Iterative Solvers for linear systems."
url="http://www.ssisc.org/lis"
depends=('openmpi')
makedepends=()
arch=('i686' 'x86_64')
conflicts=('lis')
provides=('lis')
source=(${url}/dl/${pkgname}-${pkgver}.tar.gz)
license=('custom')
options=('!strip')
md5sums=('6329c00a5a202adfc9cd39a0ce8bac7e')

build() {

	cd "${srcdir}/${pkgname}-${pkgver}"

    msg 'Configure lis'
    ./configure \
		--prefix=/usr \
		--enable-mpi \
		--enable-omp \
		--enable-fma \
		--enable-shared \
		--enable-static \
		--disable-dependency-tracking \

        #--enable-debug

    msg 'Build lis'
	make
}

check() {
    msg 'Check lis'
	cd "${srcdir}/${pkgname}-${pkgver}"
	make check
}

package() {

   cd "${srcdir}/${pkgname}-${pkgver}"
   make install DESTDIR="${pkgdir}"
   rm -rf "${pkgdir}/usr/share/examples"

   install -Dm644 COPYING "$pkgdir/usr/share/licenses/$pkgname/COPYING"
}
