# Maintainer: D. Naumov <aur[at]naumov[dot]de>
pkgname=lis
pkgver=1.4.52
pkgrel=1
pkgdesc="Library of Iterative Solvers for linear systems."
url="http://www.ssisc.org/lis"
optdepends=('openmpi: MPI support')
makedepends=()
arch=('i686' 'x86_64')
conflicts=('lis')
provides=('lis')
source=(${url}/dl/${pkgname}-${pkgver}.tar.gz)
license=('custom')
options=('!strip')
md5sums=('24d5a0f3b3000e6ef370cf5a23c12a18')

build() {

    cd "${srcdir}/${pkgname}-${pkgver}"

    msg 'Configure lis'
    ./configure \
        --prefix=/usr \
        --enable-fma \
        --enable-shared \
        --enable-static \
        --disable-dependency-tracking \

        #--enable-mpi \
        #--enable-omp \
        #--enable-debug

    msg 'Build lis'
    make
}

check() {
    msg 'Check lis'
    cd "${srcdir}/${pkgname}-${pkgver}"
    make check
}

package() {

   cd "${srcdir}/${pkgname}-${pkgver}"
   make install DESTDIR="${pkgdir}"
   rm -rf "${pkgdir}/usr/share/examples"

   install -Dm644 COPYING "$pkgdir/usr/share/licenses/$pkgname/COPYING"
}
