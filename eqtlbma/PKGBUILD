# This is an example PKGBUILD file. Use this as a start to creating your own,
# and remove these comments. For more information, see 'man PKGBUILD'.
# NOTE: Please fill out the license field for your package! If it is unknown,
# then please put 'unknown'.

# Maintainer: Your Name <youremail@domain.com>
pkgname=eqtlbma
pkgver=4.2.2
pkgrel=1
fullname=eqtlbma-1.2.2
pkgdesc="A bayesian statistical method to detect eQTLs jointly in multiple subgroups (e.g. tissues)"
arch=('i386' 'i686' 'x86_64')
url="https://github.com/timflutre/eqtlbma"
license=('GPL')
depends=('gcc-libs-multilib' 'gsl' 'r')
install='eqtlbma.install'
source=("https://github.com/timflutre/eqtlbma/archive/v1.2.2.tar.gz"
        "https://raw.githubusercontent.com/timflutre/eqtlbma/master/scripts/tutorial_eqtlbma.R"
        "https://raw.githubusercontent.com/timflutre/eqtlbma/master/scripts/utils_eqtlbma.R")
noextract=()
md5sums=('ade6803a05c22761444de25a949f61e0'
         '4f793a251353d5c17a98a7f4ad641ef0'
         '94b7afe13237f1ec6835fc3ffb1a0297')

build() {
  cd "$srcdir/$fullname"
  autoreconf --install --force --symlink
  ./configure --prefix=/usr
  make
  make pdf
}

check() {
  cd "$srcdir/$fullname"
  make -k check
}

package() {
  cd "$srcdir/$fullname"              
  make DESTDIR="$pkgdir/" install install-info
  mkdir "$pkgdir/usr/share/eqtlbma/"
  cp "$srcdir/$fullname/doc/manual_eqtlbma.pdf" "$pkgdir/usr/share/eqtlbma/"
  cp "$srcdir/utils_eqtlbma.R" "$pkgdir/usr/share/eqtlbma/"
  cp "$srcdir/tutorial_eqtlbma.R" "$pkgdir/usr/share/eqtlbma/"
}
