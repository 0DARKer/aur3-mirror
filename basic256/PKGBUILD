# Maintainer:  Martin C. Doege <mdoege at compuserve dot com>
# Contributor: Raphael Scholer <rscholer@gmx.de>
# Contributor: Eric Waller <ewwaller@gmail.com>

pkgname=basic256
pkgver=1.0.0.7
pkgrel=1
pkgdesc="Educational BASIC programming environment"
arch=('i686 x86_64')
url="http://www.basic256.org/"
license=('GPL2')
depends=('qt5-base' 'qt5-webkit' 'sdl_mixer' 'espeak')
makedepends=('bison' 'flex')
source=(http://downloads.sourceforge.net/kidbasic/${pkgname}_${pkgver}.tgz
        "basic256.desktop")
md5sums=('3e38c55d8f551eef7178bcc8d52b0443'
         'dfb1ee3ac38d86549ed5673b8ee46b49')

build () {
	cd "$srcdir/" || return 1
	qmake BASIC256.pro || return 1
	make || return 1
}

package () {
        cd "$srcdir/"
	install -m 755 -D BASIC256 "${pkgdir}/usr/bin/basic256"
	install -m 755 -D BASIC256Portable/App/AppInfo/appicon_128.png "${pkgdir}/usr/share/icons/basic256.png"
	install -m 755 -D basic256.desktop "${pkgdir}/usr/share/applications/basic256.desktop"
	mkdir -p "${pkgdir}/usr/share/basic256/examples"
	cp -pr "$srcdir/"Examples/* "${pkgdir}/usr/share/basic256/examples"
        mkdir -p "${pkgdir}/usr/share/basic256/help"
        cp -pr "$srcdir/"wikihelp/help/* "${pkgdir}/usr/share/basic256/help"
        cp -pr "$srcdir/"Translations/* "${pkgdir}/usr/share/basic256/"
}
