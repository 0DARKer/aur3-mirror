# Maintainer: oke3 < Sekereg [at] gmx [dot] com >
# Old Maintainer: Jeremy Newton (Mystro256)
# Old Maintainer: Matthias Sobczyk <matthias.sobczyk@googlemail.com>
# Contributor: György Balló <ballogy@freestart.hu>

pkgname=banshee-devel
_pkgname=banshee
pkgver=2.3.3
_develver=2.3
pkgrel=1
pkgdesc="Music management and playback for GNOME (development release)"
arch=('i686' 'x86_64')
url="http://banshee.fm/"
license=('MIT')
depends=(libxxf86vm gstreamer0.10-base-plugins mono-addins notify-sharp-svn dbus-sharp-glib boo libwebkit libsoup-gnome gdata-sharp taglib-sharp gtk-sharp-beans 'gudev-sharp' 'gkeyfile-sharp' gconf-sharp libmtp libgpod mono-zeroconf desktop-file-utils hicolor-icon-theme xdg-utils media-player-info)
makedepends=('intltool' 'gnome-doc-utils')
optdepends=('gstreamer0.10-good-plugins: Extra media codecs'
            'gstreamer0.10-ugly-plugins: Extra media codecs'
            'gstreamer0.10-bad-plugins: Extra media codecs'
            'gstreamer0.10-ffmpeg: Extra media codecs'
            'brasero: CD burning')
conflicts=('banshee' 'banshee-git')
provides=('banshee')
options=('!libtool')
install=$pkgname.install
source=(http://ftp.gnome.org/pub/GNOME/sources/${_pkgname}/${_develver}/${_pkgname}-${pkgver}.tar.xz
        banshee-recent-gpod.patch)
sha256sums=('3a9beb35cafe1b74b3d48dd9ac8a99182b62889444f671ee8c4901f71df09822'
            '81f6618e027b92dec02b867b6fae97d8ad84f4b4c523f3ed6dd238c917e5aeba')

build() {
#  export MONO_SHARED_DIR="${srcdir}/.wabi"
#  mkdir -p "${MONO_SHARED_DIR}"

  cd "${srcdir}/${_pkgname}-${pkgver}"
  patch -Np1 -i "$srcdir/banshee-recent-gpod.patch"

  ./configure --prefix=/usr --sysconfdir=/etc --localstatedir=/var \
              --disable-docs \
              --disable-static \
              --disable-scrollkeeper \
              --disable-schemas-install \
              --with-vendor-build-id=ArchLinux

  make
}

package() {
#  export MONO_SHARED_DIR="$srcdir/.wabi"
#  mkdir -p "$MONO_SHARED_DIR"

  cd "$srcdir/$_pkgname-$pkgver"

  make DESTDIR="$pkgdir" install

  install -D -m644 COPYING "$pkgdir/usr/share/licenses/$pkgname/COPYING"
}
