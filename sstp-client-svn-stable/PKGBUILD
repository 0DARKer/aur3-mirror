# Contributor: Dmitry V. Luciv <dluciv@dluciv.name>
# Maintainer: Dmitry V. Luciv <dluciv@dluciv.name>

pkgname=sstp-client-svn-stable
pkgrel=6
pkgver=1.0.9 # see no need to make pkgver() function now
pkgdesc="SSTP client tested SVN experimantally stable revision"
arch=("i686" "x86_64")
url="http://sstp-client.sourceforge.net/"
license=('GPL2')
conflicts=()
provides=('sstp-client-svn-stable')
depends=('ppp=2.4.6' 'openssl')
makedepends=('gcc' 'ppp=2.4.6' 'subversion')
optdepends=()
install=${pkgname}.install

source=( 'actual_ppp_version.diff'
         "${pkgname}::svn+https://sstp-client.svn.sourceforge.net/svnroot/sstp-client/branches/${pkgver}" )

md5sums=( '0fc3389ff11729d2f2dcc1440a8716e8'
          'SKIP' )

_pfx="/usr"
_lsd="/"

build() {
  cd "$srcdir/$pkgname"

  msg "Patching to actual ppp..."
  patch -p0 -i ../../actual_ppp_version.diff
  
  msg "Begin make..."
  ./configure --prefix=${_pfx} --localstatedir=${_lsd}
  make
}

package() {
  cd "$srcdir/$pkgname"

  make DESTDIR=${pkgdir} install

  install -d ${pkgdir}${_lsd}/run/sstpc
  rm -rf ${pkgdir}/var

  mv ${pkgdir}${_pfx}/sbin ${pkgdir}/usr/bin
}

# End of file
