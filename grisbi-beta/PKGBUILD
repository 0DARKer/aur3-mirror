# Maintainer: Semitsoglou-Tsiapos Dimitrios <madcatmk254@gmail.com>
# Contributor: maturain <maturain at _spam_gmail.com>
pkgname=grisbi-beta
pkgver=0.6.0
pkgrel=1
pkgdesc="Personal financial management program"
arch=('i686' 'x86_64')
url="http://www.grisbi.org"
license=('GPL')
groups=('office')
depends=('gtk2' 'libxml2')
install=grisbi-beta.install
optdepends=('libofx: used for ofx import')
makedepends=('libofx')
source=(http://downloads.sourceforge.net/grisbi/grisbi-$pkgver.tar.bz2)
md5sums=('19062be7f4f6ec29adda4ec09f0d626f')
build() {
    cd $startdir/src/grisbi-$pkgver
    ./configure --prefix=/usr #remove --as-needed in LDFLAGS in /etc/makepkg.conf to have plugin
    make || return 1
    #make ofx plugin if libofx present
    cd src/plugins
    for plugin in *;do
        [ ! -d "$plugin" ] && continue
        cd "$plugin"
        make || continue
        make DESTDIR=$pkgdir install
        cd ..
    done
    cd $startdir/src/grisbi-$pkgver
    make DESTDIR=$pkgdir install
    rm  $pkgdir/usr/lib/grisbi/*la
}

