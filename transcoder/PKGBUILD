# Maintainer: archtux <antonio.arias99999@gmail.com>

pkgname=transcoder
pkgver=0.0.5
pkgrel=2
pkgdesc="Video converter for Linux using GTK+ and ffmpeg."
arch=('i686' 'x86_64')
url="http://transcoder84.sourceforge.net/"
license=('GPL3')
depends=('gtk2')


if [ "${CARCH}" = 'x86_64' ]; then
  source=(http://downloads.sourceforge.net/sourceforge/transcoder84/Transcoder_${pkgver}_amd64.tar.gz)
  md5sums=('34ce7e10d627764ca35afd376e648703')
elif  [ "${CARCH}" = 'i686' ]; then
  source=(http://downloads.sourceforge.net/sourceforge/transcoder84/Transcoder_${pkgver}_i386.tar.gz)
  md5sums=('1d7cecd58a8049b173d3bc7463683715')
fi

build() {
cd $srcdir/Transcoder

# Compile and install transcoder
./compile.sh
mkdir -p $pkgdir/usr/share/transcoder
install -Dm755 Transcoder $startdir/transcoder_start $pkgdir/usr/share/transcoder


# Install ffmpeg and libraries that come bundled with Transcoder because ffmpeg from Arch repository isn't compatible!
install -Dm755 ffmpeg $pkgdir/usr/share/transcoder/ffmpeg
cp -R data/ libs/ $pkgdir/usr/share/transcoder

# Install desktop entry
install -Dm644 $startdir/transcoder.desktop $pkgdir/usr/share/applications/transcoder.desktop
install -Dm644 data/transcoder.png $pkgdir/usr/share/pixmaps/transcoder.png
}
