# Contributor: Travis Nickles <ryoohki7@yahoo.com>
# Maintainer: Donald Hayward <liquidsunshine@gmail.com> (As of 26 July 2008)

pkgname=stepmania-extras
pkgver=3.9
pkgrel=5
pkgdesc="Extra stuff for StepMania"
url="http://stepmania.com/wiki/Downloads"
arch=(i686 x86_64)
depends=('stepmania')
makedepends=('unzip')
license=('public-domain')
source=(http://stepmaniam2.com/sm/downloads/downloads/SM3.0_Announcer_3rdMix_twen.smzip \
http://stepmaniam2.com/sm/downloads/downloads/SM3.0_Announcer_4thMix.smzip \
http://stepmaniam2.com/sm/downloads/downloads/SM3.0_Announcer_LoveNekoAngelBoy.smzip \
http://stepmaniam2.com/sm/downloads/downloads/SM3.0_Announcer_MAX2.smzip \
http://stepmaniam2.com/sm/downloads/downloads/SM3.0_Announcer_SchizKitty.smzip \
http://stepmaniam2.com/sm/downloads/downloads/SM3.0_Announcer_Solo_twen.smzip \
http://stepmaniam2.com/sm/downloads/downloads/SM3.0_Backgrounds_BGAnimations_Project_Saturniaus.smzip \
http://stepmaniam2.com/sm/downloads/downloads/SM3.0_Backgrounds_BGAnimations_Project_Saturniaus2.smzip \
http://stepmaniam2.com/sm/downloads/downloads/SM3.0_Backgrounds_BGAnimations_Samples.smzip \
http://stepmaniam2.com/sm/downloads/downloads/SM3.0_Backgrounds_RandomMovies_DynamiteRage.smzip \
http://stepmaniam2.com/sm/downloads/downloads/SM3.0_Backgrounds_RandomMovies_Samples.smzip \
http://stepmaniam2.com/sm/downloads/downloads/SM3.0_Backgrounds_Visualizations_Samples.smzip \
http://stepmaniam2.com/sm/downloads/downloads/SM3.9_Characters_DancePC.smzip \
http://stepmaniam2.com/sm/downloads/downloads/Songs_DJMcFox_PlagueMixOne.smzip \
http://stepmaniam2.com/sm/downloads/downloads/Songs_DJMcFox_PlagueMixThree.smzip \
http://stepmaniam2.com/sm/downloads/downloads/Songs_DJMcFox_PlagueMixTwo.smzip \
http://stepmaniam2.com/sm/downloads/downloads/Songs_DancingWipEout_DomoDomoDomo.smzip \
http://stepmaniam2.com/sm/downloads/downloads/Songs_DarkChao_TheErrorSong.smzip \
http://stepmaniam2.com/sm/downloads/downloads/Songs_Frieza_Sweet.smzip \
http://stepmaniam2.com/sm/downloads/downloads/Songs_GroupBanners_Dance.smzip \
http://stepmaniam2.com/sm/downloads/downloads/Songs_GroupBanners_Pump.smzip \
http://stepmaniam2.com/sm/downloads/downloads/Songs_Nathan_MrRoboto.smzip \
http://stepmaniam2.com/sm/downloads/downloads/Songs_StepMix1_DMAshura_DiSCONNECTED_HaZaRD.smzip \
http://stepmaniam2.com/sm/downloads/downloads/Songs_StepMix1_DMAshura_MAX_Forever.smzip \
http://stepmaniam2.com/sm/downloads/downloads/Songs_StepMix1_DMAshura_MaxX_AttaxX.smzip \
http://stepmaniam2.com/sm/downloads/downloads/Songs_StepMix1_DMAshura_neoMAX.smzip \
http://stepmaniam2.com/sm/downloads/downloads/Songs_StepMix1_DMAshura_omega.smzip \
http://stepmaniam2.com/sm/downloads/downloads/Songs_StepMix1_Nebyoolae_ForNotTrying.smzip \
http://stepmaniam2.com/sm/downloads/downloads/Songs_StepMix1_Nebyoolae_SnakeShake.smzip \
http://stepmaniam2.com/sm/downloads/downloads/Songs_cryptex2o6_TwilightZone2005.smzip
)
md5sums=('99b0abd0a1296e7adaf6e80c12ebac30'\
         'd1add5f96b5db76bd4b5350701aae75b'\
         '27084b1b80562aae6c6b5f1bca69ca16'\
         'a92ecbb33c13b30db8b007777fee412b'\
         'b13c79124ffacce20658ba0cb9a0ddb0'\
         '0de2c4a19c0ea20003638956e1857ed1'\
         '732fc93851a19c4f45de5c5138960aea'\
         'e24e2d9f6db82f96eb3dc3d688dbe32b'\
         'a5623291b835ea4d5a5c2092239e032f'\
         '365e2679b4aa6121b0223492e8c3defd'\
         '846adeb2dfd259c5018d7e26fe7101dd'\
         '96e4df126428e94da683b330113fd775'\
         '69102e646f5f7839a5497ab42c74ec26'\
         '192808ad8eb76cfa91d78c4176f1c29d'\
         '7fa1d139cf09c03a962360d083febbb3'\
         'cc9e88faa3f1109c5bc6ff1676f5f226'\
         'dbf8146d7d20b0d2d8c1d84c3f07e35e'\
         '02980c8e4ca943208e6f704059fc1df9'\
         '049e083af64fd66a20540fb2f71f7912'\
         '57ad64017e10fcad2f69b9b211ce5a35'\
         'a4fbce1f0d7908ae3882de0fd3c7f04d'\
         'a026e7134508c10ddf591adbaad66dac'\
         'bd47219db353e9dca9569ff93f1c0632'\
         'a9dad2f5eba2afc35d4ccdc97b0575e0'\
         'e50161da44cd7d50a811c922bb021976'\
         '5e2e183c2c604c742e39b6b5ff254501'\
         'e237888d3f8afaab943fefab74fc0edf'\
         '8d23d79571249beba41cbb202bdd01a4'\
         '0f79fa8c91a0462fca9552e69cf4b338'\
         'f02703c3ab5a3422396ddb3d1b7e0188')
install=stepmania-extras.install

build() {
  cd $startdir/src

  # Unzip all archives and extract the contents to the stepmania folder
  for file in `ls *.smzip`; do
    unzip -o $file -d stepmania
  done

  # Delete any unnecessary files and files that might cause conflicts with StepMania.
  # Also, rename the folder that would cause problems with pacman.
  rm -r stepmania/Characters/default
  rm stepmania/smzip.ctl

  # Move all content
  install -d $startdir/pkg/opt
  mv stepmania $startdir/pkg/opt

  # Change file permissions so that users in the games group can add more content
  cd $startdir/pkg/opt/stepmania
  chown -R root:games *
  chmod 2775 {Announcers,BGAnimations,Characters,RandomMovies,Songs,Themes,Visualizations,.}
  cd Songs
  chmod 2775 *
  chmod 644 {"group banners credits readme.txt","group banners credits.txt","Plaguemix Series.png"}
}
