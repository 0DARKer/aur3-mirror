pkgname=gxms-git
pkgbase=gxms
pkgver=2013.03.28
pkgrel=1
pkgdesc="A desktop client to Ebuddy XMS, using Webkit"
arch=(any)
url="https://github.com/Unia/gxms"
license=(GPL2)
depends=('gtk3' 'webkitgtk3')
md5sums=()

_gitroot="https://github.com/Unia/$pkgbase"
_gitname=$pkgbase

build() {
	cd "$srcdir/"
	msg "Connecting to GIT server..."

	if [ -d ${_gitname} ] ; then
		cd ${_gitname}
		git pull
		msg "The local files are updated."
	else
		git clone ${_gitroot} ${_gitname}
	fi
	msg "GIT checkout done or server timeout"

	cd "$pkgbase"
	make
}

pkgver() {
	cd "$srcdir/$_gitname"
	git log -1 --format="%cd" --date=short | sed 's\-\.\g'
}

package() {
	cd "$srcdir/$pkgbase"
	make DESTDIR="$pkgdir" install
}
