# Maintainer: Jonathan Steel <jsteel at aur.archlinux.org>
# Contributor: Ido Rosen <ido@kernel.org>
# Contributor: Brett Hoerner <brett@bretthoerner.com>
# Contributor: Jochen Schalanda <jochen+aur@schalanda.name>
# Contributor: Mathieu Clabaut <mathieu.clabaut@gmail.com>
# Contributor: helios <aur@wiresphere.de>
# Contributor: George Ornbo <gornbo@gmail.com>
# Contributor: Niklas Heer <niklas.heer@me.com>

pkgname=vagrant
pkgver=1.5.1
pkgrel=2
pkgdesc="Build and distribute virtualized development environments"
arch=('x86_64')
url="http://vagrantup.com"
license=('MIT')
options=('!emptydirs')
depends=('ruby' 'curl' 'lzo2' 'libidn' 'rtmpdump')
source=("$pkgname"
        'http://pkgbuild.com/~jsteel/aur/vagrant/substrate_archlinux_x86_64.zip'
        'git://github.com/mitchellh/vagrant-installers.git')
md5sums=('2aa6e1663cd2bf3d38fe450455c40231'
         '53d8a137e0b50fee8509a7d1c15fd33b'
         'SKIP')

build() {
  REV=6977e93ba98fd19112b1fed74dafb8619f581984
    "$srcdir"/$pkgname-installers/package/support/install_vagrant.sh \
    "$srcdir"/substrate/ $REV "$srcdir"/substrate/vagrant_version
}

package() {
  install -d "$pkgdir"/opt/
  mv "$srcdir"/substrate/ "$pkgdir"/opt/$pkgname/

  install -Dm755 "$srcdir"/$pkgname "$pkgdir"/usr/bin/$pkgname
}
