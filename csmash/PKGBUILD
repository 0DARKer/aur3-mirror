# Time-stamp: "PKGBUILD, 2009-06-03 10:38Z fgr"
# Contributor: Eric Belanger <belanger@astro.umontreal.ca>
#
pkgname=csmash
pkgver=0.6.6
pkgrel=2
pkgdesc="a 3D tabletennis game."
arch=(i686 x86_64)
url="http://cannonsmash.sourceforge.net/"
license=('GPL')
depends=('sdl' 'gtk2' 'mesa' 'sdl_image' 'sdl_mixer')
options=('!makeflags')
source=(http://prdownloads.sourceforge.net/cannonsmash/$pkgname-$pkgver.tar.gz
  ftp://ftp.ncnu.edu.tw/Linux/Gentoo/gentoo-portage/games-simulation/cannonsmash/files/cannonsmash-0.6.6-gcc41.patch
  ftp://ftp.ncnu.edu.tw/Linux/Gentoo/gentoo-portage/games-simulation/cannonsmash/files/cannonsmash-0.6.6-sizeof-cast.patch
  ftp://ftp.ncnu.edu.tw/Linux/Gentoo/gentoo-portage/games-simulation/cannonsmash/files/cannonsmash-0.6.6-x-inc.patch)
md5sums=('bcf2eddd0f04d58e5dac6d767f41d9af' '2ffbd16a7577ab027afa03466bff1ad6'\
         '112758236b8f2e754e515d821380787e' '76dd644fdfc4521c420f0f63d3365f29')

build()
{
  cd $srcdir/$pkgname-$pkgver
  patch -p0 < ../cannonsmash-0.6.6-gcc41.patch || return 1
  patch -p0 < ../cannonsmash-0.6.6-sizeof-cast.patch || return 1
  patch -p0 < ../cannonsmash-0.6.6-x-inc.patch || return 1
  ./configure --prefix=/usr --with-sdl-prefix=/usr --disable-sdltest
  make || return 1
  make DESTDIR=$pkgdir install || return 1
}
