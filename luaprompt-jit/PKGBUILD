# Maintainer: Lucas Hermann Negri <lucashnegri@gmail.com>

pkgname=luaprompt-jit
pkgver=0.3.0
pkgrel=1
pkgdesc="luaprompt compiled with luajit and history support"
arch=('i686' 'x86_64')
url="http://www.nongnu.org/techne/lua/luaprompt" 
depends=('luajit' 'readline')
makedepends=('gcc')
license=('custom')
source=("http://download.savannah.gnu.org/releases/techne/luaprompt_0.3.tar.gz"
        "prompt-luajit.diff"
        "LICENSE")
md5sums=("8f4b6ede7e2b4b39abef67a5e95a59a6"
         "34ceb31fd4ca7c20392800e7db892e3a"
         "ef72cd82b7ba326525b1d75b6d5076f3")

prepare() {
  cd "${srcdir}/prompt"
  patch -uNp1 -i ../prompt-luajit.diff || return 1
}

build() { 
  cd "$srcdir/prompt"
  make
}

package() {
  cd "$srcdir/prompt"
  mkdir -p ${pkgdir}/usr/bin
  mkdir -p ${pkgdir}/usr/share/licenses/${pkgname}/
  make install DESTDIR=${pkgdir}
  cp ${startdir}/LICENSE ${pkgdir}/usr/share/licenses/${pkgname}/
}
