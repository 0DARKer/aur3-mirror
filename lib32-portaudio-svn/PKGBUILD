# Maintainer: Hans-Kristian Arntzen <maister@archlinux.us>

pkgname=lib32-portaudio-svn
pkgver=1571
pkgrel=2
pkgdesc="PortAudio is a free, cross platform, open-source, audio I/O library (32 bit libs)."
arch=('x86_64')
url="http://www.portaudio.com"
license="custom"
depends=('lib32-alsa-lib' 'lib32-jack')
makedepends=('subversion' 'gcc-multilib')
conflicts=('lib32-portaudio')
provides=('lib32-portaudio')
source=()
md5sums=()

_svntrunk=https://www.portaudio.com/repos/portaudio
_svnmod=trunk

build() 
{
  cd $startdir/src

  if [ -d $_svnmod/.svn ]; then
	  echo "Directory is already existing - Updating"
	  (cd $_svnmod && svn update)
  else
	  echo "Checking out from SVN"
	  svn co $_svntrunk/$_svnmod --config-dir ./ -r $pkgver $_svnmod
  fi

  cd $_svnmod
  CC="gcc -m32" ./configure --libdir=/usr/lib32 --prefix=/usr --with-alsa --with-jack || return 1
  make || return 1
}

package()
{
  cd $srcdir/$_svnmod
  make DESTDIR=$pkgdir install
  rm -rf $pkgdir/usr/include
}
