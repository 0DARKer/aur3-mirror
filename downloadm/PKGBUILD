# Maintainer: SoleSoul <j.lahav ta gmail tod com>
pkgname=downloadm
pkgver=0.1.2
pkgrel=1
pkgdesc="A download accelerator/manager which uses aria2c as a backend."
arch=('i686' 'x86_64')
url="http://sourceforge.net/p/downloadm/"
license=('GPL')
depends=('gtkmm' 'xmlrpc-c' 'aria2' 'libsigc++')
makedepends=('qt')
source=(http://downloads.sourceforge.net/project/downloadm/DownloadM-$pkgver.tar.gz)
md5sums=('6f44e5b334d3c87807c72c88c0b32cb5')

build() {
    cd DownloadM    

    cd Entities
    qmake && make

    cd ../aria2c_com
    qmake && make
    
    cd ../DownloadM
    qmake && make

    cd ../GUI
    qmake && make
}

package() {
    mkdir -p $pkgdir/usr/bin/
    cp $srcdir/DownloadM/GUI/downloadm $pkgdir/usr/bin/

    mkdir -p $pkgdir/usr/share/downloadm/
    cp $srcdir/DownloadM/GUI/downloadm.glade $pkgdir/usr/share/downloadm/
    
    mkdir -p $pkgdir/usr/share/icons/hicolor/48x48/apps/
    cp $srcdir/DownloadM/GUI/downloadm.png $pkgdir/usr/share/icons/hicolor/48x48/apps/
    
    mkdir -p $pkgdir/usr/share/icons/hicolor/scalable/apps/
    cp $srcdir/DownloadM/GUI/downloadm.svg $pkgdir/usr/share/icons/hicolor/scalable/apps/
}
