# Maintainer: David Roheim <david dot roheim at gmail dot com>
pkgname=ucx
pkgver=3.1.0.0
pkgrel=2
pkgdesc="UltraCompare Professional is a powerful compare/merge application."
arch=('i686' 'x86_64')
url="http://www.ultraedit.com/products/ultracompare-mac-linux.html"
license=('custom')
install=${pkgname}.install
depends=(glibc gdk-pixbuf2 glib2 icu libpng libjpeg-turbo libx11 libxml2 zlib pango)
options=(!strip)

source=("http://www.ultraedit.com/files/ucx/Other/ucx-${pkgver}_amd64.tar.gz")
sha256sums=('78712dd86a9392f9957e4182845f677273bf9605fc9f78327d60fa4583cee1e2')

if [ "${CARCH}" = 'i686' ]; then
	source[0]=("http://www.ultraedit.com/files/ucx/Other/ucx-${pkgver}_i386.tar.gz")
	sha256sums[0]=("eedf05dd73990d79abc07c10d455e719e2204bd4892653ca4039c18050a57950")
fi

build() {
  true
}

package() {
  cd "${srcdir}/${pkgname}"
  install -m755 -d ${pkgdir}/opt
  install -m755 -d ${pkgdir}/usr/bin
  install -m755 -d ${pkgdir}/usr/share/menu
  install -m755 -d ${pkgdir}/usr/share/pixmaps
  install -m755 -d ${pkgdir}/usr/share/applications
  install -m755 -d ${pkgdir}/usr/share/licenses/${pkgname}
  
  cp -R ${srcdir}/${pkgname}             ${pkgdir}/opt
  ln -s /opt/ucx/bin/ucx                 ${pkgdir}/usr/bin/ucx
  ln -s /opt/ucx/share/ucx/ucx.xpm       ${pkgdir}/usr/share/pixmaps/ucx.xpm
  ln -s /opt/ucx/share/ucx/ucx.menu      ${pkgdir}/usr/share/menu/ucx.menu
  ln -s /opt/ucx/share/ucx/ucx.desktop   ${pkgdir}/usr/share/applications/ucx.desktop
  ln -s /opt/ucx/share/doc/ucx/copyright ${pkgdir}/usr/share/licenses/${pkgname}/LICENSE
}

