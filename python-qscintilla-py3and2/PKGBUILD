# $Id: PKGBUILD 46926 2009-07-22 04:56:17Z pierre $
# Maintainer: Andrea Scarpino <andrea@archlinux.org>
# Contributor: Douglas Soares de Andrade <dsa@aur.archlinux.org>
# Contributor: Michal Krenek <mikos@sg1.cz>
# Contributor: DaNiMoTh <jjdanimoth.aur@gmail.com>
# Contributor: Felix Rohrbach <fxrh@gmx.de>


pkgname=python-qscintilla-py3and2
pkgver=2.4.6
pkgrel=2
license=('GPL')
arch=('i686' 'x86_64')
url="http://www.riverbankcomputing.co.uk/software/qscintilla/intro"
makedepends=('qt')
depends=('qscintilla' 'python2-qscintilla' 'pyqt-py3and2')
pkgdesc="Python3 bindings for QScintilla2"
source=(http://riverbankcomputing.com/static/Downloads/QScintilla2/QScintilla-gpl-${pkgver}.tar.gz
        configure.py-objdir-support.diff)
md5sums=('424a89736b900e6ca5bc6d929cdafaf8'                                                                                                                                                                                                  
         '8cf9c06252e2f11ab00e62848e322fd3')



build() {
    cd $srcdir/QScintilla-gpl-$pkgver
    patch -Np1 -i "${srcdir}/configure.py-objdir-support.diff"

    cd Qt4
    qmake qscintilla.pro
    make
    
    cd ../designer-Qt4
    qmake designer.pro INCLUDEPATH+=../Qt4 QMAKE_LIBDIR+=../Qt4
    make

    cd ../Python
    python3 configure.py -n ../Qt4/ -o ../Qt4 -c -p 4
    make || return 1
}

package() {
    cd "${srcdir}/QScintilla-gpl-${pkgver}/Python"
    make DESTDIR="${pkgdir}" INSTALL_ROOT="${pkgdir}" install
    rm -r $pkgdir/usr/share || return 1
}
