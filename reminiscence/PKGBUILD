# Maintainer: Mikael Eriksson <mikael_eriksson@miffe.org>

# flashback_data_files.7z if from http://gtamp.com/PSP/reminiscencepsp.php

pkgname=reminiscence
pkgver=0.1.9
pkgrel=4
pkgdesc="A rewrite of the flashback engine"
arch=('i686' 'x86_64')
url="http://cyxdown.free.fr/reminiscence/"
license=('GPL')
depends=('sdl')
makedepends=('p7zip')
source=(http://cyxdown.free.fr/reminiscence/REminiscence-${pkgver}.tar.bz2
        http://gtamp.com/PSP/flashback_data_files.7z
        x86_64-fix.patch::http://bugs.gentoo.org/attachment.cgi?id=217345
        reminiscence.sh
        fix-keys.patch)
md5sums=('26bc8a0f2ef2ba53f61245ab6b2b2d6b'
         'f994412ad4246c587896dab7d2eb9627'
         '12a4abb15344ac4756277a02cbd849f0'
         '4ed0350e4b81e9ba305f90e157c75371'
         'fe089b2af59b57f1269dfceb523d3c08')

build() {
  cd "$srcdir/REminiscence-$pkgver"

  patch -p1 -i "$srcdir/fix-keys.patch"
  patch -p1 -i "$srcdir/x86_64-fix.patch" 

  make

  install -d "$pkgdir/usr/bin"
  install -m755 rs "$pkgdir/usr/bin/reminiscence.bin"
  install -m755 "$srcdir/reminiscence.sh" "$pkgdir/usr/bin/reminiscence"

  msg2 "Extracting flashback_data_files.7z with p7zip"
  install -m755 -d "$pkgdir/usr/share/reminiscence"
  7z x "$srcdir/flashback_data_files.7z" -o"$pkgdir/usr/share/reminiscence" -y >/dev/null
}

# vim:set ts=2 sw=2 et:
