# Maintainer: LukynZ <suchoi at centrum dot cz>

pkgname=gstreamer-vaapi
pkgver=0.2.6
pkgrel=1

pkgdesc="collection of VA-API based plugins for GStreamer and helper libraries"
url="http://www.splitted-desktop.com/~gbeauchesne/gstreamer-vaapi/"
arch=(i686 x86_64)
license=('GPLv2')
depends=('gstreamer0.10-base-plugins' 'gstreamer0.10-ffmpeg' 'ffmpeg')
optdepends=('xvba-video: for ATI cards'
	    'vdpau-video: for nVidia cards')
source=("http://huulivoide.pp.fi/Arch//$pkgname-$pkgver.tar.xz"
	ffmpeg_deprecated.patch)

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"

  patch -Np0 -i ../ffmpeg_deprecated.patch

LDFLAGS=""  ./autogen.sh --enable-vaapisink-glx --prefix=/usr
  make
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"

  make DESTDIR="${pkgdir}/" install
}
md5sums=('4e59f140afacd520ec41e64aa6fb6a6e'
         'd1105ee3ea048358b01a7bc880ff9033')
