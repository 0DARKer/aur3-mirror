# Maintainer: Jesse Jaara <gmail.com: jesse.jaara>

pkgname=gstreamer-vaapi
pkgver=0.3.7
pkgrel=2
pkgdesc="collection of VA-API based plugins for GStreamer and helper libraries"
url="http://gitorious.org/vaapi/gstreamer-vaapi"
arch=(i686 x86_64)
license=('GPL2')
depends=("gstreamer0.10-bad" 'libva')
makedepends=('gtk-doc')
optdepends=('xvba-video: for ATI cards'
	    'vdpau-video: for nVidia cards')
source=("$pkgname-$pkgver.tar.gz::http://gitorious.org/vaapi/gstreamer-vaapi/archive-tarball/$pkgver")
options=('!libtool')

build() {
  cd "${srcdir}/vaapi-gstreamer-vaapi"

  #Sadly the ffmpeg API used is so old that it need ALOT of fixing
  LIBS=-ldl ./autogen.sh --disable-ffmpeg --prefix=/usr

  make
}

package() {
  cd "${srcdir}/vaapi-gstreamer-vaapi"

  make DESTDIR="${pkgdir}/" install
}

md5sums=('21a1d0c7698b11916f0ff84ddaf6bae1')
