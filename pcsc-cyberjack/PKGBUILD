# Maintainer: Christoph Drexler <chrdr at gmx dot at>

pkgname=pcsc-cyberjack
pkgver=3.99.5_SP05
_pkgver=3.99.5final.SP05
pkgrel=2
pkgdesc="PCSC Driver for Reiner SCT cyberjack Cardreaders"
arch=('i686' 'x86_64')
url="http://support.reiner-sct.de/"
license=('LGPL')
replaces=('ctapi-cyberjack')
conflicts=('ctapi-cyberjack')
depends=('libusb' 'pcsclite')
options=('!libtool' '!docs')
#http://support.reiner-sct.de/downloads/LINUX/V3.99.5_SP05/pcsc-cyberjack-3.99.5final.SP05.tar.bz2
source=("http://support.reiner-sct.de/downloads/LINUX/V${pkgver}/${pkgname}-${_pkgver}.tar.bz2"
	"pcsclite-1.8.9.patch")
md5sums=('71c26821f2966a55b39329ea140e66a7'
         'e5590b7fae0845a6cacf149927075e25')

build() {
	cd "${srcdir}/cyberjack-SP05"

	patch -p1 < "${srcdir}/pcsclite-1.8.9.patch"

	autoreconf -i

	./configure \
		--prefix=/usr \
		--sysconfdir=/etc/${pkgname}  \
		--enable-udev \
		--with-usbdropdir=$(pkg-config libpcsclite --variable=usbdropdir)

	make
}

package() {
	cd "${srcdir}/cyberjack-SP05"
	make DESTDIR=$pkgdir install
}
