# Maintainer: Spike29 <leguen.yannick@gmail.com>
# Contributor: Jeremy Laine <jeremy.laine@bolloretelecom.eu>
# Contributor: SpepS <dreamspepser at yahoo dot it>

_pkg=wiLink
pkgname=wilink
pkgver=2.1.0
pkgrel=2
pkgdesc="A Wifirst application for Instant communications"
arch=(any)
url="http://opensource.wifirst.net/projects/wilink/"
license=('GPL3')
groups=
provides=
depends=('qt' 'libgnome-keyring' 'libmad' 'speex' 'libvorbis' 'libtheora' 'libvpx' 'libxss' 'libnotify' 'libgphoto2')
optdepends=
makedepends=('cmake')
conflicts=
replaces=
backup=
install="$pkgname.install"
source=(https://dl.dropbox.com/s/tjtdf27hfs3oopl/wiLink-2.1.0.tar.gz?dl=1)
md5sums=('2aa4b446fbc3b72de7515320f0f30226')
 
build() {
cd "$srcdir/$_pkg-$pkgver"
[ -d build] || mkdir build && cd build
cmake -DCMAKE_INSTALL_PREFIX=/usr ..
make
}

package() {
cd "$srcdir/$_pkg-$pkgver/build"
make DESTDIR="$pkgdir/" install

 # desktop file
install -Dm644 ../src/data/$_pkg.desktop \
    "$pkgdir/usr/share/applications/$pkgname.desktop"

  # icon
install -Dm644 ../src/data/$_pkg-64.png \
    "$pkgdir/usr/share/pixmaps/$_pkg.png"
}
