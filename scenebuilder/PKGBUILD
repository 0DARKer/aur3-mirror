# Maintainer: Richard Jackson <rdjack21 at gmail dot com>
pkgname='scenebuilder'
pkgver='8u40_b18'
pkgrel=1
pkgdesc='JavaFX visual layout tool that lets users quickly design JavaFX application user interfaces, without coding.'
arch=('any')
url='https://wiki.openjdk.java.net/display/OpenJFX/Main'
license=('BSD')
depends=('jdk8-openjdk' 'openjfx')
makedepends=('mercurial' 'apache-ant')
source=('scenebuilder::hg+http://hg.openjdk.java.net/openjfx/8u-dev/rt#tag=8u40-b18'
        'build.patch'
        'SceneBuilder'
       )
md5sums=('SKIP'
         '8c02c769d1917140c8048a2761c4b5de'
         '6e67c46ba8b5ee5b407ffe9438e5ef32'
        )

prepare() {
    # Apply patches
    echo "${srcdir}"
    echo "${pkgname}"
    cd "${srcdir}/${pkgname}"
    patch -p1 < "${srcdir}/build.patch"
}

build() {
  # Links the properties file
  # Build scenebuilder
  cd "$srcdir/$pkgname/apps/scenebuilder"
  echo pwd
  ant jar-sb
}

package() {
    local appdir="usr/share/java/scenebuilder"
    local builddir="${srcdir}/${pkgname}/apps/scenebuilder/SceneBuilderApp/dist"

    mkdir -p "${pkgdir}/${appdir}/lib"
    mkdir -p "${pkgdir}/usr/bin"
   
    install -m644 "${builddir}"/*.* "${pkgdir}/${appdir}"
    install -m644 "${builddir}/lib"/*.* "${pkgdir}/${appdir}/lib"
    install -m755 "${srcdir}/SceneBuilder" "${pkgdir}/usr/bin" 
    
}
