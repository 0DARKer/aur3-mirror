pkgname=iceplayer-svn
pkgver=23
pkgrel=1
pkgdesc="A simple music player"
license=('GPL')
arch=('i686' 'x86_64')
groups=(multimedia)
url="http://iceplayer.googlecode.com"
depends=('gstreamer0.10-ffmpeg' 'gstreamer0.10-ugly' 'mpfr' 'glib2' 'wget' 'libnotify')
makedepends=('subversion' 'intltool')

_svntrunk=http://iceplayer.googlecode.com/svn/trunk/
_svnmod=iceplayer

build() {
	cd $srcdir/
	if [ -d $_svnmod/.svn ]; then
		(cd $_svnmod && svn --config-dir ../ up -r $pkgver && cd ..)
	else
		svn --config-dir ./ co $_svntrunk  -r $pkgver $_svnmod
	fi

	rm -rf $_svnmod-build
	cp -r $_svnmod $_svnmod-build

	cd $_svnmod-build/$_svnmod
	chmod +x autogen.sh configure
	./autogen.sh
	./configure --prefix=/usr
	make
}

package(){
	cd $_svnmod-build/$_svnmod
	make DESTDIR="$pkgdir" install
}

# vim:syntax=sh
