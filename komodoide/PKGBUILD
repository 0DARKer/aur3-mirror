# Maintainer: Yumi Nanako <leroylim /at\ yuminanako /dot\ info>

_major="6.0.1"
_minor="57903"

pkgname=komodoide
pkgver="${_major}_${_minor}"
pkgrel=1
pkgdesc="Proprietary version of ActiveState Komodo IDE"
arch=('i686' 'x86_64')
url="http://www.activestate.com/komodo/"
license=('custom:komodoide')
depends=('python' 'glibc>=2.4' 'gcc-libs' 'gtk2')
install=komodoide.install


if [ "$CARCH" = "i686" ]; then
	_arch="x86"
	md5sums=('5a48d97babf5c93f7b666449b7fb353a')
elif [ "$CARCH" = "x86_64" ]; then
	_arch="x86_64"
	md5sums=('46c4123133b7bd6701d3fe6e61b2a588')
fi

source=("http://downloads.activestate.com/Komodo/releases/${_major}/Komodo-IDE-${_major}-${_minor}-linux-libcpp6-${_arch}.tar.gz")


build() {
  	cd ${srcdir}/Komodo-IDE-${_major}-${_minor}-linux-libcpp6-${_arch}
	./install.sh -s -I ${pkgdir}/opt/${pkgname}
	grep -v ${startdir} ${pkgdir}/opt/${pkgname}/share/desktop/komodo-ide-6.desktop > ${startdir}/${pkgname}.desktop
	echo "Exec=/opt/${pkgname}/bin/komodo %F" >> ${startdir}/${pkgname}.desktop
	echo "Icon=/opt/${pkgname}/share/icons/komodo16.png" >> ${startdir}/${pkgname}.desktop
	install -D -m 644 ${startdir}/${pkgname}.desktop ${startdir}/pkg/usr/share/applications/${pkgname}.desktop
	install -D -m 644 ${pkgdir}/opt/komodoide/share/doc/license.txt ${pkgdir}/usr/share/licenses/komodoide/license.txt
}
