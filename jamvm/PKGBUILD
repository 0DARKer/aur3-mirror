# Contributor: Sean Gillespie <Sean.D.Gillespie@gmail.com>
# Contributor: Roberto Alsina <ralsina@kde.org>
pkgname=jamvm
pkgver=1.5.1
pkgrel=3
pkgdesc="A Compact Java Virtual Machine which conforms to the JVM specification"
arch=('i686')
url="http://jamvm.sourceforge.net/"
license=("GPL")
depends=(classpath zlib)
source=("http://downloads.sourceforge.net/sourceforge/jamvm/$pkgname-$pkgver.tar.gz")
md5sums=('5a82751b50391eb092c906ce64f3b6bf')

build() {
  cd $startdir/src/$pkgname-$pkgver
  ./configure --with-classpath-install-dir=/usr --prefix=/usr
  make || return 1
  make DESTDIR=$startdir/pkg install || exit 1
  # Avoid conflict with classpath (which jamvm requires)
  install -D $startdir/pkg/usr/include/jni.h $startdir/pkg/usr/include/jamvm/jni.h
  rm $startdir/pkg/usr/include/jni.h
}
