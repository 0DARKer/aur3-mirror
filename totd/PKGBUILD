# Contributor: jiribb <jiribb@gmail.com>

pkgname=totd
pkgver=1.5.1
pkgrel=1
pkgdesc="Totd (Trick Or Treat Daemon) is DNS-proxy for IPv4/IPv6 translation (DNS-ALG)"
arch=('x86_64' 'i686')
url="http://www.vermicelli.pasta.cs.uit.no/software/totd.html"
license=('BSD')
groups=(network)
depends=('glibc')
makedepends=()
optdepends=(socat)
provides=()
conflicts=()
replaces=()
backup=(etc/totd.conf)
options=()
install=totd.install
source=(ftp://ftp.pasta.cs.uit.no/pub/$pkgname/$pkgname-$pkgver.tar.gz Makefile.patch totd.conf rc-totd)
noextract=()

md5sums=('7edaedae9f6aca5912dd6c123582cf08'
         '4f1b2b16d141e4a371cbd31cca4142f0'
         '5fc57ce93ddf1a70fd0d7156d7d8460e'
         'f8d81ef8c6356aebca376f720500ff29')

build() {
  cd "$srcdir/$pkgname-$pkgver"

  ./configure --prefix=/usr --sysconfdir=/etc
  
  patch -Np0 -i $srcdir/Makefile.patch
 
# prepare directories
  mkdir -p $pkgdir/usr/{sbin,man/man8}

# build program
  make
  make DESTDIR=$startdir/pkg install

# install default config
  install -D -m664 $srcdir/totd.conf $pkgdir/etc/totd.conf

# rc script
  install -D -m755 $srcdir/rc-totd $pkgdir/etc/rc.d/totd
}
# vim:set ts=2 sw=2 et:
