pkgname=rpimonitor
pkgdesc="A self monitoring application designed to run on Raspberry Pi"
arch=(any)
license=('GPL')
pkgver=2.9
pkgrel=1
depends=(rrdtool perl-http-daemon perl-json perl-ipc-sharelite perl-file-which)
url=(https://github.com/XavierBerger/RPi-Monitor)
source=($pkgname-$pkgver.tar.gz::https://github.com/XavierBerger/RPi-Monitor/archive/v${pkgver}.tar.gz)
sha256sums=('056682d7a9109a43dcb4c7ea7c75e7fc4bfa5eae65e71faa8c506678e68ea63b')

package() {
	mkdir -p ${pkgdir}/{usr/{bin,lib/systemd/system,share/${pkgname}},etc/{conf.d,$pkgname},var/lib/$pkgname/web}/
	cd RPi-Monitor-${pkgver}/${pkgname}
	install -Dm755 ${pkgname}d ${pkgdir}/usr/bin/
	cp *.conf ${pkgdir}/etc/$pkgname/
	cp -r template ${pkgdir}/etc/$pkgname/
	cp ../tools/systemd/* ${pkgdir}/usr/lib/systemd/system/
	cp -r web ../scripts/ ${pkgdir}/usr/share/${pkgname}/
}
