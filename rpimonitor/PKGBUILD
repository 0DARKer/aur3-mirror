pkgname=rpimonitor
pkgdesc="A self monitoring application designed to run on Raspberry Pi"
arch=(any)
license=('GPL')
pkgver=2.9.1
pkgrel=1
depends=(rrdtool perl-http-daemon perl-json perl-ipc-sharelite perl-file-which)
url=(https://github.com/XavierBerger/RPi-Monitor)
source=($pkgname-$pkgver.tar.gz::https://github.com/XavierBerger/RPi-Monitor/archive/v${pkgver}.tar.gz)
sha256sums=('27619a82bb165535491133177b9f9b1822094630bcd5814a9a4ecf96ba53ca33')

package() {
	mkdir -p ${pkgdir}/{usr/{bin,lib/systemd/system,share/${pkgname}},etc/{conf.d,$pkgname},var/lib/$pkgname/web}/
	cd RPi-Monitor-${pkgver}/${pkgname}
	install -Dm755 ${pkgname}d ${pkgdir}/usr/bin/
	cp *.conf ${pkgdir}/etc/$pkgname/
	cp -r template ${pkgdir}/etc/$pkgname/
	cp ../tools/systemd/* ${pkgdir}/usr/lib/systemd/system/
	cp -r web ../scripts/ ${pkgdir}/usr/share/${pkgname}/
}
