pkgname=rpimonitor
pkgdesc="A self monitoring application designed to run on Raspberry Pi"
arch=(any)
license=('GPL')
pkgver=2.8
pkgrel=1
depends=(rrdtool perl-http-daemon perl-json perl-ipc-sharelite perl-file-which)
url=(https://github.com/XavierBerger/RPi-Monitor)
source=($pkgname-$pkgver.tar.gz::https://github.com/XavierBerger/RPi-Monitor/archive/v${pkgver}.tar.gz)
sha256sums=('1999891426a680efe86e2cd8d988d491b7f07a2e9c286acc225e8c8426f93dca')

package() {
	mkdir -p ${pkgdir}/{usr/{bin,lib/systemd/system,share/${pkgname}},etc/{conf.d,$pkgname},var/lib/$pkgname/web}/
	cd RPi-Monitor-${pkgver}/${pkgname}
	install -Dm755 ${pkgname}d ${pkgdir}/usr/bin/
	cp *.conf ${pkgdir}/etc/$pkgname/
	cp -r template ${pkgdir}/etc/$pkgname/
	cp ../tools/systemd/* ${pkgdir}/usr/lib/systemd/system/
	cp -r web ../scripts/ ${pkgdir}/usr/share/${pkgname}/
}
