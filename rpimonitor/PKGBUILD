pkgname=rpimonitor
pkgdesc="A self monitoring application designed to run on Raspberry Pi"
arch=(any)
license=('GPL')
pkgver=2.5.1
pkgrel=1
depends=(rrdtool perl-http-daemon perl-json perl-ipc-sharelite)
url=(https://github.com/XavierBerger/RPi-Monitor)
source=(https://github.com/XavierBerger/RPi-Monitor/archive/v${pkgver}.tar.gz
	service
	conf.d)
backup=(etc/rpimonitord.conf
	etc/conf.d/rpimonitord
	etc/rpimonitord.conf.d/default.conf
	etc/rpimonitord.conf.d/custo.conf)

package() {
	mkdir -p ${pkgdir}/{usr/{bin,lib/systemd/system,share/${pkgname}},etc/{conf.d,rpimonitord.conf.d}}/
	cd RPi-Monitor-${pkgver}/${pkgname}
	install -Dm755 rpimonitord ${pkgdir}/usr/bin/
	cp rpimonitord.conf ${pkgdir}/etc/
	cp {default,custo}.conf ${pkgdir}/etc/rpimonitord.conf.d/
	cp ${srcdir}/conf.d ${pkgdir}/etc/conf.d/${pkgname}d
	cp ${srcdir}/service ${pkgdir}/usr/lib/systemd/system/${pkgname}d.service
	cp -a web ${pkgdir}/usr/share/${pkgname}/
}
sha256sums=('80d6ac14cdcdd8a33b01cf0b7de3cecdff5fdd024052de3cec080e89592c1820'
            'ac517bb26f03fd2129f57d65502e48249d56731e6fe97fbedf9a661b8653bff0'
            'ad5ce7e02a6e662bc0d582dfa8a377db2f09495133d5dcd289f5d9cbfc2fe50e')
