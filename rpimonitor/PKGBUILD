pkgname=rpimonitor
pkgdesc="A self monitoring application designed to run on Raspberry Pi"
arch=(any)
license=('GPL')
pkgver=2.6
pkgrel=1
depends=(rrdtool perl-http-daemon perl-json perl-ipc-sharelite perl-file-which)
url=(https://github.com/XavierBerger/RPi-Monitor)
source=($pkgname-$pkgver.tar.gz::https://github.com/XavierBerger/RPi-Monitor/archive/v${pkgver}.tar.gz
	service
	conf.d)
sha256sums=('64f0990bf11f8a891205dca4d97b429f0c90fadc6ffe4710e122d328362c50b2'
            'ac517bb26f03fd2129f57d65502e48249d56731e6fe97fbedf9a661b8653bff0' 
            'ad5ce7e02a6e662bc0d582dfa8a377db2f09495133d5dcd289f5d9cbfc2fe50e')
backup=(etc/rpimonitord.conf
	etc/conf.d/rpimonitord
	etc/rpimonitord.conf.d/default.conf
	etc/rpimonitord.conf.d/custo.conf)

package() {
	mkdir -p ${pkgdir}/{usr/{bin,lib/systemd/system,share/${pkgname}},etc/{conf.d,rpimonitord.conf.d}}/
	cd RPi-Monitor-${pkgver}/${pkgname}
	install -Dm755 rpimonitord ${pkgdir}/usr/bin/
	cp rpimonitord.conf ${pkgdir}/etc/
	cp {default,custo}.conf ${pkgdir}/etc/rpimonitord.conf.d/
	cp ${srcdir}/conf.d ${pkgdir}/etc/conf.d/${pkgname}d
	cp ${srcdir}/service ${pkgdir}/usr/lib/systemd/system/${pkgname}d.service
	cp -a web ${pkgdir}/usr/share/${pkgname}/
}
