# Maintainer: Mathieu Pasquet <mathieui@mathieui.net>
# Contributor: Bernhard Walle <bernhard.walle@gmx.de>
# Contributor: Michael Eckert <michael.eckert@linuxmail.org>
# Contributor: Anatol Pomozov <anatol.pomozov@gmail.com>

pkgname=crash
pkgver=6.1.6
pkgrel=2
pkgdesc="Linux kernel crashdump analysis tool"
license=('GPL')
makedepends=('flex' 'bison' 'zlib' 'ncurses')
arch=('i686' 'x86_64')
source=(http://people.redhat.com/~anderson/$pkgname-$pkgver.tar.gz)
url="http://people.redhat.com/~anderson"
md5sums=('884544e117f08c370b7ec14812547a0f')

build() {
  cd $srcdir/$pkgname-$pkgver

  make gdb_unzip
  sed -i "/ac_cpp=/s/\$CPPFLAGS/\$CPPFLAGS -O2/" gdb-7.3.1/libiberty/configure
  make
}

package() {
  cd $srcdir/$pkgname-$pkgver

  mkdir -p $pkgdir/usr/bin $pkgdir/usr/share/man/man8
  install ${pkgname} ${pkgdir}/usr/bin/
  install ${pkgname}.8 $pkgdir/usr/share/man/man8/
}
