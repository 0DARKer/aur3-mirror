# Contributor: Ryan Corder <ryanc@greengrey.org>
# Contributor: Lee Burton <lburton@mrow.org>

pkgname=pam-afs-session
pkgver=1.7
pkgrel=1
pkgdesc="A PAM module providing AFS Session Support."
url="http://www.eyrie.org/~eagle/software/pam-afs-session/"
arch=(i686)
license="custom"
depends=('heimdal>=1.0.0' 'pam')
source=("http://archives.eyrie.org/software/afs/$pkgname-$pkgver.tar.gz")
md5sums=('5d8554e88ca705d724cc8ddeb9e4ec79')

build() {
    cd $startdir/src/$pkgname-$pkgver

    ./configure --prefix=/usr --enable-reduced-depends || return 1
    make || return 1

    mkdir -m 0755 -p $startdir/pkg/lib/security || return 1
    mkdir -m 0755 -p $startdir/pkg/usr/man/man5 || return 1
    mkdir -m 0755 -p $startdir/pkg/usr/share/licenses/$pkgname || return 1

    install -m 755 pam_afs_session.so $startdir/pkg/lib/security/pam_afs_session.so || return 1
    install -m 644 pam_afs_session.5 $startdir/pkg/usr/man/man5 || return 1
    install -m 644 LICENSE $startdir/pkg/usr/share/licenses/$pkgname/License.txt || return 1
}
