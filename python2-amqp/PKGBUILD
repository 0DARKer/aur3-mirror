# Maintainer: Xeross <contact@xeross.me>

pkgname=python2-amqp
pkgver=1.0.8
pkgrel=1
pkgdesc="Low-level AMQP client for Python (fork of amqplib)"
arch=('any')
url="https://github.com/celery/py-amqp/"
license=("LGPL")
depends=('python2>=2.6' 'setuptools')
source=(https://pypi.python.org/packages/source/a/amqp/amqp-$pkgver.tar.gz)
md5sums=('6d743979d2bb564c8319b17a5df3c3b8')

build() {
  cd $srcdir/amqp-$pkgver
  
  # replace /usr/bin/env python with python2
  find . -name '*.py' -exec sed -i -e '1 s/python\s*$/python2/' {} \;
  
  python2 ./setup.py install --root=$pkgdir --prefix=/usr || return 1
}
 
