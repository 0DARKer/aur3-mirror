# Maintainer: Andrew Webley <unsuspectinghero@gmail.com>
# Contributor: Dmitriy Morozov <archlinux@foxcub.org>


pkgname="chromium-libpdf"
#The pkgver is the same as for google chrome dev. The library isn't meant to be distributed on its own, and no version information exists.
pkgver="29.0.1547.0"
pkgrel="2"
pkgdesc="A PDF Viewer for Chromium and Chromium-based browsers"
url="http://wiki.archlinux.org/index.php/Chromium#libpdf.so"
arch=("i686" "x86_64")
license=("custom:chrome")
depends=("glib2")
optdepends=("chromium: default browser to use plugin in"
			"chromium-dev: development version of default browser, requires modifying the PKGBUILD"
			"iron-bin: alternate google-chrome based browser, requires modifying the PKGBUILD")
sha512sums=("2d09d2ca3c960f38463ed742a2f038e919363fe2cb8d65d86cd4672559b44369037d94f9a09ede478fadd20b4a6dc9271e8d1af1f2cc2bc92ed90d0a4810ac67")
if [ "$CARCH" = "i686" ]; then
	_arch="i386"
    sha512sums+=("51a7601a449b5fcd920521d8adf49a0d610f8c7e24c85957872f1cc7306e33f9601bd6a8742d91e37fbb376023c06e9462ff6836b69dcfd05fa0770597293e81")
elif [ "$CARCH" = "x86_64" ]; then
	_arch="amd64"
	sha512sums+=("2d9aed93cb0f95546358ccb8e30244116f4eb82a82d1617f3fbdf36154e4dc7b579fd95b6d1e2edf8f5c59415e26735f97fb4eee8c24d6820dd2a2f4c147d1cb")
fi
source=(LICENSE
		"https://dl.google.com/linux/direct/google-chrome-unstable_current_$_arch.deb")
build() {
	cd "$srcdir"
	bsdtar xvf "google-chrome-unstable_current_$_arch.deb" data.tar.lzma
	bsdtar xvf data.tar.lzma opt/google/chrome/libpdf.so
}
package(){
	#Uncomment the relevant line below to install the library in the correct place if you're running something other than chromium.
	#chromium (Default)
	install -Dm755 opt/google/chrome/libpdf.so "$pkgdir/usr/lib/chromium/libpdf.so"
    #chromium-dev
    #install -Dm755 opt/google/chrome/libpdf.so "$pkgdir/usr/lib/chromium-dev/libpdf.so"
	#iron-browser
    #install -Dm755 opt/google/chrome/libpdf.so "$pkgdir/opt/iron/libpdf.so"
	install -Dm755 LICENSE "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
}
