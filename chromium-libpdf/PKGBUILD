# Maintainer: Andrew Webley <unsuspectinghero@gmail.com>
# Contributor: Dmitriy Morozov <archlinux@foxcub.org>

pkgname=chromium-libpdf
pkgver=24.0.1297.0
pkgrel=2
pkgdesc="PDF Viewer for Chromium"
url="http://wiki.archlinux.org/index.php/Chromium#libpdf.so"
arch=("i686", "x86_64")
license=('custom:chrome')
makedepends=('lynx')
depends=('chromium')
if [ "$CARCH" = "i686" ]; then
	_arch="i386"
	sha256sums=('9d3d746b3890a04c500c112d4392f7230b6ca3f41ae2eb69c70f5dff6f1403ae')
elif [ "$CARCH" = "x86_64" ]; then
	_arch="amd64"
	sha256sums=('5c57a964c8f828d64098c2aa8fdee9cb477f408f9597496387066f7ed3c84d11')
fi
source=(https://dl.google.com/linux/direct/google-chrome-unstable_current_$_arch.deb)
build() {
	cd "$srcdir"
	lynx https://www.google.com/chrome/intl/en/eula_text.html -dump >> LICENSE.txt
	bsdtar xvf "google-chrome-unstable_current_$_arch.deb" data.tar.lzma
	bsdtar xvf data.tar.lzma opt/google/chrome/libpdf.so

	install -Dm755 opt/google/chrome/libpdf.so "$pkgdir/usr/lib/chromium/libpdf.so"
	install -D -m644 LICENSE.txt "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE.txt"
}


