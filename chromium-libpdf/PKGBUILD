# Maintainer: Andrew Webley <unsuspectinghero@gmail.com>
# Contributor: Dmitriy Morozov <archlinux@foxcub.org>
pkgname=chromium-libpdf
pkgver=25.0.1349.2
pkgrel=1
pkgdesc="PDF Viewer for Chromium"
url="http://wiki.archlinux.org/index.php/Chromium#libpdf.so"
arch=('i686' 'x86_64')
license=('custom:chrome')
depends=('chromium')
makedepends=('lynx')
if [ "$CARCH" = "i686" ]; then
	_arch="i386"
	sha512sums=('a7f9aba5665c13cec1f1ea72dc9a5f5a5316b9a57767b4a49a2b0fc1880b2346e287cd16e02a72be8d11135210f6aa90c79a7bc830a2fdc45b3f5366670adcf3')
elif [ "$CARCH" = "x86_64" ]; then
	_arch="amd64"
	sha512sums=('40f283da9b776eb3dde217145b89c7920a2479dc56a44bc9bed7a6242b4a47ee98ff60e475fc457decfdf9423e957ce11b78e94b53eb158053e7a117091f1894')
fi
source=("https://dl.google.com/linux/direct/google-chrome-unstable_current_$_arch.deb")
build() {
	cd "$srcdir"
	lynx https://www.google.com/chrome/intl/en/eula_text.html --dump >> LICENSE
	bsdtar xvf "google-chrome-unstable_current_$_arch.deb" data.tar.lzma
	bsdtar xvf data.tar.lzma opt/google/chrome/libpdf.so
	install -Dm755 opt/google/chrome/libpdf.so "$pkgdir/usr/lib/chromium/libpdf.so"
	install -Dm644 LICENSE "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
}
