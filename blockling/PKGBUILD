# Contributor: b4283 <damispirit@gmail>

pkgname=blockling
pkgver=r219
pkgrel=1
pkgdesc="A puzzle game involving moving and stacking blocks with 8-bit graphics and sounds."
arch=('i686' 'x86_64')
license=('GPLv3')
url="http://sourceforge.net/projects/blockling/"
depends=(sdl sdl_mixer)
source=(http://downloads.sourceforge.net/project/blockling/blockling-src-r219.tar.gz
        makefile.patch)
md5sums=('6a1d5ad29dc88cba9e4ddf9e4a90318a'
         'fee392ea45fbec1e55fc198b491f7d1f')

srcdir2="${srcdir}/${pkgname}-${pkgver}"

build() {
	cd ${srcdir2}
	patch -p0 < ../makefile.patch
	make || return 1

	mkdir -p ${pkgdir}/usr/share/blockling/ ${pkgdir}/usr/bin/
	install ${srcdir2}/blockling ${pkgdir}/usr/share/blockling
	cp -r ${srcdir2}/data ${pkgdir}/usr/share/blockling/
	
	echo -e '#!/bin/bash\n\ncd ${HOME}\n/usr/share/blockling/blockling $*\nexit $?' > ${pkgdir}/usr/bin/blockling
	chmod 755 ${pkgdir}/usr/bin/blockling
}
md5sums=('6a1d5ad29dc88cba9e4ddf9e4a90318a'
         '2ee474c1bb00b69a9a020fed5b720f80')
