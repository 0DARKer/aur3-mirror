# Maintainer: Anthony Cornehl <accornehl[at]gmail[dot]com>
# https://github.com/twinshadow/abs-ofed
pkgname=mstflint
pkgver=1.4
_subver=1.22
_commit=g86d7b84
pkgrel=4
pkgdesc="Mellanox firmware burning application"
groups=('ofed')
url="http://www.openfabrics.org"
arch=('x86_64' 'i686')
license=('GPL2' 'custom:"Open Fabrics Alliance BSD"')
depends=('bash' 'gcc-libs' 'zlib')
source=("http://www.openfabrics.org/downloads/${pkgname}/${pkgname}-${pkgver}-${_subver}.${_commit}.tar.gz")
# cksum start
md5sums=('84650f4116cbc6389e6b90516e4af91f')
sha512sums=('6828d99f377907b73c1b13e5b0fd4a847dc112ea30803f822dce3e36a16b9e4cad374400fef78ea47b84759a628ead51340eb4d6dc63196fa03bfa2e33fae899')
# cksum end

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  ./configure --prefix=/usr \
              --mandir=/usr/share/man \
              --sysconfdir=/etc \
              --localstatedir=/var
  make
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  make -j1 DESTDIR="${pkgdir}" install
  install -Dm644 LICENSE "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
}
