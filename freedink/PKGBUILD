# Maintainer: Daniel J Griffiths <ghost1227@archlinux.us>
# Contributor: Christoph Zeiler <archNOSPAM_at_moonblade.dot.org>

pkgname=freedink
pkgver=1.08.20101114
pkgrel=1
pkgdesc='A free and enhanced version of the action-adventure "Dink Smallwood"'
arch=('i686' 'x86_64')
url="http://www.freedink.org/"
license=('GPL' 'custom')
depends=('sdl_mixer' 'sdl_gfx' 'sdl_ttf>=2.0.9' 'sdl_image' 'fontconfig' \
	 'libzip' 'zziplib' 'libffi')
makedepends=('help2man' 'pkgconfig>=0.9' 'zip')
provides=('freedink-engine' 'freedink-data')
conflicts=('freedink-engine' 'freedink-data')
install=$pkgname.install
source=(http://ftp.gnu.org/gnu/$pkgname/$pkgname-$pkgver.tar.gz \
	http://ftp.gnu.org/gnu/$pkgname/$pkgname-data-1.08.20100103.tar.gz)
md5sums=('ea045c1dcffa0db076201da7021dec1e'
         '4ab81f83e085f8cee7ebb9893f344495')

build() {
  cd ${pkgname}-${pkgver}

  sed 's|/dink|/freedink/dmod|g' -i src/paths.c

  ./configure --prefix=/usr
  make || return 1
  make DESTDIR=${pkgdir} install

  cd ../${pkgname}-data-1.08.20100103

  mkdir -p ${pkgdir}/usr/share/freedink/dmod
  cp -rf dink/ ${pkgdir}/usr/share/freedink/dmod/

  install -m644 -D README-REPLACEMENTS.txt \
	${pkgdir}/usr/share/licenses/${pkgname}/LICENSE
}

# vim:set ts=2 sw=2 et:
