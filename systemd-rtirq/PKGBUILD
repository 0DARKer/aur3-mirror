# Maintainer: Bernardo Barros <bbarros@xsounds.org>
pkgname=systemd-rtirq
_pkgname=rtirq
pkgver=20120505
pkgrel=1
pkgdesc="startup scripts for tunning the realtime scheduling policy and priority of relevant IRQ service threads."
arch=('any')
url="http://www.rncbc.org/jack/"
license=('GPL')
depends=('util-linux' 'bash')
backup=('etc/systemd/rtirq.conf')
install=${pkgname}.install
source=( http://www.rncbc.org/jack/${_pkgname}-${pkgver}.tar.gz 
         rtirq.service )
md5sums=('1228311c17fe91921689a2bf10b21ce5'
         '3580fcbf644027d67df99a741035f299')

build() {
    cd ${srcdir}/${_pkgname}-${pkgver}
    
    sed -e "s|etc/sysconfig/rtirq|etc/systemd/rtirq.conf|" -i rtirq.sh
    sed -e "s|IRQ\.|irq/|" -i rtirq.sh 

    install -vDm755 "${srcdir}/${_pkgname}-${pkgver}/rtirq.sh" "${pkgdir}/usr/lib/systemd/scripts/rtirq"
    install -vDm644 "${srcdir}/rtirq.service" "${pkgdir}/usr/lib/systemd/system/rtirq.service"
    install -vDm644 "${srcdir}/${_pkgname}-${pkgver}/rtirq.conf" "${pkgdir}/etc/systemd/rtirq.conf"
}
