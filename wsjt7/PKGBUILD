# Maintainer: Mike WB2FKO <mph at sportscliche dot com>
pkgname=wsjt7
pkgver=7.06r1938
pkgrel=1
pkgdesc="Weak Signal Communication by K1JT"
arch=('any')
url="http://physics.princeton.edu/pulsar/K1JT/wsjt.html"
license=('GPL')
depends=('python2' 'python-imaging' 'python2-numpy' 'libsamplerate' 'portaudio' 'fftw')
makedepends=('deb2targz')
source=(http://physics.princeton.edu/pulsar/K1JT/wsjt_${pkgver}_i386.deb
               startwsjt
               wsjt.png
               $pkgname.desktop)
md5sums=('b8cde4ca0b1aa613b4e8bf24c9fa1ddf'
         '0965651e982b5516ee38ae1e0cf419fb'
         'dd21318d4aa3423f1fbefc53061cc40d'
         '5afe7c5393673bc92f73172811034fe1')

build() {
#Make a tarball from the debian source file
   deb2targz ${srcdir}/wsjt_${pkgver}_i386.deb
# Expand the tarball
    tar xvzf ${srcdir}/wsjt_${pkgver}_i386.tar.gz
# The program will not run if the files are separated so place the entire package in /opt
    rm -rf $pkgdir/opt/$pkgname
    mkdir -p $pkgdir/opt/$pkgname
    mv WSJT "$pkgdir/opt/$pkgname"

    find "$pkgdir/opt/$pkgname/" -type f  | xargs chmod 644
    find "$pkgdir/opt/$pkgname/" -type d | xargs chmod 755

# Install a menu item with icon
  cd $srcdir
  mkdir -p $pkgdir/usr/share/pixmaps
  mkdir -p $pkgdir/usr/share/applications
  install -Dm644 $pkgname.desktop $pkgdir/usr/share/applications/$pkgname.desktop
  install -Dm644 wsjt.png $pkgdir/usr/share/pixmaps/wsjt.png

# Install a simple launcher script
    install -Dm755 startwsjt $pkgdir/opt/$pkgname/WSJT/startwsjt

  echo -e "\n WSJT7 will be installed in the /opt directory of root \n"
}

# vim:set ts=2 sw=2 et:
