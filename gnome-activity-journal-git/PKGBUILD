# Contributor: Marius Dransfeld <marius.dransfeld@googlemail.com>

pkgname=gnome-activity-journal-git
_realname=gnome-activity-journal
pkgver=20091009
pkgrel=1
pkgdesc="Zeitgeist GUI"
arch=('any')
url="https://launchpad.net/gnome-zeitgeist"
license=('GPL')
install=$pkgname.install
depends=('python' 'pygtk' 'gnome-zeitgeist' 'gnome-python' 'gnome-python-desktop')
makedepends=('git')
provides=($_realname)
conflicts=($_realname)
source=('zeitgeist-journal' 'gnome-activity-journal.desktop')


_gitroot="git://gitorious.org/gnome-activity-journal/gnome-activity-journal.git"
_gitname="gnome-activity-journal"

build() {
  cd "$srcdir"
  msg "Connecting to GIT server...."

  if [ -d $_gitname ] ; then
    cd $_gitname && git pull origin
    msg "The local files are updated."
  else
    git clone $_gitroot
  fi
 
  msg "GIT checkout done or server timeout"
  msg "Starting make..."
  cd $_gitname
  mkdir -p $pkgdir/opt/$_realname
  cp -r * $pkgdir/opt/$_realname/
  cd $srcdir
  mkdir -p $pkgdir/usr/share/applications
  install -m 755 gnome-activity-journal.desktop $pkgdir/usr/share/applications/gnome-activity-journal.desktop

  mkdir -p $pkgdir/usr/bin
  install -m 755 zeitgeist-journal $pkgdir/usr/bin/zeitgeist-journal    
} 

md5sums=('eff5a2b96ae9d712a9ec6099a90d34ea'
         '4b6f8c86392cb69af30a6920c28fb3ac')
