# Maintainer:  Lukas K. <lukas@carrotIndustries.net>

pkgname=mspdebug
pkgver=0.17
pkgrel=2
pkgdesc="A free debugger and firmware downloader for the MSP430/CC430 MCU family"
arch=('i686' 'x86_64')
url="http://mspdebug.sourceforge.net/"
license=('GPL')
depends=('libusb' 'readline' 'glibc' 'ncurses')
conflicts=('mspdebug-git')
source=(http://downloads.sourceforge.net/project/$pkgname/$pkgname-$pkgver.tar.gz
Makefile.patch
82-eZ430.rules)
install=mspdebug.install
md5sums=('6c112939d37bb1149f61c58c7a886bd6'
         '6643e9ead40df87674255da738ecd8b2'
         'e5e42c2357084d6baa3249fa4a2608ea')

build() {
  cd $startdir/src/${pkgname}-${pkgver}
  make clean
  patch Makefile < $startdir/Makefile.patch
  make
  make PREFIX=$startdir/pkg/usr install
  install -D -m 0644 ../../82-eZ430.rules $startdir/pkg/etc/udev/rules.d/82-eZ430.rules
}
