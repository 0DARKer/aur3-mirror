# Contributor: Markus HÃ¤rer <markus.haerer@gmx.net>

pkgname=mysql++
pkgver=3.1.0
pkgrel=2
pkgdesc="A C++ wraper for MySQLs C API"
arch=("i686" "x86_64")
url="http://tangentsoft.net/mysql++/"
license=("LGPL" "custom")
depends=("libmysqlclient")
optdepends=("mysql")
source=("http://tangentsoft.net/mysql++/releases/$pkgname-$pkgver.tar.gz"
	"mysql++-fix-cstring.patch"  
	"mysql++-fix-size_t.patch")
md5sums=('d92769cc579b87a60e58a77099cc4f0e'
         '72f85a1bdba9d5285f0baf1d973033f8'
         '6dcfbf06072b81cf27530ca9a0df8a8e')

build() {
	unset LDFLAGS
	
	cd "$srcdir/"
	patch -p0 < mysql++-fix-cstring.patch || return 1
	patch -p0 < mysql++-fix-size_t.patch || return 1

	cd "$pkgname-$pkgver/"
	
	./configure --prefix=/usr || return 1
    	make || return 1
	make DESTDIR="$pkgdir" install || return 1

	#install docs
	mkdir -p $pkgdir/usr/share/doc/mysql++
	cp -r doc/html $pkgdir/usr/share/doc/mysql++
	cp -r doc/pdf $pkgdir/usr/share/doc/mysql++

	#install doc licence
	mkdir -p $pkgdir/usr/share/licenses/mysql++
	install doc/userman/LICENSE.txt $pkgdir/usr/share/licenses/mysql++

}
