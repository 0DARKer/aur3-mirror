# Maintainer: Ian Denhardt <ian@zenhack.net>
pkgname=pacsync-hg
pkgver=3
pkgrel=1
pkgdesc="A pacman frontend which manages packages based on a holistic view of the system"
arch=('any')
url="http://www.zenhack.net/projects/pacsync"
license=('custom')
makedepends=('mercurial')
_hgroot=http://www.zenhack.net/pub/hgwebdir.cgi
_hgrepo=pacsync

build() {
  cd "$srcdir"
  if [ -d $_hgrepo ]; then
    cd $_hgrepo
    hg pull -u
  else
    hg clone $_hgroot/$_hgrepo
  fi
}

package() {
  cd "$srcdir/$_hgrepo"

  install -Dm755 pacsync $pkgdir/usr/sbin/pacsync || return 1
  install -Dm644 pacsync.8 $pkgdir/usr/share/man/man8/pacsync.8 || return 1
  install -Dm644 COPYING $pkgdir/usr/share/licenses/$pkgname/COPYING || return 1
  install -dm755 $pkgdir/var/cache/pacsync
  install -dm755 $pkgdir/etc/pacsync
}

# vim:set ts=2 sw=2 et:
