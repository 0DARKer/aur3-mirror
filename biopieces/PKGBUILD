# Maintainer: Sebastian Wilzbach < sebi at wilzbach dot me >
pkgname=biopieces
pkgver=r2299
pkgrel=1
epoch=
pkgdesc="Bioinformatic framework of tools easily used and easily created"
arch=("any")
url="http://biopieces.googlecode.com/"
license=('GPL2')
groups=()
depends=('perl' 'ruby' "perl-svg" "perl-bit-vector" "perl-term-readkey" "perl-dbi" "perl-xml-parser" "perl-carp-clan" 
	"perl-class-inspector" "perl-html-parser" "perl-soap-lite" "perl-uri" "perl-inline" "perl-parse-recdescent" "perl-dbd-mysql" "perl-svg" )
makedepends=("svn")
checkdepends=()
optdepends=("ruby-gnuplot" "rubyinline" )
provides=()
conflicts=()
replaces=()
backup=()
options=()
install=
changelog=
source=("biopieces::svn+http://biopieces.googlecode.com/svn/trunk"
"biopieces/bp_usage::svn+http://biopieces.googlecode.com/svn/wiki"        
"biopieces.sh")
noextract=()
md5sums=('SKIP'
'SKIP'
'8ebebd698533ae818c8cfbef4fa8e9ca')

pkgver() {
	cd "$srcdir/biopieces"
	local ver="$(svnversion)"
	printf "r%s" "${ver//[[:alpha:]]}"
}

package() {
	cd "$pkgdir"
	mkdir -p "opt/$pkgname"
	cp -a "$srcdir/biopieces" "$pkgdir/opt/"
	# install exports
	install -Dm755 "$srcdir/$pkgname.sh" etc/profile.d/$pkgname.sh
	# source the constant for the test suite
	source  etc/profile.d/$pkgname.sh

	# calling test
	/bin/bash "opt/$pkgname/bp_test/test_all"
}
