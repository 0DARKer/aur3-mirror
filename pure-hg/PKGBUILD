# Contributor: Alastair Pharo  asppsa at gmail dot com

pkgname=pure-hg
pkgver=20111220
pkgrel=1
pkgdesc="Pure is a modern-style functional programming language based on term rewriting."
arch=("i686" "x86_64")
license=('GPL3')
url="http://code.google.com/p/pure-lang"
depends=('llvm' 'gsl' 'gmp' 'libffi' 'mpfr' 'readline')
makedepends=('autoconf' 'bison' 'flex' 'gcc' 'make' 'mercurial' 'wget')
optdepends=('w3m: help in interactive mode')
provides=('pure')
conflicts=('pure')
source=()
md5sums=()

_hgtrunk=https://code.google.com/p/pure-lang

build() {
	cd ${srcdir}

	if [ -d pure-lang ]; then
		(cd pure-lang && hg pull -u; cd $srcdir)
	else
		hg clone $_hgtrunk pure-lang
	fi

	rm -rf $srcdir/pure-build
	cp -r $srcdir/pure-lang/pure $srcdir/pure-build
	cd pure-build
	autoreconf
	./configure --enable-release --prefix=/usr
	make || return 1
	make DESTDIR=$startdir/pkg install || return 1
	make DESTDIR=$startdir/pkg install-docs || return 1
}
