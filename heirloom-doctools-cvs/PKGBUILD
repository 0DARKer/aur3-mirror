# Contributed by; Jens Staal <staal1978@gmail.com>
pkgname=heirloom-doctools-cvs
pkgver=111210
pkgrel=2
arch=('i686' 'x86_64')
pkgdesc="The Heirloom Documentation Tools consist of a modern roff suite."
url="http://heirloom.sourceforge.net/doctools.html"
license=('custom:"caldera"' 'custom:"opensolaris"' 'custom:"lucent"')
depends=('heirloom-devtools-cvs' 'heirloom-sh-cvs' 'heirloom-cvs')
source=('000-config.diff')
md5sums=('b562fe79670fa92732aa2cd94a662045')

_hmake() {
	env PATH="/usr/heirloom/bin:$PATH" MAKEFLAGS="" make "$@"
}

build() {

  cvs -d:pserver:anonymous:@heirloom.cvs.sourceforge.net:/cvsroot/heirloom login
	
  cvs -d:pserver:anonymous:@heirloom.cvs.sourceforge.net:/cvsroot/heirloom co -P heirloom-doctools

  cd $startdir/src/heirloom-doctools
  
  patch -p1 < ../000-config.diff

	_hmake
}

package() {
        _hmake install ROOT=$startdir/pkg/

	install -D -m0644 ${startdir}/src/heirloom-doctools/LICENSE/CALDERA.LICENSE ${startdir}/pkg/usr/share/licenses/${pkgname}/CALDERA.LICENSE
	install -D -m0644 ${startdir}/src/heirloom-doctools/LICENSE/OPENSOLARIS.LICENSE ${startdir}/pkg/usr/share/licenses/${pkgname}/OPENSOLARIS.LICENSE
	install -D -m0644 ${startdir}/src/heirloom-doctools/LICENSE/LUCENT.LICENSE ${startdir}/pkg/usr/share/licenses/${pkgname}/LUCENT.LICENSE
}

