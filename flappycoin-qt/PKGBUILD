#Maintainer truh <truhgoj@truh.in>

pkgname=flappycoin-qt
_binname=flappycoin
pkgver=2.1.0.1
pkgrel=3
_commit=0520d9a44e41b1612dac255d82448cddfc2cd7bb
pkgdesc="Cryptocurrency"
arch=('x86_64' 'i686')
url="http://flappycoin.info/"
license=('MIT')
provides=('flappycoin-qt')
depends=('qt4' 'miniupnpc' 'boost-libs')
makedepends=('boost' 'gcc' 'make' 'git' 'patch')
source=('https://github.com/flappycoin-project/flappycoin/archive/0520d9a44e41b1612dac255d82448cddfc2cd7bb.tar.gz'
        'flappycoin.desktop'
        'flappy.patch')
install=flappycoin.install

md5sums=('9e77c39f5de5e6188781bffd39e291e0'
         'b7dab285e8e6c8d7842b182757131dd8'
         '226844743d956b6476d295688a6974eb')

## files & commands for building
_qmake=qmake-qt4

prepare() {
	cd ${srcdir}/flappycoin-${_commit}/

	git apply < ${startdir}/flappy.patch
}

build() {
	cd ${srcdir}/flappycoin-${_commit}/
	
	${_qmake} ${_binname}-qt.pro
		
	make ${MAKEFLAGS} || make ${MAKEFLAGS}
}

package() {
	install -Dm644 ${_binname}.desktop ${pkgdir}/usr/share/applications/${_binname}.desktop

	cd $srcdir/flappycoin-${_commit}
	install -Dm755 ${_binname}-qt "${pkgdir}/usr/bin/${_binname}-qt"
	install -Dm644 COPYING "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
	install -Dm644 src/qt/res/icons/bitcoin.png "${pkgdir}/usr/share/pixmaps/${_binname}.png"
}
