# Contributor: twa022 <twa022 at gmail dot com>

pkgname=dockbarx
pkgver=0.42.1
_pkgsubver=""
pkgrel=1
pkgdesc="GNOME TaskBar with groupping and group manipulation. Experimental version of GNOME Dockbar."
arch=('i686' 'x86_64')
url="https://launchpad.net/dockbar/dockbarx"
license=('GPL3')
depends=('python-gnomeapplet' 'python-wnck' 'gnome-panel-bonobo'
         'python2' 'pyxdg' 'dbus-python' 'python2-numpy' 
         'python2-bonobo' 'python2-gnomecanvas' 'python2-gconf'
         'python-imaging' 'python-keybinder' 'hicolor-icon-theme')
optdepends=('avant-window-navigator: to use the AWN Dockbar Plugin'
            'zeitgeist: to have recently used file list'
            'compiz-fusion-plugins-main: opacify plugin'
            'compiz-plugins-main-09: opacify plugin from rewritten compiz')
source=(http://launchpad.net/dockbar/${pkgname}/x.${pkgver}${_pkgsubver}/+download/${pkgname}_${pkgver}${_pkgsubver}.tar.gz)

build () {
  cd ${srcdir}/${pkgname}_${pkgver}${_pkgsubver}
  python2 setup.py install --root ${pkgdir}

  mkdir -p ${pkgdir}/usr/share/avant-window-navigator/applets
  cp -r AWN/* ${pkgdir}/usr/share/avant-window-navigator/applets
  
  mkdir -p ${pkgdir}/usr/share/pixmaps
  install -Dm644 ${srcdir}/${pkgname}_${pkgver}${_pkgsubver}/icons/hicolor/128x128/apps/dockbarx.png ${pkgdir}/usr/share/pixmaps/dockbarx.png

  sed -i 's:^Categories=.*:Categories=Settings;DesktopSettings;GTK;:' ${pkgdir}/usr/share/applications/dbx_preference.desktop
  sed -i 's:/usr/bin/python:&2:' ${pkgdir}/usr/bin/dockbarx_factory.py
  sed -i 's:/usr/bin/python:&2:' ${pkgdir}/usr/bin/dbx_preference.py

}

md5sums=('6a66ee95256b046186798c5d8afa32c4')
