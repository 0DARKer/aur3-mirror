# Maintainer: Gen2ly <toddrpartridge@gmail.com>
# Contributor: Aaron Griffin <aaron@archlinux.org>
# Contributor: dorphell <dorphell@archlinux.org>

pkgname=parted-git
pkgver=20091021
pkgrel=1
pkgdesc="A program for creating, destroying, resizing, checking and copying partitions"
arch=('i686' 'x86_64')
license=('GPL3')
url="http://www.gnu.org/software/parted/parted.html"
depends=('device-mapper' 'e2fsprogs' 'ncurses>=5.6-7' 'readline>=6.0.00')
makedepends=('cvs' 'git' 'gperf' 'rsync')
conflicts=('parted')
provides=('parted')
options=(!libtool)
source=()
md5sums=()

_gitroot="git://git.debian.org/git/parted/parted.git"
_gitname="parted"


build() {
  cd ${srcdir}
  msg "Connecting to git.debian.org GIT server...."

  if [ -d ${srcdir}/$_gitname ] ; then
    cd $_gitname && git pull origin
    msg "The local files are updated."
    else
    git clone $_gitroot
  fi

  cd ${srcdir}/$_gitname
  ./bootstrap
  ./configure --prefix=/usr --disable-debug --disable-Werror
  make || return 1
  make DESTDIR="$pkgdir/" install || return 1
  rm $pkgdir/usr/share/info/dir
}