# Maintainer: Superstar655 <choman000 at hotmail dot com>
# Contributor: Augusto Born de Oliveira <augustoborn at gmail>

pkgname=sickbeard-git
pkgver=20101212
pkgrel=1
pkgdesc="A PVR application that downloads and manages your TV shows"
arch=('i686' 'x86_64')
url="http://code.google.com/p/sickbeard/"
license=('GPL3')
depends=('python2' 'python-cheetah')
makedepends=('git')
install='sickbeard.install'
source=('sickbeard' 'sickbeard.init')
md5sums=('a4046eaafb9ed5532affe079aae7c446'
         'cc4b3aa9a27fecab41b68d0855e12e26')

_gitroot="git://github.com/midgetspy/Sick-Beard.git"
_gitname="sickbeardpvr"

build() {
  cd "$srcdir"
  msg "Connecting to GIT server...."

  if [ -d $_gitname ]; then
     cd $_gitname && git pull origin
     msg "The local files are updated."
  else
     git clone $_gitroot $_gitname
  fi

  msg "GIT checkout done or server timeout"
  msg "Starting install..."

  mkdir -p "${pkgdir}/opt/"
  cp -r "$srcdir/$_gitname" "${pkgdir}/opt/sickbeard"

  install -D -m755 "${srcdir}/sickbeard" "${pkgdir}/usr/bin/sickbeard"
  install -D -m755 "${srcdir}/sickbeard.init" "${pkgdir}/etc/rc.d/sickbeard"
}
