#Maintainer: Alexey Stukalov <astukalov@gmail.com>
#forked from smartsvn AUR package, maintainer Rene Peinthor
pkgname=smartgit-ea
pkgver=4_preview_1
pkgrel=1
pkgdesc="A Git GUI client written in Java. Early Access Series"
arch=("any")
url="http://www.syntevo.com/smartgit/index.html"
license=('custom')
depends=("java-runtime" "desktop-file-utils" "sh" "git" "gtk2")
optdepends=("mercurial: hg repositiories support")
provides=(smartgit=$pkgver)
conflicts=(smartgit)
# package version as it appears in the name of tar.gz archive file
_pkgver=${pkgver//_/-}
_pkgname=${pkgname//-ea/}
# folder within tar.gz archive
_pkgfolder="$_pkgname-4-preview"
source=(http://www.syntevo.com/download/${_pkgname}/${_pkgname}-generic-${_pkgver}.tar.gz
        smartgit.desktop)
install="smartgit.install"
md5sums=('b213fe5e1f77342ea093f900bd6f7b8e'
	 '1d4bb1a70a3c6a6d04fe938beb28808b')

package() {
	cd "$srcdir"

	#install -D -m644 "${_pkgfolder}"/licenses/* "${pkgdir}/usr/share/licenses/${_pkgname}"
	mkdir -p "${pkgdir}"/opt
	mv "${_pkgfolder}" ${pkgdir}/opt/${_pkgname} || return 1

	install -D -m644 smartgit.desktop "${pkgdir}"/usr/share/applications/smartgit.desktop
}
