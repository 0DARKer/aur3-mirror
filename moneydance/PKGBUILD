# Maintainer: Sander Zuidema <archlinux at grunny dot demon dot nl>
# Contributor: Lukas Grossar <lukas dot grossar at gmail dot com>

pkgname=moneydance
pkgver=2014.3
pkgrel=1
epoch=
pkgdesc="A personal finance manager for Mac, Windows and Linux"
arch=('i686' 'x86_64')
url="http://www.moneydance.com/"
license=('custom')
groups=()
depends=('java-runtime' 'bash')
makedepends=()
checkdepends=()
optdepends=()
provides=()
conflicts=()
replaces=()
backup=()
options=()
install=
changelog=
if [[ "$CARCH" == 'i686' ]]; then
    source=('http://infinitekind-md947.s3.amazonaws.com/Moneydance_linux_x86.tar.gz'
            'moneydance.sh'
            'moneydance.patch')
    noextract=()
md5sums=('8906a28e8797949e5e66cc3a12acd9c9'
         '76bda51a11f2322585958ff93b52ea03'
         'a2c3a2f8a672ca93d52cd8d207aef3a5')
fi

if [[ "$CARCH" == 'x86_64' ]]; then
    source=('http://infinitekind-md947.s3.amazonaws.com/Moneydance_linux_amd64.tar.gz'
	    'moneydance.sh'
            'moneydance.patch')
    noextract=()
md5sums=('70173f56ea87f7bd08e4ba805a6790ed'
         '76bda51a11f2322585958ff93b52ea03'
         'a2c3a2f8a672ca93d52cd8d207aef3a5')
fi

package() {
  # generate directories in $pkgdir
  install -m755 -d "$pkgdir/usr/bin" \
    "$pkgdir/usr/share/java/$pkgname" \
    "$pkgdir/usr/share/licenses/$pkgname" \
    "$pkgdir/usr/share/applications" \
    "$pkgdir/usr/share/pixmaps"

  # copy files
  cd "$srcdir"
  install -m755 "$pkgname.sh" "$pkgdir/usr/bin/$pkgname" || return 1
  cd "$srcdir/${pkgname^}"
  patch -uN "resources/moneydance.desktop" "../../moneydance.patch"
  install -m644 "resources/moneydance.desktop" "$pkgdir/usr/share/applications/$pkgname.desktop" || return 1
  install -m644 "resources/license.txt" "$pkgdir/usr/share/licenses/$pkgname/LICENSE" || return 1
  install -m644 "resources/moneydance_icon32.png" "$pkgdir/usr/share/pixmaps/$pkgname.png" || return 1
  install -m644 jars/*.jar "$pkgdir/usr/share/java/$pkgname" || return 1
}

# vim:set ts=2 sw=2 et:
