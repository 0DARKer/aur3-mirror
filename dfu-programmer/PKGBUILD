# Contributor: Eduardo Martins Lopes < edumlopes at gmail dot com >
# Contributor: Poco <poco@atelo.org> (Patched 0.5.4 with atmega16u2 support)
# Maintainer: Eric Anderson <ejona86@gmail.com>

pkgname=dfu-programmer
pkgver=0.5.5
pkgrel=1
pkgdesc='Programmer for Atmel chips with a USB bootloader'
arch=('i686' 'x86_64')
url='http://dfu-programmer.sourceforge.net/'
license=('GPL')
depends=('libusbx')
source=(
  "http://downloads.sourceforge.net/sourceforge/$pkgname/$pkgname-$pkgver.tar.gz")
sha256sums=(
  '9bc3c5993e59ce908d4e3dbfda01e273ca34f86900fcb925915bbe65ff7ad246')

build() {
  cd "$srcdir/$pkgname-$pkgver"

  # Must specify LIBUSB* variables due to bug 3599159.
  ./configure --prefix=/usr LIBUSB_1_0_CFLAGS=-I/usr/include/libusb-1.0 LIBUSB_1_0_LIBS=-lusb-1.0
  make
}

package() {
  cd "$srcdir/$pkgname-$pkgver"
  make DESTDIR="$pkgdir" install
}
