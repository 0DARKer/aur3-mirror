# Maintainer: Daniel Kirchner <daniel at ekpyron dot org>

pkgname=mingw-w64-fltk
_basename=fltk
pkgver=1.3.0
pkgrel=1
pkgdesc="Graphical user interface toolkit (mingw-w64)"
arch=('any')
license=('custom:LGPL')
url="http://www.fltk.org/"
makedepends=('mingw-w64-gcc')
source=(http://ftp.easysw.com/pub/$_basename/$pkgver/$_basename-$pkgver-source.tar.gz)
options=(!strip !buildflags)
md5sums=('44d5d7ba06afdd36ea17da6b4b703ca3')

_targetarch32=i686-w64-mingw32
_targetarch64=x86_64-w64-mingw32

build() {
  cd "$srcdir/$_basename-$pkgver"
  
  sed -i -e "s/DIRS = \$(IMAGEDIRS) src \$(CAIRODIR) fluid test documentation/DIRS = \$(IMAGEDIRS) src \$(CAIRODIR) fluid documentation/" Makefile

  ./configure --prefix=/usr/$_targetarch32 --host=$_targetarch32
  make
  make DESTDIR="$pkgdir" install
  
  make distclean
  
  ./configure --prefix=/usr/$_targetarch64 --host=$_targetarch64
  make
  make DESTDIR="$pkgdir" install
}
