# Maintainer: Wade <archwade.20.apex3@xoxy.net>
pkgname=newsd
pkgver=1.44
pkgrel=1
pkgdesc="Standalone local NNTP server for local forum serving on a single server"
arch=('i686' 'x86_64')
url="http://newsd.easysw.com/index.php"
license=('GPL')
depends=(bash gcc-libs systemd-sysvcompat)
install=newsd.install
source=(
  http://ftp.easysw.com/pub/newsd/$pkgver/$pkgname-$pkgver-source.tar.bz2
  patch.txt
  newsd.install
)
sha512sums=('57cc97b4f4e500fd05202803245a0486aa9d3cf969b582ae5e179c20979fd9614ba218d5688d060fde58940519703a806aa63d3c67f59bb4822bbb5c3dd1b5e5'
            '48b99ee0e178d6b99c7e229cb4cdf21b5673b18fba7df2e941c6bc158fa0f879b2f6f6cfc5963c2423a8cacf591d5c6442dc4032942d9e7f7a90f05a4c7a5d11'
            '9359ca86db03349b687b731041eebca0796fe1ed7ec2946730ec357dc7f5e441d8569655291ecbc0f94165edb691107c9f7725097e082b7b90920de177411eda')

build() {
  cd "$srcdir/$pkgname-$pkgver"
  patch -Np2 -i ${srcdir}/patch.txt
  ./configure --prefix=/usr
  make
}

package() {
  cd "$srcdir/$pkgname-$pkgver"
  make DESTDIR="$pkgdir/" install
  cd $pkgdir/etc/rc.d
  mv init.d/newsd .
  rm -fr init.d/
  rm -fr rc?.d/
}

# vim:set ts=2 sw=2 et:
