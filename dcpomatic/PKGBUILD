# Maintainer: Stefan Karner <stefan.karner@student.tuwien.ac.at>

pkgname=dcpomatic
pkgver=1.69.0 
pkgrel=1
pkgdesc="A free, open-source program to generate Digital Cinema Packages (DCPs) from videos or images"
arch=('i686' 'x86_64')
url="http://dcpomatic.com/"
license=('GPL2')
groups=
depends=('libcxml>=0.08' 'libdcp>=0.92' 'ffmpeg' 'glib2' 'imagemagick' 'openjpeg>=1.5.0' 'openjpeg<=1.5.2' 'libssh' 'wxgtk>=3.0' 'libquickmail>=0.1.16' 'libzip' 'xz' 'libsndfile')
makedepends=('python2' 'boost>=1.45' )
optdepends=()
provides=()
conflicts=()
replaces=()
backup=()
options=
install=
#source=("${pkgname}.tar.gz::http://dcpomatic.com/downloads/${pkgver}/${pkgname}-${pkgver}.tar.bz2")
source=("${pkgname}.tar.bz2::http://dcpomatic.com/downloads/${pkgver}/${pkgname}-${pkgver}.tar.bz2" preferences.h)

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"

  ln -s -f ../../../../preferences.h src/wx/preferences.h

  python2 waf configure --prefix=/usr
  python2 waf build
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"

  python2 waf install --destdir=$pkgdir
}
md5sums=('3c0052a6120680fdf6183420282ba2a7'
         '9d2c9b6c77d315db911d92eb85b54b3a')
