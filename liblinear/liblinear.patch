diff -Naur liblinear-1.7/linear.cpp liblinear-1.7-new/linear.cpp
--- linear.cpp	2010-09-10 16:12:27.000000000 +0800
+++ linear.cpp	2010-11-01 22:37:13.856666732 +0800
@@ -2036,8 +2036,6 @@
 
 int predict_probability(const struct model *model_, const struct feature_node *x, double* prob_estimates)
 {
-	if(check_probability_model(model_))
-	{
 		int i;
 		int nr_class=model_->nr_class;
 		int nr_w;
@@ -2063,9 +2061,6 @@
 		}
 
 		return label;		
-	}
-	else
-		return 0;
 }
 
 static const char *solver_type_table[]=
