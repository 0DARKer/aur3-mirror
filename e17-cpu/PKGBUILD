#Contributer: graysky <graysky AT archlinux DOT us>
pkgname=e17-cpu
pkgver=57828
pkgrel=1
pkgdesc="Simple e17 gadget to monitor CPU load."
arch=('i686' 'x86_64')
url="http://trac.enlightenment.org/e/wiki/E17BinaryPackages"
license=('BSD')
makedepends=('subversion' 'pkgconfig' 'automake' 'autoconf' 'e-svn')
options=('!libtool')

_svntrunk=http://svn.enlightenment.org/svn/e/trunk/E-MODULES-EXTRA/cpu
_svnmod=cpu

build() {
  cd $startdir/src

  if [ -d $_svnmod/.svn ]; then
  (cd $_svnmod && svn up -r $pkgver)
  else
  svn co $_svntrunk --config-dir ./ -r $pkgver $_svnmod
  fi
  msg "SVN checkout done or server timeout"
  msg "Starting make..."

  if [ -d  $startdir/src/$_svnmod-build] ; then
   rm -r $startdir/src/$_svnmod-build
  fi
  cp -r $_svnmod $_svnmod-build
  cd $_svnmod-build

  ./autogen.sh --prefix=/usr
  make || return 1
  make DESTDIR=$startdir/pkg/ install

  install -D -m644 COPYING $startdir/pkg/usr/share/licenses/$pkgname/COPYING
}

