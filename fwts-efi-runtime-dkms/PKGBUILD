# Maintainer: Mariusz Libera <mariusz.libera@gmail.com>
pkgname=fwts-efi-runtime-dkms
pkgver=14.03.01
pkgrel=1
pkgdesc="FirmWare Test Suite efi-runtime kernel module sources"
arch=('any')
url="https://wiki.ubuntu.com/FirmwareTestSuite/"
license=('GPL2')
depends=('dkms')
changelog=Changelog
install=${pkgname}.install
source=("http://fwts.ubuntu.com/release/fwts-V${pkgver}.tar.gz")
sha256sums=('73d650fbd48d72c2308367cb42f16cd9f316c965699aee70139e84b2a14f17fc')

# not sure if I'm doing it the right way
prepare() {
    cd "${srcdir}/debian"
    sed -i 's/#MODULE_VERSION#/'${pkgver}'/' fwts-efi-runtime-dkms.dkms
    sed -i 's/updates/kernel/' fwts-efi-runtime-dkms.dkms
}

package() {
    cd "${srcdir}"
    install -dm755 ${pkgdir}/usr/src/${pkgname}-${pkgver}
    install -m644 efi_runtime/* ${pkgdir}/usr/src/${pkgname}-${pkgver}
    install -m644 debian/fwts-efi-runtime-dkms.dkms ${pkgdir}/usr/src/${pkgname}-${pkgver}/dkms.conf
}
