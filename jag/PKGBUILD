# Contributor: Leonardo Miliani <leonardo at leonardomiliani dot com>

pkgname=jag
pkgver=0.3.1
pkgrel=2
pkgdesc="A free arcade-puzzle 2D game in which you have to break all the target pieces - \
  Now with extra levels, additional themes and a level editor"
arch=('i686' 'x86_64')
url="http://jag.xlabsoft.com/"
depends=('qt>=4.4.0' 'libxrandr' 'sdl_mixer' 'libpng12')
license=('GPL2')
source=(http://jag.xlabsoft.com/files/$pkgname-$pkgver-src.zip 
		'jag.desktop' 'jag.png'
		'jag-level-editor.desktop' 'jag-leveleditor.png')
md5sums=('78a408629ca9858dc8279d9c124386f7'
		 '89494a96f138793852744484a05f62d2'
		 '75bad1a145baa8a9b3fb79b65c959ae6'
		 '60a2470557e66eed3317d93cf47f4fdd'
		 '6a733b853844f834efcd182a9182aba6'
		 ) 
install=${pkgname}.install

build() {
	msg "Compiling the game.... wait a while..."
	cd ${srcdir}/$pkgname-$pkgver-src
	qmake || return 1
	make || return 1
	make INSTALL_ROOT=${pkgdir} install || return 1
	
	install -D -m644 ${srcdir}/jag.png \
      ${pkgdir}/usr/share/pixmaps/jag.png || return 1
	install -D -m644 ${srcdir}/jag.desktop \
	  ${pkgdir}/usr/share/applications/jag.desktop || return 1    	
	  
	msg ""
	msg "Compiling level editor... wait a while..."
	cd ${srcdir}/$pkgname-$pkgver-src/editor
	qmake || return 1
	make || return 1
	make INSTALL_ROOT=${pkgdir} install || return 1
	
	install -D -m644 ${srcdir}/jag-leveleditor.png \
	  ${pkgdir}/usr/share/pixmaps/jag-leveleditor.png || return 1
	install -D -m644 ${srcdir}/jag-level-editor.desktop \
	  ${pkgdir}/usr/share/applications/jag-level-editor.desktop || return 1    	
	  
}
