# Contributor: Anders Bergh <anders1@gmail.com>
# Contributor: Andrzej Giniewicz <gginiu@gmail.com>
# Maintainer: Linus Sj√∂gren <thelinx@unreliablepollution.net>
pkgname=luajit2
pkgver=2.0.0_beta9
pkgrel=1
pkgdesc="A Just-In-Time Compiler for Lua"
arch=(i686 x86_64)
url="http://luajit.org"
license=('MIT')
source=(http://luajit.org/download/LuaJIT-${pkgver/_/-}.tar.gz
        lua_root.patch)
md5sums=('e7e03e67e2550817358bc28b44270c6d'
         'c8da9c6790e20a12a0e2496f438d9dc3')

build() {
  cd "$srcdir"/LuaJIT-${pkgver/_/-}
  patch -p0 < ../lua_root.patch

  make
  make install DESTDIR="$pkgdir" PREFIX=/usr
  ln -sf luajit-${pkgver/_/-} "$pkgdir"/usr/bin/luajit2

  install -Dm644 "$srcdir/LuaJIT-${pkgver/_/-}/COPYRIGHT" "$pkgdir/usr/share/licenses/$pkgname/COPYRIGHT"
}
