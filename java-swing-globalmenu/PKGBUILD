# Maintainer: Bjoern Bidar <theodorstormgrade@gmail.com>
pkgname=java-swing-globalmenu  
pkgver=165
pkgrel=3
pkgdesc="Globalmenu support for swing"
url="http://code.google.com/p/java-swing-ayatana"
arch=('i686' 'x86_64')
license=('MIT')
depends=( 'java-runtime=7' 'libunity ')
makedepends=('jdk7-openjdk'   'svn' 'apache-ant' 'lsb-release')


_svntrunk='http://java-swing-ayatana.googlecode.com/svn/tags/1.2.4' 
_svnmod='jayatana'

build()
{
  cd "$srcdir"
  msg "Connecting to SVN server...."

  if [[ -d "$_svnmod/.svn" ]]; then
    (cd "$_svnmod" && svn up -r "$pkgver")
  else
    svn co "$_svntrunk" --config-dir ./ -r "$pkgver" "$_svnmod"
  fi

  msg "SVN checkout done or server timeout"
  cd $_svnmod/$_svnmod
  ant config -Djava.home.7="$pkgdir/usr/lib/jvm/java-7-openjdk"  || return 1
  ant -Dplatforms.JDK_1.6.home=/usr/lib/jvm/java-7-openjdk || return 1

}

package() 
{ 
  cd $srcdir/$_svnmod/$_svnmod
  ant install
}
