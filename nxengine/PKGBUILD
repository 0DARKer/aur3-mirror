# Maintainer: Absolosba <absolosba at gmail dot com>
pkgname=nxengine
pkgver=1.0.0.2
pkgrel=2
pkgdesc="A clone/engine-rewrite of the classic jump-and-run platformer Cave Story."
arch=('i686' 'x86_64')
url="http://nxengine.sourceforge.net/"
license=('GPL3/freeware')
depends=('sdl' 'sdl_ttf')
if [ "$CARCH" == "i686" ]; then
    source=("http://nxengine.sourceforge.net/dl/nx-lin32-1002.tar.gz"
	"http://shii.org/pixel/cavestory.zip"
	"nxengine.desktop"
	"doukutsu.png"
	"nxengine")
    md5sums=('92bc4576a8c7d558a171bcfa1745a371'
         'c1dc82ff36837e70c36f5a5b38aa7e70'
         '4d15e2ac8bea8f3a742d269e2381efa2'
         'd73dee54b24f2ceb21a50e2c8f71da10'
         'c69d57618def7874381fe7688215120d')
else
    source=("http://nxengine.sourceforge.net/dl/nx-lin64-1002.tar.gz"
	"http://shii.org/pixel/cavestory.zip"
	"nxengine.desktop"
	"doukutsu.png"
	"nxengine")
    md5sums=('e81a5f123017862dafbe05a3b459ca43 '
         'c1dc82ff36837e70c36f5a5b38aa7e70'
         '4d15e2ac8bea8f3a742d269e2381efa2'
         'd73dee54b24f2ceb21a50e2c8f71da10'
         'c69d57618def7874381fe7688215120d')
fi
install=nxengine.install
build(){
         if [ "$CARCH" == "i686" ]; then
             cd "${srcdir}/nx-lin32-1002" || return 1
         else
             cd "${srcdir}/nx-lin64-1002" || return 1
         fi
         install -dm755 ${pkgdir}/usr/share/{${pkgname},applications} || return 1
         cp -r * "${pkgdir}/usr/share/${pkgname}/" || return 1
         cd "${srcdir}/cavestory" || return 1
         cp -r {Doukutsu.exe,data} "${pkgdir}/usr/share/${pkgname}/" || return 1
         install -Dm644 ${srcdir}/*.desktop "${pkgdir}/usr/share/applications/" || return 1
         install -Dm644 "${srcdir}/doukutsu.png" "${pkgdir}/usr/share/pixmaps/nxengine.png" || return 1
         install -Dm755 "${srcdir}/nxengine" "${pkgdir}/usr/bin/nxengine" || return 1
}

# vim:set ts=2 sw=2 et:
