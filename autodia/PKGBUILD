# Contributor: Andreas B. Wagner <AndreasBWagner@pointfree.net>
# Contributor: Anton Bazhenov <anton.bazhenov at gmail>
# Contributor: kerick <kerick@shiftedbit.net>
# Contributor: stefan minus husmann at t minus online dot de
# Contributor: John Gerritse <reaphsharc@gmail.com>
pkgname=autodia
pkgver=2.10
pkgrel=3
pkgdesc="An application that automatically generates Images, XML, HTML or Dia files"
arch=('any')
url="http://search.cpan.org/dist/Autodia/"
license=('GPL' 'PerlArtistic')
depends=('perl-xml-simple' 'perl-template-toolkit')
optdepends=('perl-inline-java: for Java support')
options=('!emptydirs')
source=("http://search.cpan.org/CPAN/authors/id/T/TE/TEEJAY/Autodia-${pkgver}.tar.gz" 'Diagram.pm.patch')
md5sums=('466e5de148a4f9760a5415ae9d9b1a1b'
         'df1a2613d21b7194f471fefa9defb55f')


build() {
  cd "${srcdir}/Autodia-${pkgver}"
  patch -u -p1 ${srcdir}/Autodia-2.10/lib/Autodia/Diagram.pm $srcdir/Diagram.pm.patch
  PERL_MM_USE_DEFAULT=1 perl Makefile.PL INSTALLDIRS=vendor || return 1
  make || return 1
  make DESTDIR=${pkgdir} install || return 1
}

