# Maintainer: Johannes Schleifenbaum <johannes [at] js-webcoding [dot] de>

pkgname=php-sha3
pkgver=20130417.5.414f8f7
pkgrel=1
pkgdesc="PHP extension that implements SHA-3 (Keccak)"
url="https://github.com/strawbrary/php-sha3"
license="MIT"
arch=('i686' 'x86_64')
depends=('php')
makedepends=('php' 'git')
install=$pkgname.install
source=('php-sha3::git+https://github.com/strawbrary/php-sha3.git')
sha1sums=('SKIP')

pkgver () {
  cd "$srcdir/$pkgname"
  _date=`date +"%Y%m%d"`
  echo "$_date.$(git rev-list --count HEAD).$(git describe --always)"
}

build() {
  cd php-sha3
  phpize
  ./configure --enable-sha3
  make
  NO_INTERACTION=1 make test
}

package() {
  cd "$srcdir/$pkgname"
  make INSTALL_ROOT=$pkgdir install

  install -D -m644 LICENSE "$pkgdir/usr/share/licenses/${pkgname}/LICENSE"
}
