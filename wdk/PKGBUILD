
# Maintainer: Henry J. Wylde <accounts+aur at hjwylde dot com>

pkgname=wdk
pkgver=0.3.21
pkgrel=5
pkgdesc='Whiley Development Kit'
arch=('any')
url='http://whiley.org/'
license=('custom')
depends=('java-environment>=6' 'bash')
provides=("whiley-environment=$pkgver")
conflicts=('whiley-environment')
source=("http://whiley.org/download/wdk/wdk-src-v$pkgver.tgz" "wdk-src-local-v$pkgver.tgz")
md5sums=('015795ba1f527fde8d66bce9e87dcfe0' 'cc28afe2f12fb1f4bb6c8be34ab7cae3')

package() {
    cd "$srcdir/$pkgname-src-local-v$pkgver"

    mkdir -p "$pkgdir/usr/lib/$pkgname/bin/"
    install -m755 bin/* "$pkgdir/usr/lib/$pkgname/bin/"

    mkdir -p "$pkgdir/usr/bin/"
    ln -s /usr/lib/wdk/bin/* "$pkgdir/usr/bin/"
    rm "$pkgdir/usr/bin/wy_common.bash"


    cd "$srcdir/$pkgname-v$pkgver"

    cp -ar examples "$pkgdir/usr/lib/$pkgname/"
    cp -ar lib "$pkgdir/usr/lib/$pkgname/"

    install -Dm644 CONTRIBUTORS "$pkgdir/usr/share/doc/$pkgname/CONTRIBUTORS"
    install -Dm644 README "$pkgdir/usr/share/doc/$pkgname/README"

    install -Dm644 LICENSE "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
}
