# $Id: PKGBUILD 57536 2009-10-31 20:34:23Z andrea $
# Contributor: Chris Brannon <cmbrannon79@gmail.com>
# Contributor: Jan de Groot <jgc@archlinux.org>
# Contributor: Giovanni Scafora <giovanni@archlinux.org>

pkgname=brltty-minimal
pkgver=4.1
pkgrel=2
pkgdesc="Braille display driver for Linux/Unix, with minimal dependencies"
arch=('i686' 'x86_64')
url="http://mielke.cc/brltty"
license=('GPL' 'LGPL')
depends=('bash' 'icu')
conflicts=('brltty')
provides=('brltty')
backup=(etc/brltty.conf etc/conf.d/brltty.conf)
options=('!makeflags' '!emptydirs')
source=(http://mielke.cc/brltty/releases/brltty-${pkgver}.tar.gz
	'brltty' 'brltty.conf')
md5sums=('b3b492240ba33fd3af45a181f5b89e7a'
         '831ebaf0c56091702929c68805d20c4f'
         'a8ab8b3dd059e96e1734bc9cdcf844fc')

build() {
  cd "${srcdir}/brltty-${pkgver}"
  CFLAGS+="${CFLAGS} -D_GNU_SOURCE" \
  ./configure --prefix=/usr \
              --sysconfdir=/etc \
              --mandir=/usr/share/man \
              --localstatedir=/var \
              --disable-gpm \
              --disable-x \
              --disable-speech-support \
              --disable-java-bindings \
              --disable-python-bindings \
              --disable-tcl-bindings \
	      --disable-caml-bindings
  make || return 1
  make INSTALL_ROOT="${pkgdir}" install
  install -D -m 755 ${srcdir}/brltty ${pkgdir}/etc/rc.d/brltty
  install -D -m 644 ${srcdir}/brltty.conf ${pkgdir}/etc/conf.d/brltty.conf
  install -D -m 644 Documents/brltty.conf ${pkgdir}/etc/brltty.conf
}
