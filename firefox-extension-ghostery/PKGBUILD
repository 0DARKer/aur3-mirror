# Maintainer: GI_Jack <iamjacksemail@hackermail.com>
# Based on PKGBUILD firefox-extension-httpseverywhere

_plugin_name=ghostery
_plugin_version=2.9.2
pkgdesc="Plugin for Firefox which detects and/or blocks website trackers"
license=('custom')

pkgname=firefox-extension-$_plugin_name
pkgver=$_plugin_version
pkgrel=1
arch=('any')
url="https://www.ghostery.com"
depends=("firefox>=3.5" "firefox<23.0")
source=("https://addons.cdn.mozilla.net/storage/public-staging/9609/ghostery-${pkgver}-fx+sm.xpi"
        "ghostery.license")
md5sums=('88c2038c01c809311c92383d764c4d39'
         '07802fed6868d6ce6989c43b20c053ef')
sha1sums=('5287b2fb1fc367961697770e0e70f8a9e1012d6a'
          '4c23859f8460c15b362c7f0465f3223eb13e362b')
package() {
  cd $srcdir
  emid=$(sed -n '/.*<em:id>\(.*\)<\/em:id>.*/{s//\1/p;q}' install.rdf) || return 1
  local dstdir=$pkgdir/usr/lib/firefox/extensions/${emid}
  install -Dm644 ghostery.license "${pkgdir}/usr/share/licenses/ghostery/license"
  install -d $dstdir
  mv * $dstdir
  rm $dstdir/ghostery-${_plugin_version}-fx+sm.xpi
  chmod -R 755 $dstdir
}
