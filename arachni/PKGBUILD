# Contributor: Vlatko Kosturjak <kost@linux.hr>
# Taken from arachni-git from: Rickey Visinski <rickeyvisinski@gmail.com>

pkgname=arachni
pkgver=0.2.1
pkgrel=2
pkgdesc="Arachni - Web Application Security Scanner Framework"
arch=('any')
url="https://github.com/Zapotek/arachni"
license=('GPL')
depends=('ruby' 'ruby-typhoeus' 'ruby-awesome_print' 'ruby-yard' 'ruby-nokogiri' 'ruby-robots' 'ruby-liquid')
makedepends=('git')
conflicts=('arachni-git')
source=("http://github.com/downloads/Zapotek/arachni/arachni-v$pkgver.tar.gz")
md5sums=('362a7441457684077dd40b7143574b68')

build() {
  mkdir -p $pkgdir/usr/{bin,src}
  cd $pkgdir/usr/src
  cp -R $srcdir/$pkgname-v$pkgver $pkgname
  mkdir $pkgname/scans
  cd $pkgdir/usr/bin
  echo '#!/bin/sh' > arachni
  echo "cd  /usr/src/$pkgname/scans && ruby /usr/src/$pkgname/arachni.rb $*" >> arachni
  chmod +x $pkgdir/usr/bin/$pkgname
} 
