# Maintainer: Nuno Araujo <nuno.araujo at russo79.com>
pkgname=g19d
pkgver=0.0.7
pkgrel=1
pkgdesc="Daemon process that provides low level access to the G19 keyboard for Gnome15"
arch=(any)
url="http://www.tanktarta.pwp.blueyonder.co.uk/gnome15/g19d.html"
license=('GPL')
groups=()
depends=(python2 pyusb python-uinput python-imaging)
makedepends=()
optdepends=()
provides=()
conflicts=()
replaces=()
backup=()
options=()
install=
changelog=
source=(http://www.tanktarta.pwp.blueyonder.co.uk/gnome15/$pkgname-$pkgver.tar.gz
        g19d)
noextract=()
md5sums=('cb62969eca129f33eddad0b64ce16708'
         '763d2e25ca25e821d0dae7eef3a69c94')

build() {
  cd "$srcdir/$pkgname-$pkgver"

  # python2 fix
  for file in $(find . -type f -name '*' -print); do
    sed -i 's_^#!.*/usr/bin/python_#!/usr/bin/python2_' $file
    sed -i 's_^#!.*/usr/bin/env.*python_#!/usr/bin/env python2_' $file
  done

  ./configure --prefix=/usr PYTHON=python2
  make
}

package() {
  cd "$srcdir/$pkgname-$pkgver"

  make DESTDIR="$pkgdir/" install

  # install initscript
  install -D -m 755 "${srcdir}/g19d" "${pkgdir}/etc/rc.d/g19d"
}
# vim:set ts=2 sw=2 et:
