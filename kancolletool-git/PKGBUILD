# Maintainer: Yukarin <yukariin@yandex.ru>

pkgname='kancolletool-git'
pkgver=0.9.2
pkgrel=2
epoch=
pkgdesc="Makes KanColle better"
arch=('i686', 'x86_64')
url="http://kancolletool.github.io/"
license=('MIT')
groups=()
depends=('qt5-base' 'qt5-webkit' 'flashplugin')
makedepends=('git' 'cmake')
checkdepends=()
optdepends=()
provides=()
conflicts=('kancolletool-viewer-git')
replaces=()
backup=()
options=()
install=
changelog=
source=("$pkgname::git://github.com/KanColleTool/KanColleTool.git")
noextract=()
md5sums=(SKIP)

pkgver() {
	cd "$srcdir/$pkgname"
	cat VERSION
}

prepare() {
	cd "$srcdir/$pkgname"
	git submodule update --init --recursive
}

build() {
	cd "$srcdir/$pkgname"
	cmake -DCMAKE_INSTALL_PREFIX="$pkgdir/usr" .
	make
}

package_kancolletool-git() {
	cd "$srcdir/$pkgname"
	make install
	install -Dm644 ./tool/resources/KanColleTool.png "$pkgdir/usr/share/icons/hicolor/192x192/apps/KanColleTool.png"
	install -Dm644 ./tool/resources/KanColleTool.desktop "$pkgdir/usr/share/applications/KanColleTool.desktop"
	install -Dm644 ./viewer/resources/KCTViewer.png "$pkgdir/usr/share/icons/hicolor/192x192/apps/KCTViewer.png"
	install -Dm644 ./viewer/resources/KCTViewer.desktop "$pkgdir/usr/share/applications/KCTViewer.desktop"
}
