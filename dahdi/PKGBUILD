# Maintainer : Xavier Devlamynck <magicrhesus@ouranos.be>
# Contributor: Jonathan Liu <net147@gmail.com>

pkgname=dahdi
pkgver=2.7.0
pkgrel=2
pkgdesc="DAHDI drivers for Asterisk"
arch=('i686' 'x86_64')
url="http://www.asterisk.org/"
license=('GPL2')
depends=('linux' 'libusb' 'perl')
makedepends=('linux-headers')
conflicts=('zaptel')
install="${pkgname}.install"
source=("http://downloads.asterisk.org/pub/telephony/dahdi-linux-complete/releases/dahdi-linux-complete-${pkgver}+${pkgver}.tar.gz"
        "Makefile.patch"
        "dahdi.service")
sha1sums=('55ac8f391e3ee39316788b36651415a1967b0aa5'
          '2c32963f71423a3591602b1863c714d92e2afcc5'
          'd37e37c67726cc64ce8b668217db625e2e9d9e9e')
build() {
  cd "${srcdir}/dahdi-linux-complete-${pkgver}+${pkgver}"
  patch -p0 -i "${srcdir}/Makefile.patch" "${srcdir}/dahdi-linux-complete-${pkgver}+${pkgver}/Makefile"
  make DESTDIR="${pkgdir}" all
}

package() {
  cd "${srcdir}/dahdi-linux-complete-${pkgver}+${pkgver}"
  make DYNFS=1 DESTDIR="${pkgdir}" install
}

# vim:set ts=2 sw=2 et:
