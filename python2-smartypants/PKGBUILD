# Contributor:  <clu>
# Maintainer:  Achilleas Pipinellis <axilleas archlinux info>

pkgname=python2-smartypants
_pkgname=smartypants
pkgver=1.8.3
pkgrel=1
pkgdesc="A smart-quotes plugin"
url="http://web.chad.org/projects/smartypants.py/"
arch=('any')
license=('BSD')
depends=(python2)
source=(http://pypi.python.org/packages/source/s/${_pkgname}/${_pkgname}-${pkgver}.tar.gz)

package()
{
  cd "${srcdir}/${_pkgname}-$pkgver"

  # Get and copy license
  # https://bitbucket.org/livibetter/smartypants.py/issue/3/copying-is-not-included-in-packaged
  mkdir -p "${pkgdir}"/usr/share/licenses/$_pkgname
  wget https://bitbucket.org/livibetter/smartypants.py/raw/c2f87a4408f87c08cb7d77668fbc4cc22c657d25/COPYING
  install -D -m644 COPYING "${pkgdir}/usr/share/licenses/$_pkgname/LICENSE"

  # python2 fix
  sed -i 's|#!/usr/bin/env python|#!/usr/bin/env python2|' setup.py
  sed -i 's|#!/usr/bin/python|#!/usr/bin/env python2|' smartypants{.py,}
  python2 setup.py install --root="${pkgdir}" -O1
}

md5sums=('0ca46760556c6221ee356a2cf2b7d8fb')
