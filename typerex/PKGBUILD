# Maintainer: Thibaut Horel <thibaut dot horel at gmail dot com>

pkgname=typerex
pkgver=1.0.0rc1
pkgrel=1
pkgdesc="A development environment for OCaml"
arch=('i686' 'x86_64')
url="http://www.typerex.org"
license=('GPL3')
depends=('ocaml>=3.11.2' 'emacs>=23.2.1')
optdepends=('emacs-auto-complete-git: for the auto-completion')
install=typerex.install
source=(http://www.typerex.org/pub/$pkgname-$pkgver.tar.bz2)
sha1sums=('e4d5aa439aed62ba8d421990ddbc83f7d94df827')

build() {
  cd "$srcdir/$pkgname-$pkgver"
  ./configure --prefix=/usr/ \
  --with-lispdir=/usr/share/emacs/site-lisp \
  --disable-auto-complete
  make
}

package() {
  cd "$srcdir/$pkgname-$pkgver" 
  make BINDIR="$pkgdir/usr/bin" EMACSDIR="$pkgdir/usr/share/emacs/site-lisp" install
  install -d $pkgdir/usr/share/doc/$pkgname/
  cp -r docs/user-manual/* $pkgdir/usr/share/doc/$pkgname/
  install -m644 AUTHORS $pkgdir/usr/share/doc/$pkgname/
  install -m644 -D emacs.append $pkgdir/usr/share/$pkgname/config.el
}
