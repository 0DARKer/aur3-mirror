pkgname=zennode
pkgver=1.2.1
pkgrel=5
pkgdesc="A node builder for Doom WAD files"
arch=('i686' 'x86_64')
url="http://www.mrousseau.org/programs/ZenNode"
license=('GPL3')
makedepends=('unzip')
source=(http://www.mrousseau.org/programs/ZenNode/archives/$pkgname-$pkgver.zip \
        makefile.diff \
        compare.diff)
md5sums=('36d5082b48ef1e4f638a38ba1034d058'
         '6662c600aa37f1fbd3184f360726f960'
         'da184744ea4b386324abd3aef3c1cb8b')

build() {
  cd $startdir/src/ZenNode-$pkgver

  unzip -n $pkgname-src.zip || return 1

  patch -Np1 -i ../makefile.diff || return 1
  patch -Np1 -i ../compare.diff  || return 1

  cd src/ZenNode

  make || return 1
}

package() {
  install -m755 -D ${srcdir}/ZenNode-${pkgver}/linux/ZenNode ${startdir}/pkg/zennode/usr/bin/zennode
  install -m755 ${srcdir}/ZenNode-${pkgver}/linux/bspdiff $startdir/pkg/zennode/usr/bin/
    install -m755 ${srcdir}/ZenNode-${pkgver}/linux/compare $startdir/pkg/zennode/usr/bin/bspcomp
  install -m775 ${srcdir}/ZenNode-${pkgver}/linux/bspinfo $startdir/pkg/zennode/usr/bin/
}
