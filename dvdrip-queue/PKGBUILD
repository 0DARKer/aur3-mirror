# Maintainer: Justin Kueser < [firstname] dot [lastname] at gmail dot com>

pkgname=dvdrip-queue
pkgver=0.1.3
_pkgtag=.orig
pkgrel=1
pkgdesc="A piece of software that allows you to create a queue of DVD::Rip projects."
arch=('i686' 'x86_64')
url="http://dvdrip-queue.sourceforge.net/"
license=('GPL3')
depends=('dvdrip' 'python2' 'libglade' 'pygtk')
source=("http://downloads.sourceforge.net/project/${pkgname}/${pkgname}/${pkgver}/${pkgname}_${pkgver}${_pkgtag}.tar.gz"
"dvdrip-version.patch"
"dvdrip-queue-prefswindow.patch"
"dvdrip-queue.install"
"dvdrip-queue-doencode.patch")
sha256sums=('df6d19ce6fdab0887cb9b46b8c8905bb8d4c06e418e774f8b629d13272860da1'
'7e1d4c00c33edf0d7cbe068567c80b804fbb261f89588e1ee6d69848f20f001b'
'6d1fa418e465669ec8b32adb471e7d29e3a5036740e5d947f7bb99dac50a4aff'
'e8158d47fecabd3cf0e5b137ed9b052d293edce038b5109cce9e2eb010e99871'
'fd66a3f362b9d0e04a19f5dcfec938d4021e8193eeb854ea98fc7fd08f80b91e')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  patch -uN dvdrip-queue ../dvdrip-version.patch || return 1
  patch -uN ./dvdripQueue/prefsWindow.py ../dvdrip-queue-prefswindow.patch || return 1
  patch ./dvdripQueue/doEncode.py < ../dvdrip-queue-doencode.patch || return 1
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  python2 ./setup.py install --root="${pkgdir}" --prefix=/usr
}
