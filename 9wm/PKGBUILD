# Orig. Contributor: Callan Barrett <wizzomafizzo@gmail.com>

pkgname=9wm
pkgver=1.2
pkgrel=2
pkgdesc="Window manager modeled after Plan 9's 8 1/2"
arch=('i686' 'x86_64')
url="http://unauthorised.org/dhog/9wm.html"
license=('custom')
depends=('libxext' 'libxau' 'libxdmcp')
makedepends=('imake')
source=(http://unauthorised.org/dhog/9wm/pre-${pkgname}-${pkgver}.shar.gz)
noextract=("pre-${pkgname}-${pkgver}.shar.gz")
md5sums=('2785a33d4f42ecc19234029db03d7e00')

build() {
  cp ${startdir}/pre-${pkgname}-${pkgver}.shar.gz ${startdir}/pre-${pkgname}-${pkgver}.tmp.shar.gz
  gunzip ${startdir}/pre-${pkgname}-${pkgver}.tmp.shar.gz || return 1

  mkdir ${startdir}/src/${pkgname}-${pkgver} || return 1
  cd ${startdir}/src/${pkgname}-${pkgver}
  sh ${startdir}/pre-${pkgname}-${pkgver}.tmp.shar || return 1
  rm -f ${startdir}/pre-${pkgname}-${pkgver}.tmp.shar
  
  xmkmf || return 1
  make || return 1
  make DESTDIR=${startdir}/pkg install || return 1
  make DESTDIR=${startdir}/pkg install.man || return 1

  install -Dm644 $startdir/src/$pkgname-$pkgver/README \
                 $startdir/pkg/usr/share/licenses/9wm/README || return 1
}
