# Contributor: Cyril Lashkevich <notorca at gmail dot com>

pkgname=kchmviewer-qt
pkgver=5.3
pkgrel=1
pkgdesc="A .chm files (MS HTML help file format) viewer"
arch=('i686' 'x86_64')
url="http://kchmviewer.sourceforge.net/"
license=('GPL')
depends=('chmlib' 'qt')
options=('libtool')
install=${pkgname%-*}.install
source=(http://downloads.sourceforge.net/${pkgname%-*}/${pkgname%-*}-$pkgver.tar.gz)

md5sums=('619bae91bcaf9cc81d9907f0d593798f')

build() {
    cd ${srcdir}/kchmviewer-$pkgver

    qmake
    make || return 1
    install -D -m755 ${srcdir}/kchmviewer-$pkgver/bin/kchmviewer \
    ${pkgdir}/usr/bin/kchmviewer || return 1

    #icon file
    install -D -m644 ${srcdir}/kchmviewer-$pkgver/packages/${pkgname%-*}.png \
    ${pkgdir}/usr/share/pixmaps/${pkgname%-*}.png || return 1

    #msits.protocol file provided by kdegraphics package
    rm -rf ${pkgdir}/usr/share/kde4 || return 1
    #kio_msits.so file provided by kdegraphics package - FS#14376
    rm -rf ${pkgdir}/usr/lib || return 1
}
