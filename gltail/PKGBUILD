pkgname=gltail
pkgver=20100411
pkgrel=1
pkgdesc="View real-time data and statistics from any logfile on any server with SSH, in an intuitive and entertaining way."
arch=('i686' 'x86_64')
url="http://www.fudgie.org/"
license=('GPL')
depends=('ruby' 'rubygems' 'rake' 'freeglut')
makedepends=('git')
install='gltail.install'

_gitroot='git://github.com/Fudge/gltail.git'
_gitname=$pkgname

build() {
    if [ -e $pkgname ] ; then
      cd $pkgname
      git pull . master || return 1
      cd ..
    else
      git clone $_gitroot $_gitname || return 1
    fi

    cd $srcdir/$pkgname
    mkdir -p $startdir/pkg/usr/share/gltail
    mkdir -p $startdir/pkg/usr/bin
    cp -R * $startdir/pkg/usr/share/gltail
    touch $startdir/pkg/usr/bin/gl_tail
    echo "#!/bin/sh" > $startdir/pkg/usr/bin/gl_tail
    echo "/usr/share/gltail/bin/gl_tail \$*" >> $startdir/pkg/usr/bin/gl_tail
    chmod +x $startdir/pkg/usr/bin/gl_tail
}
