# B43-Firmware: Installer: Arch
# Contributor: Chris Giles <Chris.G.27 (at) Gmail.com>
# Contributor: Todd Partridge (Gen2ly) toddrpartridge (at) gmail

pkgname=b43-firmware-legacy
realname=wl_apsta
pkgver=3.130.20.0
pkgrel=1
pkgdesc="Firmware for legacy Broadcom B43 wireless networking chips"
arch=("i686" "x86_64")
url="http://linuxwireless.org/en/users/Drivers/b43"
license=("GPL")
depends=("kernel26")
makedepends=("b43-fwcutter")
options=(!emptydirs)

source=(http://downloads.openwrt.org/sources/${realname}-${pkgver}.o)
sha1sums=('b1f61d283bd7d05ade313da522cb0d0ad4033652')


build() {
	cd ${srcdir}

	# Directories
	install -d ${pkgdir}/lib/firmware/

	# Install
	b43-fwcutter -w "${pkgdir}/lib/firmware/" ${realname}-${pkgver}.o || return 1

	# Messages
	msg "You should also add 'b43legacy' into the 'modules' section of your '/etc/rc.conf' file."
}
