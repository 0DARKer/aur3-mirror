# Maintainer: orbisvicis <orbisvicis at gmail dot com>
pkgname=warsow-community-map-pack
pkgver=01
pkgrel=1
pkgdesc="A compilation of maps created by the Warsow comunity"
arch=('any')
url="http://www.warsow.net/"
license=('custom:Warsow Content License')
depends=()
makedepends=('unzip')
optdepends=('warsow: core game')
backup=()
options=()
install=
changelog=
archivename=warsow_comunity_map_pack
source=("http://static.warsow.net/release/${archivename}_${pkgver}.zip"
        'license.txt')
noextract=("${archivename}_${pkgver}.zip")
sha256sums=('58b84b10d5fbaa22e29d59194b8c5ebbc633356fbc6545a715e44a73bdd3c7e7'
            '554b8d57d83311c64f5e9ab2d5a2b686ba48ea1750ebb1f1e576330cf1ba6937')

build() {
  cd "${srcdir}"
  [ -d "${pkgname}_${pkgver}" ] && rm -rf "${pkgname}_${pkgver}"
  unzip -d "${pkgname}_${pkgver}" "${archivename}_${pkgver}"
}

package() {
  cd "${srcdir}/${pkgname}_${pkgver}"

  # Install Custom License: Warsow Content License
  install -Dm644 "${srcdir}/license.txt" "${pkgdir}/usr/share/licenses/${pkgname}/license.txt"

  # Install maps
  install -dm755 "${pkgdir}/opt/warsow/basewsw/"
  install -Dm644 basewsw/*.pk3 "${pkgdir}/opt/warsow/basewsw/"

  # Install Documentation
  install -Dm644 "Readme.rtf" "${pkgdir}/usr/share/doc/${pkgname}/Readme.rtf"
  install -dm755 "${pkgdir}/usr/share/doc/${pkgname}/previews/"
  install -Dm644 previews/*.jpg "${pkgdir}/usr/share/doc/${pkgname}/previews/"
}

# vim:set ts=2 sw=2 et:
