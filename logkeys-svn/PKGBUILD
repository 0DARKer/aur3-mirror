# Contributor: wido <widomaker2k7@gmail.com>
# Maintainer: SanskritFritz (gmail)

pkgname=logkeys-svn
pkgver=102
pkgrel=2
pkgdesc="Simple keylogger supporting also USB keyboards."
license=('GPLv3')
arch=('i686' 'x86_64')
optdepends=('logkeys-keymap: for additional keymaps')
makedepends=('subversion')
conflicts=('logkeys')
provides=('logkeys')
url="http://logkeys.googlecode.com/"
source=(logkeysd logkeysd.conf)
install=logkeys.install

md5sums=('761bf7cf5ab6b1352420f62477bf1dd4'
         '291370dc6e18e4cc06a943d3efc170b6')

_svnmod="logkeys"
_svntrunk="http://logkeys.googlecode.com/svn/trunk/"

build() {
	cd "${srcdir}/"
	if [ -d "${_svnmod}/.svn" ]; then
		(cd "${_svnmod}" && svn up)
	else
		svn co ${_svntrunk} ${_svnmod}
	fi

	rm -rf "${srcdir}/${_svnmod}/build/*"
	mkdir -p "${pkgdir}/usr/bin/"
	cd "${srcdir}/${_svnmod}/build"

	../configure --prefix=/usr
	make || return 1
}

package() {
	cd "${srcdir}/${_svnmod}/build"
	make DESTDIR="${pkgdir}/" install

	install -Dm0755 "${srcdir}/logkeysd" "${pkgdir}/etc/rc.d/logkeysd"
	install -Dm0755 "${srcdir}/logkeysd.conf" "${pkgdir}/etc/conf.d/logkeysd"
}

