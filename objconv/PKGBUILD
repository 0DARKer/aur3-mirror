# Maintainer: Robert Knauer <robert@privatdemail.net>
# Contributor: philomath <philomath868 AT gmail DOT com>

pkgname=objconv
pkgver=2.16
pkgrel=1
pkgdesc='object files converter (COFF/PE, OMF, ELF and Mach-O) and disassembler (supporting the SSE4, AVX, AVX2, FMA and XOP instruction sets)'
arch=('i686' 'x86_64')
url="http://www.agner.org/optimize/#objconv"
license=('GPL')
depends=('gcc-libs')
makedepends=('unzip')
source=(
  "${pkgname}-${pkgver}.zip"::"http://www.agner.org/optimize/${pkgname}.zip"
)
sha256sums=(
  '095f84866be2dcf5f932696cdce6c33df5cb8c4457412fca0e878b8187e8abed'
)

build() {
  cd "${srcdir}"
  # unzip source archive:
  unzip 'source.zip' -d 'source'
  cd 'source'
  # compile:
  msg "Compiling ..."
  g++ -o objconv -O2 *.cpp
}

package() {
  cd "${srcdir}"
  # install:
  install -D -m755 "source/objconv" "${pkgdir}/usr/bin/objconv"
  install -D -m755 "objconv-instructions.pdf" "${pkgdir}/usr/share/doc/${pkgname}/manual.pdf"
}
