# Maintainer: Mike Krueger <info@memoryleakx.dudmail.com>
pkgname=cl-shorter
pkgver=7
pkgrel=1
pkgdesc="Clipboard Link Shorter Icon - This Tool shorten each copied url automatically.  -  like this: http://is.gd/eUzH5A  -  You can control it with a Status Icon (Start | Stop | Exit)"
arch=('i686' 'x86_64')
license=('BSD')
url="http://code.google.com/p/cl-shorter/"
depends=('gtk-sharp-2' 'notify-sharp' 'mono')
makedepends=('subversion')

_svntrunk=https://cl-shorter.googlecode.com/svn/trunk/
_svnmod=CL_Shorter

build() {
  cd $srcdir

  msg "Getting sources"

  if [[ -e $_svnmod/.svn ]]; then
     cd $_svnmod && svn up
   else
      svn co $_svntrunk --config-dir ./ $_svnmod
   fi

  msg "SVN checkout done or server timeout"
  msg "Starting make..."

  #cd $_svnmod
  cd $_svnmod

  ls

 ./configure --prefix=/usr/local || return 1
  make || return 1
}

package() {

  install -d "$pkgdir"/usr/share/icons/cl_shorter/

  install -Dm755 "$srcdir/$_svnmod/$_svnmod/$_svnmod/icon.png" \
      "$pkgdir/usr/share/icons/cl_shorter/icon.png"

  install -Dm644 "$srcdir/$_svnmod/$_svnmod/$_svnmod/cl_shorter.desktop" \
      "$pkgdir/usr/share/applications/cl_shorter.desktop"

  cd $srcdir
  cd $_svnmod
  cd $_svnmod

  make DESTDIR="${pkgdir}" install || return 1

	

}

