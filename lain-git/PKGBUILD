# Maintainer: luke bonham <dada [at] archlinux [dot] info>

pkgname=lain-git
pkgver=457.6e2b1d3
pkgrel=1
pkgdesc="Layouts, Utilities and Widgets for Awesome WM (successor of vain-git)"
arch=('any')
url="https://github.com/copycat-killer/lain"
license=('GPL2')
depends=('awesome')
optdepends=('alsa-utils: for ALSA volume widgets'
            'curl: for widgets accessing network resources'
            'imagemagick: for mpd album art notifications')
makedepends=('git')
provides=('lain')
conflicts=('lain')
source=("git://github.com/copycat-killer/lain.git")
md5sums=('SKIP')

pkgver() {
  cd lain
  printf "%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse --short HEAD)"
}

package() {
  install -d "$pkgdir/usr/share/awesome/lib/lain"
  cp -a lain "$pkgdir/usr/share/awesome/lib/"

  # Fix permissions
  find "$pkgdir" -type d -print0 | xargs -0 chmod -R 755
  find "$pkgdir" -type f ! -path "*/scripts/*" -print0 | xargs -0 chmod -R 644
}
