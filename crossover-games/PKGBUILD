# Maintainer: Sheepeh <sheepeh AT gmx DOT co DOT uk>
# Contributer: LTSmash <lord DOT ltsmash AT gmail DOT com>
# Contributer: Sam!
pkgname=crossover-games
pkgver=9.1.0
pkgrel=1
pkgdesc="Play Windows Games on Linux"
arch=('i686' 'x86_64')

makedepends=(deb2targz)
if [ $CARCH = 'i686' ] ;
then

depends=('libsm' 'libxext' 'libxrandr' 'libice' 'pygtk')
optdepends=('alsa-lib: enables sound through ALSA' 
  'libxcursor: coloured mouse pointer support' 
  'libxi: enables joystick and tablet support' 
  'libxinerama: enables spanning multiple screens' 
  'libpng: enable PNG images' 
  'libjpeg: enable JPEG images' 
  'openssl:  support for secure Internet communication' 
  'libcups: printing support' 
  'libxxf86vm: perform gamma adjustments' 
  'hal: automatically detect CD-ROMs, DVDs, and USB keys' 
  'fontconfig: enables access to TrueType fonts'
  'unzip: required to install Guild Wars, automatic installer extraction'

  ) 

else 

depends=('lib32-glibc' 'lib32-libsm' 'lib32-libxext' 'lib32-zlib' 'lib32-gcc-libs' 'lib32-libxrandr' 'lib32-libice' 'lib32-util-linux-ng' 'lib32-e2fsprogs' 'pygtk')
optdepends=('lib32-nvidia-utils: enables 3D under nvidia cards' 
  'lib32-catalyst-utils:enables 3D under ati cards' 
  'lib32-alsa-lib: enables sound through ALSA' 
  'lib32-libxcursor: coloured mouse pointer support' 
  'lib32-libxinerama: enables spanning multiple screens' 
  'lib32-openssl:  support for secure Internet communication' 
  'lib32-libcups: printing support' 
  'lib32-libxxf86vm: perform gamma adjustments' 
  'lib32-libxi: enables joystick and tablet support' 
  'lib32-libpng: enable PNG images' 
  'lib32-libjpeg: enable JPEG images' 
  'lib32-hal: automatically detect CD-ROMs, DVDs, and USB keys' 
  'lib32-fontconfig: enables access to TrueType fonts' 
  'unzip: required to install Guild Wars, automatic installer extraction'
   
   
) 
fi

url="http://www.codeweavers.com"
license=('custom')
source=(http://media.codeweavers.com/pub/crossover/cxgames/demo/crossover-games-demo_${pkgver}-1_i386.deb)
install=crossover-games.install
md5sums=(572161da21ac6f22878886baa7c8a121)
build() {
	cd $srcdir/
	deb2targz crossover-games-demo_${pkgver}-1_i386.deb || return 1
	tar xf crossover-games-demo_${pkgver}-1_i386.tar.gz -C $startdir/pkg || return 1
	rm $startdir/pkg/opt/cxgames/doc # remove symbolic link
	mkdir $startdir/pkg/opt/cxgames/doc # create real directory
	mv $startdir/pkg/usr/share/doc/crossover-games-demo/* $startdir/pkg/opt/cxgames/doc
	gzip -d $startdir/pkg/opt/cxgames/doc/license.txt.gz
	install -m 644 -D $startdir/pkg/opt/cxgames/doc/license.txt $startdir/pkg/usr/share/licenses/crossover-games/license
	sed s/\;\;"\"MenuRoot\" = \"\""/"MenuRoot = Windows Games/" -i $startdir/pkg/opt/cxgames/share/crossover/bottle_data/cxbottle.conf
	sed s/\;\;"\"MenuStrip\" = \"\""/"MenuStrip = 1/" -i $startdir/pkg/opt/cxgames/share/crossover/bottle_data/cxbottle.conf
	rm $startdir/pkg/usr -r
}
