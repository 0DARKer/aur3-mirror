# Maintainer: bitwave <aur [aeatt] oomlu [do0t] de>
# Contributor: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Contributor: SÃ©bastien Luttringer <seblu@archlinux.org>
# Contributor: Anders Bergh <anders1@gmail.com>

pkgbase=lua51-sql-sqlite
pkgname=('lua51-sql-sqlite')
pkgver=2.3.0
pkgrel=1
arch=('i686' 'x86_64')
url='http://www.keplerproject.org/luasql/'
license=('MIT')
pkgdesc='SQLite module for Lua'
depends=('lua51' 'sqlite')
makedepends=('lua51' 'sqlite')
source=("https://github.com/keplerproject/luasql/archive/v$pkgver.tar.gz")
md5sums=('af9f0f3a2313a1fcf88c40700092048d')
sha1sums=('71e4f57153e3116e1a998b7a25a5edd7a9bced6e')

build() {
  cd luasql-$pkgver
  sed -i '24s,$,/lua5.1,' config
  msg2 'Building sqlite support'
  make T=sqlite3 PREFIX=/usr DRIVER_LIBS='-lsqlite3' DRIVER_INCS='-fPIC -std=c99'
}

package() {
  cd luasql-$pkgver
  install -Dm644 src/sqlite3.so "$pkgdir/usr/lib/lua/5.1/luasql/sqlite3.so"
  install -Dm644 doc/us/license.html "$pkgdir/usr/share/licenses/$pkgname/license.html"
}

# vim:set ts=2 sw=2 et: