pkgname=libwebcam-svn
pkgver=23
pkgrel=1
pkgdesc="A libary that is designed to simplify the development of webcam applications"
arch=(i686 x86_64)
url="http://www.quickcamteam.net/software/libwebcam/"
license="GNU"
depends=('libxml2')
makedepends=('pkgconfig' 'automake' 'autoconf' 'gengetopt')
source=(
	 'http://svn.berlios.de/svnroot/repos/linux-uvc/linux-uvc/trunk/uvcvideo.h'
	 'http://svn.berlios.de/svnroot/repos/linux-uvc/linux-uvc/trunk/uvc_compat.h'
)
md5sums=('84360f0925d68e95a24051b5bcce7db6'
         'd01ff5ca0bc5b66abffbcea91c0b6508')

_svntrunk=http://svn.quickcamteam.net/svn/qct/Linux/
_svnmod=libwebcam

build() {
	cd $srcdir
	if [ -d $_svnmod/.svn ]; then
		( cd $_svnmod && svn up ) || return 1
	else
		svn co $_svntrunk -r $pkgver $_svnmod || return 1
	fi
	msg "SVN checkout done or server timeout"
	msg "Starting make..."

	cd $srcdir/$_svnmod
	mv $srcdir/uvc_compat.h Common/include/
	mv $srcdir/uvcvideo.h Common/include/

	mkdir build
	cd build
	cmake .. -DCMAKE_INSTALL_PREFIX=/usr
	make || return 1
	make DESTDIR=$pkgdir install
}
