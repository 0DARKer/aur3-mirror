# Maintainer: RaphaÃ«l Doursenaud <rdoursenaud@free.fr>

pkgname=brother-dcp9055cdn
pkgver=1.1.1
pkgrel=5
pkgdesc="Brother CUPS and LPD driver for DCP-9055CDN"
arch=('i686' 'x86_64')
url="http://welcome.solutions.brother.com/bsc/public_s/id/linux/en/download_prn.html#DCP-9055CDN"
license=('custom')

if [ "$(uname -m)" = "x86_64" ]; then
 depends=('lib32-glibc' 'psutils')
else
 depends=('psutils')
fi

source=(http://www.brother.com/pub/bsc/linux/dlf/dcp9055cdnlpr-$pkgver-$pkgrel.i386.deb
        http://www.brother.com/pub/bsc/linux/dlf/dcp9055cdncupswrapper-$pkgver-$pkgrel.i386.deb
        brlpdwrapperdcp9055cdn)

md5sums=('f9ffc1a38fcc64e1d7f82d13652a1f57'
         'b08a49bee644dac18229c2843c5349b2'
         '2d368a9cbaeffbc7c9e24bcafe45b71e')

build()
{
 mkdir -p $startdir/src/unpack || return 1
 for i in $startdir/src/*.deb
 do
  cd $startdir/src/unpack
  ar -x $i || return 1
  cd $startdir/pkg
  bsdtar xf $startdir/src/unpack/data.tar.gz || return 1
 done

 cd $startdir/src
 install -d -m755 $startdir/pkg/usr/share/cups/model || return 1
 install -d -m755 $startdir/pkg/usr/lib/cups/filter || return 1
 install -D -m644 $startdir/pkg/usr/local/Brother/Printer/dcp9055cdn/cupswrapper/dcp9055cdn.ppd $startdir/pkg/usr/share/cups/model || return 1
 install -D -m755 brlpdwrapperdcp9055cdn $startdir/pkg/usr/lib/cups/filter || return 1
}
