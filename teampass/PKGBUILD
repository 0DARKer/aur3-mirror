# Maintainer: Foppe HEMMINGA <foppe@foppe.org>
# Contributer: David Zaragoza <david@zaragoza.com.ve>
pkgname=teampass
pkgver=2.2.0
pkgrel=2
epoch=
pkgdesc="A Collaborative Passwords Manager"
arch=('any')
url="http://www.teampass.net/"
license=(AGPL3)
depends=(mysql php php-mcrypt)
optdepends=()
source=(https://github.com/nilsteampassnet/TeamPass/archive/${pkgver}.zip)
md5sums=('805019e797fa9df80a523d1ac42227d3')

package() {
  cd "$srcdir"
  install -d "$pkgdir/usr/share/webapps/${pkgname}"
  install -d "${pkgdir}/etc/webapps/${pkgname}"
  cp -r ${srcdir}/TeamPass-${pkgver}/* "${pkgdir}/usr/share/webapps/teampass"
  cd "$pkgdir/usr/share/webapps/teampass"
  chown http:http install includes files upload

  # Apache configuration
  cat >"$pkgdir"/etc/webapps/${pkgname}/apache.example.conf <<EOF
Alias /teampass "/usr/share/webapps/teampass"
<Directory "/usr/share/webapps/teampass">
	AllowOverride All
	Options FollowSymlinks
	Order allow,deny
	Allow from all
	php_admin_value open_basedir "/srv/:/tmp/:/usr/share/webapps/:/etc/webapps:/usr/share/pear/"
</Directory>
EOF
}

# vim:set ts=2 sw=2 et:
