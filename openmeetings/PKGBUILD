# Contributor: Patrick Schneider <Patrick.Schneider@uni-ulm.de>
pkgname=openmeetings
pkgver=0.5.2
pkgrel=1
pkgdesc="Multi-Language Cross-Platform Customizable Web-Conferencing and Collaboration"
arch=('any')
url="http://code.google.com/p/openmeetings/"
license=('LGPL')
depends=('red5' 'mysql' 'imagemagick' 'ghostscript' 'swftools')
makedepends=('unzip')
backup=(srv/red5/$pkgname/conf/hibernate.cfg.xml)
install=$pkgname.install
_srcver=052
source=(http://openmeetings.googlecode.com/files/${pkgname}052.zip $pkgname.diff $pkgname.install)
noextract=($pkgname${_srcver}.zip)
md5sums=('1a7db5ad6bbe27f4073cb56e3d83e5e4'
         '0c3c5047a53d2dfd250e147a8311f64e'
         '0e701ae42936c4e793053a1a4b47a2f3')

build() {
  mkdir -m 775 -p "$pkgdir/srv/red5"
  cd "$pkgdir/srv/red5"

  unzip "$srcdir/$pkgname${_srcver}.zip"
  rm -rf __MACOSX
  mv $pkgname/conf/mysql_hibernate.cfg.xml $pkgname/conf/hibernate.cfg.xml

  patch -Np0 < "$srcdir/$pkgname.diff"
}

# vim:set ts=2 sw=2 et:
