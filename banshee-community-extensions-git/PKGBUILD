# Contributor: neuromante <lorenzo.nizzi.grifi@gmail.com>

pkgname=banshee-community-extensions-git
pkgver=20100222
pkgrel=1
pkgdesc="Banshee Community Extensions is a repository and project for extensions to the Banshee media player that are community contributed and maintained"
arch=('i686' 'x86_64')
url="http://gitorious.org/banshee-community-extensions"
license=('GPL')
depends=('mono' 'banshee-git' 'webkit-sharp' 'sqlite3')
makedepends=('git')
provides=()
conflicts=()
replaces=()

_gitroot="git://gitorious.org/banshee-community-extensions/banshee-community-extensions.git"
_gitname="banshee-community-extensions"

build() {
   cd ${srcdir}
  msg "Connecting to Banshee GIT server...."

  if [ -d ${srcdir}/$_gitname ] ; then
  cd $_gitname && git pull origin
  msg "The local files are updated."
  else
  git clone $_gitroot
  fi

  msg "GIT checkout done or server timeout"
  msg "Starting make..."

  cp -r $srcdir/$_gitname $srcdir/$_gitname-build
  cd $srcdir/$_gitname-build

  sh ./autogen.sh --prefix=/usr
  make || return 1
  cd $srcdir/$_gitname-build/bin
  mkdir -p $pkgdir/usr/lib/banshee-1/Extensions
  cp -a * $pkgdir/usr/lib/banshee-1/Extensions
  
}
