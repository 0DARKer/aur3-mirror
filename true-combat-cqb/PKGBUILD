pkgname=true-combat-cqb
pkgver=0.22
pkgrel=2
pkgdesc="True Combat: Elite - Close Quartiers Combat (TCE: CQB) is a completely free, realistic, team-based modification for Enemy Territory."
url="http://www.truecombatelite.com/"
arch=('i686' 'x86_64')
license=('custom')
depends=('enemy-territory' 'libstdc++5')
[[ "$CARCH" == "x86_64" ]] && depends=('enemy-territory' 'lib32-libstdc++5')
makedepends=('unzip')
source=('true-combat-cqb.desktop' 'true-combat-cqb.sh' \
'http://clan-sef.org/downloads/cqb/cqb_alpha022_win_linux.zip' 'http://hamster.servebeer.com/files/ccb_alpha022_win_linux_hotfix.zip')
md5sums=('574f90ba801f4e7cde6ab0db25a4c1f2'
         '51b6255aa66205398bcced005e065905'
         'd5428a811a5e5e374e4640188e119aeb'
         '54e1586c0e2b8ec05ba8bc06a5b73a52')

build() {
    cd $srcdir

    # Remove Unneeded Files and Directories
    rm $srcdir/cqbtest/{cgame_mp_x86.dll,qagame_mp_x86.dll,ui_mp_x86.dll}

    # Install License
    install -d $pkgdir/usr/share/licenses/$pkgname
    mv $srcdir/cqbtest/EULA_TrueCombat_CQB.txt \
        $pkgdir/usr/share/licenses/$pkgname/

    # Copy Data to Package Directory
    install -d $pkgdir/opt/enemy-territory/
    mv $srcdir/cqbtest $pkgdir/opt/enemy-territory/

    # Install Client Launcher Script 
    install -D -m 755 true-combat-cqb.sh \
        $pkgdir/usr/bin/true-combat-cqb

    # Install Desktop File
    install -D -m 644 true-combat-cqb.desktop \
        $pkgdir/usr/share/applications/true-combat-cqb.desktop
}
