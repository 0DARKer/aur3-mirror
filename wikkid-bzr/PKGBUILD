# Contributor: Georges Dubus <georges.dubus@compiletoi.net>
pkgname=wikkid-bzr
pkgver=50
pkgrel=1
pkgdesc="A wiki that is backed by Bazaar that allows local branching of the wiki for later merging. Also doesn't have any page locks and uses Bazaar's three way merging."
arch=(i686 x86_64)
url="https://launchpad.net/wikkid"
license=(AGPL)
depends=(bzr pygments python-jinja python-webob zope-interface docutils)
makedepends=(setuptools)

#We use http instead of bzr+ssh to avoid authentication problems.
_bzrtrunk=http://bazaar.launchpad.net/~wikkid/wikkid/trunk
_bzrmod=wikkid

build() {
  cd $startdir/src
  if [[ -d ${_bzrmod} ]]; then
    (rm -rf $_bzrmod)
  fi
  msg "Connecting to $_bzrtrunk bzr server...."
  bzr checkout --lightweight ${_bzrtrunk} ${_bzrmod}
  cd $startdir/src/${_bzrmod}
  python2 setup.py install --prefix'=/usr' --root=$startdir/pkg || return 1
}
