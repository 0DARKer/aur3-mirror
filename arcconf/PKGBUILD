# Maintainer: Shalygin Konstantin (kostya@opentech.ru)

pkgname='arcconf'
pkgver='1.06'
pkgrel='21062'
pkgdesc='Adaptec ARCCONF command line interface utility'
arch=('i686' 'x86_64')
url=('http://adaptec.com/')
license=('freeware')
depends=('bash')

if [[ "$CARCH" == "i686" ]]; then
  source+=("http://download.adaptec.com/raid/storage_manager/arcconf_v1_6_${pkgrel}.zip")
  sha256sums+=('fb740cb308fe8290f32b7e68f8f5bec54f9784a7377086769f2e2ec23e402ed0')

build() {
  cd "$srcdir"
  chmod 755 "$srcdir/linux/cmdline/arcconf"
  mkdir -p "$srcdir/usr/bin"
  mv "$srcdir/linux/cmdline/arcconf" "$srcdir/usr/bin"
}
fi

if [[ "$CARCH" == "x86_64" ]]; then
  source+=("http://download.adaptec.com/raid/storage_manager/arcconf_v1_6_${pkgrel}.zip")
  sha256sums+=('fb740cb308fe8290f32b7e68f8f5bec54f9784a7377086769f2e2ec23e402ed0')

build() {
  cd "$srcdir"
  mkdir -p "$srcdir/usr/bin"
  chmod 755 "$srcdir/linux_x64/cmdline/arcconf"
  mv "$srcdir/linux_x64/cmdline/arcconf" "$srcdir/usr/bin"
}
fi

package() {
  cp -dpr --no-preserve=ownership "$srcdir/usr" "$pkgdir"
}
