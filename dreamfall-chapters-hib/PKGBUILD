
# Maintainer: Arvedui <arvedui@posteo.de>
pkgname=dreamfall-chapters-hib
pkgver=r20140122+34548e
pkgrel=3
pkgdesc="Dreamfall Chapters, humble bundle version"
arch=('x86_64')
url="http://redthreadgames.com/"
license=('custom:commercial')
depends=(glu gtk2)
makedepends=(unzip)

DLAGENTS+=('hib::/usr/bin/echo "Could not find %u. Manually download it to \"$(pwd)\", or set up a hib:// DLAGENT in /etc/makepkg.conf."; exit 1')
source=(hib://DreamfallChapters_Linux_x64.zip
        dreamfallchapters.desktop)
noextract=(DreamfallChapters_Linux_x64.zip)
md5sums=(34548ee6340ddcecf2e2ae0352e1af44
         1223c964a9d19b4960df9772d5a816e2)
# compressing would take ages otherwise
PKGEXT='.pkg.tar'


prepare() {
    cd "$srcdir"
    unzip DreamfallChapters_Linux_x64.zip
    mkdir dreamfallchapters
    bsdtar -xf "Linux_x64/Dreamfall Chapters.tar.gz" -C dreamfallchapters

}


package() {
    mkdir -p $pkgdir/{opt/,usr/bin/}
    cp -r $srcdir/dreamfallchapters $pkgdir/opt/dreamfallchapters
    ln -s "/opt/dreamfallchapters/Dreamfall Chapters" $pkgdir/usr/bin/dreamfallchapters

    install -Dm644 dreamfallchapters.desktop $pkgdir/usr/share/applications/dreamfallchapters.desktop
    install -Dm644 "$srcdir/dreamfallchapters/Dreamfall Chapters_Data/Resources/UnityPlayer.png" $pkgdir/usr/share/pixmaps/dreamfallchapters.png


}
