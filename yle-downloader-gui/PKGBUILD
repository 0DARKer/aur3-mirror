# Maintainer:  Jesse Jaara      <jesse.jaara@gmail.com>

pkgname=yle-downloader-gui
pkgver=1.0
pkgrel=1
pkgdesc="Gui for rtmpdump-yle, a app to download videos from Yle-Areena"
arch=('i686' 'x86_64')
url="http://mpartel.github.com/yle-downloader-gui/"
license=('PublicDomain')
depends=('rtmpdump-yle' 'qt')
source=(http://huulivoide.pp.fi/Arch/yle-downloader-gui-1.0.tar.xz
        http://huulivoide.pp.fi/Arch/yle-downloader-gui-icons.tar.xz
        yle-downloader-gui.desktop)
install=yle.install

build() {
  cd "${srcdir}/yle-downloader-gui-${pkgver}"

  lrelease yle-downloader-gui.pro
  qmake
  make
}

package() {
  cd "${srcdir}/yle-downloader-gui-${pkgver}"

  cp ../*-icons/* ./

  mkdir -p          "${pkgdir}/usr/bin"
  mkdir -p          "${pkgdir}/usr/share/applications/"

  cp yle-downloader-gui  \
                    "${pkgdir}/usr/bin/"
  cp ../yle-downloader-gui.desktop \
                    "${pkgdir}/usr/share/applications/"

  for png in 16 22 32 48 256; do
     mkdir -p       "${pkgdir}/usr/share/icons/hicolor/${png}x${png}/apps"
     cp ${png}.png  "${pkgdir}/usr/share/icons/hicolor/${png}x${png}/apps/yle-downloader-gui.png"
  done

  mkdir -p       "${pkgdir}/usr/share/icons/hicolor/scaleable/apps"
  cp yle-downloader-gui.svg \
                 "${pkgdir}/usr/share/icons/hicolor/scaleable/apps/yle-downloader-gui.svg"
}
md5sums=('3d1ae9d48f0d767f7f4721b31f0a3a14'
         '34cfb65370385a774e39456cf2408c3d'
         'd4710d3cf0f2118d0ab4b21c03b82f91')
