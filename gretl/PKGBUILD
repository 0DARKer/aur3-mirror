# Maintainer: Rachele Grasshopper <rachele@logorroici.org>
# Contributor: Minh Nguyen <manehi@gmail.com>
pkgname=gretl
pkgver=1.9.14
pkgrel=3
pkgdesc="Gnu Regression, Econometrics and Time-series Library"
arch=('x86_64')
url="http://gretl.sourceforge.net/"
license=('GPL')
depends=(gtksourceview3 fftw gnuplot curl lapack mpfr unixodbc)
makedepends=(lapack gcc)
optdepends=('libgnomeui: gnome UI integration' 'libgnomeprintui: gnome print integration' 'gtk3: gretl GUI')
options=(!libtool)
source=(http://prdownloads.sourceforge.net/gretl/$pkgname-$pkgver.tar.xz $pkgname-$pkgver.patch)
md5sums=('dc5eae84b48af29b9de98a0e75b5bf05'
         'ff21c5cc314eaa6bb598554b8d8d7463')

prepare() {
	#cp "$pkgname-$pkgver.patch" "$srcdir/$pkgname-$pkgver/$pkgname-$pkgver.patch"
	cd "$srcdir/$pkgname-$pkgver"
	patch -p0 < "$srcdir/$pkgname-$pkgver.patch"
}

build() {
	cd "$srcdir/$pkgname-$pkgver"
	#./configure --prefix=/usr --enable-openmp --with-odbc
	./configure --prefix=/usr
	make
}

check() {
	cd "$srcdir/$pkgname-$pkgver"
	make check
}

package() {
	cd "$srcdir/$pkgname-$pkgver"
	make DESTDIR="$pkgdir/" install
}
