# Maintainer: Xavier Devlamynck <magicrhesus@ouranos.be>
# Contributor: Aleshus <podskale@fel.cvut.cz>

pkgname=sems
pkgver=1.2.1
pkgrel=2
pkgdesc="Free, high performance, extensible media and application server for SIP (RFC3261) based VoIP services."
url="http://iptel.org/sems"
license=(GPLv2+)
arch=('i686' 'x86_64')
depends=('speex' 'bash' 'python')
makedepends=()
optdepends=()
provides=()
conflicts=()
replaces=()
backup=()
options=()
intall=()
source=(http://ftp.iptel.org/pub/sems/sems-$pkgver.tar.gz rc.d-sems patch-Makefile.defs.patch)
md5sums=('f0545c0708849e1a723d453244c2a79e'
	 '01cbd7bc12dd94b35ef9f723156f4105'
	 'dbf2ffd36d0527a8eb24bd4f82736972')
build() {
	cd $srcdir/$pkgname-$pkgver

	msg "Patching..."
	patch Makefile.defs $srcdir/patch-Makefile.defs.patch || return 1
  
	msg "Building..."
	make all || return 1

	msg "Installing..."
	make DESTDIR=$pkgdir PREFIX="" install || return 1
	rm -rf $pkgdir/share

	install -D -m755 $srcdir/sems.rc.d $pkgdir/etc/rc.d/sems
	mv -b $pkgdir/lib/sems/ivr $pkgdir/usr/lib/sems/
	rm -rf $pkgdir/lib
}

# vim:set ts=2 sw=2 et:
