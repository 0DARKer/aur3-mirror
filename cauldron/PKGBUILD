# Maintainer: Vinzenz Vietzke <vinz at vinzv dot de>
pkgname=cauldron
pkgver=0.10.6
pkgrel=1
pkgdesc="A cross-platform desktop client for App.net."
url="https://cauldron-app.herokuapp.com/"
arch=('x86_64' 'i686')
license=('custom')
depends=('gtk2' 'alsa-lib' 'gconf' 'nss')
conflicts=('libudev.so.0')

if [ "${CARCH}" = 'x86_64' ]; then
	source=('https://files.app.net/md8vrbU8')
	md5sums=('6e14787418a9e9bdb65c79e92037b474')
elif [ "${CARCH}" = 'i686' ]; then
	source=('https://files.app.net/md9hdJsM')
	md5sums=('a3dfb70733dc9a65d87e7c8ec32bc183')
fi

source=('cauldron.png' 'cauldron.desktop' 'run-cauldron.sh')
md5sums=('0f0142efeaf7dc58753e0eb4821a73b4' '59d4fb3b411ed905b3282837d857dfc0' '149745567f0a0850e6ff0c15fe6c746d')

package() {
	install -Dm 755 "$srcdir/run-cauldron.sh" "$pkgdir/usr/bin/cauldron"

	mkdir -p "$pkgdir/opt/"
	mkdir -p "$pkgdir/usr/lib"

	cp -R "$srcdir/$pkgname/" "$pkgdir/opt/"
	ln -s "/usr/lib/libudev.so" "$pkgdir/usr/lib/libudev.so.0"

	install -Dm644 $srcdir/$pkgname/LICENSE.txt $pkgdir/usr/share/licenses/$pkgname/LICENSE.txt
	install -Dm644 $srcdir/cauldron.desktop $pkgdir/usr/share/applications/$pkgname.desktop
	install -Dm644 $srcdir/cauldron.png $pkgdir/usr/share/icons/$pkgname.png
}


