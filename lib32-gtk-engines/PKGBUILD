# Maintainer: josephgbr <rafael.f.f1@gmail.com>

_pkgbase=gtk-engines
pkgname=lib32-${_pkgbase}
pkgver=2.20.2
pkgrel=4
pkgdesc="Theme engines for GTK+ 2 (32 bit)"
arch=('x86_64')
url="http://live.gnome.org/GnomeArt"
license=('LGPL')
depends=('lib32-gtk2' "${_pkgbase}")
makedepends=('intltool' 'gcc-multilib')
options=('!libtool')
_ver=${pkgver%.*}
source=(http://ftp.gnome.org/pub/gnome/sources/${_pkgbase}/${_ver}/${_pkgbase}-${pkgver}.tar.bz2
        fix-glib-2.32.patch)
sha256sums=('15b680abca6c773ecb85253521fa100dd3b8549befeecc7595b10209d62d66b5'
            'e2d270ec07013855c5f3eaaab355d89cc12e75cb41564e90f9c145371c036667')

build() {
  export CC='gcc -m32'
  export CXX='g++ -m32'
  export PKG_CONFIG_PATH='/usr/lib32/pkgconfig'
  
  patch -p0 -i fix-glib-2.32.patch
  
  cd "${_pkgbase}-${pkgver}"
  ./configure --prefix=/usr --enable-animation --libdir=/usr/lib32
  make
}

package() {
  cd "${_pkgbase}-${pkgver}"
  make DESTDIR="${pkgdir}" install
  rm -rf "${pkgdir}/usr/share"
}
