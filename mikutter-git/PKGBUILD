# Maintainer: Mizki Suzumori <mizki9577 at gmail dot com>
pkgname=mikutter-git
pkgver=0.2.2.1318
pkgrel=1
epoch=1
pkgdesc="a moest mikutter client"
arch=('any')
url="http://mikutter.hachune.net/"
license=('GPL3')
depends=('ruby-bundler')
optdepends=('libnotify: notify support')
makedepends=('git')
provides=('mikutter')
conflicts=('mikutter' 'mikutter-svn')
source=('git://toshia.dip.jp/mikutter.git#branch=master')
md5sums=('SKIP')

pkgver() {
	cd $srcdir/mikutter
	git describe --tags
}

build() {
	cd $srcdir/mikutter
	bundle install --path=vendor/bundle
}

package() {
	mkdir $pkgdir/opt
	cp -R $srcdir/mikutter/ $pkgdir/opt
	rm -R $pkgdir/opt/mikutter/.git
	mkdir -p $pkgdir/usr/bin
	cat <<EOF > $pkgdir/usr/bin/mikutter
#!/bin/sh
ruby /opt/mikutter/mikutter.rb $@
EOF
	chmod a+x ${pkgdir}/usr/bin/mikutter
}

# vim:set ts=4 sw=4:
