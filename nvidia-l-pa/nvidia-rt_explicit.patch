--- a/nv-linux.h        2011-10-26 13:35:32.866579965 +0200
+++ b/nv-linux.h        2011-10-26 13:35:47.265117607 +0200
@@ -43,6 +43,8 @@
 #include <linux/version.h>
 #include <linux/utsname.h>
 
+#define CONFIG_PREEMPT_RT_FULL 1 
+
 #if LINUX_VERSION_CODE < KERNEL_VERSION(2, 6, 9)
 #  error This driver does not support kernels older than 2.6.9!
 #elif LINUX_VERSION_CODE < KERNEL_VERSION(2, 7, 0)
@@ -312,11 +312,7 @@
 #endif
 #endif
 
-#if defined(CONFIG_PREEMPT_RT) || defined(CONFIG_PREEMPT_RT_FULL)
-#define NV_CONFIG_PREEMPT_RT 1
-#endif
-
-#if defined(NV_CONFIG_PREEMPT_RT)
+#if defined(CONFIG_PREEMPT_RT_FULL)
 typedef raw_spinlock_t            nv_spinlock_t;
 #define NV_SPIN_LOCK_INIT(lock)   raw_spin_lock_init(lock)
 #define NV_SPIN_LOCK_IRQ(lock)    raw_spin_lock_irq(lock)
@@ -943,7 +939,7 @@
     return ret;
 }
 
-#if defined(NV_CONFIG_PREEMPT_RT)
+#if defined(CONFIG_PREEMPT_RT_FULL)
 #define NV_INIT_MUTEX(mutex) sema_init(mutex,1)
 #else
 #if !defined(__SEMAPHORE_INITIALIZER) && defined(__COMPAT_SEMAPHORE_INITIALIZER)
