diff -aur doom64ex/src/kex/CMakeLists.txt src/doom64ex/src/kex/CMakeLists.txt
--- doom64ex/src/kex/CMakeLists.txt	2014-02-13 13:16:58.280495337 +0100
+++ src/doom64ex/src/kex/CMakeLists.txt	2014-02-13 13:28:37.461754369 +0100
@@ -1,15 +1,15 @@
 cmake_minimum_required(VERSION 2.6)
 project(Doom64Ex)
 
-set(CMAKE_MODULE_PATH "${CMAKE_SOURCE_DIR}/kex/")
-find_package(ZLIB REQUIRED)
+set(CMAKE_MODULE_PATH "${CMAKE_SOURCE_DIR}")
+find_package(ZLIB REQUIRED)
 find_package(PNG REQUIRED)
 find_package(SDL REQUIRED)
 find_package(FluidSynth REQUIRED)
 find_package(SDL_net REQUIRED)
 find_package(OpenGL REQUIRED)
 
-include_directories(${CMAKE_SOURCE_DIR}/kex ${CMAKE_SOURCE_DIR}/kex/Ext ${FluidSynth_INCLUDE_DIR} ${SDL_INCLUDE_DIR} ${PNG_INCLUDE_DIR} ${OPENGL_INCLUDE_DIR})
+include_directories(${CMAKE_SOURCE_DIR} ${CMAKE_SOURCE_DIR}/Ext ${FluidSynth_INCLUDE_DIR} ${SDL_INCLUDE_DIR} ${PNG_INCLUDE_DIR} ${OPENGL_INCLUDE_DIR})
 
 # Get around a issue
 add_definitions(-Ddprintf=_dprintf -D__cdecl=)
@@ -49,6 +49,7 @@
 	dgl.c
 	f_finale.c
 	g_actions.c
+	g_demo.c
 	g_game.c
 	g_settings.c
 	gl_draw.c
@@ -63,7 +64,7 @@
 	i_png.c
 	i_system.c
 	i_video.c
-	i_xinput.c
+#	i_xinput.c
 	in_stuff.c
 	info.c
 	m_cheat.c
diff -aur doom64ex/src/kex/g_demo.c src/doom64ex/src/kex/g_demo.c
--- doom64ex/src/kex/g_demo.c	2014-02-13 13:16:57.760501838 +0100
+++ src/doom64ex/src/kex/g_demo.c	2014-02-13 13:30:19.866474133 +0100
@@ -25,9 +25,11 @@
 //
 //-----------------------------------------------------------------------------
 
+#include <unistd.h>
+#include <dirent.h>
+
 #include "doomdef.h"
 #include "doomstat.h"
-#include "i_opndir.h"
 #include "z_zone.h"
 #include "p_tick.h"
 #include "g_local.h"
diff -aur doom64ex/src/kex/i_audio.c src/doom64ex/src/kex/i_audio.c
--- doom64ex/src/kex/i_audio.c	2014-02-13 13:16:57.370506714 +0100
+++ src/doom64ex/src/kex/i_audio.c	2014-02-13 13:16:58.479492849 +0100
@@ -56,7 +56,7 @@
 #ifdef _WIN32
 CVAR_CMD(s_driver, dsound)
 #else
-CVAR_CMD(s_driver, sndio)
+CVAR_CMD(s_driver, pulseaudio)
 #endif
 {
     char* driver = cvar->string;
diff -aur doom64ex/src/kex/i_audio.h src/doom64ex/src/kex/i_audio.h
--- doom64ex/src/kex/i_audio.h	2014-02-13 13:16:57.371506701 +0100
+++ src/doom64ex/src/kex/i_audio.h	2014-02-13 13:16:58.479492849 +0100
@@ -25,7 +25,7 @@
 
 // 20120107 bkw: Linux users can change the default FluidSynth backend here:
 #ifndef _WIN32
-#define DEFAULT_FLUID_DRIVER "sndio"
+#define DEFAULT_FLUID_DRIVER "pulseaudio"
 
 // 20120203 villsa: add default for windows
 #else
diff -aur doom64ex/src/kex/m_menu.c src/doom64ex/src/kex/m_menu.c
--- doom64ex/src/kex/m_menu.c	2014-02-13 13:16:57.756501888 +0100
+++ src/doom64ex/src/kex/m_menu.c	2014-02-13 13:22:24.542416502 +0100
@@ -4514,6 +4514,7 @@
         return false;
     }
 
+/* Doom64EX uses Microsoft's XInput for controller support
     switch(ch) {
     case BUTTON_DPAD_UP:
         ch = KEY_UPARROW;
@@ -4539,7 +4540,7 @@
     case BUTTON_B:
         ch = KEY_DEL;
         break;
-    }
+    }*/
 
     if(MenuBindActive == true) { //key Bindings
         if(ch == KEY_ESCAPE) {
Only in src/doom64ex/src/kex: m_menu.c.orig
Only in src/doom64ex/src/kex: m_menu.c.rej
diff -aur doom64ex/src/kex/version.h src/doom64ex/src/kex/version.h
--- doom64ex/src/kex/version.h	2014-02-13 13:16:57.760501838 +0100
+++ src/doom64ex/src/kex/version.h	2014-02-13 13:30:29.708351093 +0100
@@ -2,4 +2,4 @@
 // GENERATED BY SubWCRev
 //
 
-#define PACKAGE_VERSION "1269"
+#define PACKAGE_VERSION "1270"
