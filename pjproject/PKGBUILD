# Maintainer: Xavier Devlamynck <magicrhesus@ouranos.be>

pkgname=pjproject
pkgver=1.8.10
pkgrel=1
pkgdesc="Open source SIP stack and media stack"
arch=('i686' 'x86_64')
url="http://www.pjsip.org/"
license=('GPL')
depends=()
makedepends=('alsa-lib' 'e2fsprogs' 'python')
install=pjproject.install
source=(http://www.pjsip.org/release/${pkgver}/pjproject-${pkgver}.tar.bz2
        python2.patch)
md5sums=('c72db8c4794e8d236f8ec0f9b847ec19'
        '2c41dca3a6299e708d266adf57b1f6e0')

build() {
  cd ${srcdir}/pjproject-${pkgver}

  patch -p1 -i ${srcdir}/python2.patch

  ./configure --prefix=/usr --disable-debug --enable-ssl CFLAGS="-fPIC"
  make dep 
  make 

  cd pjsip-apps/src/python/
  make

  rm -rf $pkgdir/usr/include/{portaudio.h,speex}
}

package() {
  cd $srcdir/pjproject-${pkgver}
  make prefix=/usr DESTDIR="${pkgdir}" install
}

# vim:set ts=2 sw=2 et:
