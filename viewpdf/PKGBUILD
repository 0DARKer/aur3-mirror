# Maintainer: Hoàng Đức Hiếu <arch@zahe.me>
# Contributor: Marcos Heredia <chelqo@gmail.com>

pkgname=viewpdf
pkgver=0.6.0
pkgrel=1
pkgdesc="ViewPDF shows PDF files, clearly indicating annotations and possible mistakes"
url="http://www.qtrac.eu/viewpdf.html"
license=('GPL')
arch=('i686' 'x86_64')
depends=('poppler-qt')
source=("http://www.qtrac.eu/$pkgname-$pkgver.tar.gz" "viewpdf.desktop")
md5sums=('ddeac14d40e50b5b6a635c6a12e5973b' '7705b9933c9828f779e4b413227b9ad4')

build () {
    cd "$srcdir"/$pkgname-$pkgver
    lrelease viewpdf.pro
    qmake
    make
}

package() {
    cd "$srcdir"/$pkgname-$pkgver/
    install -m 755 -D viewpdf "$pkgdir"/usr/bin/viewpdf
    install -m 644 -D viewpdf.1 "$pkgdir"/usr/share/man/man1/viewpdf.1
    docdir=$pkgdir/usr/share/doc/$pkgname-$pkgver
    pngdir=$pkgdir/usr/share/pixmaps
    appdir=$pkgdir/usr/share/applications
    mkdir -p $docdir $pngdir $appdir
    install -m 644 CHANGES README help.html $docdir/
    install -m 644 images/icon.png $pngdir/$pkgname.png
    install -m 644 ../../viewpdf.desktop $appdir/
}
