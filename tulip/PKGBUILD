# $Id: PKGBUILD,v 1.12 2003/11/06 08:26:13 dorphell Exp $
# Maintainer: Thomas Aynaud <taynaud at gmail dot com>
pkgname=tulip
pkgver=3.5.0 # note: if the pkgver had been '0.99-10' then use an underscore. like '0.99_10'
pkgrel=3
pkgdesc='Tulip is an information visualization framework dedicated to the analysis and visualization of relational data Tulip aims to provide the developer user with a complete library software supporting the design of interactive information visualization'
arch=(i686 x86_64)
url="http://www.tulip-software.org"
license=('GPL')
groups=
provides=
depends=('python2' 'ftgl' 'qscintilla' 'qt' 'libxml2' 'glew' 'freetype2')
makedepends=('cmake')
conflicts=
replaces=
backup=
install=
source=("http://sourceforge.net/projects/auber/files/$pkgname/$pkgname-$pkgver/$pkgname-$pkgver-src.tar.gz/download")
md5sums=('e09d27583fdfef23258a19fcdef412d2')

build() {
  cd $srcdir/$pkgname-$pkgver-src
  mkdir -p build
  cd build 
  cmake .. -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$pkgdir/opt/$pkgname || return 1
  make || return 1
  make install
  #tulip is installed in /opt because of all the dependencies build with it.
  #we add link and patch tulip to handle directory change
  mkdir -p $pkgdir/usr/bin
  mv $pkgdir/opt/$pkgname/bin/tulip $pkgdir/opt/$pkgname/bin/tulip.bak
  sed "s/THISDIR\=\$(dirname \$0)/THISDIR=\$(dirname \$(readlink -f \$0))/" $pkgdir/opt/$pkgname/bin/tulip.bak > $pkgdir/opt/$pkgname/bin/tulip
  chmod +x $pkgdir/opt/$pkgname/bin/tulip
  ln -s /opt/$pkgname/bin/tulip $pkgdir/usr/bin/tulip  
}