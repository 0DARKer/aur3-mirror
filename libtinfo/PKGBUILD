# Maintainer: Alexej Magura <agm2819*gmail*>
#
#
pkgname=libtinfo
pkgver=5
pkgrel=3
pkgdesc="symlink to ncurses for use in cuda and other packages"
arch=('any')
url="http://www.gnu.org/software/ncurses/"
license=('unknown')
[[ $CARCH = 'i686' ]] && depends=('ncurses')
[[ $CARCH = 'x86_64' ]] && depends=('ncurses') && ! (cat /etc/pacman.conf | sed '/\[multilib/!d; /^#/d' | grep '.' -q) && depends+=('lib32-ncurses')
#source=("")
#md5sums=('')

package() {
  install -d "$pkgdir"/usr/lib
  if [ $CARCH = 'x86_64' ]; then
    # prevents multilib stuff from being installed on pure 64-bit systems
    if ! [[ $(echo ${depends[@]} | wc -w) > 1 ]]; then
      install -d "$pkgdir"/usr/lib32
      ln -s /usr/lib32/libncurses.so."$pkgver" -T "$pkgdir"/usr/lib32/libtinfo.so."$pkgver" # comment this line out if you have Cuda installed.so."$pkgver"
      ln -s /usr/lib32/libtinfo.so."$pkgver" -T "$pkgdir"/usr/lib32/libtinfo.so
    fi
  fi
  # only create a symlink for /usr/lib/libtinfo.so."$pkgver" if Cuda is _not_ installed.
  (pacman -Qsq cuda | sed '/cuda/!d' | grep '.+' -q) || ln -s /usr/lib/libncurses.so."$pkgver" -T "$pkgdir"/usr/lib/libtinfo.so."$pkgver"
  ln -s /usr/lib/libtinfo.so."$pkgver" -T "$pkgdir"/usr/lib/libtinfo.so
}
