# Maintainer: trett <somebody[at]foo[dot]tld>
pkgname=stopix
pkgver=git
pkgrel=1
pkgdesc="The Print Screen program with upload to pix.academ.org."
url="https://github.com/trett/stopix"
arch=('i686' 'x86_64')
license=('GPLv3')
depends=(qt)
optdepends=()
makedepends=('git' 'qconf')
conflicts=('stopix')
replaces=()
backup=()
#install='stopix.install'
source=()
md5sums=('35a23331dc221b36da54a64d0be22e99')
 
build() {
  msg "Connecting to GIT server..."
  if [ -d ${srcdir}/${pkgname} ] ; then   
  cd "${srcdir}/${pkgname}" && make clean && git pull origin master   
  msg "The local files are updated."
  make
  else
  git clone git://github.com/trett/stopix.git  --depth=1
  cp -r "${srcdir}/${pkgname}/${pkgname}" "${srcdir}"
  rm -rf "${srcdir}/${pkgname}/${pkgname}"
  fi
  msg "GIT checkout done or server timeout"
  cd "${srcdir}/${pkgname}"  
  qmake -makefile -unix -o Makefile "DESTDIR=$startdir/pkg/usr/bin/" stopix.pro 
  make
}
 
package() {
  cd "${srcdir}/${pkgname}"
  make DESTDIR="${pkgdir}" install
  #install -Dm644 COPYING "$pkgdir/usr/share/licenses/$pkgname/COPYING"
}
 
# vim:set ts=2 sw=2 et:
