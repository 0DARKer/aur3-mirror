# Maintainer: Gicu Gorodenco <cyclopsihus@gmail.com>
# Contributor: MaLiK <malik_cjm@o2.pl>
# Contributor: dpevp <daniel.plaza.espi@gmail.com>
# Contributor: Magnus Therning <magnus@therning.org>

pkgname=pidgin-sipe
pkgver=1.11.2
pkgrel=2
pkgdesc="An Open Implementation of SIP/Simple protocol for Live Communications Server 2003/2005/2007 - Pidgin plugin"
arch=(i686 x86_64)
license=('GPL')
url="http://sipe.sourceforge.net/"
depends=('glib2' 'gtk2' 'gmime' 'gettext' 'pidgin')
makedepends=('pkgconfig' 'intltool' 'patch')
options=('!libtool')
source=(
	http://downloads.sourceforge.net/project/sipe/sipe/${pkgname}-${pkgver}/${pkgname}-${pkgver}.tar.bz2
	sipe-gcc-4.6.patch
	)
sha256sums=(
	'90c424942cad50f271367acb0ddcf8e5c648d1aed1f395200e5d909515ce7ae9'
	'17e36e7ccced8b5751fe51637f70c68849eac6a34a0e0b6588ffce3853629022'
	)

build() {
	cd ${srcdir}/${pkgname}-${pkgver}
	patch -p1 -i ${srcdir}/sipe-gcc-4.6.patch

	export CFLAGS="${CFLAGS} -Werror=unused-but-set-variable"
	./configure --prefix=/usr
	make || return 1
	make DESTDIR=${pkgdir} install || return 1
}
