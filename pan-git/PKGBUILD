pkgname=pan-git
_gitname="pan2"
pkgver=20110618
pkgrel=1
pkgdesc="Pan is a Usenet newsreader that's good at both text and binaries. Temporary bugfix version by K. Haley. With nzb gui patch by Heinrich Mueller."
url="http://github.com/lostcoder/pan2"
_gitroot="git://github.com/lostcoder/pan2.git"
arch=('i686' 'x86_64')
license=('GPL')
depends=( 'autoconf' 'automake' 'gmime' 'gtkspell' 'gnome-common' 'gtk3')
makedepends=('git' 'intltool')
conflicts=('pan' 'pan-svn')

build() {
	export LC_ALL="C"
	cd ${srcdir}
	msg "Connecting GIT server...."
	
	if [ -d ${srcdir}/${_gitname} ]
	then				
		rm -r ${_gitname}-build
		cd ${_gitname}  
		git pull
		msg "The local files are updated."
	else
		git clone $_gitroot
		cd ${_gitname}
		git checkout --track origin/testing
	fi
	
	msg "GIT checkout done or server timeout"
	msg "Starting installing..."
	cd ${srcdir}
	git clone ${_gitname} ${_gitname}-build
	cd ${srcdir}/$_gitname-build

	./autogen.sh --prefix=/usr
	make || return 1
	make prefix=${pkgdir}/usr install
}
