pkgname=pan-git
_gitname="pan2"
pkgver=20110223
pkgrel=1
pkgdesc="Pan is a Usenet newsreader that's good at both text and binaries. Temporary bugfix version by K. Haley"
url="http://github.com/lostcoder/pan2"
_gitroot="git://github.com/lostcoder/pan2.git"
arch=('i686' 'x86_64')
license=('GPL')
depends=('gmime' 'gtkspell' 'gnome-common')
makedepends=('git' 'intltool')
conflicts=('pan' 'pan-svn')

build() {
	cd ${srcdir}
	msg "Connecting GIT server...."
	
	if [ -d ${srcdir}/$_gitname ]
	then
		cd $_gitname && git pull origin
		msg "The local files are updated."
	else
		git clone $_gitroot
	fi
	
	msg "GIT checkout done or server timeout"
	msg "Starting installing..."
	
	git clone $_gitname $_gitname-build
	cd ${srcdir}/$_gitname-build

	./autogen.sh --prefix=/usr
	make || return 1
	make prefix=${pkgdir}/usr install
}
