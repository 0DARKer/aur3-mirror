# Maintainer: Igor Kushnir <igorkuo at gmail dot com>
pkgname=venturous
pkgver=1.1.1
pkgrel=2
pkgdesc="Random playback manager for Audacious"
arch=('i686' 'x86_64')
url="https://github.com/vedgy/venturous"
license=('GPL3')
depends=('qt4' 'audacious')
makedepends=('git' 'cmake')
optdepends=('libnotify: desktop notifications'
            'libcue: Audacious CUE playlist format support')
install="$pkgname.install"
_gitname="venturous"
_builddir="build"

prepare() {
  git clone "$url.git"
  cd "${_gitname}"
  # If you want to install latest development version (can be unstable), just
  # comment out the next line (# git checkout "tags/v$pkgver").
  git checkout "tags/v$pkgver"
}

build(){
  cd "$srcdir/${_gitname}"
  # qt4 is used by default because of font rendering issues in qt5.
  # If you prefer qt5, change qt4 dependency to qt5-base and
  # append " qt5" to the next line (./update_and_configure_submodules qt5).
  ./update_and_configure_submodules
  cd "${_builddir}"
  cmake -DCMAKE_INSTALL_PREFIX=/usr ..
  make
}

package() {
  cd "$srcdir/${_gitname}/${_builddir}"
  make DESTDIR="$pkgdir/" install
}
