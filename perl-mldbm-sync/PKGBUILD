# Contributor: d'Ronin <daronin@2600.com>

pkgname=perl-mldbm-sync
pkgver=0.30
pkgrel=1
pkgdesc="A perl module for safe concurrent access to MLDBM databases"
depends=('perl' 'glibc' 'perl-mldbm')
license=('GPL' 'PerlArtistic')
url="http://cpan.org/modules/by-module/MLDBM"
source=(http://cpan.org/modules/by-module/MLDBM/MLDBM-Sync-$pkgver.tar.gz)
md5sums=('1bb4e8d4bd6a30eee3f1126956409321')
options=('!emptydirs')
arch=(i686 x86_64)
build()
{
  cd $startdir/src/MLDBM-Sync-$pkgver

  perl Makefile.PL || return 1
  make || return 1
  make DESTDIR=$startdir/pkg install || return 1

  # Change installation directory to current and remove directory that contains perllocal.pod
  mv $startdir/pkg/usr/lib/perl5/site_perl/?.?.? $startdir/pkg/usr/lib/perl5/site_perl/current
  rm -r $startdir/pkg/usr/lib/perl5/?.?.?
}
