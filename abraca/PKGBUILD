# Contributor: Anton Bazhenov <anton.bazhenov at gmail>
# Contributor: Johan Slikkie <johan@slikkie.nl>
# Maintainer: J. W. Birdsong <jwbirdsong AT gamil DOT com> 

pkgname=abraca
pkgver=0.5.0
pkgrel=1
pkgdesc="A GTK2 client for the XMMS2 music player, with a focus on collections"
arch=('i686' 'x86_64')
url="http://abraca.xmms.se/"
license=('GPL')
depends=('gtk2' 'xmms2' 'libgee' 'hicolor-icon-theme')
makedepends=('scons' 'vala' 'python' 'gettext')
install=$pkgname.install
md5sums=('6dda77e1eb2d74d045fb90f4987f3b22'
'fa79c74f0b75df4409cec5c1864b42a8')
source=(http://abraca.xmms.se/attachments/download/128/$pkgname-$pkgver.tar.bz2
        $pkgname.patch)

build() {
  cd "$srcdir"/$pkgname-$pkgver

  # scons and install
  patch -Np0 -i ../$pkgname.patch || return 1
  scons PREFIX=/usr || return 1
  scons DESTDIR="$pkgdir" install || return 1

  # install icons
  mkdir -p "$pkgdir"/usr/share/icons/hicolor/scalable/apps
  mv -f "$pkgdir"/usr/share/icons/{,hicolor/scalable/apps/}$pkgname.svg
  for _width in '16' '32' '128' '192'; do
    install -Dm644 data/$pkgname-${_width}.png \
      "$pkgdir"/usr/share/icons/hicolor/${_width}x${_width}/apps/$pkgname.png
  done
}
