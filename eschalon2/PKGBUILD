# Contributor: Artificial Intelligence <polarbeardk@gmail.com>

pkgname=eschalon2
pkgver=1.04
pkgrel=1
pkgdesc="Turn-based RPG. Eschalon: Book II  is the sequel to 2007â€™s award winning RPG Eschalon: Book I, although no previous experience is needed to play and enjoy Book II."
arch=('i686' 'x86_64')
url='http://basiliskgames.com/eschalon-book-ii'
license=('custom: "commercial"')
install=eschalon2.install
if [ "$CARCH" = "x86_64" ]; then
        depends=('lib32-freetype2' 'lib32-libxxf86vm' 'lib32-mesa' 'lib32-gcc-libs')
else
        depends=('freetype2' 'libxxf86vm' 'mesa' 'gcc-libs')
fi
install=eschalon2.install
source=("http://dl.dropbox.com/u/6810192/eschalon_book_2_v104.tar.gz"

'EschalonBook2.png' 
'eschalon2.desktop' 
'eschalon2.launcher')
md5sums=('6a1bcc2bcecb485be5ca49dfb6e7971f' '536ccc508dfc14e89cb87c6d6e35a675' '5f10d62310119e64659c24bc01aa16b9' '23cbeb1f0c444a48dc5c4a0bf639b21b')


build() {
    cd $srcdir  || return 1

# Create Destination Directory
    install -d $pkgdir/opt/Eschalon2 || return 1


# Extract Game 
    bsdtar -xf $srcdir/eschalon_book_2_v104.tar.gz || return 1

# Install the data
    cp -r $srcdir/eschalon_book_2/* $pkgdir/opt/Eschalon2 || return 1


# Install Icon
    install -D -m 644 $srcdir/EschalonBook2.png \
        $pkgdir/usr/share/pixmaps/EschalonBook2.png || return 1

# Install Launcher
    install -D -m 644 $srcdir/eschalon2.desktop \
        $pkgdir/usr/share/applications/eschalon2.desktop || return 1


# Install Game Launcher
    install -D -m 755 $srcdir/eschalon2.launcher \
        $pkgdir/usr/bin/eschalon2 || return 1
  
  
# Install License
    install -D -m 644 $srcdir/eschalon_book_2/license.txt \
        $pkgdir/usr/share/licenses/$pkgname/license.txt || return 1

# Set groupship to :games
    chown -R :games $pkgdir/opt/Eschalon2 || return 1
    chmod -R g+rwX $pkgdir/opt/Eschalon2 || return 1
}