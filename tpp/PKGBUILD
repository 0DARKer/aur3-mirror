# Maintainer: Bersam Karbasion <bersam.k@gmail.com>
# Contributor: junglepeanut <jungle1peanut1@hotmail.com>

pkgname=tpp
pkgver=1.3.1
pkgrel=2
pkgdesc="A text presentation program in ncurses, LaTeX, or text."
arch=(any)
url="http://www.ngolde.de/tpp.html"
license=('GPL')
depends=('ncurses' 'ruby-ncurses' 'ruby>=1.8')
source=("http://www.ngolde.de/download/$pkgname-$pkgver.tar.gz"
	    'Makefile')
md5sums=(35eebb38497e802df1faa57077dab2d1
         5a3bbd7880dd316ce367fc09b6b101ba)

prepare() {
	cd "$srcdir/$pkgname-$pkgver/examples"
	for tppfile in *.tpp; do
	  iconv -f ISO-8859-1 -t UTF-8 -o $tppfile.new $tppfile && \
	  touch -r $tppfile $tppfile.new && \
	  mv $tppfile.new $tppfile
	done
}

package() {
	make prefix=$pkgdir/usr install
}

