# Maintainer: Daniel YC Lin <dlin <at> gmail.com>
# Contributor: sssslang <xofyarg@gmail.com>
# Previous maintainer:  kumkee <kumkee@gmail.com>
pkgname=ccal
pkgver=2.5.2
pkgrel=5
pkgdesc="A console program which writes a calendar together with Chinese calendar to standard output."
arch=('i686' 'x86_64')
url="http://ccal.chinesebay.com/ccal/ccal.htm"
license="GPL"
depends=('gcc-libs' 'bash')
makedepends=('gcc')
source=(http://ccal.chinesebay.com/ccal/$pkgname-$pkgver.tar.gz)
md5sums=('93ba6c4af760bcef24aec7d483242b2b')

build() {
  cd $srcdir/$pkgname-$pkgver
  # dlin patch for gcc 4.6.2
  sed -i '21a #include <stddef.h>' htmlmonth.h
  make
}
package() {
  cd $srcdir/$pkgname-$pkgver
  mkdir -p $pkgdir/{usr/bin,usr/share/man/man1}
  install -c ccal ../../pkg/usr/bin
  install -c ccalpdf ../../pkg/usr/bin
  install -c -m 0644 ccal.1 $pkgdir/usr/share/man/man1
  install -c -m 0644 ccalpdf.1 $pkgdir/usr/share/man/man1
}
