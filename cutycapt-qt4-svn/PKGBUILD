# Maintainer:  trashstar <trash@ps3zone.org>
# Contributor: Evan Teitelman <teitelmanevan at gmail dot com>
# Contributor: Renan Fernandes <renan@kauamanga.com.br>

pkgname=cutycapt-qt4-svn
pkgver=9
pkgrel=1
pkgdesc="A Qt and WebKit based command-line utility that captures WebKit's rendering of a web page."
arch=('any')
url="http://cutycapt.sourceforge.net/"
license=('GPL')
depends=('qtwebkit')
makedepends=('subversion')
provides=('cutycapt')
conflicts=('cutycapt')
source=('cutycapt.patch')
md5sums=('29ee690d164564a21bad3cfa30fef5a7')
_svntrunk="svn://svn.code.sf.net/p/cutycapt/code/"
_svnmod="cutycapt"

build() {
	svn co $_svntrunk "${srcdir}/$_svnmod"
	msg "SVN checkout done or server timeout"
	cd "${srcdir}/${_svnmod}/CutyCapt"

	# The file we are patching has crlf line endings so we gave the patch file
	#  CRLF line endings and tell patch to not convert the patch line endings
	#  back to LF by passing it the '--binary' flag. There may be a better way
	#  to do this.
	patch --binary -Np0 < "${srcdir}/cutycapt.patch"

	qmake-qt4
	make
}

package() {
	cd "${srcdir}/${_svnmod}/CutyCapt"
	install -m755 -d "${pkgdir}/usr/bin"
	install -m755 "CutyCapt" "${pkgdir}/usr/bin/"
}
