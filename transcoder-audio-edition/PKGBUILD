# Maintainer: iTwenty <jaydeepmjoshi@gmail.com>

pkgname=transcoder-audio-edition
pkgver=0.0.5
pkgrel=1
pkgdesc="Audio converter for Linux using GTK+ and ffmpeg."
arch=('i686' 'x86_64')
url="http://transcoderae84.sourceforge.net/"
license=('GPL3')
depends=('gtk2')


if [ "${CARCH}" = 'x86_64' ]; then
  source=(http://downloads.sourceforge.net/sourceforge/transcoderae84/TranscoderAudioEdition_${pkgver}_amd64.tar.gz)
  md5sums=('7c42e8f8e30706e944f4ddae77a9eb9e')
elif  [ "${CARCH}" = 'i686' ]; then
  source=(http://downloads.sourceforge.net/sourceforge/transcoderae84/TranscoderAudioEdition_${pkgver}_i386.tar.gz)
  md5sums=('1d7cecd58a8049b173d3bc7463683715')
fi

build() {
cd $srcdir/TranscoderAudioEdition

# Compile and install transcoder
./compile.sh
mkdir -p $pkgdir/usr/share/transcoderae
install -Dm755 Transcoder $startdir/transcoderae_start $pkgdir/usr/share/transcoderae

# Install start script to /usr/bin/ to show up in launchers like dmenu
install -Dm755 $startdir/transcoderae_start $pkgdir/usr/bin/transcoderae_start


# Install ffmpeg and libraries that come bundled with Transcoder because ffmpeg from Arch repository isn't compatible!
install -Dm755 ffmpeg $pkgdir/usr/share/transcoderae/ffmpeg
cp -R data/ libs/ $pkgdir/usr/share/transcoderae

# Install desktop entry
install -Dm644 $startdir/transcoder.desktop $pkgdir/usr/share/applications/transcoderae.desktop
install -Dm644 data/transcoder.png $pkgdir/usr/share/pixmaps/transcoderae.png
}
