#Maintainer: Alex Brinister (alex_brinister@yahoo.com)
pkgname=gdb-powerpc-wrs-vxworks
pkgver=7.5.1
pkgrel=5
pkgdesc="GDB for the VxWorks 6.3 GCC Toolchain"
arch=('i686' 'x86_64')
provides=('gdb-powerpc-wrs-vxworks')
url="http://firstforge.wpi.edu/sf/projects/c--11_toochain"
license=('GPL')
depends=('gdb' 'wrs-vxworks-headers')
options=('!strip' 'libtool' '!zipman')
source=(http://ftp.gnu.org/gnu/gdb/gdb-"$pkgver".tar.bz2)
sha512sums=('23b240f0ca9376dfc2fdeb79e725a3784841d1f787db9f7ca62a5e2f824ddd8b2d5fb3450e19dd8fee79589e3b0a5fe638eaa35966363c78c82711731c26dc47')

_gdb_name="gdb-$pkgver"
build() {
	cd $srcdir
	mkdir build && cd build
	../$_gdb_name/configure \
		--prefix=/usr \
		--target=powerpc-wrs-vxworks \
		--disable-nls
	make -j$(nproc) || return 1
}

package() {
  cd "$srcdir/build"
	make -j$(nproc) DESTDIR=$pkgdir install || return 1

	rm -v $pkgdir/usr/lib/libiberty.a
	rm -rv $pkgdir/usr/share/info
	rm -rv $pkgdir/usr/include
	rm -rv $pkgdir/usr/share/gdb
}

# vim:set ts=2 sw=2
