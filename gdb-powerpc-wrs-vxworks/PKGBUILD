#Maintainer: Alex Brinister (alex_brinister@yahoo.com)
pkgname=gdb-powerpc-wrs-vxworks
pkgver=7.6.1
pkgrel=1
pkgdesc="GDB for the VxWorks 6.3 GCC Toolchain"
arch=('i686' 'x86_64')
provides=('gdb-powerpc-wrs-vxworks')
url="http://firstforge.wpi.edu/sf/projects/c--11_toochain"
license=('GPL')
depends=('gdb' 'wrs-vxworks-headers')
options=('!strip' 'libtool' '!zipman' 'staticlibs')
source=(http://ftp.gnu.org/gnu/gdb/gdb-"$pkgver".tar.bz2)
sha512sums=('ca42f003073d35cde42b43efe12f42888b39f2fc4b55f7df9faca2c8381a9329f19bf9366fff0af3ae59711aafaf9b4a33a15cb73a531c0c046b8ada98ed774b')

_gdb_name="gdb-$pkgver"
build() {
	cd $srcdir
	mkdir build && cd build
	../$_gdb_name/configure \
		--prefix=/usr \
		--target=powerpc-wrs-vxworks \
		--disable-nls
	make -j$(nproc) || return 1
}

package() {
  cd "$srcdir/build"
	make -j$(nproc) DESTDIR=$pkgdir install || return 1

	rm -v $pkgdir/usr/lib/libiberty.a
	rm -rv $pkgdir/usr/share/info
	rm -rv $pkgdir/usr/include
	rm -rv $pkgdir/usr/share/gdb
}

# vim:set ts=2 sw=2
