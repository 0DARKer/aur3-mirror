# Maintainer: Kirill Duborenko <k.duborenko@gmail.com>

pkgname=robomongo
pkgver=0.7.0
pkgrel=1
pkgdesc="Shell-centric crossplatform opensource MongoDB management tool."
arch=("x86_64")
url="http://www.robomongo.org/"
license=('unknown')
depends=("qt4" "pcre" "qjson" "qscintilla")

md5sums=('4624b07ead88b259c0057921f7b17fea'
         '99b7e2da938f17646e80634388587c6d'
         '0e55099f03a6094da82141641584969e')

source=("https://github.com/paralect/robomongo/archive/v${pkgver}.tar.gz"
        "build-script.patch"
        "rc-script-name.patch")

build() {
    patch -p1 -d robomongo-${pkgver}/ < build-script.patch
    patch -p1 -d robomongo-${pkgver}/ < rc-script-name.patch
    ln -s `pwd`/robomongo-${pkgver}/libs/unix-amd64-debug `pwd`/robomongo-${pkgver}/libs/unix-amd64-release
    cd robomongo-${pkgver}/build
    ./build.sh -r
}

package() {
    install -D -m755 $srcdir/robomongo-${pkgver}/target/release/app/out/robomongo $pkgdir/usr/bin/robomongo 
}

