#Maintainer: Nathan O <ndowens04 at gmail dot com>
pkgname=acpica
pkgver=20110413
pkgrel=1
pkgdesc="Provides an operating system (OS)-independent reference implementation of the ACPI"
url="http://www.acpica.org"
arch=('i686' 'x86_64')
depends=('glibc')
makedepends=('bison' 'gcc')
license=("custom:intel")
source=("http://www.acpica.org/download/${pkgname}-unix-${pkgver}.tar.gz" "LICENSE" "Makefile.patch")
md5sums=('ef3fe49adce54c836b02d54241941817'
         '2c0478c2c880b4b323fe1d081f6d8951'
         '83a4faa5823c4d6c6b91ab10231d0737')

package() {
  cd ${srcdir}/acpica-unix-${pkgver}/compiler

  #Patch Makefile since it gives build errors
  patch -Ni $srcdir/Makefile.patch

  ## iASL
  install -d ${pkgdir}/usr/{bin,share/licenses/${pkgname}}
  make 
  install -Dm755 iasl \
	  ${pkgdir}/usr/bin/iasl

  ## AcpiExec
  cd ${srcdir}/acpica-unix-${pkgver}/tools/acpiexec
  make clean
  make 
  install -Dm755 acpiexec \
	  $pkgdir/usr/bin/acpiexec

  ## AcpiXtract
  cd  ${srcdir}/acpica-unix-${pkgver}/tools/acpixtract
  make 
  install -Dm755 acpixtract \
	  ${pkgdir}/usr/bin/acpixtract  

  install -Dm644 ${srcdir}/LICENSE \
	  ${pkgdir}/usr/share/licenses/${pkgname}/LICENSE
}

