pkgname=mingw-w64-clang
pkgver=20130615
pkgrel=1
pkgdesc="Clang helper scripts for mingw-w64"
arch=(any)
url="http://clang.llvm.org"
license=("custom")
source=("clang.sh")
md5sums=('e60dd7d9516024675688644ecb508497')
depends=(clang mingw-w64-gcc)

_architectures="i686-w64-mingw32 x86_64-w64-mingw32"

package() {
  for _arch in ${_architectures}; do
    mkdir -p "$pkgdir/usr/${_arch}"
    install -Dm755 $srcdir/clang.sh "$pkgdir/usr/bin/${_arch}-clang"
    ln -s "/usr/bin/${_arch}-clang" "$pkgdir/usr/bin/${_arch}-clang++"
    ln -s "/usr/bin/${_arch}-clang" "$pkgdir/usr/${_arch}/clang"
    ln -s "/usr/bin/${_arch}-clang" "$pkgdir/usr/${_arch}/clang++"
    sed -i "s,@TRIPLE@,${_arch}," "$pkgdir/usr/bin/${_arch}-clang"
  done
}