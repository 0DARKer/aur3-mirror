# Maintainer: M0Rf30

pkgname=i2pd
pkgver=0.6.0
pkgrel=1
pkgdesc="Simplified C++ implementation of I2P client"
arch=('i686' 'x86_64')
url="https://github.com/PrivacySolutions/i2pd"
license=('GPL2')
depends=(crypto++ boost-libs)
makedepends=(boost)
conflicts=(i2pd-git)
install=i2pd.install
source=(https://github.com/PrivacySolutions/${pkgname}/archive/${pkgver}.tar.gz
        i2pd.service
	i2p.conf
	i2pd.tmpfiles.conf)

build() {
    cd $srcdir/$pkgname-$pkgver
    make
}

package() {
    cd $srcdir/$pkgname-$pkgver
    install -Dm755 i2p $pkgdir/usr/bin/i2p

    install -Dm0644 $srcdir/i2pd.service $pkgdir/usr/lib/systemd/system/i2pd.service

    install -dm0700 $pkgdir/var/lib/i2pd
    cp ../i2p.conf $pkgdir/var/lib/i2pd

    install -D -m644 $srcdir/$pkgname.tmpfiles.conf $pkgdir/usr/lib/tmpfiles.d/$pkgname.conf
}

md5sums=('93d3425379b14ebbe90d85544146054a'
         'c37b5470c959e826be8eb40c8f1ece93'
         'b145e41e22806bd4ca4f4064ec4721a2'
         '862be388708f2b1bd5f727715ec7508d')
