## Maintainer : shahid <helllamer@gmail.com>
## Long PKGBUILD description, todo, wiki:
## * https://bitbucket.org/helllamer/archlinux-pkgbuild/wiki/pkgbuild/bitcoin

## Wanna take part on development my PKGBUILDs? Feel welcome on my repo:
## * https://bitbucket.org/helllamer/archlinux-pkgbuild/

prog=bitcoin
pkgname=${prog}-bin
pkgver=0.3.23
pkgrel=1
pkgdesc="Bitcoin is a peer-to-peer network based digital currency (precompiled binary official version, statically linked against wxgtk-2.9 and libboost)"
arch=('i686' 'x86_64')
[ "$CARCH" = "i686"   ] && BTC_ARCH=32
[ "$CARCH" = "x86_64" ] && BTC_ARCH=64
url="http://www.bitcoin.org/"
depends=('expat' 'gcc-libs' 'freetype2' 'libpng12' 'libpng' 'libjpeg6' 'gtk2')
license=('MIT')
conflicts=('bitcoin')
# install=${prog}-bin.install
source=("http://downloads.sourceforge.net/sourceforge/${prog}/${prog}-${pkgver}-linux.tar.gz"
	"${prog}.desktop")
md5sums=('c1f4309e585dba7fb288432cab9988b4'
	 '8902bb14f88911919dfc7bd369209114')
src=$srcdir/${prog}-${pkgver}/src/src/
bin=$srcdir/${prog}-${pkgver}/bin/$BTC_ARCH/

build() {
	echo "* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *"
	echo "* Please, use bitcoin package instead of bitcoin-bin if possible. *"
	echo "* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *"
	cd $srcdir
	tar xf ${prog}-${pkgver}-linux.tar.gz
}

package() {
	mkdir -p $pkgdir/usr/bin
	mkdir -p $pkgdir/usr/share/pixmaps
	mkdir -p $pkgdir/usr/share/applications
	
	# pack pre-compiled binaries
	install -D -m755 $bin/* $pkgdir/usr/bin/ || return 1
	
	# add icon and .desktop file to pkg
	install -D -m644 $src/xpm/bitcoin48.xpm $pkgdir/usr/share/pixmaps/
	install -D -m644 $srcdir/${prog}.desktop $pkgdir/usr/share/applications/ 
}
