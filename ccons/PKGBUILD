# Maintainer: Alexander Rødseth <rodseth@gmail.com>
pkgname=ccons
pkgver=189
pkgrel=1
pkgdesc="An interactive C console"
arch=('x86_64' 'i686')
url="http://code.google.com/p/ccons/"
license=('MIT')
_llvm=2.9
source=("http://llvm.org/releases/$_llvm/llvm-$_llvm.tgz"
        "http://ccons.googlecode.com/files/${pkgname}_r$pkgver.tar.gz")
depends=('libedit')
makedepends=('cmake')
md5sums=('793138412d2af2c7c7f54615f8943771'
         '12792427ed57228fccee454fbb2e9ed6')

build() {
  cp -ur "$srcdir/$pkgname" "$srcdir/llvm-$_llvm/tools"
  cd "$srcdir/llvm-$_llvm/tools/$pkgname"
  sed -i 's/ -march=${LLVM_HOST_ARCH}//' CMakeLists.txt
  cp /usr/include/llvm/Support/DataTypes.h ../../include/llvm/System
  cmake CMakeLists.txt
  CXX=clang++ CC=clang make
}

package() {
  cd "$srcdir/llvm-$_llvm/tools/$pkgname"
  # Install the license
  # install -Dm644 LICENSE "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
}

# vim:set ts=2 sw=2 et:
