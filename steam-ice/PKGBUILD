# Maintainer: Thermionix <thermionix@gmail.com>
pkgname='steam-ice'
pkgver=20140320
pkgrel=1
pkgdesc='automatically add Emulator ROMs into Steam'
url="http://scottrice.github.io/Ice/"
arch=('any')
license=('MIT')
depends=('steam'
		 'python'
		 'dolphin-emu'
		 'mednafen'
		 'mupen64plus'
		 'pcsx2')
install="${pkgname}.install"
source=('https://github.com/scottrice/Ice/archive/master.zip'
		'consoles.txt'
		'emulators.txt'
		'steam-ice.install'
		'steam-ice.bin')
md5sums=('SKIP'
         'aafb0e2befae55cbd88af947fb447f4f'
         '64c2acd36350cf9e2d3d054322e8577a'
         'f41f128eaa0639726df4f46643c2638c'
         '221126c5890a3f63c13f2da5fbaa3422')
backup=("opt/steam-ice/config.txt")

package() {
    install -d "${pkgdir}/opt/steam-ice"

	cp "${srcdir}/consoles.txt" "${pkgdir}/opt/steam-ice/"
	cp "${srcdir}/emulators.txt" "${pkgdir}/opt/steam-ice/"
	cp "${srcdir}/Ice-master/config.txt" "${pkgdir}/opt/steam-ice/"

	cp "${srcdir}/Ice-master/ice.py" "${pkgdir}/opt/steam-ice/"
	cp "${srcdir}/Ice-master/README.md" "${pkgdir}/opt/steam-ice/"
	cp "${srcdir}/Ice-master/LICENSE" "${pkgdir}/opt/steam-ice/"

	cp -R "${srcdir}/Ice-master/ice" "${pkgdir}/opt/steam-ice/ice"

	install -d "${pkgdir}/usr/bin"
	cp "${srcdir}/steam-ice.bin" "${pkgdir}/usr/bin/steam-ice"

	chmod -R 777 "${pkgdir}/opt/steam-ice"
}

