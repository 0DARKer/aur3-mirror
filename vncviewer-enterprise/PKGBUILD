# Contributor: Tom Wizetek <tom@wizetek.com>
pkgname=vncviewer-enterprise
pkgver=4.5.4
pkgrel=2
pkgdesc="RealVNC Enterprise Edition viewer"
url="http://www.realvnc.com/"
license=('custom')
arch=('i686' 'x86_64')
depends=('libxext')
makedepends=('gzip')

case ${CARCH} in
  i686)
    _pkgarch=x86
    md5sums=('fda1dda25dd5c2c3b8394905c6313504'
             'bae47b0403060b8655956d4cfdfb7c3c')
  ;;
  x86_64)
    _pkgarch=x64
    md5sums=('b9017ec209f30175cc2e52b7701498c3'
             'bae47b0403060b8655956d4cfdfb7c3c')
  ;;
  *)
    error "Invalid \$CARCH=${CARCH}"
    return 1
  ;;
esac

_pkgsrc=vnc-E4_5_4-${_pkgarch}_linux_viewer.gz
_pkgbin=vnc-E4_5_4_r41964-${_pkgarch}_linux_viewer
source=("${_pkgsrc}::http://www.realvnc.com/cgi-bin/download.cgi?product=enterprise4/vncviewer/x/${_pkgarch}_linux&filetype=gz&filever=${pkgver}&haveDetails=1&acceptLicense=1"
	realvnc_48x48.png)

package() {
  gunzip -c ${_pkgsrc} > ${_pkgbin}
  install -D -m 755 ${srcdir}/${_pkgbin} ${pkgdir}/usr/bin/${_pkgbin}
  install -D -m 644 ${srcdir}/realvnc_48x48.png ${pkgdir}/usr/share/pixmaps/realvnc_48x48.png

  cat > ${pkgname}.desktop << EoF
[Desktop Entry]
Type=Application
Categories=Application;Network;
Terminal=false
Exec=/usr/bin/${_pkgbin}
Icon=/usr/share/pixmaps/realvnc_48x48.png
Name=VNC Viewer Enterprise Edition for X
GenericName=Remote desktop client
Comment=Connect to VNC servers
EoF

  install -D -m 644 ${srcdir}/${pkgname}.desktop ${pkgdir}/usr/share/applications/${pkgname}.desktop
}
