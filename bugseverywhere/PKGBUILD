# Contributor: Elena ``of Valhalla'' Grandi <elena.valhalla@gmail.com>
pkgname=bugseverywhere
pkgver=1.0.0
pkgrel=1
pkgdesc="A distributed bugtracker"
arch=('any')
url="http://bugseverywhere.org/be"
license=('GPL')
depends=('python' 'python-yaml')
makedepends=('python-sphinx' 'python-numpydoc')
optdepends=('cherrypy: web interface')
provides=('bugseverywhere')
conflicts=('bugseverywhere-git' 'bugseverywhere-bzr')
backup=()
options=(!emptydirs)
install=
source=(http://download.bugseverywhere.org/releases/be-$pkgver.tar.gz)
noextract=()
md5sums=('fd2786d564cbbe305f9c6b3b154ed617') #generate with 'makepkg -g'

build() {

  cd "$srcdir/be-$pkgver"

  python2 setup.py install --root=$pkgdir/ --optimize=1

  # Build html documentation
  sed -i 's/python /python2 /' doc/Makefile
  make sphinx

  install -d $pkgdir/usr/share/doc/bugseverywhere
  cp -r doc/.build/html/* $pkgdir/usr/share/doc/bugseverywhere/

}

# vim:set ts=2 sw=2 et:
