# Maintainer: Niccol√≤ Maggioni <nicco dot maggioni at gmail dot com>

pkgname="torque"
pkgver=4.2.9
pkgrel=1
pkgdesc='An open source resource manager providing control over batch jobs and distributed compute nodes'
arch=('i686' 'x86_64')
url="http://www.adaptivecomputing.com/products/open-source/torque/"
license=('GPL')
depends=('openssh' 'libxml2' 'tk')
makedepends=('make' 'gcc')
optdepends=()
backup=(var/spool/torque/server_name var/spool/torque/mom_priv/config var/spool/torque/serv_priv/{nodes,serverdb})
options=(!libtool)
install=torque.install
source=('http://www.adaptivecomputing.com/index.php?wpfb_dl=2849')
md5sums=('fa8abade16b94021ec1f5e4deb036aa6')

build() {
	cd "$srcdir/$pkgname-$pkgver"
	CPPFLAGS="-DUSE_INTERP_ERRORLINE -DUSE_INTERP_RESULT" ./configure --prefix=/usr
	make
}

package() {
	cd "$srcdir/$pkgname-$pkgver"
	make DESTDIR="$pkgdir/" install
}
