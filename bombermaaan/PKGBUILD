# Contributor: Micael Soder <zoulnix@gmail.com>
pkgname=bombermaaan
pkgver=1.4.0
pkgrel=1
pkgdesc="A classic Bomberman game with multiplayer support."
arch=('i686' 'x86_64')
url="http://bombermaaan.sourceforge.net/"
license=('GPL')
depends=('sdl_mixer')
makedepends=('gcc' 'make' 'patch' 'pkgconfig')
install=${pkgname}.install
source=(http://downloads.sourceforge.net/${pkgname}/Bombermaaan_${pkgver}.627_20081018_src.tar.gz \
	http://downloads.sourceforge.net/${pkgname}/Bombermaaan_${pkgver}.627_20081018_res.tar.gz \
	${pkgname}-Makefiles.patch \
	${pkgname}.desktop \
	${pkgname}.png \
	${pkgname}.svg)
md5sums=('ee90bdd9654f0886c9585e6d785a1f52' '6c12f92ba80788f5958f7d9b65c81307' \
	 '9e28cc9d8145ff578d7c23df27d44703' 'c977c33d6974e6256b6e9668e6aedf3f' \
	 'b60218af9f88738609f90e796853005d' 'd44b4896cb8a9f65a47d9db697af82aa')

build() {
  cd ${startdir}/src
  mkdir -p ${startdir}/pkg/usr/share/{applications,pixmaps}
  cp -r Bombermaaan_${pkgver}.627_20081018_res/* \
	Bombermaaan_${pkgver}.627_20081018_src/

  cd ${startdir}/src/Bombermaaan_${pkgver}.627_20081018_src

  # Applying Patch*
  patch -Np1 -i ../${pkgname}-Makefiles.patch || return 1

  make || return 1
  make prefix=/usr DESTDIR=${startdir}/pkg install || return 1

  install -m644 ${startdir}/${pkgname}.desktop ${startdir}/pkg/usr/share/applications/ || return 1
  install -m644 ${startdir}/${pkgname}.{png,svg} ${startdir}/pkg/usr/share/pixmaps/ || return 1
}