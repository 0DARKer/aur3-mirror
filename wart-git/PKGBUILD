# Maintainer: Stefan Husmann <stefan-husmann@t-online.de>
pkgname=wart-git
pkgver=3790.28b6ffa
pkgrel=1
pkgdesc="A small, readable lisp with thorough unit tests and extensible functions/macros."
arch=('i686' 'x86_64')
url="https://github.com/akkartik/wart"
license=('Artistic2.0')
depends=('glibc')
makedepends=('git')
provides=('wart')
conflicts=('wart')
source=('wart::git://github.com/akkartik/wart.git' 'wart.sh')
md5sums=('SKIP'
         'e8fb365ef3d5e98c415650ad8baf949c')
optdepends=('which: for using rlwrap'
  'rlwrap: for better REPL editing')
options=('!strip')
_gitname="wart"

pkgver() {
 cd $srcdir/$_gitname
  echo $(git rev-list --count HEAD).$(git rev-parse --short HEAD)
}

build() {
  cd "$srcdir/$_gitname"
  make -q || make 
}

package() {
  cd "$srcdir"
  install -d $pkgdir/usr/share/$_gitname
  cp -r $_gitname $pkgdir/usr/share
  install -Dm755 wart.sh $pkgdir/usr/bin/wart
}
