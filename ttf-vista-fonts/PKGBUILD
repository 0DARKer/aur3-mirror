# Contributor: mutlu_inek <mutlu_inek@yahoo.de>

pkgname=ttf-vista-fonts
pkgver=1
pkgrel=3
pkgdesc="Microsoft Vista True Type Fonts"
url="http://www.microsoft.com/downloads/en/details.aspx?FamilyID=048dc840-14e1-467d-8dca-19d2a8fd7485&displaylang=en"
license=(custom)
arch=('any')
depends=('fontconfig' 'xorg-font-utils')
makedepends=(cabextract)
conflicts=('ttf-ms-extrafonts')
provides=()
replaces=('vista-fonts')
install=$pkgname.install
source=('http://download.microsoft.com/download/f/5/a/f5a3df76-d856-4a61-a6bd-722f52a5be26/PowerPointViewer.exe')
md5sums=('9b4b476488674ae103d2e97cd88cd222')

build() {
  mkdir -p $startdir/src/$pkgname-$pkgver
  cabextract --lowercase $startdir/src/PowerPointViewer.exe -d $startdir/src/$pkgname-$pkgver
  cabextract --lowercase $startdir/src/$pkgname-$pkgver/ppviewer.cab -d $startdir/src/$pkgname-$pkgver
  mkdir -p $startdir/pkg/usr/share/fonts/TTF
  install -m644 $startdir/src/$pkgname-$pkgver/*.{ttf,ttc} $startdir/pkg/usr/share/fonts/TTF
  mv $startdir/src/$pkgname-$pkgver/eula.txt $startdir/src/$pkgname-$pkgver/license.txt
  mkdir -p $startdir/pkg/usr/share/licenses/$pkgname
  install -D -m644 $startdir/src/$pkgname-$pkgver/license.txt $startdir/pkg/usr/share/licenses/$pkgname
}
