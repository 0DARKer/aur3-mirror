pkgname=pyusecase
pkgver=3.5
pkgrel=5
pkgdesc="UI test tool, consisting of a generic framework and implementations for PyGTK, Tkinter, wxPython and SWT."
arch=(any)
url="http://texttest.carmen.se/index.php?page=ui_testing&n=xusecase"
license=('LGPL')
depends=(python2 pygtk)
backup=()
noextract=()
source=(http://sourceforge.net/projects/$pkgname/files/$pkgname/$pkgver/$pkgname-$pkgver.zip
        $pkgname)
md5sums=('a411f43d43796a147dfda6746804fe88'
         '76a3f0440e27aa70ba05122e302ce630')

replace_python_with_python2() {
  mv $1 tmp || return 1
  cat tmp | sed 's/python/python2/g' > $1 || return 1
  rm tmp || return 1
  chmod 755 $1 || return 1
}

link() {
  install -d -m0755 $pkgdir/usr/bin
    ln -s $1 $pkgdir/usr/bin/pyusecase  || return 1
}

build() {
  cd "$srcdir"
  install -d -m0755 $pkgdir/usr/share
  mv $pkgname-$pkgver $pkgdir/usr/share/$pkgname || return 1

  pyusecase="$pkgdir/usr/share/$pkgname/source/bin/pyusecase"
  replace_python_with_python2 $pyusecase
  link $pyusecase

  replace_python_with_python2 $pkgdir/usr/share/$pkgname/source/bin/usecase_name_chooser
}
