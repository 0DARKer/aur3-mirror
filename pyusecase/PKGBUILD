pkgname=pyusecase
pkgver=3.5
pkgrel=2
pkgdesc="UI test tool, consisting of a generic framework and implementations for PyGTK, Tkinter, wxPython and SWT."
arch=(any)
url="http://texttest.carmen.se/index.php?page=ui_testing&n=xusecase"
license=('LGPL')
depends=(python2 pygtk)
backup=()
noextract=()
source=(http://sourceforge.net/projects/$pkgname/files/$pkgname/$pkgver/$pkgname-$pkgver.zip)
md5sums=('a411f43d43796a147dfda6746804fe88')

build() {
  cd "$srcdir"
  install -d -m0755 $pkgdir/usr/share || return 1
  mv $pkgname-$pkgver $pkgdir/usr/share/$pkgname || return 1

  # replace python with python2
  $runfile=$pkgdir/usr/share/pyusecase/source/bin/pyusecase
  mv $runfile run || return 1
  pyusecase/source/bin/pyusecase
  cat run | sed  's@#!/usr/bin/env python@#!/usr/bin/env python2@' > $runfile || return 1
  chmod 0755 $runfile || return 1

  # link to binary
  install -d -m0755 $pkgdir/usr/bin || return 1
  ln -s /usr/share/pyusecase/source/bin/pyusecase $pkgdir/usr/bin/$pkgname || return 1
}
