# Maintainer: Sirat18 <aur@sirat18.de>
# last Maintainer: Alex Cartwright (alexc223@googlemail.com)
# Contributor: CRT <crt.011@gmail.com>
pkgname=skipfish
pkgver=2.07b
pkgrel=1
pkgdesc="A fully automated, active web application security reconnaissance tool"
arch=('any')
license=('APACHE')
url='http://code.google.com/p/skipfish/'
depends=('openssl' 'libidn' 'zlib' 'glibc' 'sh')
source=("http://skipfish.googlecode.com/files/${pkgname}-${pkgver}.tgz"
	"skipfish.patch")

md5sums=('91ee5616b22366745e8b6ba00c3a29e1'
         'd4f556a3f60cde2f70b815e6506fa788')

build() {
	cd "${srcdir}/${pkgname}-${pkgver}"

	# Patch fixes application run directory system error
	patch -Np0 -i ../skipfish.patch
	make
}	

package() {
	cd "${srcdir}/${pkgname}-${pkgver}"
	install -d -Dm 0755 "${pkgdir}"/usr/share/"${pkgname}"
	install -d -Dm 0755 "${pkgdir}"/usr/share/licenses/"${pkgname}"
	install -d -Dm 0755 "${pkgdir}"/usr/share/"${pkgname}"/dictionaries
	install -Dm 0644 dictionaries/* "${pkgdir}"/usr/share/"${pkgname}"/dictionaries
	install -d -Dm 0755 assets "${pkgdir}"/usr/share/"${pkgname}"/assets 
	install -Dm 0644 assets/* "${pkgdir}"/usr/share/"${pkgname}"/assets
	install -Dm 0755 skipfish "${pkgdir}"/usr/bin/skipfish
	install -m644 COPYING "${pkgdir}"/usr/share/licenses/"${pkgname}"/COPYING
}
