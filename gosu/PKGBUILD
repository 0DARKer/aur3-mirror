# Maintainer: Justin Wilcox <nat1192@gmail.com>
# Contributor: Henning Bekel <h dot bekel at googlemail dot com>
# Contributor: Paolo Giangrandi <peoro.noob@gmail.com>

pkgname=gosu
pkgver=0.7.43
pkgrel=2
pkgdesc="2D game development library for the C++ programming language."
arch=('i686' 'x86_64')
url="http://libgosu.org/"
license="MIT"
depends=('sdl_ttf' 'pango' 'libgl' 'libxinerama' 'openal' 'libvorbis' 'libsndfile' 'freeimage')
source=("http://www.libgosu.org/downloads/gosu-linux-$pkgver.tar.gz" "fix_linux_compile.patch")
md5sums=('c77947ecd51abb00027917658bc97fb9'
         '52285b9d49fc6114a887e3c2c0ce3241')

build() {
  #Patching
  cd "${srcdir}/${pkgname}"
  patch -p0 <"${srcdir}/fix_linux_compile.patch"

  cd "${srcdir}/${pkgname}/linux"
  ./configure --prefix=/usr
  make
}

package () {
  install -D -m644 $srcdir/$pkgname/lib/libgosu.a $pkgdir/usr/lib/libgosu.a
  install -D -m755 $srcdir/$pkgname/lib/libgosu.so $pkgdir/usr/lib/libgosu.so
  install -D -m755 $srcdir/$pkgname/bin/gosu-config $pkgdir/usr/bin/gosu-config

  install -d $pkgdir/usr/include/Gosu
  install -D -m644 $srcdir/$pkgname/Gosu/*.hpp $pkgdir/usr/include/Gosu

  install -D -m 644 $srcdir/$pkgname/COPYING $pkgdir/usr/share/licenses/$pkgname/COPYING
}
