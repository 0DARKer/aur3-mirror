# Maintainer: FzerorubigD <fzerorubigd {AT} Gmail {Dot} Com

pkgname=saaghar
pkgver=0.7.2
pkgrel=4
pkgdesc="Saaghar is a Persian poetry software written by C++ under Qt framework, it uses ganjoor database as its database. It has tab feature in both its Viewer and its Search page that cause it be suitable for research goals. "
url="http://www.pojh.co.cc/saaghar/"
arch=('any')
license=('GPL3')
depends=('qt>=4.6.2')
makedepends=('p7zip')
source=(Saaghar-0.7.2.tar.gz::"http://sourceforge.net/projects/saaghar/files/Source%20Code/Saaghar-0.7.2.tar.gz/download"
GanjoorSetup-2.2.exe::"http://sourceforge.net/projects/ganjoor/files/GanjoorSetup-2.2.exe/download"
arch.patch
saaghar-db
saaghar.install
fix1.patch
)

md5sums=('7fdd6edc2d5f623dd45c8f64557fc3a4'
         '4b208e82fa2f1631b94d9ff134e4d336'
         '69542191497028ea8487f7b6b43794e0'
         '33dac266e7be2fa1d7797dc2d493e4d5'
         '813635bedad8db3295ff2a49b394bfcc'
         '4b8285debbe50cd664d6b6aeae79c1a8')
install=$pkgname.install
build() {
	cd $srcdir
	patch -Np1 -i  $srcdir/arch.patch
	patch -Np1 -i  $srcdir/fix1.patch
	7z e -y ./GanjoorSetup-2.2.exe
	cd saaghar
	qmake
	make
	mkdir $pkgdir/{usr,usr/{bin,share,share/{saaghar,pixmaps,applications}}}
	cp -R $srcdir/saaghar/utilities/poets_images $pkgdir/usr/share/saaghar/ 
	install -m644 $srcdir/saaghar/utilities/{AUTHORS,COPYING,Saaghar.desktop,CHANGELOG,README,TODO} $pkgdir/usr/share/saaghar 
	install -m644 $srcdir/ganjoor.s3db $pkgdir/usr/share/saaghar
	install -m755 $srcdir/saaghar/saaghar $pkgdir/usr/bin
	install -m755 $srcdir/saaghar-db $pkgdir/usr/bin
	install -m644 $srcdir/saaghar/images/saaghar.png $pkgdir/usr/share/pixmaps
	install -m644 $srcdir/saaghar/utilities/Saaghar.desktop $pkgdir/usr/share/applications
}


