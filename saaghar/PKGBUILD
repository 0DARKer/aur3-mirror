# Maintainer: FzerorubigD <fzerorubigd {AT} Gmail {Dot} Com

pkgname=saaghar
pkgver=0.8.21
pkgrel=2
pkgdesc="Saaghar is a Persian poetry software written by C++ under Qt framework, it uses ganjoor database as its database. It has tab feature in both its Viewer and its Search page that cause it be suitable for research goals. "
url="http://pojh.iblogger.org/"
arch=('any')
license=('GPL3')
depends=('qt>=4.6.2')
makedepends=('p7zip' 'tar')

source=(Saaghar-${pkgver}.tar.gz::"http://sourceforge.net/projects/saaghar/files/Source%20Code/Saaghar-${pkgver}.tar.gz/download"
saaghar-data_58.90.02.deb::"http://sourceforge.net/projects/saaghar/files/Linux/Ubuntu-n-Debian/saaghar-data_58.90.02.deb/download"
arch.patch
saaghar-db
saaghar.install
)
md5sums=('a5d235e9aa8900f2e98f6c3c22a194be'
         '519e77965e3ba2562223873b33a482ba'
         '9f0d59eb39d4ed451546ba9e8e413f6e'
         '33dac266e7be2fa1d7797dc2d493e4d5'
         '813635bedad8db3295ff2a49b394bfcc')

install=$pkgname.install
build() {
	cd $srcdir
	patch -Np1 -i  $srcdir/arch.patch
	7z e -y ./saaghar-data_58.90.02.deb
	tar xvf ./data.tar
	#cd Saaghar
	qmake
	make
	mkdir $pkgdir/{usr,usr/{bin,share,share/{saaghar,pixmaps,applications}}}
	cp -R $srcdir/utilities/poets_images $pkgdir/usr/share/saaghar/ 
	install -m644 $srcdir/utilities/{AUTHORS,COPYING,Saaghar.desktop,CHANGELOG,README,TODO,qt_fa.qm,saaghar_fa.qm,Saaghar-Manual.pdf} $pkgdir/usr/share/saaghar 
	install -m644 $srcdir/usr/share/saaghar/ganjoor.s3db $pkgdir/usr/share/saaghar
	install -m755 $srcdir/saaghar $pkgdir/usr/bin
	install -m755 $srcdir/saaghar-db $pkgdir/usr/bin
	install -m644 $srcdir/images/saaghar.png $pkgdir/usr/share/pixmaps
	install -m644 $srcdir/utilities/Saaghar.desktop $pkgdir/usr/share/applications
}


