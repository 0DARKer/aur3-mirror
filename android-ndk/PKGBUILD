# Maintainer: Alexander RÃ¸dseth <rodseth@gmail.com>
# Contributor: Daniel Micay <danielmicay@gmail.com>

pkgbase=android-ndk
pkgname=('android-ndk32' 'android-ndk64')
pkgver=r10
pkgrel=2
pkgdesc='Android C/C++ developer kit'
arch=('x86_64' 'i686')
url='http://developer.android.com/sdk/ndk/index.html'
license=('GPL' 'LGPL' 'custom')
depends=('android-sdk')
options=('!strip' 'staticlibs')
install="$pkgbase.install"

# It's a bit messy as a split package in AUR, since two large files has to be downloaded
# to build two packages, when people may only need one of them. It might be a good canidate for [community].
# Also might want to use a symbolic link in /opt instead of making the two packages conflict.

noextract=("${pkgbase}32-$CARCH.tbz2"
           "${pkgbase}64-$CARCH.tbz2")
if [[ $CARCH == x86_64 ]]; then
    source=("${pkgbase}32-$CARCH.tbz2::http://dl.google.com/android/ndk/${pkgbase}32-$pkgver-linux-x86_64.tar.bz2"
            "${pkgbase}64-$CARCH.tbz2::http://dl.google.com/android/ndk/${pkgbase}64-$pkgver-linux-x86_64.tar.bz2"
            "${pkgbase}32.sh"
            "${pkgbase}64.sh")
    sha256sums=('9d0b4aab6e3f34158a3698226ab7d6c8df4aa8c9cc5242da9b733ac1f988090e'
                'b99bbc74973d0b2c17df22bc0ba9e61704d6f631deb036885fce05964d9ec921'
                'deba8605f2dfd319092fa2444ce2fe42af39a802975d7c65d899c93b4fa0701b'
                '684473b5a22537fd441fac5ecd3a615bb291ea5f70b6d8cb9d0a9f57ba7089b0')
else
    source=("${pkgbase}32-$CARCH.tbz2::http://dl.google.com/android/ndk/${pkgbase}32-$pkgver-linux-x86.tar.bz2"
            "${pkgbase}64-$CARCH.tbz2::http://dl.google.com/android/ndk/${pkgbase}64-$pkgver-linux-x86.tar.bz2"
            "${pkgbase}32.sh"
            "${pkgbase}64.sh")
    sha256sums=('7480eea8fe699cfc6a3fcfca9debe8d7e2cd6ef00e31e12b91dead49fcb782b4'
                'e8bdee2e7696b97e9e9e4ef62a59b39edb38a759dc0a566ff81caf08938c7d9f'
                'deba8605f2dfd319092fa2444ce2fe42af39a802975d7c65d899c93b4fa0701b'
                '684473b5a22537fd441fac5ecd3a615bb291ea5f70b6d8cb9d0a9f57ba7089b0')
fi

package_android-ndk32() {
  conflicts=('android-ndk64') # because of the ANDROID_NDK environment variable.
  provides=('android-ndk')
  replaces=('android-ndk')

  install -Dm755 "$pkgname.sh" "$pkgdir/etc/profile.d/$pkgname.sh"
  install -d "$pkgdir/opt"
  tar kaxf "$pkgname-$CARCH.tbz2" -C "$pkgdir/opt"
  mv "$pkgdir/opt/$pkgbase-$pkgver" "$pkgdir/opt/$pkgname"
}

package_android-ndk64() {
  conflicts=('android-ndk32') # because of the ANDROID_NDK environment variable
  provides=('android-ndk')
  replaces=('android-ndk')

  install -Dm755 "$pkgname.sh" "$pkgdir/etc/profile.d/$pkgname.sh"
  install -d "$pkgdir/opt"
  tar kaxf "$pkgname-$CARCH.tbz2" -C "$pkgdir/opt"
  mv "$pkgdir/opt/$pkgbase-$pkgver" "$pkgdir/opt/$pkgname"
}

# vim:set ts=2 sw=2 et:
