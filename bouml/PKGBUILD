# Maintainer: Mathieu Pasquet <mathieui at mathieui.net>
# Contributor: Anton Bazhenov <anton.bazhenov at gmail>
# Contributor: Andrea Agosti <cifvts@gmail.com>

pkgname=bouml
pkgver=4.22.2
pkgrel=2
pkgdesc='A free UML 2 modeler with C++, Idl, Java, PHP and Python code generation'
arch=('i686' 'x86_64')
options=('makeflags')
url='http://bouml.free.fr/'
license=('GPL')
depends=('qt3')
source=("http://bouml.free.fr/files/bouml_4.22.2.tar.gz")
md5sums=('9462d6c6f6491069224a44380da5a8f1')
build() {
  cd "$srcdir"/${pkgname}_$pkgver

  # we need Qt3
  . /etc/profile.d/qt3.sh || return 1
  export PATH="$QTDIR/bin:$PATH"

  # export qmakespec
  if [ `uname -m` = "x86_64" ]; then
    export QMAKESPEC="linux-g++-64"
  else
    export QMAKESPEC="linux-g++-32"
  fi

  # make and install
  make || return 1
  make -I"$QTDIR/include" DESTDIR="$pkgdir" install || return 1
}
