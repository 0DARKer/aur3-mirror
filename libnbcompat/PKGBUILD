pkgname="libnbcompat"
pkgver="2010Q3"
pkgrel=1
pkgdesc="Portable NetBSD compatibility library"
arch=('i686' 'x86_64')
url="http://www.netbsd.org/"
license=('BSD')
makedepends=('bmake' 'cvs')

__cvsroot="anoncvs@anoncvs.NetBSD.org:/cvsroot"
__cvsmod="pkgsrc/pkgtools/$pkgname/files"

build() {
	if [ -d $__cvsmod/CVS ]; then
		CVSROOT=$__cvsroot CVS_RSH=ssh cvs -f -z3 update -r pkgsrc-$pkgver -Pd $__cvsmod
	else
		CVSROOT=$__cvsroot CVS_RSH=ssh cvs -f -z3 co -r pkgsrc-$pkgver -P $__cvsmod
	fi

	rm -rf build
	cp -r $__cvsmod build
	cd build

	./configure --prefix=/usr --enable-db --enable-bsd-getopt

	bmake
}

package() {
	cd build

	bmake install DESTDIR=$pkgdir
}
