# Maintainer: Matej Lach <matej.lach@gmail.com>

pkgname=birdfont
pkgver=1.9
pkgrel=1
pkgdesc='A free font editor that lets you create vector graphics and export TTF, EOT & SVG fonts'
arch=(i686 x86_64)
url='http://birdfont.org/'
license=('GPL3')
depends=('libgee' 'gtk2' 'libxml2' 'webkitgtk' 'libnotify')
makedepends=('vala' 'gettext' 'libgee' 'python2' 'gettext')
source=(
	"http://birdfont.org/releases/${pkgname}-${pkgver}.tar.gz"
	'http://www.unicode.org/Public/UNIDATA/NamesList.txt')
sha512sums=('946f1eae14597dfb27d93a91cd246a3000224d70e695ac8b180081effea7d22a940fc72c3464acdc146ce96e24bd0e18f368675284e354334e34aefb0f4ecdde'
            '67775bf0cd9ba6d5a4ff8655aa88459223d79c040ca17ab61a994fb2fd1005050ec219fe0575bb2e97dc30dec541f3bed07e0e9c95054a121c749b4cbc40d8e7')
install=birdfont.install

prepare() {
	cd "${srcdir}/$pkgname-$pkgver"
	sed -i -e 's/gtk+-2.0/gtk+-3.0/g' ./scripts/build.py	
}

build() {
	cd "${srcdir}/$pkgname-$pkgver"

	python2 ./configure -p /usr
	python2 ./scripts/linux_build.py -p /usr
}

package() {
	cd "${srcdir}/$pkgname-$pkgver"
	
	install -d -m 0755 "${pkgdir}/usr/share/unicode"
	python2 ./install.py -d "${pkgdir}" -n /share/man -l /lib
	install -m 0644 "${srcdir}/NamesList.txt" "${pkgdir}/usr/share/unicode"
}
