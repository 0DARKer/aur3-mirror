pkgname=batterymon
pkgver=1.2.0
pkgrel=9
pkgdesc="A simple battery monitor ideal for openbox etc"
arch=('i686' 'x86_64') 
url="http://code.google.com/p/batterymon/"
license=('GPL2')
depends=('python2' 'hal' 'dbus-python' 'pygtk')
builddepends=('sed')
optdepends=('python-notify')
source=(http://batterymon.googlecode.com/files/batterymon-$pkgver.tar.gz https://jsedlacek.co.cc/remaining_time.patch)
build() {
	cd "$srcdir/batterymon"
	patch -p0 < ../remaining_time.patch || return 1
	#install -D -m755 batterymon.py "$pkgdir/usr/bin/batterymon" || return 1
	mkdir -p "$pkgdir/usr/share/batterymon" || return 1
	mkdir -p "$pkgdir/usr/bin/" || return 1
	#cp -a icons "$pkgdir/usr/share/batterymon/" || return 1
	cp -a ./ "$pkgdir/usr/share/batterymon/" || return 1
	sed -i "$pkgdir/usr/share/batterymon/batterymon.py" -e '1d' -e '2i#!/usr/bin/env python2'
	find "$pkgdir/usr/share/batterymon/icons" -depth -name ".svn" -type d -exec rm -rf {} \; || return 1
	ln -sf /usr/share/batterymon/batterymon.py "$pkgdir/usr/bin/batterymon" || return 1
	
}	

md5sums=('23bcd745daf5508005284ebd61c29c2b'
         'b6c881c9805c50ea29c7b7568c3b3384')
