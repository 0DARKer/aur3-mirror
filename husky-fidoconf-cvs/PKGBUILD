pkgname=husky-fidoconf-cvs
pkgver=20091212
pkgrel=1
pkgdesc="This library is a core part of HUSKY portable fidonet software which parsing and manipulating config file"
arch=('i686' 'x86_64')
url="http://husky.sf.net"
license=('GPL2')

depends=('husky-huskylib-cvs' 'husky-smapi-cvs')
provides=('fidoconf')

_cvsroot=":pserver:anonymous@husky.cvs.sourceforge.net:/cvsroot/husky"
_cvsmod="fidoconf"


build() {
	msg "Performing source checkout..."
	if [ -d "$_cvsmod/CVS" ]; then
		cd "$_cvsmod"
		cvs -z3 update -d || return 1
		cd ..
	else
		cvs -z3 -d $_cvsroot co -D $pkgver -f "$_cvsmod" || return 1
	fi
	msg "Source checkout finished."
	rm -rf "$_cvsmod-build"
	cp -r "$_cvsmod" "$_cvsmod-build" || return 1
	cd "$_cvsmod-build"
	cp huskymak.cfg ${srcdir}
	make || return 1
	make DESTDIR=${pkgdir} install
}
