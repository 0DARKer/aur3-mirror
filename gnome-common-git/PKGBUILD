# Contributor: teddy_beer_maniac <teddy_beer_maniac@wp.pl>

pkgname=gnome-common-git
pkgver=20090605
pkgrel=1
pkgdesc="Common macros for GNOME2(GIT Version)"
arch=(i686 x86_64)
license=('GPL')
url="http://www.gnome.org"
makedepends=('autoconf' 'automake' 'subversion')
provides=('gnome-common')
conflicts=('gnome-common')
source=()
md5sums=()

_gitname=gnome-common
_gitroot=git://git.gnome.org/${_gitname}

build() {
  cd $startdir/src
  msg "Connecting to gnome.org git server...."
  rm  -rf $startdir/src/$_gitname-build
  
  if [[ -d $_gitname ]]; then
   cd $_gitname || return 1
   git pull origin || return 1
    else
   git clone $_gitroot $_gitname || return 1
     fi

  msg " checkout done."
  
  cd $srcdir || return 1
  cp -r $_gitname $_gitname-build

   cd $_gitname-build || return 1
	
   ./autogen.sh
	./configure --prefix=/usr
	make || return 1
	make DESTDIR=${startdir}/pkg install
}
