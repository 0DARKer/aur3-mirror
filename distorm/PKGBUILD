# Maintainer: Mike Sampson <mike at sambodata dot com>
# Contributor: Dmitry A. Ilyashevich <dmitry.ilyashevich@gmail.com> 
pkgname=distorm
pkgver=3.0.0
pkgrel=4
pkgdesc="The ultimate disassembler (for AMD64, X86-64)"
url="http://code.google.com/p/distorm/"
license=('GPL')
depends=('glibc')
arch=('i686' 'x86_64')
source=(http://distorm.googlecode.com/files/distorm3.zip)
md5sums=('eb80e8901d4c52965b0de9ea5b7dca91')

build() {
  cd $srcdir/distorm3
  python2 setup.py install --root=$pkgdir/ --optimize=1

  cd $srcdir/distorm3/make/linux
  #sed -i -e 's/mnemonics\.o/include\/mnemonics\.o/' Makefile
  make

  cd $srcdir/distorm3/examples/linux
  #sed -i -e 's/include\/distorm.h/\.\.\/include\/distorm\.h/' main.c
  make

  install -D -m755 $srcdir/distorm3/examples/linux/disasm $pkgdir/usr/bin/disasm
  install -D $srcdir/distorm3/COPYING $pkgdir/usr/share/licenses/distorm/COPYING
}

