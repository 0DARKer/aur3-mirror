# Maintainer: foalsrock <foalsrock at gmail dot-com>

pkgname=fzf-git
pkgver=0.5.1.r8.g2dca6f0
pkgrel=1
pkgdesc="Fuzzy finder for your shell"
arch=(any)
url="https://github.com/junegunn/fzf"
license=('MIT')
depends=('ruby>=1.8.5')
md5sums=('SKIP')
source=("git://github.com/junegunn/fzf"
        "fzf.sh")
md5sums=('SKIP'
         '720cb66eda6f2ecebb4e4324aafcedfe')

pkgver() {
  cd "${srcdir}/fzf"
  git describe --tags | sed -E 's/([^-]*-g)/r\1/;s/-/./g'
}

package() {
  install -Dm755 "${srcdir}/fzf/fzf" "${pkgdir}/usr/bin/fzf"

  # Optional stuff below- uncomment as suited

  # (potentially) useful shell functions
  # source it in your shell's configuration (". /etc/profile.d/fzf.sh")
  #install -Dm755 "${srcdir}/fzf.sh" "${pkgdir}/etc/profile.d/fzf.sh"

  # bash completions
  #install -Dm644 "${srcdir}/fzf/fzf-completion.bash" \
    #"${pkgdir}/usr/share/bash-completion/completions/fzf"

  # vim plugin
  #install -Dm755 "${srcdir}/fzf/plugin/fzf.vim" \
    #"${pkgdir}/usr/share/vim/vimfiles/plugin/fzf.vim"
}
