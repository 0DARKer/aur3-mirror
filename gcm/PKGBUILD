# Contributor: Nebulosa <nebulosa2007 na yandekse>

pkgname=gcm
pkgver=0.9.3
pkgrel=1
pkgdesc="Gnome Connection Manager is a tabbed ssh connection manager for gtk+ environments."
arch=('i686' 'x86_64')
url="http://kuthulu.com/gcm/"
license=('GPL')
depends=('python2' 'pygtk' 'expect' 'vte')
source=("http://kuthulu.com/gcm/gnome-connection-manager-$pkgver.tgz" "gcm.desktop")
md5sums=('4c28e1106326953253f17735d262a363'
         '0c81ba4f06aff38cb35d75806206dcca')

build() {
  cd ${srcdir}/${pkgname}-${pkgver}
  sed -i "s#env python#env python2#" gnome_connection_manager.py
  install -d $pkgdir/opt/gcm
  install -D -m 755 -t $pkgdir/opt/gcm *.{py,expect}
  install -D -m 644 -t $pkgdir/opt/gcm *.{gif,png,glade,txt,pyc}
  
  #installing languages
  install -d $pkgdir/opt/gcm/lang
  directories=("en" "fr" "pl" "pt" "ru" )
  for ((i=0; i< ${#directories[@]}; i++)); do
    install -d $pkgdir/opt/gcm/lang/${directories[i]}/LC_MESSAGES
    install -D -m 644 lang/${directories[i]}/LC_MESSAGES/gcm-lang.mo $pkgdir/opt/gcm/lang/${directories[i]}/LC_MESSAGES/gcm-lang.mo
  done
  install -D -m 644 -t $pkgdir/opt/gcm/lang lang/*.po
  
  install -D -m 644 $srcdir/gcm.desktop $pkgdir/usr/share/applications/gcm.desktop
  install -D -m 644 icon.png $pkgdir/usr/share/pixmaps/gcm.png
}
