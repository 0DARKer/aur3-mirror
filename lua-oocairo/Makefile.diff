*** lua-oocairo-1.2/Makefile.osx	2008-09-30 00:10:25.000000000 +0200
--- Makefile.orig	2009-02-08 14:35:39.000000000 +0100
***************
*** 1,7 ****
  VERSION=$(shell head -1 Changes | sed 's/ .*//')
  RELEASEDATE=$(shell head -1 Changes | sed 's/.* //')
  PREFIX=/usr/local
! LUA_CPATH=
  
  MANPAGES = $(wildcard doc/*.3)
  
--- 1,9 ----
  VERSION=$(shell head -1 Changes | sed 's/ .*//')
  RELEASEDATE=$(shell head -1 Changes | sed 's/.* //')
  PREFIX=/usr/local
! LUA_CPATH:=$(shell pkg-config lua --define-variable=prefix=$(PREFIX) \
!                               --variable=INSTALL_CMOD)
! CC=gcc
  
  MANPAGES = $(wildcard doc/*.3)
  
***************
*** 18,27 ****
  all: $(SO) $(MANPAGES)
  
  test: all
! 	echo 'lunit.main({...})' | lua51 -llunit - test/*.lua
  
  $(SO): oocairo.c
! 	$(CC) -bundle $(CFLAGS) $(LDFLAGS) -o $@ $<
  
  oocairo.c: obj*.c
  
--- 20,29 ----
  all: $(SO) $(MANPAGES)
  
  test: all
! 	echo 'lunit.main({...})' | lua -llunit - test/*.lua
  
  $(SO): oocairo.c
! 	$(CC) -shared -fPIC $(CFLAGS) $(LDFLAGS) -o $@ $<
  
  oocairo.c: obj*.c
  
