# Contributor: Kostas Andreadis <kmandreadis@gmail.com>
pkgname=gmt
pkgver=4.5.3
pkgrel=1
pkgdesc="Generic Mapping Tools: Collection of tools for manipulating geographic and Cartesian data sets, and generating EPS maps."
arch=(i686 x86_64)
url="http://gmt.soest.hawaii.edu/"
license=('GPL')
depends=('netcdf')
makedepends=()
provides=()
install=gmt.install
source=(ftp://ftp.soest.hawaii.edu/gmt/GMT${pkgver}'_'src.tar.bz2 ftp://ftp.soest.hawaii.edu/gmt/GMT${pkgver}'_'share.tar.bz2 ftp://ftp.soest.hawaii.edu/gmt/GMT${pkgver}'_'suppl.tar.bz2 ftp://ftp.soest.hawaii.edu/gmt/GMT${pkgver}'_'triangle.tar.bz2 ftp://ftp.soest.hawaii.edu/gmt/GSHHS'_'coast.tar.bz2)
md5sums=('ad069cfcc8216fdef69e0cb94536c2a6' '378ea1b0e46b09455722df81c4c191ab' '7d4bcb2ac56ee558cae8446363a74e64' '5bccc9d473fc2a659cb21d3aafd8b228' '1f84a99effe96e12fb60f31fa3cf35bb')

build() {
  cd $startdir/src/GMT$pkgver
  mv -f ../share/coast share/ # move coastline files
  ./configure --prefix=/usr --enable-triangle --disable-octave --disable-mex --disable-xgrid --mandir=$startdir/pkg/usr/share/man --enable-netcdf=/usr --datarootdir=$startdir/pkg/usr/share/gmt
  make || return 1
  make prefix=$startdir/pkg/usr install-gmt || return 1
  make prefix=$startdir/pkg/usr datarootdir=$startdir/pkg/usr/share/gmt install-man || return 1
  make prefix=$startdir/pkg/usr datarootdir=$startdir/pkg/usr/share/gmt install-data || return 1
  make prefix=$startdir/pkg/usr datarootdir=$startdir/pkg/usr/share/gmt install-suppl || return 1

  install src/README.TRIANGLE -Dm644 ${pkgdir}/usr/share/licenses/$pkgname/README.TRIANGLE 
}


