# Maintainer: Jaroslav Lichtblau <dragonlord@aur.archlinux.org>

pkgname=bip
pkgver=0.8.7
pkgrel=1
pkgdesc="Multiuser IRC proxy that supports replaying of logged irc conversations"
arch=('i686' 'x86_64')
url="http://bip.milkypond.org/"
license=('GPL')
depends=('flex' 'openssl' 'perl')
makedepends=('bison')
backup=('etc/bip.conf')
source=(https://projects.duckcorp.org/attachments/download/35/$pkgname-$pkgver.tar.gz)
sha256sums=('adcddaed59cf42798139beb167e7ff6ad9378c3f3a20c51264e91b2b1ebc1c45')

build() {
  cd ${srcdir}/$pkgname-$pkgver

  ./configure --prefix=/usr
  make
}

package() {
  cd ${srcdir}/$pkgname-$pkgver

  make DESTDIR=${pkgdir} install
  install -D -m755 ${srcdir}/$pkgname-$pkgver/scripts/bipgenconfig \
    ${pkgdir}/usr/bin/bipgenconfig
  install -D -m644 ${srcdir}/$pkgname-$pkgver/samples/$pkgname.conf \
    ${pkgdir}/usr/share/$pkgname/$pkgname.conf.sample
  install -D -m644 ${srcdir}/$pkgname-$pkgver/samples/$pkgname.vim \
    ${pkgdir}/usr/share/vim/syntax/$pkgname.vim
}
