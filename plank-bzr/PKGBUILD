# Maintainer: D. Can Celasun <dcelasun[at]gmail[dot]com>

pkgname=plank-bzr
_name=plank
pkgver=235
pkgrel=1
pkgdesc="Stupidly simple dock."
arch=('i686' 'x86_64')
url="https://launchpad.net/nautilus-elementary"
license=('GPL')
groups=('gnome')
depends=('vala')
makedepends=('bzr')
provides=(${_name}=0.1)
conflicts=(${_name})
replaces=(${_name})
install=${pkgname}.install

_bzrtrunk=lp:${_name}
_bzrmod=${_name}

build() {
  cd ${srcdir}

  msg "Connecting to the server...."

  if [ -d ${_bzrmod} ]; then
    bzr up ${_bzrmod}
    msg "The local files are updated."
  else
    bzr co ${_bzrtrunk} ${_bzrmod}
  fi

  msg "BZR checkout done or server timeout"
  msg "Starting make..."
  
  cd ${_name}
  ./autogen.sh
  ./configure
  
  sed -i 's|prefix = /usr/local|prefix = /usr|' Makefile
  
  make
}

package() {
  
  make install DESTDIR=$pkgdir
  
}
