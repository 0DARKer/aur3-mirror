# Maintainer: T. Jameson Little <t.jameson.little at gmail dot com>
# Previous Maintainer: Stephen Michael <ihateseptictanks at gmail dot com>
# Previous Maintainer: Simon Tunnat <simon+aur@tunn.at>
# Contributor: Bartlomiej Piotrowski <nospam@bpiotrowski.pl>

pkgname=firefox-esr-bin
_pkgname=${pkgname/-bin/}
pkgver=24.6.0
pkgrel=3
pkgdesc='Standalone web browser from mozilla.org - Extended Support Release'
url='http://www.mozilla.org/en-US/firefox/organizations/'
arch=('i686' 'x86_64')
depends=('gtk2' 'dbus-glib' 'desktop-file-utils' 'libxt' 'mime-types' 'nss' 'shared-mime-info' 'gconf')
optdepends=('libgnome: fixes file association/default browser issues on GNOME desktops.'
            'gstreamer0.10-base-plugins: vorbis decoding, ogg demuxing'
            'gstreamer0.10-good-plugins: webm and mp4 demuxing'
            'gstreamer0.10-bad-plugins: aac, vp8 and opus decoding'
            'gstreamer0.10-ugly-plugins: h.264 and mp3 decoding'
            'gstreamer0.10-ffmpeg: more decoders')
provides=('firefox=24')

license=('MPL' 'GPL' 'LGPL')
install=$_pkgname.install
source=(http://ftp.mozilla.org/pub/mozilla.org/firefox/releases/${pkgver}esr/linux-$CARCH/en-US/firefox-${pkgver}esr.tar.bz2
        $_pkgname.desktop 
        $_pkgname-safe.desktop)
sha512sums=('678693afa4aea653479b060ccc0f06dc48dab6028b2775a1d7e6b618d22a8f5be6897ece049a6942630a0dfea5ab5b0c39d0e30beea8c994c2ab97e90209779a'
            'efe674b915079bcf0664a7ad094258189407b8d7bbbb393e1d5b5915af395446a0c8f74518e63402ed5b008cf7d27740fded3ab93d11b7640cf7ac5cf2d5b3c6 '
            'fafc9dac5de84253db1d1372d7dc2789182e01a556b3f55d4794f4ffa3a9fefc7d28df0351edce8ba3ab0203a7731e098f092011bc7a30ce98cba8c0a340b9b4 ')

if [ "$CARCH" == "i686" ]; then
    sha512sums[0]='d011e7a9c08c2167c94b7e8191b8c8e319b94ac413f0fb0d82ab2d8928ff90bfb2926e3a1f841010ff67f730a913de91ff79c94570ad6c333b8307e4e03aaced'
fi


package() {
	cd $srcdir
	
	install -d $pkgdir/{usr/{bin,share/{applications,pixmaps}},opt}
	cp -r firefox/ $pkgdir/opt/$_pkgname

	ln -s /opt/$_pkgname/firefox $pkgdir/usr/bin/$_pkgname
	install -m644 $srcdir/{$_pkgname.desktop,$_pkgname-safe.desktop} $pkgdir/usr/share/applications/
	install -m644 $srcdir/firefox/browser/icons/mozicon128.png $pkgdir/usr/share/pixmaps/$_pkgname.png
}
