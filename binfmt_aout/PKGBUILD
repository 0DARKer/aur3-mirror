# Maintainer: Elbarto
pkgname=binfmt_aout
pkgver=3.18
pkgrel=1
pkgdesc='binfmt_aout kernel module, for running an a.out binary format'
arch=('i686')
makedepends=('linux-headers' 'linux-api-headers' 'gzip')
url="https://www.kernel.org"
license=("GPLv3")
options=('!strip')
source=("https://raw.githubusercontent.com/torvalds/linux/v{$pkgver}/fs/binfmt_aout.c"
        "Makefile")
sha1sums=('0dd5b2a9e3bf7f04c94bf6a4b3a8629290560721'
          '24969cd0bfe0eba16b15a714839891615001842f')
install=binfmt_aout.install

build(){ 
cd "$srcdir" 
  make   
}

package() {
  cd "$srcdir"
  mkdir -p "${pkgdir}"/lib/modules
  make install INSTALL_MOD_PATH="${pkgdir}"
  gzip "${pkgdir}/lib/modules/`uname -r`/extra/binfmt_aout.ko"
}
