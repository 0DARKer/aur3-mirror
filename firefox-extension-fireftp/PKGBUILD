# Maintainer: Alois Nespor <info@aloisnespor.info>
# Contributor: Tianjiao Yin <ytj000+aur@gmail.com>


pkgname=firefox-extension-fireftp
pkgver=2.0.18
pkgrel=1
arch=('any')
pkgdesc="A free, secure, cross-platform FTP/SFTP client for Mozilla Firefox."
license=('MPL')
url="https://addons.mozilla.org/firefox/addon/684"
depends=("firefox")
source=("ftp://ftp.mozilla.org/pub/addons/684/fireftp-2.0.18-fx+sm.xpi")

package() {
  cd $srcdir
# [ $NOEXTRACT -eq 1 ] || unzip $pkgname-$pkgver-latest.xpi
  local emid=$(sed -n -e '/<\?em:id>\?/!d; s/.*\([\"{].*[}\"]\).*/\1/; s/\"//g; p; q' install.rdf)
  local dstdir=$pkgdir/usr/lib/firefox/browser/extensions/${emid}
  [ -n ${emid} ] || return 1
  install -d $dstdir
  sed -i 's#<em:maxVersion>.*</em:maxVersion>#<em:maxVersion>30.*</em:maxVersion>#' install.rdf
  cp -R * $dstdir
  rm $dstdir/*.xpi
  find $pkgdir -type d -exec chmod 0755 {} \;
  find $pkgdir -type f -exec chmod 0644 {} \;

}

sha256sums=('3cb354fadae3ecc4dea5f9714b3be017189428d5f40839862ad19d0a100b6a9c')
