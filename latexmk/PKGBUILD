# Contributor: Peter Garceau (rockychimp@gmail.com)
# Maintainer: Stefan Husmann <stefan-husmann@t-online.de>
pkgname=latexmk
pkgver=422e
pkgrel=1
arch=('any')
pkgdesc="A perl script with a make-like functionality for latex documents."
url="http://www.phys.psu.edu/~collins/software/latexmk-jcc/versions.html"
license=('GPL2')
depends=('perl')
source=(http://www.phys.psu.edu/~collins/software/latexmk-jcc/$pkgname-$pkgver.zip)
md5sums=('482add7c85439be2939f81f940cd0ebe')

build() {
  install -Dm755 latexmk.pl $pkgdir/usr/bin/latexmk-$pkgver 
  install -Dm644 latexmk.1 -p \
    $pkgdir/usr/share/man/man1/latexmk-$pkgver.1 
  install -d $pkgdir/usr/share/$pkgname 
  echo "\$pscmd = 'ps -aeg';" > \
    $pkgdir/usr/share/$pkgname/LatexMk 
  echo "\$pid_position = 1;" >> \
    $pkgdir/usr/share/$pkgname/LatexMk 
  install -d $pkgdir/usr/share/doc/$pkgname
  for _i in example_rcfiles extra-scripts
  do
    cp -r ${_i} $pkgdir/usr/share/doc/$pkgname
  done 
  rm $pkgdir/usr/share/doc/$pkgname/extra-scripts/*.bat
}
