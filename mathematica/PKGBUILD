# Maintainer: Michael Pusterhofer <pusterhofer at student dot tugraz dot at>
pkgname=mathematica
pkgver=8.0.0
pkgrel=1
pkgdesc="A computational software program used in scientific, engineering, and mathematical fields and other areas of technical computing."
arch=(any)
url="http://www.wolfram.com/mathematica/"
license=('proprietary')
source=()

# Product Name: Mathematica for Students for Sites
# Version: 8.0.0
_math_url="http://www.wolfram.com/solutions/education/students/"
_math_installer="Mathematica_"$pkgver"_Student_LINUX.sh"
_math_md5sum="cf60e53e636a22f36394f6f7bb54f193"

build() {
  #Check existence of Installer
  if [ -f $startdir/$_math_installer ];then
    #md5sum Installer
    _md5sum_calc=`md5sum $startdir/$_math_installer | cut -f1 -d" "`
    if [ $_math_md5sum = $_md5sum_calc ];then
      echo "md5sum($_math_installer):ok"
    else
      echo "md5sum($_math_installer):wrong"
      return 1
    fi
  else
    echo "To build this package you need to place the mathematica-installer($_math_installer) into $startdir"
    echo "If you don't own the installer you can download it from $_math_url after creating an account or maybe from your university"
    return 1
  fi
  
}

package() {
  #Extract and Install Mathematica
  echo "Extracting and installing mathematica:"
  chmod +x $startdir/$_math_installer
  $startdir/$_math_installer -- -execdir=$pkgdir/usr/bin -targetdir=$pkgdir/opt/Mathematica -auto

  #Fix absolute links
  echo "Fixing absolute symlinks"
  cd $pkgdir/usr/bin
  rm *
  ln -s ../../opt/Mathematica/Executables/math
  ln -s ../../opt/Mathematica/Executables/mathematica
  ln -s ../../opt/Mathematica/Executables/Mathematica
  ln -s ../../opt/Mathematica/Executables/mcc
  ln -s ../../opt/Mathematica/Executables/MathKernel
}

# vim:set ts=2 sw=2 et:
