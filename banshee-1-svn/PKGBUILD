# Contributor: Manuel Mazzuola <origin.of@gmail.com>
pkgname=banshee-1-svn
pkgver=3911
pkgrel=4
pkgdesc="Music management and playback for GNOME"
url="http://banshee-project.org/"
license="MIT"
depends=('mono>=1.2.2' 'gstreamer0.10-cdparanoia' 'gstreamer0.10-faac' 'gstreamer0.10-faad' 'gstreamer0.10-gconf' 'gstreamer0.10-gnomevfs' 'gstreamer0.10-lame' 'gstreamer0.10-mad' 'gstreamer0.10-ogg' 'gstreamer0.10-vorbis' 'gtk-sharp-2>=2.8' 'hal' 'musicbrainz' 'nautilus-cd-burner' 'sqlite3>=3.4' 'mono-addins>=0.3.1' 'ndesk-dbus>=0.5' 'ndesk-dbus-glib>=0.3.1' 'taglib-sharp>=2.0' 'mono-zeroconf' 'libmtp' 'ipod-sharp-svn' 'boo>=0.8.1')
arch=('i686')
provides=('banshee-1')
conflicts=('banshee-1')
makedepends=('subversion')
source=()
md5sums=()
install=banshee.install

_svnmod="banshee"
_svntrunk="http://svn.gnome.org/svn/banshee/trunk/banshee"

build() {
  export MONO_SHARED_DIR=${startdir}/src/.wabi
  mkdir -p "${MONO_SHARED_DIR}"

  cd $startdir/src
  msg "Connecting to svn.gnome.org svn server...."
  svn co $_svntrunk $_svnmod

  msg "SVN checkout done or server timeout"
  msg "Starting make..."

  cd $startdir/src/$_svnmod
  
  ./autogen.sh --prefix=/usr --disable-docs --disable-helix --with-gstreamer-0-10 --with-trunk-readme
  make hicolordir=/usr/share/icons/hicolor || return 1
  make hicolordir=/usr/share/icons/hicolor \
  DESTDIR=${startdir}/pkg install

  rm -rf "${MONO_SHARED_DIR}"
}
