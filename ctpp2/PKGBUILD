# Maintainer: Valentin V. Bartenev <i@vbart.ru> http://vbart.info/

pkgname=ctpp2
pkgver=2.6.13
pkgrel=1
pkgdesc='CTPP (or CT++) is the fastest template engine which completely written in C++'
arch=(i686 x86_64)
url='http://ctpp.havoc.ru/en/'
optdepends=(
  'gettext: gettext support'
  'iconv: iconv support'
  'md5: md5 support'
)
makedepends=(cmake make)
source=("http://ctpp.havoc.ru/download/ctpp2-$pkgver.tar.gz")
license=('custom:BSD-like')
md5sums=(4145ec25028f51ae609c8bd33d006fa9)

build() {
  cd "$srcdir/$pkgname-$pkgver"
  mkdir build
  cd build
  cmake -Wno-dev -DSKIP_RELINK_RPATH:BOOL=ON .. || return 1
  make VERBOSE=1 || return 1
  env LD_LIBRARY_PATH=".:$LD_LIBRARY_PATH" make test || return 1
  make DESTDIR="$pkgdir" install || return 1
  install -Dm 644 ../LICENSE "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
} 

# Enjoy! ;)