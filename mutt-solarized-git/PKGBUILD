# Maintainer: aksr <aksr at t-com dot me>

pkgname=mutt-solarized-git
pkgver=0.r12.3b23c55
pkgrel=1
pkgdesc="Solarized Colorscheme for Mutt."
arch=('any')
#url="http://ethanschoonover.com/solarized"
url="https://github.com/altercation/mutt-colors-solarized"
license=('MIT')
makedepends=('git')
depends=('mutt')
conflicts=('mutt-solarized')
provides=('mutt-solarized')
md5sums=('SKIP')

install='echo.install'

_gitroot="https://github.com/altercation/mutt-colors-solarized.git"
_gitname="mutt-colors-solarized"

pkgver() {
  cd "$srcdir/$_gitname"
  printf "0.r%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse --short HEAD)"
}

build() {
  cd "$srcdir"
  msg "Connecting to GIT server...."

  if [[ -d "$_gitname" ]]; then
    cd "$_gitname" && git pull origin
    msg "The local files are updated."
  else
    git clone "$_gitroot" "$_gitname"
  fi

  msg "GIT checkout done or server timeout"

  rm -rf "$srcdir/$_gitname-build"
  git clone "$srcdir/$_gitname" "$srcdir/$_gitname-build"
}

package() {
  cd "$srcdir/$_gitname-build"

  ## Change the default directory for mutt's colorschemes:
  directory="/usr/share/doc/mutt/colors/solarized/"

  install -Dm644 mutt-colors-solarized-light-16.muttrc  $pkgdir/$directory/mutt-colors-solarized-light-16.muttrc
  install -Dm644 mutt-colors-solarized-dark-16.muttrc   $pkgdir/$directory/mutt-colors-solarized-dark-16.muttrc
  install -Dm644 mutt-colors-solarized-light-256.muttrc $pkgdir/$directory/mutt-colors-solarized-light-256.muttrc
  install -Dm644 mutt-colors-solarized-dark-256.muttrc  $pkgdir/$directory/mutt-colors-solarized-dark-256.muttrc

  ## If you want to modify the colorscheme or colors, you can use the compile script and template to do so.
  install -Dm755 mutt-compile-colors.sh $pkgdir/usr/share/doc/$pkgname/mutt-compile-colors.sh
  install -Dm644 README.md              $pkgdir/usr/share/doc/$pkgname/README.md
}

# vim:set ts=2 sw=2 et:
