# Maintainer: Oleksandr Natalenko aka post-factum <oleksandr@natalenko.name>
pkgname=libpfrng
pkgver=0.0.8
pkgrel=1
pkgdesc="CPU jitter based random number generator"
url="https://github.com/pfactum/libpfrng/"
arch=('i686' 'x86_64')
license=('LGPLv3')
depends=('glibc')
makedepends=('gcc' 'cmake')
source=(https://github.com/pfactum/libpfrng/archive/v${pkgver}.tar.gz)

md5sums=(2f1a704df841fc9c0e2f40198840e1ec)

install='libpfrng.install'

build() {
	cd ${srcdir}/${pkgname}-${pkgver}
	mkdir -p build
	cd build
	cmake -DCMAKE_INSTALL_PREFIX=${pkgdir}/usr ..
	# Detect CPUs count automatically
	CPUS_COUNT=`cat /proc/cpuinfo | grep processor | wc -l`
	echo "Compiling using $CPUS_COUNT thread(s)"
	make -j$CPUS_COUNT
}

package() {
	cd ${srcdir}/${pkgname}-${pkgver}/build
	make install
}

