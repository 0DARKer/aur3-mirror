pkgname=pidgin-msn
pkgver=2.6.6
pkgrel=1
pkgdesc="Pidgin patched version that supports new plugins for MSN protocol."
arch=('i686' 'x86_64')
url="http://pidgin.im/"
license=('GPL')
depends=('startup-notification' 'gtkspell' 'libxss' 'nss' 'libsasl' 'python'
	'hicolor-icon-theme' 'silc-toolkit' 'gstreamer0.10-base' 'farsight2')
makedepends=('avahi' 'tk' 'ca-certificates' 'intltool')
optdepends=('gstreamer0.10-good: to play sounds'
	'avahi: Bonjour protocol support'
	'tk: Tcl/Tk scripting support'
	'ca-certificates: SSL CA certificates'
	'aspell: for spelling correction')
provides=('pidgin=2.6.6' 'libpurple=2.6.6')
options=('!libtool')
conflicts=('pidgin' 'libpurple')
install=pidgin-msn.install
source=(http://heanet.dl.sourceforge.net/sourceforge/pidgin/pidgin-$pkgver.tar.bz2 
pastie-649601.diff
)

build() {

cd "$srcdir/pidgin-$pkgver"

#  patch pidgin for msn plus plugin
	patch -Np0 -i ../pastie-649601.diff

  ./configure --prefix=/usr \
              --sysconfdir=/etc \
              --disable-schemas-install \
              --disable-meanwhile \
              --enable-nm \
              --disable-perl \
              --disable-gnutls \
              --enable-cyrus-sasl \
              --disable-doxygen \
              --with-system-ssl-certs=/etc/ssl/certs || return 1
  make || return 1
  make DESTDIR="$pkgdir" install || return 1

  # Remove GConf schema file
  rm -rf "$pkgdir/etc" || return 1

}

md5sums=('b37ab6c52db8355e8c70c044c2ba17c1'
         'eb60e05ef5945b9be784230e466ef9a2')
