# Contributor: Christoph Zeiler <archNOSPAM_at_moonblade.dot.org>

pkgname=gambatte-qt
pkgver=0.4.1
pkgrel=2
pkgdesc="A Qt4 frontent for the Gambatte emulator"
arch=('i686' 'x86_64')
url="http://sourceforge.net/projects/gambatte/"
license=('GPL')
depends=('qt' 'libgl' 'alsa-lib' 'gambatte')
makedepends=('make')
source=(http://downloads.sourceforge.net/gambatte/gambatte_src-$pkgver.tar.gz \
	$pkgname.desktop)
md5sums=('cfe52c33bbb2e719a957bde64427a18c'
         'd74be9dbb91c6b517099f5f1dc46c88e')

build() {
  cd gambatte_src-$pkgver/gambatte_qt

  sed '1i#include <cstdio>' -i src/framework/audioengines/ossengine.cpp

  qmake
  make  || return 1

  install -Dm755 bin/gambatte_qt "$pkgdir"/usr/bin/$pkgname
  install -Dm644 man/gambatte_qt.6 "$pkgdir"/usr/share/man/man6/$pkgname.6

  install -Dm644 "$srcdir"/$pkgname.desktop "$pkgdir"/usr/share/applications/$pkgname.desktop
}
