pkgname=ssh-askpass-fullscreen
pkgver=20100411
pkgrel=1
pkgdesc="A small SSH Askpass replacement written with GTK2"
url="http://github.com/atj/ssh-askpass-fullscreen"
arch=(i686 x86_64)
license=('GPL')
conflicts=('x11-ssh-askpass')
depends=('gtk2' 'openssh')
makedepends=('pkgconfig' 'git')
source=(ssh-askpass-fullscreen.sh)
md5sums=('1f653619805275a8348c55bdb978d514')

_gitroot='git://github.com/atj/ssh-askpass-fullscreen.git'
_gitname='ssh-askpass-fullscreen'

build() {
    if [ -e $pkgname ] ; then
      cd $pkgname
      git pull . master || return 1
      cd ..
    else
      git clone $_gitroot $_gitname || return 1
    fi

    cd $srcdir/$pkgname/src

    gcc -o ssh-askpass-fullscreen ssh-askpass-fullscreen.c `pkg-config --libs gtk+-2.0` `pkg-config --cflags gtk+-2.0`
    mkdir -p $pkgdir/usr/lib/openssh
    install -m755 $srcdir/$pkgname/src/ssh-askpass-fullscreen $pkgdir/usr/lib/openssh/
    mkdir -p $pkgdir/etc/profile.d
    install -m755 $startdir/ssh-askpass-fullscreen.sh $pkgdir/etc/profile.d/
}
