# Mantainer: Gianni Vialetto <gianni at rootcube dot net>
# Contributor: Alex Weil <ajonat at gmail dot com>

pkgname=bochs-with-debugger
_pkgrealname=bochs
pkgver=2.5.1
pkgrel=1
pkgdesc="A portable x86 PC emulation software package with builtin debugger"
arch=(i686 x86_64)
license=('LGPL')
url="http://bochs.sourceforge.net/"
source=(http://downloads.sourceforge.net/project/${_pkgrealname}/${_pkgrealname}/${pkgver}/${_pkgrealname}-${pkgver}.tar.gz)
depends=('libxpm' 'gtk2')
conflicts=('bochs')
md5sums=('4fe5325ec422a7f74dbb0adb52c76bb6')
sha256sums=('8d3f2ccd8fc3df2aff7ea370afc521cadd4a4f545faf6b0421013453ce3ea26e')
sha512sums=('79e0bdfeecf499c37fb30194a85d4074316b0a9b8b89580d94e91f0e278f6b60354e2e509e4606eb38100a5fc2e88267a5106eb6c7cbcd1fc1a6453463f717e2')

build() {
	cd "${srcdir}/${_pkgrealname}-${pkgver}"
	LIBS=-lpthread ./configure					\
						--prefix=/usr			\
						--enable-debugger		\
						--enable-debugger-gui
	make
}

package() {
    cd "${srcdir}/${_pkgrealname}-${pkgver}"

	make prefix=${startdir}/pkg/usr install
}
