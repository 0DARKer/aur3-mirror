# Maintainer: Daniel Lopez Monagas <zokeber@archlinux.org.ve>
# Contributor: David H. Bronke <whitelynx@gmail.com>
pkgname=sunvox
pkgver=1.6.4
pkgrel=1
pkgdesc="SunVox is a small, fast and powerful music sequencer with modular synthesizers"
arch=('i686' 'x86_64')
url="http://www.warmplace.ru/soft/sunvox/"
license=('BSD')
depends=('alsa-lib')
makedepends=('unzip')
install=
changelog=
source=(http://www.warmplace.ru/soft/sunvox/$pkgname-$pkgver.zip sunvox.desktop sunvox.png)
md5sums=('4af10b1a5ac9bbd6d94d1a5227ffabbc'
		 'fefc4c911470b3e968f6b81399c424c6'
		 '969c5d8abf72b6a77c46df7b56a119ee')

build() {
	cd "${srcdir}/"

	install -d ${pkgdir}/{usr/{bin,share/{applications/${pkgname},icons/${pkgname}}},opt/${pkgname}}

	mv "instruments" "${pkgdir}/opt/$pkgname"  || return 1
	mv "examples" "${pkgdir}/opt/$pkgname"  || return 1
	mv "docs" "${pkgdir}/opt/$pkgname"  || return 1
	
	install -Dm755 ${pkgname}.png "${pkgdir}/usr/share/icons/${pkgname}/"  || return 1
	install -Dm755 ${pkgname}.desktop "${pkgdir}/usr/share/applications/"  || return 1

	if [ "$CARCH" = "x86_64" ]; then
		install -Dm755 "${pkgname}/linux_x86_64/$pkgname" "${pkgdir}/opt/$pkgname"   || return 1
		install -Dm644 "${pkgname}/linux_x86_64/sunvox_config.ini" "${pkgdir}/opt/$pkgname"  || return 1
	else
		install -Dm755 "${pkgname}/linux_x86/$pkgname" "${pkgdir}/opt/$pkgname"  || return 1
		install -Dm644 "${pkgname}/linux_x86/sunvox_config.ini" "${pkgdir}/opt/$pkgname"  || return 1
	fi

	ln -s /opt/$pkgname/$pkgname "${pkgdir}/usr/bin/$pkgname" || return 1

}

# vim:set ts=2 sw=2 et:
