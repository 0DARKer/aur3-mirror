# Maintainer:  Andrzej Giniewicz <gginiu@gmail.com>

pkgname=input-wacom
pkgver=0.10.10_2
pkgrel=2
pkgdesc="Kernel driver for Wacom tablets"
arch=('i686' 'x86_64')
url="http://linuxwacom.sourceforge.net/"
license=('GPL')
depends=('kernel26>=2.6.26')
makedepends=('kernel26-headers')
options=('!libtool')
source=(http://prdownloads.sourceforge.net/linuxwacom/input-wacom-${pkgver/_/-}.tar.bz2)
md5sums=('3872f368c78cec43990a0b32c1768da8')

build() {
  cd "${srcdir}"/input-wacom-${pkgver/_/-}
  ./configure --prefix=/usr
  make
}

package() {
  cd "${srcdir}"/input-wacom-${pkgver/_/-}
  _ver=`uname -r | sed 's/[0-9]*\.[0-9]*\.\([0-9]*\).*/\1/'`
  if test $_ver -ge 36
  then
    _ver=2.6.36
  else
    _ver=2.6.30
  fi
  install -D -m 644 $_ver/wacom.ko "${pkgdir}"/lib/modules/$(uname -r)/updates/wacom.ko
  install -D -m 644 $_ver/wacom_w8001.ko "${pkgdir}"/lib/modules/$(uname -r)/updates/wacom_w8001.ko
}

