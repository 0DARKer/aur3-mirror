# Contributor: mightyjaym <jm.ambrosino@free.fr>

pkgname=swiftweasel-nocona
_pkgname=swiftweasel
pkgdate="07-01-08"
pkgver=2.0.0.15
pkgrel=1
pkgdesc="Mozilla Firefox optimized build for Intel Core 2 processors (32 and 64 bit versions)."
arch=('i686' 'x86_64')
url="http://swiftweasel.sourceforge.net/"
conflicts=('swiftweasel-athlon64' 'swiftweasel-athlon-xp' 'swiftweasel-k8' 'swiftweasel-pentium-3m' 'swiftweasel-pentium-4m' 'swiftweasel-pentium-4' 'swiftweasel-pentium-m' 'swiftweasel-prescott')
license=('MPL' 'GPL' 'LGPL')
depends=(nss gtk2 mozilla-common popt desktop-file-utils libxt libidl2 libxcomposite libstdc++5)
provides=('firefox')

if [ "$CARCH" = "x86_64" ]; then
	nbits=64bit
	md5sums=('388befb3e5e3e08f44004cc28c1cf608' 'e02fc1051ff31e05e45ec99eb38e16f6' 'eef46b6617fb0dab69037c122793c6fb')

else 	nbits=32bit
	md5sums=('00df853388658022263ad1652cc099ff' 'e02fc1051ff31e05e45ec99eb38e16f6' 'eef46b6617fb0dab69037c122793c6fb')
fi

source=(http://kent.dl.sourceforge.net/swiftweasel/swiftweasel-${pkgver}_${pkgdate}_nocona-$nbits.tar.gz
        swiftweasel.desktop
        swiftweasel-safe.desktop)

build() {

  cd $startdir/src/
  mkdir $startdir/pkg/opt/
  cp -r $_pkgname $startdir/pkg/opt/$_pkgname
  mkdir -p $startdir/pkg/usr/bin
  ln -s /opt/$_pkgname/$_pkgname $startdir/pkg/usr/bin/$_pkgname

  mkdir -p $startdir/pkg/usr/share/applications
  mkdir -p $startdir/pkg/usr/share/pixmaps

  install -m644 -D $startdir/src/swiftweasel/icons/mozicon128.png \
	$startdir/pkg/usr/share/pixmaps/swiftweasel.png || return 1
  install -m644 $startdir/src/swiftweasel.desktop \
	$startdir/pkg/usr/share/applications/ || return 1
  install -m644 $startdir/src/swiftweasel-safe.desktop \
	$startdir/pkg/usr/share/pixmaps/ || return 1

}
