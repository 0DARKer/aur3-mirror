# Contributor: JokerBoy <jokerboy at punctweb dot ro>
# Contributor: vogo <vogo(at)seznam(dot)cz>

pkgname=pacman-color
pkgver=4.0.3
pkgrel=1
pkgdesc="A color patched command-line frontend for libalpm (Pacman)"
arch=('i686' 'x86_64')
url="http://www.archlinux.org/pacman/"
license=('GPL')
depends=('pacman>=4.0' 'pacman<4.1')
backup=('etc/pacman.d/color.conf')
source=("http://mirrors.kernel.org/archlinux/other/pacman/pacman-${pkgver}.tar.gz"
        "${pkgname}-${pkgver}.patch" 'color.conf')
md5sums=('387965c7125e60e5f0b9ff3b427fe0f9'
         '90c1da0bd3a00f66823625bbeb2156ad'
         '47665f5054196c20ba0dd280a8d4c5e1')

build() {
  cd "pacman-${pkgver}"
  patch -p1 -i "${srcdir}/${pkgname}-${pkgver}.patch"
  ./configure \
      --prefix=/usr \
      --sysconfdir=/etc \
      --localstatedir=/var \
      --disable-doc
  make
}

package() {
  # install pacman-color && color.conf
  install -Dm755 "pacman-${pkgver}/src/pacman/.libs/pacman" "${pkgdir}/usr/bin/pacman-color"
  install -Dm644 'color.conf' "${pkgdir}/etc/pacman.d/color.conf"
}
