# Maintainer: Limao Luo <luolimao@gmail.com>
# Contributor: Florian LÃ©ger <florian6 dot leger at laposte dot net>
# Contributor: osily <ly50247@gmail.com>

pkgname=flashplayer-standalone
pkgver=11.2.202.285
pkgrel=1
pkgdesc="Macromedia standalone flash player (nonfree)"
arch=(i686 x86_64)
url=http://www.adobe.com/support/flashplayer/downloads.html
license=(custom)
# License matrix: http://www.adobe.com/products/eulas/
depends=(desktop-file-utils hicolor-icon-theme lib32-curl lib32-gtk2 lib32-libxt lib32-nss)
[[ $CARCH == "i686" ]] && depends=(${depends[@]/lib32-/})
options=(!strip)
install=$pkgname.install
source=(http://fpdownload.macromedia.com/pub/flashplayer/updaters/11/flashplayer_11_sa.i386.tar.gz
    license.pdf::http://www.adobe.com/products/eulas/pdfs/PlatformClients_PC_WWEULA-MULTI-20110809_1357.pdf
    flashplayer.desktop)
sha256sums=('a8af0719809553bdeeb90d9b4916c45d9ef0edc263f283cc93e8ec25718a06fb'
            'd30b03c0f70f7c4a7837751286bab579d5033f2e7a1548279a9c09ea905b2849'
            'e0f3061f6d8e12a4ca543c7d80562563eac79afbf9da149b43b9c6d7be621dd4')
sha512sums=('e3835b715de7dc50ac9bf0459d66e3311380640be591c95658f4cc226901fb7ada0bd600d942b20e10bd9f40d59fda2ce34c5b5b186757b201fcdeb0b862f6a3'
            'a70fd7127f0f9d64f2c872d1e4634d93e24fdea165abfbe20724e68c1b7297df46362cb449b5a78d0eb4a68e43426965359ca93fd4ba4848d2542e5505bcd2fe'
            'e4139b265896ebd276b4c7931d5718db7ac8b25e5e86decb2161c94d2b6b410dc7160667cda3a330ece40e64e7809d7afc5ddcc94e09352e84359fa4c7fe3e2d')

package() {
    desktop-file-install flashplayer.desktop --dir "$pkgdir"/usr/share/applications/
    install -Dm644 license.pdf "$pkgdir"/usr/share/licenses/$pkgname/license.pdf
    cd install_flash_player_linux_sa/
    install -Dm755 flashplayer "$pkgdir"/usr/bin/flashplayer
    install -d "$pkgdir"/usr/share/
    rm usr/share/icons/*.xpm

    for d in application-registry mime-info mimelnk icons; do
        cp -r usr/share/$d "$pkgdir"/usr/share/
    done
}
