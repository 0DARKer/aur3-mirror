# Mantainer: fbt <fbt@fleshless.org>
# vim: ft=sh syn=sh et

pkgdesc="Standalone systemd libs (including -compat)"
pkgname='libsystemd-standalone'
pkgver=216
pkgrel=1
groups=( spark )
arch=('i686' 'x86_64')
url="http://www.freedesktop.org/wiki/Software/systemd"
license=('GPL2' 'LGPL2.1' 'MIT')
makedepends=('acl' 'cryptsetup' 'docbook-xsl' 'gobject-introspection' 'gperf'
             'gtk-doc' 'intltool' 'kmod' 'libcap' 'libgcrypt'  'libmicrohttpd' 'libxslt'
             'linux-api-headers' 'pam' 'python' 'python-lxml' 'quota-tools' 'xz')
options=('strip')
source=("http://www.freedesktop.org/software/systemd/systemd-$pkgver.tar.xz")
md5sums=('04fda588a04f549da0f397dce3ae6a39')

install='libsystemd.install'

provides=( "libsystemd=${pkgver}" )
conflicts=( libsystemd )

build() {
  cd "systemd-$pkgver"

  ./configure --enable-compat-libs

  make
}

package() {
  cd "$srcdir/systemd-${pkgver}"
  mkdir -m755 -p "${pkgdir}/usr/lib"

  find .libs -name 'libsystemd*.so.*' -type f -exec install -m644 {} "${pkgdir}/usr/lib/" \;
}
