# Maintainer: Serge Ziryukin <ftrvxmtrx@gmail.com>

pkgname=dypgen
pkgver=20101114
pkgrel=3
pkgdesc="GLR parser generator for Objective Caml"
arch=('i686' 'x86_64')
url=("http://dypgen.free.fr")
license=('CeCILL-B')
depends=('ocaml')
makedepends=('ocaml' 'ocaml-findlib')
source=(http://dypgen.free.fr/dypgen-${pkgver}-1.tar.bz2)
sha256sums=('43a880981c55235eed60987f6fafb275eeebea6bb4b470a82bf9ca26aaa18b70')
options=(!makeflags)

build () {
  cd "${srcdir}/${pkgname}"
  make || return 1
}

package () {
  cd "${srcdir}/${pkgname}"

  make install \
    DYPGENLIBDIR="${pkgdir}/$(ocamlfind printconf destdir)" \
    DESTDIR="${pkgdir}" || return 1

  install -D -m 644 dypgen-doc.pdf $pkgdir/usr/share/doc/dypgen/dypgen-doc.pdf
  install -D -m 644 Licence_CeCILL-B_V1-en.txt $pkgdir/usr/share/licenses/dypgen/LICENSE
}
