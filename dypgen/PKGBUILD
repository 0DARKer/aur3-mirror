# Maintainer: Serge Ziryukin <ftrvxmtrx@gmail.com>

pkgname=dypgen
pkgver=20111127
pkgrel=1
pkgdesc="GLR parser generator for Objective Caml"
arch=('i686' 'x86_64')
url=("http://dypgen.free.fr")
license=('CeCILL-B')
depends=('ocaml')
makedepends=('ocaml' 'ocaml-findlib')
source=(http://dypgen.free.fr/dypgen-${pkgver}-1.tar.bz2)
sha256sums=('4d105854bd29aa54336061723dbe21b6dc35b80cc4c317c6d7ec38d8f6846f7d')
options=(!makeflags)

build () {
  cd "${srcdir}/${pkgname}"
  make || return 1
}

package () {
  cd "${srcdir}/${pkgname}"

  make install \
    DYPGENLIBDIR="${pkgdir}/$(ocamlfind printconf destdir)" \
    DESTDIR="${pkgdir}" || return 1

  install -D -m 644 dypgen-doc.pdf $pkgdir/usr/share/doc/dypgen/dypgen-doc.pdf
  install -D -m 644 Licence_CeCILL-B_V1-en.txt $pkgdir/usr/share/licenses/dypgen/LICENSE
}
