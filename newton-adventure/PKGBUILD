# Maintainer: archtux <antonio dot arias99999 at gmail.com>

pkgname=newton-adventure
pkgver=1.2
pkgrel=2
pkgdesc="A 2D platform game where the hero can change gravity direction"
arch=('i686' 'x86_64')
url="http://bci.im/devnewton/fossils/newton_adventure/doc/trunk/www/index.wiki"
license=('BSD' 'CC-BY-SA')
depends=('java-environment')
source=(http://bci.im/devnewton/fossils/newton_adventure/doc/trunk/www/downloads/newton_adventure_${pkgver}.zip
        http://bci.im/devnewton/fossils/newton_adventure/logo
        newton-adventure
        newton-adventure.desktop)
md5sums=('ee3f5dfdfd4d54162709f36426692fb7'
         'c2420b5c557dfeeb4ef4d1214ca4735d'
         'b08683b03b1358b30130744c9abe8a17'
         '380ba4d2d93669476e29a174f26f837c')

build() {
  cd $srcdir/newton_adventure_${pkgver}

  # Remove unneeded stuff
  rm -rf native/{macosx,solaris,windows}
  rm lib/{AppleJavaExtensions,asm-debug-all,libtiled-android,lwjgl-debug,lwjgl_test,lwjgl_util_applet}.jar
  rm run*  
  cd native/linux
  if [ "${CARCH}" = 'x86_64' ]; then
  rm libjinput-linux.so liblwjgl.so libopenal.so
elif  [ "${CARCH}" = 'i686' ]; then 
  rm libjinput-linux64.so liblwjgl64.so libopenal64.so}
fi
  
  # Install
  cd $srcdir/newton_adventure_${pkgver}
  mkdir -p $pkgdir/usr/share/newton-adventure
  cp -r * $pkgdir/usr/share/newton-adventure

  # Desktop Icon
  cd $startdir
  install -Dm644 logo $pkgdir/usr/share/pixmaps/$pkgname.gif
  install -Dm644 $pkgname.desktop $pkgdir/usr/share/applications/$pkgname.desktop

  # Start file
  install -Dm755 $pkgname $pkgdir/usr/bin/$pkgname
}