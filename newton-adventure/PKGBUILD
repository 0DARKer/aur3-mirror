# Maintainer: archtux <antonio dot arias99999 at gmail dot com>

pkgname=newton-adventure
pkgver=1.15
pkgrel=1
pkgdesc="A 2D platform game where the hero can change gravity direction"
arch=('i686' 'x86_64')
url="http://devnewton.bci.im/games/newton_adventure"
license=('BSD' 'CC-BY-SA')
depends=('java-environment')
source=(http://devnewton.bci.im/media/avatar.png)
if [ "${CARCH}" = 'x86_64' ]; then
  source=(http://dl.bci.im/games/newton_adventure/$pkgname-$pkgver-1.x86_64.rpm
          http://devnewton.bci.im/media/avatar.png)
  md5sums=('4261b34351140da418b68de8e0609c87'
           'b5066251cffa190d46d373181ef40a7d')
elif  [ "${CARCH}" = 'i686' ]; then
  source=(http://dl.bci.im/games/newton_adventure/$pkgname-$pkgver-1.i686.rpm
          http://devnewton.bci.im/media/avatar.png)
  md5sums=('f059c6f2ee5f64ef5aedf642cab821db'
           'b5066251cffa190d46d373181ef40a7d')
fi

package() {
  cp -r $srcdir/* $pkgdir

  # Fix Desktop icon
  install -Dm644 avatar.png $pkgdir/usr/share/pixmaps/newton-adventure.png
  sed -i 's|Game;|Game;ArcadeGame|;s|Icon=/opt/newton-adventure/icon.png|Icon=/usr/share/pixmaps/newton-adventure.png|'\
  $pkgdir/usr/share/applications/newton-adventure{,-safe}.desktop
}