# Contributor: Alex Griffin <griffin.aj@gmail.com>
pkgname=spacechem-demo
_realname=SpaceChemDemo
pkgver=1006
pkgrel=1
pkgdesc="SpaceChem is an obscenely addictive, design-based puzzle game about machine building and fake science."
arch=('i686' 'x86_64')
url="http://www.spacechemthegame.com/"
license=('custom')
depends=('mono' 'sdl' 'sdl_image' 'sdl_mixer' 'xclip')
install=spacechem.install
source=("http://collinarnold.net/zachtronics/$_realname-$pkgver.tar.gz")
md5sums=('2c50b1a8e16e4da387dc12eabd4d5e80')

build() {
  cd "$srcdir"
  tar xzf "../$_realname-$pkgver.tar.gz"

  if [ `arch` = x86_64 ]; then
    ./make-amd64-package.sh
  fi
}

package() {
  cd "$srcdir"

  if [ `arch` = x86_64 ]; then
    ar x $_realname-amd64.deb
  else
    ar x $_realname-i386.deb
  fi

  cd "$pkgdir"
  tar xzf "$srcdir/data.tar.gz"
  mkdir -p usr/share/licenses/$pkgname
  mv opt/zachtronicsindustries/$pkgname/readme/* usr/share/licenses/$pkgname/
  rmdir opt/zachtronicsindustries/$pkgname/readme
}

