# Maintainer: Vinícius dos Santos Oliveira <vini.ipsmaker@gmail.com>
pkgname=tufao-plugin
pkgver=0.0.1
pkgrel=2
pkgdesc="A QtCreator plugin to work with Tufão."
arch=('i686' 'x86_64')
url="http://tufao.googlecode.com/"
license=('LGPL3')
depends=('qtcreator=2.4.1')
source=('http://get.qt.nokia.com/qtcreator/qt-creator-2.4.1-src.tar.gz'
        'http://tufao.googlecode.com/files/tufao-0.2.2-src.tar.bz2')
md5sums=('e3a95b86df5ce9151b40cfbb2b8bbf3b'
         'd41f2e9f3d0b48aefd62485d4f5f2f13')

build() {
  cd "$srcdir/qt-creator-2.4.1-src"
  mkdir -p build
  cd build
  qmake ../qtcreator.pro
  make

  cd "$srcdir/tufao/tools/qtcreatorplugin"
  export QTC_SOURCE="$srcdir/qt-creator-2.4.1-src"
  export QTC_BUILD="$srcdir/qt-creator-2.4.1-src/build"
  qmake
  make
}

package() {
  cd "$srcdir/qt-creator-2.4.1-src/build/lib/qtcreator/plugins"
  mkdir -p "$pkgdir/usr/lib/qtcreator/plugins"
  cp -r TufaoTeam "$pkgdir/usr/lib/qtcreator/plugins"
}
