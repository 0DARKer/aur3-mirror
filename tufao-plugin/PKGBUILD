# Maintainer: Vinícius dos Santos Oliveira <vini.ipsmaker@gmail.com>
pkgname=tufao-plugin
pkgver=0.0.1
pkgrel=1
pkgdesc="A QtCreator plugin to work with Tufão."
arch=('i686' 'x86_64')
url="http://tufao.googlecode.com/"
license=('LGPL3')
depends=('qtcreator')
source=('http://get.qt.nokia.com/qtcreator/qt-creator-2.4.0-src.tar.gz'
        'http://code.google.com/p/tufao/downloads/detail?name=qtcreatorplugin-0.0.1.tar.bz2&can=2&q=')
md5sums=('80c1a2be4c685ce147c42424ad977e1a'
         'f1ba782d622b8ba5d1eb5da5e5f9670d')

build() {
  cd "$srcdir/qt-creator-2.4.0-src"
  mkdir -p build
  cd build
  qmake ../qtcreator.pro
  make

  cd "$srcdir/qtcreatorplugin"
  export QTC_SOURCE="$srcdir/qt-creator-2.4.0-src"
  export QTC_BUILD="$srcdir/qt-creator-2.4.0-src/build"
  qmake
  make
}

package() {
  cd "$srcdir/qt-creator-2.4.0-src/build/lib/qtcreator/plugins"
  mkdir -p "$pkgdir/usr/lib/qtcreator/plugins"
  cp -r TufaoTeam "$pkgdir/usr/lib/qtcreator/plugins"
}
