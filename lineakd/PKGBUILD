# $Id: PKGBUILD,v 1.10 2007/09/21 04:35:20 eric Exp $
# Maintainer: p2k <Patrick.Schneider@uni-ulm.de>
# Contributor: Abakus <java5@arcor.de>
pkgname=lineakd
pkgver=0.9
pkgrel=4
pkgdesc="Linux Support for Easy Access and Internet Keyboards"
arch=('i686' 'x86_64')
url="http://lineak.sourceforge.net/"
license=('GPL')
depends=('gcc-libs' 'libxext' 'libsm' 'libxtst')
makedepends=('autoconf' 'automake' 'gettext')
backup=('etc/lineakkb.def')
options=('!libtool' '!makeflags')
source=(http://prdownloads.sourceforge.net/sourceforge/lineak/$pkgname-$pkgver.tar.gz
	lineakd
	lineakd.diff)
md5sums=('8a45672a6cea666873398ecc36a5070c'
         'e767f71a449aa898ade42271419b0406'
         '77ae78d9354eb30b9f191db44003cd66')

build() {
    cd $startdir/src/$pkgname-$pkgver
    patch -p1 -i $startdir/lineakd.diff || return 1
    # Note: The guys at LinEAK probably made something wrong with their
    #       autoconf/automake. Let's run our autoconf/automake to fix that.
    echo "Running autoreconf..."
    autoreconf || return 1
    ./configure --prefix=/usr --sysconfdir=/etc --mandir=/usr/man --enable-evtest
    make || return 1
    make DESTDIR=$startdir/pkg install
    install -D -m744 $startdir/lineakd $startdir/pkg/etc/rc.d/lineakd
}
