# Maintainer: Gadget3000 <gadget3000 at msn dot com>
# Contributor: Giovanni Scafora <giovanni@archlinux.org>

pkgname=zesarux-git

pkgver=r1151.0fed729
pkgrel=1
pkgdesc="A Zx80/81 and Zx Spectrum 32/48/128/+2/+3 emulator"
arch=('i686' 'x86_64')
url="http://sourceforge.net/projects/zesarux/"
license=('GPL3')
depends=()
optdepends=('pulseaudio: for support Pulseaudio'
	'openssl: for enable SSL functions')
	
source=('zesarux-code::git+git://git.code.sf.net/p/zesarux/code')
md5sums=('SKIP')

pkgver() {
  	cd "$srcdir/zesarux-code"
  	printf "r%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse --short HEAD)"
}

build() {
	cd "$srcdir/zesarux-code"
	./configure --prefix=/${pkgdir}/usr --disable-caca --disable-aa
	make
}
package(){
	if [  !-d "${pkgdir}/usr" ]; then
		mkdir "${pkgdir}/usr"
	fi
	cd ${srcdir}/zesarux-code
	make  DESTDIR="${pkgdir}" install
}
