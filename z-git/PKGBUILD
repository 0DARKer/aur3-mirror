# Maintainer: Patrick Palka <patrick@parcs.ath.cx>
# Development: http://closure.ath.cx/aur-dev

pkgname=z-git
pkgver=20110219
pkgrel=4
pkgdesc="z keeps track of where you've been and provides a convenient \
way to jump to directory that you actually use (git version)"
url="http://github.com/rupa/z/ "
arch=('any')
license=('WTFPL')
install=z-git.install
source=(z-git.install arch-linux-support.patch)
md5sums=('26e248a010b226a7780e91808efa7af8'
         '039bc0b2f05eee73e329adbb96e458d2')
depends=('sh')
makedepends=('git')

_gitroot="git://github.com/rupa/z.git"
_gitname="z"

package() {
  cd $srcdir
  msg "Connection to z repository..."
  if [ -d $srcdir/$_gitname ]; then
      cd $_gitname && git pull origin
      msg "The local files are updated."
  else
      git clone $_gitroot && cd $_gitname
  fi
  patch --verbose -p0 -i ../arch-linux-support.patch
  install -vDm755 "z.sh" "${pkgdir}/etc/profile.d/z.sh"
  install -vDm755 "README" "${pkgdir}/usr/share/doc/z-git/README"
}
