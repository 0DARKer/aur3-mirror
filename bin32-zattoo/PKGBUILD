pkgname=bin32-zattoo
_pkgname=zattoo
pkgver=4.0.5
pkgrel=3
pkgdesc="Watch television over your broadband Internet connection  (account required, registration on http://zattoo.com)"
arch=('x86_64')
url="http://zattoo.com/"
license=('custom')
makedepends=('deb2targz')
depends=('flashplugin' 'lib32-qt')
provides=('zattoo')
conflicts=('zattoo-ch' 'zattoo' 'zattoo4' 'zattoo-beta')
install=zattoo.install
source=(http://download.zattoo.com/${_pkgname}-${pkgver}-i386.deb \
        License.txt \
        zattoo)

md5sums=('5fc6e9bebebf7b990ce0b37ea73fca60'
         'bfd7fe899abba912128021bb42803e20'
         '03e03e2d6a4c5c61f7f71e55875951c4')

build() {
	cd ${srcdir} || return 1

	# DEB ressources
	deb2targz ${_pkgname}-${pkgver}-i386.deb || return 1

	# TAR ressources
	tar xzf ${_pkgname}-${pkgver}-i386.tar.gz || return 1

	# License
	mkdir -p ${srcdir}/usr/share/licenses/${_pkgname} || return 1
	install -m644 ${srcdir}/License.txt ${srcdir}/usr/share/licenses/${_pkgname}/LICENSE || return 1

	# Symbolic
	cd ${srcdir}/usr/bin || return 1
	ln -fs Zattoo zattoo || return 1

	mkdir -p $pkgdir/opt/bin32-zattoo || return 1

        # Zattoo Program
        cp -R ${srcdir}/usr/* ${pkgdir}/opt/bin32-zattoo || return 1
        mkdir -p $pkgdir/usr/share/applications || return 1
        cp $srcdir/usr/share/applications/zattoo_player.desktop $pkgdir/usr/share/applications/ || return 1
        mkdir -p $pkgdir/usr/bin || return 1
	install -D -m755 $srcdir/zattoo $pkgdir/usr/bin/ || return 1
}


