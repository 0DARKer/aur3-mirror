# Maintainer: DaZ <daz.root+arch@gmail.com>

pkgname=raceintospace-git
pkgver=20130106
pkgrel=1
pkgdesc="A free software version of the Liftoff! board game by Fritz Bronner"
arch=(i686 x86_64)
url="http://www.raceintospace.org/"
license=("GPL")
depends=( 'sdl' 'libvorbis' 'libtheora' 'jsoncpp' 'libpng')
makedepends=('git' 'cmake' 'boost')

_gitroot="git://github.com/raceintospace/raceintospace.git"
_gitname="raceintospace"

build() {
    cd "${srcdir}"

    msg2 "Connecting to git server..."

    if [[ -d "$_gitname" ]]; then
        cd "$_gitname" && git pull origin
        msg2 "The local files are updated."
    else
        git clone "$_gitroot" "$_gitname"
    fi

    msg2 "GIT checkout done or server timeout."
    msg "Starting build..."

    mkdir -p "${srcdir}/build"
    cd "${srcdir}/build"

    cmake "../raceintospace"\
        -DCMAKE_INSTALL_PREFIX="/usr"\
        -DCMAKE_BUILD_TYPE=Release
    make


}
package()  {
    cd "${srcdir}/build"
    make DESTDIR="${pkgdir}/" install
}
