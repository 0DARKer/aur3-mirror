# Maintainer: St√©phane Gaudreault <stephane@archlinux.org>
pkgname=pyamg
pkgver=1.1.0.dev660
pkgrel=1
pkgdesc="Algebraic Multigrid Solvers in Python"
arch=('i686' 'x86_64')
url="http://www.pyamg.org/"
license=('BSD')
source=(http://pyamg.googlecode.com/files/${pkgname}-${pkgver}.tgz)
sha1sums=('5aea388d4fa9fc63330cd97f3ce40c039a9e494a')
depends=('python2' 'python2-numpy' 'python-scipy' 'python-nose' 'python-matplotlib')
makedepends=('python2-distribute')

package() {
   cd "${srcdir}/${pkgname}-${pkgver}"

   for file in $(find . -name '*.py' -print); do
      sed -i -e "s|^#!.*/usr/bin/python|#!/usr/bin/python2|" \
             -e "s|^#!.*/usr/bin/env *python|#!/usr/bin/env python2|" ${file}
   done

   python2 setup.py install --prefix=/usr --root="${pkgdir}"
}
