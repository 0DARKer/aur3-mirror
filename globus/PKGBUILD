# Maintainer: Pierre Chapuis <catwell@archlinux.us>

pkgname=globus
pkgver=4.2.1
pkgrel=1
pkgdesc="Toolkit for building grids"
arch=('i686' 'x86_64')
url="http://www.globus.org/"
license=('APACHE')
depends=('apache-ant')
source=(http://www-unix.globus.org/ftppub/gt4/$pkgver/installers/src/gt$pkgver-all-source-installer.tar.bz2)
md5sums=(eac8e496bed406dc4c97f8aa14ef40e1)
install="globus.install"

build() {
  cd $srcdir/gt$pkgver-all-source-installer
  export GLOBUS_LOCATION=/opt/globus/
  ./configure --prefix=$pkgdir$GLOBUS_LOCATION || return 1
  _buildopts="gpt \
       gridftp \
       prewsgram \
       rls \
       gsi-myproxy \
       gsi-openssh \
       gt4-java-ws-core \
       gt4-java-admin \
       gt4-mds \
       gt4-delegation \
       gt4-rft \
       wsgram \
       gt4-cas \
       webmds \
       gt4-c-ws-core \
       prews-test \
       globus-gsi-test \
       wstests \
       gt4-replicator \
       gt4-replication-client \
       globus_rendezvous"
  make $_buildopts || return 1
  make $_buildopts install || return 1
}
