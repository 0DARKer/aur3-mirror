# Contributor: Stefan Brand <seiichiro0185 at tol dot ch>

pkgname=mms
pkgver=1.1.1
pkgrel=5
pkgdesc="My Media System is an application that manages, displays and plays media content such as videos, music, pictures, and more"
arch=('i686' 'x86_64')
url="http://mymediasystem.org/"
license=('GPL')
groups=(multimedia)
depends=('xine-lib' 'lirc-utils' 'inotify-tools' 'commoncpp2' 'taglib' 'libxfixes' 'mesa')
makedepends=('gcc' 'autoconf')
install=mms.install
backup=(
	'etc/mms/PictureConfig'
	'etc/mms/WeatherConfig'
	'etc/mms/RemoteConfig'
	'etc/mms/MplayerConfig'
	'etc/mms/TVConfig'
	'etc/mms/AlsaplayerConfig'
	'etc/mms/Config'
	'etc/mms/GenericPlayerConfig'
	'etc/mms/EPGConfig'
	'etc/mms/PythonConfig'
	'etc/mms/ClockAlarms'
	'etc/mms/AudioConfig'
	'etc/mms/input/lirc/vbox'
	'etc/mms/RadioConfig'
	'etc/mms/EvdevConfig'
	'etc/mms/LcdConfig'
	'etc/mms/OpenglConfig'
	'etc/mms/GameConfig'
	'etc/mms/XineConfig'
	'etc/mms/MovieConfig'
	'etc/mms/ClockConfig'
	'etc/mms/genericplayer.ops'
	'etc/mms/LircConfig'
	'etc/mms/input/lirc/audio_extend'
	'etc/mms/input/lirc/epg'
	'etc/mms/input/lirc/movie'
	'etc/mms/input/lirc/alarm'
	'etc/mms/input/lirc/python'
	'etc/mms/input/lirc/playlist'
	'etc/mms/input/lirc/default'
	'etc/mms/input/lirc/audio'
	'etc/mms/input/lirc/pictures'
	'etc/mms/input/lirc/search'
	'etc/mms/input/evdev/default'
	'etc/mms/input/keyboard/vbox'
	'etc/mms/input/keyboard/audio_extend'
	'etc/mms/input/keyboard/epg'
	'etc/mms/input/keyboard/movie'
	'etc/mms/input/keyboard/alarm'
	'etc/mms/input/keyboard/python'
	'etc/mms/input/keyboard/playlist'
	'etc/mms/input/keyboard/default'
	'etc/mms/input/keyboard/audio'
	'etc/mms/input/keyboard/pictures'
	'etc/mms/input/keyboard/search'
)
source=(http://people.iola.dk/anders/$pkgname-$pkgver.tar.bz2
        mms-1.1.1-gcc44.patch
				mms-1.1.1-gcc45.patch)

md5sums=('750bd2bae30b39f5e6fb99c08cf21b12'
         '6af72217fe6609ada7844c1f5096368f'
         'e4b22ac0e7e7713d7d5f0ed90f6c46a2')


build() {
  cd $srcdir/$pkgname-$pkgver
  patch -p0 -i $srcdir/mms-1.1.1-gcc44.patch || return 1
  patch -p0 --strip 1 -i $srcdir/mms-1.1.1-gcc45.patch || return 1
  ./configure --prefix=/usr --enable-clock --enable-notify-area --enable-weather --enable-tv --enable-lirc --enable-opengl --enable-python --enable-res-switch --disable-epg
  make || return
  make DESTDIR=$pkgdir install || return 1
}

