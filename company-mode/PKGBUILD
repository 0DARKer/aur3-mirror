# Maintainer: holos

pkgname=company-mode
pkgver=0.8.5
pkgrel=1
pkgdesc='Modular in-buffer completion framework for Emacs'
arch=('any')
url="https://company-mode.github.io/"
license=('GPL')
# groups=('emacs-plugins')
depends=('emacs')
makedepends=('emacs')
source=("https://github.com/company-mode/company-mode/archive/$pkgver.tar.gz")
sha256sums=('56da9f8b6da75d31382e77e3b130b7bbe8700582d5086cdcbe03089ef8467d3f')

prepare() {
  cd "$pkgname-$pkgver"
  rm company-yasnippet.el
}

build() {
  cd "$pkgname-$pkgver"
  make compile
}

package() {
  cd "$pkgname-$pkgver"

  install -d "$pkgdir/usr/share/emacs/site-lisp/company-mode"
  install -Dm644 company.{el,elc} company-*.{el,elc} \
    "$pkgdir/usr/share/emacs/site-lisp/company-mode"
  find "$pkgdir/usr/share/emacs/site-lisp/company-mode" \
    -name '*.el' -exec gzip {} +
}
