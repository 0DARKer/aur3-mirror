# Maintainer: holos

pkgname=company-mode
pkgver=0.8.9
pkgrel=1
pkgdesc='Modular in-buffer completion framework for Emacs'
arch=('any')
url="https://company-mode.github.io/"
license=('GPL')
# groups=('emacs-plugins')
depends=('emacs')
makedepends=('emacs')
source=("https://github.com/company-mode/company-mode/archive/$pkgver.tar.gz")
sha256sums=('500af643c769bec49e7b96bb81159bb6f06f4f526db4ec691a833ee5a5387bbf')

prepare() {
  cd "$pkgname-$pkgver"
  rm company-yasnippet.el
}

build() {
  cd "$pkgname-$pkgver"
  make compile
}

package() {
  cd "$pkgname-$pkgver"

  install -d "$pkgdir/usr/share/emacs/site-lisp/company-mode"
  install -Dm644 company.{el,elc} company-*.{el,elc} \
    "$pkgdir/usr/share/emacs/site-lisp/company-mode"
  find "$pkgdir/usr/share/emacs/site-lisp/company-mode" \
    -name '*.el' -exec gzip {} +
}
