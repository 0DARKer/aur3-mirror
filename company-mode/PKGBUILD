# Maintainer: holos

pkgname=company-mode
pkgver=0.8.7
pkgrel=1
pkgdesc='Modular in-buffer completion framework for Emacs'
arch=('any')
url="https://company-mode.github.io/"
license=('GPL')
# groups=('emacs-plugins')
depends=('emacs')
makedepends=('emacs')
source=("https://github.com/company-mode/company-mode/archive/$pkgver.tar.gz")
sha256sums=('670bad450b4711a371ab520e42c16e644d301216931d133b34725a6bc5bb0d1a')

prepare() {
  cd "$pkgname-$pkgver"
  rm company-yasnippet.el
}

build() {
  cd "$pkgname-$pkgver"
  make compile
}

package() {
  cd "$pkgname-$pkgver"

  install -d "$pkgdir/usr/share/emacs/site-lisp/company-mode"
  install -Dm644 company.{el,elc} company-*.{el,elc} \
    "$pkgdir/usr/share/emacs/site-lisp/company-mode"
  find "$pkgdir/usr/share/emacs/site-lisp/company-mode" \
    -name '*.el' -exec gzip {} +
}
