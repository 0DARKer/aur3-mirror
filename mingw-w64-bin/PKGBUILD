# Maintainer: Keshav P R <skodabenz at rocketmail dot com>

_gccver="4.5.3"
_mingw_w64_ver="1.0"
_mingw_w64_date="20101220" # If the tarball for this date is not available, download the latest

_actual_file="mingw-w64-bin_${CARCH}-linux_${_mingw_w64_date}.tar.bz2"

pkgname=mingw-w64-bin
pkgver="${_gccver}_${_mingw_w64_date}"
pkgrel=1
pkgdesc="MinGW Toolchain fork for building Windows x86_64 executables - Automated Builds provided by mingw-w64 upstream"
url="http://mingw-w64.sourceforge.net/"
arch=('i686' 'x86_64')
license=('GPL')
depends=('sh')
makedepends=('aria2')
options=(!strip docs zipman !emptydirs)
install=${pkgname}.install


build() {
    cd ${srcdir}/
    
    aria2c http://downloads.sourceforge.net/project/mingw-w64/Toolchains%20targetting%20Win64/Automated%20Builds/${_actual_file}
    
    mkdir -p ${srcdir}/mingw_w64/
    cd ${srcdir}/mingw_w64
    
    bsdtar xf ${srcdir}/${_actual_file}

}

package() {

    mkdir -p ${pkgdir}/usr/
    
    cp -r ${srcdir}/mingw_w64/* ${pkgdir}/usr/
    
    rm -rf ${pkgdir}/usr/share/man/man7/ 
    rm -rf ${pkgdir}/usr/share/locale/
    rm -rf ${pkgdir}/usr/share/info/
    # rm -rf ${pkgdir}/usr/share/gcc-${_gccver}/

}
