# Contributer: giacomogiorgianni@gmail.com
pkgname=mysql-workbench-gpl
pkgver=5.2.38
pkgrel=5
pkgdesc="A cross-platform, visual database design tool developed by MySQL --> ubuntu"
arch=('i686' 'x86_64')
url="http://www.mirrorservice.org/sites/ftp.mysql.com/Downloads/MySQLGUITools/%5Bpage=5%5D"
license=('GPL')
depends=('libzip' 'lua' 'gtkmm' 'libgl' 'libsigc++' 'python-paramiko' 'python-pexpect' 'libgnome-keyring')
makedepends=('boost' 'curl' 'mesa' 'python-sphinx' 'ctemplate')

if [ "${CARCH}" = 'x86_64' ]; then
    ARCH='amd64'
    md5sums=('bcfeccfee1c98f15dfd7c09ac8f668c3')
elif [ "${CARCH}" = 'i686' ]; then
    ARCH='i386' 
    md5sums=('bbc1bd1da96228a2766f592d5f0d59d4')
fi

source=(http://www.mirrorservice.org/sites/ftp.mysql.com/Downloads/MySQLGUITools/${pkgname}-${pkgver}-1ubu1004-${ARCH}.deb)
build() {
	cd ${startdir}/src
	ar -x ${startdir}/src/${pkgname}-${pkgver}-1ubu1004-${ARCH}.deb
	tar -zxf ${startdir}/src/data.tar.gz
	cp -r ${startdir}/src/usr/ ${startdir}/pkg/
	sudo rm /usr/lib/libmysqlclient_r.so.16
	sudo rm /usr/lib/libpython2.6.so.1.0
	sudo rm /usr/lib/liblua5.1.so.0
	sudo rm /usr/lib/libzip.so.1
	sudo ln -s /usr/lib/liblua.so.5.1 /usr/lib/liblua5.1.so.0
	sudo ln -s /usr/lib/libpython2.7.so.1.0 /usr/lib/libpython2.6.so.1.0
	sudo ln -s /usr/lib/libzip.so.2 /usr/lib/libzip.so.1
	sudo ln -s /usr/lib/libmysqlclient_r.so.18 /usr/lib/libmysqlclient_r.so.16
	sudo ln -s /usr/lib/libpcre.so /usr/lib/libpcre.so.3
}

