# Maintainer:  Android_808 <android underscore 808 at hotmail dot com>
# Contributor: Pauline123 <321eniluap at gmail dot com>
# Contributor: Shanto <shanto at hotmail>
# Contributor: Piotr Rogo≈ºa <rogoza dot piotr at gmail dot com>
pkgname=conky-colors
_pkgname=conky_colors
pkgver=8.0.2
pkgrel=6
pkgdesc="An easier way to configure Conky"
arch=('i686' 'x86_64')
url="http://gnome-look.org/content/show.php/CONKY-colors?content=92328"
license=('GPL')
depends=('pystatgrab' 'ttf-liberation' 'hddtemp' 'curl' 'lm_sensors' 'conky' 'ttf-droid' 'ttf-ubuntu-font-family')
makedepends=('perl')
optdepends=('conky-lua')
conflicts=('ttf-openlogos' 'ttf-weather')
options="!strip"

source=("http://www.deviantart.com/download/244793180/conky_colors_by_helmuthdu-d41qrmk.zip"
	"cputemp.patch"
	"weather.patch")
md5sums=('34978916e155a6c3538c94ab985d9612'
	 '9b21d9dbf091141305b6adc6ef30668d'
	 '2980e19a22102f4abe55fdf25037b841')

build() {
  cd "$srcdir/conky_colors"

  patch -Np1 -i ../cputemp.patch || return 1
  patch -Np1 -i ../weather.patch || return 1

  make
}

package() {
  cd "$srcdir/conky_colors"

  install -dm755 ${pkgdir}/usr/share/fonts/TTF
  install -Dm644 fonts/conkycolors/* ${pkgdir}/usr/share/fonts/TTF

  install -dm755 ${pkgdir}/usr/share/conkycolors/{bin,icons,scripts,templates}
  install -dm755 ${pkgdir}/usr/share/conkycolors/icons/{Case,CD,ConkyPhoto,Glassy,Moon,oldVinyl,Players,SLS,Vinyl,Weather,Weather_Moonphases}

  for i in Case  CD  ConkyPhoto  Glassy  Moon  oldVinyl  Players  SLS  Vinyl Weather  Weather_Moonphases; do
    install -Dm644 conkycolors/icons/$i/* ${pkgdir}/usr/share/conkycolors/icons/$i/
  done

  for i in bin scripts templates; do
    install -Dm644 conkycolors/$i/* ${pkgdir}/usr/share/conkycolors/$i/
  done

  chmod +x ${pkgdir}/usr/share/conkycolors/bin/*
  chmod +x ${pkgdir}/usr/share/conkycolors/scripts/*
  install -Dm755 conky-colors ${pkgdir}/usr/bin/conky-colors

}
