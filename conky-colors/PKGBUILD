# Maintainer: Shanto <shanto at hotmail>
# Contributor: Piotr Rogo≈ºa <rogoza dot piotr at gmail dot com>
pkgname=conky-colors
pkgver=5.0
pkgrel=1
pkgdesc="CONKY-colors is an easier way to configure Conky"
arch=('i686' 'x86_64')
url="http://gnome-look.org/content/show.php/CONKY-colors?content=92328"
license=('GPL')
depends=('pystatgrab' 'ttf-liberation' 'hddtemp' 'curl' 'lm_sensors' 'conky=1.8.0' 'ttf-droid')
makedepends=('perl')
optdepends=('conky-lua: for new options --cairo but conky-color is in conflict with conky')
conflicts=('ttf-weather')
install="conky-colors.install"
options="!strip"

source=(
	"http://gnome-look.org/CONTENT/content-files/92328-conky_colors.tar.gz"
	"Makefile"
	"conky-colors.patch"
)

md5sums=(
	'112643cfcb0156a4ecb2bbc472a3e2f0'
        'd11892d5377a96223c9f8e7372aaa0cf'
        'af92e946a50be09467dde90da5ef2151'
)

build() {
  cd "$srcdir/conky_colors"
  patch -p0 < ../conky-colors.patch

  find -type f -exec perl -pi -e 's#~/.conkycolors#/usr/share/conky-colors#g' '{}' ';'
  find -type f -exec perl -pi -e 's#~/.conky#/usr/share/conky-colors#g' '{}' ';'

  make -f ../Makefile
  install -dm755 ${pkgdir}/usr/share/fonts/TTF
  install -Dm644 fonts/conkycolors/* ${pkgdir}/usr/share/fonts/TTF

  install -dm755 ${pkgdir}/usr/share/conky-colors/{bin,icons,scripts,templates}
  install -dm755 ${pkgdir}/usr/share/conky-colors/icons/{Case,CD,Glassy,oldVinyl,Players,Vinyl}

  for i in Case  CD  Glassy  oldVinyl  Players  Vinyl; do
    install -Dm644 conkycolors/icons/$i/* ${pkgdir}/usr/share/conky-colors/icons/$i/
  done

  for i in bin scripts templates; do 
    install -Dm644 conkycolors/$i/* ${pkgdir}/usr/share/conky-colors/$i/
  done
  install -Dm644 conkycolors/conkyForecast.config ${pkgdir}/usr/share/conky-colors/
  
  chmod +x ${pkgdir}/usr/share/conky-colors/bin/*
  chmod +x ${pkgdir}/usr/share/conky-colors/scripts/*
  install -Dm755 conky-colors ${pkgdir}/usr/bin/conky-colors
}