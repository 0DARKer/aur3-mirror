# Contributor: Dany Martineau <dany.luc.martineau gmail com>

pkgname=kartofel
pkgver=1.2
pkgrel=2
pkgdesc="Kartofel is a game of skill and logic."
url="http://kartofel.jfedor.org/"
license=('GPL')
arch=('i686' 'x86_64')
depends=('sdl' 'sdl_gfx' 'sdl_ttf' 'sdl_mixer' 'sdl_image' 'curl' 'zlib')
provides=('kartofel')
source=(http://kartofel.jfedor.org/downloads/kartofel-$pkgver.tar.gz kartofel kartofel.desktop saved_game.diff)
md5sums=('4452da69e2e5c8f78ac22e234594dabf'
         'f959c9298b8c0ace0b313cac4d3432d8'
         'ea89ef5b5449906d062bde90ff783832'
         '68ce8b8e8854d75aea4c7853447ac4dd')

build() {
	cd $srcdir/$pkgname-$pkgver
        patch -p0 < ../saved_game.diff || return 1
	make || return 1
	mkdir -p $pkgdir/usr/bin
	mkdir -p $pkgdir/usr/share/kartofel
        mkdir -p $pkgdir/usr/share/applications
        cp -r kartofel fonts images levels music sounds www $pkgdir/usr/share/kartofel
	cp ${startdir}/kartofel.desktop $pkgdir/usr/share/applications
        cd $pkgdir/usr/share/kartofel
	touch kartofel.txt
	chmod 777 kartofel.txt
	install -m 555 $srcdir/kartofel $pkgdir/usr/bin/
}
