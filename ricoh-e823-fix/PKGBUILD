# Maintainer: Xiao-Long Chen <chenxiaolong@cxl.epac.to>
pkgname=ricoh-e823-fix
pkgver=1.0
pkgrel=4
pkgdesc="Fix for the Ricoh e823 card reader used in Lenovo laptops"
arch=('any')
url="https://bugs.launchpad.net/linux/+bug/790754"
license=('GPL')
# A "linux<=version" dependency will be placed here once the problem is fixed in the kernel
depends=('bash')
install=e823fix.install
source=('e823fix.install'
        'e823fix.rc'
        'e823fix.modprobe.conf'
        'e823fix.pmutils')
sha512sums=('f7795ecda8b70025e0a466a1eef311ecd75909483afbe0dc2316c5882ba566f2beebe8163499fbd2796814e642c7cd41defa85f9bfaea0e80b72bd974c49abb7'
            '6b160b8a490a19992be4e57a3123525572772983a99c2f6aa3a6b048e630e97adf35072842030bdafc456e0f9d63a3e39510894b6e245c925a9af532e0240343'
            '89460c477b72ebae605c2cdde0bd1b4f7f35120394077dfb716e2a3f920fbf5d958e84c00ee8bd46650e28439cb07fa820a0226c3243049f1ee29abdd011bd76'
            '2cd99a68c07e7344cf9c9c3eb6e389e568449ef98f89ff4efb3c1f1276e7de71e0514703bdfff23902d3f463c7a84b9d4c7e9d295c42e0ff44235dd232e685ae')

build() {
  msg "Nothing to build."
}

check() {
  msg "Nothing to check."
}

package() {
  install -d -m755 "${pkgdir}/etc/rc.d/"
  install -m755 "${srcdir}/e823fix.rc" "${pkgdir}/etc/rc.d/e823fix"
  install -d -m755 "${pkgdir}/etc/modprobe.d/"
  install -m644 "${srcdir}/e823fix.modprobe.conf" "${pkgdir}/etc/modprobe.d/e823fix.conf"
  install -d -m755 "${pkgdir}/etc/pm/sleep.d/"
  install -m755 "${srcdir}/e823fix.pmutils" "${pkgdir}/etc/pm/sleep.d/50_e823fix"
}

# vim:set ts=2 sw=2 et:
