# Maintainer: Yoran Heling <info@yorhel.nl>
# Contributor: Gustavo Alvarez <sl1pkn07@gmail.com>
# Contributor: Lex Black <autumn-wind at web dot de>

pkgname=uhub
pkgver=0.4.1
pkgrel=2
pkgdesc="A hub for the ADC network."
arch=('i686' 'x86_64')
license=('GPL')
url="http://www.uhub.org/"
makedepends=('cmake')
depends=('openssl' 'sqlite')
source=("http://www.extatic.org/downloads/uhub/$pkgname-$pkgver-src.tar.bz2"
        uhub.rc)
md5sums=('ace53f95c62ac6e6df1f86a91e38bb02'
         'ca06be3f085cc13a17583c83e961164c')
backup=('etc/uhub/uhub.conf'
        'etc/uhub/plugins.conf'
        'etc/uhub/rules.txt')
install=${pkgname}.install


build() {
    cd ${srcdir}/${pkgname}-${pkgver}
    cmake -DCMAKE_INSTALL_PREFIX=/usr CMakeLists.txt
    make
}

package() {
    cd ${srcdir}/${pkgname}-${pkgver}
    install -d ${pkgdir}/usr/bin
    make DESTDIR=${pkgdir} install
    mkdir -p ${pkgdir}/etc/rc.d
    cp ${srcdir}/uhub.rc ${pkgdir}/etc/rc.d/uhub
}
