pkgname=simplescreenrecorder-git
pkgver=20140128
pkgrel=1
pkgdesc="A feature-rich screen recorder that supports X11 and OpenGL."
arch=("i686" "x86_64")
url="http://www.maartenbaert.be/simplescreenrecorder/"
license=("GPL3")
depends=("qt4" "ffmpeg" "alsa-lib" "libpulse" "libgl" "glu" "libx11" "libxext" "libxfixes" "jack")
if test "$CARCH" == x86_64; then
	optdepends=("lib32-simplescreenrecorder: OpenGL recording of 32-bit applications")
fi
makedepends=("git")
provides=('simplescreenrecorder')
conflicts=('simplescreenrecorder')
options=("!libtool")
install=simplescreenrecorder.install
_gitroot='git://github.com/MaartenBaert/ssr.git'
_gitname='ssr'

build() {
	msg "Connecting to GIT server...."

	if [[ -d $_gitname ]]; then
		cd "$_gitname" && git pull origin
		msg "The local files are updated."
	else
		git clone "$_gitroot" "$_gitname"
		cd "$_gitname"
	fi

	export CPPFLAGS="$CPPFLAGS -DNDEBUG -DQT_NO_DEBUG -DSSR_USE_FFMPEG_VERSIONS=1"
	./configure --prefix=/usr
	make
}
package() {
	cd ssr
	make DESTDIR="${pkgdir}" install
}
