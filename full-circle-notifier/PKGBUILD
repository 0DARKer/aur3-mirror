# Maintainer: Lucas Westermann <lswest34 AT gmail DOT com>
pkgname=full-circle-notifier
pkgver=1.0.2
pkgrel=2
pkgdesc="A notifier for the popular FCM Ubuntu Community Magazine."
arch=('x86_64' 'i686')
url="http://bitbucket.org/mrmonday/full-circle-notifier/"
license=('GPL')
depends=('qjson' 'qt')
source=("http://bitbucket.org/mrmonday/full-circle-notifier/get/$pkgver-hat.tar.gz"
        "getuid.patch")
md5sums=('e01f13f2367b1a2cb15085736d7a69c3'
         'f851365082977d8fbaba4fcdee6265c7')

build() {
  cd "$srcdir/mrmonday-full-circle-notifier-19f6ddb13ab6"
  patch -p1 < ../getuid.patch
  qmake DESTDIR=$pkgdir/opt/$pkgname 
  make
}

package() {
  cd "$srcdir/mrmonday-full-circle-notifier-19f6ddb13ab6"
  mkdir -p $pkgdir/usr/bin
  mv assets/usr/share/ "$pkgdir/usr/share"
  mv * "$pkgdir/opt/$pkgname"
  ln -s "/opt/full-circle-notifier/fcnotifier" "$pkgdir/usr/bin/fcnotifier"
}
