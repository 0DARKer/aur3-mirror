# Contributor: flub <flub123[at]gmx[dot]de>
# Maintainer: Davide Iosca <dvdios[at]aol[dot]com>
pkgname=fpdb
pkgver=0.30.7
_major=0.30
pkgrel=1
pkgdesc="An open source tracker/HUD for use with on-line poker."
url="http://sourceforge.net/projects/fpdb/"
arch=('x86_64' 'i686')
license=('AGPL' 'GPL')
depends=('pygtk' 'python2-matplotlib' 'python-xlib' 'pypoker-eval')
source=("http://sourceforge.net/projects/fpdb/files/fpdb/${_major}/${pkgname}-${pkgver}.tar.gz")
md5sums=('afbb1220522cf838b2cc6bd8bce4e6b2')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  python2 setup.py install --root="${pkgdir}/" --optimize=1

  cat "pyfpdb/fpdb.pyw" | sed 's/env\ python/env\ python2/g' > "${pkgdir}/usr/lib/python2.7/site-packages/fpdb/fpdb.pyw"
  chmod +x "${pkgdir}/usr/lib/python2.7/site-packages/fpdb/fpdb.pyw"
}

package() {
  mkdir "${pkgdir}/usr/bin"
  ln -s "../lib/python2.7/site-packages/fpdb/fpdb.pyw" "${pkgdir}/usr/bin/fpdb"
}
