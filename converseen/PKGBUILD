# Maintainer: archtux <antonio.arias99999@gmail.com>

pkgname=converseen
pkgver=0.4.3
pkgrel=1
pkgdesc="The batch image converter and resizer. It supports more than 100 image formats."
arch=('i686' 'x86_64')
url="http://converseen.sourceforge.net/"
license=('GPL2')
depends=('graphicsmagick' 'imagemagick>6.6.6.9' 'qt')
source=(http://downloads.sourceforge.net/sourceforge/converseen/converseen-$pkgver.tar.bz2)
md5sums=('dff71dfc3ecf79dd04797c7548098400')

build() {
  cd $srcdir/$pkgname-$pkgver

  # Build
  qmake
  make

  # Binary
  install -Dm755 converseen $pkgdir/usr/bin/converseen

  # Translations
  cd ./loc
  for file in $(find . -name '*.qm' -print); do
  install -Dm644 $file $pkgdir/usr/share/converseen/$file
  done

  # Desktop icon
  cd ../res
  install -Dm644 converseen.png     $pkgdir/usr/share/pixmaps/converseen.png
  install -Dm644 converseen.desktop $pkgdir/usr/share/applications/converseen.desktop

  # KDE4 Servicemenus
  install -Dm644 converseen_import.desktop $pkgdir/usr/share/kde4/services/ServiceMenus/converseen_import.desktop


}