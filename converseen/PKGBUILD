# Maintainer: archtux <antonio.arias99999@gmail.com>

pkgname=converseen
pkgver=0.4.1
pkgrel=1
pkgdesc="The batch image converter and resizer. It supports more than 100 image formats."
arch=('i686' 'x86_64')
url="http://converseen.sourceforge.net/"
license=('GPL2')
depends=('graphicsmagick' 'imagemagick>6.6.6.9' 'qt')
source=(http://downloads.sourceforge.net/sourceforge/converseen/converseen-$pkgver.tar.bz2)
md5sums=('bf49ab9b478fa7fe788cbcac5169c9e5')

build() {
  cd $srcdir/$pkgname-$pkgver

  # Compilation
  qmake
  make

  # Binary
  install -Dm755 converseen $pkgdir/usr/bin/converseen

  # Desktop icon
  install -Dm644 ./res/converseen.png     $pkgdir/usr/share/pixmaps/converseen.png
  install -Dm644 ./res/converseen.desktop $pkgdir/usr/share/applications/converseen.desktop

  # Translations
  cd ./loc
  for file in $(find . -name '*.qm' -print); do
  install -Dm644 $file $pkgdir/usr/share/converseen/$file
  done
}