# Contributor : Anish Bhatt <anish[removethis][at]gatech[dot]edu>

pkgname=deheader
pkgver=0.5
pkgrel=2

pkgdesc='deheader analyzes C and C++ files to determine which header enclusions can be removed while still allowing them to compile'
url='http://www.catb.org/esr/deheader/'
arch=('any')

source=(http://www.catb.org/~esr/deheader/deheader-$pkgver.tar.gz
	python3.patch
	python2.patch)
md5sums=('f87670334b5cab47ec451c1fbda617bf'
         '166c1dd30f4bd286d183083d37effc55'
         '62edf5aa5ee0206632ea2b50c22dfeb7')

depends=('gzip' 'python')
provides=('deheader')
license=('GPL')

build () {
	pushd ${srcdir}/deheader-$pkgver
#	Use this if you wish to stick to python2
#	patch -p0 < ../python2.patch 
	patch -p0 < ../python3.patch
	gzip deheader.1
}
package() {
  install -d -m755 ${pkgdir}/usr/bin || return 1
  install -m755 ${srcdir}/deheader-$pkgver/deheader ${pkgdir}/usr/bin || return 1
  install -d -m755 ${pkgdir}/usr/share/man/man1 || return 1
  install -m755 ${srcdir}/deheader-$pkgver/deheader.1.gz ${pkgdir}/usr/share/man/man1 || return 1
}

