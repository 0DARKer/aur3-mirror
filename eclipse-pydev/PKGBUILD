# Maintainer: Benjamin Hedrich <kiwisauce <at> pagenotfound.de>

pkgname=eclipse-pydev
pkgver=1.6.5
pkgrel=2
pkgdesc="Python IDE for Eclipse"
url="http://pydev.org/"
arch=('any')
license=('EPL')
depends=('eclipse' 'python2')
makedepends=('unzip')
conflicts=('eclipse-pydev-nightly')
provides=('eclipse-pydev-nightly')

source=("http://downloads.sourceforge.net/project/pydev/pydev/Pydev%20${pkgver}/Pydev%20$pkgver.zip")
noextract=("Pydev\ $pkgver.zip")
sha256sums=('d94c7741e046cdf81ec7310217abebb89e269e6d70239e3c85c826e5101d70e3')


build() {
  _dest=${pkgdir}/usr/share/eclipse/dropins/${pkgname/eclipse-}/eclipse

  install -dm0644 ${_dest} 
  unzip "Pydev $pkgver.zip" -d ${_dest} 
  
  # only for aptana, no necesary for eclipse
  rm -rf ${_dest}/features/org.python.pydev.django_templates.feature_${pkgver}.*
  rm -rf ${_dest}/plugins/org.python.pydev.django_templates_${pkgver}.*
  
  chmod -R a+rX ${_dest}/features/* 
  chmod -R a+rX ${_dest}/plugins/* 
}

