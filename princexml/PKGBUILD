# Maintainer: Dogukan Korkmazturk <d.korkmazturk@gmail.com>
# Contributor: Arvid Ephraim Picciani <aep@exys.org>
# Contributor: Firmicus <francois.archlinux.org>
pkgname=princexml
pkgver=7.1
pkgrel=1
pkgdesc="converts XML and HTML into PDF documents using the css print spec"
arch=(i686 x86_64)
url="http://www.princexml.com"
license=('custom')
if [ $CARCH == "i686" ]; then
  _suffix="linux"
  source=(http://www.princexml.com/download/prince-${pkgver}-${_suffix}.tar.gz)
  md5sums=('5eda8eb705a3e6eed58ca6d3887ddbaa')
else
  _suffix="ubuntu904-amd64-static"
  source=(http://www.princexml.com/download/prince-${pkgver}-${_suffix}.tar.gz)
  md5sums=('f602da82a44871042d50a2f47a807a39')
fi

build() {
    cd $startdir/src/prince-${pkgver}-${_suffix}
    mkdir -p $startdir/pkg/opt/prince
    mkdir -p $startdir/pkg/usr/bin
    cp *  $startdir/pkg/opt/prince -a

    echo "#!/bin/bash" > $startdir/pkg/usr/bin/prince
    echo "/opt/prince/lib/prince/bin/prince \$*" >> $startdir/pkg/usr/bin/prince
    chmod +x $startdir/pkg/usr/bin/prince

    mkdir -p $startdir/pkg/usr/share/licenses/princexml/
    cp LICENSE $startdir/pkg/usr/share/licenses/princexml/
    rm $startdir/pkg/opt/prince/{install.sh,LICENSE,README}
}
