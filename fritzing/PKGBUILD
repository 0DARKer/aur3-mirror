# Maintainer: David Manouchehri <d@32t.ca>
# Contributor: Henning Mueller <henning@orgizm.net>

pkgname=fritzing
pkgver=0.8.5b
pkgrel=1
pkgdesc='PCB layout prototyping application'
arch=('i686' 'x86_64')
url=http://fritzing.org
license=(GPL3)
makedepends=('boost>=1.55')
depends=(qt4)
source=(
  http://fritzing.org/download/$pkgver/source-tarball/fritzing-$pkgver.source.tar.bz2
  fritzing.desktop
)
sha512sums=('6d0b1d82b621c84e60ca5bcd9ed1c7fa38d57d0d3ad3a45c7d786917b23aa8538a5062b945e88864724f4da59e1c762df207764a9add04d16c30a42610bba137'
            '3b86d383cc232362fcd30542659722d0707ea79def1830d9ce3517413d25e8c2c2c6f83c65e567d53d2324bb3b9ec9697133f658a768351aa53b5cd0be3b1742')

build() {
  cd $srcdir/fritzing*source
  qmake-qt4 && make
}

package() {
  _destdir=usr/share/$pkgname

  cd $srcdir/fritzing*source

  mkdir -p $pkgdir/{$_destdir,usr/{bin,share/applications}}
  cp -r {parts,pdb,bins,sketches,translations,Fritzing,Fritzing.sh} $pkgdir/$_destdir
  cp -rf resources/parts $pkgdir/$_destdir

  cp $srcdir/fritzing.desktop $pkgdir/usr/share/applications
  ln -s /$_destdir/Fritzing $pkgdir/usr/bin/fritzing
}
