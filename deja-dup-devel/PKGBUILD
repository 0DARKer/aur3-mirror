# Maintainer: Michael Pusterhofer <pusterhofer at student dot tugraz dot ..>
# Contributor: polslinux <garrett16 at hotmail dot it>
# Contributor: jijijaco <jijijaco at gmail dot com>
# Contributor: Jonathan Vasquez <jvasquez1011 at gmail dot com>

# If you want nautilus support, make sure you add 'nautilus' to the depends array before compiling.

pkgname=deja-dup-devel
_pkgname=deja-dup
pkgver=21.4
_pkgmain=22
pkgrel=1
pkgdesc="A simple backup program. It hides the complexity of doing backups the 'right way' (encrypted, off-site, and regular) and uses duplicity as the backend."
arch=('i686' 'x86_64')
url="https://launchpad.net/deja-dup"
license=('GPL')
depends=('vala' 'duplicity' 'gnome-common' 'itstool' 'intltool>=0.50.0')
optdepends=('bzr: A decentralized revision control system (bazaar)'
            'yelp-tools: Tools for creating Yelp documentation'  
            'xvfb: Virtual framebuffer X server'
            'nautilus: GNOME file manager'
            'gnome-control-center: GNOME control center integration')
provides=('deja-dup')
conflicts=('deja-dup' 'deja-dup-new')
install=deja-dup.install
source=("http://launchpad.net/${_pkgname}/${_pkgmain}/${pkgver}/+download/${_pkgname}-${pkgver}.tar.xz")
md5sums=('ef42a09291bf1e95c760fa6e30cc0078')

build() {
    cd ${srcdir}/deja-dup-${pkgver} 
    ./configure --prefix=/usr \
		--sysconfdir=/etc \
		--libexecdir=/usr/lib 
	
    make
}

check(){
    cd ${srcdir}/deja-dup-${pkgver}
    #make check  #bugged again https://bugs.launchpad.net/deja-dup/+bug/917057
}

package () {
    cd ${srcdir}/deja-dup-${pkgver}
    make DESTDIR="${pkgdir}" install
}
