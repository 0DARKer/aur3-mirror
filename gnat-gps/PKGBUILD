# Contributor: Patrick Kelly <kameo76890 at gmail dot com>
# Contributor:  Georgios  Tsalikis <aliverius somewhere near tsalikis and a net>

pkgname=gnat-gps
pkgver=5.0.1
pkgrel=3
pkgdesc="GPS, the GNAT Programming Studio for Ada"
arch=('i686' 'x86_64')
url="http://libre.adacore.com/libre/tools/gps"
license=('GPL')
depends=("gcc-ada" "xmlada" "gtkada" "gprbuild")
makedepends=("nawk")
source=(http://netcologne.dl.sourceforge.net/project/gnat-gpl/2011/gps-$pkgver-gpl-src.tgz)
md5sums=('dfb91ac7deb7518ecc4a1d41798e1c43')

build() {
	
  cp $startdir/*.patch $srcdir
  cd $srcdir/gps-$pkgver-src

  patch -p0 < ../dump-xref.patch

  AWK=/usr/bin/nawk PYTHON=/usr/bin/python2 ./configure --prefix=/usr

  ADA_PROJECT_PATH=/usr/lib/gnat make 
  
  make -j1 prefix=$pkgdir/usr install
}
