# Maintainer: Ben Darwin <implode (map chr [98,99,100,97,114,119,105,110,64,103,109,97,105,108,46,99,111,109])>

pkgname=mlton-bin
pkgver=20100608
pkgrel=3
pkgdesc="binary package for the MLton whole-program, optimizing SML compiler"
arch=('i686' 'x86_64')
url="http://mlton.org/"
license=('custom')	# BSD-like: http://mlton.org/License
depends=('gmp4' 'bash' 'perl')
provides=('sml' 'mlton')
conflicts=()

if [ "${CARCH}" = 'x86_64' ]; then
  _arch="amd64"
  md5sums=('3598a53e45d0806d359203bb36405710'
           '9796787fcf04c08ddbe1ebbba0e35b94')
elif [ "${CARCH}" = 'i686' ]; then
  _arch="x86"
  md5sums=('6c2cd50709b3309b0ec435002fb1e4cf'
           '9796787fcf04c08ddbe1ebbba0e35b94')
fi

source=("http://sourceforge.net/projects/mlton/files/mlton/$pkgver/mlton-$pkgver-1.${_arch}-linux.tgz" "LICENSE")

package() {
  cd $srcdir

  _prefixdir="usr/"

  for d in "bin" "lib" "share";
  do
    mkdir -p "$pkgdir/$_prefixdir/$d"
    cp -a "$_prefixdir/$d" "$pkgdir/$_prefixdir"
  done

  mkdir -p "$pkgdir/$_prefixdir/share/man"
  cp -a "$_prefixdir/man/" "$pkgdir/$_prefixdir/share/"

  install -D -m644 LICENSE "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
}

# vim:set ts=2 sw=2 et:
