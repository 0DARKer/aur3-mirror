# Maintainer: moostik <mooostik_at_gmail.com>

pkgname=geogebra
pkgver=3.2.46.0
pkgrel=1
pkgdesc="A dynamic mathematics software with interactive graphics, algebra and spreadsheet"
arch=('any')
url='http://www.geogebra.org/'
license=('GPL' 'CCPL:by-sa') 
# Application and source code under GPL / Language files under CCPL
depends=('java-runtime' 'hicolor-icon-theme' 'shared-mime-info')
install=('geogebra.install')
source=(http://www.geogebra.org/webstart/installer/${pkgname}-${pkgver}-src.tar.gz
	$pkgname.sh
	$pkgname.png)
noextract=('*.jar')

build() {
  # Installing application
  cd $srcdir/$pkgname-$pkgver
  install -d -m755 $pkgdir/usr/share/java/$pkgname/unsigned
  install -D -m644 *.jar $pkgdir/usr/share/java/$pkgname
  install -D -m644 unsigned/*.jar $pkgdir/usr/share/java/$pkgname/unsigned
  
  # Creating menu item
  install -D -m644 $srcdir/$pkgname.png $pkgdir/usr/share/pixmaps/$pkgname.png
  install -D -m644 $pkgname.desktop $pkgdir/usr/share/applications/$pkgname.desktop

  # Intalling launcher
  cd $srcdir
  install -D -m755 $pkgname.sh $pkgdir/usr/bin/$pkgname

  # Adding MIME-type
  install -d -m755 $pkgdir/usr/share/icons/hicolor/64x64/mimetypes
  install -D -m644 $pkgname.png \
    $pkgdir/usr/share/icons/hicolor/64x64/mimetypes/application-vnd.geogebra.file.png
  install -D -m644 $pkgname.png \
    $pkgdir/usr/share/icons/hicolor/64x64/mimetypes/application-vnd.geogebra.tool.png
  install -D -m644 $srcdir/$pkgname-$pkgver/$pkgname.xml $pkgdir/usr/share/mime/packages/$pkgname.xml
}

md5sums=('54654bf199851348ece00fbc8c03fb58'
         '18c143f6f3ba45568a6b62f26966bc73'
         'e324ee3a2bb438cee625e3f29770a315')
