pkgname=bokken-hg
pkgver=1.6.38.86830deba585
pkgrel=1
pkgdesc="GUI for radare2 and pyew"
arch=('any')
url="http://inguma.eu/projects/bokken"
license=('GPL')
depends=('python2'
         'pygtksourceview2'
         'graphviz')
optdeps=('pyew: For pyew backend support'
         'r2-bindings: For r2 backend support (stable)'
				 'radare2-bindings-git: For r2 backend support (devel)')
makedepends=('mercurial')
options=('!strip')
source=('hg+http://inguma.eu/repos/bokken')
md5sums=('SKIP')

pkgver() {
  cd bokken
  hg log -r . --template '{latesttag}.{latesttagdistance}.{node|short}\n'
}

package() {
  install -d ${pkgdir}/usr/share/bokken
  cp -r bokken/* ${pkgdir}/usr/share/bokken

  install -d ${pkgdir}/usr/bin/
  cat > ${pkgdir}/usr/bin/bokken << 'EOF'
#!/bin/bash
cd /usr/share/bokken/
exec ./bokken "$@"
EOF
  chmod +x ${pkgdir}/usr/bin/bokken
}
