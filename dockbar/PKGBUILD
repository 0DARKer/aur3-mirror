#Contributor: Laurie Clark-Michalek <bluepeppers@archlinux.us>
#Contributor: Mario Pastorelli <rief dot the dot dreamer at gmail dot com>
#Contributor: Alexander De Sousa <archaur.xandy21@spamgourmet.com>

pkgname=dockbar
pkgver=0.25.1
pkgrel=1
pkgdesc="GNOME TaskBar with groupping and group manipulation."
arch=("i686" "x86_64")
url="http://gnome-look.org/content/show.php/DockBar?content=97822"
license=("GPL")
depends=('gnome-python' 'python-gnomeapplet' 'python-gnomedesktop' 'python-metacity' 'python-rsvg' 'python-wnck' 'dbus-python' 'python2-gconf' 'gnome-panel' 'gnome-panel-bonobo' 'python-notify')
source=("http://gnome-look.org/CONTENT/content-files/97822-$pkgname-$pkgver.tar.gz"
        python2_and_version.patch)
sha1sums=('f3ebd8220c6ea2889e361bb7c3f406c3c152456a'
          'd5e279f89e12bd5fd53543b0abad75707c0f5d61')

build () {
	cd ${srcdir}/${pkgver}
	msg2 "Setting python2 as the interpreter..."
	patch -Np1 -i ../python2_and_version.patch
}

package() {
	cd ${srcdir}/${pkgver}
	install -m755 -d -D ${pkgname} ${pkgdir}/usr/lib/${pkgname}
	install -m755 -D ${pkgname}/${pkgname}.py ${pkgdir}/usr/lib/${pkgname}
	install -m755 -D ${pkgname}/${pkgname}_pref.py ${pkgdir}/usr/lib/${pkgname}
	install -m644 -D GNOME_DockBarApplet.server ${pkgdir}/usr/lib/bonobo/servers/GNOME_DockBarApplet.server
	mkdir -p $pkgdir/usr/bin
	ln -s /usr/lib/dockbar/dockbar.py $pkgdir/usr/bin/dockbar.py
}
