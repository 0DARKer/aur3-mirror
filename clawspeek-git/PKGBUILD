## Author: Konstantin Nikiforov <helllamer@gmail.com>

name=clawspeek
pkgname=$name-git
pkgver=20130224
pkgrel=1
pkgdesc="Decode obfuscated claws-mail passwords (see ~/.clawsmail/accountrc)"
arch=('i686' 'x86_64')
url="http://www.bitcoin.org/"
makedepends=('git' 'gcc' 'make')
license=('GPLv3')

_gitroot='git://github.com/mones/clawspeek.git'
_gitname=$name

## dirs for sources and for build
src=$srcdir/$_gitname
build=$src-build

build() {
	cd $srcdir
	msg "Connecting to the git server..."

	if [[ -d $src ]] ; then
		cd $_gitname
		git remote set-url origin $_gitroot
		git pull origin
		msg "The local files are updated."
	else
		git clone --depth 1 $_gitroot
	fi
	msg "Git checkout done"
	rm -rf $build
	cp -r $src $build
	
	msg "Starting make..."
	cd $build
	make
}


package() {
	cd $build
	make PREFIX=$pkgdir/usr install
}

