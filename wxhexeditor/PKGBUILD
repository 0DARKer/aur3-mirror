# Maintainer: Xiao-Long Chen <chenxiaolong@cxl.epac.to>

pkgname=wxhexeditor
pkgver=0.21
pkgrel=1
pkgdesc="a free hex editor / disk editor for Linux, Windows and MacOSX"
arch=('i686' 'x86_64' 'mips64el' 'armv6h')
url="http://wxhexeditor.sourceforge.net/"
license=('GPL')
depends=('udis86' 'wxgtk')
provides=("wxhexeditor=${pkgver}")
conflicts=('wxhexeditor')
source=("http://downloads.sourceforge.net/project/wxhexeditor/wxHexEditor/v${pkgver}%20Beta/wxHexEditor-v${pkgver}-src.tar.bz2"
        'use_shared_udis86.patch'
        'mhash_fix.patch'
        'makefile_prefix.patch')
sha512sums=('bea80a139bb76e47ed5d3644f923b4b042d8842bb3522e88e2c84947eadc7f49f2599438f583ea8a1fde05356886d8fb20f679398e1519c13acd8e4dd49ad729'
            'bc9245e9446c051a27b9876d26825ba4896387f1b502c2b29a851f080d03ce4e7f19d598f73db93a1f00289a291ebd115b8b96e546e6375471e4166d96416956'
            '990b4b51e63e042ee3ae66c1208b369e38929e6afc157406d89f1c84eefaf75c1797f83d915feaa20fa966dee9c5c8aabf9dac327add01ae09c6314bc3080938'
            '1d324b93588e4a58669b49b05f67e9aa31c31197b40273a3d1a732108a465ef744b3a192b4051a0f3e67c6e74c67e0ba8aa680acb66783052d39922396807664')

build() {
  cd "${srcdir}/wxHexEditor"

  # Use shared libraries
  #rm -rvf udis86 mhash
  patch -Np1 -i "${srcdir}/use_shared_udis86.patch"
  patch -Np1 -i "${srcdir}/mhash_fix.patch"

  #CXXFLAGS="${CXXFLAGS} -fpermissive"
  MAKEFLAGS="-j1"
  make ${MAKEFLAGS}
}

check() {
  cd "${srcdir}/wxHexEditor"
  msg "Nothing to check."
}

package() {
  cd "${srcdir}/wxHexEditor"
  make PREFIX="${pkgdir}/usr/" install
}

# vim:set ts=2 sw=2 et:
