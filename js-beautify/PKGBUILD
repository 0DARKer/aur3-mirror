# Contributor: Arnau Sanchez <tokland {at} gmail {dot} com>
pkgname="js-beautify"
pkgver="20111112"
pkgrel="1"
pkgdesc="Beautify Javascript code"
arch=(i686 x86_64)
url="https://github.com/einars/js-beautify"
license='custom'
depends=('python')
makedepends=('git')
_git_commit="0b3b4c1a9b"

build() {
    # Get source code
    msg "Connecting to github.com GIT server...."
    if test -d $startdir/src/$pkgname; then
        msg "Updating existing local files"
        (cd $pkgname && git pull origin master && git checkout $_git_commit) || return 1
    else
        git clone -b $_git_commit ${url}.git || return 1
    fi

    # Install
    BINDIR=${pkgdir}/usr/bin
    mkdir -p $BINDIR
    cd ${srcdir}/${pkgname}/python/
    python setup.py -q install --root="${pkgdir}"
    install -m 755 ${srcdir}/${pkgname}/python/js-beautify $BINDIR/js-beautify || return 1    
}
