# Contributor: Arnau Sanchez <tokland {at} gmail {dot} com>
pkgname="js-beautify"
pkgver="20101204"
pkgrel="2"
pkgdesc="Beautify Javascript code"
arch=(i686 x86_64)
url="https://github.com/einars/${pkgname}"
license='custom'
depends=('rhino')
makedepends=('git')
source=('js-beautify.sh')
md5sums=('23f33650f3e22ec2e984e58055ae1ed1')

build() {
    # Get source code
    msg "Connecting to github.com GIT server...."
    if test -d $startdir/src/$pkgname; then
        msg "Updating existing local files"
        cd $pkgname && git pull origin || return 1
    else
        git clone ${url}.git || return 1
    fi

    # Install
    SHAREDIR=${pkgdir}/usr/share/${pkgname} 
    BINDIR=${pkgdir}/usr/bin
    mkdir -p $SHAREDIR $BINDIR || return 1
    install -m 644 ${srcdir}/${pkgname}/*.js $SHAREDIR || return 1
    install -m 755 ${srcdir}/js-beautify.sh $BINDIR/js-beautify || return 1
}
