# Maintainer : chris_L <chrislcenter dash mamoru at yahoo.com dot mx>
# Contributor: wido <widomaker2k7@gmail.com>
# Contributor: David Houston <cranky@archlinux.us>

pkgname=wolf4sdl
pkgver=1.6
pkgrel=4
pkgdesc='An enhanced SDL port of the FPS "Wolfenstein 3D" by id Software (You need the retail game files to play)'
arch=('i686' 'x86_64')
url="http://www.chaos-software.de.vu/"
license=('custom')
depends=('sdl_mixer' 'gcc-libs')
conflicts=('wolf4sdl-shareware')
install=$pkgname.install
source=(http://www.fileden.com/files/2010/12/31/3049394//wolf4sdl-linuxpath-configdir-from-svn.patch http://www.alice-dsl.net/mkroll/bins/Wolf4SDL-1.6-src.zip)
md5sums=('4124398f4a79008676d3ffcf7df6a7b6'
         '61eed8ed819688663e399b5e79ed006f')

build() {
  cd Wolf4SDL-$pkgver-src
  # By default, it expects the GT/ID/Activision 1.4 full version files, 
  # uncomment one of the following lines if you got errors about numchecks and you are not using a mod
  # sed -i -e 's/#define GOODTIMES/\/\/&/' -e 's/\/\/\(#define APOGEE_1_1\)/\1/' version.h # uncoment this line if you have the v1.1 apogee full version
  # sed -i -e 's/#define GOODTIMES/\/\/&/' version.h # uncoment this line if you have the v1.4 apogee full version


  patch -p1 < ../wolf4sdl-linuxpath-configdir-from-svn.patch # apply a patch to use the /usr/share/wolf3d for data files and the configdir option from svn to use ~/.wolf4sdl for saved games
  make BINARY=$pkgname
  make PREFIX="$pkgdir"/usr BINARY=$pkgname install

  mkdir -p "$pkgdir"/usr/share/{wolf3d,licenses/$pkgname}
  install -m644 license*.txt "$pkgdir"/usr/share/licenses/$pkgname/
}

