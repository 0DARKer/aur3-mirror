# Maintainer: Glen Oakley <goakley123@gmail.com>

pkgname=cool-old-term-git
pkgrel=1
pkgver=c2fca95
pkgdesc="A good looking terminal emulator which mimics the old cathode display."
arch=(any)
url="https://github.com/Swordifish90/cool-old-term"
license=()
groups=()
depends=('qt5-base' 'qt5-declarative' 'qt5-quickcontrols' 'qt5-graphicaleffects')
makedepends=('git')
provides=()
conflicts=()
replaces=()
backup=()
options=()
install=
noextract=()
source=("$pkgname"::'git://github.com/Swordifish90/cool-old-term.git')
md5sums=('SKIP')

pkgver () {
  cd "$srcdir/$pkgname"
  git describe --always | sed 's/-/./g'
}

build() {
  cd "$srcdir/$pkgname"
  cd "konsole-qml-plugin"
  qmake && make && make install
}

package() {
  mkdir -p "$pkgdir/opt/cool-old-term"
  mkdir -p "$pkgdir/usr/bin"
  cp "$srcdir/$pkgname/cool-old-term" "$pkgdir/opt/cool-old-term/"
  cp -r "$srcdir/$pkgname/app" "$pkgdir/opt/cool-old-term/"
  cp -r "$srcdir/$pkgname/imports" "$pkgdir/opt/cool-old-term/"
  echo -e '#!/bin/bash\ncd /opt/cool-old-term && ./cool-old-term' > "$pkgdir/usr/bin/cool-old-term"
  chmod +x "$pkgdir/usr/bin/cool-old-term"
  #cp "$srcdir/$pkgname/gpl.txt" "$pkgdir/usr/share/licenses/LICENSE"
}

# vim:set ts=2 sw=2 et:
