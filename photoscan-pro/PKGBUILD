# Maintainer: Fincer <fincer89 at hotmail dot com>
# Created: 05/06/2014
pkgname=photoscan-pro
pkgver=1.0.4
ver=1_0_4
pkgrel=1
pkgdesc='Generate high resolution georeferenced orthophotos and textured polygonal models (trial version).'
arch=('i686' 'x86_64')
url='http://www.agisoft.ru/'
license=('custom: "commercial"')
depends=("libpng12")
install=photoscan-pro.install
if test "$CARCH" == x86_64; then
  architecture=_amd64
  source=("http://downloads.agisoft.ru/linux/photoscan-pro_$ver$_$architecture.tar.gz")
md5sums=('2be514951448a08d1507789765fd88b3'
         '2f29afffc98fa39ae0f5c47fe7195833'
         '9ffa07f3059edce837d43de8c2a50e1b'
         '72403a878fd2f555ce5d3bef507740e6')
else #i686
  echo "This software requires 64-bit environment. No installation candidates."
  exit
fi
source+=("photoscanpro"
  "$pkgname.png"
  "$pkgname.desktop")

package(){
  cd "$srcdir/$_pkgname"
  install -dm755 $pkgdir/opt/
  cp -r $srcdir/$pkgname $pkgdir/opt/$pkgname
  install -Dm755 $srcdir/photoscanpro $pkgdir/usr/bin/photoscanpro
  install -Dm644 "$srcdir/$pkgname.desktop" "$pkgdir/usr/share/applications/$pkgname.desktop"
  install -Dm644 "$srcdir/$pkgname.png" "$pkgdir/usr/share/pixmaps/$pkgname.png"
}
