# Maintainer: Philippe DUCRETTET <ecolinux@gmx.fr>

pkgname="batti+"
pkg2name="batti"
pkgver="0.3.8"
pkgrel=2
pkgdesc="A simple battery monitor for the system tray with french translation, icons and more precision."
arch=('any')
url="http://code.google.com/p/batti-gtk/"
license=('GPL')
depends=('dbus-python' 'python2' 'pygtk' 'gtk2' 'upower' 'gnome-colors-icon-theme')
optdepends=('notification-daemon: for power status notifications' 'xfce4-notifyd: alternative to notification-daemon')
conflicts=('batti')
provides=('batti')
install="$pkg2name.install"
source=("http://batti-gtk.googlecode.com/files/$pkg2name-$pkgver.tar.gz"
	"http://batti-gtk.googlecode.com/files/$pkg2name-0.3.7.tar.gz"
	"Battery.py"
	"fr.po")
md5sums=('4b239ead1643c95a6d89c380bc167781'
         'f855b28e4bb84fb33565d2668c33e221'
         '655de4a5d3e0ab62e6c590e8e8450c7a'
         '27e3a8ed268088454e59813838455986')
package() {
cd $srcdir/$pkg2name-$pkgver/data/icons/
statuicon=`ls -1  | sed "s/$/ /g" | tr -d '\r\n'`
for i in $statuicon ; do
	mkdir $i/status
	cp -R $srcdir/$pkg2name-0.3.7/data/icons/$i/status $i/
done
cp $srcdir/Battery.py $srcdir/$pkg2name-$pkgver/src/Battery.py
cp $srcdir/fr.po $srcdir/$pkg2name-$pkgver/po
    cd "$srcdir/$pkg2name-$pkgver"
    python2 setup.py install --root="$pkgdir/" --optimize=1
}
