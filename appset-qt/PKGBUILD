# Maintainer: Simone Tobia <simone.tobia at gmail dot com>

pkgname=appset-qt
pkgver=0.7.2
pkgrel=3
pkgdesc="An advanced and feature rich Package Manager Frontend"
arch=('i686' 'x86_64')
url="http://appset.sourceforge.net/"
license=('GPL2')
depends=('qt4>=4.7')
optdepends=('packer: for AUR support')
install=${pkgname}.install
changelog=$pkgname.changelog
source=(http://sourceforge.net/projects/appset/files/appset-qt/0.7/$pkgver/$pkgname-$pkgver-sources.tar.gz)
md5sums=('8658b6452e1f941af8501a6a772b6cd9')

build() {
  cd $srcdir/$pkgname-$pkgver-sources
  qmake-qt4 PREFIX=/usr -Wnone

  #localization
  lrelease Qt/AppSet-Qt/*.ts
  lrelease Qt/AppSetTray-Qt/*.ts
  lrelease Qt/AppSetRepoEditor-Qt/*.ts

  make || return 1
}

package() {
    cd $srcdir/$pkgname-$pkgver-sources

    make INSTALL_ROOT="$pkgdir/" install

# Helper daemon
#install -m 755 -d "$pkgdir/etc/rc.d" || return 1
#install -m 755 "$srcdir/$pkgname-$pkgver-sources/AppSetHelper/appset-helper.sh" "$pkgdir/etc/rc.d/appset-helper"
# FIXME: create systemd service
# Smth like this:
#install -D -m 755 ../appset-helper.service $pkgdir/usr/lib/systemd/system/appset-helper.service
}
