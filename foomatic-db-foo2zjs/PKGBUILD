pkgname=('foomatic-db-foo2zjs')
arch=('i686' 'x86_64')
_snapdate=20110707
_relver=4.0.7
_foomatic_db_pkgrel=1
pkgver=${_relver}_${_snapdate}
pkgrel=1
makedepends=()
license=('GPL' 'custom')
depends=('perl' 'libxml2')
optdepends=('foo2zjs')
replaces=('foomatic-db-ppd' 'foomatic-db-hpijs' 'foomatic-db')
conflicts=('foomatic-db-ppd' 'foomatic-db-hpijs' 'foomatic-db')
provides=('foomatic-db-hpijs' 'foomatic-db')
source=(http://mirrors.kernel.org/archlinux/extra/os/${CARCH}/foomatic-db-1:${pkgver}-${_foomatic_db_pkgrel}-${CARCH}.pkg.tar.xz)
url="http://www.linuxprinting.org/foomatic.html"
if [ x$CARCH == x"x86_64" ]; then
    md5sums=('4d1dc6434526ba062dc96e28df97e376')
else
    md5sums=('2b34c48d1abfaf879a6a380d3fe50312')
fi
pkgdesc="Foomatic - The collected knowledge about printers, drivers, and driver options in XML files, used by foomatic-db-engine to generate PPD files."

build() {
    cd ${srcdir}/
    cp -Rp $(echo * | sed -e 's|.PKGINFO||' -e "s/foomatic-db-${pkgver}-${_foomatic_db_pkgrel}-${CARCH}.pkg.tar.gz//") ${pkgdir}/
    # foo2zjs gives us something different
    rm ${pkgdir}/usr/share/foomatic/db/source/driver/foo2hiperc.xml
    rm ${pkgdir}/usr/share/foomatic/db/source/driver/foo2hp.xml
    rm ${pkgdir}/usr/share/foomatic/db/source/driver/foo2lava.xml
    rm ${pkgdir}/usr/share/foomatic/db/source/driver/foo2oak-z1.xml
    rm ${pkgdir}/usr/share/foomatic/db/source/driver/foo2oak.xml
    rm ${pkgdir}/usr/share/foomatic/db/source/driver/foo2qpdl.xml
    rm ${pkgdir}/usr/share/foomatic/db/source/driver/foo2slx.xml
    rm ${pkgdir}/usr/share/foomatic/db/source/driver/foo2xqx.xml
    rm ${pkgdir}/usr/share/foomatic/db/source/driver/foo2zjs.xml
    rm ${pkgdir}/usr/share/foomatic/db/source/printer/HP-LaserJet_M1005_MFP.xml
    rm ${pkgdir}/usr/share/foomatic/db/source/printer/HP-LaserJet_1022n.xml
    rm ${pkgdir}/usr/share/foomatic/db/source/printer/HP-LaserJet_1022nw.xml
    rm ${pkgdir}/usr/share/foomatic/db/source/printer/KONICA_MINOLTA-magicolor_2530_DL.xml
    rm ${pkgdir}/usr/share/foomatic/db/source/printer/Kyocera-KM-1635.xml
    rm ${pkgdir}/usr/share/foomatic/db/source/printer/Kyocera-KM-2035.xml
    rm ${pkgdir}/usr/share/foomatic/db/source/printer/Xerox-Phaser_6110.xml
    rm ${pkgdir}/usr/share/foomatic/db/source/printer/Xerox-Phaser_6115MFP.xml
    rm ${pkgdir}/usr/share/foomatic/db/source/printer/Samsung-CLP-310.xml
}
