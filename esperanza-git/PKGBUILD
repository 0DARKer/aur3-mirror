pkgname=esperanza-git
pkgver=20090219
pkgrel=1
pkgdesc="Esperanza is a XMMS2 client written in C++/Qt4 and aims to be fully featured and easy to use"
arch=('i686' 'x86_64')
url="http://wiki.xmms2.xmms.se/index.php/Client:Esperanza"
license=('GPL')
groups=('xmms2')
depends=('xmms2' 'qt')
makedepends=('boost' 'git')
provides=('esperanza')
conflicts=('esperanza')
replaces=('esperanza')
source=('esperanza.desktop')
noextract=()
md5sums=('d5dfd973a84e786504166c07c0ab4497') #generate with 'makepkg -g'

_gitroot="git://git.xmms.se/xmms2/esperanza.git"
_gitname="esperanza"


build() {

	cd $startdir/src
	msg "Connecting to GIT server...."

	if [ -d $startdir/src/$_gitname ]
	then
		cd $_gitname && git pull origin
		msg "The local files are updated."
	else
		git clone $_gitroot
	fi

	msg "GIT checkout done or server timeout"
	msg "Starting make..."

	# rm -r $startdir/src/$_gitname-build
	cp -r $startdir/src/$_gitname $startdir/src/$_gitname-build
	cd $startdir/src/$_gitname-build

	./configure --prefix=/usr
	make || return 1

	install -D -m 755 esperanza $startdir/pkg/usr/bin/esperanza

	install -D -m 644 $startdir/esperanza.desktop $startdir/pkg/usr/share/applications/esperanza.desktop
	install -D -m 644 $startdir/src/esperanza/data/images/esperanza.png $startdir/pkg/usr/share/icons/hicolor/128x128/apps/esperanza.png

}
