# Contributor: Peter Simons <simons@cryp.to>
# Contributor: Nicolas Pouillard <nicolas.pouillard@gmail.com>
pkgname=tahoe-lafs
pkgver=1.8.3
pkgrel=2
pkgdesc="a secure, decentralized, fault-tolerant filesystem"
arch=('i686' 'x86_64')
url='http://tahoe-lafs.org/'
license=('GPL')
groups=()
# net-tools is needed because Tahoe-LAFS uses /sbin/ifconfig
depends=('net-tools' 'python2' 'twisted' 'pyasn1' 'pycrypto' 'pycryptopp' 'nevow' 'python-foolscap' 'python-simplejson' 'zfec' 'python2-pyopenssl' 'pyutil' 'python2-argparse' 'zbase32' 'pythonmock>=0.6.0')
provides=()
conflicts=()
replaces=()
backup=()
options=()
install=
source=( http://tahoe-lafs.org/source/tahoe-lafs/snapshots/allmydata-tahoe-$pkgver.zip )
noextract=()
sha256sums=('518031e7ab4e77e9af81bc8b4c1e71322b5b02d8cc31603f638633e97b998a5b')

build(){
  cd "$srcdir/allmydata-tahoe-$pkgver" || return 1
  python2 setup.py build || return 1
  python2 setup.py test || return 1
}

package(){
  cd "$srcdir/allmydata-tahoe-$pkgver" || return 1
  python2 setup.py install --root="$pkgdir" || return 1
}
