# Contributor: Piotr Rogo≈ºa <rogoza dot piotr at gmail dot com>
# Created: 13/02/2011
pkgname=bike4win
_pkgname=bike4win-lin
pkgver=5.03.004
pkgrel=1
pkgdesc="bike4win is a free daily cycle, in which the parameters can be driven on the bike routes"
arch=('i686' 'x86_64')
url="http://www.bike4win.pl"
license=('GPL')
depends=(qt)
makedepends=(dpkg)
options=(!strip)
case $CARCH in
  i686)
    source=("http://www.bike4win.pl/homepage/Pobierz_files/${_pkgname}-32bit-${pkgver}.deb")
    _pkgname1=${_pkgname}-32bit-${pkgver}.deb
    md5sums=('5417c651c92c74911743bdd527fc5480')
    ;;
  x86_64)
    source=("http://www.bike4win.pl/homepage/Pobierz_files/${_pkgname}-64bit-${pkgver}.deb")
    _pkgname1=${_pkgname}-64bit-${pkgver}.deb
    md5sums=('52249a6c16db436d11df54e1c05b86c1')
    ;;
esac
build(){
  cd "$srcdir" || return 1
  dpkg -x ${_pkgname1} ./ || return 1
  install -dm755 ${pkgdir}/usr/share/{applications,menu,pixmaps} || return 1
  install -dm755 ${pkgdir}/usr/bin || return 1

  install -Dm755 ${srcdir}/usr/local/bike4win/bike4win ${pkgdir}/usr/bin/ || return 1
  install -Dm644 ${srcdir}/usr/local/bike4win/bike4win.png ${pkgdir}/usr/share/pixmaps/ || return 1
  install -Dm644 ${srcdir}/usr/share/applications/bike4win.desktop ${pkgdir}/usr/share/applications/ || return 1
  install -Dm644 ${srcdir}/usr/share/menu/bike4win ${pkgdir}/usr/share/menu/ || return 1
  sed -i -e 's#Exec=/usr/local/bike4win/bike4win#Exec=/usr/bin/bike4win#' \
    -e 's#Icon=/usr/local/bike4win/bike4win.png#Icon=/usr/share/pixmaps/bike4win.png#' \
    ${pkgdir}/usr/share/applications/bike4win.desktop || return 1
  sed -i -e 's#command="/usr/local/bike4win/bike4win"#command="/usr/bin/bike4win"#' \
    -e 's#icon="/usr/local/bike4win/bike4win.png"#icon="/usr/share/pixmaps/bike4win.png"#' \
    ${pkgdir}/usr/share/menu/bike4win || return 1
}
# vim:set ts=2 sw=2 et ft=sh et:
