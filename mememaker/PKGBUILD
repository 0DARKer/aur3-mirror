# This is an example PKGBUILD file. Use this as a start to creating your own,
# and remove these comments. For more information, see 'man PKGBUILD'.
# NOTE: Please fill out the license field for your package! If it is unknown,
# then please put 'unknown'.

# Maintainer: Your Name <youremail@domain.com>
pkgname=mememaker
pkgver=20120318
pkgrel=2
pkgdesc="create memes from the command line"
arch=('any')
url="http://www.reddit.com/r/ScriptSwap/comments/r1oxf/bash_meme_maker_script_creates_meme_in_terminal/"
license=('GPL')
depends=('curl' 'imagemagick')
provides=('mememaker')
install=mememaker.install
source=(http://199.91.154.105/6bebbufb6ibg/25o01ck42w0ccdc/mememaker.zip\
        mememaker.install)

build(){
  cd $srcdir
  sed -i 's/.\/list.txt/\/usr\/share\/mememaker\/list.txt/g' $pkgname.sh
  sed -i 's/.\/memes/\/usr\/share\/mememaker\/memes/g' $pkgname.sh
  sed -i 's/.\/meme.jpg/\/tmp\/meme.jpg/g' $pkgname.sh
  sed -i 's/\ meme.jpg/\ \/tmp\/meme.jpg/g' $pkgname.sh
  sed -i 's/\ out.png/\ \/tmp\/out.png/g' $pkgname.sh
  sed -i 's/caption/label/g' $pkgname.sh
  sed -n 's/^apikey=/&/w imgurrc' < $pkgname.sh
  sed -i 's/apikey=/imgur\ /' imgurrc 
  sed -i 's/\"//g' imgurrc
  sed -i '/apikey=/ c\apikey='"\"$\(grep \'imgur\' \/etc\/imgurrc \|awk \'\{print \$2\}\'\)\""'' $pkgname.sh
}

package() {
  cd $srcdir
  install -D list.txt $pkgdir/usr/share/mememaker/list.txt
  cp -dpr --no-preserve=ownership memes $pkgdir/usr/share/mememaker/memes/
  install -Dm755 $pkgname.sh $pkgdir/usr/bin/$pkgname
  install -D imgurrc $pkgdir/etc/imgurrc
}

# vim:set ts=2 sw=2 et:
md5sums=('31010fd0580f444b6c64c72135970fcf'
         '09227eb204687bce0e1f8ee721571e6d')
