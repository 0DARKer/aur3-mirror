# Contributor: Benjamin Wild <benwild@gmx.de>
# Contributor: Aaron 'venisonslurpee' Laursen <venisonslurpee@gmail.com>
pkgname=miro-svn
pkgver=9824
pkgrel=1
pkgdesc="A free Internet television application"
arch=('i686' 'x86_64')
depends=('xine-lib' 'boost' 'gnome-python-extras' 'dbus-python' 'pyrex' \
	 'python-pysqlite' 'nss' 'nspr' 'pygtk' 'gtk2' 'xulrunner' \
	 'gstreamer0.10-python' 'python-notify' 'libtorrent-rasterbar')
makedepends=('pkgconfig' 'subversion')

url="http://www.getmiro.com"
license=GPL

conflicts=('democracy' 'miro')
provides=('democracy' 'miro')
replaces=('democracy-svn')

source=(qt-mt.pc)
md5sums=('c1f13605afd86fe8f80e9634a286a370') 

_svntrunk=https://svn.participatoryculture.org/svn/dtv/trunk
_svnmod=tv

build() {
  cd $startdir/src/

  svn co $_svntrunk --config-dir ./ -r $pkgver $_svnmod

  msg "SVN checkout done or server timeout"
  msg "Starting make..."

  cp -r $_svnmod $_svnmod-build

  cd $startdir/src/$_svnmod-build/tv

  cd $startdir/src/$_svnmod-build/tv

  PKG_CONFIG_PATH=$PKG_CONFIG_PATH:$startdir/src/ 
  
  cd $startdir/src/$_svnmod-build/tv/platform/gtk-x11
  python setup.py install --root=$startdir/pkg || return 1
}  	
