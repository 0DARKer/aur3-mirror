# Maintainer: Gimmeapill <gimmeapill[at]gmail[dot]com>

pkgname=modulyzer-svn
pkgver=48
pkgrel=1
pkgdesc="SDL GUI for Armstrong"
url="http://batman.no/gui2/build.html"
arch=('x86_64' 'i686')
license=('LPGL')
depends=('fbgui' 'freetype2' 'lua' 'sdl')
optdepends=()
makedepends=('subversion')
provides=(modulyzer)
conflicts=()
replaces=()
backup=()
install=
source=()
md5sums=()

_svntrunk="svn://anders-e.com/fbgui/trunk/modulyzer"
_svnmod="modulyzer"


build() {

  msg "Starting SVN checkout..."
  cd ${srcdir}
    if [ -d $_svnmod/.svn ]; then
      (cd $_svnmod && svn up -r $pkgver)
    else
      svn co $_svntrunk --config-dir ./ -r $pkgver $_svnmod
    fi
  msg "SVN checkout done or server timeout"

  cd ${srcdir}/$_svnmod
  
  #fix the path to lua in Makefile.am
  sed -i s/lua5.2/lua/ Makefile.am
 
  autoreconf -vi
  ./configure --prefix=/usr
  make
}    

package() {
  cd ${srcdir}/$_svnmod
  make DESTDIR="$pkgdir" install
}

