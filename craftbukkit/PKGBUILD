# Maintainer: Vincent Post <vincent.post@w1r3.net>
# https://github.com/w1r3/archlinux-packages
# https://git.w1r3.org/w1r3/archlinux-packages

pkgname=craftbukkit
pkgver=1.7.2r0.3
_pkgver=02535_1.7.2-R0.3
pkgrel=1
pkgdesc="Minecraft server implementing the Bukkit API"
arch=(any)
url="http://bukkit.org"
license=("LGPL")
depends=(java-runtime-headless tmux sudo)
conflicts=(bukkit craftbukkit-stable)
provides=(bukkit)
install=craftbukkit.install
source=("http://dl.bukkit.org/downloads/${pkgname}/get/${_pkgver}/${pkgname}-beta.jar"
        "craftbukkit.service"
        "craftbukkit.sh")
noextract=("craftbukkit-beta.jar")
md5sums=('d1e35cd0ad41bbdc0a4efb798a8870a2'
         '0ba6b038ca1b04ef1e4f2746e3011a71'
         'b7905af90a28e46e14e2771a2b3a71ff')

package() {
  install -Dm644 "$srcdir/craftbukkit-beta.jar" "$pkgdir/srv/craftbukkit/craftbukkit.jar"
  install -m755 "$srcdir/craftbukkit.sh" "$pkgdir/srv/craftbukkit/craftbukkit.sh"
  install -Dm644 "$srcdir/craftbukkit.service" "$pkgdir/usr/lib/systemd/system/craftbukkit.service"
}
