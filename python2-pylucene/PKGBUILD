# Maintainer: Limao Luo <luolimao+AUR@gmail.com>
# Contributor: Jeremy Sands <cto@jeremysands.com>
# Contributor: William Rea <sillywilly@gmail.com>

_pkgname=pylucene
pkgname=python2-$_pkgname
pkgver=2.9.4
pkgrel=1
pkgdesc="Use Lucene's text indexing and searching capabilities for Python"
arch=(i686 x86_64)
url=http://lucene.apache.org/$_pkgname/
license=(MIT)
depends=(java-environment python2)
makedepends=(apache-ant gcc-gcj)
source=(http://mirror.olnevhost.net/pub/apache/lucene/$_pkgname/$_pkgname-$pkgver-1-src.tar.gz)
sha256sums=('f5974b104fabe093698abdf9b03207d2c812ebb0b9af42e3bcdcafd18213cab7')
sha512sums=('cfc022e127cc2171d5eafab8c6417a82859e3468748c6d354981538f7011a13e524399eff620ff19ce3bc79ee8fb745d0dca93dfb3479a82bee11ce7cbc57776')

build() {
    make -C $_pkgname-$pkgver-1 ANT=ant
}

package() {
    cd $_pkgname-$pkgver-1/jcc/
    export JCC_JDK=$JAVA_HOME
    NO_SHARED=true python2 setup.py install --prefix=/usr --root="$pkgdir" --optimize=1
    make -C .. DESTDIR="$pkgdir" install
}
