# Maintainer: Peter Lewis <prlewis@letterboxes.org>
# Contributor: Will Tipton
# Contributor: Iom
# Contributor: awagner
# Contributor: Olivier Mehani <shtrom-arch@ssji.net>

pkgname=vim-latexsuite-svn
pkgver=1050
pkgrel=1
pkgdesc="Provides a comprehensive set of tools to view, edit, and compile LaTeX documents within Vim. Also provides macros to speed up the creation of LaTeX documents. SVN version."
arch=('any')
url="http://vim-latex.sourceforge.net"
license=('custom:vim')
depends=('vim')
optdepends=('python: speeds things up')
makedepends=('subversion')
provides=('vim-latexsuite')
conflicts=('vim-latexsuite' 'latex-suite-svn')
replaces=('latex-suite-svn')
options=()
install=vim-latexsuite-svn.install
 
_instdir=/usr/share/vim/vimfiles

_svntrunk=https://vim-latex.svn.sourceforge.net/svnroot/vim-latex/trunk/
_svnmod=vim-latex
 
build() {
 cd "$srcdir"
 
 if [ -d $_svnmod/.svn ]; then
  (cd $_svnmod && svn up -r $pkgver)
 else
  svn co $_svntrunk --config-dir ./ -r $pkgver $_svnmod
 fi
 
 msg "SVN checkout done or server timeout"
 
 cd $srcdir

 #
 # BUILD
 #
 cd vim-latex/vimfiles
 
 make DESTDIR=$pkgdir VIMDIR=/usr/share/vim/vimfiles install

 # Since this is just copied and not built in a separate directory, we need to be sure to remove the .svn stuff
 find $startdir/pkg -type d -name .svn -exec rm -rf '{}' + ;
}
