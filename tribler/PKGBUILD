# Contributor: Alessio Bolognino <themolok at gmail dot com>
# Contributor: Simone Esposito <webmaster at freebnc dot net>
# Contributor: Jeremiah Dodds <jeremiah dot dodds at gmail dot com>
# Maintainer: RunningDroid <rningdrd at tormail dot com>

pkgname=tribler
pkgver=6.0.4
pkgrel=2
pkgdesc="A 4th generation file sharing system bittorrent client"
arch=('any')
url="http://www.tribler.org"
license=('LGPL2.1')
depends=('python2' 'wxpython' 'python-m2crypto>=0.16' 'python2-apsw' 'python2-netifaces' 'libswift' 'gconf')
optdepends=('vlc: watch videos in tribler'
            'python2-feedparser: download torrents listed in a rss or atom feed')
source=("http://dl.tribler.org/tribler_${pkgver}_all.deb")
md5sums=('abf7465d37dafc65e57816488d8d6770')

build() {
  cd "$srcdir"

  ar vx tribler_${pkgver}_all.deb
  tar -C "$pkgdir" -xvzf data.tar.gz
  rm -r $pkgdir/usr/share/tribler/Tribler/SwiftEngine

  cd "$pkgdir"

  sed -i -e "s|swiftbinpath\ =\ os.path.join(self.sconfig.get_install_dir(),\"swift\")|swiftbinpath\ =\ \"\/usr\/bin\/swift\"|g" usr/share/tribler/Tribler/Main/tribler.py
  sed -i -e "s=python=python2=g" usr/bin/$pkgname
}
