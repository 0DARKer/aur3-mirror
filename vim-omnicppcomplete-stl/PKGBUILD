# Maintainer: Tianjiao Yin <ytj000@gmail.com>

pkgname="vim-omnicppcomplete-stl"
pkgdesc="STL tags for vim omnicppcomplete."
pkgver=0.4.1
pkgrel=1
arch=('any')
url="http://www.vim.org/scripts/script.php?script_id=1520"
license=('boost')
depends=('vim-omnicppcomplete')
source=('http://www.sgi.com/tech/stl/stl.tar.gz')
install=vim-omnicppcomplete-stl.install

build() {
	cd ${srcdir}
	rm stl.tar.gz

	# replace the marco
	sed "s/\<__STL_BEGIN_NAMESPACE\>/namespace std {/g" * -i
	sed "s/\<__STL_END_NAMESPACE\>/}/g" * -i

	# make the source code more readable
	sed "s/\<_//g" * -i
	sed "s/\<_//g" * -i
	sed "s/\<_//g" * -i

	# make tags
        ctags -R --c++-kinds=+p --fields=+iaS --extra=+q .
}

package() {
	mkdir -p ${pkgdir}/usr/share/vim/
	cp ${srcdir} ${pkgdir}/usr/share/vim/stl/ -r
}
md5sums=('e0a19469085fb82912cd815a05390797')
