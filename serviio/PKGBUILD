# Maintainer: Casper Bruun <casperbruun@gmail.com>

pkgname=serviio
pkgver=0.5.2
pkgrel=2
pkgdesc="Free DLNA media server"
arch=(any)
url="http://www.serviio.org/"
license=(Proprietary)
depends=('java-environment' 'ffmpeg')
source=(http://download.serviio.org/releases/serviio-${pkgver}-linux.tar.gz
        ${pkgname}.sh
        ${pkgname}-console.sh)
md5sums=('4ec4e1192d09c6bd1419ebf453bbe207'
         'c39c425fb056bd0d6e954a355ce07d79'
         'cbf5934cbb3692160c9b11ccb2c22251')

build() {
    cd ${srcdir}/${pkgname}-${pkgver}
    
    # create the folders needed in the main directory
    install -dm755 ${pkgdir}/usr/share/java/${pkgname}/{config,lib,library}
    # ... and the bin folder
    install -dm755 ${pkgdir}/usr/bin
    
    # place the serviio scripts in the bin folder
    install -m755 ${srcdir}/${pkgname}.sh ${pkgdir}/usr/bin/${pkgname}
    install -m755 ${srcdir}/${pkgname}-console.sh ${pkgdir}/usr/bin/${pkgname}-console
    
    # copy xml config files to the config folder
    install -m644 config/*.xml ${pkgdir}/usr/share/java/${pkgname}/config
    
    # copy all jar files to the lib folder
    install -m644 lib/*.jar ${pkgdir}/usr/share/java/${pkgname}/lib
    
    # copy derby.properties to library folder
    install -m644 library/*.properties ${pkgdir}/usr/share/java/${pkgname}/library
    
    # supply the license file
    install -dm755 ${pkgdir}/usr/share/licenses/${pkgname}
    install -m644 LICENCE.txt ${pkgdir}/usr/share/licenses/${pkgname}/LICENSE
}

