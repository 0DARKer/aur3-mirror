# Maintainer: MThinkCpp <mtc.maintainer[at]outlook.com>
pkgname='libc++'
pkgver=3.2
pkgrel=2
pkgdesc='C++ Standard Library implementation - libc++ is a new implementation of the C++ standard library, targeting C++11.'
url='http://libcxx.llvm.org'
license='custom'
arch=('any')

depends=('gcc-libs>=4.8') #clang for compilation, gcc-libs for libsupc++ (at a later date needs changing to depend on libc++abi)
make_depends=('clang>=3.2 : To compile libc++' 'subversion: Download source files' 'cmake')

build() {
  svn co http://llvm.org/svn/llvm-project/libcxx/branches/release_32 ${srcdir}/libc++
}
package() {
  mkdir -p $pkgdir/usr/share/licenses/$pkgname
  cp ${srcdir}/libc++/LICENSE.TXT $pkgdir/usr/share/licenses/$pkgname/
  
  #From libcxx.llvm.org
    CC=clang CXX=clang++ cmake -G "Unix Makefiles" -DLIBCXX_CXX_ABI=libsupc++ -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=${pkgdir}/usr ${srcdir}/libc++
    make
    make install
}