# Contributor: Jonathan Wiersma <archaur at jonw dot org>
pkgname=eclipse-mylyn-extras
pkgver=3.3.3
_buildname="v20100330-0100"
pkgrel=1
pkgdesc="Support for additional task repositories (Trac and RIRA) in Mylyn for Eclipse"
arch=('i686' 'x86_64')
url="http://www.eclipse.org/mylyn/"
license=('EPL')
depends=("eclipse-mylyn>=$pkgver")
optdepends=("trac")
noextract=($pkgname-$pkgver.zip)

_mirror="http://mirror.csclub.uwaterloo.ca/eclipse"
_mirrorid="492"
source=("$pkgname-$pkgver.zip::http://www.eclipse.org/downloads/download.php?file=/tools/mylyn/update-archive/$pkgver/$_buildname/mylyn-$pkgver.$_buildname-${pkgname//eclipse-mylyn-}.zip&url=$_mirror/tools/mylyn/update-archive/$pkgver/$_buildname/mylyn-$pkgver.$_buildname-${pkgname//eclipse-mylyn-}.zip&mirror_id=$_mirrorid")

build() {
	# Extract archive
	mkdir -p $srcdir/eclipse || return 1
	cd $srcdir/eclipse || return 1
	jar xf $srcdir/$pkgname-$pkgver.zip || return 1
	
	# Install Plugins and Features
	cd $srcdir || return 1
	find eclipse -type f -exec install -Dm644 {} \
		$pkgdir/usr/share/eclipse/dropins/${pkgname#eclipse-}/{} \; || return 1
}

md5sums=('84aa0457d57413a427b9b4f30b890ea6')
