#
# Contributor: thoughtcrime
#

# Get the gamepack name from here:
# https://zerowing.idsoftware.com/svn/radiant.gamepacks/
_gamepackname=UrTPack
_gamepackshort=urt

pkgname=gtkradiant-gamepack-$_gamepackshort-svn
pkgver=42
pkgrel=3
pkgdesc="Urban Terror gamepack for gtkradiant-svn"
arch=('x86_64' 'i686')
url="http://www.qeradiant.com/cgi-bin/trac.cgi/wiki/ZeroRadiant"
license=('unknown')
groups=()
depends=('gtkradiant-svn')
makedepends=('subversion')
provides=("gtkradiant-gamepack-$_gamepackshort")
conflicts=("gtkradiant-gamepack-$_gamepackshort")
replaces=()
backup=()
options=()
install=
source=()
noextract=()
md5sums=()

_svntrunk=https://zerowing.idsoftware.com/svn/radiant.gamepacks/$_gamepackname
_svnmod=$_gamepackname

build() {
	cd "$srcdir"

	if [ -d $_svnmod/.svn ]; then
		(cd $_svnmod && svn up -r $pkgver)
	else
		svn co $_svntrunk --config-dir ./ -r $pkgver $_svnmod
	fi

	#
	# BUILD
	#

	msg "SVN checkouts done or server timeout"
	msg "Copying files..."
	
	# copy everything
	installsdir="$pkgdir/usr/share/gtkradiant/installs"
	install -d "$installsdir"
	cp "$srcdir/$_svnmod/trunk" "$installsdir/$_gamepackname" -r

	# remove all .svn directories
	cd "$pkgdir"
	find . -type d -name .svn -print0 | xargs -0 rm -r
}
