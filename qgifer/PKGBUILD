# Maintainer: archtux <antonio dot arias99999 at gmail dot com>

pkgname=qgifer
pkgver=0.1.0
pkgrel=1
pkgdesc="A video-based animated GIF creator"
arch=('i686' 'x86_64')
url="http://sourceforge.net/projects/qgifer/"
license=('GPL3')
depends=('giflib' 'opencv' 'qt4>=4.8')
makedepends=('cmake')
source=(http://prdownloads.sourceforge.net/$pkgname/$pkgname-$pkgver-source.tar.gz)
md5sums=('8ec0a588f8a32abbb85ff354255e0c3b')

prepare() {
  cd $srcdir/$pkgname-$pkgver-source

  # Fix 'About dialog'
  sed -i 's_KPEdit_QGifer_' ui/aboutdialog.ui

  rm -rf build/
  mkdir -p build/  
}

build() {
  cd $srcdir/$pkgname-$pkgver-source/build

  cmake .. -DCMAKE_INSTALL_PREFIX=/usr -DQUIET_MODE=ON
}

package() {
  cd $srcdir/$pkgname-$pkgver-source/build

  make DESTDIR=$pkgdir install
}