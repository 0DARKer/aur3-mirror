# Contributor: Gustavo Alvarez <sl1pkn07@gmail.com>

pkgname=dkms-vhba
_pkgname=vhba-module
_module=vhba
pkgver=20110915
pkgrel=5
pkgdesc="DKMS controlled drivers for VHBA module for CDEMU"
arch=('any')
url="http://cdemu.sourceforge.net/"
license=GPL2
makedepends=('linux-headers' 'dkms' 'bash')
provides=("vhba-module=${pkgver}-${pkgrel}")
conflicts=('vhba-module')
install="${pkgname}.install"
source=("http://downloads.sourceforge.net/cdemu/$_pkgname-$pkgver.tar.bz2"
        ${pkgname}.install
        dkms.conf
        60-vhba.rules)
md5sums=('8bb99b427ca67bad448f4dd211bdd1a2'
         '7d8eab4635b7221a3529b988e8d7dbc5'
         'e4dbb49b0c22f25ca23267eea23aecbf'
         '549bd2d9696bd1884c8eed7193c00e21')

package() {
    cd ${srcdir}/${_pkgname}-${pkgver}

    mkdir -p ${pkgdir}/usr/src/${_module}-${pkgver}
    cp -a * ${pkgdir}/usr/src/${_module}-${pkgver}
    rm -r ${pkgdir}/usr/src/${_module}-${pkgver}/debian
    cp ${srcdir}/dkms.conf ${pkgdir}/usr/src/${_module}-${pkgver}
    install -Dm664 ${srcdir}/60-vhba.rules ${pkgdir}/lib/udev/rules.d/60-vhba.rules
}  

