# Maintainer: archtux <antonio.arias99999 at gmail.com>

pkgname=xnoise
pkgver=0.1.29
pkgrel=3
pkgdesc="Media player with a slick GUI, great speed and lots of features."
arch=('i686' 'x86_64')
url="http://www.xnoise-media-player.com/"
license=('GPL2')
depends=('gstreamer0.10' 'libunique' 'taglib')
makedepends=('intltool' 'pkg-config' 'vala>=0.11.6')
source=(http://xnoise.googlecode.com/files/$pkgname-$pkgver.tar.bz2)
md5sums=('a97113ed8d8f9229f2274fd886a3286b')

build() {
  cd $srcdir/$pkgname-$pkgver

  # Fedora g_const_return.patch(Delete '-DG_DISABLE_DEPRECATED=1' in Makefiles) : Thanks to 3ED_0 for patch
  sed -i '/-DG_DISABLE_DEPRECATED=1/d' src/Makefile.in
  sed -i '/-DG_DISABLE_DEPRECATED=1/d' libxnoise/Makefile.in
  cd plugins
  for file in {soundmenu,soundmenu2,lastfmCovers,chartlyrics,testplugin,titleToDecoration,databaseLyrics,mediakeys,mpris,cyclic-save-state,lyricwiki,mpris_one,notifications,notifications2}/Makefile.in; do
  sed -i '/-DG_DISABLE_DEPRECATED=1/d' $file
  done

  cd ..
  ./configure --prefix=/usr
  make
  make DESTDIR=$pkgdir install
}