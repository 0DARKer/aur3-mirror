# Contributor: Andreas Baumann <abaumann at yahoo dot com>

pkgname=libldapc++
pkgver=2.4.30
pkgrel=1
pkgdesc="a C++ API for openldap"
arch=('i686' 'x86_64')
url="http://www.openldap.org/"
license=('custom')
depends=('libldap>=2.4.24')  
makedepends=('libldap>=2.4.24')
source=(ftp://ftp.openldap.org/pub/OpenLDAP/openldap-release/openldap-${pkgver}.tgz
        openldap-2.4.30-unistd.patch)
md5sums=('4f210937cf87e3467a536dd3fed1b8b4'
         '7486aa92e0a074d540a6f6688e803ee2')

build() {

  cd ${srcdir}/openldap-${pkgver}

  msg "Patching..."
  for i in $startdir/*.patch; do
    patch -Np1 -i "$i" || return 1
  done

  cd ${srcdir}/openldap-${pkgver}/contrib/ldapc++

  ./configure --prefix=/usr || return 1

  make || return 1

  make DESTDIR=${pkgdir} install
}
