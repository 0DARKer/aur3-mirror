# Maintainer: osily <ly50247 at gmail dot com>
# Contributor: Olivier Duclos <olivier.duclos gmail.com>
# Contributor: wido <widomaker2k7@gmail.com>
# Contributor: VuDu <vudu 'dot' curse 'at' gmail 'dot' com>
# Contributor: Houlala <houlala 'at' gmail 'dot' com>

pkgname=xnviewmp
pkgver=0.39
pkgrel=1
pkgdesc="An efficient image viewer, browser and converter (beta release)."
arch=('i686' 'x86_64')
url="http://newsgroup.xnview.com/viewtopic.php?f=60&t=24056"
license=('custom')
depends=('glib2' 'expat')
source=("http://download.xnview.com/XnViewMP-linux.tgz"
		"${pkgname}-${pkgver}-${pkgrel}.patch")
md5sums=('cab11ea66f42f2186fb625259f9eea5a'
		 '741d5e04ab400de49ac84a07decbe1b1')

[ "$CARCH" = "x86_64" ] && 
source=("http://download.xnview.com/XnViewMP-linux-x64.tgz"
		"${pkgname}-${pkgver}-${pkgrel}.patch") &&
md5sums=('bd68eae3382a674fe7efdc5a2512dd2a'
		 '741d5e04ab400de49ac84a07decbe1b1')


build() {
cd ${srcdir}

patch -p1 -i ${srcdir}/${pkgname}-${pkgver}-${pkgrel}.patch || return 1
cd XnViewMP

install -d ${pkgdir}/usr/share/xnviewmp
cp -R * ${pkgdir}/usr/share/xnviewmp

install -Dm 644 XnView.desktop ${pkgdir}/usr/share/applications/xnviewmp.desktop || return 1

install -d ${pkgdir}/usr/bin/
cd ${pkgdir}/usr/bin/
ln -s ../share/xnviewmp/xnview.sh xnviewmp || return 1

}
