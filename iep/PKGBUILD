#Contributor: Ricardo Honorato Z.
#Contributor: Hector Mtz-Seara
pkgname=iep
pkgver=2.3
pkgrel=4
pkgdesc="IEP (pronounced as 'eep') is a cross-platform Python IDE focused on interactivity and introspection, which makes it very suitable for scientific computing. Its practical design is aimed at simplicity and efficiency."
url="http://code.google.com/p/iep/"
license="BSD"
arch=('any')
depends=('python' 'python-qscintilla')


source=(http://iep.googlecode.com/files/$pkgname-$pkgver.source.zip)
md5sums=('739a5783e2e4e65e77f3c48a96e4cf18')

build() {
  true
}

package(){
  cd $srcdir/$pkgname
  sed -i 's/python3.1/python/g' iep.pyw
  sed -i 's/python3.1/python/g' iep.py
  sed -i 's/python3.1/python/g' shellStack.py
  sed -i 's/python3.1/python/g' freezeScript.py
  mkdir -p ${pkgdir}/usr/lib/python3.2/site-packages/
  cp -r $srcdir/$pkgname ${pkgdir}/usr/lib/python3.2/site-packages/
  chmod -R 755  ${pkgdir}/usr/lib/python3.2/site-packages/$pkgname
  cat > ${pkgname}.desktop <<EOF
[Desktop Entry]
Version=1.0
Type=Application
Encoding=UTF-8
Name=iep
Comment=IEP is a cross-platform Python IDE
Exec=/usr/lib/python3.2/site-packages/iep/iep.pyw
Icon=/usr/lib/python3.2/site-packages/iep/icons/iep.ico
Categories=Python;Development;IDE;
EOF
  mkdir -p ${pkgdir}/usr/share/applications
  install -m644 ${pkgname}.desktop ${pkgdir}/usr/share/applications/${pkgname}.desktop
  cat > ${pkgname} <<EOF
#!/bin/sh
/usr/lib/python3.2/site-packages/iep/iep.pyw
EOF
mkdir -p ${pkgdir}/usr/bin
install -m755 ${pkgname} ${pkgdir}/usr/bin/${pkgname}
mkdir -p ${pkgdir}/usr/share/licenses/${pkgname}
install -m444 license.txt ${pkgdir}/usr/share/licenses/${pkgname}/license.txt
}
