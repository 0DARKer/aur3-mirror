pkgname=eclipse-zkstudio
pkgver=1.0.1.v201106141113
pkgrel=1
pkgdesc="ZK Studio plugin for Eclipse, Java web application UI design, prototyping and development tools"
arch=('i686' 'x86_64')
url="http://www.zkoss.org/product/zkstudio"
license=('custom')
depends=('eclipse>=3.5')
source=(zkstudio_1.0.1_helios.zip::'http://www.zkoss.org/zkdownload/downloadFile?id=1029910473') #46M
## alternative:
# _url=http://studioupdate.zkoss.org/studio/update
# ${_url}/features/org.zkoss.eclipse_1.0.1.v201106141113.jar
# ${_url}/plugins/org.zkoss.eclipse.brand_1.0.1.v201106141113.jar
# ${_url}/plugins/org.zkoss.eclipse.editor_1.0.1.v201106141113.jar
# ${_url}/plugins/org.zkoss.eclipse.pack_1.0.1.v201106141113.jar
# ${_url}/plugins/org.zkoss.eclipse.services_1.0.1.v201106141113.jar
# ${_url}/plugins/org.zkoss.eclipse.setting_1.0.1.v201106141113.jar
# ${_url}/plugins/org.zkoss.eclipse.style_1.0.1.v201106141113.jar
# ${_url}/plugins/org.zkoss.eclipse.ve_1.0.1.v201106141113.jar
# ${_url}/plugins/org.zkoss.eclipse.zks_1.0.1.v201106141113.jar
# ${_url}/plugins/org.zkoss.eclipse36.services_1.0.1.v201106141113.jar
md5sums=('e22c3b64b57a73b02a0a497864a6d0a3')

build() {
    _dest=${pkgdir}/usr/share/eclipse/dropins/${pkgname/eclipse-}/eclipse

    cd ${srcdir}

    # Features
    find features -type f | while read _feature ; do
        if [[ ${_feature} =~ (.*\.jar$) ]] ; then
            install -dm755 ${_dest}/${_feature%*.jar}
            cd ${_dest}/${_feature/.jar}
            jar xf ${srcdir}/${_feature} || return 1
        else
            install -Dm644 ${_feature} ${_dest}/${_feature}
        fi
    done

    # Plugins
    find plugins -type f | while read _plugin ; do
        install -Dm644 ${_plugin} ${_dest}/${_plugin}
    done
}

