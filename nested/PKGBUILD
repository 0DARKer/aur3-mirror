#Maintainer: Carlos Jenkins <cjenkins@softwarelibrecr.org>
#Contributor: fabmen
pkgname='nested'
pkgver='1.2.2'
pkgrel='0'
pkgdesc="Nested is a specialized editor focused on creating structured documents such as reports, publications, presentations, books. It offers a rich WYSIWYM interface where the user writes plain text with a lightweight markup language."
arch=('i686' 'x86_64')
url='http://http://nestededitor.sourceforge.net'
license=('GPL')
depends=('python2>=2.7' 'pygtk>=2.24' 'gnome-python-desktop' 'gtksourceview2')
optdepends=('pywebkitgtk' 'python2-gtkspellcheck' 'texlive-publishers' 'texlive-core' 'texive-bin' 'texlive-latexextra' 'rubber' 'iso-codes')
source=('http://sourceforge.net/projects/nestededitor/files/'$pkgname'-'$pkgver'.tar.gz/download')
makedepends=('gendesk')
_name=('Nested Editor')


prepare(){
	cd "$srcdir"
	cp "../fr.po" "$pkgname-$pkgver/l10n/po/"
cp "../pt.po" "$pkgname-$pkgver/l10n/po/"
cp "../ru.po" "$pkgname-$pkgver/l10n/po/"

}

build(){
	cd "$srcdir"
	gendesk -n

}


package() {
  cd "$srcdir/$pkgname-$pkgver"
  cd "l10n"
  python2 compile_mo.py
  cd ..
  python2 setup.py install --root="$pkgdir/" --optimize=1
  msg2 'Packaging menu entry and icon...'
  cd ..
  install -Dm644 "$pkgname.desktop" \
    "$pkgdir/usr/share/applications/$pkgname.desktop"
  install -Dm644 "$pkgname-$pkgver/$pkgname/$pkgname.png" \
    "$pkgdir/usr/share/pixmaps/$pkgname.png"
   msg2 'Packaging lang...'
   install -Dm644 "$srcdir/$pkgname-$pkgver/l10n/mo/fr/LC_MESSAGES/${pkgname}.mo" "${pkgdir}/usr/share/locale/fr/LC_MESSAGES/${pkgname}.mo"
   install -Dm644 "$srcdir/$pkgname-$pkgver/l10n/mo/ru/LC_MESSAGES/${pkgname}.mo" "${pkgdir}/usr/share/locale/ru/LC_MESSAGES/${pkgname}.mo"
   install -Dm644 "$srcdir/$pkgname-$pkgver/l10n/mo/pt/LC_MESSAGES/${pkgname}.mo" "${pkgdir}/usr/share/locale/pt/LC_MESSAGES/${pkgname}.mo"
   install -Dm644 "$srcdir/$pkgname-$pkgver/l10n/mo/es/LC_MESSAGES/${pkgname}.mo" "${pkgdir}/usr/share/locale/es/LC_MESSAGES/${pkgname}.mo"
   
  
}

# vim:set ts=2 sw=2 et:

md5sums=('cbdc61bf592477116569ddb69cad07d5')
