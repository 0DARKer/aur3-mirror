#Original author: Jason Ferrara <jason.ferrara [at] jacquette.com>
#Maintainer: Kirill Gagarski <gagarin.gtn [at] gmail.com>
pkgname=jmtpfs-git
pkgver=20130228
pkgrel=3
license=('GPL')
pkgdesc="mtpfs with better support for Android"
arch=('i686' 'x86_64')
url="https://github.com/kiorky/jmtpfs"
depends=('fuse' 'file' 'libmtp')
provides=('jmtpfs')
conflicts=("jmtpfs")
_gitroot="https://github.com/kiorky/jmtpfs.git"
_gitname=jmtpfs

build() {
   cd $srcdir
   if [[ -d "$_gitname" ]]; then
        cd "$_gitname"
        git reset --hard
        git clean -dxf
        git pull 
    else
        git clone "$_gitroot" "$_gitname"
        cd "$_gitname"
    fi
    ./configure CXXFLAGS=-lpthread --prefix=${pkgdir}/usr/
    make
    make install
}

pkgver() {
    cd "$srcdir/$_gitname"
    echo $(git describe --always | sed 's/-/./g')
}
