# Maintainer: Simon Perry <pezz [at] sanxion [dot] net>
# Contributor: VÃ­tor Ferreira <vitor [dot] dominor [at] gmail [dot] com>

pkgname=mangler-git
pkgver=20120507
pkgrel=1
pkgdesc="A Ventrilo compatible VOIP client for Linux"
arch=('i686' 'x86_64')
url="https://github.com/haxar/mangler"
license=('GPL3')
depends=('gtkmm' 'gsm' 'speex')
makedepends=('git' 'librsvg')
optdepends=('alsa-lib: ALSA support'
  'oss: OSS support'
  'pulseaudio: PulseAudio support'
  'celt-0.7: CELT codec support'
  'espeak: TTS support'
  'xosd: Information overlay support'
  'dbus-glib: Rhythmbox/Amarok integration')
provides=('mangler')
conflicts=('mangler')
options=(!libtool)
     
_gittrunk=https://github.com/haxar/mangler.git
_gitmod=mangler
     
build() {
  if [ -d $_gitmod/.git ]
  then
    (cd $_gitmod && git pull)
  else
    git clone $_gittrunk $_gitmod
  fi
     
  msg "GIT clone done or server timeout."
  msg "Starting build..."
     
  rm -rf "$srcdir/$_gitmod-build"
  git clone "$srcdir/$_gitmod" "$srcdir/$_gitmod-build"
  cd $_gitmod-build
  git checkout -q 14d174c001974307fe20aa9b46b4d12787b83752
   
  ./configure --prefix=/usr --enable-static=no
  make
}
     
package() {
  cd "$srcdir/$_gitmod-build"
  make DESTDIR="$pkgdir/" install
}

