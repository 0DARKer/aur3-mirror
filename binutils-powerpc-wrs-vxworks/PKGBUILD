#Maintainer: Alex Brinister (alex_brinister@yahoo.com)
pkgname=binutils-powerpc-wrs-vxworks
pkgver=2.23.1
pkgrel=5
pkgdesc="Binutils modded for VxWorks 6.3"
arch=('i686' 'x86_64')
url="http://firstforge.wpi.edu/sf/projects/c--11_toochain"
license=('GPL')
provides=('binutils-powerpc-wrs-vxworks')
conflicts=('vxworks-gcc-toolchain-bin')
depends=('binutils' 'wrs-vxworks-headers')
options=('!strip' '!libtool' '!zipman' '!buildflags')
source=(http://ftp.gnu.org/gnu/binutils/binutils-"$pkgver".tar.bz2)
sha512sums=('effecc9e6ef943055815a83dea546f2fe5b5d4483dadeda5753aae239bd7095d4696239240613a051d18011ed2521ae75c48292f970ba82b02e97bc72b0fa51f')

_binutils_name="binutils-$pkgver"
build() {
	cd $srcdir
	mkdir build && cd build
	../$_binutils_name/configure \
		--prefix=/usr \
		--target=powerpc-wrs-vxworks \
		--disable-nls \
		--disable-libiberty-install
	make -j$(nproc) || return 1
}
package(){
  cd $srcdir/build
	make -j$(nproc) DESTDIR=$pkgdir install || return 1
	rm -r $pkgdir/usr/share/info
	rm $pkgdir/usr/lib/libiberty.a
}

# vim:set ts=2 sw=2
