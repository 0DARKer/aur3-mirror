--- j2se/src/share/native/java/lang/fdlibm/include/fdlibm.h.orig	2008-10-22 17:31:50.489799396 -0200
+++ j2se/src/share/native/java/lang/fdlibm/include/fdlibm.h	2008-10-22 17:32:15.882906513 -0200
@@ -8,7 +8,8 @@
 #ifdef __OpenBSD__
 #include <sys/types.h>
 #endif
-#include <machine/endian.h>
+#define _BSD_SOURCE
+#include <endian.h>
 #include "jfdlibm.h"
 
 #if (BYTE_ORDER == LITTLE_ENDIAN)
--- j2se/src/share/native/sun/awt/cmm/kcmsos.h.orig	2008-10-22 17:32:28.927478929 -0200
+++ j2se/src/share/native/sun/awt/cmm/kcmsos.h	2008-10-22 17:32:39.956237554 -0200
@@ -261,7 +261,8 @@
 #ifdef __OpenBSD__
 #include <sys/types.h>
 #endif
-#include <machine/endian.h>
+#define _BSD_SOURCE
+#include <endian.h>
 #if (BYTE_ORDER == LITTLE_ENDIAN)
 	#define KPLSBFIRST	1
 #else
--- j2se/src/share/native/sun/awt/medialib/mlib_image.h.orig	2008-10-22 17:32:48.739522014 -0200
+++ j2se/src/share/native/sun/awt/medialib/mlib_image.h	2008-10-22 17:33:25.079565418 -0200
@@ -16,7 +16,8 @@
 #ifdef __OpenBSD__
 #include <sys/types.h>
 #endif
-#include <machine/endian.h>
+#define _BSD_SOURCE
+#include <endian.h>
 
 #include <mlib_types.h>
 #include <mlib_status.h>
--- j2se/src/share/native/sun/font/t2k/cpu.h.orig	2008-10-22 17:33:40.640395083 -0200
+++ j2se/src/share/native/sun/font/t2k/cpu.h	2008-10-22 17:34:04.509562088 -0200
@@ -180,7 +180,8 @@
 #ifdef __OpenBSD__
 #include <sys/types.h>
 #endif
-#include <machine/endian.h>
+#define _BSD_SOURCE
+#include <endian.h>
 
 #if (BYTE_ORDER == LITTLE_ENDIAN)
 #ifdef __cplusplus
--- j2se/src/solaris/back/util_md.h.orig	2008-10-22 17:34:12.286228532 -0200
+++ j2se/src/solaris/back/util_md.h	2008-10-22 17:34:23.030655019 -0200
@@ -10,7 +10,8 @@
 
 #include <limits.h>
 #include <sys/types.h>
-#include <machine/endian.h>
+#define _BSD_SOURCE
+#include <endian.h>
 
 #ifdef _LP64
 typedef unsigned long UNSIGNED_JLONG;
--- j2se/src/solaris/native/java/io/UnixFileSystem_md.c.orig	2008-10-22 17:38:49.832867727 -0200
+++ j2se/src/solaris/native/java/io/UnixFileSystem_md.c	2008-10-22 17:39:04.006640442 -0200
@@ -9,6 +9,7 @@
 #include <sys/types.h>
 #include <sys/time.h>
 #include <sys/stat.h>
+#include <sys/vfs.h>
 #include <sys/param.h>
 #include <sys/mount.h>
 #include <string.h>
--- j2se/src/solaris/native/java/net/NetworkInterface.c.orig	2008-10-22 17:29:04.899592314 -0200
+++ j2se/src/solaris/native/java/net/NetworkInterface.c	2008-10-22 17:29:36.379589669 -0200
@@ -826,7 +826,8 @@
 	    continue;
 
 	memset(&ifr6, 0, sizeof(ifr6));
-	strlcpy(ifr6.ifr_name, ifa->ifa_name, sizeof(ifr6.ifr_name));
+	strncpy(ifr6.ifr_name, ifa->ifa_name, sizeof(ifr6.ifr_name));
+	ifr6.ifr_name[sizeof(ifr6.ifr_name)-1] = 0;
 	memcpy(&ifr6.ifr_addr, ifa->ifa_addr, MIN(sizeof(ifr6.ifr_addr), ifa->ifa_addr->sa_len));
 
 	if (ioctl(sock, SIOCGIFNETMASK_IN6, (caddr_t)&ifr6) < 0) {
--- j2se/src/solaris/native/java/util/TimeZone_md.c.orig	2008-10-22 17:29:43.409588832 -0200
+++ j2se/src/solaris/native/java/util/TimeZone_md.c	2008-10-22 17:30:17.439056251 -0200
@@ -250,7 +250,8 @@
 	return NULL;
     }
 
-    strlcpy(zoneinfo_file, default_zoneinfo_file, PATH_MAX+1);
+    strncpy(zoneinfo_file, default_zoneinfo_file, PATH_MAX+1);
+    zoneinfo_file[PATH_MAX] = 0;
 
 #if defined(__linux__) || defined(_ALLBSD_SOURCE)
     /*
--- j2se/src/solaris/native/sun/awt/awt_dnd.c.orig	2007-09-25 01:49:23.000000000 -0300
+++ j2se/src/solaris/native/sun/awt/awt_dnd.c	2008-10-22 17:25:59.876278387 -0200
@@ -169,6 +169,7 @@
     return awt_root_window;
 }
 
+#define xerror_code _xerror_code
 static unsigned char xerror_code = Success;
 
 static int 
--- j2se/src/solaris/native/sun/awt/awt_motif21.c.orig	2008-10-22 18:07:37.339359325 -0200
+++ j2se/src/solaris/native/sun/awt/awt_motif21.c	2008-10-22 18:08:30.804994824 -0200
@@ -89,6 +89,7 @@
     }
 
 /* XXXBSD: resolve missing symbol? */
+#define _ALLBSD_SOURCE
 #if !defined(_ALLBSD_SOURCE)
     if (im_height == 0) {
 	im_height = _XmImGetGeo(w);
--- j2se/src/solaris/native/sun/java2d/loops/mlib_ImageZoom_NN.c.orig	2008-10-22 17:34:32.504281216 -0200
+++ j2se/src/solaris/native/sun/java2d/loops/mlib_ImageZoom_NN.c	2008-10-22 17:34:42.732891833 -0200
@@ -52,7 +52,8 @@
 #ifdef __OpenBSD__
 #include <sys/types.h>
 #endif
-#include <machine/endian.h>
+#define _BSD_SOURCE
+#include <endian.h>
 #include <mlib_image.h>
 #include <mlib_ImageZoom.h>
 
--- j2se/make/common/shared/Compiler-gcc.gmk.orig	2008-10-22 18:15:17.182646848 -0200
+++ j2se/make/common/shared/Compiler-gcc.gmk	2008-10-22 18:15:37.196710027 -0200
@@ -69,7 +69,7 @@
     endif
   endif
   # Option used to create a shared library
-  SHARED_LIBRARY_FLAG = -shared -mimpure-text
+  SHARED_LIBRARY_FLAG = -shared -fPIC
   SUN_COMP_VER := $(shell $(CC) --verbose 2>&1 )
 
 endif
--- j2se/make/sun/awt/mawt.gmk.orig	2008-10-22 18:00:37.393567401 -0200
+++ j2se/make/sun/awt/mawt.gmk	2008-10-22 18:02:03.223695898 -0200
@@ -125,7 +125,7 @@
 CFLAGS += -DMOTIF_VERSION=$(MOTIF_VERSION)
 
 ifeq ($(STATIC_MOTIF),true)
-    LIBXM = $(MOTIF_LIB)/libXm.a -lXp 
+    LIBXM = $(MOTIF_LIB)/libXm.a /usr/lib/libXmu.a -lXft -lfontconfig -ljpeg -lpng -lXp 
     ifneq (,$(findstring $(PLATFORM), linux bsd))
 	ifeq ($(ARCH_DATA_MODEL), 64)
             LIBXT = -lXt
--- deploy/make/plugin/adapter/oji-adapter/Makefile.orig	2008-10-22 20:11:33.165281858 -0200
+++ deploy/make/plugin/adapter/oji-adapter/Makefile	2008-10-22 20:13:02.641206055 -0200
@@ -74,7 +74,7 @@
 COREDIR = $(DEPLOY_TOPDIR)/src/plugin/solaris/nscore
 COMMONDIR=  $(DEPLOY_TOPDIR)/src/plugin/solaris/common
 # Force this evaluation now so later CPPINCPATH sees list not shell command
-MOZHDRDIRS := $(shell $(ECHO) $(subst \,/,$(MOZILLA_HEADERS_PATH))/mozilla_headers_18/*)
+MOZHDRDIRS := $(shell $(ECHO) $(subst \,/,$(MOZILLA_HEADERS_PATH))/mozilla_headers_18/[^n]* /usr/include/nspr)
 
 FILES_cpp += GetFactory5.cpp \
 	     GetLibrary.cpp \
--- deploy/make/plugin/adapter/oji-gcc29-adapter/Makefile.orig	2008-10-22 20:15:51.839958590 -0200
+++ deploy/make/plugin/adapter/oji-gcc29-adapter/Makefile	2008-10-22 20:16:47.496611756 -0200
@@ -37,7 +37,7 @@
 COREDIR = $(DEPLOY_TOPDIR)/src/plugin/solaris/nscore
 COMMONDIR=  $(DEPLOY_TOPDIR)/src/plugin/solaris/common
 # Force this evaluation now so later CPPINCPATH sees list not shell command
-MOZHDRDIRS := $(shell $(ECHO) $(subst \,/,$(MOZILLA_HEADERS_PATH))/mozilla_headers_18/*)
+MOZHDRDIRS := $(shell $(ECHO) $(subst \,/,$(MOZILLA_HEADERS_PATH))/mozilla_headers_18/[^n]* /usr/include/nspr)
 
 include ../oji-adapter/FileList.gmk 
 
--- deploy/src/plugin/solaris/nscore/ProxySupport5.cpp.orig	2008-10-22 20:18:24.965240496 -0200
+++ deploy/src/plugin/solaris/nscore/ProxySupport5.cpp	2008-10-22 20:18:39.208576661 -0200
@@ -24,6 +24,7 @@
 #include "commandprotocol.h"
 #include "ProxySupport5.h"
 
+#define _ALLBSD_SOURCE
 #ifdef _ALLBSD_SOURCE
 #include <unistd.h>
 #else
