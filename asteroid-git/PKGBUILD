# Maintainer: Sam Stuewe <halosghost at archlinux dot info>
pkgname=asteroid-git
pkgver=1.2.1.2.g6d23595
pkgrel=2
pkgdesc="A modern version of the arcade classic Asteroids"
arch=('any')
url="https://github.com/chazomaticus/asteroid.git/"
license=('GPLv3')
depends=('freeglut' 'gtk2' 'hicolor-icon-theme' 'sdl_mixer')
makedepends=('git' 'cmake')
source=("${pkgname//-git/}::git+git://github.com/chazomaticus/asteroid.git")
sha256sums=('SKIP')

pkgver() {
  cd "${srcdir}/${pkgname//-git/}"
  git describe --always | sed 's|-|.|g'
}

prepare() {
  cd "${srcdir}/${pkgname//-git/}"
  cmake -DCMAKE_INSTALL_PREFIX=/usr
  sed -i 's_lcairo_lcairo -lm_' CMakeFiles/asteroid.dir/link.txt
}

package() {
  cd "${srcdir}/${pkgname//-git/}"
  make DESTDIR="$pkgdir/" PREFIX=/usr install
}

# vim:set ts=2 sw=2 et:
