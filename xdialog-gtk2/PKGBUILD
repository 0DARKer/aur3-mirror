# Maintainer: Bartek Piotrowski <barthalion@gmail.com>
# Contributor: Giorgio Lando <patroclo7@gmail.com>

pkgname=xdialog-gtk2
pkgver=2.3.1
pkgrel=1
pkgdesc="A drop-in replacement for the 'dialog' program, compiled with gtk2"
url="http://xdialog.dyns.net/"
arch=(i686 x86_64)
depends=('gtk2')
license=('GPL')
provides=('xdialog')
conflicts=('xdialog')
source=(http://xdialog.free.fr/Xdialog-$pkgver.tar.bz2
        xdialog-$pkgver-gtk2.patch)
md5sums=('0671f8353717513bf1f0ebc80e9710f6'
         '1785edbb50316ba07c3ab68f061bf766')

build() {
  cd $srcdir/Xdialog-$pkgver
  patch -p1 <../xdialog-$pkgver-gtk2.patch || return 1
  ./configure --prefix=/usr --with-gtk2 || return 1

  # Fix bugs in automake - see Xdialog.spec
  #
  /bin/sed -i -e "s:RANLIB = @RANLIB@:RANLIB = /usr/bin/ranlib:" lib/Makefile
  /bin/sed -i -e "s;XGETTEXT = :;XGETTEXT = /usr/bin/xgettext;" po/Makefile

  make || return 1
  make prefix=$pkgdir/usr install
}
