# Contributor: Michael Zoech <michi.zoech+arch at gmail>
pkgname=eclipse-codecover
pkgver=1.0.1.1
_pkgver=1.0.1.0
pkgrel=1
pkgdesc='CodeCover (Coverage) plugin for Eclipse'
arch=('any')
url='http://codecover.org/'
license=('EPL')
depends=('eclipse>=3.3')
makedepends=('unzip')
_site='http://codecover.org/eclipse-site'
source=("${_site}/features/codecover_${pkgver}.jar"
        "${_site}/plugins/org.codecover.eclipse_${_pkgver}.jar"
        "${_site}/plugins/org.codecover.instrumentation_${_pkgver}.jar"
        "${_site}/plugins/org.codecover.instrumentation.java_${_pkgver}.jar"
        "${_site}/plugins/org.codecover.instrumentation.java.junit_${_pkgver}.jar"
        "${_site}/plugins/org.codecover.instrumentation.java.measurement_${_pkgver}.jar"
        "${_site}/plugins/org.codecover.metrics_${pkgver}.jar"
        "${_site}/plugins/org.codecover.model_${_pkgver}.jar"
        "${_site}/plugins/org.codecover.report_${_pkgver}.jar"
        "${_site}/plugins/org.codecover.report.html_${_pkgver}.jar"
        "${_site}/plugins/org.codecover.report.csv_${_pkgver}.jar")
noextract=('codecover_${pkgver}.jar'
           "org.codecover.eclipse_${_pkgver}.jar"
           "org.codecover.instrumentation_${_pkgver}.jar"
           "org.codecover.instrumentation.java_${_pkgver}.jar"
           "org.codecover.instrumentation.java.junit_${_pkgver}.jar"
           "org.codecover.instrumentation.java.measurement_${_pkgver}.jar"
           "org.codecover.metrics_${pkgver}.jar"
           "org.codecover.model_${_pkgver}.jar"
           "org.codecover.report_${_pkgver}.jar"
           "org.codecover.report.html_${_pkgver}.jar"
           "org.codecover.report.csv_${_pkgver}.jar")

build() {
  local dest=${pkgdir}/usr/share/eclipse/dropins/codecover/eclipse
  install -d ${dest}/features ${dest}/plugins
  cd ${srcdir}
  unzip codecover_${pkgver}.jar -d ${dest}/features/codecover_${pkgver}
  install -m644 org.codecover.eclipse_${_pkgver}.jar ${dest}/plugins/
  install -m644 org.codecover.instrumentation_${_pkgver}.jar ${dest}/plugins/
  install -m644 org.codecover.instrumentation.java_${_pkgver}.jar ${dest}/plugins/
  unzip org.codecover.instrumentation.java.junit_${_pkgver}.jar -d ${dest}/plugins/org.codecover.instrumentation.java.junit_${_pkgver}
  unzip org.codecover.instrumentation.java.measurement_${_pkgver}.jar -d ${dest}/plugins/org.codecover.instrumentation.java.measurement_${_pkgver}
  install -m644 org.codecover.metrics_${pkgver}.jar ${dest}/plugins/
  unzip org.codecover.model_${_pkgver}.jar -d ${dest}/plugins/org.codecover.model_${_pkgver}
  install -m644 org.codecover.report_${_pkgver}.jar ${dest}/plugins/
  unzip org.codecover.report.html_${_pkgver}.jar -d ${dest}/plugins/org.codecover.report.html_${_pkgver}
  unzip org.codecover.report.csv_${_pkgver}.jar -d ${dest}/plugins/org.codecover.report.csv_${_pkgver}
}

md5sums=('d32d175338ccae7514d42f6135006f4d'
         '4bf17ac5a533ac49bd1ae9991cd0073d'
         '81a04f2533748d2a68c7b935f92ba536'
         '70a01ecce6e8610ef0cf93c4563472dd'
         '7ea05432debf0c0007cf1b4e20693309'
         '068d94489a29f0d6ce3bf3ca94e2b0a8'
         '65ccb0a755f239a2c5cae424d536dabf'
         '92de46ab63c2d9558413cf5b5a7441f8'
         'fbb9f95dc2dab9fa10b82e47a880ad8e'
         'a5ba30372cb2df3753a9604190949ff5'
         'f4a0c3a0dad8511ee4e4fe8ce279b187')
