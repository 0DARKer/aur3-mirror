# Maintainer: Julian Brost <julian.brost@googlemail.com>
pkgname=gsutil
pkgver=v3.29
pkgrel=1
pkgdesc="A command line tool for interacting with cloud storage services."
arch=('any')
url="https://github.com/GoogleCloudPlatform/gsutil"
license=('APACHE')
groups=()
depends=('python2')
optdepends=()
makedepends=()
provides=()
conflicts=()
replaces=()
backup=()
options=()
install=$pkgname.install
source=('http://commondatastorage.googleapis.com/pub/gsutil.tar.gz'
        'gsutil.profile'
        'gsutil.profile.csh')
noextract=()
md5sums=('63f67cc7f4367bb7c28730ec07f9fa6f'
         '742c9d36d08c6244c033c6ea630e5bef'
         '79bd92be4cca43db8404d1ef59360e74')

build() {
	sed -i 's|#!/usr/bin/env python|#!/usr/bin/env python2|' $srcdir/gsutil/gsutil
}

package() {
	install -D ${srcdir}/gsutil.profile ${pkgdir}/etc/profile.d/gsutil.sh
	install -D ${srcdir}/gsutil.profile.csh ${pkgdir}/etc/profile.d/gsutil.csh

	mkdir -p $pkgdir/opt/
	cp -r $srcdir/gsutil/ $pkgdir/opt/
} 
