# Maintainer: Alexander RÃ¸dseth <rodseth@gmail.com>
# Contributor: Mathieu Clabaut <mathieu.clabaut@gmail.com>
pkgname=thinkingrock
pkgver=2.2.1
pkgrel=3
pkgdesc="Java-based GTD application"
arch=('any')
url="http://www.thinkingrock.com.au"
license=('CDDL')
depends=('java-runtime>=6' 'xdg-utils')
source=("http://downloads.sourceforge.net/thinkingrock/tr-$pkgver.tar.gz"
        "$pkgname.desktop"
        'dirstructure.patch'
        'tr-128.png')
md5sums=('a3d1405559becd7796eb931f1a324ea6'
         'da9826f912dfd93b2c504e1aed07fc27'
         'ca5cadae91c3b28802ea4910ee3b836a'
         '6a007d8d489027a199835a2bfc16308b')
build() {
  cd "$srcdir/tr-$pkgver"
  patch -Np1 < ../dirstructure.patch || return 1
  install -m755 -d "$pkgdir/opt/$pkgname" || return 1
  install -m755 -d "$pkgdir/usr/share/pixmaps" || return 1
  cp -R etc ide10 platform9 tr "$pkgdir/opt/$pkgname" || return 1
  rm -f "$pkgdir/opt/$pkgname/etc/tr.conf~" || return 1
  install -D -m644 "$srcdir/$pkgname.desktop" \
      "$pkgdir/usr/share/applications/$pkgname.desktop" || return 1
  install -D -m644 bin/tr.png \
      "$pkgdir/usr/share/icons/hicolor/48x48/apps/$pkgname.png" || return 1
  install -D -m644 ../tr-128.png \
      "$pkgdir/usr/share/icons/hicolor/128x128/apps/$pkgname.png" || return 1
  ln -s ../icons/hicolor/128x128/apps/$pkgname.png \
      "$pkgdir/usr/share/pixmaps/$pkgname.png" || return 1
  install -D -m755 bin/tr "$pkgdir/usr/bin/$pkgname" || return 1
}
# vim:set ts=2 sw=2 et:
