diff --git a/src/main.cpp b/src/main.cpp
index a3f7159..a2e86c9 100644
--- a/src/main.cpp
+++ b/src/main.cpp
@@ -11,8 +11,6 @@
 #include <QSystemTrayIcon>
 #include <QTextStream>
 
-#include <X11/Xlib.h>
-
 #include <sys/file.h>
 #include <errno.h>
 #include <unistd.h>
@@ -46,8 +44,6 @@ int main(int argc, char *argv[])
     qRegisterMetaType<AdvanceButtonDialog*>();
     qRegisterMetaType<Joystick*>();
 
-    XInitThreads ();
-
     QApplication a(argc, argv);
     CommandLineUtility cmdutility;
     QStringList cmdarguments = a.arguments();
@@ -77,7 +73,7 @@ int main(int argc, char *argv[])
     }
 
     //Q_INIT_RESOURCE(resources);
-    //a.setQuitOnLastWindowClosed(false);
+    a.setQuitOnLastWindowClosed(false);
 
     QDir configDir (PadderCommon::configPath);
     if (!configDir.exists())
@@ -153,6 +149,7 @@ int main(int argc, char *argv[])
     QObject::connect(&w, SIGNAL(joystickRefreshRequested()), joypad_worker, SLOT(refresh()));
     QObject::connect(joypad_worker, SIGNAL(joystickRefreshed(Joystick*)), &w, SLOT(fillButtons(Joystick*)));
     //QObject::connect(&w, SIGNAL(joystickRefreshRequested(Joystick*)), joypad_worker, SLOT(refreshJoystick(Joystick*)));
+    QObject::connect(&a, SIGNAL(lastWindowClosed()), &a, SLOT(quit()));
     QObject::connect(&a, SIGNAL(aboutToQuit()), &w, SLOT(saveAppConfig()));
     QObject::connect(&a, SIGNAL(aboutToQuit()), &w, SLOT(removeJoyTabs()));
     QObject::connect(&a, SIGNAL(aboutToQuit()), joypad_worker, SLOT(quit()));
diff --git a/src/mainwindow.ui b/src/mainwindow.ui
index 0c9be08..4f1051c 100644
--- a/src/mainwindow.ui
+++ b/src/mainwindow.ui
@@ -645,7 +645,7 @@ QPushButton#setPushButton8[setActive=&quot;false&quot;] {
  <connections>
   <connection>
    <sender>actionQuit</sender>
-   <signal>activated()</signal>
+   <signal>triggered()</signal>
    <receiver>MainWindow</receiver>
    <slot>close()</slot>
    <hints>
@@ -661,7 +661,7 @@ QPushButton#setPushButton8[setActive=&quot;false&quot;] {
   </connection>
   <connection>
    <sender>actionUpdate_Joysticks</sender>
-   <signal>activated()</signal>
+   <signal>triggered()</signal>
    <receiver>MainWindow</receiver>
    <slot>startJoystickRefresh()</slot>
    <hints>
@@ -677,7 +677,7 @@ QPushButton#setPushButton8[setActive=&quot;false&quot;] {
   </connection>
   <connection>
    <sender>actionHide</sender>
-   <signal>activated()</signal>
+   <signal>triggered()</signal>
    <receiver>MainWindow</receiver>
    <slot>hideWindow()</slot>
    <hints>
@@ -693,7 +693,7 @@ QPushButton#setPushButton8[setActive=&quot;false&quot;] {
   </connection>
   <connection>
    <sender>actionAbout</sender>
-   <signal>activated()</signal>
+   <signal>triggered()</signal>
    <receiver>MainWindow</receiver>
    <slot>openAboutDialog()</slot>
    <hints>
