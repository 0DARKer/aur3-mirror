# Contributor: Laszlo Papp <djszapi2@gmail.com>
# Maintainer:Stefan Husmann <stefan-husmann@t-online.de>

pkgname=pigz
pkgver=2.1.6
pkgrel=1
pkgdesc="Parallel implementation of the gzip file compressor"
arch=('i686' 'x86_64')
url="http://www.zlib.net/pigz/"
license=('GPL')
depends=('zlib')
source=(http://www.zlib.net/$pkgname/$pkgname-$pkgver.tar.gz)
md5sums=('cbe9030c4be3d0ef2438ee5f8b169ca4')

build() {
  cd ${srcdir}/$pkgname-$pkgver
  sed -i s/"CFLAGS=".*/"CFLAGS=${CFLAGS}"/g Makefile 
  make || return 1
  install -Dm755 ${srcdir}/${pkgname}-${pkgver}/${pkgname} \
    ${pkgdir}/usr/bin/${pkgname} || return 1
  pushd ${pkgdir}/usr/bin
  ln -s pigz unpigz || return 1
  popd
  install -Dm755 ${srcdir}/${pkgname}-${pkgver}/${pkgname}.1 \
    ${pkgdir}/usr/share/man/man1/${pkgname}.1 || return 1
  install -Dm755 ${srcdir}/${pkgname}-${pkgver}/${pkgname}.pdf \
    ${pkgdir}/usr/share/doc/${pkgname}/${pkgname}.pdf || return 1
}
