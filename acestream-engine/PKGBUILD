# Contributor: MacCyber <jonas.enge at gmail dot com>
# Contributor: Doug Newgard <scimmia22 at outlook dot com>
# Contributor: Jonas Heinrich <onny@project-insanity.org>
# Contributor: Antti Hautaniemi <an7oine at me com>

pkgname=acestream-engine
pkgver=3.0.0.a18
pkgrel=1
pkgdesc="ACE Stream engine"
arch=('i686' 'x86_64')
url="http://acestream.org/"
license=('unknown')
depends=('python2-setuptools' 'python2-psutil' 'python2-pip' 'python2-xlib' 'python2-pip')
optdepends=('libappindicator: for GTK interface')
conflicts=('acestream')
if [[ "$CARCH" == "i686" ]]; then
  ubuntu_files="acestream_3.0.0-a18_ubuntu_13.04_i686"
  ubuntu_source="http://dl.acestream.org/ubuntu/13/$ubuntu_files.tar.gz"
  ubuntu_sha256="c91eb4ab64f8c4e48715e372020c1f3a158dda28ecff6f6a87675b8a78a370a6"
else
  ubuntu_files="acestream_3.0.0-a18_ubuntu_14.04_x86_64"
  ubuntu_source="http://dl.acestream.org/ubuntu/14/$ubuntu_files.tar.gz"
  ubuntu_sha256="7fca4b04d52e85b012a241565e0bbc5ea09c05647bc77996bea369fa91203b16"
fi
source=( "$ubuntu_source" 'acestream-engine.service' )
sha256sums=( "$ubuntu_sha256" 'b9863a9dd3ee6d41d18475f5f539107fe81a573f45ca1cb98013441f955f1af0' )
install='acestream-engine.install'

package() {
  mkdir -p ${pkgdir}/usr/bin/ ${pkgdir}/usr/share/acestream
  cp -a "$srcdir"/$ubuntu_files/acestreamengine ${pkgdir}/usr/bin/
  cp -aR "$srcdir"/$ubuntu_files/data ${pkgdir}/usr/share/acestream
  cp -aR "$srcdir"/$ubuntu_files/lib ${pkgdir}/usr/share/acestream
  install -D -m 644 "$srcdir/acestream-engine.service" "$pkgdir/usr/lib/systemd/system/acestream-engine.service"
}
