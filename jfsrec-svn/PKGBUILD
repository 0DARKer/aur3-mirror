# Contributor: Cilyan Olowen <gaknar@gmail.com>
# Contributor: Greg von Nessi <greg.vonnessi@gmail.com>
# Maintainer: Gaetan Bisson <bisson@archlinux.org>

pkgname=jfsrec-svn
pkgver=20121025
pkgrel=1
pkgdesc='Read only extraction of files and directories from a damaged jfs filesystem'
url='http://jfsrec.sourceforge.net/'
arch=('i686' 'x86_64')
license=('GPL')
depends=('boost')
optdepends=('dd_rhelp')
makedepends=('subversion')

conflicts=('jfsrec')
provides=('jfsrec')

source=(jfsrec.tar.gz::'http://jfsrec.svn.sourceforge.net/viewvc/jfsrec/?view=tar'
        'recent.patch')
sha1sums=('e5acdbc9e08d554bc326b01619517d9f08760400'
          '4abae30d417f34f3afc89799c5e6126644f1fb52')

build() {
	cd "${srcdir}/jfsrec"
	patch -p1 -i ../recent.patch
	./configure --prefix=/usr
	make
}

package() {
	cd "${srcdir}/jfsrec"
	make DESTDIR="${pkgdir}" install
}
