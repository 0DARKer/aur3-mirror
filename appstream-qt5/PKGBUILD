# Maintainer: Antonio Rojas <arojas@archlinux.org>
# Contributor: Jameson Pugh <imntreal@gmail.com>
# Contributor: Tim Jester-Pfadt <t.jp<at>gmx.de>

pkgname=appstream-qt5
pkgver=0.7.5
pkgrel=1
pkgdesc="Provides a standard for creating app stores across distributions"
arch=('i686' 'x86_64')
url="http://distributions.freedesktop.org/wiki/AppStream"
license=('GPL')
depends=('xapian-core' 'polkit' 'libyaml' 'libxml2' 'qt5-base')
makedeps=('cmake' 'xmlto')
conflicts=('appstream')
provides=('appstream')
source=("http://www.freedesktop.org/software/appstream/releases/AppStream-$pkgver.tar.xz")
sha256sums=('f286f2ca4ddec97b672fc786047448a64f503f91961514cd6f29d5557b8bc7fa')

prepare() {
  mkdir -p build
}

build() {
  cd build

  cmake ../AppStream-$pkgver -DQT=ON -DAPPSTREAM_QT_VERSION=5 -DCMAKE_INSTALL_LIBDIR=lib
  make
}

package() {
  cd build

  make DESTDIR="$pkgdir" install
}
