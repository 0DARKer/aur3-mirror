# Contributor: Arno Rehn <arno@arnorehn.de>

pkgname=qt-declarative
pkgver=4.6.0
pkgrel=1
pkgdesc="QtDeclarative module"
arch=('i686' 'x86_64')
url="http://labs.trolltech.com/page/Projects/Graphics/Kinetic"
license=('LGPL')
depends=('qt>=4.6.0')
options=('!libtool')
source=(http://get.qt.nokia.com/qml/qt-$pkgver-declarative.tar.gz
        qmlviewer.pro.patch)
md5sums=('9ca41889c34f0e3d87f4089debc1d7bc'
         '991673e5b65aa5a0df9f77beff5dc7f5')

build() {
  cd "$srcdir/qt-$pkgver-declarative/src/declarative"
  qmake || return 1
  make || return 1
  make INSTALL_ROOT="$pkgdir/" install || return 1
  mkdir -p "$pkgdir/$(qmake -query QT_INSTALL_HEADERS)"
  cp -r ../../include/QtDeclarative "$pkgdir/$(qmake -query QT_INSTALL_HEADERS)" || return 1

  cd ../../tools/qmlviewer
  patch -N -p0 -i $srcdir/qmlviewer.pro.patch
  qmake || return 1
  make || return 1
  make INSTALL_ROOT="$pkgdir/" install || return 1
}

# vim:set ts=2 sw=2 et:
