# Maintainer: Andrew Webley <unsuspectinghero@gmail.com>
# Contributor: Dmitriy Morozov <archlinux@foxcub.org>

pkgname="chromium-libpdf-dev"
#The pkgver is the same as for google chrome dev. The library isn't meant to be distributed on its own so no other version information exists.
pkgver="34.0.1809.0"
pkgrel="1"
pkgdesc="A PDF Viewer for Chromium and Chromium based browsers"
url="http://wiki.archlinux.org/index.php/Chromium#libpdf.so"
arch=("i686" "x86_64")
license=("custom:chrome")
depends=("gcc-libs")
optdepends=("chromium: default browser to use plugin in (one of the optional dependencies needs to be installed to use the library)"
            "chromium-dev: development version of default browser, requires modifying the PKGBUILD"
            "iron-bin: alternate google-chrome based browser, requires modifying the PKGBUILD")
sha512sums+=("cf83e1357eefb8bdf1542850d66d8007d620e4050b5715dc83f4a921d36ce9ce47d0d13c5d85f2b0ff8318d2877eec2f63b931bd47417a81a538327af927da3e")
source=("LICENSE")

if [ "$CARCH" = "i686" ]; then
  source+=("https://dl.google.com/linux/direct/google-chrome-unstable_current_i386.rpm")
  sha512sums+=("408a50e5a2db606db5e9f19845b5135bf5c9918e2a8770bdf68a7614b3ee73fde43c585e2f4d783b999649914ed513d15fe80d94b28abde89df850ab74193d10")
elif [ "$CARCH" = "x86_64" ]; then
  source+=("https://dl.google.com/linux/direct/google-chrome-unstable_current_x86_64.rpm")
  sha512sums+=("2ad07c7107e0622c562b3176931cb67486800b7a12b250f77500816a9a0c7106a858e04a22786943f663f27a520857e033e2a0e7f26003d21b363fc04422311e")
fi

package(){
	#Uncomment the relevant line below to install the library in the correct place if you're running something other than chromium.

  #chromium
  install -Dm755 "$srcdir/opt/google/chrome/libpdf.so" "$pkgdir/usr/lib/chromium/libpdf.so"

  #chromium-dev
  #install -Dm755 "$srcdir/opt/google/chrome/libpdf.so" "$pkgdir/usr/lib/chromium-dev/libpdf.so"

  #iron-browser
  #install -Dm755 "$srcdir/opt/google/chrome/libpdf.so" "$pkgdir/opt/iron/libpdf.so"

  install -Dm755 "$srcdir/LICENSE" "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
}

# vim:set ts=2 sw=2 et:
