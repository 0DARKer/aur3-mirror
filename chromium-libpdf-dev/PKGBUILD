# Maintainer: Andrew Webley <unsuspectinghero@gmail.com>
# Contributor: Dmitriy Morozov <archlinux@foxcub.org>

pkgname="chromium-libpdf-dev"
#The pkgver is the same as for google chrome dev. The library isn't meant to be distributed on its own so no other version information exists.
pkgver="38.0.2101.0"
pkgrel="1"
pkgdesc="A PDF Viewer for Chromium and Chromium based browsers"
url="http://wiki.archlinux.org/index.php/Chromium#libpdf.so"
arch=("i686" "x86_64")
license=("custom:chrome")
depends=("gcc-libs")
optdepends=("chromium: default browser to use plugin in (one of the optional dependencies needs to be installed to use the library)"
            "iron-bin: alternate google-chrome based browser, requires modifying the PKGBUILD")
sha512sums+=("395118e45e8c43cf491c48d932c9c49d056153d52d961d2812169b39256c398b6f16f37e2124ebf1daff31a625006f92225c537547b2e11605ce132ea4e2fa81")
source=("LICENSE")

if [ "$CARCH" = "i686" ]; then
  source+=("https://dl.google.com/linux/direct/google-chrome-unstable_current_i386.rpm")
  sha512sums+=("f9abc0d7bbc81fd9e7747abb673308cfed05e5b0d8e3e6ce9f204ab27742f9dcda3e464ea6b9dae7e12532e6c9c936103eb33c74a818377a5cfee89a6df8ee6b")
elif [ "$CARCH" = "x86_64" ]; then
  source+=("https://dl.google.com/linux/direct/google-chrome-unstable_current_x86_64.rpm")
  sha512sums+=("4ade921c42e07d3b05f594fe7c9f002ff7fc0627869007cebeafad2d527a51a84d968d24ca6c3246ef50a5ef19b76a86400ebbb83a8d63d1049ca4fe2918319d")
fi

package(){
	#Uncomment the relevant line below to install the library in the correct place if you're running something other than chromium.

	#chromium
	install -Dm755 "$srcdir/opt/google/chrome-unstable/libpdf.so" "$pkgdir/usr/lib/chromium/libpdf.so"
	
	#iron-browser
	#install -Dm755 "$srcdir/opt/google/chrome/libpdf.so" "$pkgdir/opt/iron/libpdf.so"
	
	install -Dm755 "$srcdir/LICENSE" "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
}
