# Contributor: Reiser <metal@pop3.ru>

pkgname=k3b-svn
pkgver=1027630
pkgrel=1
pkgdesc="K3b - The CD Kreator - SVN Version for kde4."
arch=('i686' 'x86_64')
url="http://www.k3b.org"
license=('GPL')

depends=('kdebase-runtime' 'kdemultimedia-kioslave' 'libsamplerate' 'libmad' 'ffmpeg>=0.5' 'taglib>=1.4' 'libmpcdec>=1.2.5' 'libdvdread>=4.1.3' 'polkit-qt')

makedepends=('automoc4' 'cmake' 'subversion')
provides=('k3b')
conflicts=('k3b')

source=()
md5sums=()

_svntrunk=svn://anonsvn.kde.org/home/kde/trunk/extragear/multimedia/k3b/
_svnmod=k3b

build() {
cd "${srcdir}"

svn co $_svntrunk $_svnmod

msg "SVN checkout done or server timeout"
msg "Starting make..."

cp -r $_svnmod $_svnmod-build
cd $_svnmod-build

cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE=RELEASE

make VERBOSE=1 || return 1
make DESTDIR="${pkgdir}" install || return 1

rm -rf ${srcdir}/$_svnmod-build
}