# Maintainer: M0Rf30 <morfeo89 [at] hotmail [dot] it>  
# Contributor: Eric Engestrom <aur [at] engestrom [dot] ch>

pkgname=leap-motion-sdk
pkgver=0.8.0
_pkgbuild=0.8.0.5300
pkgrel=1
pkgdesc="The Leap Motion Developer SDK contains the necessary libraries to get started with integrating the Leap Motion Controller into your project."
arch=('i686' 'x86_64')
url="https://developer.leapmotion.com/downloads/leap-motion/sdk"
depends=('mesa' 'libxxf86vm')
conflicts=('leap')
license=('custom')
source=("https://dl.dropboxusercontent.com/u/7226803/DeveloperSdk_LM_${_pkgbuild}_Linux.tar"
	LICENSE)
install=leap-sdk.install

cpydir="cp -dr --preserve=mode,timestamp"
cpyfiles="cp -d --preserve=mode,timestamp"

package() {
  cd $srcdir/Leap_Developer_Kit_*
  if [ "$CARCH" == 'x86_64' ]; then
    bsdtar xf Leap-0.8.0-x64.deb
  else 
    bsdtar xf Leap-0.8.0-x86.deb
  fi
  
  tar xvf data.tar.gz
  
  # Copy binaries, headers, examples & libraries
  $cpydir usr ${pkgdir}
  $cpydir lib ${pkgdir}/usr/
  mkdir -p ${pkgdir}/usr/share/leap
  $cpydir Examples ${pkgdir}/usr/share/leap
  cd LeapSDK
  mkdir -p ${pkgdir}/usr/share/doc/
  $cpydir docs ${pkgdir}/usr/share/doc/leap-sdk
  $cpydir include ${pkgdir}/usr/
  $cpyfiles lib/{Leap.py,LeapJava.jar} ${pkgdir}/usr/lib
  $cpydir samples ${pkgdir}/usr/share/leap
  $cpydir util ${pkgdir}/usr/share/leap
  
  if [ "$CARCH" == 'x86_64' ]; then
    $cpyfiles lib/x64/* ${pkgdir}/usr/lib
  else 
    $cpyfiles lib/x86/* ${pkgdir}/usr/lib
  fi

# Copy license
  install -D -m644 "${srcdir}"/LICENSE "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"  
}
md5sums=('3f6854ae94c89bdfa8215f2a21ca057a'
         '78a4f0934b105397d1f7b17d06e4717c')
