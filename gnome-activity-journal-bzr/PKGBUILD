# Contributor: Marius Dransfeld <marius.dransfeld@googlemail.com>

pkgname=gnome-activity-journal-bzr
_realname=gnome-activity-journal
pkgver=742
pkgrel=1
pkgdesc="Zeitgeist GUI"
arch=('any')
url="https://launchpad.net/gnome-zeitgeist"
license=('GPL')
install=$pkgname.install
depends=('python' 'pygtk' 'gnome-zeitgeist' 'gnome-python' 'gnome-python-desktop')
makedepends=('git')
provides=($_realname $_realname-git)
conflicts=($_realname $_realname-git)
replaces=($_realname-git)

_bzrtrunk=lp:gnome-activity-journal
_bzrmod=${_realname}

build() {
  cd "$srcdir"
  msg "Connecting to Launchpad BZR server...."

  if [ ! -d ./${_bzrmod} ]; then
    bzr co ${_bzrtrunk} ${_bzrmod} -r ${pkgver}
  else
    bzr up ${_bzrmod}
  fi
 
  msg "BZR checkout done or server timeout"
  msg "Starting make..."
  cd $_bzrmod
  python setup.py install --root=$pkgdir || return 1
} 
