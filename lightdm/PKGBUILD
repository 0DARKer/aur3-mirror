pkgname=lightdm
pkgver=0.3.3
pkgrel=2
pkgdesc="A lightweight display manager"
arch=('i686' 'x86_64')
url="https://launchpad.net/lightdm"
license=('GPL3' 'LGPL3')
source=("http://people.ubuntu.com/~robert-ancell/lightdm/releases/$pkgname-$pkgver.tar.gz"
lightdm
)
depends=('gnome-themes-standard' 'gnome-icon-theme' 'libwebkit' 'dbus-glib' 'gtk2' 'libxklavier' 'intltool')
options=(!libtool)
optdepends=('xorg-server-xephyr: run lightdm in test mode' )
makedepends=('gnome-doc-utils' 'gobject-introspection' 'pkg-config')

build() {
  cd $srcdir/$pkgname-$pkgver
     ./configure --prefix=/usr \
     --with-dbus-sys=/etc/dbus-1/system.d \
     --with-log-dir=/var/log/lightdm \
     --with-config-file=/etc/lightdm.conf \
     --with-xauth-dir=/var/run/lightdm/authority \
     --enable-introspection=no \
     --sysconfdir=/etc --disable-static --libexecdir=/usr/lib/lightdm
   make || return 1
}

package() {
  cd $srcdir/$pkgname-$pkgver
  make DESTDIR=$pkgdir install
  mkdir -p $pkgdir/etc/rc.d
  install -m755 ../lightdm $pkgdir/etc/rc.d
  cd $pkgdir
}

md5sums=('13f33b7693e58ba99f47ff5e7f7cbfb2'
         '990fdeb198f2ef928274bde0b9d2df99')
