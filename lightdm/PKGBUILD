pkgname=lightdm
pkgver=0.2.3
pkgrel=1
pkgdesc="A lightweight display manager"
arch=('i686' 'x86_64')
url="https://launchpad.net/lightdm"
license=('GPL3' 'LGPL3')
source=("http://people.ubuntu.com/~robert-ancell/lightdm/releases/$pkgname-$pkgver.tar.gz"
lightdm
patch)
depends=('gnome-themes' 'gnome-icon-theme' 'libwebkit' 'dbus-glib' 'gtk2' 'libxklavier' 'intltool')
options=(!libtool)
optdepends=('xorg-xserver-xephr: run lightdm in test mode' )
makedepends=('gnome-doc-utils' 'gobject-introspection' 'pkg-config')
md5sums=('1d9807a598324f67c4f460adbe307a82'
'990fdeb198f2ef928274bde0b9d2df99'
'cbe35f43dc52048bf9980a9d648b808e')
build() {
cd $srcdir/$pkgname-$pkgver
./configure --prefix=/usr \
--with-dbus-sys=/etc/dbus-1/system.d \
--with-log-dir=/var/log/lightdm \
--with-config-file=/etc/lightdm.conf \
--with-xauth-dir=/var/run/lightdm/authority \
--enable-introspection=no \
--sysconfdir=/etc --disable-static --libexecdir=/usr/lib/lightdm
make || return 1
}
package() {
cd $srcdir/$pkgname-$pkgver
make DESTDIR=$pkgdir install
mkdir -p $pkgdir/etc/rc.d
install -m755 ../lightdm $pkgdir/etc/rc.d
cd $pkgdir
patch -Np0 -i $srcdir/patch
}
