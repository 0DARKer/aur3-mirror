# Contributor: Christoph Zeiler <rabyte*gmail>

pkgname=gbsplay
pkgver=0.0.91
pkgrel=5
pkgdesc="A commandline application for playing GameBoy sound files (GBS)"
arch=('i686' 'x86_64')
url="http://$pkgname.berlios.de/"
license=('GPL')
depends=('alsa-lib' 'nas')
source=(http://download2.berlios.de/$pkgname/$pkgname-$pkgver.tar.gz)
md5sums=('a968393292797783e5ffb791dfc55cea')

build() {
  cd $pkgname-$pkgver

  ./configure --prefix=/usr --mandir=/usr/share/man --enable-sharedlibgbs

  sed 's|-Wl,|-Wl |g' -i Makefile
  sed 's|gbs2ogg.sh|$0|g' -i contrib/gbs2ogg.sh

  make || return 1
  make	DESTDIR="$pkgdir" contribdir="$pkgdir"/usr/bin \
	libdir="$pkgdir"/usr/lib install

  install -m644 libgbs.so "$pkgdir"/usr/lib/
  mv -f "$pkgdir"/usr/bin/gbs2ogg.sh "$pkgdir"/usr/bin/gbs2ogg
  chmod 755 "$pkgdir"/usr/bin/*
}
