# Contributor: Gustavo Alvarez <sl1pkn07@gmail.com>

pkgname=opensc-dnie-devel
pkgver=63
pkgrel=1
pkgdesc="Access smart cards that support cryptographic operations. with DNIe D.G.P official driver (Spanish electronic ID card). Devel Version. ONLY use for TEST (Driver de la Direccion General de la Policia adaptado al OpenSC v 0.12 (SVN))"
arch=('i686' 'x86_64')
url="http://www.opensc-project.org/opensc"
license=("custom")
options=('!libtool')
backup=(etc/opensc.conf)
depends=('zlib' 'openssl' 'pcsclite' 'pinentry')
makedepends=('nasm' 'subversion' 'libassuan')
provides=('opensc')
conflicts=('opensc')
source=()
md5sums=()

_svntrunk=https://svn.forge.morfeo-project.org/opendnie/opensc-dnie/trunk/
_svnmod=opensc-dnie

build() {
  cd $startdir/src

  msg "Updating SVN entries for OpenSC+DNIe patch"
  svn co $_svntrunk $_svnmod
  msg "SVN checkout done or server timeout"
  cp -r * $_svnmod-build
  cd $_svnmod-build

  msg "Starting make..."

  ./bootstrap
  ./configure --prefix=/usr --sysconfdir=/etc
  make || return 1
  make DESTDIR=${pkgdir} install || return 1
}
