pkgname=terasology-devbuild
pkgver=devel
pkgrel=25
pkgdesc="Yet another high resolution game with blocks like Minecraft! (Last succesful development build)"
arch=('x86_64' 'i686')
license=('Apache')
url="http://blog.movingblocks.net/blockmania"
makedepends=('unzip' 'wget')
options=('!strip')
depends=('java-runtime' 'xorg-server-utils' 'openal')
noextract=('Terasology.zip')
conflicts=('terasology-devbuild')
source=('terasology-devbuild.desktop')
md5sums=('56fee1c2a7c716bf778b293b6919b381')

package() {
mkdir "${pkgdir}"/usr
mkdir "${pkgdir}"/usr/bin
mkdir "${pkgdir}"/usr/share
mkdir "${pkgdir}"/usr/share/applications
mkdir "${pkgdir}"/opt			#Installing to /opt as I don't know how to integrate into filesystem structure



cd $srcdir
wget http://jenkins.movingblocks.net/job/Terasology/lastSuccessfulBuild/artifact/build/distributions/Terasology.zip
unzip Terasology.zip -d "${pkgdir}"/opt/Terasology-devbuild
chmod +x "${pkgdir}"/opt/Terasology-devbuild/run_linux.sh
chmod +x "${pkgdir}"/opt/Terasology-devbuild/Terasology.jar

echo '#!/bin/sh' >> "${pkgdir}"/usr/bin/terasology-devbuild
echo 'exec /opt/Terasology-devbuild/run_linux.sh' >> "${pkgdir}"/usr/bin/terasology-devbuild
chmod +x "${pkgdir}"/usr/bin/terasology-devbuild

cp terasology-devbuild.desktop "${pkgdir}"/usr/share/applications/
}
