# -*- shell-script -*-
# Maintainer: Sven Goericke <sgoericke@member.fsf.org>
# Contributor: Jan de Groot <jgc@archlinux.org>
# Contributor: Brice Carpentier <brice@daknet.org>

pkgname=cairo-cleartype-xcb
pkgver=1.10.0
pkgrel=1
pkgdesc="Cairo vector graphics library with cleartype patch from gentoo http://bugs.gentoo.org/show_bug.cgi?id=331743 and xcb enabled"
arch=(i686 x86_64)
license=('LGPL' 'MPL')
url="http://cairographics.org/"
depends=('libpng>=1.4.0' 'libxrender' 'fontconfig>=2.8.0' 'pixman>=0.18.4' 'glib2>=2.24.0')
makedepends=('pkgconfig')
options=('!libtool')
conflicts=('cairo' 'cairo-xcb')
provides=("cairo=${pkgver}" "cairo-xcb")
source=(http://cairographics.org/releases/cairo-${pkgver}.tar.gz
        cairo-1.10.0-buggy_gradients.patch
		cairo-9999-cleartype.patch)
sha1sums=('efe7e47408d5188690228ccadc8523652f6bf702'
          '8b843a9934e5112b6188e5bcf4adfc1fdaf9fa04'
          '90ee97904ba1a729202bf8c3b60bdae4dd35ac5f')

build() {
  cd ${srcdir}/cairo-${pkgver}
  patch -Np1 -i ${srcdir}/cairo-1.10.0-buggy_gradients.patch || return 1
  patch -Np1 -i ${srcdir}/cairo-9999-cleartype.patch || return 1
  ./configure --prefix=/usr --sysconfdir=/etc \
    --localstatedir=/var --enable-xcb --disable-static
  make || return 1
  make DESTDIR="${pkgdir}" install || return 1
}
