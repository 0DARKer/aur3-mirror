# Contributor: T. Jameson Little <t.jameson.little@gmail.com>
pkgname=dartium-bin
pkgver=1.1.3
pkgrel=2
pkgdesc="Chromium-based browser that includes the Dart virtual machine (integration version built with dart-editor)"
arch=(x86 x86_64)
url="http://www.dartlang.org/dartium/"
license=('BSD')
depends=('libudev.so.0' 'libgcrypt15' 'gconf')
optdepends=()
makedepends=(unzip)
provides=('dartium')
conflicts=('dartium')
replaces=()
install=
changelog=dartium.changelog
noextract=()

if [[ ${CARCH} = x86_64 ]]; then
	source=("http://storage.googleapis.com/dart-archive/channels/stable/release/32314/dartium/dartium-linux-x64-release.zip")
	md5sums=('d1b7fd4aa70f78fc027dbc8b94a8bc67')
else
	source=("http://storage.googleapis.com/dart-archive/channels/stable/release/32314/dartium/dartium-linux-ia32-release.zip")
	md5sums=('f88fceea58ca47d07c3dcc684eaa12c9')
fi

package(){
	_from=dartium-lucid64-full-stable-32314.0
	mkdir -p ${pkgdir}/opt ${pkgdir}/usr/bin ${pkgdir}/usr/lib
	find ${srcdir}/${_from} -perm -u+x -exec chmod +x '{}' +
	find ${srcdir}/${_from} -perm -u+r -exec chmod +r '{}' +
	find ${srcdir}/${_from} -perm -u+w -exec chmod +w '{}' +
	cp -r ${srcdir}/${_from} ${pkgdir}/opt/${pkgname}

	ln -s /opt/${pkgname}/chrome ${pkgdir}/usr/bin/dartium
}
