# Contributor: Fortunato Ventre (voRia) <vorione AT gmail.com>
pkgname=qldt
pkgver=1.1.5
pkgrel=1
pkgdesc="Quake Live Demo Tools"
arch=('i686' 'x86_64')
url="http://sourceforge.net/projects/qldt/"
license=('GPL3')
depends=(qt)
install=qldt.install
source=(http://downloads.sourceforge.net/project/qldt/qldt/${pkgver}/qldt-${pkgver}-src.tar.gz)
md5sums=('ac087cd8b6b20d689d0a641cd5706861')

package() {
  cd ${srcdir}/qldt-${pkgver}/
  
  # Build
  if [ "$CARCH" == "i686" ]; then
    qmake -spec linux-g++-32
  else
    qmake -spec linux-g++-64
  fi
  make qmake
  make
  
  # Install
  install -m755 -d ${pkgdir}/usr/bin/
  install -m755 qldt ${pkgdir}/usr/bin/
  install -m755 qldtce ${pkgdir}/usr/bin/
  install -m755 -d ${pkgdir}/usr/share/icons/
  install -m644 desktop/quakelive_demo.png ${pkgdir}/usr/share/icons/qldt_icon.png
  install -m644 desktop/quakelive_cfg.png ${pkgdir}/usr/share/icons/qldtce_icon.png
  install -m755 -d ${pkgdir}/usr/share/applications/
  install -m644 desktop/*.desktop ${pkgdir}/usr/share/applications/
}

# vim:set ts=2 sw=2 et:
