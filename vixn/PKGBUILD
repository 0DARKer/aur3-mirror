# Contributor: lang2 <wenzhi.liang_at_gmail.com>
# Contributor: Lex Black <autumn-wind at web dot de>

pkgname=vixn
pkgver=0.7.1
pkgrel=1
pkgdesc="vi for the 21st century"
depends=('python2' 'pygtk' 'pygtksourceview2' 'python2-xdg')
optdepends=('python2-dbus')
arch=('i686')
license=('GPL')
url="http://www.vixn.org"
source=(http://download.tuxfamily.org/$pkgname/$pkgname-$pkgver.tar.bz2
	'vixn-python2.patch')
md5sums=('2b626b742b9904f296813c127b5bfbbc'
         'bce08404b0155f5d3e622b7f36187916')

build() {
  mkdir -p $pkgdir/usr/doc
  cd $srcdir/$pkgname
  patch -p2 < "$srcdir/vixn-python2.patch"
  sed -i 's:bin/env python:bin/env python2:' vixgrep
  sed -i 's:bin/env python:bin/env python2:' vixn.py

  (cd docs/html && rm menus.txt && ln -s ../../config/menus menus.txt)
  ./install.sh $pkgdir/usr
  cd $pkgdir/usr/bin
  rm vixn vixgrep
  ln -s ../lib/vixn/vixn.py $pkgname
  ln -s ../lib/vixn/vixgrep .
}
