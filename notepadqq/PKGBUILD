# Maintainer: twa022 <twa022 at gmail dot com>
# Contributor: Zom <zom[at]eevul[dot]org>

pkgname=notepadqq
pkgver=0.44.0
_codemirrorver=4.7.0
pkgrel=1
pkgdesc="A Linux clone of Notepad++"
arch=('i686' 'x86_64')
url="http://notepadqq.sourceforge.net/wp/"
license=('GPL3')
depends=('qt5-webkit' 'qt5-svg')
makedepends=('')
source=("${pkgname}-${pkgver}.tar.gz"::https://github.com/notepadqq/${pkgname}/archive/v${pkgver}.tar.gz
        codemirror-${_codemirrorver}.tar.gz::https://github.com/notepadqq/CodeMirror/archive/${_codemirrorver}.tar.gz)
sha256sums=('999ff98e3ec85db560d50ac2e1cb9e17e240e985c8eb8c906145df14f6a8b379'
            '7fe7bfc906ef0a7108330f9a3d003459ed545f7a4a6cfc2d6193dd799784b5f2')

build() {
  cd ${srcdir}/notepadqq-${pkgver}
  cp -R ${srcdir}/CodeMirror-${_codemirrorver}/* ${srcdir}/notepadqq-${pkgver}/src/editor/libs/codemirror/

  ./configure --qmake-path qmake-qt5 --prefix=/usr
  make
}

package() {
  cd ${srcdir}/notepadqq-${pkgver}/src/ui

  make INSTALL_ROOT="$pkgdir" install
  install -Dm644 "${pkgdir}/usr/share/icons/hicolor/scalable/apps/${pkgname}.svg" "${pkgdir}/usr/share/pixmaps/${pkgname}.svg"
}
