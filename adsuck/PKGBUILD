# Contributor: Mimas <mimasgpc+pkgbuild@free.fr> (http://forums.archlinux.fr/topic5585.html)
# Maintainer: acoolon <@web.de>

pkgname=adsuck
pkgver=1.9
pkgrel=1
pkgdesc="DNS filter"
arch=('i686' 'x86_64')
url=http://opensource.conformal.com/wiki/Adsuck
license=('BSD')
depends=('ldns')
install=adsuck.install
source=(http://opensource.conformal.com/snapshots/$pkgname/$pkgname-$pkgver.tgz
        50-adsuck-update adsuck.rc filter)

md5sums=('792e9d08256ac814ea726e32023d83ad'
         'e022c1a626265416ecd094b26b56340a'
         'a38142e6c1ca6f79b028cc5a1379d651'
         '9b62235b449594a27388aaabcaf5ba8d')

build() {
  cd "$srcdir/$pkgname-$pkgver"
  make -f GNUmakefile adsuck
}

package() {

  install -D -m700 "$srcdir/$pkgname-$pkgver/adsuck" "$pkgdir/usr/sbin/adsuck"
  install -D  "$srcdir/$pkgname-$pkgver/adsuck.8" "$pkgdir/usr/share/man/man8/adsuck.8"

  install -D -m644 "$srcdir/filter" "$pkgdir/var/adsuck/filter"
  install -D -m755 "$srcdir/adsuck.rc" "$pkgdir/etc/rc.d/adsuck"
  # uncomment if you want it
  #install -D -m755 "$srcdir/50-adsuck-update" "$pkgdir/usr/lib/dhcpcd/dhcpcd-hooks/50-adsuck-update"
}
