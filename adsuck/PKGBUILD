# Contributor: Mimas <mimasgpc+pkgbuild@free.fr> (http://forums.archlinux.fr/topic5585.html)
# Maintainer: acoolon <@web.de>

pkgname=adsuck
pkgver=2.0
pkgrel=1
pkgdesc="DNS filter"
arch=('i686' 'x86_64')
url=http://opensource.conformal.com/wiki/Adsuck
license=('BSD')
depends=('ldns')
install=adsuck.install
source=(http://opensource.conformal.com/snapshots/$pkgname/$pkgname-$pkgver.tgz
        50-adsuck-update adsuck.rc filter)

md5sums=('7584767eaa4c3d1fbeb9deadce43e73c'
         'e022c1a626265416ecd094b26b56340a'
         '08053930f55cc4bd7ca758d70d180c18'
         '9b62235b449594a27388aaabcaf5ba8d')

build() {
  cd "$srcdir/$pkgname-$pkgver"
  make -f GNUmakefile adsuck
}

package() {

  install -D -m700 "$srcdir/$pkgname-$pkgver/adsuck" "$pkgdir/usr/sbin/adsuck"
  install -D  "$srcdir/$pkgname-$pkgver/adsuck.8" "$pkgdir/usr/share/man/man8/adsuck.8"

  install -D -m644 "$srcdir/filter" "$pkgdir/var/adsuck/filter"
  install -D -m755 "$srcdir/adsuck.rc" "$pkgdir/etc/rc.d/adsuck"
  # uncomment if you want it
  #install -D -m755 "$srcdir/50-adsuck-update" "$pkgdir/usr/lib/dhcpcd/dhcpcd-hooks/50-adsuck-update"
}
