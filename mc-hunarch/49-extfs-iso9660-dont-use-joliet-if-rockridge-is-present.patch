diff -Naur mc-4.6.1.orig/vfs/extfs/iso9660.in mc-4.6.1/vfs/extfs/iso9660.in
--- mc-4.6.1.orig/vfs/extfs/iso9660.in	2006-07-03 13:35:42.000000000 +0200
+++ mc-4.6.1/vfs/extfs/iso9660.in	2006-07-03 13:35:06.000000000 +0200
@@ -9,18 +9,18 @@
 # tested to comply with isoinfo 2.0's output
 
 test_iso () {
-    CHARSET=`echo "$save_charmap" | tr '[A-Z]' '[a-z]' | sed -e 's/^iso-/iso/'`
-    if test -n "$CHARSET"; then
-	isoinfo -j $CHARSET -i /dev/null 2>&1 | grep "Unknown charset" >/dev/null && CHARSET=
-    fi
-    if test -n "$CHARSET"; then
-	JOLIET_OPT="-j $CHARSET -J"
-    else
-	JOLIET_OPT="-J"
-    fi
     ISOINFO="isoinfo"
-    isoinfo -d -i "$1" | grep "NO Rock Ridge" > /dev/null || ISOINFO="$ISOINFO -R"
-    isoinfo -d -i "$1" | grep "NO Joliet" > /dev/null || ISOINFO="$ISOINFO $JOLIET_OPT"
+    if ! isoinfo -d -i "$1" | grep "^NO Rock Ridge" > /dev/null; then
+	ISOINFO="$ISOINFO -R"
+    elif ! isoinfo -d -i "$1" | grep "^NO Joliet" > /dev/null; then
+	ISOINFO="$ISOINFO -J"
+	CHARSET=`echo "$save_charmap" | tr '[A-Z]' '[a-z]' | sed -e 's/^iso-/iso/'`
+	if test -n "$CHARSET"; then
+	    if ! isoinfo -j "$CHARSET" -i /dev/null 2>&1 | grep "Unknown charset" > /dev/null; then
+		ISOINFO="$ISOINFO -j $CHARSET"
+	    fi
+	fi
+    fi
 }
 
 mcisofs_list () {
