diff -Naur mc-4.6.1.orig/vfs/extfs/iso9660.in mc-4.6.1/vfs/extfs/iso9660.in
--- mc-4.6.1.orig/vfs/extfs/iso9660.in	2004-10-29 11:14:38.000000000 +0200
+++ mc-4.6.1/vfs/extfs/iso9660.in	2006-07-02 16:40:09.000000000 +0200
@@ -9,9 +9,9 @@
 # tested to comply with isoinfo 2.0's output
 
 test_iso () {
-    CHARSET=`echo "$save_ctype" | sed -n -e 's/.*\.\(.*\)"$/\1/p' | tr '[A-Z]' '[a-z]'`
+    CHARSET=`echo "$save_charmap" | tr '[A-Z]' '[a-z]' | sed -e 's/^iso-/iso/'`
     if test -n "$CHARSET"; then
-	isoinfo -j $CHARSET 2>&1 | grep "Unknown charset" >/dev/null && CHARSET=
+	isoinfo -j $CHARSET -i /dev/null 2>&1 | grep "Unknown charset" >/dev/null && CHARSET=
     fi
     if test -n "$CHARSET"; then
 	JOLIET_OPT="-j $CHARSET -J"
@@ -65,7 +65,7 @@
 	$ISOINFO -i "$1" -x "/$2" > "$3" 
 }
 
-save_ctype=`locale | grep LC_CTYPE`
+save_charmap=`locale charmap`
 LC_ALL=C
 
 cmd="$1"
