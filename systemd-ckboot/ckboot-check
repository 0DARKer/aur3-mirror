#!/bin/bash

. /etc/ckboot.conf

/usr/bin/rm /tmp/ckboot &> /dev/null
/usr/bin/touch /tmp/ckboot

if [[ -e "$hashdir/filehash" && -e "$hashdir/mbrhash" ]]
then
    /usr/bin/diff "$hashdir/filehash" <(/usr/bin/sha512sum $(/usr/bin/find /boot -type f)) >/dev/null || /usr/bin/echo "files" >> /tmp/ckboot
    /usr/bin/diff "$hashdir/mbrhash" <(/bin/dd if="$mbrdsk" bs=512 count="$mbrblk" 2>/dev/null | /usr/bin/sha512sum) > /dev/null || /usr/bin/echo "mbr" >> /tmp/ckboot
else
    /usr/bin/echo "hash" >> /tmp/ckboot
fi
