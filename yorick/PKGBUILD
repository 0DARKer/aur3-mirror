# Maintainer: Francois Rigaut <frigaut@gmail.com>

pkgname=yorick
pkgver=2.1.05
_pkgmajver=2.1
pkgrel=2
pkgdesc="Interpreted language for data processing"
arch=('i686' 'x86_64')
license=('BSD')
url="http://yorick.sourceforge.net"
groups=('science' 'yorick-all')
depends=('glibc' 'rlwrap')
#source=(http://sourceforge.net/projects/yorick/files/yorick/${pkgver}/yorick-${pkgver}.tgz/download)
source=(http://www.maumae.net/yorick/packages/src/${pkgname}-${pkgver}.tgz)
md5sums=('1edc9b6dcfaaa2b614eec87315b8c03e')

build() {
  cd ${srcdir}/${pkgname}-${_pkgmajver}
  make prefix=/usr ysite || return 1
  make || return 1
  make INSTALL_ROOT=${pkgdir} install || return 1
  # build wrapper to start rlwrap yorick
  echo "#!/bin/sh" > yorick_wrapper
  echo "rlwrap -s 2000 -c /usr/lib/yorick/${_pkgmajver}/bin/yorick \$*" >> yorick_wrapper
  install -DTm755 ${srcdir}/${pkgname}-${_pkgmajver}/yorick_wrapper ${pkgdir}/usr/bin/yorick
}
