# Maintainer: Daniel MÃ¼llner <muellner@math.stanford.edu>

# Remove the --enable-openmp flag below if you do not want parallelization.

pkgname=python3-graph-tool
pkgver=2.2.21
pkgrel=2
pkgdesc='A Python module for manipulation and statistical analysis of graphs'
arch=('i686' 'x86_64')
url='http://projects.skewed.de/graph-tool/'
license=(GPL3)
depends=(boost python3 expat python3-scipy python3-numpy cgal graphviz)
makedepends=(sparsehash)
optdepends=('cairomm: graph drawing'
'python-cairo: graph drawing'
'python-matplotlib: graph drawing')
options=(!libtool)
source=("http://downloads.skewed.de/graph-tool/graph-tool-$pkgver.tar.bz2")
sha256sums=(0b5bb9c4c980f385a88c07c5d0254b780340244f723a065eb04347584ca86696)

build() {
  cd "$srcdir/graph-tool-$pkgver"
  ./configure --enable-openmp --prefix='/usr' --docdir="/usr/share/doc/$pkgname" PYTHON=python3 PYTHON_LDFLAGS='-L/usr/lib -lpython3.3m' --with-boost-python=boost_python3
  make
}

package() {
  cd "$srcdir/graph-tool-$pkgver"
  # Remove information about the source directory, which is temporary.
  sed -i 's/#define PACKAGE_SOURCE_DIR ".*"/#define PACKAGE_SOURCE_DIR ""/' config.h
  make DESTDIR="$pkgdir/" install
}
