# Maintainer: Ninez <triplesquarednine@gmail.com>
pkgname=python2-schedutils
pkgver=0.4
pkgrel=2
pkgdesc="Python package that can make use of linux scheduling interfaces"
arch=('any')
url="https://git.fedorahosted.org/git/python-schedutils.git"
license=('GPL')
depends=('python2' 'python2-numpy')
options=(!emptydirs)
provides=('python2-schedutils')
conflicts=('python2-schedutils')
replaces=('python2-schedutils')
source=("git://git.fedorahosted.org/git/python-schedutils.git")
sha256sums=('SKIP')

prepare() { 

  cd "$srcdir/python-schedutils"

  find pchrt.py -type f -exec sed -e 's|^#!.*python|#!/usr/bin/env python2|g' -i {} \;
  find ptaskset.py -type f -exec sed -e 's|^#!.*python|#!/usr/bin/env python2|g' -i {} \;

}

package() {

  cd "$srcdir/python-schedutils"

  python2 setup.py install --root="$pkgdir/"

  mkdir $pkgdir/usr/bin

  install -p -m775 pchrt.py $pkgdir/usr/bin/pchrt
  install -p -m775 ptaskset.py $pkgdir/usr/bin/ptaskset

}

# vim:set ts=2 sw=2 et:
