pkgname=indiprop-git
pkgver=20130411
pkgrel=1
pkgdesc="provides a generic user interface for browsing device properties published by an INDI compliant server"
url="https://code.google.com/p/indiprop/"
arch=('i686' 'x86_64')
license=('GPL')
depends=('qt4')
#optdepends=('')
makedepends=('make' 'gcc' 'git')
#source=()
#sha1sums=()

pkgver() {
#	cd "${srcdir}/${pkgname}"
#	git rev-list --count master
	date +%Y%m%d
}

_git_URL="https://code.google.com/p/indiprop/"

build() {
	cd "${srcdir}"
	if [ -d "${pkgname}/.git" ]; then
		msg "Starting GIT pull..."
		(cd "${pkgname}" && git pull)
	else
		msg "Starting GIT clone..."
		git clone "${_git_URL}" "${pkgname}"
	fi
	msg "GIT checkout done or server timeout"
	cd "${pkgname}"
	qmake-qt4
	make
}

package() {
	cd "${srcdir}/${pkgname}"
	make INSTALL_ROOT="${pkgdir}/usr" install
}

