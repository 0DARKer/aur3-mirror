# $Id: PKGBUILD,v 1.1 2010/06/23 13:53:41 luke Exp luke $
# Maintainer: DarkHeart luke<a>archlinux.us

pkgname=pidgin-facebookchat
pkgver=1.67
pkgrel=1
pkgdesc="Facebook chat plugin for Pidgin and libpurple messengers."
url='http://code.google.com/p/pidgin-facebookchat/'
license=('GPL3')
depends=('libpurple>=2.6.3' 'json-glib>=0.7.4')
arch=('i686' 'x86_64')
source=("http://pidgin-facebookchat.googlecode.com/files/$pkgname-source-$pkgver-1.tar.bz2")

build() {
  cd ${srcdir}/$pkgname
  if [ "$CARCH" = "x86_64" ]; then
    make LINUX64_COMPILER=x86_64-unknown-linux-gnu-gcc libfacebook64.so  || return 1
    install -D -m644 libfacebook64.so \
      ${pkgdir}/usr/lib/purple-2/libfacebook64.so || return 1
  else
    make libfacebook.so  || return 1
    install -D -m644 libfacebook.so \
      ${pkgdir}/usr/lib/purple-2/libfacebook.so || return 1
  fi

  for i in 16 22 48; do
    install -D -m644 facebook${i}.png \
      ${pkgdir}/usr/share/pixmaps/pidgin/protocols/${i}/facebook.png || return 1
  done
}
md5sums=('ae9d1f59e5185bf27b3ed1c0fee3fdc3')
