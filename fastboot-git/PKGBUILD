# Maintainer: 謝致邦 <Yeking@Red54.com>

pkgname=fastboot-git
pkgver=20121119
pkgrel=1
pkgdesc="fastboot(Fastboot protocol CLI tool), an Android platform tool"
arch=('i686' 'x86_64' 'armv7h')
depends=('libusb')
makedepends=('gcc' 'git' 'make')
provides=('fastboot')
conflicts=('fastboot')
url="https://android.googlesource.com/platform/system/core"
license=('Apache')
source=('fastbootMakefile')
md5sums=('cf0545c52e47149dd2880a270258cfdb')

_opt="-b tools_r21 --depth=1"
_extras="https://android.googlesource.com/platform/system/extras"
_libselinux="https://android.googlesource.com/platform/external/libselinux"

build() {
	cd $srcdir
	git clone $url $_opt
	git clone $_extras $_opt
	git clone $_libselinux $_opt
	mv fastbootMakefile core/fastboot/makefile
	cd core/fastboot
	make
}

package(){
	install -D ${srcdir}/core/fastboot/fastboot ${pkgdir}/usr/bin/fastboot
}
