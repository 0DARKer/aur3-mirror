# Maintainer: Santiago Piccinini <gringotumadre at gmail dot com>

pkgname=clam-networkeditor
pkgver=1.4.0
pkgrel=2
pkgdesc="tool for editing CLAM processing networks"
arch=('i686' 'x86_64')
url="http://clam-project.org"
license=('GPL')
depends=('clam>=1.4.0' 'qt' 'mesa')
makedepends=('gcc' 'scons')
optdepends=('aurvote: vote for favorite packages from AUR for inclusion in [community]')
source=(http://clam-project.org/download/src/NetworkEditor-${pkgver}.tar.gz
        SConstruct.patch
	gcc-4.5.patch)
md5sums=('79663504041b9f9ce21d0e382f23c6f9'
         '36a462459488aba514507ac850dbd7f3'
         '5a694372009aacdacb794a46e752f38c')

build() {
  install -d $pkgdir/usr
  cd $srcdir/NetworkEditor-$pkgver
  patch -p0 < $startdir/SConstruct.patch || return 1
  patch -p1 < $startdir/gcc-4.5.patch || return 1 
  QTDIR=/usr/lib/qt scons install prefix=$pkgdir/usr \
                    clam_prefix=/usr \
                    qt_plugins_install_path=/usr/lib/qt/plugins/designer \
                    release=1 verbose=1 || return 1

  mv $pkgdir/usr/usr/lib/qt/ $pkgdir/usr/lib/
  rmdir $pkgdir/usr/usr/lib $pkgdir/usr/usr
}
