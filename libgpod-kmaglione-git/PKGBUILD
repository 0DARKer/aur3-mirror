# Contributor: Corali Signs Co. <coralisigns[at]gmail(dot)com>
pkgname=libgpod-kmaglione-git
pkgver=20100118
pkgrel=1
pkgdesc="libgpod is a shared library to access the contents of an iPod. Alpha version with experimental ipod nano 5g support."
arch=(i686 x86_64)
license=('LGPL')
depends=('gtk2>=2.10.14' 'libxml2' 'sg3_utils')
makedepends=('libplist' 'perlxml' 'swig' 'git' 'intltool' 'gtk-doc')
url="http://gitorious.org/~kmaglione/libgpod/kmaglione-sandbox/trees/nano5g"
options=(!libtool)
source=()
conflicts=('libgpod' 'libgpod-git')
provides=('libgpod=0.7.0' 'libgpod-git')
md5sums=()

_gitroot=git://gitorious.org/~kmaglione/libgpod/kmaglione-sandbox.git
_gitname=kmaglione-sandbox

build() {
    cd $startdir/src
  
    msg "Connecting to libgpod GIT server...."
    
    if [ -d $startdir/src/$_gitname ] ; then
        cd $_gitname && git pull
        msg "The local files are updated."
    else
        git clone -b nano5g $_gitroot
        cd $_gitname
    fi

  ./autogen.sh 
  ./configure --prefix=/usr
  make || return 1
  make DESTDIR=${startdir}/pkg install || return 1
}
