# Maintainer: SÃ©bastien Leduc <sebastien@sleduc.fr>
# Contributor: Connor Behan <connor.behan@gmail.com>
# Contributor: Ron Collinson <notthinking at gmail dot com>
pkgname=carrier
pkgver=2.7.8
pkgrel=1
pkgdesc="Pidgin fork providing minor GUI enhancements (formerly funpidgin)"
arch=(i686 x86_64)
license=('GPL2')
url="http://funpidgin.sourceforge.net"
depends=('startup-notification' 'libidn' 'farsight2' 'gtkspell' 'libxss' 'gstreamer0.10' 'nss' 'libsasl' 'python2' 'hicolor-icon-theme' 'libwebkit')
makedepends=('avahi' 'tk' 'ca-certificates' 'intltool')
optdepends=('avahi: Bonjour protocol support'
	    'tk: Tcl/Tk scripting support'
	    'ca-certificates: SSL CA certificates')
conflicts=('pidgin' 'gaim')
provides=('pidgin' 'gaim')
options=(!libtool)
md5sums=("13a9b27e395333d3c5dcdbbd12db3c92")
install=carrier.install
source=(http://downloads.sourceforge.net/sourceforge/funpidgin/$pkgname-$pkgver.tar.bz2)


build() {
  cd ${srcdir}/${pkgname}-${pkgver}

  ./autogen.sh

  ./configure --prefix=/usr --sysconfdir=/etc --disable-perl --disable-nm \
              --disable-schemas-install --disable-meanwhile \
              --enable-cyrus-sasl --disable-doxygen --disable-gnutls \
              --enable-webkit --with-python=/usr/bin/python2 || return 1
  make || return 1
  make DESTDIR=${pkgdir} install || return 1

  # Remove GConf schema file
  rm -rf "$pkgdir/etc" || return 1
}
