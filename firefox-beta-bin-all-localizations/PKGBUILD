# Maintainer: Simone Sclavi 'Ito' <darkhado@gmail.com>
pkgname=firefox-beta-bin-all-localizations
_mypkgn=firefox-beta
pkgdesc='Perl script for installing latest FF beta in the language of your choice'
url='http://www.mozilla.com/firefox/channel/'
pkgver=6.0b1
pkgrel=1
arch=('i686' 'x86_64')
license=('MPL' 'GPL' 'LGPL')
depends=('desktop-file-utils' 'xulrunner' 'gnome-vfs' 'java-environment')
makedepends=('gnupg' 'perl-gnupg' 'perl-libwww')
install=firefox.install
source=('firefox-beta-bin.desktop' 'firefox-beta-bin-safe.desktop' 'ff-downloader.pl')   
md5sums=('3741f837995c687ac96c02f90b085919'
	 '9f8cfe6addec102fdbdd48775992cdce'
	 '44b4cf3ce8df3fff8728916579acb562') 
build() {
  perl ff-downloader.pl -v $pkgver
} 

package() {
  tar -jxf firefox-${pkgver}.tar.bz2
  mkdir -p ${pkgdir}/usr/lib/

  cp -r firefox "${pkgdir}/usr/lib/${_mypkgn}"
  
  ln -s /usr/lib/libnotify.so ${pkgdir}/usr/lib/${_mypkgn}/libnotify.so.1
  mkdir -p ${pkgdir}/usr/bin  
  
  ln -s /usr/lib/${_mypkgn}/firefox ${pkgdir}/usr/bin/firefox-beta
  mkdir -p $pkgdir/usr/share/{applications,pixmaps}
  install -m644 "${srcdir}"/{firefox-beta-bin.desktop,firefox-beta-bin-safe.desktop} "${pkgdir}/usr/share/applications/"
  install -m644 "${srcdir}/firefox/icons/mozicon128.png" "${pkgdir}/usr/share/pixmaps/${_mypkgn}-icon.png"
}
