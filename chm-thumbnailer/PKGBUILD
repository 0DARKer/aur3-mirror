# Maintainer: Auguste Pop <auguste [at] gmail [dot] com>

pkgname=chm-thumbnailer
pkgver=1.2
pkgrel=1
pkgdesc="CHM thumbnailer for GNOME desktop"
arch=('i686' 'x86_64')
url=('https://bbs.archlinux.org/viewtopic.php?pid=846033')
license=('GPL')
depends=('chmlib' 'gdk-pixbuf2' 'libxml2' 'gconf' 'desktop-file-utils')
install=("$pkgname.install")
source=("$pkgname.c" "$pkgname.install" "$pkgname.schemas")
md5sums=('26fbb812dc5ad8e1438e7c0ac4aeca9e'
         '9dc060bab92dfde7a571889f0aa4edc2'
         '398289b94f6083944fee48a0937edea5')

build()
{
    cd "$srcdir"
    gcc -o $pkgname $CFLAGS `xml2-config --cflags` \
        `pkg-config --cflags gdk-pixbuf-2.0` $pkgname.c `xml2-config --libs` \
        `pkg-config --libs gdk-pixbuf-2.0` -lchm $LDFLAGS
}

package()
{
    install -m 755 -D "$srcdir/$pkgname" "$pkgdir/usr/bin/$pkgname"
    install -m 644 -D "$srcdir/$pkgname.schemas" \
        "$pkgdir/usr/share/gconf/schemas/$pkgname.schemas"
}
