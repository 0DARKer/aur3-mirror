# Maintainer: Joao Cordeiro <jlcordeiro at gmail dot com>
# Contributor: DonVla <donvla@users.sourceforge.net>

pkgname=i2c-tools_with_py-smbus
_pkgname=i2c-tools
pkgver=3.0.2
pkgrel=1
pkgdesc="Heterogeneous set of I2C tools for Linux that used to be part of lm-sensors. With py-smbus"
arch=('i686' 'x86_64')
url="http://www.lm-sensors.org/wiki/I2CTools"
license=('GPL')
depends=('python2' 'lm_sensors' 'perl' 'read-edid')
options=(strip)
source=(http://dl.lm-sensors.org/$_pkgname/releases/$_pkgname-$pkgver.tar.bz2 Makefile.patch)
md5sums=('b546345ac19db56719dea6b8199f11e0' '49d17834f9d7e68407ec46785e47bb94')

build() {
  cd "$srcdir/$_pkgname-$pkgver"
  patch -p0 < $startdir/Makefile.patch
  make || return 1
  make DESTDIR="$pkgdir" install

  cd py-smbus
  CFLAGS="-I../include"
  python2 setup.py install --prefix=$pkgdir/usr
}
# vim:set ts=2 sw=2 et:
