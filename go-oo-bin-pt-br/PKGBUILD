#Contributor: Bruno Tsubouchi Yporti <yporti@archlinux-br.org>

pkgname=go-oo-bin-pt-br
pkgver=3.1.1
_subver=3.1
_build=9420
pkgrel=1
pkgdesc="Go-OO Brazilian Portuguese Language Pack and Help"
arch=('i686' 'x86_64')
url="http://go-oo.org/discover/"
license=('LGPL')
makedepends=('rpmextract')
depends=('go-oo-bin-base')
[ "$CARCH" = "x86_64" ] && _arch=x86_64
[ "$CARCH" = "i686" ] && _arch=i586
source=(
  http://go-oo.mirrorbrain.org/stable/linux-$_arch/$pkgver/ooobasis$_subver-pt-BR{,-base,-binfilter,-calc,-draw,-impress,-math,-res,-writer}-$pkgver-$_build.$_arch.rpm
  http://go-oo.mirrorbrain.org/stable/linux-$_arch/$pkgver/openoffice.org3-pt-BR-$pkgver-$_build.$_arch.rpm
)

md5sums=('c0e02ff7006aa10df3987729d8aab498'
'bfba3f19fce58e8457a1cc30566a38f8'
'2e40d85c99e0324cca9d92e790698c07'
'0fe70d076aed9fbc8a3dcbc80aaf8f58'
'c40b51902afef91cec71849a9b87d4b2'
'a660cea69399f150ac7abe2b8a2da838'
'8d55d07c0d1c5f622bb572be91be8622'
'5735506de887e2bee6b53b7a52da16bc'
'faa0af827c926e622a19113c41bd79b2'
'aea7659018493e1719eb883525e3f124')
[ "$CARCH" = "x86_64" ] && md5sums=('c247bfc4dac952792cbba4c28db04d47'
'182927f9ad49274e9f3acb347be1357b'
'76498c1f661e63d67f74754438048b65'
'834adb22495f7cd7c40386362e7a0c94'
'dc68b77b4043d91abe7b3f903a842b81'
'be0798013280851cf76717ffccfa8736'
'b76a016220067e2b030824fe44f9e188'
'6799548f947237e29df4d00018e44503'
'fb38ae270e301ba198407b36327ba252')

build() {
	
    cd $startdir/src/
	
    for i in $(ls *.rpm); do
        rpmextract.sh $i
    done
    
    #"base" install
    cp $startdir/src/opt $startdir/pkg/ -r

    ## Step 1 
    cd ${pkgdir}/opt/openoffice.org || return 1
    cd basis3.1 || return 1
    ## Step 2
    cd ${pkgdir}/opt/ || return 1
    mv openoffice.org/basis3.1/ openoffice.org3/ || return 1
    cd openoffice.org3/ || return 1
    mv basis3.1 basis-link || return 1
    ## Step 3        
    cd ${pkgdir}/opt/ || return 1
    rmdir ${pkgdir}/opt/openoffice.org || return 1
    mv openoffice.org3 go-oo || return 1
    
}

