# Contributors: Evilandi666 <evilandi.aur(at)googlemail.com>

pkgname=twofing-wetab
pkgver=0.0.7
pkgrel=1
pkgdesc="twofing is a daemon which runs in the background and recognizes two-finger gestures performed on a touchscreen and converts them into mouse and keyboard events. This is the edition with patched udev rules for the WeTab/ExoPC."
arch=('i686' 'x86_64')
url="http://philmerk.de/arbeit/useful_twofing.htm"
depends=('udev' 'libxtst' 'libxrandr')
makedepends=('sed' 'libxi' 'inputproto')
options=()
license=('custom')
source=('https://help.ubuntu.com/community/T101MT?action=AttachFile&do=get&target=twofing-0.0.7.tar.gz')
sha1sums=('d2d8722025352007a46a139b7ce469d1aa146b90')

build() {
  cd "${srcdir}/twofing-${pkgver}"
  sed 's/480d/72a1/g' -i 70-touchscreen-egalax.rules
  make
}
package() {
  cd "${srcdir}/twofing-${pkgver}"
  mkdir -p ${pkgdir}/usr/bin
  sed 's/cp 70-touchscreen-egalax.rules \/etc\/udev\/rules.d\///g' -i Makefile
  make DESTDIR="${pkgdir}" install
  mkdir -p ${pkgdir}/etc/udev/rules.d/
  install -m644 70-touchscreen-egalax.rules "${pkgdir}/etc/udev/rules.d/"
  mkdir -p "${pkgdir}/usr/share/licenses/${pkgname}"
  cat twofingemu.c | head -n 15 > "${pkgdir}/usr/share/licenses/${pkgname}/COPYING"
}
