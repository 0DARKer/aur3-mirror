# Contributor: Johannes Dewender  arch at JonnyJD dot net
# Contributor: Konrad <konrad AT knauber DOT name>
# Contributor: Luka Perkov <archlinux <at> lukaperkov <dOt> net>
# Contributor: Fernando M <f <at> beford.net>
# Author: Wintershade <Wintershade AT google mail DOT com>

pkgname=yasem-git
_pkgname=yasem
pkgver=0.1
_pkgver=$pkgver
pkgrel=1
pkgdesc="Yet Another Stb EMulator"
arch=('i686' 'x86_64')
url=("https://github.com/mvasilchuk/yasem")
license=('GPL2')
depends=('qt5-base>=5.2' 'qt5-webkit>=5.2' 'ffmpeg')
makedepends=('gcc>=4.3' 'git')
optdepends=(
  'portaudio: PortAudio support'
  'openal: OpenAL support'
)

source=("git://github.com/mvasilchuk/yasem.git")
md5sums=('SKIP')

build() {
	cd "${srcdir}/${_pkgname}"
	git submodule update --init --recursive
	git submodule foreach --recursive git fetch
	git submodule foreach git merge origin master
	qmake
	make
}

package() {
	install -d "${pkgdir}/opt/${_pkgname}/bin"
	cp -r $srcdir/${_pkgname}/bin ${pkgdir}/opt/yasem/
}
