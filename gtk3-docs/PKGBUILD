# Maintainer: Aljosha Papsch <papsch.al@googlemail.com>

pkgname=gtk3-docs
pkgver=3.0.12
pkgrel=1
pkgdesc="Developer documentation for GTK+3 and GDK3"
arch=("any")
depends=()
license=('LGPL')
url="http://developer.gnome.org/gtk3/stable/"
source=(ftp://ftp.gnome.org/pub/gnome/sources/gtk+/3.0/gtk+-${pkgver}.tar.bz2)
sha256sums=('63c8cb75947b8364f7102870634feb5797418160ffc37a676c4ea340ad95b1f4')

build() {

  docsdir="${srcdir}/gtk+-${pkgver}/docs/reference"

  # Create destination dirs
  install -d ${pkgdir}/usr/share/doc/gtk3 \
    ${pkgdir}/usr/share/doc/gdk3 \
    ${pkgdir}/usr/share/devhelp/books/gtk3 \
    ${pkgdir}/usr/share/devhelp/books/gdk3

  # Install documentation to destination
  install -D -m 644 \
    ${docsdir}/gtk/html/* \
    ${pkgdir}/usr/share/doc/gtk3

  install -D -m 644 \
    ${docsdir}/gdk/html/* \
    ${pkgdir}/usr/share/doc/gdk3

  install -D -m 644 \
    ${docsdir}/gtk/html/gtk3.devhelp2 \
    ${pkgdir}/usr/share/devhelp/books/gtk3

  install -D -m 644 \
    ${docsdir}/gdk/html/gdk3.devhelp2 \
    ${pkgdir}/usr/share/devhelp/books/gdk3

  # Make it useable in devhelp
  sed -i 's/<book/<book base="\/usr\/share\/doc\/gtk3"/g' ${pkgdir}/usr/share/devhelp/books/gtk3/gtk3.devhelp2
  sed -i 's/<book/<book base="\/usr\/share\/doc\/gdk3"/g' ${pkgdir}/usr/share/devhelp/books/gdk3/gdk3.devhelp2

}

# vim:set ts=2 sw=2 et:
