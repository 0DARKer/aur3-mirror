# Maintainer: Stephen Zhang <zsrkmyn@gmail.com>

########################################### NOTICE!!! #######################################
# To use this PKGBUILD, you need to download the source package from http://www.segger.com. #
# Go to this webpage: "http://www.segger.com/jlink-software.html" and download              #
# "Software and documentation pack for Linux V4.84, TGZ archive 64-bit version [6,313 kb]". #
# Place the package you downloaded together with this PKGBUILD and run "makepkg -s".        #
#############################################################################################

pkgname=j-link-software-and-documentation
pkgver=V4.84
pkgrel=1
pkgdesc="J-Link software & documentation pack for Linux"
arch=('x86_64')
url="http://www.segger.com"
license=('custom')
depends=('libedit')
source=('JLink_Linux_V484_x86_64.tgz::http://xxx')
md5sums=('6ba40a190d06fe1a5d51793d4960b105')

package(){
	install -d "${pkgdir}/usr/share/licenses/${pkgname}" "${pkgdir}/etc/udev/rules.d/" "${pkgdir}/usr/lib/" "${pkgdir}/usr/bin/" "${pkgdir}/usr/share/doc/${pkgname}/ReleaseNotes" "${pkgdir}/usr/share/${pkgname}/Samples/JLink/Scripts/"
	cd ${srcdir}/JLink_Linux_V484_x86_64/
	install 99-jlink.rules "${pkgdir}/etc/udev/rules.d/"
	install -m755 JLink* "${pkgdir}/usr/bin/"
	install Doc/*.pdf "${pkgdir}/usr/share/doc/${pkgname}/"
	install Doc/ReleaseNotes/* "${pkgdir}/usr/share/doc/${pkgname}/ReleaseNotes/"
	install Samples/JLink/Scripts/* "${pkgdir}/usr/share/${pkgname}/Samples/JLink/Scripts/" 
	install Doc/License.txt "${pkgdir}/usr/share/licenses/${pkgname}/"
	install libjlinkarm.so.4 "${pkgdir}/usr/lib/"
	cd ${pkgdir}/usr/lib/
	ln -s libjlinkarm.so.4{,.80.8}
}
