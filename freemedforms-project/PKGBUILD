# Maintainer: ed0c <alexandre.piel at mailoo dot org>

pkgname=freemedforms-project
pkgver=0.9.4
_pkgver=0.9.4
pkgrel=1
pkgdesc="Electronic Medical Record Manager"
arch=(i686 x86_64)
url="http://www.freemedforms.com/en/"
license=('GPL3')
depends=('qt4' 'opencv' )
install="$pkgname.install"
source=("http://pkgs.fedoraproject.org/repo/pkgs/freemedforms/freemedforms-project-src_0.9.4.tgz/47b38648d3f581cb8627c175c2c01693/freemedforms-project-src_0.9.4.tgz")
md5sums=('47b38648d3f581cb8627c175c2c01693')

build() {

  # Generate translations 
  cd "$srcdir/$pkgname-$_pkgver/global_resources/translations"
  lrelease-qt4 *.ts
  
  # Compiling source
  cd "$srcdir/$pkgname-$_pkgver"
   qmake-qt4 freemedforms.pro -r -config release \
    "CONFIG+=LINUX_INTEGRATED" \
    "LIBRARY_BASENAME=lib64" \
    "INSTALL_ROOT_PATH=$pkgdir/usr/" \
    "LOWERED_APPNAME=$pkgname" \
    "CONFIG+=with-account" \
    "CONFIG+=with-agenda" \
    "CONFIG+=with-alerts" \
    "CONFIG+=with-feedback" \
    "CONFIG+=with-pmh" \
    "CONFIG+=with-webcam"

  make
}

package() {
  
  cd "$srcdir/$pkgname-$_pkgver"

  make install

}
