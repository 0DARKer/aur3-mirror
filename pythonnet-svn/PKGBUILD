# Maintainer: Michael Schubert <mschu.dev at gmail>

pkgname=pythonnet-svn
pkgver=141
pkgrel=1
pkgdesc="Call .NET Common Language Runtime (CLR) from Python"
arch=('i686' 'x86_64')
url="http://pythonnet.sourceforge.net/"
license=('LGPL')
depends=('python2' 'mono')
makedepends=('svn')
source=('pythonnet.patch')
md5sums=('a0f99e5275dbfe8e3a37ceaae9299f5b')

_svntrunk=https://pythonnet.svn.sourceforge.net/svnroot/pythonnet/trunk/pythonnet
_svnmod=pythonnet

build() {
  cd "$srcdir"

  if [ -d $_svnmod/.svn ]; then
    (cd $_svnmod && svn up)
  else
    svn co $_svntrunk --config-dir ./ -r $pkgver $_svnmod
  fi

  msg "SVN checkout done or server timeout"
  msg "Starting make..."
  
  patch -p0 < pythonnet.patch
  cd "$_svnmod"

  make realclean # remove clrmodule.il
  make PYTHON=python2
}

package() {
  cd "$srcdir/$_svnmod"
  make PYTHON=python2 DESTDIR="$pkgdir" install
}

