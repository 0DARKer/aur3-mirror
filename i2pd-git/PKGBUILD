#Maintainer: M0Rf30

pkgname=i2pd-git
pkgver=690.180fbcd
pkgrel=1
pkgdesc="Simplified C++ implementation of I2P client"
arch=('i686' 'x86_64')
url="https://github.com/PrivacySolutions/i2pd"
license=('GPL2')
depends=('crypto++' 'boost-libs')
makedepends=('git' 'boost')
source=('i2pd::git+https://github.com/PrivacySolutions/i2pd.git'
	i2pd.{install,service})
install=i2pd.install

build() {
  cd i2pd
  make
}

package(){
  cd i2pd
  install -Dm755 i2p $pkgdir/usr/bin/i2p
  install -Dm0644 $srcdir/i2pd.service $pkgdir/usr/lib/systemd/system/i2pd.service
  install -dm0700 $pkgdir/var/lib/i2p
}

pkgver() {
  cd i2pd
  echo $(git rev-list --count master).$(git rev-parse --short master)
}

md5sums=('SKIP'
         'fd2b3a447786ae668999b72fedf19df5'
         'd436e519007798b64e63387beaf54e22')
