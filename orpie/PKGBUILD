# Contrubutor: Kazuo Teramoto <kaz.rag gmail com>
# Contributor: scj <scj archlinux us>
# Contributor: tracer <jcdenton513 gmail com>
pkgname=orpie
pkgver=1.5.1
pkgrel=6
pkgdesc='Fullscreen RPN calculator for the console.'
arch=('i686' 'x86_64')
url='http://pessimization.com/software/orpie/'
license=('GPL')
depends=('ncurses' 'gsl')
makedepends=('ocaml' 'ocaml-gsl')
source=(http://pessimization.com/software/orpie/$pkgname-$pkgver.tar.gz
        orpie-1.5.1-nogsl.patch
        orpie-1.5.1-ocaml311.patch
        orpie-1.5.1-orpierc.patch)
md5sums=('4511626ed853354af1b4b5dbbf143a1f'
         '7365ae021230f4de04575618bb372221'
         'c0779680d113dd0a9817cf36d4c92f80'
         'ab313270d7ac9e59ee7e031e50d8761b')

build() {
  cd "${srcdir}/$pkgname-$pkgver"

  for patchfile in ${srcdir}/orpie-1.5.1-*.patch; do
    patch -p1 -i $patchfile || return 1
  done

  ./configure --sysconfdir=/etc --prefix=/usr --mandir=/usr/man || return 1
  make || return 1
  make DESTDIR="$pkgdir" install
}

# vim:set ts=2 sw=2 et:
