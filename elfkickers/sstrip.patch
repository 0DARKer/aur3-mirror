--- sstrip/sstrip.c.orig	2010-09-11 23:44:28.150000672 +0200
+++ sstrip/sstrip.c	2010-09-11 23:55:06.166667338 +0200
@@ -9,7 +9,18 @@
 #include	<unistd.h>
 #include	<fcntl.h>
 #include	<elf.h>
-#include	<asm/elf.h>
+
+#ifdef __i386
+#define ELF_CLASS      ELFCLASS32
+#define ELF_DATA       ELFDATA2LSB
+#define ELF_ARCH       EM_386
+#else
+#ifdef __x86_64
+#define ELF_CLASS      ELFCLASS64
+#define ELF_DATA       ELFDATA2LSB
+#define ELF_ARCH       EM_X86_64
+#endif
+#endif

 #ifndef TRUE
 #define	TRUE		1
@@ -121,7 +132,7 @@
 static int getmemorysize(Elf_Ehdr const *ehdr, Elf_Phdr const *phdrs,
 			 unsigned long *newsize)
 {
-    Elf32_Phdr const   *phdr;
+    Elf_Phdr const   *phdr;
     unsigned long	size, n;
     int			i;

@@ -185,7 +196,7 @@
 static int modifyheaders(Elf_Ehdr *ehdr, Elf_Phdr *phdrs,
 			 unsigned long newsize)
 {
-    Elf32_Phdr *phdr;
+    Elf_Phdr *phdr;
     int		i;

     /* If the section header table is gone, then remove all references
