# Maintainer: Mantic0re <lbrazeau at gmail dot com>
# Contributor: Godane <slaxemulator at gmail dot com>
pkgname=italc
pkgver=1.0.13
pkgrel=2
pkgdesc="Classroom management software which enables teachers to view and control computers"
arch=('i686' 'x86_64')
url="http://italc.sourceforge.net/"
license=('GPL')
depends=('qt>=4.4.1' 'libxtst' 'libxinerama')
install=$pkgname.install
source=(http://sourceforge.net/projects/$pkgname/files/$pkgname/$pkgver/$pkgname-$pkgver.tar.bz2/download
	italc)
md5sums=('ab9ed172e76a396ace9ed5eeee883e7a'
         '313c31ae7f1cb418a16939c12a714add')

build() {
	cd $srcdir/$pkgname-$pkgver
	
	./configure --prefix=/usr --localstatedir=/var --sysconfdir=/etc --with-linux --with-qtdir=/usr
	make
	make install DESTDIR=$pkgdir
	mkdir -p $pkgdir/usr/share/icons/hicolor/128x128/apps
	mv $pkgdir/usr/share/icons/italc.png $pkgdir/usr/share/icons/hicolor/128x128/apps
	sed -i "s_Icon=/usr/share/pixmaps/italc_Icon=italc_g" $pkgdir/usr/share/applications/italc.desktop
	sed -i "s_Categories=Qt;KDE;Education;X-KDE-Edu-Teaching;_Categories=Applications;Network;_g" $pkgdir/usr/share/applications/italc.desktop
	mkdir -p $pkgdir/etc/rc.d
	cp -f ../italc $pkgdir/etc/rc.d
	chmod +x $pkgdir/etc/rc.d/italc
}
