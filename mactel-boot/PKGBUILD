# Maintainer : Keshav P R <(the.ridikulus.rat) (aatt) (gemmaeiil) (ddoott) (ccoomm)>

_pkgname="mactel-boot"

_ver="0.1"
_rpm_rel="4"
_fedora_rel="fc16"

_pkgver="${_ver}"

pkgname="${_pkgname}"
pkgver="${_pkgver}"

pkgrel=1
pkgdesc="Utility to bless EFI bootloaders in Apple-Intel Macs"
url="https://bugzilla.redhat.com/show_bug.cgi?id=755093"
license=('GPL')
arch=('i686' 'x86_64')
makedepends=()
depends=('util-linux')
options=(!strip)

source=("http://www.codon.org.uk/~mjg59/mactel-boot/mactel-boot-${_ver}-${_rpm_rel}.${_fedora_rel}.src.rpm"
		'mactel-boot-install.sh')

noextract=("mactel-boot-${_ver}-${_rpm_rel}.${_fedora_rel}.src.rpm")

sha256sums=('0599dcaa078939824af6f2fdae079314a4f5e72bbb9f9819837427ba6ff748bb'
            '6fcb12b28d714b0f5136cc8e0dcfcd6ebd7fdb3f0c333432af85a67434502f00')

_extract_src_rpm() {
	
	cd "${srcdir}/"
	
	bsdtar xf "${srcdir}/mactel-boot-${_ver}-${_rpm_rel}.${_fedora_rel}.src.rpm"
	
	bsdtar xf "${srcdir}/mactel-boot-${_ver}.tar.bz2"
	
}

build() {
	
	_extract_src_rpm
	
	cd "${srcdir}/mactel-boot-${_ver}"
	
	CFLAGS="" make
	echo
	
}

package() {
	
	cd "${srcdir}/mactel-boot-${_ver}"
	
	make DESTDIR="${pkgdir}/" install
	echo
	
	install -D -m0755 "${srcdir}/mactel-boot-install.sh" "${pkgdir}/usr/sbin/mactel-boot-install"
	
	install -d "${pkgdir}/usr/share/mactel-boot"
	install -D -m0644 "${srcdir}/mactel-boot-${_ver}/SystemVersion.plist" "${pkgdir}/usr/share/mactel-boot/SystemVersion.plist"
	
}
