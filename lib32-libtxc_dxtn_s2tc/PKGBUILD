# Maintainer: Lauretn Carlier <lordheavym@gmail.com>

_pkgbasename=libtxc_dxtn_s2tc
pkgname=lib32-$_pkgbasename
pkgver=0.0.20121013
pkgrel=1
arch=('x86_64')
pkgdesc="A replacement for the texture compression library for Mesa (32-bit)"
url="https://github.com/divVerent/s2tc"
license=(MIT)
depends=('lib32-mesa' 'lib32-gcc-libs')
options=(!libtool)
provides=('lib32-libtxc_dxtn')
conflicts=('lib32-libtxc_dxtn')
source=(dxtn_s2tc.zip::https://nodeload.github.com/divVerent/s2tc/zipball/master)
md5sums=('87c90af18a8ead46342e7ae67674178c')

build() {
  cd "$srcdir"/divVerent-s2tc-*

  export CC="gcc -m32"
  export CXX="g++ -m32"
  export PKG_CONFIG_PATH="/usr/lib32/pkgconfig"

  sh autogen.sh
  ./configure --prefix=/usr \
    --libdir=/usr/lib32
  make
}

package() {
  cd "$srcdir"/divVerent-s2tc-*

  make DESTDIR="$pkgdir" install
  
  rm -r "$pkgdir"/usr/{bin,include}
}
