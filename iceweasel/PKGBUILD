#! /bin/bash
# Contributor Jorge Barroso <jorge.barroso.11@gmail.com>

# We're getting this from Debian Experimental

pkgname=iceweasel
pkgver=17.0.1
pkgrel=2
pkgdesc="Debian Iceweasel, the Browser based on Mozilla Firefox."
arch=('i686' 'x86_64')
url=("http://www.geticeweasel.org")
license=('GPL')
depends=('xulrunner>=17.0' 'mozilla-searchplugins')
optdeps=('iceweasel-i18n: for iceweasel language translations'
         'iceweasel-sync: Speed up Iceweasel using tmpfs'
         'mozplugger: A Mozilla & Firefox multimedia plugin.')
conflicts=('firefox')
install=iceweasel.install

if [ "$CARCH" = "x86_64" ]; then
source=(http://http.us.debian.org/debian/pool/main/i/${pkgname}/${pkgname}_${pkgver}-2_amd64.deb)
else
source=(http://http.us.debian.org/debian/pool/main/i/${pkgname}/${pkgname}_${pkgver}-2_i386.deb)
fi

package() {
cd "${srcdir}"
install -m755 "${srcdir}/data.tar.xz" "${pkgdir}/data.tar.xz"
cd "${pkgdir}"
tar -Jxvf data.tar.xz
rm ${pkgdir}/usr/lib/iceweasel/firefox-bin
rm ${pkgdir}/usr/lib/iceweasel/xulrunner
ln -s /usr/lib/xulrunner-17.0.1/xulrunner-stub ${pkgdir}/usr/lib/iceweasel/firefox-bin
ln -s /usr/lib/xulrunner-17.0.1/ ${pkgdir}/usr/lib/iceweasel/xulrunner
}

if [ "$CARCH" = "x86_64" ]; then
sha512sums=('b4c788a8e62dae57e85f437d1da8d0adafcf557e39d3a5e33e743394ee5a6ce36d507b6308e98f55377b28d29422f12567ae16961c1c0980a373f36a04a71425')
else
sha512sums=('b73da38817a4ae19fb855d313c566aad4eea53b1d3eedffda8f81b0b684bf0502efb3add58042c4a5684737e4edf185704582f0c9d1ab7b11f067f3d8bd6ab31')
fi

# vim:set ts=2 sw=2 et: