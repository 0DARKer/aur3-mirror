#! /bin/bash
# Contributor Jorge Barroso <jorge.barroso.11@gmail.com>

# We're getting this from Debian Experimental

pkgname=iceweasel
pkgver=17.0.1
pkgrel=1
pkgdesc="Debian Iceweasel, the Browser based on Mozilla Firefox."
arch=('i686' 'x86_64')
url=("http://www.geticeweasel.org")
license=('GPL')
depends=('xulrunner>=17.0' 'mozilla-searchplugins')
optdeps=('iceweasel-i18n: for iceweasel language translations'
         'iceweasel-sync: Speed up Iceweasel using tmpfs'
         'mozplugger: A Mozilla & Firefox multimedia plugin.')
conflicts=('firefox')
install=iceweasel.install
if [ "$CARCH" = "x86_64" ]; then
source=(http://http.us.debian.org/debian/pool/main/i/${pkgname}/${pkgname}_${pkgver}-1_amd64.deb)
else
source=(http://http.us.debian.org/debian/pool/main/i/${pkgname}/${pkgname}_${pkgver}-1_i386.deb)
fi

package() {
cd "${srcdir}"
install -m755 "${srcdir}/data.tar.xz" "${pkgdir}/data.tar.xz"
cd "${pkgdir}"
tar -Jxvf data.tar.xz
rm ${pkgdir}/usr/lib/iceweasel/firefox-bin
rm ${pkgdir}/usr/lib/iceweasel/xulrunner
ln -s /usr/lib/xulrunner-17.0.1/xulrunner-stub ${pkgdir}/usr/lib/iceweasel/firefox-bin
ln -s /usr/lib/xulrunner-17.0.1/ ${pkgdir}/usr/lib/iceweasel/xulrunner
}

if [ "$CARCH" = "x86_64" ]; then
sha512sums=('eb98748a89cbfd8da314bfb039b0ec291ed88710377ad901a474038d81e7caee7dd7f85805603e56a5fab8dde8c5a5bf0864d08f48ee6927bc1838026b2b884a')
else
sha512sums=('393a87852fac671a44a882e5376a7f037e418d7ae683e9dc7a7f18c631a47f20cdc70af4c8d617418f2b15e4a3dfb6b96a772138345c589b60f59a00d9ea3d67')
fi

# vim:set ts=2 sw=2 et: