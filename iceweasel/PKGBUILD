#! /bin/bash
# Contributor Jorge Barroso <jorge.barroso.11@gmail.com>

# We're getting this from Debian Experimental

pkgname=iceweasel
pkgver=16.0.2
pkgrel=1
pkgdesc="Debian Iceweasel, the Browser based on Mozilla Firefox."
arch=('i686' 'x86_64')
url=("http://www.geticeweasel.org")
license=('GPL')
depends=('xulrunner=16.0.2' 'mozilla-searchplugins')
optdeps=('iceweasel-i18n: for iceweasel language translations'
         'iceweasel-sync: Speed up Iceweasel using tmpfs'
         'mozplugger: A Mozilla & Firefox multimedia plugin.')
conflicts=('firefox')
install=iceweasel.install
if [ "$CARCH" = "x86_64" ]; then
source=(http://http.us.debian.org/debian/pool/main/i/${pkgname}/${pkgname}_${pkgver}-1_amd64.deb)
else
source=(http://http.us.debian.org/debian/pool/main/i/${pkgname}/${pkgname}_${pkgver}-1_i386.deb)
fi

package() {
cd "${srcdir}"
install -m755 "${srcdir}/data.tar.xz" "${pkgdir}/data.tar.xz"
cd "${pkgdir}"
tar -Jxvf data.tar.xz
rm data.tar.xz
rm ${pkgdir}/usr/lib/iceweasel/firefox-bin
rm ${pkgdir}/usr/lib/iceweasel/xulrunner
sudo ln -s /usr/lib/xulrunner-16.0.2/xulrunner-stub  ${pkgdir}/usr/lib/iceweasel/firefox-bin
sudo ln -s /usr/lib/xulrunner-16.0.2/  ${pkgdir}/usr/lib/iceweasel/xulrunner
}

if [ "$CARCH" = "x86_64" ]; then
sha512sums=('6ed446226f181aed61ceb1acc74c6132fc328cc98215a50d3df11f9bcd6d336450f6470d84e87d551f231f3ede89846d4e2bae6705d4ee627645723f17f93af6')
else
sha512sums=('3d20eebf3b46109fffbfc0124e3af56eeac4a4cb2e7d9d1d36e2a103716d63edc89f4d0b9872f0b39260f582bb46f3e682b4553c905e98d5b15a71a9b58a8033')
fi

# vim:set ts=2 sw=2 et: