#! /bin/bash
# Contributor Jorge Barroso <jorge.barroso.11@gmail.com>

# We're getting this from Debian Experimental

pkgname=iceweasel
pkgver=16.0.1
pkgrel=3
pkgdesc="Debian Iceweasel, the Browser based on Mozilla Firefox."
arch=('i686' 'x86_64')
url=("http://www.geticeweasel.org")
license=('GPL')
depends=('xulrunner>=16.0' 'mozilla-searchplugins')
optdeps=('iceweasel-i18n: for iceweasel language translations'
         'iceweasel-sync: Speed up Iceweasel using tmpfs'
         'mozplugger: A Mozilla & Firefox multimedia plugin.')
conflicts=('firefox')
install=iceweasel.install
if [ "$CARCH" = "x86_64" ]; then
source=(http://http.us.debian.org/debian/pool/main/i/${pkgname}/${pkgname}_${pkgver}-1_amd64.deb)
else
source=(http://http.us.debian.org/debian/pool/main/i/${pkgname}/${pkgname}_${pkgver}-1_i386.deb)
fi

package() {
cd "${srcdir}"
install -m755 "${srcdir}/data.tar.xz" "${pkgdir}/data.tar.xz"
cd "${pkgdir}"
tar -Jxvf data.tar.xz
rm data.tar.xz
rm ${pkgdir}/usr/lib/iceweasel/firefox-bin
rm ${pkgdir}/usr/lib/iceweasel/xulrunner
sudo ln -s /usr/lib/xulrunner-16.0.1/xulrunner-stub  ${pkgdir}/usr/lib/iceweasel/firefox-bin
sudo ln -s /usr/lib/xulrunner-16.0.1/  ${pkgdir}/usr/lib/iceweasel/xulrunner
}

if [ "$CARCH" = "x86_64" ]; then
sha512sums=('43a9576a65025cb4d0b588779f2d9f75303931be9e6e042922e62d4288ea06460c2568753457677ee0b6274f50bba9ded472e340dae093d5d7f3f7eb5477dc8b')
else
sha512sums=('0cfe51765f937f81c94f575b99e0d72b1aa9bc061a804ad3efc31e11c05d5e9ac525d2207dcac92bd86f71d10a980e5bcd560e76d6745f8b98e1990e8fee305e')
fi

# vim:set ts=2 sw=2 et:
