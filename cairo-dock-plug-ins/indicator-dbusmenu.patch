=== modified file 'CMakeLists.txt'
--- CMakeLists.txt	2012-11-06 14:21:16 +0000
+++ CMakeLists.txt	2012-11-07 02:35:17 +0000
@@ -146,6 +146,7 @@
 ############# INDICATOR-APPLET #################
 message (STATUS "> Indicator-Applet:")
 # Note: the names of dbusmenu-glib, dbusmenu-gtk and indicator have changed...
+## DBusMenu Glib
 set (DBUSMENU_MODULE dbusmenu-glib-0.4)
 pkg_check_modules (DBUSMENU ${DBUSMENU_MODULE})
 if (NOT "${DBUSMENU_FOUND}")
@@ -156,6 +157,7 @@
 	set (INDICATOR_APPLICATIONADDED_HAS_HINT 1) # now the ApplicationAdded signal (Status-Notifier) has a new parameter (hint) => https://code.launchpad.net/~ted/indicator-application/name-hints/+merge/67213
 endif()
 
+## DBusMenu Gtk
 if ("${gtkversion}" STREQUAL "2")
 	set (DBUSMENU_GTK_MODULE dbusmenu-gtk-0.4)
 else()
@@ -171,6 +173,7 @@
 	pkg_check_modules (DBUSMENU_GTK ${DBUSMENU_GTK_MODULE})
 endif()
 
+## Indicator
 if ("${gtkversion}" STREQUAL "2")
 	set (INDICATOR_APPLET_MODULE indicator-0.4)
 else()
@@ -188,6 +191,7 @@
 	pkg_check_modules (INDICATOR_APPLET ${INDICATOR_APPLET_MODULE})
 endif()
 
+## libido
 if ("${gtkversion}" STREQUAL "2")
 	set (IDO_MODULE libido-0.1)
 else()
@@ -195,6 +199,7 @@
 endif()
 pkg_check_modules (IDO ${IDO_MODULE})
 
+## Extract versions of DBusMenu
 if ("${DBUSMENU_FOUND}" STREQUAL "1" AND "${DBUSMENU_GTK_FOUND}" STREQUAL "1")
 	STRING (REGEX REPLACE "\\..*" "" DBUSMENU_MAJOR "${DBUSMENU_VERSION}")
 	STRING (REGEX REPLACE "[0-9]*\\.([^ ]+)" "\\1" DBUSMENU_MINOR "${DBUSMENU_VERSION}")  # 0.1.7 => 1.7
@@ -217,6 +222,7 @@
 	endif()
 endif()
 
+## Extract version of indicator
 if ("${INDICATOR_APPLET_FOUND}" STREQUAL "1")
 	STRING (REGEX REPLACE "\\..*" "" INDICATOR_MAJOR "${INDICATOR_APPLET_VERSION}")
 	STRING (REGEX REPLACE "[0-9]*\\.([^ ]+)" "\\1" INDICATOR_MINOR "${INDICATOR_APPLET_VERSION}")  # 0.1.7 => 1.7
@@ -264,8 +270,11 @@
 	if ("${with_indicator3}" STREQUAL "yes")
 		add_subdirectory (Indicator-applet3)
 	endif()
-	add_subdirectory (Indicator-applet)
-	set (with_indicator "yes")
+	## DBusMenu is needed for Indicator-applet
+	if ("${DBUSMENU_FOUND}" STREQUAL "1" AND "${DBUSMENU_GTK_FOUND}" STREQUAL "1")
+		add_subdirectory (Indicator-applet)
+		set (with_indicator "yes")
+	endif()
 endif()
 
 if (NOT "${DBUSMENU_FOUND}" STREQUAL "1" OR NOT "${DBUSMENU_GTK_FOUND}" STREQUAL "1" OR NOT "${INDICATOR_APPLET_FOUND}" STREQUAL "1")

