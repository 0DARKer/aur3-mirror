# Maintainer: Can Celasun <dcelasun@gmail.com>
pkgname=lshw-gtk
pkgver=B.02.14
pkgrel=2
pkgdesc="Hardware lister application with CLI and GTK interfaces."
url="http://ezix.org/project/wiki/HardwareLiSter"
license="GPL"
arch=(i686 x86_64)
depends=('gtk2' 'libglade' 'gksu')
provides=('lshw')
conflicts=('lshw')
source=(http://ezix.org/software/files/lshw-${pkgver}.tar.gz
                lshw-gtk.desktop
                lshw-gtk.xpm
                scsi.patch)
md5sums=('8bed55768c5cb2ceff062b882a687e9b' 'f7e7551c68598782c5251475dea47130' '5ea8cd43ff46b810e8250b7a94ceec17' 'd3cb79f481b36447d0212ac2ccaf19fc')

build() {

    cd "$srcdir/lshw-${pkgver}"
    
    patch -Np1 -i $srcdir/scsi.patch || return 1
    
	msg "Starting make..."
    make || return 1
    make DESTDIR=$pkgdir install

    # requires glade-2
    make gui || return 1
    make DESTDIR=$pkgdir install-gui
    
    # Place the desktop file and logo
    mkdir $pkgdir/usr/share/applications
    mkdir $pkgdir/usr/share/pixmaps
    cp $srcdir/lshw-gtk.desktop $pkgdir/usr/share/applications
    cp $srcdir/lshw-gtk.xpm $pkgdir/usr/share/pixmaps
    
    # Default gui is gtk-lshw, change that to lshw-gtk for better naming convention
    mv $pkgdir/usr/sbin/gtk-lshw $pkgdir/usr/sbin/lshw-gtk
   
}
