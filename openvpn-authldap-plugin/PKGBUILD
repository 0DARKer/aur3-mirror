pkgname=openvpn-authldap-plugin
pkgver=2.0.3
_openvpnver=2.1_rc19
pkgrel=1
pkgdesc="LDAP authentication plugin for openvpn"
arch=(i686 x86_64)
url="http://code.google.com/p/openvpn-auth-ldap/"
license=('BSD')
depends=()
makedepends=()
options=()
backup=(etc/openvpn/plugins/auth-ldap.conf)
source=(http://openvpn-auth-ldap.googlecode.com/files/auth-ldap-$pkgver.tar.gz
	http://openvpn.net/release/openvpn-${_openvpnver}.tar.gz)
md5sums=('03dedc57efc8d4fc2ffe2c014121299d'
         'ba2ee667a8b7606b125b7d32f47ca578')

build() {
  cd "$srcdir/auth-ldap-$pkgver"

  [ $NOEXTRACT -eq 1 ] || ./configure --prefix=/usr --with-openvpn=$srcdir/openvpn-${_openvpnver}
  make || return 1

  install -Dm755 src/openvpn-auth-ldap.so $pkgdir/usr/lib/openvpn/openvpn-auth-ldap.so && \
  install -Dm0644 README $pkgdir/usr/share/doc/$pkgname/README && \
  install -Dm0644 auth-ldap.conf $pkgdir/etc/openvpn/plugins/auth-ldap.conf && \
  install -Dm0644 LICENSE $pkgdir/usr/share/licenses/$pkgname/LICENSE
}
