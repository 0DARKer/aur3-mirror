# Maintainer: Igor Borges <igor@borges.me>

pkgname=mmex-git
pkgver=1.1.c3111
pkgrel=2
pkgdesc="Money Manager Ex, git version"
arch=('x86_64')
url="http://www.moneymanagerex.org/"
license=('GPL')
groups=()
depends=('wxsqlite3' 'cppunit')
makedepends=('git' 'gettext')
optdepends=()
provides=('mmex')
conflicts=('mmex' 'mmex-svn')
replaces=()
backup=()
options=(!strip)
source=()
noextract=()
md5sums=() #generate with 'makepkg -g'

build() {
  cd "${srcdir}"
  git clone --depth 1 https://github.com/moneymanagerex/moneymanagerex.git
  
  cd "${srcdir}/moneymanagerex/"
  ./configure

  git clone --depth 1 https://github.com/moneymanagerex/wxsqlite3.git "${srcdir}/moneymanagerex/lib/wxsqlite3/"
  git clone --depth 1 https://github.com/moneymanagerex/cajun.git "${srcdir}/moneymanagerex/src/cajun"
  git clone --depth 1 https://github.com/moneymanagerex/html-template.git "${srcdir}/moneymanagerex/src/html-template"
  cp -R "${srcdir}/moneymanagerex/src/html-template/"* "${srcdir}/moneymanagerex/src/"
  git clone --depth 1 https://github.com/moneymanagerex/mongoose.git "${srcdir}/moneymanagerex/src/mongoose"
  git clone --depth 1 https://github.com/moneymanagerex/LuaGlue.git "${srcdir}/moneymanagerex/src/LuaGlue"
  cp -R "${srcdir}/moneymanagerex/src/LuaGlue/include/LuaGlue/"* "${srcdir}/moneymanagerex/src/LuaGlue/"
  git clone --depth 1 https://github.com/moneymanagerex/route.git "${srcdir}/moneymanagerex/src/route"
  git clone --depth 1 https://github.com/moneymanagerex/csv-parser.git "${srcdir}/moneymanagerex/src/csv_parser"
  cp -R "${srcdir}/moneymanagerex/src/csv_parser/include/csv_parser/"* "${srcdir}/moneymanagerex/src/csv_parser/"
  cp -R "${srcdir}/moneymanagerex/src/html-template/"* "${srcdir}/moneymanagerex/3rd/cgitemplate/"
  cp -R "${srcdir}/moneymanagerex/src/mongoose/"* "${srcdir}/moneymanagerex/3rd/mongoose/"
  cp -R "${srcdir}/moneymanagerex/src/csv_parser/"* "${srcdir}/moneymanagerex/3rd/csv-parser/"
  cp -R "${srcdir}/moneymanagerex/src/route/"* "${srcdir}/moneymanagerex/3rd/route/"
  git clone --depth 1 https://github.com/nnnick/Chart.js.git "${srcdir}/moneymanagerex/3rd/Chart.js"
  git clone --depth 1 https://github.com/FVANCOP/ChartNew.js.git "${srcdir}/moneymanagerex/3rd/ChartNew.js"
  wget http://www.kryogenix.org/code/browser/sorttable/sorttable.js -o "${srcdir}/moneymanagerex/3rd/sorttable.js/sorttable.js"
  make

  cd "${srcdir}/moneymanagerex/po"
  make
}

package() {
  cd "${srcdir}/moneymanagerex"
  make DESTDIR="$pkgdir" install
}

# vim:set ts=2 sw=2 et: