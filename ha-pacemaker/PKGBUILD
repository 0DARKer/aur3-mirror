# Maintainer: Lucio zara <pennegaatgmaildotcom>

pkgname=ha-pacemaker
pkgver=1.0.8
pkgrel=3
pkgdesc="Pacemaker is an cluster resource manager"
arch=('i686' 'x86_64')
url="http://linux-ha.org/wiki/Pacemaker"
license=('GPL')
makedepends=('')
depends=('ha-heartbeat' 'libxslt')
source=("http://hg.clusterlabs.org/pacemaker/stable-1.0/archive/Pacemaker-${pkgver}.tar.bz2")
md5sums=('088569ca893fe9f2239b68abe2856132')
options=('!libtool' 'docs')

build() {
	unset LDFLAGS
	CLUSTER_USER=hacluster
	CLUSTER_GROUP=haclient
	PREFIX=/usr
	PREFIXETC=/etc
	PREFIXINIT=${PREFIXETC}/rc.d
	PREFIXVAR=/var
	LCRSODIR=${PREFIX}/lib/lcrso
	cd "${srcdir}/Pacemaker-1-0-Pacemaker-${pkgver}"
	./autogen.sh
	./configure \
		--enable-fatal-warnings=no \
		--prefix=${PREFIX} \
		--localstatedir=${PREFIXVAR} \
		--sysconfdir=${PREFIXETC} \
		--with-initdir=${PREFIXINIT} \
		--with-lcrso-dir=${LCRSODIR}
	make || return 1
	make DESTDIR="${pkgdir}" install || return 1
}