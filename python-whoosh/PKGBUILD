# Maintainer: Steven Allen <steven@stebalien.com>
# Contributor: Piotr Husiaty≈Ñski <phusiatynski@gmail.com>

pkgname=python-whoosh
pkgver=2.0.0
pkgrel=1
pkgdesc="Fast, pure-Python full text indexing, search, and spell checking library"
license=("BSD")
url="http://bitbucket.org/mchaput/whoosh/wiki/Home"
depends=('python2')
makedepends=('python2-distribute' 'python2-nose')
source=(http://pypi.python.org/packages/source/W/Whoosh/Whoosh-$pkgver.tar.gz fix_test_wordfiles.diff)
arch=('any')
md5sums=('0df8878a29240f70229eaaec8591cfc0'
         '80234ee2f1e57c8e676c92d4b527f71d')

check() {
  cd "${srcdir}/Whoosh-$pkgver"
  patch -Np0 -i "${srcdir}/fix_test_wordfiles.diff"
  python2 setup.py test
}

package() {
  cd "${srcdir}/Whoosh-$pkgver"
  python2 setup.py install --root="${pkgdir}" --optimize=1

  install -D -m644 LICENSE.txt "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
}
