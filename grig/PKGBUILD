# Maintainer: Bob Finch <w9ya@qrparci.net>
# Contributor: Vitaliy Berdinskikh <skipper13@root.ua> aka UR6LAD
pkgname=grig
pkgver=0.7.2
pkgrel=2
pkgdesc="Rig control (cat) program"
arch=('i686' 'x86_64')
url="http://groundstation.sourceforge.net/grig/"
license=('GPL')
depends=('hamlib' 'gtk2')
source=(http://downloads.sourceforge.net/groundstation/$pkgname-$pkgver.tar.gz
	$pkgname.desktop)
md5sums=('c83fd4b8b32ca84a4021e8afad6f9b64'
         'daa38457a1822c22cc221bce1541bce4')
sha1sums=('7b5f1e7f77a8b8907a77ba11a1e17c2eaff884f2'
          '41ab67891b9eb45856c342505997a7e289adc71b')

build() {
	mkdir -p $pkgdir/usr/share/applications

	cd $srcdir
	install -m644 grig.desktop $pkgdir/usr/share/applications || return 1

	cd $pkgname-$pkgver
	sed -i -e "s:GtkTooltips:GtkTooltip:" src/grig-gtk-workarounds.c
	sed -i -e "s:GtkTooltips:GtkTooltip:" src/rig-gui-vfo.c
	sed -i -e "s:GtkTooltips:GtkTooltip:" src/rig-gui-buttons.c
	sed -i -e "s:GtkTooltips:GtkTooltip:" src/rig-gui-levels.c
	./configure --prefix=/usr
	make || return 1
	make DESTDIR=$pkgdir install || return 1
	# delete text files
	rm -r $pkgdir/usr/share/$pkgname || return 1
}
