# Maintainer: Spider.007 <aur@spider007.net>

pkgname=graylog2-web-interface
pkgver=0.20.0
pkgrel=1
pkgdesc="Web interface for Graylog2, an open source syslog implementation"
arch=(any)
url="http://graylog2.org"
license=('GPL')
depends=(java-runtime)
source=(
	https://github.com/Graylog2/$pkgname/releases/download/$pkgver/$pkgname-$pkgver.tgz
	graylog2-web-interface.service
	graylog2-web-interface.conf
)
backup=(etc/webapps/$pkgname/$pkgname.conf)
options=(!strip)
sha256sums=('78c5747180f59c2b7742f1d943e36fbbfaace23d120737b15a44b24cf4618a87'
            'e1b43bc17d320362cef61c2f7873233acd641d320a5315fe2d7666efea64b9b6'
            '597c724c86b3e2639c1787067f2243e6c26181ad159604e812a54071171bb1d2')

package() {
	cd "$srcdir/$pkgname-$pkgver"

	install -Dm644 "$srcdir/graylog2-web-interface.conf" "$pkgdir/etc/conf.d/graylog2-web-interface.conf"
	install -Dm644 "conf/$pkgname.conf" "$pkgdir/etc/webapps/$pkgname/$pkgname.conf"

	install -dm755 "$pkgdir/usr/lib/$pkgname"
	cp lib/* "$pkgdir/usr/lib/$pkgname"

	install -dm755 "$pkgdir/usr/share/doc/$pkgname"
	cp -R share/doc/* "$pkgdir/usr/share/doc/$pkgname"
}
