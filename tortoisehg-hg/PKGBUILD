# Maintainer: Adam Russell <adamlr6+arch@gmail.com>
# Contributor: halim <sagikliwon@gmail.com>
# Contributor: Alexey "Mr.Cat" Bakhirkin <abakhirkin(at)gmail.com>
# Contributor: Andr√© Klitzing <aklitzing () online () de>
# Contributor: Yumi Nanako <yumileroy [at] yahoo.com>
pkgname=tortoisehg-hg
pkgver=11167
pkgrel=1
pkgdesc="Mercurial GUI front end"
arch=('i686' 'x86_64')
url="http://tortoisehg.bitbucket.org/"
license=('GPL2')
depends=('python2' 'mercurial>=1.6' 'python2-qt>=4.6' 'python2-qscintilla')
makedepends=('setuptools')
optdepends=('python2-iniparse: ini file support'
            'python-pygments: syntax highlighting'
            'python-nautilus: Python binding for Nautilus components')
provides=('tortoisehg')
conflicts=('tortoisehg-thg-stable-hg' 'tortoisehg-hgtk' 'tortoisehg-stable-hg' 'tortoisehg-crew-hg')
source=('config.py')
md5sums=('2e04ba5fdcb361cd68e9ef7ed4c987a5')

_hgroot="https://bitbucket.org/tortoisehg"
_hgrepo="thg"

build() {
	cd ${srcdir}/${_hgrepo}
	hg update -C stable || return 1
	cp ${startdir}/config.py ${srcdir}/${_hgrepo}/tortoisehg/util
	python2 setup.py build || return 1
}

package() {
	cd ${srcdir}/${_hgrepo}
	python2 setup.py install --root=${pkgdir} || return 1
	install -Dm 644 "contrib/mergetools.rc" "${pkgdir}/etc/mercurial/hgrc.d/thgmergetools.rc" || return 1
}
