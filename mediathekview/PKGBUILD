# Maintainer: fordprefect <fordprefect@dukun.de>
pkgname=mediathekview
pkgver=8
pkgrel=1
pkgdesc="java-based downloader for several german broadcasting media centers (mediatheken), including ARD, ZDF, Arte, 3Sat, SWR, BR, MDR, NDR, WDR, HR, RBB, ORF, SF"
url="http://zdfmediathk.sourceforge.net/"
arch=('any')
license=('GPL3')
depends=('java-runtime' 'flvstreamer' )
optdepends=('ffmpeg' 'vlc')
source=("MediathekView_8.zip::http://sourceforge.net/projects/zdfmediathk/files/Mediathek/Mediathek%208/MediathekView_8.zip/download")
md5sums=('bafc17a229f17fb6f2a260f426d0de4e')

package() {
    # prepare environment
    mkdir -p "$pkgdir/opt/mediathekview" "$pkgdir/usr/bin"
    cd "$srcdir"
    
    # copy files and folders
    cp -r lib Icons "$pkgdir/opt/mediathekview/"
    install -m644 MediathekView.jar "$pkgdir/opt/mediathekview/"
    install -m644 MediathekView.ico "$pkgdir/opt/mediathekview/"

    # possibly unnecessary
    cp -r Anleitung "$pkgdir/opt/mediathekview/"

    # enable running start script from /usr/bin
    sed -i "s#./MediathekView.jar#/opt/mediathekview/MediathekView.jar#" MediathekView__Linux.sh
    install -m755 MediathekView__Linux.sh "$pkgdir/usr/bin/mediathekview"
}
