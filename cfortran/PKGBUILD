##参照了gentoo-portage###
##Contributor: T.Cunly

pkgname=cfortran
pkgver=4.4_13
pkgrel=1
pkgdesc="Header file allowing to call Fortran routines from C and C++ " 
license=(GPL)
arch=('i686' 'x86_64')
url="http://www-zeus.desy.de/~burow/cfortran/"
install=(cfortran.install)
depends=(gcc) 

###用debian的源码包和补丁
NETADDRESS=http://ftp.heanet.ie/debian/pool/main/c/cfortran/
ORIGINFILE=cfortran_4.4.orig.tar.gz
PATCHFILE=cfortran_4.4-13.diff.gz

source=("${NETADDRESS}/${ORIGINFILE}" "${NETADDRESS}/${PATCHFILE}") 


build() {
    cd $startdir/src
    patch -p0 <cfortran_4.4-13.diff
    
    INCLUDEDIR=$startdir/pkg/usr/local/include/cfortran
    EXAMPLEDIR=$startdir/pkg/usr/local/examples/cfortran
    DOCDIR=$startdir/pkg/usr/local/doc/cfortran
    
    [  -d $INCLUDEDIR ] || mkdir -p $INCLUDEDIR
    [  -d $EXAMPLEDIR  ] || mkdir -p $EXAMPLEDIR
    [  -d $DOCDIR ]  || mkdir -p $DOCDIR
        
    cd $startdir/src/cfortran-4.4
    cp cfortran.h $INCLUDEDIR/
       
    cp cfortran.doc cfortran.html index.htm cfortest.c cfortest.f $DOCDIR/
    
    tar xfz cfortran.examples.tar.gz
    cp -r eg/* $EXAMPLEDIR/
}
 
