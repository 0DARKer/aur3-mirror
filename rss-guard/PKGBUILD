# Maintainer: Martin Rotter <rotter.martinos@gmail.com>

pkgname=rss-guard
pkgver=0.9
pkgrel=2
pkgdesc='A (very) tiny RSS & ATOM reader developed using Qt framework.'
arch=('i686' 'x86_64')
url="http://code.google.com/p/rss-guard/"
license=('GPL')
depends=(qt curl qtwebkit)
makedepends=(git make)

gitname=rss-guard
gitroot=https://Rotter.Martinos@code.google.com/p/rss-guard/

build() {
  cd "$srcdir"
  msg "Cloning rss-guard repository..."
  
  if [ -d $gitname ] ; then

    cd $gitname && git pull origin

    msg "The local files are updated..."

  else

    git clone $gitroot

  fi

  msg "Git checkout done or server timeout..."

  cd "$srcdir/$gitname"

  msg "Preparing files with qmake..."
  qmake -makefile -Wall -recursive
  qmake *.pro

  msg "Compiling files..."
  make
  msg "All files were successfully compiled..."
}

package() {
  cd "$pkgdir"
  mkdir "usr"
  cd "usr"
  mkdir "bin"
  cp "$srcdir/rss-guard/bin/RSSGuard" "$pkgdir/usr/bin/RSSGuard"
}
 
