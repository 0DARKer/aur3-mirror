# Maintainer: garion < garion @ mailoo.org >

pkgname=iscan-plugin-gt-f670
pkgver=2.1.2
pkgrel=1
pkgdesc="iscan plugin for Epson Perfection Photo V200 scanners and similar"
arch=('i686' 'x86_64')
url="http://avasys.jp/eng/linux_driver/"
license=('custom')
depends=('iscan')
makedepends=('rpmextract')
install=gt-f670.install

if [ "$CARCH" = "i686" ]; then
  source=(http://linux.avasys.jp/drivers/iscan-plugins/$pkgname/$pkgver/$pkgname-$pkgver-1.i386.rpm)
  _ARCH=i386
  md5sums=('f53dec00730d3d28051edd1fb869de22')
elif [ "$CARCH" = "x86_64" ]; then
  source=(http://linux.avasys.jp/drivers/iscan-plugins/$pkgname/$pkgver/$pkgname-$pkgver-1.x86_64.rpm)
  _ARCH=x86_64
  md5sums=('8bb27b1f56823d1ec896d4ae7e3ba8f6')
fi

build(){
  cd $srcdir
  rpmextract.sh $pkgname-$pkgver-1.$_ARCH.rpm
}

package(){
  if [ "$CARCH" = "i686" ]; then
    _lib='lib'
  elif [ "$CARCH" = "x86_64" ]; then
    _lib='lib64'
  fi
  install -d $pkgdir/usr/lib/iscan
  install -m755 $srcdir/usr/$_lib/iscan/libesint7A.so.2.0.1 $pkgdir/usr/lib/iscan/
  install -m755 $srcdir/usr/$_lib/iscan/libesint7A.so.2 $pkgdir/usr/lib/iscan/
  install -m755 $srcdir/usr/$_lib/iscan/libesint7A.so $pkgdir/usr/lib/iscan/
  install -d $pkgdir/usr/share/iscan
  install -m644 $srcdir/usr/share/iscan/esfw7A.bin $pkgdir/usr/share/iscan
}
