# Maintainer: Ingo Gottwald <in dot gottwald at gmail dot com>
# Contributor : speps <speps at aur dot archlinux dot org>
# Contributor: Andrea Scarpino <andrea@archlinux.org>

pkgname=python2-sipsimple
pkgver=1.4.2
pkgrel=1
pkgdesc="Python SDK for development of SIP end-points"
license=('custom:MIT' 'LGPL')
arch=('i686' 'x86_64')
url="http://download.ag-projects.com/SipClient"
depends=('alsa-lib' 'util-linux' 'python2-dateutil'
         'python2-dnspython' 'python2-eventlib' 'python2-msrplib' 'python2-xcaplib')
makedepends=('cython2' 'subversion')
options=('!makeflags')
source=("http://download.ag-projects.com/SipClient/python-sipsimple-$pkgver.tar.gz"
		"setup_pjsip.py.patch"
		)
sha256sums=(
		'f6e6de7ab5f20e8ae08966b8811462e4271833db4f7fbab58ffba4e5c07ab114'
		'6740382be3689a55ab9bbaeda5560cab9f95a64b5c763c4e820206b8e412ae5f'
		)

build() {
  cd "$srcdir/python-sipsimple-$pkgver"
  patch setup_pjsip.py ../../setup_pjsip.py.patch
  python2 setup.py build_ext --pjsip-clean-compile
}

package() {
  cd "$srcdir/python-sipsimple-$pkgver"
  python2 setup.py install --root="$pkgdir" --optimize=1

  # license
  install -Dm644 LICENSE \
    "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
}
