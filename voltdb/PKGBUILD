# Maintainer: Daniel YC Lin <dlin.tw at gmail>

pkgbase=voltdb
pkgname=('voltdb')
pkgdesc="An in-memory database with pre-compiled Java stored procedures"
pkgver=3.2.1
pkgrel=2
arch=('x86_64')
license=('GPL3')
url="http://voltdb.com/"
depends=(gcc-libs util-linux python2 java-runtime)

options=('!libtool')
source=(http://voltdb.com/downloads/technologies/server/LINUX-voltdb-${pkgver}.tar.gz env.sh)

build() {
	cd voltdb-${pkgver}
	sed -i '1 s/python/python2/' lib/python/voltdbclient.py
	sed -i '1 s/python/python2/' bin/voltadmin
	sed -i '1 s/python/python2/' tools/volt
	sed -i '1 s/python/python2/' lib/python/XMLUtils.py
	sed -i '1 s/python/python2/' lib/python/Query.py
}
package() {
	mkdir -p $pkgdir/opt/voltdb
	cp env.sh $pkgdir/opt/voltdb
	cp -a voltdb-${pkgver}/* $pkgdir/opt/voltdb
}
sha1sums=('eb00e800eefe3ae0685ea568bd39f04c08cad36f'
          '460acb687fa131917e04b5fd28f812b49549aa3a')
