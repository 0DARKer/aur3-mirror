# Maintainer: jose <jose1711 [at] gmail (dot) com>

pkgname=racer
pkgver=1.1.1
pkgrel=3
pkgdesc="2D car racing game"
arch=('i686')
url="http://hippo.nipax.cz/download.cz.php?id=64"
license=("GPL-2")
depends=('allegro4' 'libjpeg')
source=("http://hippo.nipax.cz/src/${pkgname}-${pkgver}.tar.gz")
md5sums=('7f2c8982e3960d0282117b57ac749de1')
install=('racer.install')

build() {
cd $srcdir/${pkgname}-${pkgver}/src
make
}

package() {
cd $srcdir/${pkgname}-${pkgver}/src
mkdir -p $pkgdir/usr/share/racer/{data,gfx,maps} $pkgdir/usr/bin
install -D -m755 racer $pkgdir/usr/share/racer/racer
cd ../data
ln -s /usr/share/racer/racer ./racer
install -D -m644 data/* $pkgdir/usr/share/racer/data
install -D -m644 gfx/* $pkgdir/usr/share/racer/gfx
install -D -m644 maps/* $pkgdir/usr/share/racer/maps
cd ../misc
install -D -m644 racer.6.gz $pkgdir/usr/share/man/man6/racer.6.gz
install -D -m644 racer.xpm $pkgdir/usr/share/pixmaps/racer.xpm
install -D -m644 racer.desktop $pkgdir/usr/share/applications/racer.desktop

(echo "#!/bin/bash
cd /usr/share/racer
./racer \"\$@\"") > $pkgdir/usr/bin/racer
chmod 755 $pkgdir/usr/bin/racer
}
