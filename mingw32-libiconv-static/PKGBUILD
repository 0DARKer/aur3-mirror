# Maintainer: schalaalexiazeal@gmail.com

pkgname=mingw32-libiconv-static
pkgver=1.14
pkgrel=1
arch=(any)
pkgdesc="libiconv (mingw32)"
depends=(mingw32-runtime)
makedepends=(mingw32-gcc)
license=(LGPL)
url="http://www.gnu.org/software/libiconv/"
conflicts=('mingw32-libiconv')
source=(http://ftp.gnu.org/pub/gnu/libiconv/libiconv-$pkgver.tar.gz)
md5sums=('e34509b1623cec449dfeb73d7ce9c6c6')
options=(!strip !buildflags)

build()
{
  cd $srcdir/libiconv-$pkgver
LDFLAGS=''
  ./configure --prefix=/usr/i486-mingw32 --host=i486-mingw32 --enable-static --disable-shared --disable-nls || return 1
  make || return 1
  make install DESTDIR=$pkgdir || return 1

  cd $pkgdir
  rm -rf usr/i486-mingw32/share
  rm usr/i486-mingw32/lib/charset.alias
}
