# Contributor: fauno <fauno@kiwwwi.com.ar>
pkgname=statusnet
pkgver=0.9.6
pkgrel=1
pkgdesc="StatusNet is a Free and Open Source microblogging platform."
arch=('any')
url="http://status.net"
license=('AGPL')
groups=('social-web')
depends=('php>=5.2.3' 'mysql>=5' 'php-gd' 'php-curl' 'php-gmp')
optdepends=('memcache: for caching database queries'
            'php-xcache: for accelerating PHP code execution'
            'php-ldap: for the LDAP plugin')
provides=()
options=()
source=("http://status.net/${pkgname}-${pkgver}.tar.gz"
        statusnet.install)
install=statusnet.install

build() {
  cd "$srcdir/$pkgname-${pkgver}"

  etc_dir="${pkgdir}/etc/webapps/${pkgname}"
  usr_dir="${pkgdir}/usr/share/webapps/${pkgname}"

  install -d ${usr_dir}
  install -d ${etc_dir}
  install -d ${pkgdir}/usr/share/doc/${pkgname}/
  install -d ${pkgdir}/usr/share/licenses/${pkgname}

  install -m644 ./{config.php,htaccess}.sample \
      ${pkgdir}/usr/share/doc/${pkgname}/

  install -m644 ./{README,EVENTS.txt,lighttpd.conf.example} \
      ${pkgdir}/usr/share/doc/${pkgname}/

  install -m644 COPYING ${pkgdir}/usr/share/licenses/${pkgname}/

  rm -f *.sample README COPYING README EVENTS.txt *.example

  cp -ra * ${usr_dir}/
  chmod a+w ${usr_dir}/
  chmod a+w ${usr_dir}/{avatar,background,file}
} 
md5sums=('48c379190754f8cc52deb9cb8f4116c6'
         '24991580625ec177c144ed5acdbe6dbc')
