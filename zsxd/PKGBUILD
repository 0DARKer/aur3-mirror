# Maintainer: BenObiWan <benobiwan @t gmail dot com>
# Contributor: Sam101 <zoetrem@gmail.com>
# Contributor: BenObiWan <benobiwan @t gmail dot com>
pkgname=zsxd
pkgver=1.1
pkgrel=1
pkgdesc="Un jeu amateur Zelda humoristique libre et gratuit inspirÃ© de Zelda en 2D."
arch=('i686' 'x86_64')
url="http://www.zelda-solarus.com/"
license=('GPL/custom')
groups=
provides=('zsxd')
depends=('lua' 'sdl' 'sdl_image' 'sdl_ttf' 'physfs' 'openal' 'libvorbis' 'libmodplug')
makedepends=('cmake' 'gcc' 'zip')
conflicts=()
replaces=()
backup=()
source=(http://www.zelda-solarus.com/downloads/zsxd/zsxd-1.1-src.tar.gz)
md5sums=('63e122e64d3bcdbb0d30952bba6bc9c3')
 
build() {
  cd ${srcdir}/${pkgname}-${pkgver}
  mkdir -p ${pkgdir}/usr/share/games/zsxd

  cmake -D CMAKE_INSTALL_PREFIX=${srcdir}/${pkgname}-${pkgver} -D DATAPATH=${srcdir}/${pkgname}-${pkgver}/quests/zsxd .
  make || return 1
  make install

  cp ${srcdir}/${pkgname}-${pkgver}/bin/solarus $pkgdir/usr/share/games/zsxd/solarus
  cp ${srcdir}/${pkgname}-${pkgver}/quests/zsxd/data/data.solarus ${pkgdir}/usr/share/games/zsxd/data.solarus

  mkdir -p ${pkgdir}/usr/bin
  echo -e "#!/bin/bash\n/usr/share/games/zsxd/solarus -datapath=/usr/share/games/zsxd" > ${pkgdir}/usr/bin/zsxd

  chmod 755 ${pkgdir}/usr/bin/zsxd
}
