# Maintainer: Robert McCathie <archaur at rmcc dot com dot au>
# Contributor: Juraj Misur <juraj.misur@gmail.com>

pkgname=capt
pkgver=2.00E
pkgrel=1
pkgdesc="Canon CAPT Printer Driver for Linux"
arch=('i686')
url="http://support-au.canon.com.au/contents/AU/EN/0900772408.html"
license=('custom')
install=capt.install
depends=('libxml2' 'popt')
makedepends=('rpmextract')
optdepends=('gtk2: for gui')
source=('http://gdlp01.c-wss.com/gds/4/0900007724/08/CAPT_Printer_Driver_for_Linux_V200_uk_EN.tar.gz' 'ccpd' 'how-to.txt')
md5sums=('73576afc82822ed3dc6a28e91ba4692a' 'dc4312dd8070d3b1b4231d47f4383020' '2cdb0e8e5d3c21b389cad3b3581a13ec')
build() {
	tar -zxf CAPT_Printer_Driver_for_Linux_V200_uk_EN.tar.gz
	cd $startdir/pkg
	rpmextract.sh $startdir/src/CAPT_Printer_Driver_for_Linux_V200_uk_EN/Driver/RPM/cndrvcups-capt-2.00-2.i386.rpm 2> /dev/null
	rpmextract.sh $startdir/src/CAPT_Printer_Driver_for_Linux_V200_uk_EN/Driver/RPM/cndrvcups-common-2.00-2.i386.rpm 2> /dev/null
	mv $startdir/pkg/etc/init.d $startdir/pkg/etc/rc.d
	cp $startdir/ccpd $startdir/pkg/etc/rc.d
	chmod 755 $startdir/pkg/etc/rc.d/ccpd
	mkdir $startdir/pkg/var
	mkdir $startdir/pkg/var/ccpd
	mkdir $startdir/pkg/var/captmon
	mkdir $startdir/pkg/usr/share/licenses
	mkdir $startdir/pkg/usr/share/licenses/$pkgname
	cp $startdir/src/CAPT_Printer_Driver_for_Linux_V200_uk_EN/Doc/LICENSE-captdrv-2.00E.txt $startdir/pkg/usr/share/licenses/$pkgname/
}
