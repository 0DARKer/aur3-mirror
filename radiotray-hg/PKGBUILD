# Contributor: Yarema aka Knedlyk <yupadmin@gmail.com>
_pkgname=radiotray
pkgname=${_pkgname}-hg
pkgver=505
pkgrel=1
pkgdesc="An online radio streaming player that runs on a Linux system tray."
arch=(any)
url="http://radiotray.wordpress.com/"
license=(GPL)
depends=('gstreamer0.10-base-plugins' 'gstreamer0.10-python' 'pygtk' \
'python2-notify' 'python2-xdg' 'python2-dbus' 'gstreamer0.10-good-plugins' \
'python2-gobject' 'python2-lxml')
optdepends=('gstreamer0.10-bad-plugins' 'gstreamer0.10-ugly-plugins' 'gstreamer0.10-ffmpeg')
source=('hg+https://bitbucket.org/carlmig/radio-tray'
	encoding.patch)
makedepends=('mercurial')
provides=(radiotray)
conflicts=('radiotray' 'radiotray-svn')

name=radio-tray

pkgver() {
    cd "$srcdir/$name"
    hg identify -n
}

build() {
	cd $srcdir/$name/src
	patch -p4 < $srcdir/encoding.patch
}

package() {

	cd $srcdir/$name
	python2 setup.py install --root=$pkgdir/ --optimize=1

	chmod +x $pkgdir/usr/bin/radiotray
	find $pkgdir -perm 600 -exec chmod 644 {} \;
}

md5sums=('SKIP'
	'4c6862df37e0fcb304d9f0b801f85332')
