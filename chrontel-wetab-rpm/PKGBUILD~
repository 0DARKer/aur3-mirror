# Maintainer: Somebody <somebody[at]foo[dot]tld>
pkgname=chrontel-wetab-rpm
pkgver=1.0_11203.1.4.2
pkgrel=1
pkgdesc="HDMI-drivers for the WeTab and similar devices, extracted from the source-rpm files provided by 4tiitoo"
url="http://update.tiitoo.com/source/packages/"

arch=('x86_64')
license=('custom:publicdomain' 'qt')
makedepends=('rpmextract')

_rpmname="chrontel-1.0-11203.1.4.2.wetab.src.rpm"
_rpmextractname="chrontel-1.0"
source=("Makefile" "http://update.tiitoo.com/source/packages/$_rpmname")
noextract=($_rpmname)
md5sums=('f30a85eab8eb05853f5a7abee11afa39' '20c65d65452e8f4bab2c26a4de63fa38')

build() {
  cd "${srcdir}"
  rpmextract.sh "${_rpmname}"
  tar xvjf "${_rpmextractname}.tar.bz2"
  cp "Makefile" "${_rpmextractname}"
  cd "${_rpmextractname}"
  make
}

package() {
  cd "${pkgdir}"
  mkdir -p usr/bin lib/firmware/chrontel
  cp "${srcdir}/${_rpmextractname}/tiitoo-hdmi-daemon" "${pkgdir}/usr/bin"
  cp "${srcdir}/${_rpmextractname}/resources/fw7036.bin" "${pkgdir}/lib/firmware/chrontel"
}
