# Contributor: Fazlul Shahriar <fshahriar@gmail.com>
pkgname=tinyscheme
pkgver=1.39
pkgrel=1
pkgdesc="A lightweight Scheme interpreter that implements a large subset of R5RS."
arch=('i686' 'x86_64')
url="http://tinyscheme.sourceforge.net/"
license=('BSD')
depends=('glibc')
makedepends=()
source=("http://downloads.sourceforge.net/project/tinyscheme/tinyscheme/$pkgver/tinyscheme$pkgver.zip")
md5sums=('55523524236ba546fdaf5f6b96a49a2b')

build() {
  cd "$srcdir/tinyscheme$pkgver"

  sed -i '/^# Cygwin/,$s/^\(PLATFORM_FEATURES\)/#\1/' makefile
  sed -i 's;^\(# define InitFile\).*$;\1 "/usr/lib/tinyscheme/init.scm";' scheme.c
  make all || return 1
  install -Dm755 scheme $pkgdir/usr/bin/tinyscheme
  install -Dm755 libtinyscheme.so $pkgdir/usr/lib/libtinyscheme.so
  install -Dm644 libtinyscheme.a $pkgdir/usr/lib/libtinyscheme.a
  install -Dm644 init.scm $pkgdir/usr/lib/tinyscheme/init.scm
  install -Dm644 COPYING $pkgdir/usr/share/licenses/tinyscheme/COPYING
}

# vim:set ts=2 sw=2 et:
