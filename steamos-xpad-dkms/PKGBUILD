pkgname='steamos-xpad-dkms'
pkgver='0.1'
pkgrel='1'
pkgdesc="xpad kernel module included with Valve's SteamOS"
arch=('any')
url='https://launchpad.net/~mdeslaur/+archive/steamos'
license=('GPL2')
install="${pkgname}.install"
depends=('dkms')
optdepends=('linux-headers: Build the module against Arch kernel'
            'linux-lts-headers: Build the module against LTS Arch kernel')
source=("https://launchpad.net/~mdeslaur/+archive/steamos/+files/${pkgname}_${pkgver}.orig.tar.gz"
        "steamos-xpad-dkms.dkms")
sha512sums=('d094966b50c27ccaa0d168547951ece6cd7cbd4683b83e4a432f4c73b4fdabf186e896c0ec16db21e761d37e04699b9d27e5120694a517a43040fee8ea46179a'
            'cf949b873912c892007602c66350f47bf6030016e113489c09eaf0ccd6c4bb63d60e98ae7b62aec2e477ad258f0a535e6d17d104f01a878c72dbb023c23dd08b')

package() {
    install -d "${pkgdir}/usr/src"
    cp -rf "${srcdir}/${pkgname}-${pkgver}" "${pkgdir}/usr/src"
    install -T "${srcdir}/steamos-xpad-dkms.dkms" "${pkgdir}/usr/src/${pkgname}-${pkgver}/dkms.conf"
}