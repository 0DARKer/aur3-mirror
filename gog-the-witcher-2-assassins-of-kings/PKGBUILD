# Maintainer : Andr√© Fettouhi <a.fettouhi@gmail.com>

pkgname=gog-the-witcher-2-assassins-of-kings
pkgver=1.0.0.4
patchver=1.0.0.4
pkgrel=1
pkgdesc="The second installment in the RPG saga about the Witcher, Geralt of Rivia. GOG version (Linux installer, English)."
arch=("i686" "x86_64")

if [[ $CARCH == i686 ]]; then
  depends=(sdl2 freetype2 curl sdl2_image gnutls libcurl-gnutls gtk2)
else
  depends=(lib32-sdl2 lib32-freetype2 lib32-curl lib32-sdl2_image lib32-gnutls lib32-libcurl-gnutls lib32-gtk2)
fi

url="http://www.gog.com/game/the_witcher_2"
license=("custom")
groups=("games")
source=("gog_the_witcher_2_assassins_of_kings_1.0.0.3.tar.gz" "gog_the_witcher_2_assassins_of_kings_patch_${patchver}.tar.gz" "gog-the-witcher-2-assassins-of-kings" "libcurl.so.4")
sha256sums=('580a44afee3ea9ff30db81970c92cba3272ba547592a55f78ec09c16b3e10753'
            '4699cd0318cc82ccd53952662d8518ec3e9e4489c3e7b1d561411165ecd79ab5'
            'ece02677bb029e69f8248018873fbfec34f9f6eb43f42966842f4f9ac80e83f0'
            'c59269b471437df2bded9b116b2319cb83a0b46dccac3001fe3c211046a78fd4')
#options=('!strip')
PKGEXT=.pkg.tar

package() {
  mkdir -p "${pkgdir}"/opt/gog/the-witcher-2-assassins-of-kings/
  cp -r "${srcdir}"/The\ Witcher\ 2\ Assassins\ Of\ Kings/* "${pkgdir}"/opt/gog/the-witcher-2-assassins-of-kings/
  cp -r "${srcdir}"/The\ Witcher\ 2\ Assassins\ Of\ Kings\ Patch\ ${patchver}/content/* "${pkgdir}"/opt/gog/the-witcher-2-assassins-of-kings/game/
  install -Dm644 "${srcdir}"/libcurl.so.4 "${pkgdir}"/opt/gog/the-witcher-2-assassins-of-kings/game/
  install -Dm644 "${srcdir}"/The\ Witcher\ 2\ Assassins\ Of\ Kings/support/gog-the-witcher-2-assassins-of-kings-primary.desktop "${pkgdir}"/usr/share/applications/gog-the-witcher-2-assassins-of-kings.desktop
  install -Dm644 "${srcdir}"/The\ Witcher\ 2\ Assassins\ Of\ Kings/support/gog-the-witcher-2-assassins-of-kings.png "${pkgdir}"/usr/share/pixmaps/gog-the-witcher-2-assassins-of-kings.png
  install -Dm644 "${srcdir}"/The\ Witcher\ 2\ Assassins\ Of\ Kings/docs/End\ User\ License\ Agreement.txt "${pkgdir}"/usr/share/licenses/$pkgname/LICENSE
  install -Dm755 "${srcdir}/gog-the-witcher-2-assassins-of-kings" "${pkgdir}/usr/bin/gog-the-witcher-2-assassins-of-kings"
}
