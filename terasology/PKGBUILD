# Maintainer: Ferdinand H. <ferdinandhzr at aol dot com>

pkgname=terasology
pkgver=latest
pkgrel=1
pkgdesc="Yet another high resolution game with blocks like Minecraft!"
arch=(any)
license=('custom')
url="http://blog.movingblocks.net/blockmania"
depends=('java-runtime' 'xorg-server-utils' 'openal')
noextract=('')
source=(http://www.movingblocks.net:8080/jenkins/job/Terasology/lastSuccessfulBuild/artifact/target/Terasology.zip
         terasology.desktop terasology)

md5sums=('83d707a48810d86d9d8894c85d826695'
         'b94d11f1b9f15c2d7654d697f2fa4d6c'
         '117a77b15880a6283c92c64af8d26075')

package() {
    cd "$srcdir" || return 1

install -d "${pkgdir}"/opt/
install -d "${pkgdir}"/usr/bin
install -d "${pkgdir}"/usr/share/applications/
cp -rf "${srcdir}"/Terasology/ "${pkgdir}"/opt/Terasology/
#ln -sf "${srcdir}"/Terasology/run_linux.sh "${pkgdir}"/usr/bin/terasology
cp -rf ../terasology "${pkgdir}"/usr/bin/terasology
chmod a+x "${pkgdir}"/usr/bin/terasology
chmod 777 -R "${pkgdir}"/opt/Terasology/
cp -rf terasology.desktop "${pkgdir}"/usr/share/applications/

echo "**********IMPORTANT:**********"
echo "If the game doesn't start, pls try chmod -R 777 /opt/Terasology/"
echo "At the moment Terasology uses it's basedir for mods and more. It is located in /opt/Terasology."
echo "******************************"

}

