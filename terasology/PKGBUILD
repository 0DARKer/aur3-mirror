# Maintainer: Ferdinand H. <ferdinandhzr at aol dot com>


pkgname=terasology
pkgver=stable
pkgrel=7
pkgdesc="Yet another high resolution game with blocks like Minecraft!"
arch=('x86_64' 'i686')
license=('Apache')
url="http://blog.movingblocks.net/blockmania"
makedepends=('unzip')
depends=('java-runtime' 'xorg-server-utils' 'openal')
noextract=('Terasology.zip')
conflicts=('terasology')
source=('http://jenkins.movingblocks.net/job/TerasologyStable/lastSuccessfulBuild/artifact/build/distributions/Terasology.zip' 'terasology.desktop')
md5sums=('af62a023463576ec62919c1b6fb3c411'
         'b94d11f1b9f15c2d7654d697f2fa4d6c')

package() {
mkdir "${pkgdir}"/usr
mkdir "${pkgdir}"/usr/bin
mkdir "${pkgdir}"/usr/share
mkdir "${pkgdir}"/usr/share/applications
mkdir "${pkgdir}"/opt			#Installing to /opt as I don't know how to integrate into filesystem structure



cd $srcdir
unzip Terasology.zip -d "${pkgdir}"/opt/Terasology
chmod +x "${pkgdir}"/opt/Terasology/run_linux.sh
chmod +x "${pkgdir}"/opt/Terasology/Terasology.jar

echo '#!/bin/sh' >> "${pkgdir}"/usr/bin/terasology
echo 'exec /opt/Terasology/run_linux.sh' >> "${pkgdir}"/usr/bin/terasology
chmod +x "${pkgdir}"/usr/bin/terasology

cp terasology.desktop "${pkgdir}"/usr/share/applications/
}
    

