pkgname=terasology
pkgver=41
pkgrel=1
pkgdesc="Yet another high resolution game with blocks like Minecraft!"
arch=('x86_64' 'i686')
license=('Apache')
url="http://terasology.org"
options=('!strip')
depends=('java-runtime' 'xorg-server-utils' 'openal')
source=( 'terasology' 'terasology.desktop' "http://jenkins.movingblocks.net/job/TerasologyStable/${pkgver}/artifact/build/distributions/Terasology.zip" )
sha512sums=('f94c1ac3d85e4fb91cc47056eeec3648d02be9090252401acb740af8c0580623c7ee57470d9e7317d6b577d613e317b5c16ec014f232ec68bc755e0eba7a975e'
            '674d34f54bf7f45f5a83b4dd377475fd323e28f9c98ff93cd64c6f741083f3672e798e3069e92273308a440454f3fd1346b934540307b91f42dce82165a6b035'
			'a46be41854bc3944760d81d67562c294bed291d8af84c1d9399f3556853c2067e4b209661d96b784fbebc9d9d390ff493642f6753ca5d8c25f6e31bd2b9cd260')

package() {
    install -Dm 755 "$srcdir/terasology" "$pkgdir/usr/bin/terasology"
    install -Dm 644 "$srcdir/terasology.desktop" "$pkgdir/usr/share/applications/terasology.desktop"

    rm "$srcdir/terasology" "$srcdir/terasology.desktop" "$srcdir/Terasology.zip"

    #remove files/dirs for other operating systems
    rm run_macosx.command Terasology.exe
    rm -r natives/{macosx,windows}

    cp -ra "$srcdir" "$pkgdir/usr/share/terasology"
}
