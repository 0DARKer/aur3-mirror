# Maintainer: Kamil Stachowski <kamil.stachowski@gmail.com>
# Updated: Julien Schueller

pkgname=tralics
pkgver=2.15.0
pkgrel=2
pkgdesc="LaTeX to XML translator"
arch=('i686' 'x86_64')
url="http://www-sop.inria.fr/apics/tralics/"
license=('custom:CeCILL')
depends=('gcc-libs')
makedepends=('gcc' 'texlive-latexextra')
options=()
source=("ftp://ftp-sop.inria.fr/marelle/tralics/src/tralics-src-2.15.0.tar.gz")
md5sums=('c5c2dd1e590a3962a41aaba62321d8ab')

build() {
  tar xzf ${pkgname}-src-${pkgver}.tar.gz
  cd ${pkgname}-${pkgver}
  make -C src CPPFLAGS="$CPPFLAGS -DCONFDIR=\\\"/usr/share/tralics\\\""
}

check() {
  cd ${pkgname}-${pkgver}
  cd Test
  sed -i "/testerr/d" alltests
  ./alltests
}

package() {
  cd ${pkgname}-${pkgver}
  install -D -m755 src/tralics $pkgdir/usr/bin/tralics
  rm confdir/README confdir/COPYING confdir/tralics_rc
  install -d ${pkgdir}/usr/share
  cp -r confdir ${pkgdir}/usr/share/${pkgname}
}
