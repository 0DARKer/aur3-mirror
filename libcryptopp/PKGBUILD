# Maintainer: Alexander RÃ¸dseth <rodseth@gmail.com>
pkgname=libcryptopp
pkgver=5.6.1
pkgrel=4
pkgdesc="Free C++ class library of cryptographic schemes"
arch=('x86_64' 'i686')
url="http://cryptopp.com/"
license=('custom')
source=('http://prdownloads.sourceforge.net/cryptopp/cryptopp561.zip'
        'libcrypto++.pc')
makedeps=('setconf')
md5sums=('96cbeba0907562b077e26bcffb483828'
         'a10201c43fcea47a73cc1402a7bda48c')

build() {
  cd "$srcdir"

  msg "Configuring..."
  setconf GNUmakefile CXXFLAGS "-DNDEBUG -O2 -fPIC"

  msg2 "Compiling..."
  make PREFIX="$pkgdir/usr" || return 1
  make PREFIX="$pkgdir/usr" "$pkgname.so" || return 1

  msg2 "Packaging header files..."
  mkdir -p "$pkgdir/usr/include/cryptopp"
  cp *.h "$pkgdir/usr/include/cryptopp"

  msg2 "Packaging library..."
  install -Dm644 $pkgname.a "$pkgdir/usr/lib/$pkgname.a" || return 1
  install -Dm644 $pkgname.so "$pkgdir/usr/lib/$pkgname.so" || return 1

  msg2 "Packaging license..."
  install -Dm644 License.txt \
    "$pkgdir/usr/share/licenses/$pkgname/License.txt" || return 1

  msg2 "Packaging library configuration..."
  install -Dm644 ../libcrypto++.pc \
    "$pkgdir/usr/lib/pkgconfig/libcrypto++.pc" || return 1
}

# vim:set ts=2 sw=2 et:
