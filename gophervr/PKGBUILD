# Maintainer:  Martin C. Doege <mdoege at compuserve dot com>

pkgname=gophervr
pkgver=0.4.1
pkgrel=2
pkgdesc="An experimental VR interface to Gopherspace"
arch=('any')
url="gopher://gopher.floodgap.com/1/gophervr"
license=('GPL')
depends=('openmotif')
makedepends=('curl' 'unzip')
source=("Makefile.patch"
        "helpdiag.h.patch")
md5sums=('acbb60dc127d4294d0ae404be6fd865b'
         '1143af9faa2a53355f480382b6a2b0e0')

build() {
  cd $srcdir
  curl -O "gopher://gopher.floodgap.com/5/gophervr/all-versions/gophervr-"$pkgver"-src.zip"
  unzip "gophervr-"$pkgver"-src.zip"
  cd gophervr
  patch gophervr/Makefile $srcdir/Makefile.patch
  patch gophervr/helpdiag.h $srcdir/helpdiag.h.patch
  make linux
}

package() {
  cd "$srcdir/gophervr/gophervr"
  mkdir -p $pkgdir/usr/bin
  cp gophervr $pkgdir/usr/bin
  mkdir -p $pkgdir/usr/local/lib/hershey
  cp futura.hfont $pkgdir/usr/local/lib/hershey
  mkdir -p $pkgdir/usr/share/doc/gophervr
  cp gophervr.help $pkgdir/usr/share/doc/gophervr
}
