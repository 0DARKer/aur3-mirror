# Contributor: SaThaRiel <sathariel_dontbugme_74[at]gmail[d0t]com>

pkgname=fayangband
pkgver=1.00
pkgrel=2
pkgdesc="FayAngband is an angband variant mainly based on EyAngband"
arch=('i686' 'x86_64')
url="http://www.mikkolehtinen.net/projects.html"
license=('unknown')
depends=('ncurses')
source=(http://www.mikkolehtinen.net/ohjelmat/fayangband-100-src.zip)

md5sums=('8ee2dad4044f29979d43b9bd65dc788c')

build() {
  cd "${srcdir}/FayAngband-100-src/src"

  install -d "${pkgdir}/usr/lib" || return 1
  cp config.h config.h.bak || return 1
  sed -e 's@# define DEFAULT_PATH "./lib/"@# define DEFAULT_PATH "/usr/lib/fayangband/"@' config.h.bak > config.h || return 1

  make -f Makefile.std || return 1
  install -D -m755 "angband" "${pkgdir}/usr/bin/$pkgname" || return 1
  cp -R "${srcdir}/FayAngband-100-src/lib" "${pkgdir}/usr/lib/$pkgname" || return 1
  chmod -R 775 "${pkgdir}/usr/lib/$pkgname" || return 1
  chown -R root:users "${pkgdir}/usr/lib/$pkgname" || return 1

  find "${pkgdir}" -iname delete.me -delete || return 1
}
