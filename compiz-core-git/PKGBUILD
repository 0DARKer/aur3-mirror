pkgname=compiz-core-git
pkgver=0.9.5
pkgrel=2
pkgdesc="Latest development version of the Compiz core package compiled right from the latest git revision"
url="http://www.compiz.org/"
arch=('i686' 'x86_64')
license=('GPL')
makedepends=('intltool' 'cmake')
provides=('compiz-core')
conflicts=('compiz-core')
replaces=('compiz-git')
depends=('boost' 'xorg-server' 'libxext' 'libxdamage' 'libxcomposite' 'startup-notification' 'librsvg' 'libgl' 'dbus' 'mesa' 'libxslt' 'fuse' 'libstdc++5' 'glib2' 'glibmm' 'libsm' 'libxml2' 'libxslt' 'glibmm' 'libxrender' 'libice' 'pango' 'libpng')

build() {
  cd "${srcdir}"
  git clone git://git.compiz.org/compiz/core/
  cd core

	[[ -d build ]] || mkdir build
	cd build
	cmake .. -DCMAKE_INSTALL_PREFIX=/usr -DCOMPIZ_DESTDIR="${pkgdir}" -DCMAKE_CXX_FLAGS="-g -O2 -I/usr/include/glib-2.0" \
		-DCOMPIZ_DEFAULT_PLUGINS="composite,opengl,decor,resize,place,move" -DUSE_GTK="false" \
		-DCOMPIZ_DISABLE_PLUGIN_FADE=Off \
		-DCOMPIZ_DISABLE_PLUGIN_SCREENSHOT=Off \
		-DCOMPIZ_DISABLE_PLUGIN_OBS=Off \
		-DCOMPIZ_DISABLE_PLUGIN_DECOR=Off \
		-DCOMPIZ_DISABLE_PLUGIN_SCALE=Off \
		-DCOMPIZ_DISABLE_PLUGIN_RESIZE=Off \
		-DCOMPIZ_DISABLE_PLUGIN_CLONE=Off \
		-DCOMPIZ_DISABLE_PLUGIN_WATER=Off \
		-DCOMPIZ_DISABLE_PLUGIN_ANNOTATE=Off \
		-DCOMPIZ_DISABLE_PLUGIN_COMMANDS=Off \
		-DCOMPIZ_DISABLE_PLUGIN_BLUR=Off \
		-DCOMPIZ_DISABLE_PLUGIN_CUBE=Off \
		-DCOMPIZ_DISABLE_PLUGIN_COMPOSITE=Off \
		-DCOMPIZ_DISABLE_PLUGIN_COPYTEX=Off \
		-DCOMPIZ_DISABLE_PLUGIN_GNOMECOMPAT=Off \
		-DCOMPIZ_DISABLE_PLUGIN_OPENGL=Off \
		-DCOMPIZ_DISABLE_PLUGIN_KDE=Off \
		-DCOMPIZ_DISABLE_PLUGIN_REGEX=Off \
		-DCOMPIZ_DISABLE_PLUGIN_COMPIZTOOLBOX=Off \
		-DCOMPIZ_DISABLE_PLUGIN_SWITCHER=Off \
		-DCOMPIZ_DISABLE_PLUGIN_INOTIFY=Off \
		-DCOMPIZ_DISABLE_PLUGIN_ROTATE=Off \
		-DCOMPIZ_DISABLE_PLUGIN_PLACE=Off \
		-DCOMPIZ_DISABLE_PLUGIN_MOVE=Off \
		-DCOMPIZ_DISABLE_PLUGIN_WOBBLY=Off \
		-DCOMPIZ_DISABLE_PLUGIN_INI=Off \
		-DCOMPIZ_DISABLE_PLUGIN_ZOOM=Off \
		-DCOMPIZ_DISABLE_PLUGIN_IMGPNG=Off \
		-DCOMPIZ_DISABLE_PLUGIN_DBUS=Off \
		-DCOMPIZ_DISABLE_PLUGIN_IMGSVG=Off 
      	make
	make install
	make findcompiz_install
}
