# Maintainer: Alex M <alex@migame.org>

pkgname=libmowgli2-git
pkgver=20120630
pkgrel=1
pkgdesc='A useful collection of routines for programming'
url='http://www.atheme.org/project/mowgli'
license=('custom')
arch=('i686' 'x86_64')
depends=('glibc')
makedepends=('git')
provides=('libmowgli2')
conflicts=('libmowgli2')

_gitroot='git://github.com/atheme/libmowgli-2.git'
_gitname='master'

build() {
    cd $srcdir

    if [[ ! -d "$_gitname" ]]; then
        git clone "$_gitroot" -b "$_gitname" "$_gitname"
    fi

    rm -rf "$srcdir/$_gitname-build"
    git clone "$srcdir/$_gitname" "$srcdir/$_gitname-build"
    cd "$srcdir/$_gitname-build"

    ./autogen.sh
	./configure --prefix=/usr
	make
}

package() {
    cd "$srcdir/$_gitname-build"

	make DESTDIR="$pkgdir" install

	install -D -m644 COPYING "$pkgdir/usr/share/licenses/$pkgname/COPYING"

    rm -rf $(find "$pkgdir" -type d -name '.git')
}

