# Maintainer: Mr. Mijau <dx dot 1178 at gmail dot com>
#
# Note: 
# This is git build of Worldcoin wallet, git pull from master (v0.6.4.x).
# This package will be updated to 0.8 branch as soon as possible.
# 0.8 branch does not build correctly, I hope that will be fixed soon.
#
# ______________________________________________________________________
#
# New user?
# To reduce the wait time on initial sync, you can download the entire blockchain as compressed file.
#
# This is my sync of blockchain (synced 02.01.2014). I will update it every week.
# 
# Download this file with wget or via browser and extract in ~/.worldcoin directory.
#
# https://mega.co.nz/#!uZtmDTDI!_FjMmwrnxTLkiua7sfHGK3YydvCBVfGB0fZd0k0Lzvo
#

pkgname=worldcoin-git
_gitname=Worldcoin
pkgver=bff08fa
pkgrel=1
pkgdesc="WorldCoin is designed to be the digital currency of the future."
arch=('x86_64' 'i686')
url="http://worldcoinfoundation.org/"
license=('MIT')
provides=('worldcoin-qt')
conflicts=('worldcoin-qt' 'worldcoind-git')
depends=('qt4' 'miniupnpc' 'boost-libs')
makedepends=('git' 'boost' 'gcc' 'make')
source=('git://github.com/worldcoinproject/Worldcoin'
        'worldcoin.desktop')
install=worldcoin.install
sha256sums=(SKIP 
            'a6d31ea188486694e2571715eca93b6050e2b87ec7542f24cf645f118743d7e3')

## files & commands for building
_makefile_unix=makefile.unix
_qmake=qmake-qt4

pkgver() {
	cd ${_gitname}
	git describe --always | sed 's|-|.|g'
}

build() {
	cd ${_gitname}/src

	# build Worldcoin-qt
	msg "Building WorldCoin QT GUI"
	cd ..
	${_qmake}
	make $MAKEFLAGS
}

package() {
	install -Dm644 worldcoin.desktop ${pkgdir}/usr/share/applications/worldcoin.desktop

	cd ${_gitname}
	install -Dm755 worldcoin-qt ${pkgdir}/usr/bin/worldcoin-qt
	install -Dm644 COPYING "$pkgdir/usr/share/licenses/$pkgname/COPYING"
	install -Dm644 src/qt/res/icons/bitcoin.png ${pkgdir}/usr/share/pixmaps/worldcoin.png
}

