# Maintainer: Luis Sarmiento < lgsarmientop@unal.edu.co >
# Contributor: Sebastian Voecking <voeck@web.de>

pkgname=clhep
_pkgname=CLHEP
pkgver=2.1.2.2
pkgrel=1
pkgdesc='A Class library for High Energy Physics'
url="http://proj-clhep.web.cern.ch/"
arch=('x86_64' 'i686')
license=('GPL3')
depends=('bash' 'gcc-libs')
optdepends=()
makedepends=('cmake')
conflicts=()
replaces=()
backup=()
install=''

source=("http://proj-clhep.web.cern.ch/proj-clhep/DISTRIBUTION/tarFiles/${pkgname}-${pkgver}.tgz")
md5sums=('b72115137d9871f1b80aed9da01918b0')

build() {
	[ -d ${srcdir}/build ] && rm -rf ${srcdir}/build
	mkdir ${srcdir}/build
	cd ${srcdir}/build
	
  	cmake -DCMAKE_INSTALL_PREFIX=/usr \
  	${srcdir}/${pkgver}/${_pkgname}
	make
}

package() {
	  cd ${srcdir}/build
	  make DESTDIR="${pkgdir}" install
	  install -Dm644 ${srcdir}/${pkgver}/${_pkgname}/COPYING "${pkgdir}/usr/share/licenses/${pkgname}/COPYING"

##thanks to Bastian Beischer
##NOT NEEDED ANYMORE
##     find ${pkgdir}/usr/bin -type f -exec chmod 755 {} \;

## STILL NEEDED? LOOKS LIKE IT
          cd ${pkgdir}/usr/lib
          ln -s libCLHEP-${pkgver}.a libCLHEP.a
          ln -s libCLHEP-${pkgver}.so libCLHEP.so
}