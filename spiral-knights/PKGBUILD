# Maintainer: hauzer <alokinpwn at gmail dot com>
pkgname=spiral-knights
pkgver=20110403225646
pkgrel=1
pkgdesc="The Spiral Knights have awoken on an alien world. Their equipment stores have been raided and their starship, The Skylark, will not recover from the crash. They must work together to survive on a journey that will take them to the very core of the world."
arch=('any')
url="http://spiralknights.com/"
license=('custom:Three Rings')
depends=('java-runtime')
source=("http://hauzer.fileave.com/${pkgname}.tar.gz")
noextract=("${pkgname}.tar.gz")
md5sums=('a060641f81b342ee6cd8f809b6734834')

package() {
  mkdir -p ${pkgdir}/opt/${pkgname}
  cd ${pkgdir}/opt/${pkgname}
  tar -xf ${srcdir}/${pkgname}.tar.gz
  ln -s ${JAVA_HOME}/bin/java java
  chgrp games ./
  chmod 775 ./
  mkdir -p ${pkgdir}/usr/share/licenses/${pkgname}
  install -m664 license.txt ${pkgdir}/usr/share/licenses/${pkgname}/LICENSE

  mkdir -p ${pkgdir}/usr/bin
  cd ${pkgdir}/usr/bin
  echo \#\!\/bin\/bash > ${pkgname}
  echo \/opt\/${pkgname}/spiral >> ${pkgname}
  chmod 775 ${pkgname}

  mkdir -p ${pkgdir}/usr/share/applications
  cd ${pkgdir}/usr/share/applications
  echo [Desktop Entry]>>${pkgname}.desktop
  echo Type=Application>>${pkgname}.desktop
  echo Version=1.0>>${pkgname}.desktop
  echo Name=Spiral Knights>>${pkgname}.desktop
  echo Comment=${pkgdesc}>>${pkgname}.desktop
  echo Icon=\/opt\/${pkgname}\/icon_32.png>>${pkgname}.desktop
  echo Exec=${pkgname}>>${pkgname}.desktop
  echo Terminal=false>>${pkgname}.desktop
  echo Categories=Game\;Java\;>>${pkgname}.desktop
  chmod 644 ${pkgname}.desktop
}
