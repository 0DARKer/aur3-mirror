# Maintainer: Nicolas Hureau <archlinux@kalenz.fr>

pkgname=darm-git
pkgver=210.c934904
pkgrel=1
pkgdesc="A disassembler written in C for the ARMv7 instruction set."
arch=("i686" "x86_64")
url="https://github.com/jbremer/darm"
license=("BSD")
depends=()
makedepends=("git" "python3")
provides=("darm")
conflicts=("darm")
source=("darm::git://github.com/jbremer/darm.git")
sha256sums=("SKIP")
_gitname="darm"

pkgver() {
  cd "$srcdir/$_gitname"
  echo "$(git rev-list --count HEAD).$(git rev-parse --short HEAD)"
}

build() {
  cd "$srcdir/$_gitname"
  make
}

package() {
  mkdir -p "$pkgdir/usr/lib/"
  cp "$srcdir/$_gitname/libdarm.a" "$pkgdir/usr/lib/"
  cp "$srcdir/$_gitname/libdarm.so" "$pkgdir/usr/lib/"

  mkdir -p "$pkgdir/usr/include/darm/"
  cp "$srcdir/$_gitname/darm.h" "$pkgdir/usr/include/darm/"
  cp "$srcdir/$_gitname/armv7-tbl.h" "$pkgdir/usr/include/darm/"
}

# vim:set ts=2 sw=2 et:
