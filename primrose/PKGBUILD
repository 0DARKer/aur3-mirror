# Contributor: Christoph Zeiler <archNOSPAM_at_moonblade.dot.org>

pkgname=primrose
pkgver=6
pkgrel=1
pkgdesc="A captivating tile-clearing puzzle game"
arch=('i686' 'x86_64')
url="http://$pkgname.sourceforge.net/"
license=('GPL')
depends=('sdl' 'libgl' 'mesa')
source=(http://downloads.sourceforge.net/$pkgname/Primrose_v${pkgver}_UnixSource.tar.gz \
	$pkgname.png \
	$pkgname.desktop)
md5sums=('3bef20e73e060482ef6602b890751abb'
         '70919b0e425609f5987a353420fbbcb6'
         '5e6620f6ab6a456f5fc648013fe878c2')

build() {
  cd Primrose_v${pkgver}_UnixSource/tilePlacementGames/game1

  echo 1 | ./configure

  cd gameSource

  sed 's|"graphics"|"/usr/share/primrose/graphics"|g' -i common.cpp

  make	DEBUG_FLAG= \
	OPTIMIZE_OFF_FLAG="${CXXFLAGS}" \
	|| return 1

  install -Dm755 Primrose "$pkgdir"/usr/bin/$pkgname
  mkdir -p "$pkgdir"/usr/share/{doc/,}$pkgname
  cp -rf graphics/ "$pkgdir"/usr/share/$pkgname/
  install -m644 ../documentation/*.txt "$pkgdir"/usr/share/doc/$pkgname/

  install -Dm644 "$srcdir"/$pkgname.png "$pkgdir"/usr/share/pixmaps/$pkgname.png
  install -Dm644 "$srcdir"/$pkgname.desktop "$pkgdir"/usr/share/applications/$pkgname.desktop
} 

# vim:set ts=2 sw=2 et:
