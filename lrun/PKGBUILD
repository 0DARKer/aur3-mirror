# Maintainer: WU Jun <quark@zju.edu.cn>

pkgname=lrun
pkgver=0.9.4.4
pkgrel=3
pkgdesc='Run command on Linux with resources limited.'
url='https://github.com/quark-zju/lrun'
license=('MIT')
arch=('i686' 'x86_64')
source=($pkgname-$pkgver.tar.gz::https://github.com/quark-zju/$pkgname/archive/v${pkgver}.tar.gz)
sha1sums=("aa4cf189cb2eed2585c6cf70dcc18e44fc3a7678")
depends=('linux>=2.6.26')
makedepends=('gcc>=4.4 pkg-config ruby')
optdepends=('libseccomp')

build() {
  pkg-config --max-version 1.9 libseccomp || echo 'libseccomp 1.x not found, syscall filter will not work'
  cd "${srcdir}/${pkgname}-${pkgver}/src/"
  rake
}
 
package() {
  cd "${srcdir}/${pkgname}-${pkgver}/src/"
  PREFIX=${pkgdir}/usr rake install

  cd "${srcdir}/${pkgname}-${pkgver}/"
  install -Dm644 LICENSE "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
}
 
# vim:set ts=2 sw=2 et:
