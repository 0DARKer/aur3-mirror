# Maintainer: TryA <tryagainprod@gmail.com>
# Contributor: Sphax <zecmerquise.at.gmail.dot.com>
# Contributor: [vEX] <niechift.dot.vex.at.gmail.dot.com>

pkgname=psx
pkgver=1.13
pkgrel=6
pkgdesc="A PlayStation emulator, not plugin based"
arch=('i686' 'x86_64')
url="http://psxemulator.gazaxian.com/"
license=('unknown')
if [ "${CARCH}" == "x86_64" ]; then
  depends=('lib32-gtkglext' 'lib32-alsa-lib' 'lib32-libglade' 'lib32-xcb-util')
  optdepends=('lib32-gtk-engines: libclearlooks.so library'
              'lib32-bug-buddy: libgnomesegvhandler.so library')
else
  depends=('gtkglext' 'alsa-lib' 'libglade' 'xcb-util')
fi
replaces=('bin32-psx')
conflicts=('bin32-psx')
install="psx.install"
source=("http://psxemulator.gazaxian.com/pSX_linux_1_13.tar.bz2"
        "http://trya.alwaysdata.net/linux/icons/psx.png"
        'psx.sh' 'psx.desktop')
md5sums=('0812408db22184ceb8cb29ae7601298f'
         '6471243708d085addec13e947d71d853'
         '0f405a1333ac3f5c08c02108a69a2612'
         '3b93679970229887294aee79fef1924e')
options=(!strip)

build() {
  # Install small script for executing pSX
  install -Dm755 ${srcdir}/psx.sh ${pkgdir}/usr/bin/pSX

  # Install the real executable
  install -Dm755 ${srcdir}/pSX/pSX ${pkgdir}/usr/bin/psx.real

  # Install the .desktop file and its icon
  install -Dm644 ${srcdir}/psx.desktop ${pkgdir}/usr/share/applications/${pkgname}.desktop
  install -Dm644 ${srcdir}/psx.png ${pkgdir}/usr/share/pixmaps/psx.png
}
