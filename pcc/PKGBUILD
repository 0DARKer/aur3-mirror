# Contributor: Andreas Baumann <abaumann@yahoo.com>

pkgname=pcc
pkgver=0.9.9
pkgrel=1
pkgdesc="A Portable C Compiler."
arch=('i686')
url="http://pcc.ludd.ltu.se/"
license=('custom')
makedepends=('bison' 'flex')
#depends=('pcc-libs>=090313')
source=(http://pcc.ludd.ltu.se/ftp/pub/${pkgname}/${pkgname}-${pkgver}.tgz
        pcc-0.9.9-cc-ccom-Werror.patch
        license)
md5sums=('baa93bfe480bb263ad7656f118ce5107'
         'e0032b19b34b0f11f39fe804fa6e160a'
         '51f6cc02b26af53f26cfe87494ca5c87')

build() {
  cd ${srcdir}/${pkgname}-${pkgver}

  patch -Np1 -i "$srcdir/pcc-0.9.9-cc-ccom-Werror.patch" || return 1

  ./configure --prefix=/usr || return 1

  make || return 1

  make DESTDIR=$pkgdir install || return 1

  install -D -m0644 ${srcdir}/license ${pkgdir}/usr/share/licenses/pcc/license
}
