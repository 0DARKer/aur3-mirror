pkgname=jaspersoftstudio
_pkgname=JaspersoftStudio
_binname="Jaspersoft Studio"
pkgver=5.5.0
pkgrel=1
pkgdesc="Eclipse based report generator"
arch=('i686' 'x86_64')
url="http://community.jaspersoft.com/project/jaspersoft-studio"
license=('Eclipse')
depends=('java-runtime' 'gtk2')
#[[ ${CARCH} = i686 ]] && _arch=x86 && md5sums=('dba7618834772e30a7e93af7fb7e0b22')
[[ ${CARCH} = x86_64 ]] && _arch=x86_64 && md5sums=('44104661014775fdf571c01715d5f93e')
source=("http://hivelocity.dl.sourceforge.net/project/jasperstudio/${_pkgname}-${pkgver}/${pkgname}-${pkgver}.final-linux-${_arch}.tgz")

package() {
  install -d -m 0755 ${pkgdir}/opt/${pkgname}
  cp -a ${srcdir}/${pkgname}-${pkgver}.final/* ${pkgdir}/opt/${pkgname}
  install -d -m 0755 ${pkgdir}/usr/bin
  ln -sf "/opt/${_pkgname}/${_binname}" ${pkgdir}/usr/bin/${_pkgname}
  ln -sf "/opt/${_pkgname}/${_binname}" ${pkgdir}/usr/bin/${pkgname}

  cat > ${_pkgname}.desktop << EoF
[Desktop Entry]
Version=${pkgver}
Encoding=UTF-8
Name=Apache Directory Studio
Comment=${pkgdesc}
Exec=/opt/${_pkgname}/${_binname}
Icon=/opt/${_pkgname}/icon.xpm
Terminal=false
Type=Application
Categories=Java;Network;
EoF

  install -D -m 0644 ${srcdir}/${_pkgname}.desktop ${pkgdir}/usr/share/applications/${_pkgname}.desktop
}
