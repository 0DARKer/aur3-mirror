# Former maintainer of this package: Aarin
# This PKGBUILD was created by (all credits go to) the following:
# firefox-nightly maintainer: Cedric MATHIEU <me . xenom AT gmail . com>
# firefox-nightly contributor: coderoar <coderoar AT gmail . com>
# firefox-nightly contributor: cgirard <girard . cedric AT gmail . com>
# All I have done is tweak it so it works for seamonkey-nightly.

arch=('i686' 'x86_64')
license=('MPL' 'GPL' 'LGPL')

pkgname=seamonkey-nightly
pkgdesc='SeaMonkey internet suite, nightly build.'
url='http://www.seamonkey-project.org/'
#conflicts=()
#provides=()
pkgver=2.0.12pre
pkgrel=1

source=( 'seamonkey-nightly.desktop' 'seamonkey-nightly-safe.desktop' )
md5sums=( '1ebde0519aa59c99b0440c3dd8cd97a5' 'f5d9f13d16182f2496177ddd9df1d424' )
sha1sums=( '11a92dfa03dc37cec108ce42b799a5fc9d9748a6' '476d482b701dacd5595a1cf38fe82b061ecd2809' )

depends=( 'alsa-lib' 'dbus-glib' 'desktop-file-utils' 'gcc-libs-multilib' 'gtk2' 'libgnome' 'libxt' 'mime-types' 'mozilla-common' 'nss' 'shared-mime-info' )
makedepends=('wget')

build() {
	cd ${srcdir}

	SX_SRC="seamonkey-${pkgver}.en-US.linux-${CARCH}.tar.bz2"
	SX_SRC_URI="http://ftp.mozilla.org/pub/mozilla.org/seamonkey/nightly/latest-comm-1.9.1/${SX_SRC}"

	msg "Downloading..."
	wget ${SX_SRC_URI}
	msg "Extracting..."
	bsdtar -x -f ${SX_SRC}
	msg "Packaging..."

#	uncomment this line to remove them if you want
#	rm -rf seamonkey/{extensions,plugins,searchplugins}

	mkdir -p ${pkgdir}/{usr/{bin,share/{applications,pixmaps}},opt}
	cp -R seamonkey ${pkgdir}/opt/seamonkey-${pkgver}

	ln -s /opt/seamonkey-${pkgver}/seamonkey ${pkgdir}/usr/bin/seamonkey-nightly
	install -m644 ${srcdir}/{seamonkey-nightly.desktop,seamonkey-nightly-safe.desktop} ${pkgdir}/usr/share/applications/
	install -m644 ${srcdir}/seamonkey/chrome/icons/default/seamonkey.png ${pkgdir}/usr/share/pixmaps/${pkgname}-icon.png
}
