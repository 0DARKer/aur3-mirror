# Contributor: Rick W. Chen <stuffcorpse at archlinux dot us>

pkgname=msp430-libc
pkgver=20110612
pkgrel=2
pkgdesc="C runtime library for the MSP430 family of microcontrollers"
arch=('i686' 'x86_64')
url="http://mspgcc4.sourceforge.net/"
license=('custom')
depends=('gcc-msp430')
options=(!strip)
source=("https://sourceforge.net/projects/mspgcc/files/msp430-libc/msp430-libc-${pkgver}.tar.bz2")
sha1sums=('4e44f4320254ecbb38e516ab9933532a19fdd5eb')

_builddir="${srcdir}/build"

build() {
  cp -r "${srcdir}/${pkgname}-${pkgver}" ${_builddir} && cd ${_builddir}/src
  make PREFIX=/usr
}

package() {
  cd ${_builddir}/src
  mkdir -p ${pkgdir}/usr/msp430/lib
  make -j1 install PREFIX=${pkgdir}/usr
  # make -j1 PREFIX="${pkgdir}/usr" install

  install -Dm644 "${srcdir}/${pkgname}-${pkgver}/COPYING" \
    "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
}

# vim:set sts=2 ts=2 sw=2 et:
