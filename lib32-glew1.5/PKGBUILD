# Maintainer: josephgbr <rafael.f.f1 at gmail dot com>

pkgname=lib32-glew1.5
pkgver=1.5.8
pkgrel=1
pkgdesc="Legacy version of the OpenGL Extension Wrangler Library (32 bit)"
arch=('x86_64')
url="http://glew.sourceforge.net"
license=('BSD' 'MIT' 'GPL')
depends=('lib32-libxmu' 'lib32-libxi' 'lib32-mesa' 'glew1.5')
makedepends=('gcc-multilib')
source=(http://downloads.sourceforge.net/glew/glew-${pkgver}.tgz)
md5sums=('342c8dc64fb9daa6af245b132e086bdd')
sha1sums=('450946935faa20ac4950cb42ff025be2c1f7c22e')

build() {
  cd "${srcdir}/glew-${pkgver}"
  sed -i 's|CC = cc|CC = gcc -m32|' config/Makefile.linux
  sed -i 's|LD = cc|LD = gcc -m32|' config/Makefile.linux
  sed -i 's|lib64|lib32|' config/Makefile.linux
  make
}

package() {
  cd "${srcdir}/glew-${pkgver}"

  # We want only libraries these two libraries
  install -d -m 0755 "$pkgdir/usr/lib32"
  strip -x lib/libGLEW.so.1.5.8
  install -m 0644 lib/libGLEW.so.1.5.8 "$pkgdir/usr/lib32/"
  ln -sf libGLEW.so.1.5.8 $pkgdir/usr/lib32/libGLEW.so.1.5  
  chmod 0755 "${pkgdir}/usr/lib32/libGLEW.so.${pkgver}"
  # License
  mkdir -p "$pkgdir/usr/share/licenses"
  ln -s glew1.5 "$pkgdir/usr/share/licenses/$pkgname"
}
