pkgname=sni-qt
pkgver=0.2.0
pkgrel=1
pkgdesc="This plugin provides indicator support for Qt. It allows applications to export their systray transparently to the indicator system"
arch=('i686' 'x86_64')
url="https://launchpad.net/sni-qt"
license=('GPL')
depends=('qt-systemtrayicon' 'libdbusmenu-qt')
makedepends=('bzr' 'cmake')
source=(http://archive.ubuntu.com/ubuntu/pool/main/s/sni-qt/sni-qt_$pkgver.orig.tar.gz)
provides=('sni-qt')
conflicts=('sni-qt')
md5sums=('3e90df4f1e72199e6497929d22f38e7e')

build() {
  cd ${srcdir}

  if [[ -d ${srcdir}/build ]]; then
    msg "Cleaning the previous build directory..."
    rm -rf ${srcdir}/build
  fi
  mkdir $srcdir/build
  cd $srcdir/build
  cmake $startdir/src/sni-qt-$pkgver -DCMAKE_BUILD_TYPE=Release \
		-DCMAKE_INSTALL_PREFIX=/usr
  make
}

package() { 
  cd ${srcdir}/build
  make DESTDIR="${pkgdir}" install
}
