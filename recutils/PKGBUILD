# Maintainer: Brandon Invergo <brandon@invergo.net>
# Contributor: Max Meyer <dev@fedux.org>
# Contributor: Sven Wick <sven.wick@gmx.de>

pkgname=recutils
pkgver=1.5
pkgrel=2
pkgdesc="GNU tools and libraries to access human-editable, text-based databases."
arch=(i686 x86_64)
url="http://www.gnu.org/software/recutils/"
license=('GPL3')
depends=(libgcrypt curl)
makedepends=(make) 
optdepends=(openssl mdbtools)
#options=()
install=recutils.install
changelog=ChangeLog
source=("http://ftp.gnu.org/gnu/recutils/$pkgname-$pkgver.tar.gz"
        "examples.tar.gz"
	"$pkgname-$pkgver-fix-gets-build-error.diff"
)
sha256sums=('7ed67e74468084f52ad9341e4b11c44e5fd9d5325b93b7eb2cb230c839ff5dec'
            '39fd0899bd954ed93c190f570073aec64cd481c7fc23ebe890a06ba887aa65ff'
	    'be94e434e4ceeb6bc0658f845cd81a77175bad2e711fa0110c0a64873381e552'
)
options=(!libtool)

build() {
  cd "$srcdir/$pkgname-$pkgver"
  patch -uN lib/stdio.in.h ../$pkgname-$pkgver-fix-gets-build-error.diff || return 1
  ./configure --prefix=/usr 
  make
}

check() {
  cd "$srcdir/$pkgname-$pkgver"
  make check
}

package() {
  cd "$srcdir/$pkgname-$pkgver"
  make DESTDIR="$pkgdir/" install
  # examples
  mkdir -p "$pkgdir/usr/share/doc/recutils/"
  mv "$srcdir/examples" "$pkgdir/usr/share/doc/recutils/"
}

# vim:set ts=2 sw=2 et:
