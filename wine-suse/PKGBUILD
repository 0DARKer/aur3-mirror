# Contributor: Lee Jackson <tomoe AT lbjackson DOTCOM>
# Maintainer: Egon Ashrafinia <e.ashrafinia@gmail.com>

pkgname=wine-suse
pkgver=1.3.10
pkgrel=1.1
pkgdesc="An open-source implementation of the Windows API - openSUSE i586 build"
arch=('i686')
url="http://en.opensuse.org/Wine"
license=('LGPL')
depends=('libx11' 'libjpeg' 'alsa-lib' 'libxxf86vm' 'mesa' 'util-linux-ng' 'freetype2' 'fontconfig' 'libxslt' 'libxml2' 'libxcb' 'libxdamage' 'libxrender' 'zlib' 'openal')
# Needs up-to-date libarchive due to http://bugs.archlinux.org/task/9634
makedepends=('libarchive>=2.4.12' 'rpmextract')
provides=("wine=$pkgver" "winetricks=$pkgver")
conflicts=('wine')
# Listed at http://winehq.org/site/download
# and http://download.opensuse.org/repositories/Emulators:/Wine/openSUSE_11.2/i586/
# and ftp://ftp5.gwdg.de/pub/opensuse/repositories/Emulators%3A/Wine/openSUSE_11.2/i586/
source=(http://download.opensuse.org/repositories/Emulators:/Wine/openSUSE_Factory/i586/wine-${pkgver}-$pkgrel.i586.rpm
        http://download.opensuse.org/repositories/Emulators:/Wine/openSUSE_Factory/i586/wine-32bit-${pkgver}-$pkgrel.i586.rpm)
md5sums=('081fbeb19475461ade5ead45203e32c2' '1a4d8f1136bffbc7f44c4701ccdcfeb7')

build() {
  cd $srcdir
  rpmextract.sh wine-$pkgver-$pkgrel.i586.rpm
  rpmextract.sh wine-32bit-$pkgver-$pkgrel.i586.rpm
  cp -ra $srcdir/usr $pkgdir/
  cp -ra $srcdir/etc $pkgdir/
}
