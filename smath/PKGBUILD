# Contributor: Anton Bazhenov <anton.bazhenov at gmail>
# Maintainer: Stefan Husmann <stefan-husmann@t-online.de>
# Maintainer: ximeg <ximeg@tomcity.net>

pkgname=smath
pkgver=0_88
pkgrel=1
pkgdesc="A mathematical program with many features and paper-like interface"
arch=('i686' 'x86_64')
url="http://smath.info"
license=('CCPL')
groups=('math')
depends=('mono')
backup=(opt/$pkgname/settings.inf)
source=("ftp://ftp2.tusur.ru/pub/smath/SMathStudioDesktop.0_88.Mono.tar.gz")
md5sums=('23752821293bfa244ee47e3339dda61b') #generate with 'makepkg -g'

build() {
  cd "$srcdir"/SMathStudioDesktop.${pkgver/\./_}.Mono
  # install program
  install -m755 -d "$pkgdir"/opt/$pkgname/{book,examples,lang}
  install -m644 -t "$pkgdir"/opt/$pkgname/book book/*
  install -m644 -t "$pkgdir"/opt/$pkgname/examples examples/*
  install -m644 -t "$pkgdir"/opt/$pkgname/lang lang/*
  install -m644 -t "$pkgdir"/opt/$pkgname *.{dll,pc,exe}

  # create settings file
  touch "$pkgdir"/opt/$pkgname/settings.inf
  chmod 664 "$pkgdir"/opt/$pkgname/settings.inf

echo "#!/bin/sh
cd /opt/smath
mono SMathStudio_Desktop.exe \"$@\"
" > ../$pkgname.sh

  # install launcher
  install -Dm755 ../$pkgname.sh "$pkgdir"/usr/bin/$pkgname

}
