# Maintainer: GI_Jack <iamjacksemail@hackermail.com>
# Based on PKGBUILD firefox-extension-httpseverywhere
#

_plugin_name=collusion
_plugin_version=1.0.9
pkgdesc="Firefox extension to discover who's tracking you online(aka lightbeam)"
license=('MPLv2')

pkgname=firefox-extension-$_plugin_name
pkgver=$_plugin_version
pkgrel=1
arch=('any')
url="https://www.mozilla.org/en-US/collusion/"
depends=("firefox")
source=("https://addons.cdn.mozilla.net/storage/public-staging/363974/lightbeam_for_firefox-${_plugin_version}-fx.xpi")
md5sums=('23474f5c9618334135628e55b3cafaeb')
sha1sums=('30b142158d48ede83a7bd583b10bb714fc2a03e1')
package(){
  cd $srcdir
  emid=$(sed -n '/.*<em:id>\(.*\)<\/em:id>.*/{s//\1/p;q}' install.rdf) || return 1
  local dstdir=$pkgdir/usr/lib/firefox/browser/extensions/${emid}
  install -d $dstdir
  cp -r * $dstdir
  rm $dstdir/lightbeam_for_firefox-${_plugin_version}-fx.xpi
  chmod -R 755 $dstdir
}
