# Contributor: Simon Lipp <sloonz+aur@gmail.com

pkgname=ruby-feedtools
pkgver=0.2.29
pkgrel=1
pkgdesc="Implements a simple system for handling xml news feeds with caching"
arch=(i686 x86_64)
url="http://sporkmonger.com/projects/feedtools"
license=('MIT')
depends=('ruby' 'ruby-builder' 'ruby-activerecord' 'ruby-uuidtools')
conflicts=()
source="http://rubyforge.org/frs/download.php/34450/feedtools-0.2.29.gem"
md5sums=('38d545466ee4246b5479ecd0122fa879')
options=(!strip)
noextract=(feedtools-$pkgver.gem)

build(){
  cd ${startdir}/src
  local _gemdir="$(ruby -rubygems -e'puts Gem.default_dir')"
  gem install --no-rdoc --no-ri --ignore-dependencies -i "${startdir}/pkg/$_gemdir" feedtools-$pkgver.gem || return 1
  find ${startdir}/pkg -name uri_helper.rb | xargs sed -i '1i# coding: utf-8\' || return 1
}
