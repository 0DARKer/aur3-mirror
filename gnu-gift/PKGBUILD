# Maintainer: Limao Luo <luolimao+AUR@gmail.com>
# Contributor: BlackEagle <ike.devolder@scarlet.be>

_pkgname=gift
pkgname=gnu-$_pkgname
pkgver=0.1.14
pkgrel=1.1
pkgdesc="GNU Image Finding Tool"
arch=(i686 x86_64)
url=http://www.gnu.org/software/$_pkgname/
license=(GPL)
depends=(imagemagick perl-xml-xql perl-text-iconv)
source=(ftp://ftp.gnu.org/gnu/$_pkgname/$_pkgname-$pkgver.tar.gz
    01_add-doxy-header-and-footer.diff
    02_gcc-4.0.diff
    03_add-missing-headers.diff
    04_gcc-4.1.diff
    05_gcc-4.3.diff)
sha256sums=('6a59422f98d8b2fff207263e4d147188a81e88a1ad343b9682df455ecd3f6c38'
    '3ffde702f0d954f1d7fa80a87b2cf47ac15d7f129185f972cb480add0ddf03cb'
    '7b69bd3770cc12f9be1b25675fc3d582ba0d06345e636e8c63d08d1b0e398490'
    '66a7f746c8173d7dd70ea2429aa4815c50af1387e79c4d45f621d41c18b192d7'
    '0c44a41ca2ca92ece8558b9b72d2e0598e9e5ab059f88d9370deedc9f2d81592'
    '1d05436d51bfd157cd9379421e10e3fb063ff6b89d8366d1b1fbaa8e9a8895bd')
sha512sums=('828a490c6db1e47086e3fe0420ec33ee31a089cb4ff9263479a955bf435e1130995969cb5aeed2a716c64a2b48f7f67df2564d037c5e78dbbece13d03f25724c'
    'a6f27a19fd96a7842a6521edac977e70affde0a7038794bb27dd9b9c677df2ab44603cbe73edd85d96f85197b99002b25e34d10332aff27ca030cb0392e0578c'
    'a936c50206b7da6a5cdc11ff13e3addee6513c51fcfb39bfc6a9a5f238ae2994e3f17f2776240cce58f04085b9f0386466f598d68af896fe649dd78d093e4f93'
    '80a07665c877a24174572570ef5be46ce35cfda3fc62ebcd74349208a0a0278556aa9d3abbe00ae4cadd46e9c32b7688c805371d74dfccc2f0368758502fcefe'
    '74e1e5a24b9e3f41f663994c013318238d1d0251f5f8ad4115c5de918bb56af0275034fc41c60edcfd2d35ee23867f594fb3684748fd201a64d170f2e7f15f96'
    '9dd4a67619870edc0eac7326ea7285eb8ac5e7c52ee7553bd3c0ffb9d7b745f4416a111dc4756af2a2ad6414c3d2169cb62443ceb30d3862cb4c40765d70e2a8')

build() {
    cd "$srcdir"/$_pkgname-$pkgver/
    patch -Np1 -i ../01_add-doxy-header-and-footer.diff
    patch -Np1 -i ../02_gcc-4.0.diff
    patch -Np1 -i ../03_add-missing-headers.diff
    patch -Np1 -i ../04_gcc-4.1.diff
    patch -Np1 -i ../05_gcc-4.3.diff

    autoreconf --force --install --symlink
    ./configure --prefix=/usr
    make
}

package() {
    cd "$srcdir"/$_pkgname-$pkgver/
    make DESTDIR="$pkgdir" install
}
