# Contributor: aleiphoenix <aleiphoenix@gmail.com>
# Contributor: travisghansen <travisghansen@yahoo.com>

pkgname=librabbitmq-c
pkgver=0.6.0
pkgrel=1
pkgdesc="A RabbitMQ(amqp) library written in C-language"
arch=('i686' 'x86_64' 'armv7h')
license=('BSD')
makedepends=('cmake' 'doxygen' 'python' 'xmlto' 'openssl')
url=https://github.com/alanxz/rabbitmq-c
source=("${pkgname}-${pkgver}.zip::https://github.com/alanxz/rabbitmq-c/archive/v${pkgver}.zip")
md5sums=('b1a4ae9cf3ae84a5e23e942f778ca8ff')
options=(!libtool)

build() {
  cd ${pkgname:3}-$pkgver
  cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_INSTALL_LIBDIR=lib -DBUILD_EXAMPLES=OFF -DBUILD_TOOLS=ON -DBUILD_TOOLS_DOCS=ON -DBUILD_TESTS=OFF -DENABLE_SSL_SUPPORT=ON -DBUILD_API_DOCS=OFF .
}

package() {
  cd ${pkgname:3}-$pkgver
  DESTDIR="${pkgdir}" cmake --build . --target  install
}
