# Maintainer: Thijs Vermeir <thijsvermeir@gmail.com>

_realname=gstreamer0.10-ffmpeg
_upname=gst-ffmpeg
_upver=0.10.8.1
pkgname=${_realname}-git
pkgver=20090820
pkgrel=1
pkgdesc="GStreamer Multimedia Framework Ffmpeg plugins"
arch=(i686 x86_64)
license=('GPL')
depends=('gstreamer0.10-base-git' 'bzip2')
makedepends=('pkgconfig')
conflicts=("${_realname}" "${_realname}-plugins")
provides=("${_realname}=${_upver}" "${_realname}-plugins=${_upver}")
options=(!libtool)
url="http://gstreamer.freedesktop.org/"
source=()
md5sums=()
groups=('gstreamer')

_gitroot=git://anongit.freedesktop.org/gstreamer/${_upname}
_gitname=master

build() {
  cd "${srcdir}"
  if [ -d "${_upname}" ] ; then
    cd "${_upname}" && git pull --rebase || return 1
  else
    git clone --depth 1 "${_gitroot}" || return 1
    cd "${_upname}"
  fi
  sh autogen.sh --prefix=/usr --sysconfdir=/etc --localstatedir=/var \
    --disable-static || return 1
  make || return 1
  make DESTDIR="${pkgdir}" install || return 1
}

