# Maintainter: thr <r at sledinmay dot com>
# Contributor: Emmanuele Massimi <finferflu at gmail dot com>
pkgname=gtkmagnetic
pkgver=2.3
pkgrel=1
pkgdesc="An interpreter for Magnetic Scrolls adventures."
arch=(i686 x86_64)
url="http://mirror.ifarchive.org/indexes/if-archiveXmagnetic-scrollsXinterpretersXmagnetic.html"
license=('GPL')
depends=('gtk2' 'smpeg')
source=("http://ifarchive.org/if-archive/magnetic-scrolls/interpreters/magnetic/Magnetic23Src.zip"
	gargoyle.patch ms_init.patch gtkmagnetic.desktop gtkmagnetic.xpm)
md5sums=('74b0d027c6a70e39d9447f12c215e8a9'
         '9de21fb30b512ba62fa84e0f5a7561c5'
         'ec4cb13ac5f78d46069baf83ba674542'
         '73c0bd4aa113d2c45c28c63fd8ceedf9'
         'f8bda0389176b8ec8cf05d59dcdc7bf2') 

build() {
  patch -Np0 -i $srcdir/ms_init.patch
  patch -Np0 -i $srcdir/gargoyle.patch

  cd $srcdir/Gtk
  make || return 1

  mkdir -p $pkgdir/usr/share/gtkmagnetic
  mkdir -p $pkgdir/usr/share/pixmaps

  cp $srcdir/Gtk/README $pkgdir/usr/share/gtkmagnetic/
  cp $srcdir/../$pkgname.xpm $pkgdir/usr/share/pixmaps/$pkgname.xpm
  install -D -m644 $srcdir/../$pkgname.desktop $pkgdir/usr/share/applications/$pkgname.desktop
  install -D ./gtkmagnetic $startdir/pkg/usr/bin/gtkmagnetic
  ln -s /usr/bin/gtkmagnetic $pkgdir/usr/bin/magnetic
}

