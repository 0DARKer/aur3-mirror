--- configure	2014-09-06 18:48:27.065767870 +0400
+++ configure	2014-09-06 18:51:14.285019455 +0400
@@ -25218,15 +25218,15 @@
 
 # --with-umfpack-library set then check in this dir
 if test "x$with_umfpack_library" != "xyes"; then
-	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for umf_divcomplex in $with_umfpack_library" >&5
-$as_echo_n "checking for umf_divcomplex in $with_umfpack_library... " >&6; }
+	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for SuiteSparse_divcomplex in $with_umfpack_library" >&5
+$as_echo_n "checking for SuiteSparse_divcomplex in $with_umfpack_library... " >&6; }
 	save_LIBS="$LIBS"
 	LIBS="$BLAS_LIBS -L$with_umfpack_library -lm $LIBS"
 	# We need -lm because sometime (ubuntu 7.10 for example) does not link libamd against lib math
 
-	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for umf_divcomplex in -lumfpack" >&5
-$as_echo_n "checking for umf_divcomplex in -lumfpack... " >&6; }
-if ${ac_cv_lib_umfpack_umf_divcomplex+:} false; then :
+	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for SuiteSparse_divcomplex in -lumfpack" >&5
+$as_echo_n "checking for SuiteSparse_divcomplex in -lumfpack... " >&6; }
+if ${ac_cv_lib_umfpack_SuiteSparse_divcomplex+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -25240,7 +25240,7 @@
 #ifdef __cplusplus
 extern "C"
 #endif
-char umf_divcomplex ();
+char SuiteSparse_divcomplex ();
 #ifdef F77_DUMMY_MAIN
 
 #  ifdef __cplusplus
@@ -25252,31 +25252,31 @@
 int
 main ()
 {
-return umf_divcomplex ();
+return SuiteSparse_divcomplex ();
   ;
   return 0;
 }
 _ACEOF
 if ac_fn_c_try_link "$LINENO"; then :
-  ac_cv_lib_umfpack_umf_divcomplex=yes
+  ac_cv_lib_umfpack_SuiteSparse_divcomplex=yes
 else
-  ac_cv_lib_umfpack_umf_divcomplex=no
+  ac_cv_lib_umfpack_SuiteSparse_divcomplex=no
 fi
 rm -f core conftest.err conftest.$ac_objext \
     conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_umfpack_umf_divcomplex" >&5
-$as_echo "$ac_cv_lib_umfpack_umf_divcomplex" >&6; }
-if test "x$ac_cv_lib_umfpack_umf_divcomplex" = xyes; then :
+{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_umfpack_SuiteSparse_divcomplex" >&5
+$as_echo "$ac_cv_lib_umfpack_SuiteSparse_divcomplex" >&6; }
+if test "x$ac_cv_lib_umfpack_SuiteSparse_divcomplex" = xyes; then :
   UMFPACK_LIB="-L$with_umfpack_library -lumfpack $UMFPACK_LIB"; UMFPACK_OK=yes
 else
-  as_fn_error $? "libumfpack : Library missing. (Cannot find umf_divcomplex). Check if libumfpack is installed and if the version is correct (also called lib suitesparse)" "$LINENO" 5
+  as_fn_error $? "libumfpack : Library missing. (Cannot find SuiteSparse_divcomplex). Check if libumfpack is installed and if the version is correct (also called lib suitesparse)" "$LINENO" 5
 
 fi
 
 
-#	AC_TRY_LINK_FUNC(umf_divcomplex, [UMFPACK_OK=yes; BLAS_TYPE="Using BLAS_LIBS environment variable"], [UMFPACK_LIBS=""])
+#	AC_TRY_LINK_FUNC(SuiteSparse_divcomplex, [UMFPACK_OK=yes; BLAS_TYPE="Using BLAS_LIBS environment variable"], [UMFPACK_LIBS=""])
 	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $UMFPACK_OK" >&5
 $as_echo "$UMFPACK_OK" >&6; }
 	LIBS="$save_LIBS"
@@ -25288,13 +25288,13 @@
 	LIBS="$BLAS_LIBS $LIBS -lm" # libamd* is mandatory to link umfpack
 	# We need -lm because sometime (ubuntu 7.10 for example) does not link libamd against lib math
 
-	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for amd_info in -lamd" >&5
-$as_echo_n "checking for amd_info in -lamd... " >&6; }
+	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for amd_info in -lamd -lsuitesparseconfig" >&5
+$as_echo_n "checking for amd_info in -lamd -lsuitesparseconfig... " >&6; }
 if ${ac_cv_lib_amd_amd_info+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lamd  $LIBS"
+LIBS="-lamd -lsuitesparseconfig  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -25333,16 +25333,16 @@
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_amd_amd_info" >&5
 $as_echo "$ac_cv_lib_amd_amd_info" >&6; }
 if test "x$ac_cv_lib_amd_amd_info" = xyes; then :
-  UMFPACK_LIB="-lamd"
+  UMFPACK_LIB="-lamd -lsuitesparseconfig"
 else
   as_fn_error $? "libamd: Library missing (Cannot find symbol amd_info). Check if libamd (sparse matrix minimum degree ordering) is installed and if the version is correct" "$LINENO" 5
 
 fi
 
 	LIBS="$UMFPACK_LIB $LIBS"
-	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for umf_divcomplex in -lumfpack" >&5
-$as_echo_n "checking for umf_divcomplex in -lumfpack... " >&6; }
-if ${ac_cv_lib_umfpack_umf_divcomplex+:} false; then :
+	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for SuiteSparse_divcomplex in -lumfpack" >&5
+$as_echo_n "checking for SuiteSparse_divcomplex in -lumfpack... " >&6; }
+if ${ac_cv_lib_umfpack_SuiteSparse_divcomplex+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -25356,7 +25356,7 @@
 #ifdef __cplusplus
 extern "C"
 #endif
-char umf_divcomplex ();
+char SuiteSparse_divcomplex ();
 #ifdef F77_DUMMY_MAIN
 
 #  ifdef __cplusplus
@@ -25368,26 +25368,26 @@
 int
 main ()
 {
-return umf_divcomplex ();
+return SuiteSparse_divcomplex ();
   ;
   return 0;
 }
 _ACEOF
 if ac_fn_c_try_link "$LINENO"; then :
-  ac_cv_lib_umfpack_umf_divcomplex=yes
+  ac_cv_lib_umfpack_SuiteSparse_divcomplex=yes
 else
-  ac_cv_lib_umfpack_umf_divcomplex=no
+  ac_cv_lib_umfpack_SuiteSparse_divcomplex=no
 fi
 rm -f core conftest.err conftest.$ac_objext \
     conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_umfpack_umf_divcomplex" >&5
-$as_echo "$ac_cv_lib_umfpack_umf_divcomplex" >&6; }
-if test "x$ac_cv_lib_umfpack_umf_divcomplex" = xyes; then :
+{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_umfpack_SuiteSparse_divcomplex" >&5
+$as_echo "$ac_cv_lib_umfpack_SuiteSparse_divcomplex" >&6; }
+if test "x$ac_cv_lib_umfpack_SuiteSparse_divcomplex" = xyes; then :
   UMFPACK_LIB="-lumfpack $UMFPACK_LIB"; UMFPACK_OK=yes
 else
-  as_fn_error $? "libumfpack: Library missing. (Cannot find symbol umf_divcomplex). Check if libumfpack is installed and if the version is correct (also called lib suitesparse)" "$LINENO" 5
+  as_fn_error $? "libumfpack: Library missing. (Cannot find symbol SuiteSparse_divcomplex). Check if libumfpack is installed and if the version is correct (also called lib suitesparse)" "$LINENO" 5
 
 fi
 
