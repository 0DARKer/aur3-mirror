# Maintainer: SpepS <dreamspepser at yahoo dot it>

pkgname=hotot
pkgver=0.9.5_hg%7E20101108.531
pkgrel=1
pkgdesc="A lightweight & open source microblogging software (twitter identi.ca) in Python."
arch=('any')
url="http://www.hotot.org/"
license=('GPL')
depends=('pywebkitgtk' 'python-notify' 'python-keybinder')
makedepends=('p7zip' 'python-distutils-extra')
conflicts=('hotot-hg')
install="$pkgname.install"
source=("http://hotot.googlecode.com/files/$pkgname-$pkgver.7z")
md5sums=('3a14acd2e773211c8793b2240628450d')

build() {
  cd "$srcdir"

  7z x $pkgname-$pkgver.7z && cd $pkgname

 # Python2 fixes
  sed \
        -e "s_\(env python\).*_\12_" \
        -e "s_\(bin/python\).*_\12_" \
        -i `grep -rlE "(env python|bin/python)" .`

  python2 setup.py build
}

package() {
  cd "$srcdir/$pkgname"

  python2 setup.py install --prefix=/usr --root="$pkgdir"
}
