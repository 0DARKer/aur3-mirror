# Contributor: David Scholl <djscholl@gmail.com> 
# Contributor: David Pretty <david.pretty@gmail.com> 
pkgname=python-rpy2
pkgver=2.1.4
pkgrel=2
pkgdesc="A very simple, yet robust, Python interface to the R Programming Language."
arch=('i686' 'x86_64')
url="http://rpy.sourceforge.net/"
license=('MPL' 'GPL' 'LGPL')
depends=('python-numpy' 'r')
source=("http://downloads.sourceforge.net/sourceforge/rpy/rpy2-$pkgver.tar.gz")
md5sums=('cf4e0d80ba498a6d76f107531966478d')
build() {
  cd $startdir/src/rpy2-$pkgver
  sed -i "s:Rlapack:lapack:" setup.py
  sed -i "s:os.path.join(RHOME.strip(), 'include'):'/usr/include/R':" setup.py
  python setup.py install --prefix=/usr --root=$startdir/pkg || return 1
  mkdir -p $pkgdir/etc/ld.so.conf.d
  if [ "$CARCH" = "x86_64" ]; then
    echo /usr/lib64/R/lib > $pkgdir/etc/ld.so.conf.d/rpy_x86_64.conf  # for x86_64
  else   echo /usr/lib/R/lib > $pkgdir/etc/ld.so.conf.d/rpy_i686.conf  # for i686
  fi
}
