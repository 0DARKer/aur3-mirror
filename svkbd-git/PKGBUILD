# Maintainer: Army

# If you want to create custom layouts, place your languages here, e.g.
#_layouts=(de)
# In this case, you have to place a file called layout.de.h into your $startdir, which is where the PKGBUILD file is stored

_pkgname=svkbd
pkgname=$_pkgname-git
pkgver=20130428.48
pkgrel=1
pkgdesc="a simple virtual keyboard, intended to be used in environments, where no keyboard is available"
arch=('i686' 'x86_64')
url="http://tools.suckless.org/svkbd"
license=('MIT')
depends=('libxtst')
makedepends=('git')
provides=("$_pkgname")
conflicts=("$_pkgname")
source=("$_pkgname::git+http://git.suckless.org/svkbd")
md5sums=('SKIP')

pkgver() {
  cd "$srcdir/$_pkgname"
  echo "$(git log -1 --format="%cd" --date=short | sed 's|-||g').$(git rev-list --count master)"
}

prepare() {
  cd "$srcdir/$_pkgname"
  # custom config
  if [ -e $SRCDEST/config.h ];then msg "using custom config.h";cp $SRCDEST/config.h .;fi
}

build() {
  cd "$srcdir/$_pkgname"
  make
  for i in "${_layouts[@]}";do make svkbd-$i;done
}

package() {
  cd "$srcdir/$_pkgname"
  make PREFIX="/usr" DESTDIR="$pkgdir/" install
  install -Dm644 "LICENSE" "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
}

# vim:set ts=2 sw=2 et:
