# Contributor: refujee <refujee@gmail.com>
# Maintainer: sausageandeggs <sausageandeggs at archlinux.us>
pkgname=powder-toy-beta
_pkgname=powderbeta
pkgver=43.0
pkgrel=1
pkgdesc="Desktop version of the classic falling sand physics sandbox,it simulates air pressure, velocity & heat! Beta version."
arch=(i686 x86_64)
url="http://powdertoy.co.uk/"
license=('GPL')
depends=(sdl)
[[ $CARCH == x86_64 ]] && _xarch=64
[[ $CARCH == i686 ]] && _xarch=32
source=(http://powdertoy.co.uk/Download/$_pkgname-$pkgver-lin$_xarch.zip
		$pkgname.desktop $pkgname.png)
[[ $CARCH == i686 ]] && md5sums=('bf74665284d050d500e52182379e02f4'
	'dc27807fb9153a5beb32a62bc6145955' 'f7b06b42a0a3793fa219d8e7b62593d1')
[[ $CARCH == x86_64 ]] && md5sums=('7b59419c6279393c94a325acbf3d11bb'
	'dc27807fb9153a5beb32a62bc6145955' 'f7b06b42a0a3793fa219d8e7b62593d1')

package() {
	_tst=$(cat /proc/cpuinfo | grep -iwo 'sse\+.\?')
	if	[[ $_tst == *3 ]]; then _cpu=sse3
	elif [[ $_tst == *2 ]]; then _cpu=sse2
	else _cpu=sse
	fi

	mkdir -p $pkgdir/usr/bin/
	install -Dm 755 $srcdir/powder-$_xarch-$_cpu $pkgdir/usr/bin/$_pkgname
	install -Dm 644 $srcdir/$pkgname.desktop $pkgdir/usr/share/applications/$pkgname.desktop
	install -Dm 644 $srcdir/$pkgname.png $pkgdir/usr/share/pixmaps/$pkgname.png
}


