# Maintainer: Ilias Stamatis (stamatis.iliass) <> (gmail)
# Contributor: Panagiotis Mavrogiorgos (pmav99) <> (gmail)

pkgname=ffmulticonverter-git
pkgver=20131201
pkgrel=1
pkgdesc="FF Multi Converter is a GUI application that converts multiple file formats to different extensions"
arch=(any)
url="http://sites.google.com/site/ffmulticonverter/"
license=('GPL')
depends=('python' 'python-pyqt4')
optdepends=('unoconv' 'imagemagick' 'ffmpeg') 
makedepends=('git')
provides=('ffmulticonverter')
conflicts=('ffmulticonverter')
options=(!emptydirs)

_gitroot='git://github.com/Ilias95/FF-Multi-Converter.git'
_gitname='ffmulticonverter'

build()
{
  if [ -d "${srcdir}/${_gitname}" ]
  then
    msg "Updateing local repository..."
    cd "${srcdir}/${_gitname}"
    git pull origin master || return 1
    msg "The local files are updated."
  else
    git clone ${_gitroot} ${_gitname}
  fi
  msg "git checkout done or server timeout"

  if [ -d "${srcdir}/${_gitname}-build" ]
  then
    rm -rf "${srcdir}/${_gitname}-build"
  fi
  cp -r "${srcdir}/${_gitname}" "${srcdir}/${_gitname}-build"

  msg "Starting make..."
}

package()
{
  # Install using setup.py
  cd "${srcdir}/${_gitname}-build"
  python setup.py install --root="${pkgdir}/" --optimize=1
}
