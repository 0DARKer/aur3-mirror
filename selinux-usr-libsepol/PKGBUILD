# Maintainer: Nicky726 (Nicky726 <at> gmail <dot> com)
# Contributor: Sergej Pupykin (pupykin <dot> s+arch <at> gmail <dot> com)

pkgname=selinux-usr-libsepol
_origname=libsepol
_release=20120924
pkgver=2.1.8
pkgrel=1
pkgdesc="SELinux userspace (libsepol)"
arch=('i686' 'x86_64')
url="http://userspace.selinuxproject.org"
license=('GPL')
groups=('selinux' 'selinux-userspace')
depends=()
source=(http://userspace.selinuxproject.org/releases/${_release}/${_origname}-${pkgver}.tar.gz)
sha256sums=('63eedd2e435658eedb14cf5eb803468b701f4a2404f1a4af4ab52858e9c068f0')

build() {
  cd "${srcdir}/${_origname}-${pkgver}"

  make
}

package(){
  cd "${srcdir}/${_origname}-${pkgver}"

  make DESTDIR="${pkgdir}"  LIBDIR="${pkgdir}/usr/lib" SHLIBDIR="${pkgdir}/usr/lib" install

	# /lib -> /usr/lib
	rm "${pkgdir}/usr/lib/libsepol.so"
	cd "${pkgdir}/usr/lib"
	ln -s libsepol.so.1 libsepol.so
}
