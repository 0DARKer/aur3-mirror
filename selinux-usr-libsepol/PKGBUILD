# Maintainer: Nicky726 (Nicky726 <at> gmail <dot> com)
# Contributor: Sergej Pupykin (pupykin <dot> s+arch <at> gmail <dot> com)

pkgname=selinux-usr-libsepol
_origname=libsepol
_release=20120216
pkgver=2.1.4
pkgrel=1
pkgdesc="SELinux userspace (libsepol)"
arch=('i686' 'x86_64')
url="http://userspace.selinuxproject.org"
license=('GPL')
groups=('selinux' 'selinux-userspace')
depends=()
source=(http://userspace.selinuxproject.org/releases/${_release}/${_origname}-${pkgver}.tar.gz)
sha256sums=('8f5ea42ae6cc00b21f0e5f31f354d19fcce3edfe9328971d266245718714b1e8')

build() {
  cd "${srcdir}/${_origname}-${pkgver}"

  make
}

package(){
  cd "${srcdir}/${_origname}-${pkgver}"

  make DESTDIR="${pkgdir}"  LIBDIR="${pkgdir}/usr/lib" SHLIBDIR="${pkgdir}/usr/lib" install

	# /lib -> /usr/lib
	rm "${pkgdir}/usr/lib/libsepol.so"
	cd "${pkgdir}/usr/lib"
	ln -s libsepol.so.1 libsepol.so
}
