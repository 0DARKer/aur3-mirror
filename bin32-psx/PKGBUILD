# Maintainer: TryA <tryagainprod {at} gmail.com>
# Contributor: Sphax <zecmerquise.at.gmail.dot.com>
# Contributor: [vEX] <niechift.dot.vex.at.gmail.dot.com>

pkgname=bin32-psx
pkgver=1.13
pkgrel=5
pkgdesc="A PlayStation emulator, not plugin based"
arch=('x86_64')
url="http://psxemulator.gazaxian.com/"
license=('unknown')
depends=('sh' 'lib32-gtkglext' 'lib32-libxmu' 'lib32-mesa' 'lib32-alsa-lib' 'lib32-libglade' 'lib32-xcb-util')
optdepends=('lib32-gtk-engines: libclearlooks.so library'
            'lib32-bug-buddy: libgnomebreakpad.so library')
install="psx.install"
source=("http://psxemulator.gazaxian.com/pSX_linux_1_13.tar.bz2"
        'psx.sh' 'psx.desktop' 'psx.png')
md5sums=('0812408db22184ceb8cb29ae7601298f'
         '294dc58f5739e76f67ca41b14cba6d75'
         '9bab56d54c8a9df9a49991c1e657fa43'
         '328a3e0d557b6852a7186eb6e5d2f918')
options=(!strip)

build() {
  # Install small script for executing pSX
  install -D ${srcdir}/psx.sh ${pkgdir}/usr/bin/pSX

  # Install the real executable
  install -D ${srcdir}/pSX/pSX ${pkgdir}/usr/bin/psx.real

  # Install the .desktop file and its icon
  install -D --mode=644 ${srcdir}/psx.desktop ${pkgdir}/usr/share/applications/${pkgname}.desktop
  install -D --mode=644 ${srcdir}/psx.png ${pkgdir}/usr/share/pixmaps/psx.png
}
