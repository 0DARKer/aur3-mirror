# Maintainer: TuxSpirit<tuxpsiritATarchlinuxDOTfr>
# Contributor: Xemertix for 64-bit.

pkgname=zpaq
pkgver=1.10
_pkgver=110
pkgrel=1
pkgdesc="ZPAQ is a configurable file compressor and archiver on command-line"
arch=('i686' 'x86_64')
license=('GPL')
url="http://cs.fit.edu/~mmahoney/compression/"
makedepends=('unzip')
depends=('gcc-libs')
source=(http://mattmahoney.net/dc/${pkgname}${_pkgver}.zip)
md5sums=('a3c3fca07eab5ec981855d668f45066d')
options=(!emptydirs)
provides=('zpaq')
install=${pkgname}.install
build() {

  mkdir -p ${pkgdir}/usr/share/doc/${pkgname}
  mkdir -p ${pkgdir}/usr/bin
  mkdir -p ${pkgdir}/usr/lib/${pkgname}

  cd ${srcdir}

  #zpaq
  g++ ${pkgname}.cpp -o ${pkgname} -Wall || return 1

  #lzppre
  g++ lzppre.cpp -o lzppre -Wall || return 1

  # Programs and configurations files
  install -m644 *.cfg ${pkgdir}/usr/lib/${pkgname} || return 1
  install -m755 ${srcdir}/${pkgname} ${pkgdir}/usr/bin/${pkgname} || return 1
  install -m755 ${srcdir}/lzppre ${pkgdir}/usr/bin/lzppre || return 1

  # Documentations
  install -m644 readme.txt ${pkgdir}/usr/share/doc/${pkgname} || return 1

}
