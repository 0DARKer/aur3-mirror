# Maintainer: Erdbeerkaese

pkgname=starfarer
pkgver=0.35a_pre_RC1
pkgrel=1
pkgdesc="A single-player sandbox style space role-playing game with strategic elements."
arch=(any)
url="http://fractalsoftworks.com/"
license=('custom')
depends=('java-runtime' 'libgl' 'openal')
install='starfarer.install'
source=(
http://www.fractalsoftworks.com/starfarer/release/${pkgname}_linux-${pkgver//_/-}.zip
http://www.fractalsoftworks.com/starfarer/docs/StarfarerManual.pdf
starfarer.sh
starfarer.desktop)
md5sums=('a739f2b49f177bb596efd5d090c04688'
         '727e6021b0c9d385b070e6ddf3c141e5'
         '5a053d788779ac63d227881340af732e'
         '8f34b524db75095cccbd46f0a630d1de')
package() {
    install -D -m644 "${srcdir}/StarfarerManual.pdf" \
                     "${pkgdir}/usr/share/doc/${pkgname}/StarfarerManual.pdf"
    install -d  "${pkgdir}/usr/share/${pkgname}" \
                "${pkgdir}/usr/share/java/${pkgname}" \
                "${pkgdir}/usr/lib/${pkgname}"
    for jar in "${srcdir}/${pkgname}/*.jar" ; do
        install -D -m644 $jar "${pkgdir}/usr/share/java/${pkgname}/"
    done
    if test "$CARCH" == x86_64; then
        cp ${srcdir}/${pkgname}/native/linux/*64.so "${pkgdir}/usr/lib/${pkgname}/"
    else
        cp ${srcdir}/${pkgname}/native/linux/*[!"64"].so "${pkgdir}/usr/lib/${pkgname}/"
    fi
    cp -R "${srcdir}/${pkgname}/data" "${pkgdir}/usr/share/${pkgname}/"
    cp -R "${srcdir}/${pkgname}/graphics" "${pkgdir}/usr/share/${pkgname}/"
    cp -R "${srcdir}/${pkgname}/mods" "${pkgdir}/usr/share/${pkgname}/"
    cp -R "${srcdir}/${pkgname}/sounds" "${pkgdir}/usr/share/${pkgname}/"
    install -D -m755 "${srcdir}/starfarer.sh" "${pkgdir}/usr/bin/starfarer"
    install -D -m644 "${srcdir}/starfarer.desktop" \
                     "${pkgdir}/usr/share/applications/starfarer.desktop"
    install -D -m644 "${srcdir}/${pkgname}/LICENSE.txt" \
                     "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
}
# vim:set ts=4 sw=4 et:
