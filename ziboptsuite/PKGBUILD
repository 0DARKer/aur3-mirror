# Maintainer:  Johannes Schlatow <johannes.schlatow@googlemail.com>

pkgname=ziboptsuite
pkgver=2.0.1
pkgrel=1
pkgdesc="ZIB Optimization Suite, a tool for generation and solvin mixed integer programs. Consists of ZIMPL, SoPlex and SCIP."
arch=('i686' 'x86_64')
url="http://zibopt.zib.de"
license=('LGPL3' 'custom:ZIB Academic License')
depends=('readline')
provides=('scip=2.0.1' 'soplex=1.5.0' 'zimpl=3.1.0')
source=(http://zibopt.zib.de/download/$pkgname-$pkgver.tgz)
sha256sums=('5a5b87242eac089ac03d328bcb17d88d48358bf84a1e5e680e0e6948e4bde44e')

build() {
	cd "$srcdir/$pkgname-$pkgver"

	make -j1 || return 1
	make test || return 1
}

package() {
	cd "$srcdir/$pkgname-$pkgver"

	mkdir -p $pkgdir/usr/bin/
	cp -L scip-2.0.1/bin/scip $pkgdir/usr/bin/scip
	cp -L soplex-1.5.0/bin/soplex $pkgdir/usr/bin/soplex
	cp -L zimpl-3.1.0/bin/zimpl $pkgdir/usr/bin/zimpl

	mkdir -p $pkgdir/usr/share/doc/ziboptsuite/{zimpl,scip,soplex}
	cp COPYING $pkgdir/usr/share/doc/ziboptsuite/
	cp -r scip-2.0.1/{CHANGELOG,COPYING,release-notes} $pkgdir/usr/share/doc/ziboptsuite/scip
	cp soplex-1.5.0/{CHANGELOG,COPYING} $pkgdir/usr/share/doc/ziboptsuite/soplex
	cp -r zimpl-3.1.0/{CHANGELOG,LICENSE,README,example} $pkgdir/usr/share/doc/ziboptsuite/zimpl

	mkdir -p $pkgdir/usr/share/licenses/ziboptsuite
	cp COPYING $pkgdir/usr/share/licenses/ziboptsuite/LICENSE
}
