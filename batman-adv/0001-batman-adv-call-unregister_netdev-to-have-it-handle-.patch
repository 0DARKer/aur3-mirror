From 548c938bfef2dfad63d999fc9005f1d387e3d15a Mon Sep 17 00:00:00 2001
From: Marek Lindner <mareklindner@neomailbox.ch>
Date: Sat, 8 Feb 2014 23:28:18 +0800
Subject: [PATCH] batman-adv: call unregister_netdev() to have it handle the
 locking for us

Reported-by: Sven Eckelmann <sven@narfation.org>
Signed-off-by: Marek Lindner <mareklindner@neomailbox.ch>
---
 soft-interface.c | 5 +----
 1 file changed, 1 insertion(+), 4 deletions(-)

diff --git a/soft-interface.c b/soft-interface.c
index db3e467..633e9d6 100644
--- a/soft-interface.c
+++ b/soft-interface.c
@@ -652,10 +652,7 @@ static void batadv_softif_destroy_finish(struct work_struct *work)
 	}
 
 	batadv_sysfs_del_meshif(soft_iface);
-
-	rtnl_lock();
-	unregister_netdevice(soft_iface);
-	rtnl_unlock();
+	unregister_netdev(soft_iface);
 }
 
 /**
-- 
1.9.2

