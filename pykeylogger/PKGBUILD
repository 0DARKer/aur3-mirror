# Maintainer: jsteel <jsteel at vorx dot com>
# Contributor: Laszlo Papp <djszapi2 at gmail com>

pkgname=pykeylogger
pkgver=1.2.1
pkgrel=2
pkgdesc="A simple keylogger written in python"
url="http://pykeylogger.sourceforge.net/"
arch=('i686' 'x86_64')
license=('GPL')
depends=('python' 'python-configobj' 'pil' 'pygtk' 'python-xlib' 'tk')
source=(http://downloads.sourceforge.net/project/${pkgname}/${pkgname}/${pkgver}/${pkgname}-${pkgver}_src.zip)
install="${pkgname}.install"
md5sums=('45cf74c6f1440172f26d0015b01ef58a')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  python setup.py build
  sed -i '1i #!/usr/bin/python2.7' keylogger.pyw
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  python setup.py install --root="${pkgdir}" --prefix=/usr
  
  for i in *.py; do
    install -Dm 755 "$i" "${pkgdir}/usr/lib/python2.7/$i"
  done

  for i in Pmw/*; do
    install -Dm 755 "$i" "${pkgdir}/usr/lib/python2.7/$i"
  done

  for i in doc/*; do
    install -Dm 755 "$i" "${pkgdir}/usr/share/pykeylogger/$i"
  done

  install -Dm 755 pykeylogger.ini "${pkgdir}"/usr/share/pykeylogger/pykeylogger.ini
  install -Dm 755 keylogger.pyw "${pkgdir}"/usr/bin/pykeylogger
  install -Dm 755 pykeylogger.val "${pkgdir}"/usr/bin/pykeylogger.val
}
