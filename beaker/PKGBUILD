# PKGBUILD created by: Gris Ge <cnfourt@gmail.com>
# PKGBUILD maintained by: Wang Chao <wangchao19890207@gmail.com>

pkgname="beaker"
pkgver="0.6.16"
pkgrel="1"
pkgdesc="Common files for beaker needed by server and client package."
arch=('i686' 'x86_64')
makedepends=(python2 krb5 python2-distribute python-kobo python2-krbv python-lxml)
url=("https://fedorahosted.org/beaker")
license=('GPL')
depends=('python2')
source=("https://fedorahosted.org/releases/b/e/beaker/${pkgname}-${pkgver}.tar.bz2"
        "arch-python2.patch")
md5sums=('ec51d8d16f9c6637c29cf43755488b05'
         'd34e9c31d39ed877f99bec362365f5c4')

build() {
    cd ${srcdir}/${pkgname}-${pkgver}
    patch -p1 -i ${srcdir}/arch-python2.patch
    env SUBDIRS="Common" make clean || return $?
    env SUBDIRS="Common" PY_PREFIX="/usr" DESTDIR=${pkgdir} make || return $?
}

package() {
	cd ${srcdir}/${pkgname}-${pkgver}
	SUBDIRS="Common" PY_PREFIX="/usr" DESTDIR=${pkgdir} \
		make install || return $?
}
