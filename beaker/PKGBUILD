# PKGBUILD created by: Gris Ge <cnfourt@gmail.com>
# PKGBUILD maintained by: Wang Chao <wangchao19890207@gmail.com>

pkgname="beaker"
pkgver="0.6.16"
pkgrel="1"
pkgdesc="Common files for beaker and client tools for beaker job maintenance."
arch=('i686' 'x86_64')
url=("https://fedorahosted.org/beaker")
license=('GPLv2')
depends=('python2' 'krb5' 'python2-distribute' 'python-kobo' 'python2-krbv' 'python-lxml' 'python2-sphinx')
makedepends=('python2' 'docutils' 'python2-distribute' 'python-kobo' 'python2-krbv' 'python-lxml' 'python-sphinx')
source=("https://fedorahosted.org/releases/b/e/beaker/beaker-${pkgver}.tar.bz2"
        "arch-python2.patch")
md5sums=('ec51d8d16f9c6637c29cf43755488b05'
         'c2568705e5d36b6f2f8a44f96cdd845c')

build() {
    cd ${srcdir}/${pkgname}-${pkgver}
    patch -p1 -i ${srcdir}/arch-python2.patch
    env SUBDIRS="Common Client" make clean || return $?
    env SUBDIRS="Common Client" PY_PREFIX="/usr" DESTDIR=${pkgdir} make || return $?
}

package() {
	cd ${srcdir}/${pkgname}-${pkgver}
	SUBDIRS="Common Client" PY_PREFIX="/usr" DESTDIR=${pkgdir} \
		make install || return $?
}
