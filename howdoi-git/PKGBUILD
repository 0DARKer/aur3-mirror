# Maintainer: Bhanupong Petchlert <bpetlert@gmail.com>

pkgname=howdoi-git
_pkgname="howdoi"
_releasever=1.1.5
pkgver=1.1.5.3918f0a
pkgrel=1
pkgdesc="A code search tool. (from git, build for python 3)"
arch=(any)
url=("https://github.com/gleitz/howdoi")
license=('MIT')
depends=(
  'python'
  'python-cssselect'
  'python-lxml'
  'python-pyquery'
  'python-requests'
  'python-requests-cache'
  'python-pygments'
)
conflicts=('python2-howdoi' 'howdoi')
source=("${_pkgname}::git+https://github.com/gleitz/howdoi.git")
md5sums=('SKIP')

pkgver() {
  cd "$srcdir/${_pkgname}"
  changeset="$(git log -1 --pretty=format:%h)"
  echo "${_releasever}.$changeset"
}

package() {
  cd "$srcdir/${_pkgname}"
  python setup.py install --root=$pkgdir --optimize=1
}
