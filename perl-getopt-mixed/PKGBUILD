pkgname=perl-getopt-mixed
pkgver=1.11
pkgrel=4
pkgdesc="Library for getopt processing with both long and short options"
arch=('any')
url="http://search.cpan.org/~cjm/Getopt-Mixed/"
license=('GPL' 'PerlArtistic')
depends=('perl')
options=('!emptydirs')
source=(http://search.cpan.org/CPAN/authors/id/C/CJ/CJM/Getopt-Mixed-$pkgver.tar.gz)
md5sums=('e0bbc10a213404de932f0560b604589d')
sha512sums=('7f00e47aa89b0272864a84af97fca4468799032d95e45fa906db2de2dc82f5ab0999a8b7c664f993feaa0f1ea0fc2203f8dc3a63e9fca19d36f7be541fe4eec1')

build() {
  cd "$srcdir"/Getopt-Mixed-$pkgver
  PERL_MM_USE_DEFAULT=1 perl Makefile.PL INSTALLDIRS=vendor || return 1
  make  || return 1
  make test || return 1
}

package() {
  cd "$srcdir"/Getopt-Mixed-$pkgver
  make DESTDIR="$pkgdir" install
  cp -r "$pkgdir"/usr/share/perl5 "$pkgdir"/usr/lib/
  rm -rf "$pkgdir"/usr/share/perl5
  find "$pkgdir" -name perllocal.pod -delete
  find "$pkgdir" -name .packlist -delete
}
