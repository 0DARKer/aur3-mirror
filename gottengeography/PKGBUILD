pkgname=gottengeography
pkgver=2.0
pkgrel=1
pkgdesc="Automagically geotag photos with GPX data."
arch=(any)
url="http://exolucere.ca/gottengeography"
license=('GPL3')
depends=('python2>=2.7' 'python2<2.8' 'pyexiv2>=0.3' 'python2-gobject>=3.0.3' 'python2-dateutil>=1.5' 'libchamplain>=0.12.2' 'desktop-file-utils' 'hicolor-icon-theme' 'dconf')
makedepends=('python2-distutils-extra')
install=gottengeography.install
source=($pkgname-$pkgver.tar.gz::https://github.com/robru/gottengeography/tarball/v$pkgver
        $pkgname-$pkgver-setup.py.patch)
sha512sums=('529b6ad36b861b1a0cbcca8684d0e17b8c711e857c36f7f0e222c3875280e4a59ee38eb40be19c29736d8071d785e7d0c03e9a6b47fb08b6ac1ace75cbdf8c08'
            '487ab33b0cfd4955e2db0fe6410e24e236d9975ffe406ba99696f52e329a816af79e7b8571001c1e474625a3fe8a86bcc1d0f7c5b0245fd17222be2907867081')

build() {
  local dirname=$(tar tf "$srcdir/$pkgname-$pkgver.tar.gz" | sed 1q);
  cd "$srcdir/$dirname"

  msg "Patching..."
  for i in ${srcdir}/*.patch; do
    patch -Np1 -i "$i"
  done

  python2 setup.py install --root="$pkgdir" --optimize=1
}

