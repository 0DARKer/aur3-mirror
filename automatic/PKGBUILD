# Contributor: Matias De la Puente <mfpuente.ar@gmail.com>
pkgname=automatic
pkgver=0.6.4
pkgrel=1
pkgdesc="RSS downloader for Linux based systems, capable of adding downloaded torrents directly to Transmission"
arch=('i686' 'x86_64')
url="http://kylek.is-a-geek.org:31337/Automatic/"
license=('GPLv2')
depends=('transmission-cli' 'curl' 'libxml2' 'pcre')
backup=('etc/conf.d/automaticd')
source=(http://kylek.is-a-geek.org:31337/files/$pkgname-$pkgver-src.tar.gz
        automaticd.rc
        automaticd.conf)
md5sums=('e28b162a3f5486a961277bd1846466d8'
         '0a489457f39ddf6f1b4e9446cfc01a2c'
         'bfb0beae48cc8aecac0756c12baa403f')

build() {
  cd "$srcdir/$pkgname-$pkgver"

  ./configure --prefix=/usr
  make || return 1
  make DESTDIR="$pkgdir/" install || return 1
  install -d "$pkgdir/etc/rc.d"
  install -m755 "$srcdir/automaticd.rc" "$pkgdir/etc/rc.d/automaticd" || return 1
  install -D -m644 "$srcdir/automaticd.conf" "$pkgdir/etc/conf.d/automaticd"
}

