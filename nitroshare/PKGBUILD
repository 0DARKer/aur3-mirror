# Developer: Nathan Osman <https://launchpad.net/~george-edison55>

pkgname=nitroshare
pkgver=0.1
pkgrel=2
pkgdesc="Makes sending a file to another machine on the local network as easy as dragging-and-dropping"
arch=('i686' 'x86_64')
url="https://launchpad.net/nitroshare"
license=('GNU GPL v3')
depends=('qt' 'qjson')
makedepends=()
options=()
source=(https://launchpad.net/${pkgname}/0.1/0.1/+download/${pkgname}_${pkgver}.tar.gz nitroshare.install)
md5sums=('cb7d878b8974976cf38cae1c2878070f'
         '0e8cd7761d04a45d22d28ac7b98fa234')

build () {
	cd "${srcdir}/${pkgname}"
	sed -i "s_target.path = /opt/extras.ubuntu.com/nitroshare_target.path = ${pkgdir}/usr/bin_g" nitroshare.pro
	sed -i "s_Exec=/opt/extras.ubuntu.com/nitroshare/nitroshare_Exec=/usr/bin/${pkgname}_g" resource/other/${pkgname}.desktop
	qmake
	make
}

package (){
	cd "${srcdir}/${pkgname}"
	make install
	mkdir -p ${pkgdir}/usr/share/applications
	install -Dm644 resource/other/${pkgname}.desktop ${pkgdir}/usr/share/applications/
	install -Dm644 resource/images/logo.png ${pkgdir}/usr/share/pixmaps/${pkgname}.png
	install -Dm644 LICENSE "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
}
