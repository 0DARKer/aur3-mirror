# Maintainer: Xiao-Long Chen <chenxiaolong@cxl.epac.to>
pkgname=wxhexeditor-updated
pkgver=0.11
pkgrel=1
pkgdesc="a free hex editor / disk editor for Linux, Windows, MacOSX"
arch=('i686' 'x86_64')
url="http://wxhexeditor.sourceforge.net/"
license=('GPL')
depends=('udis86' 'wxgtk')
provides=("wxhexeditor=${pkgver}")
conflicts=('wxhexeditor')
source=("http://downloads.sourceforge.net/project/wxhexeditor/wxHexEditor/v0.11%20Beta/wxHexEditor-v0.11-src.tar.bz2")
sha512sums=('187fd3e2b20a68cd23644bf91afc7c65431670c4125b44eec665ebae3eadf8ffc13885f12386a4d5ca7274b402fa7609a94b6eb8111a229940dc85896a073d99')

build() {
  cd "${srcdir}/wxHexEditor"

  #Use shared udis86 because I can't get the included udis86 to compile 
  sed -i -e '/cd udis86/d' -e '/if libudis86/d' -e 's/-Iudis86/-I\/usr\/include\/libudis86/' -e '/LDFLAGS/s/^\(LDFLAGS.*libs`\)$/\1 -ludis86/g' -e '/LIBS/s/udis86.*libudis86.a//g' -e '/udis86.*libudis86.a:/d' makefile

  make
}

check() {
  cd "${srcdir}/wxHexEditor"
  msg "Nothing to check."
}

package() {
  cd "${srcdir}/wxHexEditor"
  make DESTDIR="${pkgdir}/" install
}

# vim:set ts=2 sw=2 et:
