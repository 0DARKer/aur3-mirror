# Contributor: Andre Klitzing <aklitzing () online () de>

pkgname=btg-svn
pkgver=511
pkgrel=1
pkgdesc='Linux bittorrent client implemented in C++ and using the rasterbar libtorrent library.'
url='http://btg.berlios.de/'
arch=('i686' 'x86_64')
license=('GPL')
depends=('libtorrent-rasterbar>=0.14' 'gnutls' 'dialog' 'curl')
makedepends=('subversion' 'boost')
options=('!libtool' '!emptydirs')
source=()
md5sums=()
_svntrunk=svn://svn.berlios.de/btg/trunk
_svnmod=btg

build() {
	cd "${srcdir}"
	msg "Updating SVN..."
	svn co $_svntrunk -r $pkgver $_svnmod
	msg "SVN checkout done or server timeout"
	msg "Starting make..."

	cd "${srcdir}/${_svnmod}" || return 1
	sh autogen.sh || return 1
	./configure --prefix=/usr \
	--enable-session-saving \
	--enable-btg-config \
	--enable-www \
	--enable-url \
	--enable-event-callback \
	--with-boost-date-time=mt \
	--with-boost-filesystem=mt \
	--with-boost-thread=mt \
	--with-boost-program-options=mt \
	|| return 1

	make || return 1
	make DESTDIR="$pkgdir/" install || return 1
}

