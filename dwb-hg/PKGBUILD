# Contributor: portix <portix@gmx.net>

pkgname=dwb-hg
pkgver=1024
pkgrel=1
pkgdesc="A webkit web browser with vi-like keyboard shortcuts, latest hg-pull" 
url="http://portix.bitbucket.org/dwb/"
arch=('i686' 'x86_64')
license=('GPL')
depends=('libwebkit' 'gtk2')
provides=(dwb)
conflicts=('dwb' 'dwb-gtk3-hg')
makedepends=('pkgconfig' 'mercurial')

hgroot="https://bitbucket.org/portix"
hgrepo="dwb"

build() {
  cd "$srcdir" 
  if [ -d "${hgrepo}" ]; then
    cd $hgrepo
    hg pull -u || true
  else 
    hg clone "$hgroot/$hgrepo" || true
  fi

  rm -rf $srcdir/$hgrepo-build
  cp -a ${srcdir}/${hgrepo} ${srcdir}/${hgrepo}-build
  cd ${srcdir}/${hgrepo}-build
  make 
}
package() {
  cd ${srcdir}/${hgrepo}-build
  make DESTDIR=${pkgdir} install 
}
