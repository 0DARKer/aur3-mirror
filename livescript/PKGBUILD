# Maintainer: Josh Klar <j@iv597.com>

pkgname=livescript
pkgver=1.1.1
pkgrel=1
pkgdesc='LiveScript is a language that compiles to JavaScript.'
arch=any
url=http://livescript.net
license=(custom)
depends=(nodejs)
optdepends=()
source=(https://github.com/gkz/LiveScript/archive/$pkgver.tar.gz)

check() {
  cd LiveScript-$pkgver
  bin/slake test:browser
}

package() {
  cd LiveScript-$pkgver

  mkdir -p $pkgdir/usr/lib/node_modules/LiveScript
  bin/slake build

  cp -R ./* $pkgdir/usr/lib/node_modules/LiveScript/

  mkdir -p $pkgdir/usr/bin

  ln -sf /usr/lib/node_modules/LiveScript/bin/{slake,lsc,livescript} $pkgdir/usr/bin/

  install -Dm644 LICENSE "$pkgdir/usr/share/licenses/${pkgname}/LICENSE"
  install -Dm644 README.md "$pkgdir/usr/share/doc/${pkgname}/README.md"
}
md5sums=('c1e958950728d832867690ca751a19ca')
