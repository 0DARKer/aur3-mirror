# Contributor: Thomas Robinson <robinsthom@gmail.com>
pkgname=robotframework
pkgver=2.5.6
pkgrel=2
pkgdesc="A keyword-driven test automation framework"
arch=('i686' 'x86_64')
url="http://www.robotframework.org"
license=('APACHE')
depends=('python2')
optdepends=('jython: for using robotframework with Java')
source=("http://robotframework.googlecode.com/files/$pkgname-$pkgver.tar.gz")
md5sums=('7fc7a9d647bdf1307c4b925c4cfe928c')

build() {
    cd "$srcdir/$pkgname-$pkgver"
    python2 setup.py install --prefix=/usr --root="$pkgdir" || return 1 

    # Fix up the runner scripts
    sed -i 's/^runner=.*/runner=\"\/usr\/lib\/python2.7\/site-packages\/robot\/runner\.py\"/g' "$pkgdir/usr/bin/pybot"
    sed -i 's/^runner=.*/runner=\"\/usr\/lib\/python2.7\/site-packages\/robot\/runner\.py\"/g' "$pkgdir/usr/bin/jybot"
    sed -i 's/^rebot=.*/rebot=\"\/usr\/lib\/python2.7\/site-packages\/robot\/rebot\.py\"/' "$pkgdir/usr/bin/rebot"
}
