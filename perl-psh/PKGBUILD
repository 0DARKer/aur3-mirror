# Author: Gregor N. Purdy, Sr. <gregor@cpan.org>
# Contributor: Charoite Lee <charoitehllee@live.com>
pkgname=perl-psh
pkgver=1.8.1
pkgrel=2
pkgdesc='Perl SHell'
arch=('any')
url='http://gnp.github.com/psh/'
license=('GPL' 'PerlArtistic')
depends=('perl-term-readline-gnu' 'perl-term-readline-perl' 'perl-bsd-resource')
makedepends=()
provides=('perl-psh' 'perl-psh-builtins-alias' 'perl-psh-builtins-bg' 'perl-psh-builtins-bind' 'perl-psh-builtins-builtin' 'perl-psh-builtins-cd' 'perl-psh-builtins-complete' 'perl-psh-builtins-delenv' 'perl-psh-builtins-dirs' 'perl-psh-builtins-drives' 'perl-psh-builtins-else' 'perl-psh-builtins-elsif' 'perl-psh-builtins-exit' 'perl-psh-builtins-export' 'perl-psh-builtins-fallback-env' 'perl-psh-builtins-fallback-ls' 'perl-psh-builtins-fc' 'perl-psh-builtins-fg' 'perl-psh-builtins-firsttime' 'perl-psh-builtins-forfile' 'perl-psh-builtins-function' 'perl-psh-builtins-hash' 'perl-psh-builtins-help' 'perl-psh-builtins-history' 'perl-psh-builtins-if' 'perl-psh-builtins-jobs' 'perl-psh-builtins-kill' 'perl-psh-builtins-modules' 'perl-psh-builtins-option' 'perl-psh-builtins-package' 'perl-psh-builtins-printenv' 'perl-psh-builtins-readline' 'perl-psh-builtins-rehash' 'perl-psh-builtins-rename' 'perl-psh-builtins-set' 'perl-psh-builtins-setenv' 'perl-psh-builtins-source' 'perl-psh-builtins-strategy' 'perl-psh-builtins-sudo' 'perl-psh-builtins-symbols' 'perl-psh-builtins-theme' 'perl-psh-builtins-tieopt' 'perl-psh-builtins-ulimit' 'perl-psh-builtins-unalias' 'perl-psh-builtins-which' 'perl-psh-completion' 'perl-psh-joblist' 'perl-psh-locale' 'perl-psh-locale-default' 'perl-psh-locale-french' 'perl-psh-locale-german' 'perl-psh-locale-italian' 'perl-psh-locale-portuguese' 'perl-psh-locale-spanish' ' perl-psh-os' 'perl-psh-os-unix' 'perl-psh-os-win' 'perl-psh-options' 'perl-psh-pcompletion' 'perl-psh-parser' 'perl-psh-perleval' 'perl-psh-prompt' 'perl-psh-strategy' 'perl-psh-strategy-auto_cd' 'perl-psh-strategy-auto_resume' 'perl-psh-strategy-bang' 'perl-psh-strategy-brace' 'perl-psh-strategy-built_in' 'perl-psh-strategy-darwin_apps' 'perl-psh::strategy::debug' 'perl-psh-strategy-eval' 'perl-psh-strategy-executable' 'perl-psh-strategy-fallback_builtin' 'perl-psh-strategy-perl' 'perl-psh-strategy-perlfunc' 'perl-psh-strategy-perlfunc_heavy' 'perl-psh-strategy-perlscript' 'perl-psh-support-alias' 'perl-psh-support-builtins' 'perl-psh-support-debug' 'perl-psh-support-dirs' 'perl-psh-support-env' 'perl-psh-support-functions' 'perl-psh-support-tiedoption' 'perl-psh-util')
conflicts=()
replaces=()
backup=()
options=('!emptydirs')
install=
source=("http://search.cpan.org/CPAN/authors/id/G/GR/GREGOR/psh-$pkgver.tar.gz")
changelog=

build() {
  cd "$srcdir/psh-$pkgver"

  export PERL_MM_USE_DEFAULT=1 PERL_AUTOINSTALL=--skipdeps \
    PERL_MM_OPT="INSTALLDIRS=vendor DESTDIR='$pkgdir'" \
    PERL_MB_OPT="--installdirs vendor --destdir '$pkgdir'" \
    MODULEBUILDRC=/dev/null

  { /usr/bin/perl Makefile.PL &&
    make &&
    make test &&
    make install; } || return 1
}
md5sums=('0b992dbfb907b571249923b51b213133')
