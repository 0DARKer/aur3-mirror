# Maintainer: Ecmel Ercan <ecmel dot ercan at gmail dot com>
pkgname=vim-motif
pkgver=7.3.659
pkgrel=1
dirname=vim
pkgdesc="Vi Improved, a highly configurable, improved version of the vi text editor"
url="http://www.vim.org"
arch=('x86_64' 'i686')
license=('custom:vim')
depends=('openmotif')
optdepends=()
makedepends=()
conflicts=('vi' 'vim' 'gvim' 'vim-runtime')
replaces=()
backup=()
install=
source=("ftp://ftp.archlinux.org/other/${dirname}/${dirname}-${pkgver}.tar.xz")
md5sums=('12d683d84c0d25d58ac1cd7d94771381')
 
build() {
  cd "${srcdir}/${dirname}-${pkgver}"

  ./configure --prefix=/usr --localstatedir=/var/lib/vim \
    --with-features=big --with-compiledby=ArchLinux \
    --enable-gpm --enable-acl --with-x=yes \
    --enable-gui=motif --enable-multibyte --enable-cscope \
    --disable-netbeans --disable-perlinterp --disable-pythoninterp \
    --disable-python3interp --disable-rubyinterp --disable-luainterp

  make
}


package() {
  cd "${srcdir}/${dirname}-${pkgver}"

  make -j1 VIMRCLOC=/etc DESTDIR="${pkgdir}" install

  ln -s "${pkgdir}/usr/bin/vim" "${pkgdir}/usr/bin/vi"

  install -Dm644 runtime/doc/uganda.txt \
    "${pkgdir}/usr/share/licenses/${pkgname}/license.txt"
}

