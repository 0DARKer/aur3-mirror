# Maintainer: Alad Wenter
# base64 -d <<< dGhlLmNoYW5naW5nLnNpZGVAZ21haWwuY29tCg==

pkgname=polkit-explorer
_pkgname=Polkit-Explorer-master
pkgver=1
pkgrel=4
pkgdesc="Present PolicyKit information in a human-readable form."
arch=('any')
url="https://github.com/scarygliders/Polkit-Explorer"
license=('ISC')
depends=('python2-pyqt4' 'python2-lxml')
source=('https://github.com/scarygliders/Polkit-Explorer/archive/master.zip'
	'polkit-explorer.desktop')
sha256sums=('877b909d2f85d7c5c448b75a15fc193b1c18882f4548bbd9dbce3805803ae751'
            '4343e7c3c9e0dc03bfae8521ab4197661c6ddf4caf150ba4cf3369dc9550518a')

prepare() {
	sed -i 's/python$/python2/' "$srcdir/$_pkgname/polkitex.py"
}

package() {
	cd "$srcdir/$_pkgname"
	mkdir -p "$pkgdir/usr/lib/python2.7/site-packages/polkitex"
	mkdir -p "$pkgdir/usr/bin"
	mkdir -p "$pkgdir/usr/share/applications"

	install -m755 polkitex.py "$pkgdir/usr/lib/python2.7/site-packages/polkitex"
	install -m755 Ui_About.py "$pkgdir/usr/lib/python2.7/site-packages/polkitex"
	install -m755 Ui_Glossary.py "$pkgdir/usr/lib/python2.7/site-packages/polkitex"
	install -m755 Ui_polkitex.py "$pkgdir/usr/lib/python2.7/site-packages/polkitex"

	ln -s /usr/lib/python2.7/site-packages/polkitex/polkitex.py "$pkgdir/usr/bin/polkitex"
	install -m644 "$startdir/polkit-explorer.desktop" "$pkgdir/usr/share/applications"
}
