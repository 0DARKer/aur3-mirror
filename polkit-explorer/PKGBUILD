# Maintainer: Alad Wenter
# base64 -d <<< dGhlLmNoYW5naW5nLnNpZGVAZ21haWwuY29tCg==

pkgname=polkit-explorer
_pkgname=Polkit-Explorer
pkgver=1
pkgrel=2
pkgdesc="Present PolicyKit information in a human-readable form."
arch=('any')
url="https://github.com/scarygliders/Polkit-Explorer"
license=('ISC')
depends=('python2-pyqt4' 'python2-lxml')
source=('git+https://github.com/scarygliders/Polkit-Explorer.git'
	'polkit-explorer.desktop')
sha256sums=('SKIP'
            '0b17dc41341c481c5a5b42939428d1890df8c4d1e4427a9e45481e9eead6afb5')

prepare() {
	sed -i 's/python$/python2/' "$srcdir/$_pkgname/polkitex.py"
}

package() {
	cd "$srcdir/$_pkgname"
	mkdir -p "$pkgdir/usr/lib/python2.7/site-packages/polkitex"
	mkdir -p "$pkgdir/usr/bin"
	mkdir -p "$pkgdir/usr/share/applications"

	install -m755 polkitex.py "$pkgdir/usr/lib/python2.7/site-packages/polkitex"
	install -m755 Ui_About.py "$pkgdir/usr/lib/python2.7/site-packages/polkitex"
	install -m755 Ui_Glossary.py "$pkgdir/usr/lib/python2.7/site-packages/polkitex"
	install -m755 Ui_polkitex.py "$pkgdir/usr/lib/python2.7/site-packages/polkitex"

	ln -s /usr/lib/python2.7/site-packages/polkitex/polkitex.py "$pkgdir/usr/bin/polkitex"
	install -m644 "$startdir/polkit-explorer.desktop" "$pkgdir/usr/share/applications"
}
