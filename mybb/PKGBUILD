# Maintainer: bslackr <brendan at vastactive dot com>
# Contributor: Piotr Rogo≈ºa <rogoza dot piotr at gmail dot com>
pkgname=mybb
pkgver=1.6.9
pkgrel=1
pkgdesc="MyBB is a professional and efficient discussion board"
arch=('any')
url=('http://mybb.com/')
license=('GPL')
depends=('php')
optdepends=('mysql>4.0' 'postgresql' 'sqlite' 'proftpd: to upload the MyBB software to your web
server' 'suphp: for executing PHP scripts with the permissions of their owners')
source=("http://www.mybb.com/download/latest/mybb_1605.zip")
md5sums=('8a4650176032e0941c3fa53c88c183a3')

build() {
  cd "$srcdir"
  # Documentation
  install -dm755 "${pkgdir}/usr/share/doc/mybb"
  cp -r Documentation/* ${pkgdir}/usr/share/doc/mybb
  find ${pkgdir}/usr/share/doc/mybb -type f -exec chmod 0644 '{}' ';'
  # Copy mybb and fix permissions
  install -dm755 "${pkgdir}/srv/http/mybb"
  cd "${pkgdir}/srv/http/mybb"
  cp -r ${srcdir}/Upload/* .
  find . -type f -exec chmod 0644 '{}' ';'
  touch inc/config.php
  chmod 0666 inc/config.php 
  chmod 0666 inc/settings.php
  chmod 0777 cache
  chmod 0777 cache/themes
  chmod 0777 uploads
  chmod 0777 uploads/avatars
  #Optional Changes
  chmod 0777 admin/backups
}

# vim:set ts=2 sw=2 et ft=sh tw=100:
