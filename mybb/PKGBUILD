# Contributor: Piotr Rogo≈ºa <rogoza.piotr@gmail.com>
pkgname=mybb
pkgver=1.4.13
pkgrel=1
pkgdesc='MyBB is a professional and efficient discussion board'
arch=('i686' 'x86_64')
url=('http://mybb.com/')
license=('GPL')
depends=('php')
optdepends=('mysql>4.0' 'postgresql' 'sqlite' 'proftpd: to upload the MyBB software to your web server')
makedepends=('unzip')
source=("${pkgname}_${pkgver//./}.zip::http://mybb.com/download/latest")

#  "lang_german_formal_1400.zip::http://mybb.com/download/80/zip"\
#  "lang_german_informal_1400.zip::http://mybb.com/download/79/zip"\
build() {
  cd "$srcdir"
  _install_dir="${pkgdir}/srv/http/mybb"
  install -dm755 ${_install_dir} || return 1
  cp -r Upload/* ${_install_dir} || return 1
  install -dm755 ${pkgdir}/usr/share/doc/mybb || return 1
  cp -r Documentation/* ${pkgdir}/usr/share/doc/mybb || return 1

  #permission
  find ${_install_dir} -type f -exec chmod 0644 '{}' ';'
  find ${pkgdir}/usr/share/doc/mybb -type f -exec chmod 0644 '{}' ';'
  #Required Changes
  touch ${_install_dir}/inc/config.php
  chmod 0666 ${_install_dir}/inc/config.php 
  chmod 0666 ${_install_dir}/inc/settings.php
  chmod 0777 ${_install_dir}/cache
  chmod 0777 ${_install_dir}/cache/themes
  chmod 0777 ${_install_dir}/uploads
  chmod 0777 ${_install_dir}/uploads/avatars
  #Optional Changes
  chmod 0777 ${_install_dir}/admin/backups
}

# vim:set ts=2 sw=2 et ft=sh tw=100:
md5sums=('0cda0ac91ce11394f3ba657202576366')
