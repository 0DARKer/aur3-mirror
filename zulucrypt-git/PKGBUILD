# Maintainer: Salan54 <salan at fremenil dot com>
# Created: 2013-01-29
pkgname=zulucrypt-git
pkgver=20130312
pkgrel=1
pkgdesc="a cli and gui frontend to cryptsetup."
url="http://code.google.com/p/zulucrypt/"
arch=('x86_64' 'i686')
license=('GPL2')
depends=('cryptsetup' 'qt4' 'libpwquality' 'libgnome-keyring')
conflicts=('zulucrypt')
optdepends=('kdeutils-kwallet: retrieve volume keys from kde kwallet')
makedepends=('cmake' 'git')

_gitroot='https://code.google.com/p/zulucrypt/'
_gitname='zulucrypt'
_branch='master'
_build='build'

options=('!buildflags')
changelog=${pkgname}.changelog
install=${pkgname}.install

build() {
    cd "${srcdir}"

    msg "Connecting to GIT server...."

    if [ -d $_gitname ] ; then
        rm -rf ${srcdir}/$_gitname
    fi
    git clone $_gitroot  $_gitname
 
    msg "GIT checkout done or server timeout"
    msg "Starting make..."
  
    cd "$_gitname"
    mkdir -p $_build
    cd $_build

    cmake -DCMAKE_INSTALL_PREFIX=/usr/ -DNOKDE=true -DCMAKE_BUILD_TYPE=release . ..
    make
}
 
package() {
  cd "${srcdir}/${_gitname}"
  cd build
  make DESTDIR="$pkgdir" install
}
 
# vim:set ts=2 sw=2 et:
