# Maintainer: Archlive <carbonjiao alt gmail dot com>
# Contributor:  Archlive <carbonjiao alt gmail dot com>

pkgname=archloop
pkgver=1
pkgrel=2
pkgdesc="Boot from loop file support to initcpio of Arch"
arch=('any')
url="http://code.google.com/p/archlive/wiki/BootArchFromLoop"
#url="http://archlive.googlecode.com"
license=('GPL2')
depends=('mkinitcpio' 'e2fsprogs' 'coreutils' 'util-linux' 'ntfs-3g')
optdepends=('ntfs-3g: to enable place the loop files in ntfs partition')
install=$pkgname.install

#_hgroot="https://save2loop.archlive-pkg.googlecode.com/hg/"
#_hgrepo="save2loop"
source=(automount_hook 
automount_install
archloop_omit_ntfs)

build() 
{
    #cd $srcdir
    #[ -d ${_hgrepo} ] && rm -rf ${_hgrepo}
    #hg clone ${_hgroot} ${_hgrepo}
    #cd ${_hgrepo}
    install -Dm644 automount_hook  ${pkgdir}/usr/lib/initcpio/hooks/automount
    install -Dm644 automount_install  ${pkgdir}/usr/lib/initcpio/install/automount
    install -Dm644 archloop_omit_ntfs ${pkgdir}/etc/rc.d/functions.d/archloop_omit_ntfs

}
md5sums=('48279f80e7e8a573a3e26c25845aba10'
         '00f3f8d20d1f025f0a53afbff667a5ef'
         '79ed9b553803a64e616242e4b1f912ec')
