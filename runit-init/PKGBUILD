# Maintainer: Neale Pickett <neale@woozle.org>

pkgname=runit-init
pkgver=3.0
pkgrel=1
pkgdesc="Replaces init with busybox's runit"
arch=(any)
url="http://woozle.org/neale/g.cgi/aur/runit-init"
license=(BSD)
depends=(busybox util-linux)
provides=(runit)
conflicts=(systemd-sysvcompat runit)
backup=(etc/mdev.conf)
install=runit-init.install

package () {
	cd $pkgdir
	cp -r $BUILDDIR/root/* .
	
	ln -s /bin/busybox usr/bin/runsv
	ln -s /bin/busybox usr/bin/runsvdir
	ln -s /bin/busybox usr/bin/svlogd
	ln -s /bin/busybox usr/bin/sv
	ln -s /bin/busybox usr/bin/mdev
	ln -s init usr/bin/telinit

    for d in service/*; do
        install -d -m 0770 -g log $d/log
        install $BUILDDIR/log-run $d/log/run
    done
}
