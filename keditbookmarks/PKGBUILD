# Maintainer: Joker-jar <joker-jar@yandex.ru>

pkgname=keditbookmarks
pkgver=4.5.3
pkgrel=1
pkgdesc="KeditBookmarks is a bookmark editor for Konqueror, Krusader and other applications, which use the XBEL standard for the bookmark format."
depends=('kdelibs=4.5.3')
makedepends=('subversion' 'cmake' 'automoc4' 'kdelibs')
conflicts=('kdebase-konqueror')
provides=('kdebase-konqueror')
url="http://websvn.kde.org/tags/KDE/$pkgver/kdebase/apps/keditbookmarks/"
license="GPL"
arch=('i686' 'x86_64')

_svntag=svn://anonsvn.kde.org/home/kde/tags/KDE/$pkgver/kdebase/apps/keditbookmarks
_svnmod=keditbookmarks
_svnfavicon=svn://anonsvn.kde.org/home/kde/tags/KDE/$pkgver/kdebase/apps/lib/konq/favicons

build() {
  cd $srcdir
  msg "Get sources..."
  svn co $_svntag $_svnmod
  msg "Get favicons..."
  svn co $_svnfavicon lib/konq/favicons
  cd $_svnmod
  msg "Fix CMakeLists.txt"
  sed -i '1 iproject(KEDITBOOKMARKS)\n\nfind_package(KDE4 REQUIRED)\ninclude (KDE4Defaults)\ninclude (MacroLibrary)\ninclude_directories (${KDE4_INCLUDES})\n' CMakeLists.txt
  mkdir -p build
  cd build
  msg "Starting make..."
  cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_SKIP_RPATH=ON -DCMAKE_BUILD_TYPE=RELEASE ..
  make
  make DESTDIR=$pkgdir install
  msg "Enjoy ;)"
}
