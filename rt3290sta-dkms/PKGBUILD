# Contributor Alper Kanat <alperkanat@raptiye.org>
# Contributor Jaeic Lee <zeraxeal@gmail.com>
# Contributor Zhang Li <richselian@gmail.com>
# Based on rt2860 package from Marius Dransfeld <marius.dransfeld@gmail.com>
# Maintainer: Benjamin Landis <bmlandis2010@gmail.com>

pkgname="rt3290sta-dkms"
pkgver="2.6.0.0"
pkgrel=1
pkgdesc="Drivers for rt3290 chipset wireless cards"
arch=("i686" "x86_64")
url="http://www.ralinktech.com/"
license=('GPL')
depends=("dkms")
makedepends=("make" "linux-headers")
replaces=("rt2860" "rt3090" "rt3290")
conflicts=("rt2860" "rt3090" "rt3290")
install="rt3290.install"

source=(
    "http://dl.dropbox.com/u/11876059/DPO_RT3290_LinuxSTA_V2600_20120508.tar.gz"
    "rt3290.conf"
    "rt3290.patch"
    "dkms.conf"
)
md5sums=(
    "78e70f9b1373c53b974b6080d34838af"
    "6720a1f7b5185711ca78b730de58dc7c"
    "86c75d3076b48e27dab73806c7930f12"
    "adabcd0755e1fff6daaa4ecd83119937"
)

build() {
    cd              "${srcdir}"
    tar -xzvf       "${srcdir}/DPO_RT3290_LinuxSTA_V2600_20120508.tar.gz"
    cd              "${srcdir}/DPO_RT3290_LinuxSTA_V2600_20120508"
    patch -p1 <     "${srcdir}/rt3290.patch"
}

package() {
    mkdir -p        "$pkgdir/usr/src"
    cp -r           "${srcdir}/DPO_RT3290_LinuxSTA_V2600_20120508" "$pkgdir/usr/src/rt3290sta-2.6.0.0"
    cd              "$pkgdir/"
    install -Dm644  "${srcdir}/dkms.conf" "$pkgdir/usr/src/rt3290sta-2.6.0.0/dkms.conf"
    install -Dm644  "${srcdir}/rt3290.conf" "$pkgdir/etc/modprobe.d/rt3290.conf"
}
