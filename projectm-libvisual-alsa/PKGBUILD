# Contributor: Allen Li <darkfeline (at) abagofapples.com>

pkgname=projectm-libvisual-alsa
pkgver=2.1.0
pkgrel=1
pkgdesc="A music visualizer using alsa input and libvisual"
url="http://projectm.sourceforge.net"
arch=('i686' 'x86_64')
license=('GPL')
groups=('projectm-pulse')
depends=('libvisual' 'libgl' 'sdl')
makedepends=('pkgconfig' 'xproto' 'cmake')
source=(http://sourceforge.net/projects/projectm/files/$pkgver/projectM-libvisual-alsa-$pkgver-Source.tar.gz)
md5sums=(7d7e7fdbfc9667961fbbbbe9dd089fb7)

build() {
  cd $srcdir/projectM-libvisual-alsa-$pkgver-Source
  cmake -D CMAKE_BUILD_TYPE=RELEASE CMAKE_INSTALL_PREFIX=/usr/local .
  make
  make DESTDIR=$pkgdir install
  sed -i '/Exec/sx/usr/binx/usr/local/binx' "$pkgdir/usr/local/share/applications/projectM-libvisual-alsa.desktop"
}

