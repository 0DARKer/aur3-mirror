#Contributor: Flamelab <panosfilip@gmail.com>
#Fixes thanks to: friver

pkgname=wingpanel-bzr
pkgver=38
pkgrel=2
pkgdesc="A space-saving top panel by the Elementary project"
arch=('i686' 'x86_64')
url="https://launchpad.net/wingpanel"
license=('GPL')
depends=('libindicator' 'glib2' 'libgee' 'cairo')
makedepends=('bzr' 'intltool' 'gettext' 'vala' 'python-waf')
options=('!libtool' '!emptydirs')
install=${pkgname}.install
optdepends=('ayatana-ubuntu: Ubuntu Ayatana -indicator- project')

_bzrtrunk=lp:wingpanel
_bzrmod=wingpanel

build() {

  msg "Connecting to the server...."

        cd ${srcdir}
        if [ -d "${srcdir}/${_bzrmod}" ] ; then
                cd ${_bzrmod} && bzr up
                msg "The local files are updated."
        else
                bzr checkout ${_bzrtrunk}
        fi

  msg "BZR checkout done or server timeout"
  msg "Starting make..."

  cd ${srcdir}/${_bzrmod}

  waf configure
  waf
  
}

package() {
	
  cd ${srcdir}/${_bzrmod}
  install -Dm755 ./_build_/wingpanel ${pkgdir}/usr/bin/wingpanel

}
