# Maintainer: Nano77 <nanoarch77@gmail.com>
# Last update: 09/01/2012


pkgname=gdm3setup
pkgver=20120109
pkgrel=1
pkgdesc="A GUI to setting GDM3"
arch=(any)
license=('GPL')
source=()
url="http://github.com/Nano77/gdm3setup"
depends=('gdm>=3' 'gnome-shell')
makedepends=('git')


_gitroot="git://github.com/Nano77/gdm3setup.git"
_gitname="gdm3setup"

build() {
  cd ${srcdir}

  msg "Connecting to GIT server..."
  if [[ -d ${_gitname} ]]; then
    (cd ${_gitname} && git pull origin)
  else
    git clone ${_gitroot} ${_gitname}
  fi
  msg "GIT checkout done or server timeout"

}

package() {
	cd ${srcdir}/
	
	install --mode=755 -D ${srcdir}/gdm3setup/gdm3setup.py ${pkgdir}/usr/bin/gdm3setup.py
	install --mode=755 -D ${srcdir}/gdm3setup/gdm3setup-daemon.py ${pkgdir}/usr/bin/gdm3setup-daemon.py
	install --mode=755 -D ${srcdir}/gdm3setup/start-gdm3setup-daemon ${pkgdir}/usr/bin/start-gdm3setup-daemon
	install --mode=755 -D ${srcdir}/gdm3setup/gdmlogin.py ${pkgdir}/usr/bin/gdmlogin.py
	install --mode=755 -D ${srcdir}/gdm3setup/get_gdm.sh ${pkgdir}/usr/bin/get_gdm.sh
	install --mode=755 -D ${srcdir}/gdm3setup/set_gdm.sh ${pkgdir}/usr/bin/set_gdm.sh
	install -D ${srcdir}/gdm3setup/gdm3setup.desktop ${pkgdir}/usr/share/applications/gdm3setup.desktop
	install -D ${srcdir}/gdm3setup/apps.nano77.gdm3setup.service ${pkgdir}/usr/share/dbus-1/system-services/apps.nano77.gdm3setup.service
	install -D ${srcdir}/gdm3setup/apps.nano77.gdm3setup.service ${pkgdir}/usr/share/dbus-1/services/apps.nano77.gdm3setup.service
	install -D ${srcdir}/gdm3setup/apps.nano77.gdm3setup.conf ${pkgdir}/etc/dbus-1/system.d/apps.nano77.gdm3setup.conf
	install -D ${srcdir}/gdm3setup/apps.nano77.gdm3setup.policy ${pkgdir}/usr/share/polkit-1/actions/apps.nano77.gdm3setup.policy
	cp -r ${srcdir}/gdm3setup/locale/ ${pkgdir}/usr/share/locale/
}
