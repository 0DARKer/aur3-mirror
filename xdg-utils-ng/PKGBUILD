# Contributor: Alexander 'hatred' Drozdov <adrozdoff@gmail.com>

pkgname=xdg-utils-ng
_pkgname=xdg-utils
pkgver=1.0.2
pkgrel=1
pkgdesc="Command line tools that assist applications with a variety of desktop integration tasks with Hatred's pathches."
arch=(any)
url="http://portland.freedesktop.org/"
depends=('sh')
license=(MIT)
source=(http://portland.freedesktop.org/download/$_pkgname-$pkgver.tgz hatred-xdg-utils-ng.diff xdg-utils.rc)

provides=(${_pkgname})
conflicts=(${_pkgname})
replaces=(${_pkgname})

build() {
  cd "${srcdir}/${_pkgname}-${pkgver}"

  patch -p1 < ../hatred-xdg-utils-ng.diff

  ./configure --prefix=/usr --mandir=/usr/share/man || return 1
  make || return 1
  make DESTDIR="${pkgdir}" install || return 1
  
  install -m755 -d "${pkgdir}/usr/share/licenses/${_pkgname}"
  install -m644 LICENSE "${pkgdir}/usr/share/licenses/${_pkgname}/" || return 1
  
  install -m755 -d "${pkgdir}/etc/xdg/${_pkgname}"
  install -m644 ../xdg-utils.rc "${pkgdir}/etc/xdg/${_pkgname}/" || return 1
}

md5sums=('348a5b91dc66426505022c74a64b2940'
         'edf03d639f57c7abea06fa88bca60d39'
         '9fd41c9de2ec6e6f2192c012143d4b6c')
