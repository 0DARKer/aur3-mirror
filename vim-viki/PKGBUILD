# Maintainer: Laszlo Papp <djszapi @ archlinux us>
#
pkgname=vim-viki
pkgver=3.13
_scriptid=11933
pkgrel=1
pkgdesc="A personal wiki for Vim"
arch=('i686' 'x86_64')
url="http://www.vim.org/scripts/script.php?script_id=861"
license=('custom')
depends=(vim)
groups=('vim-plugins')
install=vimdoc.install
source=(${pkgname}.vba.gz::http://www.vim.org/scripts/download_script.php?src_id=${_scriptid}
        license.txt)
md5sums=('feef011dbb6917b48696bf66617cf2e6'
         'efbd5986e691ce8c876fb86e8f5961ea')

build() {
    install -d ${pkgdir}/usr/share/vim/vimfiles/{doc,plugin,syntax,autoload,indent,ftplugin,compiler}
    vim -c "UseVimball $srcdir" -c "q" ${pkgname}.vba

    for x in compiler plugin indent syntax autoload; do
		install -Dm755 ${srcdir}/$x/* ${pkgdir}/usr/share/vim/vimfiles/$x/ || return 1;
	done

    for x in doc; do
		install -Dm644 ${srcdir}/$x/* ${pkgdir}/usr/share/vim/vimfiles/$x/ || return 1;
	done

    cp -r ${srcdir}/ftplugin/* ${pkgdir}/usr/share/vim/vimfiles/ftplugin/ || return 1
    install -Dm644 ${srcdir}/license.txt ${pkgdir}/usr/share/licenses/${pkgname}/license.txt || return 1
}

