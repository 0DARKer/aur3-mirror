# Maintainer: Mike Dacre <mike@dacre.me>
pkgname=sratoolkit
pkgver=2.4.3
pkgrel=2
pkgdesc="A toolkit from NCBI to download SRA data files and reference sequences and to do file format conversions"
arch=('x86_64')
url="http://www.ncbi.nlm.nih.gov/books/NBK47540/"
license=('custom')
groups=('sequence_analysis')
depends=('bzip2' 'libxml2' 'gcc-libs-multilib' 'fuse' 'curl' 'java-runtime')
source=("http://ftp-trace.ncbi.nlm.nih.gov/sra/sdk/$pkgver/sratoolkit.$pkgver-ubuntu64.tar.gz"
        "https://raw.githubusercontent.com/ncbi/sra-tools/master/LICENSE"
        'sratoolkit')

md5sums=('6a5f51b4d175b72b22e3bf07f59bd1c4'
         '9ba753649b72f0bbcac5741536c6953d'
         '87ba95f60c2f19c1c04a14dac731fef4')


package() {
  mkdir -p "$pkgdir/usr"
  mkdir -p "$pkgdir/usr/lib"
  mkdir -p "$pkgdir/usr/share/java"
  mkdir -p "$pkgdir/usr/share/licenses/sratoolkit"
  mkdir -p "$pkgdir/usr/share/sratoolkit"
  cp -r "$srcdir/sratoolkit.$pkgver-ubuntu64/bin" "$pkgdir/usr"
  cp -r "$srcdir/sratoolkit.$pkgver-ubuntu64/example" "$pkgdir/usr/share/sratoolkit"
  cp -r "$srcdir/sratoolkit.$pkgver-ubuntu64/example" "$pkgdir/usr/share/schema"
  cp "$srcdir/sratoolkit.$pkgver-ubuntu64/README" "$pkgdir/usr/share/sratoolkit"
  cp "$srcdir/sratoolkit.$pkgver-ubuntu64/README-vdb-config" "$pkgdir/usr/share/sratoolkit"
  mv "$pkgdir/usr/bin/libvdb_jni.so" "$pkgdir/usr/lib"
  mv "$pkgdir/usr/bin/sratoolkit.jar" "$pkgdir/usr/share/java"
  install -m0755 "$srcdir/sratoolkit" "$pkgdir/usr/bin"
  install -m0644 "$srcdir/LICENSE" "$pkgdir/usr/share/licenses/sratoolkit"
}
