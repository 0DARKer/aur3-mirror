# Maintainer: Sebastien Binet <binet@farnsworth>
# Contributor: Nicolas Qui√©not < niQo at aur >

pkgname=libkqueue
pkgver=1.0.2
pkgrel=1 
pkgdesc="libkqueue is a portable userspace implementation of the kqueue(2) kernel event notification mechanism"
url="http://mark.heily.com/libkqueue/"
arch=('i686' 'x86_64')
license=('BSD')
depends=('glibc' 'linux-api-headers')
makedepends=('gcc')
backup=()
options=('!libtool')

source=(configure.patch https://www.heily.com/~mheily/proj/libkqueue/dist/$pkgname-$pkgver.tar.gz)

build() {
  cd $startdir/src/$pkgname-$pkgver

  msg "patching 'configure'..."
  patch -p1 < ../configure.patch || return 1
  CFLAGS='-fPIC -I./include -I./src/common -Wall -Werror' ./configure --prefix=/usr || return 1
  make || return 1
  make DESTDIR=$startdir/pkg install || return 1
}

md5sums=('7f6bd2f566a2a37dc1feff894a083066'
         '26fa37988cac677cb9ff8ac77e3f16c6')
