# Contributor: Anton S <fluffylime at gmail dot com>
pkgname=shifty-git
pkgver=20091206
pkgrel=1
pkgdesc="Dynamic tagging library for Awesome window manager"
arch=("i686" "x86_64")
url="http://awesome.naquadah.org/wiki/Shifty"
license=("unknown")
depends=("awesome")
makedepends=("git")
conflicts=("shifty")
provides=("shifty")
source=()
md5sums=()

_gitroot=git://git.mercenariesguild.net/awesome.git
_gitbranch=shifty-master
_gitname=awesome

build() {
  cd "${srcdir}"

# Update the library
  msg "Connecting to GIT server...."
  if [[ -d "${_gitname}" ]]; then
      (cd "${_gitname}" && git pull origin)
      msg "The local files are updated."
  else
      git clone "${_gitroot}" -b "${_gitbranch}" "${_gitname}"
  fi
  msg "GIT checkout done or server timeout"

# Install the library
  install -d "${pkgdir}/usr/share/awesome/lib" || return 1
  cp -a "${_gitname}/lib/shifty.lua.in" "${pkgdir}/usr/share/awesome/lib/shifty.lua" || return 1
}
