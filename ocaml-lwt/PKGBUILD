#Contributor: serp <serp256 at gmail dot com>
srcname=lwt
pkgname="ocaml-$srcname"
pkgver=2.1.1
pkgrel=1
pkgdesc="A library for cooperative threads in OCaml"
arch=('i686' 'x86_64')
url="http://ocsigen.org/lwt/"
license=('LGPL')
depends=('ocaml>=3.11.0' 'ocaml-findlib' 'react')
source=(http://ocsigen.org/download/$srcname-$pkgver.tar.gz)
md5sums=('f885bb9bd5304a799bc75049dd034b6a')
conflicts=('lwt')

build() {
  cd $srcdir/$srcname-$pkgver
  make 
	mkdir -p "$startdir/pkg/$(ocamlfind printconf destdir)/stublibs"
  make DESTDIR="$pkgdir/usr/lib/ocaml/site-lib" install
	mkdir -p $pkgdir/usr/share/doc/$pkgname
	make doc
	cp -r _build/lwt.docdir/* $pkgdir/usr/share/doc/$pkgname/
  install -Dm 644 LICENSE $pkgdir/usr/share/licenses/$pkgname/LICENSE
}
