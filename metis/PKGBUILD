# Maintainer: jedbrown
# Contributor: mickele
# Contributor: gborzi
# Contributor: abenson
pkgname=metis
pkgver=5.0.2p3
_pkgver=5.0.2-p3
pkgrel=1
pkgdesc="METIS is a set of serial programs for partitioning graphs, partitioning finite element meshes, and producing fill reducing orderings for sparse matrices."
url="http://glaros.dtc.umn.edu/gkhome/metis/metis/overview"
license="custom"
depends=()
makedepends=(make gcc patch sed coreutils cmake)
provides=()
conflicts=()
replaces=()
backup=()
install=${pkgname}.install
arch=('i686' 'x86_64')
options=('docs')
#source=(http://glaros.dtc.umn.edu/gkhome/fetch/sw/metis/${pkgname}-${pkgver}.tar.gz)
source=(http://ftp.mcs.anl.gov/pub/petsc/externalpackages/${pkgname}-${_pkgver}.tar.gz)
md5sums=('fad6e916885661638a0d85a1f9978cb7')

build() {
  cd ${srcdir}/${pkgname}-${_pkgver}
  make config shared=1 prefix=/usr
  make
}

package() {
  cd ${srcdir}/${pkgname}-${_pkgver}

  make install DESTDIR=${pkgdir}
  # Install doc and license
  #install -m644 -D manual/manual.pdf ${pkgdir}/usr/share/doc/$pkgname/manual.pdf
  install -m644 -D LICENSE.txt ${pkgdir}/usr/share/licenses/${pkgname}/LICENSE || return 1
}
