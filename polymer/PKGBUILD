# Contributor: Artem Sorokin <mail.dextor@gmail.com>
pkgname=polymer
pkgver=0.3.2
pkgrel=8
pkgdesc="A port of KDE QT style Plastik, which does not depend on any KDE libraries"
arch=('i686' 'x86_64')
license=('GPL')
url="http://kde-look.org/content/show.php?content=21748"
depends=('qt3')
makedepends=('qtchooser')
source=(http://www.kde-look.org/CONTENT/content-files/21748-polymer-0.3.2.tar.bz2)
md5sums=('5e566deb55586069378c85cb477f5005')

sed_makefile() {
	sed 's/-I$(QTDIR)\/include/-I\/usr\/include\/qt3/' Makefile > Makefile_new && mv Makefile_new Makefile
}

build() {
	cd $srcdir/polymer-$pkgver

	export QT_SELECT=3

	./configure --prefix=/usr || return 1

	cd style
	/usr/bin/qmake && sed_makefile
	cd ../config
	/usr/bin/qmake && sed_makefile
	cd ..

	export QTDIR=/usr/lib/qt3
	
	make -C style || return 1
	make -C config || return 1

	make libdir=$pkgdir/usr/lib/qt3/plugins/styles prefix=$pkgdir/usr install
}
