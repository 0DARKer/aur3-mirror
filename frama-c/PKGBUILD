# Contributor: Paolo Herms

pkgname=frama-c
pkgver=20101202_beta2
_codename=Carbon
pkgrel=2
pkgdesc="An extensible platform dedicated to source-code analysis of C software."
arch=(i686 x86_64)
license=('LGPL2.1')
url="http://frama-c.cea.fr/"
depends=('gtksourceview' 'libgnomecanvas')
optdepends=('coq: interactive proofs in why'
	    'alt-ergo: automatic proofs in why'
	    'simplify-bin: automatic proofs in why'
	    'yices-bin: automatic proofs in why'
	    'z3-bin: automatic proofs in why'
	    'why: jessie plugin')
makedepends=('ocaml' 'lablgtk2>=2.14' 'coq')
source=(http://frama-c.com/download/frama-c-$_codename-${pkgver/_/-}.tar.gz)

build() {
  cd "$srcdir"/frama-c-$_codename-${pkgver/_/-}
  ./configure --prefix=/usr
  make  || return 1
  make  DESTDIR="$pkgdir" install || return 1
#  cd why 
#  export PATH=$PATH:"$pkgdir"/usr/bin
#  ./configure --prefix=/usr
#  make FRAMAC_SHARE="$pkgdir"/usr/share/frama-c FRAMAC_LIB="$pkgdir"/usr/lib/frama-c || return 1
#  make FRAMAC_SHARE="$pkgdir"/usr/share/frama-c FRAMAC_LIB="$pkgdir"/usr/lib/frama-c DESTDIR="$pkgdir" COQLIB="$pkgdir"/usr/lib/coq install || return 1
}

md5sums=('4350b26e277f7be176423be2b3420506')
md5sums=('c976509eddc78b5fa9fe8954fb521bae')
