# Contributor: Paolo Herms

pkgname=frama-c
pkgver=20120901
_codename=Oxygen
pkgrel=2
pkgdesc="An extensible platform dedicated to source-code analysis of C software."
arch=(i686 x86_64)
license=('LGPL2.1')
url="http://frama-c.cea.fr/"
depends=('gtksourceview2' 'libgnomecanvas' 'ocaml')
makedepends=('lablgtk2>=2.14' 'coq')
source=(http://frama-c.com/download/frama-c-$_codename-${pkgver/_/-}.tar.gz)
options=(!strip)

build() {
  cd "$srcdir"/frama-c-$_codename-${pkgver/_/-}
  #make frama-c use locally compiled ocamlgraph to avoid conflict with lablgtk
  sed -i 's/case $OCAMLGRAPH_VERSION in/case puppa in/' configure
  ./configure --prefix=/usr
  make
  make  DESTDIR="$pkgdir" install
}

md5sums=('f8f22501761fc67fcac5daceac82bb31')
