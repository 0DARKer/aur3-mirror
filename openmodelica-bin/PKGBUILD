# Maintainer: Randy Heydon <randy dot heydon at clockworklab dot net>
 
pkgname=openmodelica-bin
pkgver=latest
pkgrel=1
pkgdesc="The Open Source Modelica Compiler - precompiled binary"
arch=('i686' 'x86_64')
url="https://www.openmodelica.org"
license=('GPL3' 'custom:OSMC-PL')
depends=('sh' 'omniorb' 'lpsolve' 'sqlite3' 'soqt' 'qwt5')
if [[ $CARCH == 'i686' ]]; then
source=(https://build.openmodelica.org/tar-xz/openmodelica-i386-$pkgver.tar.xz)
md5sums=('')
else
source=(https://build.openmodelica.org/tar-xz/openmodelica-amd64-$pkgver.tar.xz)
md5sums=('5cb01861601a2f17cfc1387d4444ba38')
fi
options=(!strip)
 
package() {
cp -r "$srcdir/usr" "$pkgdir"
ln -s /usr/lib/liblapack.so.3 "$pkgdir/usr/lib/liblapack.so.3gf"
ln -s /usr/lib/libblas.so.3 "$pkgdir/usr/lib/libblas.so.3gf"
ln -s /usr/lib/libqwt5.so "$pkgdir/usr/lib/libqwt-qt4.so.5"
#install -Dm 644 OSMC-License.txt $pkgdir/usr/share/licenses/$pkgname/LICENSE
}