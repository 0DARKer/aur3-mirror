# Maintainer: agapito <agapitofrndez@ozu.es>
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Contributor: Fabian Schoelzel <myfirstname.mylastname@googlemail.com>
# Contributor: funkyou <spamopfer@nickname.berlin.de>
# Contributor: tardo <tardo@nagi-fanboi.net>
# Contributor: Stefan Husmann <stefan-husmann@t-online.de>

pkgname=mlt-qt
_pkgname=mlt
pkgver=0.6.2
pkgrel=1
pkgdesc="An open source multimedia framework without gtk2 dependence"
arch=('i686' 'x86_64')
url="http://www.mltframework.org"
license=('GPL')
depends=('sdl_image' 'libsamplerate' 'libdv' 'qt' 'sox' 'libxml2' 'ffmpeg' 'frei0r-plugins')
optdepends=('jack' 'libexif')
makedepends=('subversion')
conflicts=('mlt' 'mlt++<=0.3.8' 'mlt-gtk')
provides=('mlt=0.5.10')
source=(http://downloads.sourceforge.net/sourceforge/$_pkgname/$_pkgname-$pkgver.tar.gz)
md5sums=('7b3a866790381a227d278bb050d87590')

build() {
  cd $srcdir/$_pkgname-$pkgver

  [ $CARCH == "i686" ] && SSE2=--disable-sse2 || SSE2=

  msg "SSE2=$SSE2"

  ./configure --prefix=/usr --enable-gpl --disable-gtk2 \
	--qimage-libdir=/usr/lib/ --qimage-includedir=/usr/include/Qt \
	--avformat-swscale $SSE2

  make || return 1
  make DESTDIR=$pkgdir install || return 1
}
