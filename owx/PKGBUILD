# Contributor: [Vitaliy Berdinskikh](mailto:ur6lad@archlinux.org.ua) aka UR6LAD

pkgname=owx
pkgver=20110701
pkgrel=1
pkgdesc="Commad line tool for Wouxun. Utility downloads binary memory map from Wouxun radio to file and uploads this file to the radio. This map contains all settings, channels, locks etc."
arch=('i686' 'x86_64')
url="http://owx.chmurka.net"
license=('custom:beerware')
makedepends=('gcc' 'sed')
replaces=('wouxun')
source=($url/files/${pkgname}-current.tar.gz LICENSE)

build() {
	cd $srcdir/${pkgname}-${pkgver}/src

	# version as the package version
	sed -i -e s:SVN:${pkgver}: version.h
	make
}

package() {
	mkdir -p $pkgdir/usr/{bin,libexec}
	mkdir -p $pkgdir/usr/share/{doc/$pkgname,licenses/$pkgname}

	cd $srcdir
	install -m 644 LICENSE $pkgdir/usr/share/licenses/$pkgname

	cd ${pkgname}-${pkgver}/docs
	install -m 644 * $pkgdir/usr/share/doc/$pkgname

	cd ../src
	install -D -m 755 $pkgname $pkgdir/usr/libexec/$pkgname
	ln -sf ../libexec/$pkgname $pkgdir/usr/bin/$pkgname-check
	ln -sf ../libexec/$pkgname $pkgdir/usr/bin/$pkgname-get
	ln -sf ../libexec/$pkgname $pkgdir/usr/bin/$pkgname-put
	ln -sf ../libexec/$pkgname $pkgdir/usr/bin/$pkgname-export
	ln -sf ../libexec/$pkgname $pkgdir/usr/bin/$pkgname-import
}

md5sums=('e9dfb0349a2b8144f2d175fbec0251f9'
         '04c8deadd6984048760870d0fb397f25')
sha256sums=('43c14704e7d7346237c4e4a38dd9216f2432c7bc596756b53e4582b0471a1f2d'
            'fd0d0ebbd3437872fe147bc5c86a25234b1d166f6bb6f9399900ca2aebb78ec2')
