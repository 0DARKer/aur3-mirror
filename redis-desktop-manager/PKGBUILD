# Maintainer: JokerYu <dayushinn@gmail.com>
pkgname=redis-desktop-manager
pkgver=0.7.5
pkgrel=1
pkgdesc="Open source cross-platform Redis GUI based on Qt 5."
arch=("i686" "x86_64")
url="http://redisdesktop.com"
license=("MIT")
depends=("")
md5sums=("48151217db6794b0c118266153df2519")
source=("https://github.com/uglide/RedisDesktopManager/releases/download/0.7.5/redis-desktop-manager_0.7.5_i386_debian.deb")
# source=("redis-desktop-manager_0.7.5_i386_debian.deb")
if [ "$CARCH" = "x86_64" ]; then
    # from package qt5-base-5.2.0-4-i686.pkg.tar.xz
    source+=("libQt5Concurrent.so.5.2.0")
    md5sums+=("7bc4cfec3308723c5157555e0346bdb2")
elif [ "$CARCH" = "i686" ]; then
    depends+=("qt5-base")
fi
package() {
    tar zxfp ${srcdir}/data.tar.gz -C ${pkgdir}/
    if [ "$CARCH" = "x86_64" ];then
        cp libQt5Concurrent.so.5.2.0 ${pkgdir}/usr/share/redis-desktop-manager/lib/libQt5Concurrent.so.5
    fi
    rm -rf ${pkgdir}/usr/share/doc
    chmod -R 755 ${pkgdir}/usr
}