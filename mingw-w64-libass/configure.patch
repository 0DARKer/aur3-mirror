diff -ru libass-0.10.1/libass/Makefile.am patched/libass/Makefile.am
--- libass-0.10.1/libass/Makefile.am	2012-10-15 16:45:23.000000000 +0200
+++ patched/libass/Makefile.am	2013-06-16 20:41:46.810577853 +0200
@@ -12,7 +12,7 @@
                     ass_drawing.h ass_cache_template.h ass_render.h \
                     ass_parse.c ass_parse.h ass_render_api.c ass_shaper.c \
                     ass_shaper.h ass_strtod.c
-libass_la_LDFLAGS = -version-info $(LIBASS_LT_CURRENT):$(LIBASS_LT_REVISION):$(LIBASS_LT_AGE)
+libass_la_LDFLAGS = -no-undefined -version-info $(LIBASS_LT_CURRENT):$(LIBASS_LT_REVISION):$(LIBASS_LT_AGE)
 libass_la_LDFLAGS += -export-symbols $(srcdir)/libass.sym
 
 assheadersdir = $(includedir)/ass
diff -ru libass-0.10.1/libass/Makefile.in patched/libass/Makefile.in
--- libass-0.10.1/libass/Makefile.in	2013-06-16 20:14:04.609629206 +0200
+++ patched/libass/Makefile.in	2013-06-16 20:41:34.983737909 +0200
@@ -258,7 +258,7 @@
                     ass_parse.c ass_parse.h ass_render_api.c ass_shaper.c \
                     ass_shaper.h ass_strtod.c
 
-libass_la_LDFLAGS = -version-info \
+libass_la_LDFLAGS = -no-undefined -version-info \
 	$(LIBASS_LT_CURRENT):$(LIBASS_LT_REVISION):$(LIBASS_LT_AGE) \
 	-export-symbols $(srcdir)/libass.sym
 assheadersdir = $(includedir)/ass
diff -ru libass-0.10.1/ltmain.sh patched/ltmain.sh
--- libass-0.10.1/ltmain.sh	2012-10-16 19:59:19.000000000 +0200
+++ patched/ltmain.sh	2013-06-16 20:51:23.372363362 +0200
@@ -2560,7 +2560,7 @@
     ;;
   *ar\ archive*) # could be an import, or static
     if eval $OBJDUMP -f $1 | $SED -e '10q' 2>/dev/null |
-       $EGREP 'file format pe-i386(.*architecture: i386)?' >/dev/null ; then
+       $EGREP 'file format (pei*-i386(.*architecture: i386)?|pe-arm-wince|pe-x86-64)' >/dev/null ; then
       win32_nmres=`eval $NM -f posix -A $1 |
 	$SED -n -e '
 	    1,100{
diff -ru libass-0.10.1/m4/libtool.m4 patched/m4/libtool.m4
--- libass-0.10.1/m4/libtool.m4	2012-10-16 19:59:19.000000000 +0200
+++ patched/m4/libtool.m4	2013-06-16 20:40:33.866175865 +0200
@@ -3011,11 +3011,13 @@
   # Base MSYS/MinGW do not provide the 'file' command needed by
   # func_win32_libid shell function, so use a weaker test based on 'objdump',
   # unless we find 'file', for example because we are cross-compiling.
-  if ( file / ) >/dev/null 2>&1; then
+  # func_win32_libid assumes BSD nm, so disallow it if using MS dumpbin.
+  if ( test "$lt_cv_nm_interface" = "BSD nm" && file / ) >/dev/null 2>&1; then
     lt_cv_deplibs_check_method='file_magic ^x86 archive import|^x86 DLL'
     lt_cv_file_magic_cmd='func_win32_libid'
   else
-    lt_cv_deplibs_check_method='file_magic file format pei*-i386(.*architecture: i386)?'
+    # Keep this pattern in sync with the one in func_win32_libid.
+    lt_cv_deplibs_check_method='file_magic file format (pei*-i386(.*architecture: i386)?|pe-arm-wince|pe-x86-64)'
     lt_cv_file_magic_cmd='$OBJDUMP -f'
   fi
   ;;
