# Maintainer: Vinycius Maia <suportevg@uol.com.br>

pkgname=indicator-cpufreq-bzr
pkgbranch=trunk
pkgver=r60
pkgrel=1
pkgdesc="CPU frequency indicator."
provides=('indicator-cpufreq')
arch=('i686' 'x86_64')
url="https://launchpad.net/indicator-cpufreq"
license=('GPL')
depends=('cpufrequtils' 'python2')
makedepends=('bzr' 'python2-distutils-extra')

_bzrbranch=lp:indicator-cpufreq
_bzrmod=indicator-cpufreq

build() {
   cd ${srcdir}

  if [ ${LANG%%_*} == "pt" ]; then
    msg "Conectando-se ao servidor..."
  else
    msg "Connecting to the server..."
  fi

  if [ ! -d ./${_bzrmod} ]; then
    bzr co ${_bzrbranch} ${_bzrmod} || exit 1
  else
    bzr up ${_bzrmod} || exit 1
  fi

  if [ ${LANG%%_*} == "pt" ]; then
	  msg "Obtenção do bzr completa."
	  msg "Iniciando make"
  else
 	  msg "BZR checkout done"
	  msg "Starting make..." 
  fi

  cd ${_bzrmod}
  python2 ./setup.py build
  python2 ./setup.py install --root="${pkgdir}" --prefix="usr"
}
