# Maintainer: Kelvin Ng (qpalz) <kelvin9302104 at gmail dot com>

use_initrd=	# set to yes, no, 1, 0, or anything means you boot with initrd,
		# else leave it blank

pkgname=startuptime
pkgver=3
pkgrel=1
pkgdesc="A simple tool to show the time taken to boot the OS and compare your time with others (Linux boot with systemd only)"
arch=('any')
url="https://github.com/Kelvin-Ng/startuptime-client"
license=('GPL')
depends=(systemd)
provides=(startuptime)
source=("https://github.com/Kelvin-Ng/startuptime-client/archive/v${pkgver}.tar.gz")
md5sums=('952c8cf2a8a4e5e65c0cde07617e6473')

build() {
	cd "$srcdir/$pkgname-client-$pkgver"
	
	if [ -n "$use_initrd" ]; then
		sed 's/use_initrd=/use_initrd=yes/'
	fi

	msgfmt -o zh_TW/startuptime.mo zh_TW/startuptime.po
	msgfmt -o zh_CN/startuptime.mo zh_CN/startuptime.po
}

package() {
	cd "$srcdir/$pkgname-client-$pkgver"

	install -D -m755 startuptime.sh "${pkgdir}/usr/bin/startuptime.sh"
	install -D -m644 zh_TW/startuptime.mo "${pkgdir}/usr/share/locale/zh_TW/LC_MESSAGES/startuptime.mo"
	install -D -m644 zh_CN/startuptime.mo "${pkgdir}/usr/share/locale/zh_CN/LC_MESSAGES/startuptime.mo"
}

