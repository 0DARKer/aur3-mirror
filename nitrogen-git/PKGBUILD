# Contributor: Erol V. Aktay <e.aktay@gmail.com>
pkgname=nitrogen-git
pkgver=20091121
pkgrel=1
pkgdesc="A background browser and setter for X windows (built from git repo)"
arch=('i686' 'x86_64')
url="http://l3ib.org/nitrogen/"
license="GPL"
depends=('gtkmm')
makedepends=('git')
conflicts=('nitrogen' 'nitrogen-svn')
provides=('nitrogen' 'nitrogen-svn')
source=()
md5sums=()

_gitname="nitrogen"                      
_gitroot="git://code.l3ib.org/$_gitname.git"

build() {
	cd $startdir/src
	msg "Connecting to git.freedesktop.org GIT server...."

	if [ -d $startdir/src/$_gitname ] ; then
		cd $_gitname && git pull origin
		msg "The local files are updated."
	else
		git clone $_gitroot
	fi

	msg "GIT checkout done or server timeout"
	msg "Starting make..."

	cp -r  $startdir/src/$_gitname $startdir/src/$_gitname-build
	cd $startdir/src/$_gitname-build

	./bootstrap
	./configure --prefix=/usr
	make || return 1
	make DESTDIR=$startdir/pkg install
}
