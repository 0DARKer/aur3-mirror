# Maintainer: xquiet <matteo@xquiet.eu>
pkgname=yaflight
pkgver=0.99.6
pkgrel=3
pkgdesc="YaFlight - yet another flightgear launch control"
arch=('i686'
      'x86_64')
url="http://yaflight.altervista.org"
license=('GPL3')
groups=(Games)
depends=('flightgear'
         'qtwebkit'
	 'zlib')
makedepends=('qt>=4.8.3'
             'qtwebkit'
             'zlib')
optdepends=()
provides=()
conflicts=()
replaces=()
backup=()
options=()
install=
changelog=
source=($pkgname-$pkgver.tar.bz2::https://bitbucket.org/_pmat_/yaflight/downloads/$pkgname-$pkgver.tar.bz2 
	'yaflight.desktop')
noextract=()
md5sums=('7ec04dc4301a66efd383b52791b702da'
         '64285fe31506054f81f7607d7fc0d62f') #generate with 'makepkg -g'

build() {
  echo "====================="
  echo $srcdir
  echo "====================="
  cd "$srcdir/$pkgname-$pkgver"
  qmake QMAKE_CXXFLAGS="-Dunix"
  make
}

package() {
  cd "$srcdir/$pkgname-$pkgver"

  install -m 755 -D $pkgname "$pkgdir/usr/share/games/$pkgname"
  #install -m 755 -D $pkgname-icon-48.png "$pkgdir/usr/share/icons/$pkgname.png"
  mkdir -p $pkgdir/usr/share/applications
  echo "OK"
  cp $srcdir/yaflight.desktop $pkgdir/usr/share/applications/
}
