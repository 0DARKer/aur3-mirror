# Maintainer: xquiet <matteo@xquiet.eu>
pkgname=yaflight
pkgver=0.99.17
pkgrel=1
pkgdesc="yet another flightgear launch control"
arch=('i686'
      'x86_64')
url="http://yaflight.altervista.org"
license=('GPL3')
groups=(Games)
depends=('flightgear'
         'qtwebkit')
makedepends=('qt>=4.8.3'
             'qtwebkit')
optdepends=()
provides=()
conflicts=()
replaces=()
backup=()
options=()
install=
changelog=
source=($pkgname-$pkgver.tar.bz2::https://bitbucket.org/_pmat_/yaflight/downloads/$pkgname-$pkgver.tar.bz2 
	'yaflight.desktop')
noextract=()
md5sums=('fccb68cea863505869f7ce46dacf2d31'
         '9a5fff77c37cc2b6d26e40be00d185db') #generate with 'makepkg -g'

build() {
  cd "$srcdir/$pkgname-$pkgver"
  qmake QMAKE_CXXFLAGS="-Dunix" DATADIR=/usr/share/yaflight
  pushd languages
  lrelease *.ts
  popd
  make
}

package() {
  cd "$srcdir/$pkgname-$pkgver"

  install -m 755 -D $pkgname "$pkgdir/usr/bin/$pkgname"
  install -m 755 -D icons/$pkgname-custom-icon.png "$pkgdir/usr/share/icons/$pkgname.png"
  install -m 755 -d "$pkgdir/usr/share/yaflight/languages/"
  install -m 755 -D languages/*qm "$pkgdir/usr/share/yaflight/languages/"
  mkdir -p $pkgdir/usr/share/applications
  cp $srcdir/yaflight.desktop $pkgdir/usr/share/applications/
}
