# Maintainer: Benjamin Cremer <bc@benjamin-cremer.de>
pkgname=qafooprofiler-daemon
pkgver=0.3.0
pkgrel=1
pkgdesc="Qafoo Profiler Daemon (qprofd) (unofficial)"
arch=('i686' 'x86_64')
url="http://qafoolabs.com"
license=('custom')
install=qprofd.install

if [[ $CARCH == "x86_64" ]]; then
    source=("https://s3-eu-west-1.amazonaws.com/qafoo-profiler/downloads/qprofd_amd64-$pkgver.tar.gz")
    sha256sums=('f7333c3cfe40307d30ea760e4503bc63837862d34dcca3c975b292094e1d5923')
    _arch=amd64
else
    source=("https://s3-eu-west-1.amazonaws.com/qafoo-profiler/downloads/qprofd_i386-$pkgver.tar.gz")
    sha256sums=('bc47718ccbf7492448174531153b010e3305d99dce3ae74d83ccd2809e648d85')
    _arch=i368
fi

source+=('qprofd.service' 'qprofd.tmpfiles')
sha256sums+=('96043645c6f98c09df31dd5a20e68ae78afcca0b50344bc410da21a804fc69b6'
             '08b226b588223be2ccdf50954536216107a0cfb379ff0a66d74f1eba7b489cce')

package() {
    cd "${srcdir}/qprofd-${pkgver}"
    install -Dm755 qprofd "${pkgdir}"/usr/bin/qprofd
    install -Dm644 LICENSE "${pkgdir}"/usr/share/licenses/${pkgname}/LICENSE
    install -Dm644 ../qprofd.service "${pkgdir}"/usr/lib/systemd/system/qprofd.service
    install -Dm644 ../qprofd.tmpfiles "${pkgdir}"/usr/lib/tmpfiles.d/qprofd.conf
}

