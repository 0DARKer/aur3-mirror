# Contributor: Kamil Stachowski <kamil.stachowski@gmail.com>

pkgname=atp-vim
pkgver=9.3.5
pkgrel=1
pkgdesc="Automatic LaTex Plugin for Vim"
url='http://sourceforge.net/projects/atp-vim/'
arch=('i686' 'x86_64')
license=('GPL')
depends=('python2-psutil')
makedepends=('vim')
provides=('atp-vim')
conflicts=()
replaces=()
source=("http://mesh.dl.sourceforge.net/project/atp-vim/releases/AutomaticTexPlugin_$pkgver.vba")
install=("$pkgname.install")
md5sums=('eb8184bd07edd7c1096c66f6f3a70fd2')


build() {
	cd "$srcdir"
	vim "AutomaticTexPlugin_$pkgver.vba" -c "silent! UseVimball ." -c "q"
}

package() {
	mkdir -p "$pkgdir/usr/share/vim/vimfiles"
	cp -r "$srcdir/autoload" "$pkgdir/usr/share/vim/vimfiles"
	cp -r "$srcdir/colors" "$pkgdir/usr/share/vim/vimfiles"
	cp -r "$srcdir/ftplugin" "$pkgdir/usr/share/vim/vimfiles"
	cp -r "$srcdir/syntax" "$pkgdir/usr/share/vim/vimfiles"
	# workaround for doc/tags
	cp -r "$srcdir/doc/" "$pkgdir/usr/share/vim/vimfiles"
	mv "$pkgdir/usr/share/vim/vimfiles/doc/tags" "$pkgdir/usr/share/vim/vimfiles/doc/atp-tags"
}
