# Maintainer: Joffrey TISSERON <tisseron.joffrey@aliceadsl.fr>
# Contributor: Andrea Scarpino <andrea@archlinux.org>
# Contributor: Dylon Edwards <deltaecho@archlinux.us>

pkgname=kcm-touchpad
_pkgname=kcm_touchpad
pkgver=0.3.1
pkgrel=1
url="http://www.kde-apps.org/content/show.php/kcm_touchpad?content=113335"
pkgdesc="Touchpads configuration module for KDE"
license=('GPL2')
arch=('i686' 'x86_64')
depends=('xf86-input-synaptics' 'kdelibs')
makedepends=('cmake' 'automoc4')
source=(${_pkgname}-${pkgver}.tar.gz::https://github.com/mishaaq/${_pkgname}/tarball/${_pkgname}-${pkgver}
	touchpad.svgz
	touchpad.desktop)
md5sums=('f355a658d2e9267fdf4e8d8f88038bcf'
	 'bc84000c066b149c000575c30c6f5b5b'
	 'b0e52a6140f0fd1f7a4e18d5c31fcd4c')

build(){	
  cd ${srcdir}/mishaaq-${_pkgname}-00370b5
  cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE=Release
  make
}

package() { 
  cd ${srcdir}/mishaaq-${_pkgname}-00370b5
  make DESTDIR="${pkgdir}" install
  cd ${pkgdir}
  mkdir usr/share/icons
  mkdir usr/share/icons/hicolor
  mkdir usr/share/icons/hicolor/scalable
  mkdir usr/share/icons/hicolor/scalable/devices
  cp ../touchpad.svgz usr/share/icons/hicolor/scalable/devices/input-touchpad.svgz
  rm usr/share/kde4/services/touchpad.desktop
  cp ../touchpad.desktop usr/share/kde4/services/touchpad.desktop
}
