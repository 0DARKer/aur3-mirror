# Submitter: Jianjun Mao <justmao945@gmail.com>
# Maintainer: <lulker@chome.com>
pkgname=luvit
pkgver=0.6.1
pkgrel=2
pkgdesc="An attempt to do something crazy by combining node.js' platform layer, libuv, with Luajit."
arch=('i686' 'x86_64')
url="http://luvit.io/"
license=('APACHE')
source=("http://luvit.io/dist/${pkgver}/luvit-${pkgver}.tar.gz"
"Makefile.openssl.patch")
md5sums=('e10c6caa7a57b8757f11a82c2248a163'
         'cda11053ad160557e883633bc053cb06')
build() {
	# -D_FORTIFY_SOURCE=2 does not let 'crash' compile
	unset CPPFLAGS
	cd "$srcdir/$pkgname-$pkgver"
	patch -p1 < $srcdir/Makefile.openssl.patch
	make
}
package() {
	cd "$srcdir/$pkgname-$pkgver"
	make DESTDIR="$pkgdir/" PREFIX=/usr install
}
