# Maintainer: flan_suse

# This suite contains the following:
#        * xfwm4 theme
#        * xfwm4 compact theme
#        * metacity theme
#        * emerald theme
#        * gtk2 theme
#        * gtk3 theme
#        * xfce4-notify theme
#        * lightdm theme
#        * wallpaper

pkgname=xfce-theme-greybird
_pkgname=Greybird
pkgver=0.8.1
pkgrel=4
pkgdesc="A low saturation Xfce theme, introduced in the release of Xubuntu 11.04"
arch=('any')
url="http://shimmerproject.org/projects/greybird/"
license=('GPL3' 'CCPL')
groups=('xfce-themes-shimmer-collection')
depends=('gtk-engine-murrine')
makedepends=('git')
optdepends=('elementary-xfce-icons: matching icon set, use dark icon theme'
            'gtk-engine-unico: required for gtk3 support'
            'lightdm-gtk-greeter: required for the lightdm theme') 
conflicts=('xfce-theme-greybird-git')

package() {
    
    # Clone git repository
    git clone "git://github.com/shimmerproject/$_pkgname.git"

    # Change into source directory
    cd "$_pkgname"

    # Checkout current git-tag stable release
    # Comment out the next line if you wish to use the master branch instead; not recommended
    git checkout "v$pkgver"

    # Remove excess files and return to parent folder
    rm -f ".gitignore"
    rm -rf ".git"
    cd ..

    # Create installation directories
    install -d -m755 "${pkgdir}/usr/share/themes/"
    install -d -m755 "${pkgdir}/usr/share/backgrounds/"
    install -d -m755 "${pkgdir}/usr/share/xfce4/backdrops/"

    # Copy the wallpaper to the correct directory, then remove the backdrops folder
    cp -f "$_pkgname/backdrops/greybird-wall-1920x1200.png" "${pkgdir}/usr/share/backgrounds/$_pkgname.png"
    rm -rf "$_pkgname/backdrops"

    # Install the rest of the theme
    cp -rf "$_pkgname" "${pkgdir}/usr/share/themes/"

    # Make a symbolic link for the compact version of the xfwm4 theme
    install -d -m755 "${pkgdir}/usr/share/themes/${_pkgname} Compact"
    cd "${pkgdir}/usr/share/themes/${_pkgname} Compact"
    ln -s "../${_pkgname}/xfwm4_compact" "xfwm4"

    # Make a symbolic link for the LightDM theme
    install -d -m755 "${pkgdir}/usr/share/themes/${_pkgname} LightDM"
    cd "${pkgdir}/usr/share/themes/${_pkgname} LightDM"
    ln -s "../${_pkgname}/lightdm" "gtk-3.0"

    # Make a symbolic link inside of the Xfce backdrops directory, for use with Desktop Settings
    cd "${pkgdir}/usr/share/xfce4/backdrops/"
    ln -s "../../backgrounds/$_pkgname.png" "$_pkgname.png"

}
