# Maintainer: Xewl - Ken Verhaegen <xewl@live.com>
# Credits to AnjoCaido0 for the launcher file.
# http://mcalpha.tk/

pkgname=minecraftsp-anjocaido
epoch=1
pkgver=autoupdate
pkgrel=4
pkgdesc="Minecraft is a sandbox game which allows players to build constructions out of textured cubes in a 3D world."
arch=(any)
license=('unknown')
url="http://www.mcalpha.tk/"
depends=('java-runtime' 'xorg-xrandr' 'openal')
provides=('minecraft')
replaces=('minecraft')
source=('minecraft'
        'MinecraftSP.jar'
        'minecraft.desktop'
        'minecraft.png'
        'readme.txt')
md5sums=('be3369716936dab9c441d4eaddbde7a2'
         'b5233ded056d313db43bfa42d3c95821'
         'dad9b69540dac246ced70b98f07e8e08'
         'b2c25797bf513a5ee215dd90b4b828e3'
         '7119963de1fc2ff67f5d576f44559dc0')
install=minecraft.install

package() {
    cd "$srcdir" || return 1

    mkdir -p $pkgdir/usr/bin
    cp minecraft $pkgdir/usr/bin
    mkdir -p $pkgdir/usr/share/minecraft
    cp MinecraftSP.jar $pkgdir/usr/share/minecraft

    # Desktop launcher with icon
    install -Dm644 $srcdir/minecraft.desktop $pkgdir/usr/share/applications/minecraft.desktop
    install -Dm644 $srcdir/minecraft.png     $pkgdir/usr/share/pixmaps/minecraft.png

    # Readme
    install -Dm644 $srcdir/readme.txt        $pkgdir/usr/share/minecraft/readme.txt
}

post_install() {
    echo ">>> PACKAGES NOTES"
    echo ">>> --------------"
    echo ">>> IMPORTANT NOTICE:"
    echo ">>> 1) This launcher allows you to play on single player freely."
    echo ">>> 2) If you want to play the full game, buy the official one."
    echo ">>> 3) This game will auto update and store the updated binary and game configuration"
    echo ">>> when needed; at first launch you'll be able to choose your installation folder."
    echo
    echo ">>> For more infos do 'cat /usr/share/minecraft/readme.txt"
    echo
    echo ">>> For restoring old saves:"
    echo ">>> 1) Enable hidden files visibility"
    echo ">>> 2) Enter into the folder '.minecraft/saves' or "$CUSTOM_MINECRAFT_FOLDER/saves" "
    echo ">>> 3) Copy the folders (your worlds)"
    echo ">>> 4) Paste them into 'your_new_installation_folder/saves' "
    echo ">>> 4-bis) Optional: remove your old Minecraft installation deleting '.minecraft' folder"
    echo ">>> 5) Enjoy your blocks :P"
}
