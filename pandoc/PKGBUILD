# Maintainer: Jim Pryor <profjim@jimpryor.net>
# Contributor: Alex Griffin <griffin.aj@gmail.com>
pkgname=pandoc
pkgver=1.8.2
pkgrel=1
pkgdesc="Convert between markup formats (no haskell libs)"
url="http://johnmacfarlane.net/pandoc/"
license=('GPL2' 'custom')
arch=('i686' 'x86_64')
makedepends=('haskell-platform' 'haskell-zip-archive')
conflicts=('haskell-pandoc')
source=(http://pandoc.googlecode.com/files/$pkgname-$pkgver.tar.gz)

build() {
    cd $srcdir/$pkgname-$pkgver

    runhaskell Setup configure --prefix=/usr --docdir=/usr/share/doc/${pkgname} 
    runhaskell Setup build 
}

package(){
    cd $srcdir/$pkgname-$pkgver
    runhaskell Setup copy --destdir=$pkgdir 

	# Man pages are nice! default install gives bad permissions
	install -D -m644 man/man1/pandoc.1        $pkgdir/usr/share/man/man1/pandoc.1
	install -D -m644 man/man1/markdown2pdf.1  $pkgdir/usr/share/man/man1/markdown2pdf.1

#	cd $pkgdir
#
#	# delete unneeded libraries
#	rm -rf usr/lib
#
#    # Shell scripts providing useful wrappers around pandoc, no longer updated
#	rm -f usr/share/$pkgname-$pkgver/markdown2pdf
#
#    # Other documents
#    install -D -m644 usr/share/$pkgname-$pkgver/COPYRIGHT     usr/share/licenses/$pkgname/COPYRIGHT 
#    install -D -m644 usr/share/$pkgname-$pkgver/README        usr/share/doc/$pkgname/README 
#    install -D -m644 usr/share/$pkgname-$pkgver/changelog     usr/share/doc/$pkgname/changelog 
#	rm -rf usr/share/$pkgname-$pkgver/{BUGS,INSTALL,COPYRIGHT,README,changelog} usr/share/doc/$pkgname/COPYING
#
}

md5sums=('82cc93d08a9b76723ce73d25f1e19baa')
