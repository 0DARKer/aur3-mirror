# Contributor: skatiger <skatiger at gmail dot com>

pkgname=gwibber-service-sina
pkgver=0.9.1
pkgrel=1
pkgdesc='sina weibo service for gwibber'
arch=('i686' 'x86_64')
url='http://code.google.com/p/stardictproject'
license=('GPL')
depends=('gwibber>=3.2.0' 'python2>=2.7')
makedepends=('python-distutils-extra')

source=("http://launchpad.net/gwibber-service-sina/trunk/${pkgver}/+download/gwibber-service-sina-${pkgver}.tar.gz"
        'sina')

build()
{
	cd "$srcdir/${pkgname}-$pkgver"

    patch -p1 <<EOF
diff -urN a/setup.cfg b/setup.cfg
--- a/setup.cfg 
+++ b/setup.cfg 
@@ -1,5 +1,5 @@
 [install]
-prefix = /usr
+prefix = ${pkgdir}/usr

 [build]
 i18n = True
diff -urN a/setup.py b/setup.py
--- a/setup.py
+++ b/setup.py
@@ -19,7 +19,7 @@
     ('share/gwibber/plugins/sina/ui/icons/16x16', glob("ui/icons/16x16/*.*")),
     ('share/gwibber/plugins/sina/ui/icons/22x22', glob("ui/icons/22x22/*.*")),
     ('share/gwibber/plugins/sina/ui/icons/scalable', glob("ui/icons/scalable/*.*")),
-    ('share/gwibber/plugins/sina/data', glob("data/*.*")),
+    ('share/gwibber/plugins/sina/data', glob("data/*")),
     ],
       cmdclass = { "build" :  build_extra.build_extra,
                    "build_i18n" :  build_i18n.build_i18n,
EOF
    if [ ! -d data ]; then
        mkdir data
    fi
    cp ../sina data/
    python2 setup.py install
}



md5sums=('3d6ea761e91baf1a206c3ce8bc85da24'
         'd0adf30bebcdedf09de1b02799a85a8d')
