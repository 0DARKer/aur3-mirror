# Maintainer: Micael Dias
pkgname=luxblend25-hg
pkgver=1078
pkgrel=1
pkgdesc="LuxRender exporter plugin for Blender 2.5"
arch=('any')
url="http://www.luxrender.net/"
license=('GPL')
depends=('luxrender' 'blender')
makedepends=('mercurial')
conflicts=('luxblend25')
source=()
md5sums=()

blenderscripts="/usr/share/blender/2.58/scripts"

_hgroot="http://src.luxrender.net"
_hgrepo="luxblend25"

build() {
  msg "Connecting to $_hgrepo Mercurial server......."
  if [ -d $_hgrepo ]; then
    cd "$srcdir"/$_hgrepo
    hg pull -u
    cd "$srcdir"
  else
    hg clone -b default $_hgroot/$_hgrepo $_hgrepo
  fi

  msg "Mercurial checkout done or server timeout"
}

package() {
  #cd "$srcdir"/$_hgrepo/src

  cd "$pkgdir"
  touch dummy
  rm -R *
  mkdir -p "$pkgdir"/$blenderscripts/addons

  cp -R "$srcdir"/$_hgrepo/src/luxrender "$pkgdir"/$blenderscripts/addons/luxrender

  find "$pkgdir" -type f -exec chmod 644 "{}" \;
  find "$pkgdir" -type d -exec chmod 755 "{}" \;
}

# vim:set ts=2 sw=2 et:
