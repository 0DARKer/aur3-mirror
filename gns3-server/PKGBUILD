# Maintainer: korjjj <korjjj+aur@gmail.com>

pkgname=gns3-server
_pkgver=1.0-beta1
pkgver=1.0beta1
pkgrel=2
pkgdesc='GNS3 server. This is an early release of the new GNS3. _You need a GNS3 membership in order to use it._'
arch=('any')
url='https://github.com/GNS3/gns3-server'
license=('GPL3')
makedepends=('python-setuptools')
depends=('python-setuptools' 'python-pyzmq' 'python-tornado' 'python-jsonschema')
optdepends=('python-netifaces')
conflicts=()
md5sums=('4d6f65ac73ce7379335ddec2e3a1a8b6'
         '19cb7a5d031c3070f67d493a3e06f913')
source=("https://github.com/GNS3/${pkgname}/archive/v${_pkgver}.tar.gz"
        'check_origin.patch')

pkgver() {
	echo ${_pkgver} | tr -d '-'
}

build() {
  cd ${srcdir}/${pkgname}-${_pkgver}
  patch -Np1 -i ../check_origin.patch
}

package() {
  cd ${srcdir}/${pkgname}-${_pkgver}
  python setup.py install --root=${pkgdir} --optimize=1
  install -Dm644 LICENSE "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
}

# vim:set ts=2 sw=2 et:
