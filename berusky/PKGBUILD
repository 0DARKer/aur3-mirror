# Contributor: Daniel J Griffiths <ghost1227@archlinux.us>

pkgname=berusky
pkgver=1.1
pkgrel=1
pkgdesc="A logic game based on the puzzle game Sokoban"
arch=('i686')
url="http://www.anakreon.cz/en/"
license=('GPL')
depends=('sdl')
source=(http://www.anakreon.cz/download/${pkgname}/tar.gz/${pkgname}-${pkgver}.tar.gz \
        http://www.anakreon.cz/download/${pkgname}/tar.gz/${pkgname}-data-1.0.tar.gz \
	berusky.png \
	berusky.desktop)
md5sums=('bb0a03a9fde970124a2674943775c117' \
         '25d4258481bd315eadccecb098c06f70' \
	 '8a5f5607b4883f4c86d1ba9fd5ab6156' \
	 '08699c6e9e1004887c3a6f53f2bf797f')

build() {
	cd ${srcdir}/${pkgname}-${pkgver}
	sed -i 's|var/games|usr/share|g' src/defines.h
	./configure --prefix=/usr || return 1
	make || return 1
	make DESTDIR=${pkgdir} install
	cd ..
	cp -r ${pkgname}-data-1.0/{GameData,Graphics,Levels,berusky.ini} ${pkgdir}/usr/share/berusky
	install -m644 -D berusky.png ${pkgdir}/usr/share/pixmaps/berusky.png
	install -m644 -D berusky.desktop ${pkgdir}/usr/share/applications/berusky.desktop
	rm ${pkgdir}/usr/share/berusky/*.spec
}
