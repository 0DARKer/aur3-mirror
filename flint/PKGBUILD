# Contributor: Rémy Oudompheng <oudomphe@clipper.ens.fr>
# Maintainer: Rémy Oudompheng <oudomphe@clipper.ens.fr>
pkgname=flint
pkgver=1.5.0
pkgrel=1
pkgdesc="A C library for doing number theory"
arch=('i686' 'x86_64')
url="http://www.flintlib.org"
license=('GPL')
depends=('gmp' 'ntl')
source=(http://www.flintlib.org/flint-$pkgver.tar.gz
        makefile.diff)
md5sums=('b15cf740b93bb087cd7c4adcbcf6144d'
         '21c3d23ee4497945e49b4ef96e70b84f')

build() {
  cd "$startdir/src/flint-$pkgver"
  patch -p0 < ../makefile.diff
  cd zn_poly && ln -s include/* .

  cd "$startdir/src/flint-$pkgver"
  export FLINT_GMP_INCLUDE_DIR=/usr/include
  export FLINT_GMP_LIB_DIR=/usr/lib
  export FLINT_NTL_INCLUDE_DIR=/usr/include
  export FLINT_NTL_LIB_DIR=/usr/lib
  make FLINT_TUNE="$CFLAGS" libflint.so || return 1
  install -D -m 755 libflint.so $pkgdir/usr/lib/libflint.so
  install -d "$pkgdir/usr/include/FLINT/zn_poly/src/"
  install -d "$pkgdir/usr/include/zn_poly"
  install -m 644 *.h "$pkgdir/usr/include/FLINT"
  install -m 644 zn_poly/src/*.h "$pkgdir/usr/include/FLINT/zn_poly/src/"
}

