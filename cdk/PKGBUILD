# Maintainer: drm00 <jasmintee at gmx dot de>

pkgname=cdk
pkgver=1.4.7
pkgrel=4
pkgdesc="A Java library for structural chemo- and bioinformatics."
arch=('any')
url="http://sourceforge.net/projects/cdk/"
license=('LGPL2.1')
depends=('java-runtime')
makedepends=('java-environment' 'apache-ant')
install="cdk.install"
source=("http://downloads.sourceforge.net/project/cdk/cdk/${pkgver}/cdk-src%2Blibs-${pkgver}.tar.gz" "cdk.install" "parse_atom_charge.patch")
md5sums=('a9c0531c306fd6d06397d6e46e11b1d9' 'b13cb20834e8a99fa6966027aa274afb'    '080aa5a48ff0b99e649af532769facf6')

build() {
  cd "${srcdir}/cdk-src+libs-${pkgver}"
  patch src/main/org/openscience/cdk/io/PDBReader.java < ${startdir}/parse_atom_charge.patch
  # build single jar
  /usr/share/java/apache-ant/bin/ant dist-large
  # build documentation
  /usr/share/java/apache-ant/bin/ant -buildfile javadoc.xml html
}

package() {
  cd "${srcdir}/cdk-src+libs-${pkgver}"
  install -d ${pkgdir}/usr/share/java/cdk/
  install -m644 dist/jar/cdk-1.4.7.jar ${pkgdir}/usr/share/java/cdk/
  install -d ${pkgdir}/usr/share/doc/cdk/
  cp -R doc/${pkgname}-javadoc-${pkgver}/* -t ${pkgdir}/usr/share/doc/cdk/
}
