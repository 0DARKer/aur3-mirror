# Contributor: Lucas Hermann Negri <lucashnegri@gmail.com>

pkgname=lgob-git
pkgver=20100405
pkgrel=1
pkgdesc="Set of Lua bindings that uses gobject-instrospection"
arch=(i686 x86_64)
url="http://oproj.tuxfamily.org" 
depends=('lua>=5.1' 'vte' 'libwebkit' 'gtksourceview2'
	'gtkspell' 'poppler-glib' 'goocanvas' 'clutter-gtk')
makedepends=('gcc')
license=(LGPL)
source=()
md5sums=()
conflicts=('lgob')
provides=('lgob=10.03')

_gitroot=git://gitorious.org/lgob/mainline.git
_gitname=lgob
_builddir=$srcdir/$_gitname-build

build() { 
  msg "Connecting to gitorious.org git server...."
  if [ -d $srcdir/$_gitname ] ; then
    cd $_gitname && git pull origin
    msg "The local files are updated."
  else
    git clone $_gitroot $_gitname
  fi
  msg "git checkout done or server timeout"
  msg "Starting make..."
  git clone $_gitname $_gitname-build

  cd $_builddir
  
  if [ ${CARCH} = 'i686' ]; then
    lua build.lua ${startdir}/pkg/usr
  else
    lua build.lua ${startdir}/pkg/usr AMD64=1
  fi
}
