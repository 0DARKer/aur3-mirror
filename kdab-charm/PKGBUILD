# Contributor: Matteo Agostinelli <matteo@agostinelli.me>
pkgname=kdab-charm
pkgver=1.5.2
pkgrel=1
pkgdesc="Charm is a program that helps to keep track of time"
arch=('x86_64' 'i686')
url="https://github.com/KDAB/Charm"
license=('GPL')
makedepends=('gcc' 'cmake')
source=(https://github.com/KDAB/Charm/tarball/$pkgver 
        cmake_git.patch)
md5sums=('48d816277f9f5c8f34ae2c1a7813baec'
         '63106b992d878081c204ea9232b4eaf1')

build() {
    cp cmake_git.patch "$srcdir/KDAB-Charm-6b7117a"
    cd "$srcdir/KDAB-Charm-6b7117a"
    patch -p0 < cmake_git.patch
    rm -rf build
    mkdir  build
    cd build
    cmake .. -DCMAKE_INSTALL_PREFIX=/usr -DCharm_VERSION=$pkgver
    make clean
    make || return 1
    make DESTDIR=$startdir/pkg/ install || return 1
}
