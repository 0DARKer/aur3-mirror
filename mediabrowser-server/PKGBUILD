# Maintainer: Daniel Seymour <dannyseeless@gmail.com>
pkgname=mediabrowser-server
pkgver=3.0.5188.23125
pkgrel=2
pkgdesc="Media server and transcoder"
arch=('x86_64')
url="http://www.mediabrowser3.com"
license=('GPL')
groups=()
depends=('mono' 'cairo' 'curl' 'giflib' 'libexif' 'libgdiplus' 'libjpeg' 'libmediainfo'
                 'libmms' 'libpng' 'libtiff' 'libx11' 'libxau' 'libxcb' 'libxdmcp'
                 'libxext' 'libxft' 'libxrender' 'libzen' 'mediainfo' 'pixman' 
                 'sqlite3' 'zlib')
makedepends=()
optdepends=()
source=("https://www.dropbox.com/s/07hh1g4x9xo28jb/MBServer.Mono.zip" "mediabrowser.service")
md5sums=('4dc13a111bb646068313afea9132bc90'
         '50054f5af3bd7200698db2ecb7c6f891')

package() {
  cd $srcdir/
  install -d $srcdir $pkgdir/opt/$pkgname
  install -d $pkgdir/usr/bin
  install -d $pkgdir/etc/systemd/system
  cp -a mediabrowser.service $pkgdir/etc/systemd/system
  cp -a $srcdir/ $pkgdir/opt/$pkgname/
  printf "#! /bin/bash\n(cd /opt/$pkgname/src; mono MediaBrowser.Server.Mono.exe)" >> $pkgdir/usr/bin/mediabrowser-server
  chmod +x $pkgdir/usr/bin/mediabrowser-server
}
