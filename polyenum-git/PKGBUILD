pkgname='polyenum-git'
pkgver='0.1_1'
pkgrel=1
arch=('any')
pkgdesc='Set of enumerators of multiple types of polyominoes (snake, tree, etc.)'
url='https://bitbucket.org/ablondin/polyenum'
license=('GPL3')
depends=('python2' 'cython2')
makedepends=('sed')
source=("${pkgname}-${pkgver}.tar.gz::https://bitbucket.org/ablondin/polyenum/get/0.1-1.tar.gz")
sha256sums=('5d7b03af515cdf6a4481fce181a0f859a1ea17613c47c3015db5fae5010b6c3c')

build () {
    cd "$srcdir/ablondin-polyenum-807670e004c2"
    ./configure
    make
}

package () {
    cd "$srcdir/ablondin-polyenum-807670e004c2"

    # python polyenum module and script
    python2.7 setup.py bdist --dist-dir .
    tar -xvzf polyenum-0.1-1.linux-x86_64.tar.gz -C $pkgdir

    # bash completion
    install -Dpv scripts/bash_completion/polyenum \
        $pkgdir/usr/share/bash-completion/completions/polyenum

    # man page
    gzip doc/polyenum.1
    install -Dpv doc/polyenum.1.gz $pkgdir/usr/share/man/man1/polyenum.1.gz
}
