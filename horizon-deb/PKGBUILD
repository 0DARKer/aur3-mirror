# Maintainer: James Bulmer <nekinie@gmail.com>

pkgname="horizon-deb"
pkgver=2014.1.b3
_pkgver=2014.1~b3
pkgrel=1
pkgdesc="Openstack identity"
arch=("i686" "x86_64")
url="http://docs.openstack.org/developer/horizon/"
license=("Apache")
groups=("openstack-deb")

depends=(
  "python2"
  "python2-django"
  "python2-django-compressor"
  "python2-django-openstack-auth"
  "python2-eventlet"
  "python2-iso8601"
  "python2-kombu"
  "python2-lockfile"
  "python2-netaddr"
  "python2-troveclient-deb"
  "python2-ceilometerclient-deb"
  "python2-heatclient-deb"
  "python2-lesscpy"
  "python2-pbr"
  "python2-pytz"
  "python2-six"
  "python2-mox"
  "python2-selenium"
  "nodejs"
)

makedepends=("python2-setuptools")
conflicts=("horizon", "openstack-horizon-git")
source=("http://archive.ubuntu.com/ubuntu/pool/main/h/horizon/horizon_${_pkgver}.orig.tar.gz")
md5sums=("3d76eb7355b9d91d695fa404723bd8c1")

build() {
  cd "${srcdir}/horizon-${pkgver}/"
  python2 setup.py build
}

package() {
  cd "${srcdir}/horizon-${pkgver}/"
  mkdir "${pkgdir}/usr/"
  mkdir "${pkgdir}/usr/share/"
  cp -a "./build/lib" "${pkgdir}/usr/share/openstack-dashboard"
}