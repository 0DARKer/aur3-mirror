# Maintainer: Simon Lemay <contact+archlinux@simonlemay.net>
# Contributor: Jim Pryor <profjim@jimpryor.net>

pkgname=chicken-readline
_pkgname=readline
pkgver=3.1
pkgrel=1
pkgdesc='An interface to the GNU readline library'
arch=('i686' 'x86_64')
url='http://wiki.call-cc.org/eggref/4/readline'
license=('GPL')
depends=('chicken' 'readline' 'ncurses')
source=(replace-regex-with-irregex.patch)
sha256sums=('98c4848d94502a9e3a9df574d60e4c15429a21f6e8153b2757479808b86d35ce')

build() {
    cd "$srcdir"
    if [[ ! -e "$_pkgname" ]]; then
        chicken-install -r "$_pkgname:$pkgver"
    fi
    cd "$_pkgname"
    patch -Np1 -i ../replace-regex-with-irregex.patch
}

package() {
    cd "$srcdir/$_pkgname"
    chicken-install -p "$pkgdir/usr"
}
