# Contributor: Dieter Plaetinck <dieter@plaetinck.be>
# Maintainer: Philipp Ãœberbacher <murks at lavabit dot com>
pkgname=openoctave-midi-git
pkgver=20100211
pkgrel=4
pkgdesc="A workflow centric midi sequencer."
arch=('i686' 'x86_64')
url="http://www.openoctave.org/"
license=('GPL2')
depends=('kdelibs3' 'fftw' 'liblo' 'jack-audio-connection-kit' 'liblrdf')
makedepends=('git' 'cmake' 'dssi')
install=openoctave-midi.install
md5sums=('4b0512f092fbaec03ba0f6f3f61af594')

_gitroot="git://68.150.160.199:9418/var/git/openoctave.git"

build() {
  msg "Connecting to GIT server..."
  if [ -d ${srcdir}/${pkgname}-${pkgver} ]; then
    cd ${srcdir}/${pkgname}-${pkgver} && git pull origin || return 1
  else
    git clone ${_gitroot} ${srcdir}/${pkgname}-${pkgver} || return 1
    cd ${srcdir}/${pkgname}-${pkgver}
  fi

  msg "GIT checkout done or server timeout"
  msg "Starting make..."

  cmake . -DCMAKE_INSTALL_PREFIX="/usr" || return 1
  make || return 1
  make DESTDIR="${pkgdir}" install || return 1
}

# vim:set ts=2 sw=2 et:
