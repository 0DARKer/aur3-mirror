# Contributor: Marcin Karpezo <sirmacik at gmail dot com>
# Contributor: Nicholas Clarke <osymandias at gmail dot com>
# Contributor: Jordan Callicoat <monkeesage at gmail dot com>
# Contributor: Jeff Simpson <fooblahblah at gmail dot com>

pkgname=scala-2.9.0
pkgver=final
_pkgver=final
pkgrel=1
pkgdesc="A Java-interoperable language with object-oriented and functional features - 2.9.0 final"
arch=('any')
url="http://www.scala-lang.org"
license=('GPL')
depends=('java-runtime')
makedepends=()
provides=('scala')
conflicts=('scala')

source=(http://www.scala-lang.org/downloads/distrib/files/${pkgname}.${_pkgver}.tgz)

build(){
    install -d ${pkgdir}/usr/{bin,share} ${pkgdir}/usr/share/man/man1 ${pkgdir}/usr/share/scala/{bin,lib} || return 1

    cd ${srcdir}/${pkgname}.${_pkgver}

    install -D -m0644 doc/LICENSE ${pkgdir}/usr/share/licenses/${pkgname}/LICENSE || return 1
    install -m 644 man/man1/*.1 ${pkgdir}/usr/share/man/man1 || return 1

    mv doc ${pkgdir}/usr/share/scala/
    mv lib ${pkgdir}/usr/share/scala/
    mv misc ${pkgdir}/usr/share/scala/

    for file in `ls bin` ; do
      if [[ -f bin/$file ]] && [[ -x bin/$file ]] ; then
        install -m 755 bin/$file ${pkgdir}/usr/share/scala/bin || return 1
        ln -s ../share/scala/bin/$file ${pkgdir}/usr/bin/$file || return 1
      fi
    done
}
md5sums=('e9a88a8961c4c1da84ba41d5495a6a43')
