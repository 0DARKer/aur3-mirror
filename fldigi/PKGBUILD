# Contributor: [Vitaliy Berdinskikh](mailto:ur6lad@archlinux.org.ua) aka UR6LAD

pkgname=fldigi
pkgver=3.21.63
pkgrel=1
pkgdesc="Digital Modes for Radio - GUI"
arch=('i686' 'x86_64')
url="http://w1hkj.com/Fldigi.html"
license=('GPL')
depends=('cty' 'fltk' 'libsamplerate')
optdepends=('hamlib: rig control through hamlib'
	'libsndfile: sound file support'
	'portaudio: PortAudio support'
	'pulseaudio: pulseaudio support'
	'xmlrpc-c-abyss: XML-RPC control')
source=(http://w1hkj.com/downloads/$pkgname/$pkgname-$pkgver.tar.gz cty.patch short.patch)

build() {
	cd "$srcdir"

	patch -p1 < cty.patch
	#patch -p1 < short.patch

	cd $pkgname-$pkgver

	./configure --prefix=/usr \
		--enable-tls
	make
}

check() {
	cd "$srcdir"/$pkgname-$pkgver

	make -k check
}

package() {
	cd "$srcdir"/$pkgname-$pkgver

	make DESTDIR="$pkgdir" install
}

md5sums=('9b5737004c2a2470ea530ed81c1d9f40'
         '0cdc33ee1db08be617d9096b503e2cc0'
         'e9ae97b6cc3a7da63e3cc9dae3701760')
sha256sums=('23c0f3d5551e0b5d5b51ca5eca0aa691e7cb96d92540822d4d66c7ea6aa2ff95'
            'c8a444de58c020f5384d8a13b1c0491064024f0dac6dec19cce26d79f00a2788'
            '0faaa78eb87676a07bfbbfa3d5d04f0f5a1cb788c1d280c8776200b7ad1bc1a3')
