# Contributor: [Vitaliy Berdinskikh](mailto:ur6lad@archlinux.org.ua) aka UR6LAD

pkgname=fldigi
pkgver=3.20.34
pkgrel=1
pkgdesc="Digital Modes for Radio - GUI"
arch=('i686' 'x86_64')
url="http://w1hkj.com/Fldigi.html"
license=('GPL')
depends=('hamlib>=1.2.8.1' 'portaudio' 'libsamplerate' 'fltk' 'xmlrpc-c-abyss' 'cty')
optdepends=('pulseaudio')
source=(http://w1hkj.com/downloads/$pkgname/$pkgname-$pkgver.tar.gz cty.patch)

build() {
	cd $srcdir

	patch -p1 < cty.patch

	cd $pkgname-$pkgver

	./configure --prefix=/usr \
			--enable-optimizations=sse3 \
			--enable-tls \
			--with-xmlrpc \
			--with-sndfile \
			--with-portaudio \
			--with-hamlib
	make || return 1
}

package() {
	cd $srcdir/$pkgname-$pkgver

	make DESTDIR="$pkgdir" install
}

md5sums=('2519dd90a131e370008f2d997e6ae525'
         'dc615ef0fd979cf0f23c635b8d3e67f1')
sha256sums=('4ce90a2e1239166b02991ddf8044cc9c81892c7108b35c457aa0035a242ee74a'
            '1f7f677c488e3b939fbe31b598815170a799ddfcb33230dbf2790f29cb227617')
