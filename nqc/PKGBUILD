# Contributor: Stefano Zamprogno <stefano.zamprogno@gmail.com>

pkgname=nqc
pkgver=3.1.r6
pkgrel=1
pkgdesc="Not Quite C used to program Lego's RCX, with USB support"
url="http://bricxcc.sourceforge.net/nqc/"
license=('MPL')
arch=(i686)
provides=('nqc')
install="nqc.install"
depends=('gcc-libs')
options=(docs)
source=(http://bricxcc.sourceforge.net/${pkgname}/release/${pkgname}-${pkgver}.tgz
        legousbtower.h
        dummy.patch
        nqc.sh)
md5sums=('2ed4b2728ab6f0d21723a466996ce91b' \
         '5db3d5964996748a135600fb33266082' \
         '1d8640b969e89e5614c48e2498618030' \
         'fdf80aeb3b6c81029cb98cc1c858b50c')

build() {
  cd $startdir/src
  patch -tp1 -i ../dummy.patch || return 1
  mkdir $startdir/src/rcxlib/LegoUSB
  cp -p ../legousbtower.h $startdir/src/rcxlib/LegoUSB/
  mkdir -p $startdir/pkg/etc/profile.d
  cp -p ../nqc.sh $startdir/pkg/etc/profile.d/
  make || return 1
  make DESTDIR=$startdir/pkg install
}
