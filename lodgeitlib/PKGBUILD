# Maintainer: Sebastian Wiesner <lunaryorn googlemail com>
pkgname=lodgeitlib
pkgver=0.5
pkgrel=3
pkgdesc="Command line script and client library for pocoo pastebin"
arch=('any')
url='http://packages.python.org/lodgeitlib'
license=('MIT')
depends=('setuptools' 'python-pygments' 'python-configobj')
makedepends=('python-sphinx')
source=("http://pypi.python.org/packages/source/l/$pkgname/$pkgname-$pkgver.tar.bz2"
        fix_manpage_building.diff remove_argparse_dependency.diff)
md5sums=('51205593b919fabe942e1adb9f6596ee'
         'f1a48daf3093eec4e1cfb33c0bbed002'
         '6274deb48aa7d57e3587864be8e36d3f')

build()
{
  cd "$srcdir/$pkgname-$pkgver" || return 1
  patch -p1 < "$srcdir/fix_manpage_building.diff" || return 1
  patch -p1 < "$srcdir/remove_argparse_dependency.diff" || return 1
  python2 setup.py install --root="$pkgdir" -O1 || return 1
  python2 setup.py build_manpages || return 1
  python2 setup.py install_manpages --install-dir "$pkgdir/usr/share/man" || return 1
  install -Dm644 COPYING "$pkgdir/usr/share/licenses/$pkgname/COPYING"
}
