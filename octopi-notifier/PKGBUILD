# Maintainer: Jameson Pugh <imntreal@gmail.com>

pkgname=octopi-notifier
pkgver=0.3.2
pkgrel=1
pkgdesc="Notifier for Octopi"
arch=('i686' 'x86_64')
url="https://github.com/aarnt/octopi"
license=('GPL2')
install=$pkgname.install
makedepends=('automoc4')
depends=('octopi' 'libnotify')
optdepends=('xfce4-notifyd: for notifications in XFCE')
source=("https://github.com/aarnt/octopi/archive/v${pkgver}.tar.gz")
sha256sums=('ad884e729735b49dabbe81a2ccf5fa68723d7f12d2aeb21fb24a60fb3287ccf3')

build() {
  _cpucount=$(grep -c processor /proc/cpuinfo 2>/dev/null)
  _jc=$((${_cpucount:-1}))
   
  cd "$srcdir/octopi-$pkgver/notifier/octopi-notifier"
  qmake-qt4 octopi-notifier.pro
  make -j $jc
}

package() {
  cd "$srcdir/octopi-$pkgver"
 
   install -D -m755 notifier/bin/octopi-notifier ${pkgdir}/usr/bin/octopi-notifier
   install -D -m644 octopi-notifier.desktop ${pkgdir}/etc/xdg/autostart/octopi-notifier.desktop
}

# vim: set ts=2 sw=2 ft=sh noet:
