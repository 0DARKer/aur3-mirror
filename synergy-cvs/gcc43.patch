*** ./lib/base/CStringUtil.cpp	2008-04-29 10:13:29.000000000 +0200
--- ./lib/base/CStringUtil.cpp.patched	2008-04-29 09:42:58.000000000 +0200
***************
*** 20,25 ****
--- 20,26 ----
  #include <cstdio>
  #include <cstdlib>
  #include <algorithm>
+ #include <cstring>
  
  //
  // CStringUtil
*** ./lib/server/CClientProxy1_3.cpp	2008-04-29 10:13:29.000000000 +0200
--- ./lib/server/CClientProxy1_3.cpp.patched	2008-04-29 10:02:32.000000000 +0200
***************
*** 17,22 ****
--- 17,23 ----
  #include "CLog.h"
  #include "IEventQueue.h"
  #include "TMethodEventJob.h"
+ #include <cstring>
  
  //
  // CClientProxy1_3
*** ./lib/server/CServer.cpp	2008-04-29 10:13:29.000000000 +0200
--- ./lib/server/CServer.cpp.patched	2008-04-29 10:03:42.000000000 +0200
***************
*** 29,34 ****
--- 29,35 ----
  #include "TMethodEventJob.h"
  #include "CArch.h"
  #include <string.h>
+ #include <stdlib.h>
  
  //
  // CServer
*** ./lib/platform/CXWindowsScreen.cpp	2008-04-29 10:13:29.000000000 +0200
--- ./lib/platform/CXWindowsScreen.cpp.patched	2008-04-29 09:59:40.000000000 +0200
***************
*** 27,32 ****
--- 27,34 ----
  #include "IEventQueue.h"
  #include "TMethodEventJob.h"
  #include <cstring>
+ #include <stdlib.h>
+ 
  #if X_DISPLAY_MISSING
  #	error X11 is required to build synergy
  #else
*** ./lib/net/CTCPSocket.cpp	2008-04-29 10:13:29.000000000 +0200
--- ./lib/net/CTCPSocket.cpp.patched	2008-04-29 09:44:05.000000000 +0200
***************
*** 24,30 ****
  #include "CArch.h"
  #include "XArch.h"
  #include <string.h>
! 
  //
  // CTCPSocket
  //
--- 24,30 ----
  #include "CArch.h"
  #include "XArch.h"
  #include <string.h>
! #include <stdlib.h>
  //
  // CTCPSocket
  //
*** ./lib/arch/CMultibyte.cpp	2008-04-29 10:13:29.000000000 +0200
--- ./lib/arch/CMultibyte.cpp.patched	2008-04-29 09:42:17.000000000 +0200
***************
*** 19,32 ****
  #include "CArch.h"
  #include <limits.h>
  #include <string.h>
  #if HAVE_LOCALE_H
  #	include <locale.h>
  #endif
  #if HAVE_WCHAR_H || defined(_MSC_VER)
  #	include <wchar.h>
- #elif __APPLE__
- 	// wtf?  Darwin puts mbtowc() et al. in stdlib
- #	include <stdlib.h>
  #else
  	// platform apparently has no wchar_t support.  provide dummy
  	// implementations.  hopefully at least the C++ compiler has
--- 19,31 ----
  #include "CArch.h"
  #include <limits.h>
  #include <string.h>
+ #include <stdlib.h>
+ 
  #if HAVE_LOCALE_H
  #	include <locale.h>
  #endif
  #if HAVE_WCHAR_H || defined(_MSC_VER)
  #	include <wchar.h>
  #else
  	// platform apparently has no wchar_t support.  provide dummy
  	// implementations.  hopefully at least the C++ compiler has
*** ./lib/arch/CArchDaemonUnix.cpp	2008-04-29 10:13:29.000000000 +0200
--- ./lib/arch/CArchDaemonUnix.cpp.patched	2008-04-29 09:40:17.000000000 +0200
***************
*** 19,24 ****
--- 19,25 ----
  #include <sys/stat.h>
  #include <fcntl.h>
  #include <errno.h>
+ #include <stdlib.h>
  
  //
  // CArchDaemonUnix
*** ./lib/synergy/IPrimaryScreen.cpp	2008-04-29 10:13:29.000000000 +0200
--- ./lib/synergy/IPrimaryScreen.cpp.patched	2008-04-29 09:58:47.000000000 +0200
***************
*** 13,18 ****
--- 13,19 ----
   */
  
  #include "IPrimaryScreen.h"
+ #include <stdlib.h>
  
  //
  // IPrimaryScreen
*** ./lib/synergy/IKeyState.cpp	2008-04-29 10:13:29.000000000 +0200
--- ./lib/synergy/IKeyState.cpp.patched	2008-04-29 09:57:52.000000000 +0200
***************
*** 14,19 ****
--- 14,20 ----
  
  #include "IKeyState.h"
  #include <string.h>
+ #include <stdlib.h>
  
  //
  // IKeyState
*** ./lib/synergy/CPacketStreamFilter.cpp	2008-04-29 10:13:29.000000000 +0200
--- ./lib/synergy/CPacketStreamFilter.cpp.patched	2008-04-29 09:57:09.000000000 +0200
***************
*** 16,21 ****
--- 16,22 ----
  #include "IEventQueue.h"
  #include "CLock.h"
  #include "TMethodEventJob.h"
+ #include <string.h>
  
  //
  // CPacketStreamFilter
*** ./lib/client/CServerProxy.cpp	2008-04-29 10:13:29.000000000 +0200
--- ./lib/client/CServerProxy.cpp.patched	2008-04-29 10:01:55.000000000 +0200
***************
*** 24,29 ****
--- 24,30 ----
  #include "TMethodEventJob.h"
  #include "XBase.h"
  #include <memory>
+ #include <cstring>
  
  //
  // CServerProxy
*** ./lib/client/CClient.cpp	2008-04-29 10:13:29.000000000 +0200
--- ./lib/client/CClient.cpp.patched	2008-04-29 10:01:18.000000000 +0200
***************
*** 26,31 ****
--- 26,33 ----
  #include "CLog.h"
  #include "IEventQueue.h"
  #include "TMethodEventJob.h"
+ #include <cstring>
+ #include <stdlib.h>
  
  //
  // CClient
