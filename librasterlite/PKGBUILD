# Maintainer: Pietro Zambelli <peter.zamb at gmail dot com>
pkgname=librasterlite
pkgver=1.0
pkgrel=1
pkgdesc="a library supporting Raster Data Sources within a SpatiaLite DB
[and any releated CLI management tool]"
arch=('i686' 'x86_64')
url="http://www.gaia-gis.it/spatialite-2.3.0/index.html"
license=('GPL v3')
depends=('libspatialite')
optdepends=('geos:',
            'proj:',
            'libtiff: a library required in order to access TIFF',
            'libgeotiff: a library supporting GeoTIFF',
            'libjpeg: a library required in order to access JPEG images',
            'zlib: a library supporting DEFLATE (zip) compression',
            'libpng:a library supporting PNG images',)
#options=()
source=("http://www.gaia-gis.it/spatialite/${pkgname}-${pkgver}.tar.gz")
md5sums=('c6f7864ac6101ff63f8aec4b02603b46')


build() {
  cd "${srcdir}/${pkgname}-${pkgver}"

  msg "Starting configure..."
  ./configure \
      --prefix=/usr || return 1

  msg "Starting make..."
  make || return 1

  msg "Starting install..."
  make DESTDIR=$pkgdir install-strip || return 1
#   sudo make install
#   or (in order to save some disk space)
#   sudo make install-strip

#   libtoolize --force --copy || return 1
#   aclocal || return 1
#   autoconf || return 1
#   automake --add-missing || return 1
# 
#   ./configure --prefix=/usr || return 1
#   make ECHO=echo || return 1
#   make ECHO=echo DESTDIR="${pkgdir}" install || return 1

  #cd contrib/pngminus
  #make ECHO=echo PNGLIB="-L${pkgdir}/usr/lib -lpng" -f makefile.std png2pnm pnm2png
  #install -m755 png2pnm pnm2png "${pkgdir}/usr/bin/"
  #install -D -m644 ../../LICENSE "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE" || return 1
  # only libs needed
#   rm -rf ${pkgdir}/usr/lib/{libpng.so,libpng.a,pkgconfig}
#   rm -rf ${pkgdir}/usr/{include,share,bin}
}