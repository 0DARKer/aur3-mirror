# Maintainer:  TDY <tdy@gmx.com>
# Contributor: rabyte <rabyte*gmail>

pkgname=bitflu
pkgver=1.22
pkgrel=1
pkgdesc="A download daemon supporting the BitTorrent and HTTP protocols"
arch=('any')
url="http://bitflu.workaround.ch/"
license=('PerlArtistic')
depends=('perl-danga-socket' 'perl-digest-sha1')
source=(http://$pkgname.workaround.ch/$pkgname/$pkgname-$pkgver.tgz)
md5sums=('c1d60043aad5d8e28d7f247d157fefb2')

build() {
  cd "$srcdir/$pkgname-$pkgver"
  sed -i "s#\.\(/plugins\)#/usr/share/$pkgname\1#" $pkgname.pl
  install -Dm755 $pkgname.pl "$pkgdir/usr/bin/$pkgname"
  install -Dm644 README.txt "$pkgdir/usr/share/doc/$pkgname/README"
  install -m644 README_IPv6.txt "$pkgdir/usr/share/doc/$pkgname/"

  install -dm755 "$pkgdir/usr/share/$pkgname/plugins/Bitflu"
  install -m644 plugins/Bitflu/*.pm "$pkgdir/usr/share/$pkgname/plugins/Bitflu"
  install -m644 $pkgname.config.example "$pkgdir/usr/share/$pkgname"
}
