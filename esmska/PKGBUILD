# Maintainer: Jaroslav Lichtblau <dragonlord@aur.archlinux.org>

pkgname=esmska
pkgver=0.20.0
pkgrel=1
pkgdesc="Program for sending SMS over the Internet"
arch=('i686' 'x86_64')
url="http://esmska.googlecode.com/"
license=('AGPL')
depends=('java-runtime' 'desktop-file-utils')
install=$pkgname.install
source=(http://$pkgname.googlecode.com/files/$pkgname-$pkgver.tar.gz \
        $pkgname.desktop)
md5sums=('05281495698211563c88ec5e3b7ba913'
         '18fb11fc49fec39afa24fabbd219944e')

build() {
  cd ${srcdir}/$pkgname-$pkgver

  install -d ${pkgdir}/usr/share/java/$pkgname || return 1
  cp -a * ${pkgdir}/usr/share/java/$pkgname || return 1

#.desktop + icon files
  install -D -m644 ${srcdir}/$pkgname.desktop \
    ${pkgdir}/usr/share/applications/$pkgname.desktop || return 1
  install -D -m644 ${srcdir}/$pkgname-$pkgver/icons/$pkgname.png \
    ${pkgdir}/usr/share/pixmaps/$pkgname.png || return 1

#executable file
  install -d ${pkgdir}/usr/bin || return 1
  ln -s /usr/share/java/$pkgname/$pkgname.sh \
    ${pkgdir}/usr/bin/$pkgname || return 1

#license
  install -D -m644 ${srcdir}/$pkgname-$pkgver/license/license.txt \
    ${pkgdir}/usr/share/licenses/$pkgname/LICENSE || return 1

#removing unneeded
  rm ${pkgdir}/usr/share/java/$pkgname/$pkgname.exe || return 1
}
