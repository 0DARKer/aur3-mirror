diff -rupN old/src/wl/sys/wl_cfg80211.c new/src/wl/sys/wl_cfg80211.c
--- old/src/wl/sys/wl_cfg80211.c	2013-03-23 14:21:17.526076000 -0600
+++ new/src/wl/sys/wl_cfg80211.c	2013-05-14 11:41:48.234212823 -0600
@@ -1995,9 +1995,10 @@ static s32 wl_update_bss_info(struct wl_
 	const u8 *ie;
 	const struct cfg80211_bss_ies *ies;
 #endif
+	struct wiphy *wiphy = wl_to_wiphy(wl);
 
 	ssid = &wl->profile->ssid;
-	bss = cfg80211_get_bss(wl_to_wiphy(wl), NULL, (s8 *)&wl->bssid,
+	bss = cfg80211_get_bss(wiphy, NULL, (s8 *)&wl->bssid,
 	      ssid->SSID, ssid->SSID_len, WLAN_CAPABILITY_ESS, WLAN_CAPABILITY_ESS);
 
 	rtnl_lock();
@@ -2039,7 +2040,11 @@ static s32 wl_update_bss_info(struct wl_
 		ie_len = (size_t)(ies->len);
 		rcu_read_unlock();
 #endif
+#if LINUX_VERSION_CODE < KERNEL_VERSION(3, 9, 0)
 		cfg80211_put_bss(bss);
+#else
+		cfg80211_put_bss(wiphy, bss);
+#endif
 	}
 
 	tim = bcm_parse_tlvs(ie, ie_len, WLAN_EID_TIM);
