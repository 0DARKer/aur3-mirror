# Maintainer: Eugenio Perez <eupm90@gmail.com>
pkgname=librdkafka-git
pkgver=0.8.5.r11.g14b258e
pkgrel=1
pkgdesc="Magnus Edenhill's kafka library for C"
arch=('x86_64', 'i686')
url="https://github.com/edenhill/librdkafka"
license=('BSD')
#depends=('compiz-ubuntu' 'lcms' 'colord')
makedepends=('make')
source=("$pkgname::git+https://github.com/edenhill/librdkafka.git")
md5sums=(SKIP)

pkgver() {
  cd "$srcdir/$pkgname"
  git describe --long --tags | sed -r 's/^v//;s/([^-]*-g)/r\1/;s/-/./g'
}

build() {
  cd "$srcdir/$pkgname"
  ./configure --prefix=$pkgdir
  cd "$srcdir/$pkgname/src"
  make lib
  cd "$srcdir/$pkgname/src-cpp"
  make lib
}

check() {
  cd "$srcdir/$pkgname/src"
  make check
  cd "$srcdir/$pkgname/src-cpp"
  make check
}

package() {
  cd "$srcdir/$pkgname/"
  make install
}
