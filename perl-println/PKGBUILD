# Maintainer: lspci <agm2819[[aaaa]][[tttt]]gmail[[dd]][[oo]][[tt]][[cc]][[oo]][[mm]]>
#
#
pkgname=perl-println
pkgver=0.1.2b
pkgrel=1
pkgdesc="Perl module that enables you to use println() in your perl.  (Use it as 'use Println')"
arch=('i686' 'x86_64')
url="https://bitbucket.org/agalog/releases"
license=('BSD')
groups=('')
depends=('perl>=5.10.0') 
makedepends=()
provides=()
conflicts=()
replaces=()
backup=()
options=()
source=("https://bitbucket.org/agalog/releases/downloads/$pkgname-$pkgver.tar.gz")
md5sums=('259fc28fe53ded801f4446bcec5ae873')

build() {
    cd "$srcdir/$pkgname-$pkgver"
    # if this isn't included then h2xs 'causes break since I don't 
    # want to include the -O (overwite) option in the args for h2xs.  
    if [[ -d "$srcdir/$pkgname-$pkgver/Println" ]]; then
	rm -R -f Println;
	h2xs -AX -n Println # generate the Makefile.PL and similar stuffs
    else
	h2xs -AX -n Println
    fi
    # Setting these env variables overwrites any command-line-options we don't want...
 ( export PERL_MM_USE_DEFAULT=1 PERL_AUTOINSTALL=--skipdeps \
     PERL_MM_OPT="INSTALLDIRS=vendor DESTDIR='$pkgdir'" \
     PERL_MB_OPT="--installdirs vendor --destdir '$pkgdir'" \
     MODULEBUILDRC=/dev/null
     
   cd Println
   /usr/bin/perl Makefile.PL
   make
 )
}
check() {
      cd "$srcdir/$pkgname-$pkgver"
      cd Println
     ( export PERL_MM_USE_DEFAULT=1 PERL5LIB=""
       make test
     )
}

package() {
    cd "$srcdir/$pkgname-$pkgver"
    cd Println
    make install
    find "$pkgdir" -name .packlist -o -name perllocal.pod -delete
}

