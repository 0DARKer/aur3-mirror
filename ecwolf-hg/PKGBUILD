pkgname=ecwolf-hg
pkgver=834
pkgrel=1
pkgdesc='Advanced source port of Wolfenstein 3D and Spear of Destiny based on Wolf4SDL'
arch=(i686 x86_64)
url="http://maniacsvault.net/ecwolf"
license=(GPL)
depends=(sdl_mixer libjpeg-turbo gtk2)
makedepends=(mercurial cmake)
install=ecwolf.install
source=(hg+https://bitbucket.org/Blzut3/ecwolf)
md5sums=('SKIP')

pkgver() {
  cd "$srcdir/ecwolf"
  hg identify -n
}

build() {
  cd "$srcdir/ecwolf"
  cmake . -DGPL=ON
  make
}

package() {
  cd "$srcdir/ecwolf"
  install -Dm755 ecwolf "$pkgdir/usr/bin/ecwolf"
  install -Dm644 ecwolf.pk3 "$pkgdir/usr/share/games/wolf3d/ecwolf.pk3"
}

