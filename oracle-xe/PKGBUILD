# Contributor: Florian Anselstetter <mail@dreamingdigital.org>

pkgname=oracle-xe
pkgver=10.2.01
pkgrel=1
pkgdesc="a non free DBMS"
url="http://www.oracle.com/"
license=('custom')
arch=('i686')
options=('!strip')
depends=('libaio')
makedepends=('rpmextract')
install=('oracle.install')
source=(oracle-xe-univ-10.2.0.1-1.0.i386.rpm)
md5sums=('627c23c942c62ea9ec7894b6816aec94')

build() {
	cd $startdir/pkg
	rpmextract.sh $startdir/src/oracle-xe-univ-10.2.0.1-1.0.i386.rpm

	find $startdir/pkg -type d -perm 700 -print0 | xargs -0 chmod 755
	
	mkdir $startdir/pkg/etc/rc.d
	cp $startdir/oracle-xe $startdir/pkg/etc/rc.d/
	cp $startdir/oraconfig.sh $startdir/pkg/usr/lib/oracle/xe/app/oracle/product/10.2.0/server/config/scripts/
	
	mkdir $startdir/pkg/etc/profile.d
	cp $startdir/pkg/usr/lib/oracle/xe/app/oracle/product/10.2.0/server/bin/oracle_env.sh $startdir/pkg/etc/profile.d/
	
	rm -rf $startdir/pkg/etc/init.d

	# License
  	mkdir -p $startdir/pkg/usr/share/licenses/custom/$pkgname
  	cp $startdir/license.txt $startdir/pkg/usr/share/licenses/custom/$pkgname/

}
