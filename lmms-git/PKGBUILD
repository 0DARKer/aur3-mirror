# Contributor: Scott Garrett <Wintervenom@archlinux.us>
# Contributor: Thomas Dziedzic

_pkgname=lmms
pkgname=lmms-git
pkgver=1352672617
pkgrel=1
pkgdesc='The Linux MultiMedia Studio.'
url='http://lmms.sourceforge.net'
arch=('i686' 'x86_64')
license=('GPL')
depends=('qt4' 'sdl_sound' 'jack' 'libsamplerate' 'fluidsynth')
optdepends=('wine: VST support (experimental)'
            'fftw: SpectrumAnalyzer plugin' )
makedepends=('git' 'cmake' 'ladspa' 'rasqal' 'libxft' 'freetype2' 'redland')
provides=('lmms')
conflicts=('lmms')

source=("git://lmms.git.sf.net/gitroot/lmms/lmms")
sha512sums=('SKIP')

pkgver() {
  cd -- "$srcdir/$_pkgname"
  git log -n1 --pretty=format:%ct
}

# prepare() {
#   cd -- "$srcdir/$_pkgname"
#   # Temporary fix.
#   sed -i 's/unlink/remove/' "$srcdir/$_gitname/plugins/zynaddsubfx/LocalZynAddSubFx.cpp"
# }

build() {
  cd -- "$srcdir/$_pkgname"
  cmake -DCMAKE_INSTALL_PREFIX=/usr
  make #-j1
}

package() {
  cd "$srcdir/$_pkgname"
  make DESTDIR="$pkgdir" install
}

# vim:set ts=2 sw=2 et: