# Maintainer: Swift Geek <swifgeek  google c m>
# FindFFTW.cmake stolen from https://github.com/jedbrown/cmake-modules/blob/master/FindFFTW.cmake

pkgname=dabstick-radio
pkgver=0.96
pkgrel=0
pkgdesc="The DAB decoding software (SDR-J)"
arch=('x86_64')
url="http://www.sdr-j.tk/"
license=('GPL2')
depends=('fftw' 'qwt' 'faad2' 'portaudio' 'rtl-sdr')
makedepends=('cmake')
source=("http://www.sdr-j.tk/dabstick-radio-${pkgver}.tgz" "https://gist.githubusercontent.com/swiftgeek/87668d6605cae068f703/raw/f5a7cc5b45683c2fce7868655d82d2b7ee6f3220/dabstick-radio-0.96.patch")
md5sums=('02810567e524b3ddd766b4bbf88c511c' '8eb7166a3562d20d8830acd2135b9b08')

build() {
  cd $srcdir/dabstick-radio-${pkgver}/
  patch -p1 < ${srcdir}/dabstick-radio-${pkgver}.patch
  cd dabreceiver-V2
  mkdir build
  cd build
  cmake ..
  make -j1
}

package () {
  cd $srcdir/dabstick-radio-${pkgver}/dabreceiver-V2/build/
  install -d "$pkgdir/usr/bin"
  install -m 755 ./dabreceiver-V2 "$pkgdir/usr/bin/"
}
