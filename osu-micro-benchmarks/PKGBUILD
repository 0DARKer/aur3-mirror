# Maintainer: Jason St. John <jstjohn .. purdue . edu>

pkgname=osu-micro-benchmarks
pkgver=3.9
pkgrel=1
pkgdesc="A suite of micro-benchmarks for testing various MPI operations (with optional CUDA support)."
arch=('i686' 'x86_64')
url="http://mvapich.cse.ohio-state.edu/benchmarks/"
license=('BSD')
depends=('openmpi')
optdepends=('cuda-toolkit: optional makedepends that enables CUDA support in the benchmarks')
changelog=ChangeLog
source=("http://mvapich.cse.ohio-state.edu/benchmarks/$pkgname-$pkgver.tar.gz")
sha512sums=('982967c2ea4e792501f13e5e6f39e615636dd2d3b3da8687cc50dd3ef9d24ceb919dca8d9f7e48d003dd66e0d4e6a1bdb3e68d77f25ab0ff02092e58eb412aba')

build() {
	cd "$srcdir/$pkgname-$pkgver"
	./configure --prefix=/usr

	#
	# For CUDA support, use the following switches during the 'configure' process.
	# Read the documentation for more information regarding CUDA support.
	#
	#./configure --prefix=/usr --enable-cuda --with-cuda-include=/path/to/cuda/include --with-cuda-lib=/path/to/cuda/lib

	make
}

package() {
	cd "$srcdir/$pkgname-$pkgver"
	make DESTDIR="$pkgdir/" install
}
