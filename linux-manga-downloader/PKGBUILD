#!/bin/bash
# Contributor: Jorge Barroso <jorge.barroso.11@gmail.com>
# Maintainer: Jorge Barroso <jorge.barroso.11@gmail.com>
pkgname=linux-manga-downloader
pkgver=0.2.0.1Beta5B
_rawversion=0.2.0.1-Beta5
pkgrel=4
pkgdesc="A manga downloader for many websites. With bugs correction and English translation"
arch=('any')
url="http://code.google.com/p/${pkgname}/"
license=('GPL3')
depends=('libnotify' 'gtkdialog' 'wget' 'lynx' 'zenity')
install=LMD.install
source=(http://${pkgname}.googlecode.com/files/${pkgname}_0.2.0.1-5Beta_all.deb
        "lmd.patch"
        "lmd-fu.patch"
        "en_EN"
        "ca_CA.patch"
        "es_ES.patch"
        "submanga.patch"
        "animea.patch"
        "4chan.patch"
        "mcanime.patch"
        "LMDesktop.patch")
sha512sums=('62d732b0bb7f612f59b89c7af6e2af45de7c1865395a7edde423dbe4d6449ad2909c93a363be169856ba4e9251497eb5ca7a8644965e539cd602d5b10eb5c151'
            'c7db28c5fa78a8885553639f23726993980b23307cacb41af1e8b3450373535be4df88b551dd30c532ff1e7acc72020b1a6e0a6fc2ba1a5dc290a3035707d542'
            'b8f8ae420e1d59010e2fd87f476eb10d88fb263404807f5b9d6c39bdd82579b55c13f59ba294d8340d112be41d1005f02c9a5ce5be0bc7b1cb2410fa3aeb5a32'
            '7c6e6cb1e2071bbed6c219109e4102f84f9e30950c74e6c2b84d10a2a910971fceb454d9fd3ac63d45789da93b9d6af43072134611fa2c009709461858207aab'
            '38f7a16ef9afb669b6af3ee08e54466d695bdabaa548cae4c4f5e05f075c11b29d1d0dffdd73eed0d9b42f627ed50407b45e3bc4445eb3dcad29b6fb65eb6c5e'
            'aff72dbb240e6db9d4451de1d8b264054eaca6fa17274aa13a7ef6bd881e1bdb863197f2d0347d1fc295e0afbb10bf4e646db28f23141b21b5143c23922a35d7'
            '60fa96b62cde848fb5245b9bddd8c75168e6ab0e4259ede23d94ef973aff311361fda7dd6202f6f3abaab714eec674671f9777e52e2a426e4b08b6e48d4cb0f1'
            'b542a234188bbcb1d0366d6f550bb1b272062d4f1bfbbc436b8ecdd4c1f20c0ac8a3f8e81b69c2cc1b52572078a67cec554c092938e8f90be507b7a4901d8609'
            'beedd7a76bc3b58c3abc5a91f3210d8268bf597a2cd3dc24a4a517d9b7809a02e51497f98ddddb14312ed5f429e0ac55a46b62f83af68044a4d766edb7848337'
            '6203b20d08a2a09e913c12f8c60b6669349aa564713a1d539f07251d7640cbbae9565066cc9cc0efeaea16239ada473bf164e6e097e1ea6ed1b2f680c2b18377'
            '4dc5d25870396617ed65ca2b2806db171127661b9b5d00bc83404bdf2afa1099efbd7573afb5648ebf5364ad68ba92928bf0c1ebf6917eaa2bbf1b15adf53304')
package() {
tar xf data.tar.gz
mv ${srcdir}/usr/local/bin ${srcdir}/usr/
    

#Creating Directories
    msg2 "\033[1;36mInstalling and Patching...\033[0m"
install -m755 -d ${pkgdir}/usr/bin/
install -m755 -d ${pkgdir}/usr/share/{applications,doc/linux-manga-downloader,icons,lmd/langs}

#Installing
    
install -m755 ${srcdir}/usr/bin/* ${pkgdir}/usr/bin/
install -m755 ${srcdir}/usr/share/applications/LMD.desktop ${pkgdir}/usr/share/applications/LMD.desktop
install -m755 ${srcdir}/usr/share/doc/linux-manga-downloader/copyright ${pkgdir}/usr/share/doc/linux-manga-downloader/copyright
install -m755 ${srcdir}/usr/share/icons/pen.png ${pkgdir}/usr/share/icons/pen.png
install -m755 ${srcdir}/usr/share/lmd/langs/ca_ES ${pkgdir}/usr/share/lmd/langs/ca_CA
install -m755 ${srcdir}/usr/share/lmd/langs/es_ES ${pkgdir}/usr/share/lmd/langs/es_ES
install -m755 $srcdir/en_EN ${pkgdir}/usr/share/lmd/langs/en_EN

#Patching

patch -p1 $pkgdir/usr/bin/lmd lmd.patch || return 1
patch -p1 $pkgdir/usr/bin/lmd-fu lmd-fu.patch || return 1
patch -p1 $pkgdir/usr/bin/submanga submanga.patch || return 1
patch -p1 $pkgdir/usr/bin/animea animea.patch || return 1
patch -p1 $pkgdir/usr/bin/4chan 4chan.patch || return 1
patch -p1 $pkgdir/usr/bin/mcanime mcanime.patch || return 1
patch -p1 $pkgdir/usr/share/lmd/langs/es_ES es_ES.patch || return 1
patch -p1 $pkgdir/usr/share/lmd/langs/ca_CA ca_CA.patch || return 1
patch -p1 ${pkgdir}/usr/share/applications/LMD.desktop LMDesktop.patch || return 1

}

# vim:set ts=2 sw=2 et: