# Maintainer: Julien Quintard <mycure@gmail.com>

pkgname=mingw32-curl
pkgver=7.23.1
pkgrel=1
pkgdesc="An URL retrival utility and library. Built for mingw32."
arch=(any)
url="http://curl.haxx.se"
license=('MIT')
depends=('mingw32-openssl' 'mingw32-zlib')
source=(http://curl.haxx.se/download/curl-$pkgver.tar.bz2)
md5sums=('0296d3196b4bf82c896a869b38dbc5f2')
options=('!strip' '!buildflags')

build() {
  cd $srcdir/curl-$pkgver
  unset LDFLAGS
  ./configure --without-ca-bundle --without-gnutls --without-random \
      --with-zlib=/usr/i486-mingw32 --with-ssl=/usr/i486-mingw32 \
      --prefix=/usr/i486-mingw32 --host=i486-mingw32 --without-libidn \
      --disable-ldap
  make
}

package() {
  cd $srcdir/curl-$pkgver
  make DESTDIR=${pkgdir} install
}
