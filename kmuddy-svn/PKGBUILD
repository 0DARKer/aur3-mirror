# Contributor: Todd Wilson <thetido@gmail.com>

pkgname=kmuddy-svn
pkgver=706
pkgrel=1
pkgdesc="A MUD client for KDE4"
arch=('i686' 'x86_64')
url=('http://kmuddy.com')
license=('GPL')
depends=('libmxp>=0.2.2' 'kdelibs' 'kdebase-runtime')
makedepends=('automoc4' 'cmake')
provides=('kmuddy')
conflicts=('kmuddy')
source=()
md5sums=()

_svnmod="kmuddy"
_svntrunk="svn://favoretti.net/kmuddy"

build() {
	cd ${srcdir}
	msg "Connecting to SVN server...."
	if [ -d ${_svnmod}/.svn ]; then
		(cd ${_svnmod} && svn up -r $pkgver)
	else
		svn co ${_svntrunk} --config-dir ./ -r $pkgver ${_svnmod}
	fi

	msg "SVN checkout done or server timeout"
	msg "Starting make..."

	svn export ${_svnmod} ${_svnmod}-build
	cd ${_svnmod}-build

	cmake . \
	-DCMAKE_BUILD_TYPE=Release \
	-DCMAKE_INSTALL_PREFIX=/usr
	make
	make DESTDIR=$pkgdir install
}
