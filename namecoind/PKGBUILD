pkgname=namecoind
pkgver=0.3.21.91
pkgrel=2
pkgdesc="Headless namecoin daemon"
arch=('i686' 'x86_64')
license=('MIT')
url="https://github.com/vinced/namecoin"
makedepends=('boost>=1.40' 'miniupnpc' 'git')
md5sums=()

gitroot="https://github.com/vinced/namecoin.git"
gitname="namecoin"
gitrev="bdf77399"

build() {
  cd ${srcdir}

  if [[ -d ${gitname} ]] ; then
    cd ${gitname}
    git fetch -q
    git reset -q --hard origin/master
    git checkout -f -q ${gitrev}
  else
    git clone ${gitroot}
    cd ${gitname}
    git checkout -f -q ${gitrev}
  fi

  make -f makefile.unix namecoind || return 1
  install -Dm0755 namecoind ${pkgdir}/usr/bin/namecoind
  install -Dm644 license.txt ${pkgdir}/usr/share/licenses/${pkgname}/license.txt
}
