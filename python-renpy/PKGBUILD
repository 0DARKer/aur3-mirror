# Maintainer: zhn <zhangn1985 AT gmail com>

pkgname=python-renpy
pkgver=6.12.1
pkgrel=2
pkgdesc="Ren'Py is a visual novel engine that helps you use words, images, and sounds to tell stories with the computer."
arch=("i686" "x86_64")
license=('MIT')
url="http://www.renpy.org"
depends=('ffmpeg' 'sdl' 'fribidi' 'python2' 'glew' 'libpng' 'python-pygame' 'freetype2')
makedepends=('python2')
conflicts=('renpy' 'renpy64')
replaces=('renpy')
provides=("renpy")
source=(http://www.renpy.org/dl/${pkgver}/renpy-${pkgver}-source.tar.bz2
        python2.diff)
md5sums=('4b36bc4ac51817ff906483c254722a94'
         'daff20ad48e8c3001e2bb53f60e4fd93')

build() {
  cd ${srcdir}/renpy-${pkgver}
  patch -p1 < ../python2.diff ||return 1
  cd module
  RENPY_DEPS_INSTALL=/usr ./setup.py build
}
package(){
  cd $srcdir/renpy-${pkgver}/module/
  RENPY_DEPS_INSTALL=/usr ./setup.py install --prefix=$pkgdir/usr
}


