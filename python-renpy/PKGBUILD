# Maintainer: zhn <zhangn1985 AT gmail com>

pkgname=python-renpy
pkgver=6.12.2
pkgrel=3
pkgdesc="Ren'Py is a visual novel engine that helps you use words, images, and sounds to tell stories with the computer."
arch=("i686" "x86_64")
license=('MIT')
url="http://www.renpy.org"
depends=('ffmpeg' 'sdl' 'fribidi' 'python2' 'glew' 'libpng' 'python-pygame' 'freetype2')
makedepends=('python2')
conflicts=('renpy' 'renpy64')
replaces=('renpy')
provides=("renpy")
source=(http://www.renpy.org/dl/${pkgver}/renpy-${pkgver}-source.tar.bz2
        python2.diff
	sound.diff
	)
md5sums=('75b8f89147df6878bf888cc5906361a1'
         'daff20ad48e8c3001e2bb53f60e4fd93'
	 'e6c91c7489aa25ae2c66cc3dd746b5ae'
	 )

build() {
  cd ${srcdir}/renpy-${pkgver}
  patch -p1 < ../python2.diff ||return 1
  patch -p1 < ../sound.diff || return 1
  cd module
  RENPY_DEPS_INSTALL=/usr ./setup.py build
}
package(){
  cd $srcdir/renpy-${pkgver}/module/
  RENPY_DEPS_INSTALL=/usr ./setup.py install --prefix=$pkgdir/usr
}


