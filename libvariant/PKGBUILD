# Maintainer: Ed Branch <brance carp at mail dot utexas dot edu nofish>
pkgname=libvariant
pkgver=1.0.0
pkgrel=1
pkgdesc="A C++ dynamically typed composable object library with de/serializers"
arch=('i686' 'x86_64')
url="https://bitbucket.org/gallen/libvariant"
license=('GPL')
depends=('libxml2' 'libyaml' 'curl')
makedepends=('cmake')
source=(https://bitbucket.org/gallen/libvariant/get/9903ab8.zip)
sha256sums=('b6e4c762fcad3efe51d490317c16bc718073400b8259c05ec9c53d19ddd603f2')

_srcdir="gallen-libvariant-9903ab8db4ef"

build() {
  mkdir -p "${_srcdir}/build"
  cd "${_srcdir}/build"
  cmake -DBUILD_SHARED_LIBS=ON -DCMAKE_INSTALL_PREFIX:PATH=/usr \
      -DCMAKE_BUILD_TYPE=release -DLIBVARIANT_BUILD_TESTS=off \
      -DLIBVARIANT_BUILD_EXAMPLES=off ..
  make
}

package() {
  cd "${_srcdir}/build"
  make DESTDIR="$pkgdir/" install
}
