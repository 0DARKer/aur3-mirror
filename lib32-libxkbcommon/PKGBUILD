# Maintainer: jtts
# Contributor: josephgbr <rafael.f.f1@gmail.com>
# Contributor: Jan Alexander Steffens (heftig) <jan.steffens@gmail.com>
# Contributor: Daniel Micay <danielmicay@gmail.com>
# Contributor: Mladen Pejakovic <pejakm@gmail.com>

_pkgbasename=libxkbcommon
pkgname=lib32-$_pkgbasename
pkgver=0.3.2
pkgrel=1
pkgdesc="Keyboard handling library using XKB data (32-bit)"
arch=(x86_64)
url="http://xkbcommon.org/"
license=(custom)
depends=(lib32-glibc $_pkgbase) # xkeyboard-config
makedepends=(gcc-multilib doxygen xorg-util-macros)
source=("http://xkbcommon.org/download/$_pkgbasename-$pkgver.tar.xz")
#source=("$_pkgbasename-$pkgver::git://github.com/xkbcommon/$_pkgbasename.git")
md5sums=('935cf416354bf05210de2e389484f7e8')

build() {
  export CC="gcc -m32"
  export PKG_CONFIG_PATH="/usr/lib32/pkgconfig"

  cd $_pkgbasename-$pkgver
  ./configure --prefix=/usr --libdir=/usr/lib32 --disable-static
  make
}

package() {
  cd $_pkgbasename-$pkgver
  make DESTDIR="$pkgdir" install
  rm -rf "$pkgdir"/usr/{include,share}

  install -dm755 "$pkgdir"/usr/share/licenses
  ln -s $_pkgbasename "$pkgdir"/usr/share/licenses/$pkgname
}