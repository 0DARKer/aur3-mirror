# This is a mjpg-streamer PKGBUILD file. 
# Contributor: Ross Melin <rdmelin@gmail.com>
# Contributor: Tri Le <trile7@gmail.com>

pkgname=mjpg-streamer
pkgver=r63
pkgrel=1
pkgdesc="Stream mjpeg frames from a webcam via http"
arch=('i686' 'x86_64')
url="http://sourceforge.net/projects/mjpg-streamer"
license=('GPL')
groups=(multimedia)
depends=(libjpeg)
makedepends=(gcc)
provides=(mjpeg-streamer)
conflicts=()
replaces=()
backup=()
options=()
install=
source=(http://downloads.sourceforge.net/project/mjpg-streamer/mjpg-streamer/Sourcecode/$pkgname-$pkgver.tar.gz)
noextract=()
md5sums=('1c424b5441a2bf8379cdecd7dbebc935')

build() {
  cd "$startdir/src/$pkgname-$pkgver"

  make clean all || return 1
  mkdir -p $pkgdir/usr/share/mjpeg-streamer/www/
  mkdir -p $pkgdir/usr/lib
  install *.so $pkgdir/usr/lib/
  install -m 644 www/* $pkgdir/usr/share/mjpeg-streamer/www/
  install -m 755 www/functions.js $pkgdir/usr/share/mjpeg-streamer/www/
  mkdir -p $pkgdir/usr/bin
  install mjpg_streamer $pkgdir/usr/bin/
  install -m 644 CHANGELOG LICENSE README start.sh $pkgdir/usr/share/mjpeg-streamer/
}

# vim:set ts=2 sw=2 et:
