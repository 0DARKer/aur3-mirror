pkgname=bamf-daemon
pkgver=0.2.90
pkgrel=1
pkgdesc="Removes the headache of applications matching into a simple DBus daemon and c wrapper library"
arch=('i686' 'x86_64')
url="https://launchpad.net/bamf"
license=('GPL')
depends=('glib2-ubuntu' 'dbus-glib>=0.76' 'libwnck' 'libgtop')
options=(!libtool)
source=(http://launchpad.net/bamf/0.2/0.2.90/+download/bamf-0.2.90.tar.gz)
md5sums=('1ffe3c5688989dd84b4bdfceade13808')
conflicts=('bamf')
groups=('unity2d-bzr')

build() {
  cd "$srcdir/bamf-$pkgver"
  sed -i 's/CFLAGS="$CFLAGS\ -Wall\ -Werror\ -lm"/CFLAGS="$CFLAGS\ -Wall\ -lm"/' configure
  ./configure --prefix=/usr
  make
}
package() {
  cd "$srcdir/bamf-$pkgver"
  mkdir bin
  make DESTDIR="$srcdir/bamf-$pkgver/bin" install
  install -D -m755 $srcdir/bamf-$pkgver/bin/usr/libexec/bamfdaemon ${pkgdir}/usr/libexec/bamfdaemon
  install -D -m644 $srcdir/bamf-$pkgver/bin/usr/lib/gio/modules/libgiobamf.so ${pkgdir}/usr/lib/gio/modules/libgiobamf.so
  install -D -m644 $srcdir/bamf-$pkgver/bin/usr/share/dbus-1/services/org.ayatana.bamf.service ${pkgdir}/usr/share/dbus-1/services/org.ayatana.bamf.service
}
