# Maintainer: Peter Marheine <peter@taricorp.net>
pkgname=cargo-git
pkgver=20140627
pkgrel=1
pkgdesc="Downloads dependencies for and compiles Rust projects."
arch=('i686' 'x86_64')
url="http://crates.io/"
license=('unknown')
groups=()
depends=('git' 'rust')
makedepends=()
provides=('cargo')
conflicts=('cargo')
replaces=()
backup=()
options=()
install=
source=('git+https://github.com/rust-lang/cargo.git'
        'git+https://github.com/wycats/hammer.rs.git'
        'git+https://github.com/carllerche/hamcrest-rust.git'
        'git+https://github.com/alexcrichton/toml-rs.git')
noextract=()
md5sums=('SKIP' 'SKIP' 'SKIP' 'SKIP')

build() {
  cd "$srcdir/cargo"
  make
}

prepare() {
  cd "$srcdir/cargo"
  git submodule init
  git config submodule."libs/hammer.rs".url $srcdir/hammer.rs
  git config submodule."libs/hamcrest-rust".url $srcdir/hamcrest-rust
  git config submodule."libs/toml-rs".url $srcdir/toml-rs
  git submodule update
}


package() {
  cd "$srcdir/cargo"
  make PREFIX=/usr DESTDIR="$pkgdir/" install
}

# vim:set ts=2 sw=2 et:
