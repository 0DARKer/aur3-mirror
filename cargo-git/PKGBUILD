# Maintainer: Peter Marheine <peter@taricorp.net>
pkgname=cargo-git
pkgver=20140729.7c02aa7
pkgrel=1
pkgdesc="Downloads dependencies for and compiles Rust projects."
arch=('i686' 'x86_64')
url="http://crates.io/"
license=('MIT' 'Apache')
groups=()
depends=('git' 'rust')
makedepends=()
provides=('cargo')
conflicts=('cargo')
replaces=()
backup=()
options=()
install=
source=('git+https://github.com/rust-lang/cargo.git')
noextract=()
md5sums=('SKIP')
_pkgname=cargo

pkgver() {
  cd "${srcdir}/${_pkgname}"
  git log -1 --format='%cd.%h' --date=short | tr -d -
}

build() {
  cd "$srcdir/cargo"
  ./configure --prefix=/usr
  make
}

package() {
  cd "$srcdir/cargo"
  make DESTDIR="$pkgdir/" install
  install -D -m 644 "$srcdir/cargo/LICENSE-MIT" "$pkgdir/usr/share/licenses/$pkgname/LICENSE-MIT"
}

# vim:set ts=2 sw=2 et:
