Patch by Robert Scheck <robert@fedoraproject.org> for eggdrop >= 1.6.20,
which makes the configure script looking for gethostbyname() in libc rather
in libdns. The problem especially comes up, once bind-devel gets added into
buildroot at the build system (#433111). In difference to the suggestion by
Adam Tkac <atkac@redhat.com>, the configure script itself gets patched, as
autoconf, as shipped with Red Hat Enterprise Linux 4 (including downstreams
and derivates), is unfortunately too old since eggdrop >= 1.6.20.

--- eggdrop1.6.20/aclocal.m4		2008-04-19 06:21:20.000000000 +0200
+++ eggdrop1.6.19/aclocal.m4.no_libdns	2008-04-22 19:59:44.000000000 +0200
@@ -764,7 +764,7 @@
   else
     AC_CHECK_LIB(socket, socket)
     AC_CHECK_LIB(nsl, connect)
-    AC_CHECK_LIB(dns, gethostbyname)
+    AC_CHECK_LIB(c, gethostbyname)
     AC_CHECK_LIB(dl, dlopen)
     AC_CHECK_LIB(m, tan, EGG_MATH_LIB="-lm")
 
--- eggdrop1.6.20/configure		2010-07-24 03:16:46.000000000 +0200
+++ eggdrop1.6.20/configure.no_libdns	2010-12-28 00:41:46.108939946 +0100
@@ -4608,13 +4608,13 @@
 
 fi
 
-    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gethostbyname in -ldns" >&5
-$as_echo_n "checking for gethostbyname in -ldns... " >&6; }
-if test "${ac_cv_lib_dns_gethostbyname+set}" = set; then :
+    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gethostbyname in -lc" >&5
+$as_echo_n "checking for gethostbyname in -lc... " >&6; }
+if test "${ac_cv_lib_c_gethostbyname+set}" = set; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-ldns  $LIBS"
+LIBS="-lc  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -4634,22 +4634,22 @@
 }
 _ACEOF
 if ac_fn_c_try_link "$LINENO"; then :
-  ac_cv_lib_dns_gethostbyname=yes
+  ac_cv_lib_c_gethostbyname=yes
 else
-  ac_cv_lib_dns_gethostbyname=no
+  ac_cv_lib_c_gethostbyname=no
 fi
 rm -f core conftest.err conftest.$ac_objext \
     conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dns_gethostbyname" >&5
-$as_echo "$ac_cv_lib_dns_gethostbyname" >&6; }
-if test "x$ac_cv_lib_dns_gethostbyname" = x""yes; then :
+{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_c_gethostbyname" >&5
+$as_echo "$ac_cv_lib_c_gethostbyname" >&6; }
+if test "x$ac_cv_lib_c_gethostbyname" = x""yes; then :
   cat >>confdefs.h <<_ACEOF
-#define HAVE_LIBDNS 1
+#define HAVE_LIBC 1
 _ACEOF
 
-  LIBS="-ldns $LIBS"
+  LIBS="-lc $LIBS"
 
 fi
 

