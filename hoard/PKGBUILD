# Contributor: Vasco Costa <vasco dot costa at geekslot dot com>
pkgname=hoard
pkgver=3.8
_pkgver=38
pkgrel=1
pkgdesc="Fast scalable and memory-efficient memory allocator"
arch=(i686 x86_64)
url="http://www.hoard.org/"
license=('GPL')
depends=('gcc')
install=$pkgname.install
source=(http://www.cs.umass.edu/~emery/$pkgname/$pkgname-$pkgver/source/$pkgname-$_pkgver.tar.gz)
md5sums=('f2d8ec3a13d4d9ba7b1c48c777707ef5')

build() {
  cp $startdir/gnuwrapper.cpp.patch $startdir/src/$pkgname-$_pkgver/src
  cd $startdir/src/$pkgname-$_pkgver/src
  patch -p1 < gnuwrapper.cpp.patch
  if [ "$CARCH" = "x86_64" ]; then
    make linux-gcc-x86-64 || return 1
  else
    make linux-gcc-x86 || return 1
  fi
  install -D -m755 libhoard.so $startdir/pkg/usr/lib/libhoard.so
}
