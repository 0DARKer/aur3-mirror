--- wine-1.6-rc4/dlls/avrt/main.c.orig	2013-07-10 18:56:00.092385850 -0400
+++ wine-1.6-rc4/dlls/avrt/main.c	2013-07-10 18:55:39.862387055 -0400
@@ -26,6 +26,10 @@
 #include "winnls.h"
 #include "wine/debug.h"
 #include "avrt.h"
+#include <sys/resource.h>
+#ifdef HAVE_SYS_MMAN_H
+#include <sys/mman.h>
+#endif
 
 WINE_DEFAULT_DEBUG_CHANNEL(avrt);
 
@@ -81,17 +85,21 @@
         return NULL;
     }
     SetThreadPriority(GetCurrentThread(), L_RT_THREADS);
+    SetProcessWorkingSetSize(GetCurrentProcess(), 256, 7168);
     return (HANDLE)0x12345678;
 }
 
 BOOL WINAPI AvRevertMmThreadCharacteristics(HANDLE AvrtHandle)
 {
     FIXME("(%p): stub\n", AvrtHandle);
+    SetThreadPriority(GetCurrentThread(), THREAD_PRIORITY_NORMAL);
     return 1;
 }
 
 BOOL WINAPI AvSetMmThreadPriority(HANDLE AvrtHandle, AVRT_PRIORITY prio)
 {
     FIXME("(%p)->(%u) stub\n", AvrtHandle, prio);
-    return 1;
+    SetThreadPriority(GetCurrentThread(), L_RT_THREADS);
+    SetProcessWorkingSetSize( GetCurrentProcess(), 256, 7168 );
+    return (HANDLE)0x12345678;
 }
