# Maintainer: Jonathan Arnold <jarnold@buddydog.org>
# Contributor: Marq Schneider <queueRAM@gmail.com>

pkgname=p4v
pkgver=2014.1.827578
pkgrel=19
pkgdesc="Perforce Visual Client"
arch=('i686' 'x86_64')
url="http://www.perforce.com"
license=('custom:p4v')
depends=()
options=('!strip')
install=${pkgname}.install
source=(http://www.perforce.com/downloads/perforce/r${pkgver:2:4}/bin.linux26${CARCH/i6/x}/${pkgname}.tgz
        p4v.desktop p4admin.desktop p4merge.desktop
        LICENSE)

[ "$CARCH" = "i686" ] && \
md5sums=('98fb6129798c8e2b0a49e67c447fc1d4'
         '9267bb9295701d2bd72b3406fa4cd0ae'
	 '23245aa3c0036423086eb66412daf865'
	 '8e85f65fc9ea466f610b4abd768580c2'
         '016c4c23753b808659f46bad3d7352aa')

[ "$CARCH" = "x86_64" ] && \
md5sums=('23f38ce1e92f3f3e44e49981d5380611'
         '9267bb9295701d2bd72b3406fa4cd0ae'
	 '23245aa3c0036423086eb66412daf865'
	 '8e85f65fc9ea466f610b4abd768580c2'
         '016c4c23753b808659f46bad3d7352aa')

package() {
  mkdir -p "${pkgdir}"/usr/bin
  cd "${srcdir}"
  install -m 644 -D LICENSE "${pkgdir}"/usr/share/licenses/${pkgname}/license.txt
  install -m 755 -D "${pkgname}-${pkgver}"/bin/{p4v,p4merge,p4admin,p4vc} "${pkgdir}"/usr/bin
  install -m 755 -D "${pkgname}-${pkgver}"/bin/{p4v,p4merge,p4admin}.bin "${pkgdir}"/usr/bin
  mkdir -p "${pkgdir}"/usr/share/applications
  install -m 644 -D {p4v,p4merge,p4admin}.desktop "${pkgdir}"/usr/share/applications/

  # install support libraries
  cp -R ${pkgname}-${pkgver}/lib ${pkgdir}/usr/

  # Install icons
  mkdir -p "$pkgdir"/usr/share/icons/hicolor/{16x16,24x24,48x48,96x96}/apps
  install -Dm644 "${pkgname}-${pkgver}"/lib/p4v/P4VResources/icons/P4-Admin_16x16.png "$pkgdir"/usr/share/icons/hicolor/16x16/apps/p4admin.png
  install -Dm644 "${pkgname}-${pkgver}"/lib/p4v/P4VResources/icons/P4-Admin_24x24.png "$pkgdir"/usr/share/icons/hicolor/24x24/apps/p4admin.png
  install -Dm644 "${pkgname}-${pkgver}"/lib/p4v/P4VResources/icons/P4-Admin_48x48.png "$pkgdir"/usr/share/icons/hicolor/48x48/apps/p4admin.png
  install -Dm644 "${pkgname}-${pkgver}"/lib/p4v/P4VResources/icons/P4-Admin_96x96.png "$pkgdir"/usr/share/icons/hicolor/96x96/apps/p4admin.png
  install -Dm644 "${pkgname}-${pkgver}"/lib/p4v/P4VResources/icons/P4-Merge_16x16.png "$pkgdir"/usr/share/icons/hicolor/16x16/apps/p4merge.png
  install -Dm644 "${pkgname}-${pkgver}"/lib/p4v/P4VResources/icons/P4-Merge_24x24.png "$pkgdir"/usr/share/icons/hicolor/24x24/apps/p4merge.png
  install -Dm644 "${pkgname}-${pkgver}"/lib/p4v/P4VResources/icons/P4-Merge_48x48.png "$pkgdir"/usr/share/icons/hicolor/48x48/apps/p4merge.png
  install -Dm644 "${pkgname}-${pkgver}"/lib/p4v/P4VResources/icons/P4-Merge_96x96.png "$pkgdir"/usr/share/icons/hicolor/96x96/apps/p4merge.png
  install -Dm644 "${pkgname}-${pkgver}"/lib/p4v/P4VResources/icons/P4-V_16x16.png "$pkgdir"/usr/share/icons/hicolor/16x16/apps/p4v.png
  install -Dm644 "${pkgname}-${pkgver}"/lib/p4v/P4VResources/icons/P4-V_24x24.png "$pkgdir"/usr/share/icons/hicolor/24x24/apps/p4v.png
  install -Dm644 "${pkgname}-${pkgver}"/lib/p4v/P4VResources/icons/P4-V_48x48.png "$pkgdir"/usr/share/icons/hicolor/48x48/apps/p4v.png
  install -Dm644 "${pkgname}-${pkgver}"/lib/p4v/P4VResources/icons/P4-V_96x96.png "$pkgdir"/usr/share/icons/hicolor/96x96/apps/p4v.png
  
  
}

# vim:set ts=2 sw=2 et:
