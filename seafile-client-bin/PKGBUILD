# Maintainer: localizator <localizator@ukr.net>

pkgname=seafile-client-bin
pkgver=1.5.3
pkgrel=2
pkgdesc="Seafile is an online file storage and collaboration tool. This is the seafile client for synchronizing your local files with a seafile server."
url="http://seafile.com"
license=(GPL)
groups=('network')
depends=(
'util-linux'
'openssl'
'glib2'
'sqlite'
'libevent'
'gtk2'
'libappindicator1'
'libnotify'
'python2-webpy'
'python2-mako'
'python2-simplejson')
options=(!strip !zipman)
_realname=seafile

arch=('i686' 'x86_64')
if [ "$CARCH" = 'i686' ]; then
   source=("${_realname}_${pkgver}_i386.deb::http://seafile.googlecode.com/files/${_realname}_${pkgver}_i386.deb" "seafile-web.patch")
   sha256sums=('3e265e1967f67e6d11213ecf88ba4c23cb615ed7f28d02af91af3e7c89815188'
               '3b4f40a4260b1a0b8e9a52d2799536d0a7c637aebb76717853cd034647389172')
elif [ "$CARCH" = "x86_64" ]; then
   source=("${_realname}_${pkgver}_amd64.deb::http://seafile.googlecode.com/files/${_realname}_${pkgver}_amd64.deb" "seafile-web.patch")
   sha256sums=('e16b3090b6f98e8494fff6fb2bf34e4a09cde8de73f7b1e6ae236c40e1bf3e06'
               '3b4f40a4260b1a0b8e9a52d2799536d0a7c637aebb76717853cd034647389172')
fi

build() {
    cd $srcdir
    tar xvf data.tar.gz
    patch -p0 -i "$srcdir/seafile-web.patch"
}

package() {
    cp -rp usr $pkgdir
}
