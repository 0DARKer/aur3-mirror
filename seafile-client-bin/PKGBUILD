# Maintainer: localizator <localizator@ukr.net>

pkgname=seafile-client-bin
pkgver=1.4.1
pkgrel=1
pkgdesc="Seafile is an online file storage and collaboration tool. This is the seafile client for synchronizing your local files with a seafile server."
url="http://seafile.com"
license=(GPL)
groups=('network')
depends=(
'util-linux'
'openssl'
'glib2'
'sqlite'
'libevent'
'gtk2'
'libappindicator1'
'libnotify'
'python2-webpy'
'python2-mako'
'python2-simplejson')
options=(!strip !zipman)
_realname=seafile

arch=('i686' 'x86_64')
if [ "$CARCH" = 'i686' ]; then
   source=("${_realname}_${pkgver}_i386.deb::http://seafile.googlecode.com/files/${_realname}_${pkgver}_i386.deb" "ccnet-web.patch")
   sha256sums=('15ba35654c56284f89fc80edfb8b43b94500d9d3ce85fa9dbcc736e0966e8a58'
               '57ce240882018661e38cee2c8387df797b88240eb7f08237285b4ce2b054ca63')
elif [ "$CARCH" = "x86_64" ]; then
   source=("${_realname}_${pkgver}_amd64.deb::http://seafile.googlecode.com/files/${_realname}_${pkgver}_amd64.deb" "ccnet-web.patch")
   sha256sums=('2bc35704acef35070c0fe660b47100adada71bcafa51d7fcabb20303ae0f6d14'
               '57ce240882018661e38cee2c8387df797b88240eb7f08237285b4ce2b054ca63')
fi

build() {
    cd $srcdir
    tar xvf data.tar.gz
    patch -p0 -i "$srcdir/ccnet-web.patch"
}

package() {
    cp -rp usr $pkgdir
}
