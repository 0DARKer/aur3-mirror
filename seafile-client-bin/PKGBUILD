# Maintainer: localizator <localizator@ukr.net>

pkgname=seafile-client-bin
pkgver=2.0.8
pkgrel=1
pkgdesc="Seafile is an online file storage and collaboration tool. This is the seafile client for synchronizing your local files with a seafile server."
url="http://seafile.com"
license=(GPLv3)
groups=('network')
depends=('jansson' 'qt4' 'libevent' 'sqlite' 'openssl' 'python2-simplejson')
arch=('i686' 'x86_64')

options=()
_realname=seafile

if [ "$CARCH" = 'i686' ]; then
    source=(
        "${_realname}_${pkgver}_i386.deb::http://seafile.googlecode.com/files/${_realname}_${pkgver}_i386.deb" 
        "seaf-cli-python2.patch"
    )
    sha256sums=(
        'cf59fee00c2b6b1613e56e51b66e683b3fa451f86ea4ce4db9b60073860473b7'
        '5af002d56bad1071c6c8b675abbcd5211cd0734760ffdb599b78f4c2ceaa0b41'
    )
elif [ "$CARCH" = "x86_64" ]; then
    source=(
        "${_realname}_${pkgver}_amd64.deb::http://seafile.googlecode.com/files/${_realname}_${pkgver}_amd64.deb" 
        "seaf-cli-python2.patch"
    )
    sha256sums=(
        'dd6bfd2344d513a5e01b3de29634eea6120ee27761512466dbf077074508716f'
        '5af002d56bad1071c6c8b675abbcd5211cd0734760ffdb599b78f4c2ceaa0b41'
    )
fi

prepare() {
    cd $srcdir
    tar xvf data.tar.gz
}
build() {
    patch -p0 < seaf-cli-python2.patch
    mv usr/lib/python2.7/dist-packages usr/lib/python2.7/site-packages
}

package() {
    cp -rp usr $pkgdir
}
