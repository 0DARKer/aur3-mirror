# Maintainer: Thomas Dziedzic < gostrc at gmail >
# Contributor: Michael Eckert <michael.eckert@linuxmail.org>

pkgname=deltarpm-git
pkgver=20120509
pkgrel=3
pkgdesc='Package for deltarpms'
arch=('i686' 'x86_64')
license=('BSD')
url='http://gitorious.org/deltarpm/deltarpm'
depends=('python-lxml' 'python2-lxml' 'rpm' 'yum')

_gitroot='git://gitorious.org/deltarpm/deltarpm.git'
_gitname='deltarpm'

build() {
  if [ -d ${_gitname} ] ; then
    cd ${_gitname}
    git pull origin
  else
    git clone ${_gitroot} ${_gitname}
    cd ${_gitname}
  fi

  make all python
}

package() {
  cd ${_gitname}

  make DESTDIR=${pkgdir} mandir="/usr/share/man" install

  install -D -m644 LICENSE.BSD \
    ${pkgdir}/usr/share/licenses/deltarpm-git/LICENSE.BSD
}
