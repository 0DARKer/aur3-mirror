# $Id$
# Maintainer: Hanspeter Portner <ventosus (at) airpost.net>

pkgname=lua5.2
pkgver=5.2.0
pkgrel=3
pkgdesc="A powerful light-weight programming language designed for extending applications." 
arch=('i686' 'x86_64')
url="http://www.lua.org/"
depends=('readline')
license=('MIT')
options=('!makeflags' '!emptydirs')
source=('http://www.lua.org/ftp/lua-5.2.0.tar.gz'
        '01_Makefile.patch'
        '02_Makefile.patch')
md5sums=('f1ea831f397214bae8a265995ab1a93e'
'22a748863e7e2a3af3e3247b5d85ab94'
'cd35ea87fc51cfec834ca84f8e25479d')

build() { 
  cd "${srcdir}/lua-5.2.0"
	cd doc
	cp lua.1 lua5.2.1
	cp luac.1 luac5.2.1
	cd ..
	patch -p0 < "${srcdir}/01_Makefile.patch"
	cd src
  patch -p0 < "${srcdir}/02_Makefile.patch"
	cd ..
	make INSTALL_TOP="${pkgdir}/usr" linux
}

package() {
  cd "${srcdir}/lua-5.2.0"
	INSTALL_TOP="${pkgdir}/usr" make install
	head -n 405 doc/readme.html | tail -n 22 > COPYRIGHT
	install -D -m644 COPYRIGHT "${pkgdir}/usr/share/licenses/${pkgname}/COPYRIGHT"
}
