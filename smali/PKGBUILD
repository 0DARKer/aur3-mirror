# Maintainer: sh0 <mee@sh0.org>
# Contributor: Lekensteyn <lekensteyn@gmail.com>
pkgname=smali
pkgver=1.4.0
pkgrel=1
pkgdesc="An assembler/disassembler for Android's dex format"
arch=(any)
url="http://code.google.com/p/smali/"
license=("BSD")
depends=("java-runtime" "bash")
source=("http://smali.googlecode.com/files/baksmali"
        "http://smali.googlecode.com/files/baksmali-$pkgver.jar"
        "http://smali.googlecode.com/files/smali"
        "http://smali.googlecode.com/files/smali-$pkgver.jar")
sha1sums=('f7c1899e133d1f826da1b169ec62fd47a6b3629e'
          '8d993a7b086e9fd3b67e76f395ce5bda0481a914'
          '29d9df50ab18a327153a91e0018145008771c040'
          'd4c954e82c0cf472bc1667c215e146076f25d456')

package() {
  install -d -m755 "$pkgdir/usr/bin"
  for file in baksmali smali; do
    install -D -m755 "$srcdir/$file" "$pkgdir/usr/share/smali/$file"
    # prevent from printing path on launch
    sed '/echo ${newProg}/d' -i "$pkgdir/usr/share/smali/$file"
    install -D -m644 "$srcdir/$file-$pkgver.jar" "$pkgdir/usr/share/smali/$file.jar"
    ln -s /usr/share/smali/$file "$pkgdir/usr/bin/$file"
  done
}

# vim:set ts=2 sw=2 et:
