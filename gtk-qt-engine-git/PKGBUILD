pkgname=gtk-qt-engine-git
pkgver=20100723
pkgrel=1
pkgdesc="A GTK engine which makes your GTK2 Apps match your QT theme"
arch=('i686' 'x86_64')
url="http://gitorious.org/gtk-qt-engine/gtk-qt-engine"
license=('GPL')
groups=()
depends=('kdelibs>=4.4.0' 'qt>=4.6')
makedepends=('gcc' 'cmake' 'automoc4' 'git')
provides=(gtk-qt-engine)
conflicts=(gtk-qt-engine)

_gitroot="git://gitorious.org/gtk-qt-engine/gtk-qt-engine.git"
_gitname="gtk-qt-engine"


build(){

  cd $srcdir

  if [[ -d $_gitname ]]; then
	(cd $_gitname && git pull origin)
  else
	git clone --depth 1 $_gitroot $_gitname
  fi
  
  cd $_gitname
  
  rm -rf build
  mkdir build && cd build
    cmake -DCMAKE_BUILD_TYPE=Release \
    -DCMAKE_SKIP_RPATH=ON \
    -DCMAKE_INSTALL_PREFIX=/usr .. || return 1
  make || return 1
  make DESTDIR=${pkgdir} install
}
 
