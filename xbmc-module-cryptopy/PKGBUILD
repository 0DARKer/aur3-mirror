# Maintainer: Tomasz "ludvick" Niedzielski <ludvick0[at]gmail[dot]com>

pkgname=xbmc-module-cryptopy
_filename=script.module.cryptopy
pkgver=1.2.6
pkgrel=2
pkgdesc="cryptopy module for xbmc player"
url="http://xbmc.org"
license=('custom')
arch=('any')
depends=('xbmc' 'sudo')
makedepends=('unzip')

source=('http://mirrors.xbmc.org/addons/dharma/script.module.cryptopy/script.module.cryptopy-1.2.6.zip')
md5sums=('cb7c0e3921f289475ea8282af9085b12')

noextract=(${source[@]##*/})

package() {

	if [ $USER != "root" ] ; then

		# prepare directories
		mkdir -pm755 $pkgdir/home/$USER/.xbmc/addons/packages

		# installation...
		install -Dm644 $srcdir/*.zip "$pkgdir/home/$USER/.xbmc/addons/packages/"
		unzip -qud "$pkgdir/home/$USER/.xbmc/addons/" $srcdir/script.module.cryptopy-1.2.6.zip

		# set proper ownership of files & directories
		sudo chown -R $USER: "$pkgdir/home/$USER"

		return 0

	else

		msg ""
		msg ""
		msg "Uwaga!"
		msg ""
		msg "Nie zainstalowano $pkgname-$pkgver-$pkgrel!"
		msg ""
		msg "zainstaluj pakiet z konta zwykłego użytkownika lub"
		msg "logując się na konto roota komendą sux (nie sudo!)"
		msg ""
		msg ""

		return 1

	fi
}
