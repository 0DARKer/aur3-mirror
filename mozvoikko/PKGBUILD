# Contributor: Jussi Timperi <jussi.timperi at gmail dot com>

pkgname=mozvoikko
pkgver=1.10.0
pkgrel=3
pkgdesc="Finnish spell-checker extension for Firefox using Voikko"
arch=('i686' 'x86_64')
url="http://voikko.sourceforge.net"
license=('GPL2')
depends=('firefox>=7.0' 'firefox<8.0''libvoikko')
makedepends=('xulrunner')
source=("http://downloads.sourceforge.net/voikko/${pkgname}-${pkgver}.tar.gz"
        mozvoikko.config)

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"

  CFLAGS="${CFLAGS} -fno-strict-aliasing -std=gnu++0x"

  sed 's|libxul-unstable|libxul|'		-i src/Makefile.xulrunner
  sed 's|$(CC_LIBS)|$(CC_LIBS) -lmozalloc|'	-i src/Makefile.xulrunner

  ##Support FF7
  cp ../mozvoikko.config ./mozvoikko.config

  make -f Makefile.xulrunner extension-files
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"

  make -f Makefile.xulrunner DESTDIR="${pkgdir}/usr/lib/firefox-7.0/extensions" install-unpacked
}

md5sums=('2b88a22a740635760aadbcee7dc3d6ef'
         'bd0a04232c14db4d0187ce6550d84c07')
