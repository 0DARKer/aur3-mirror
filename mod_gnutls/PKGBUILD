# This is an example PKGBUILD file. Use this as a start to creating your own,
# and remove these comments. For more information, see 'man PKGBUILD'.
# NOTE: Please fill out the license field for your package! If it is unknown,
# then please put 'unknown'.

# Contributor: Matt Kemp <matt@mattikus.com>, David Zaragoza <david@zaragoza.com.ve>
pkgname=mod_gnutls
pkgver=0.5.10
pkgrel=1
pkgdesc="Apache module for the Gnu TLS library."
arch=('i686' 'x86_64')
url="http://www.outoforder.cc/projects/apache/mod_gnutls/"
license=('Apache')
depends=('apache>=2.0.42' 'gnutls>=2.10.0')
provides=('mod_gnutls')
conflicts=('mod_gnutls')
replaces=('mod_gnutls')
install=$pkgname.install
source=(http://www.outoforder.cc/downloads/mod_gnutls/$pkgname-$pkgver.tar.bz2)
md5sums=('53fd571080b16333d3a4550b8477bf3c')

build() {
  echo $pkgdir
  cd "$srcdir/$pkgname-$pkgver"

  ./configure  --with-apxs=/usr/sbin/apxs
  make
  sed -ir 's/@${APXS_BIN} -i -n gnutls mod_gnutls.so/mkdir -p $(DESTDIR)$(AP_LIBEXECDIR)\n\t@${APXS_BIN} -i -S LIBEXECDIR=$(DESTDIR)$(AP_LIBEXECDIR) -n gnutls mod_gnutls.so/' src/Makefile
  make DESTDIR=$pkgdir install || return 1
}

# vim:set ts=2 sw=2 et:
