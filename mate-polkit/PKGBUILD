pkgname=mate-polkit
pkgver=0.0.0
pkgrel=2
pkgdesc="PolicyKit integration for the MATE desktop"
arch=('i686' 'x86_64')
url="http://www.freedesktop.org/wiki/Software/PolicyKit"
license=('LGPL')
depends=('polkit>=0.101' 'gtk2' 'polkit-gnome')
makedepends=('intltool' 'gobject-introspection')
options=(!libtool !emptydirs)
source=(http://matsusoft.com.ar/uploads/gnu-linux/mate/${pkgname}.tar.gz
        polkit-mate-authentication-agent-1.desktop)
sha256sums=('529bc73c79f4b4873388ebfdb97015907e775694bc181682c1f1300e53b8cdb7'
            'f1da2e137d079c9fa7fb15cf219cd18b3c2eafc3767927e28a9de58faac4a937')
url="http://matsusoft.com.ar/projects"
groups=('mate')

build() {
	cd "${srcdir}/${pkgname}"
	./configure --prefix=/usr --sysconfdir=/etc \
		--localstatedir=/var --libexecdir=/usr/lib/polkit-mate \
		--disable-static
	make
}

package() {
	cd "${srcdir}/${pkgname}"
	make DESTDIR="${pkgdir}" install
	install -Dm644 "${srcdir}/polkit-mate-authentication-agent-1.desktop" \
		"${pkgdir}/etc/xdg/autostart/polkit-mate-authentication-agent-1.desktop"

	# those files that already exists on polkitgtk
	rm -r "${pkgdir}/usr/share/gir-1.0/"
	rm -r "${pkgdir}/usr/include/polkit-gtk-1/"
	rm -r "${pkgdir}/usr/lib/pkgconfig/"
	rm -r "${pkgdir}/usr/lib/girepository-1.0/"
	rm "${pkgdir}/usr/lib/libpolkit-gtk-1.la"
	rm "${pkgdir}/usr/lib/libpolkit-gtk-1.so"
	rm "${pkgdir}/usr/lib/libpolkit-gtk-1.so.0"
	rm "${pkgdir}/usr/lib/libpolkit-gtk-1.so.0.0.0"
}
