# Maintainer: Aaron Kimmig <aaron.kimmig@student.hpi.uni-potsdam.de>
pkgname=pelican-themes-git
pkgver=298.f429e0d
pkgrel=1
pkgdesc="A collection of themes for the Pelican static website generator, hosted and updated on GitHub"
arch=('any')
url="https://github.com/getpelican/pelican-themes"
license=('GPL' 'MIT' 'Apache' 'WTFPL')
depends=('pelican')
makedepends=('git')
sources=('pelican-themes::git+https://github.com/getpelican/pelican-themes.git')
md5sums=('SKIP')
sha1sums=('SKIP')
sha256sums=('SKIP')
sha384sums=('SKIP')
sha512sums=('SKIP')

_gitname="pelican-themes"
_pelican_themes_path="$(pelican-themes -p)"

pkgver() {
  cd ${_gitname}
  echo $(git rev-list --count HEAD).$(git rev-parse --short HEAD)
}

package() {
  cd ${_gitname}

  # Create installation directories
  install -d -m755 "${pkgdir}${_pelican_themes_path}"

  # get WTFPL license
  curl http://www.wtfpl.net/txt/copying/ > WTFPL
  install -D -m644 WTFPL "${pkgdir}/usr/share/licenses/${pkgname}/WTFPL"

  # Install the themes
  cp -rf * "${pkgdir}${_pelican_themes_path}"
} 
