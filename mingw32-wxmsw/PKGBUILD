# Contributor: Andre Klitzing <aklitzing () online () de>
#Maintainer: schalaalexiazeal@gmail.com
_pkgname=wxMSW
_target=i486-mingw32
pkgname=mingw32-wxmsw
pkgver=2.8.12
pkgrel=2
pkgdesc="wxMSW is a port of wxWidgets for MS Windows"
arch=('i686' 'x86_64')
url="http://docs.wxwidgets.org/stable/wx_wxmswport.html"
license=('custom:wxWindows')
depends=('mingw32-runtime' 'mingw32-libpng' 'mingw32-expat' 'mingw32-zlib')
makedepends=('mingw32-w32api' 'mingw32-gcc' 'mingw32-binutils' 'hd2u')
conflicts=('mingw32-wxmsw-static')
options=(!strip !buildflags)
install=wxmsw.install
source=(http://downloads.sourceforge.net/wxwindows/$_pkgname-$pkgver.tar.bz2)
md5sums=('4bda849b9f7c66b58c4bc92e505ea714')

build() {
  cd "$srcdir/$_pkgname-$pkgver"

  ./configure --prefix=/usr/${_target} --build=$CHOST --host=${_target} --with-msw --with-expat --enable-unicode --enable-shared || return 1
  make || return 1
  make DESTDIR="$pkgdir/" install

  msg "Get rid of stupid carriage return (^M problem) in all text files!"
  cd "$pkgdir/"
  find ./ -type f -exec dos2unix --d2u --skipbin {} \;
}

