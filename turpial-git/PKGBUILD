# Maintainer: Limao Luo <luolimao+AUR@gmail.com>
# Contributor: Jean-Francois Chevrette <jfchevrette@gmail.com>
# Contributor: Jonathas Rodrigues <jonathas@archlinux.us>
# Contributor: Karl Kochs <captainhaggy@i2pmail.org>

_pkgname=turpial
pkgname=$_pkgname-git
pkgver=20130127
pkgrel=1
pkgdesc="A multi-interface Twitter client written in Python"
arch=(any)
url=http://code.google.com/p/turpial/
license=(GPL3)
depends=(gstreamer0.10-python hspell libturpial-git notification-daemon pygtk python2-babel
    python2-gtkspell python2-notify python2-pygame python2-simplejson pywebkitgtk)
makedepends=(setuptools git)
provides=($_pkgname=1.3.2)
conflicts=($_pkgname)

_gitroot=git://github.com/Turpial/Turpial.git
_gitname=Turpial

package() {
    cd "$srcdir"
    msg "Connecting to GIT server...."
    if [[ -d $_gitname/.git ]]; then
        pushd $_gitname && git pull
        msg2 "The local files are updated."
        popd
    else
        git clone -b development --depth 1 $_gitroot
    fi
    msg2 "GIT checkout done or server timeout"

    rm -rf $_gitname-build/
    cp -r $_gitname/ $_gitname-build/
    cd $_gitname-build/

    msg "Building..."
    python2 setup.py install --root="$pkgdir" --optimize=1
}
