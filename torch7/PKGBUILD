# Maintainer: Shawn Squire <kautiontape@gmail.com>
# Contributor: Sergej Pupykin <pupykin.s+arch@gmail.com>

pkgname=torch7
pkgver=7.0.3_0
pkgrel=1
pkgdesc="State of the art machine learning library"
arch=(i686 x86_64)
url="https://github.com/torch/torch7"
license=('GPL')
depends=(gcc-libs qtwebkit lapack)
optdepends=(
  'gnuplot: graph support'
)
makedepends=(git cmake)
source=("https://github.com/torch/torch7-distro/archive/${pkgver/_/-}.tar.gz")
md5sums=('8a1b42dadc9d37bd5f21e9a4148e503d')

build() {
  cd "$srcdir/torch7-distro-${pkgver/_/-}"
  cmake -DCMAKE_INSTALL_PREFIX=/usr .
  make
}

package() {
  cd "$srcdir/torch7-distro-${pkgver/_/-}"
  make install DESTDIR=$pkgdir
  rm -f $pkgdir/usr/{bin/luac,include/lua*}
}
