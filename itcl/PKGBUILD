# Contributor: Nick B <Shirakawasuna at gmail _dot_com>
pkgname=itcl
pkgver=3.4
pkgrel=2
pkgdesc="Provides the extra language support needed to build large Tcl/Tk applications"
arch=('i686' 'x86_64')
url="http://incrtcl.sourceforge.net/"
license=('custom')
depends=('glibc' 'tcl')
source=(http://downloads.sourceforge.net/project/incrtcl/[Incr\ Tcl_Tk]-source/3.4/itcl3.4b1.tar.gz
	configure.patch)

build() {
  cd $srcdir/itcl$pkgver
  patch -p0 -i ../configure.patch || return 1
  if [ `uname -m` = "x86_64" ]; then
    ./configure --prefix=/usr --enable-64bit || return 1
  else
    ./configure --prefix=/usr || return 1
  fi
  make all || return 1
  make DESTDIR=$pkgdir install
  install -Dm644 license.terms $pkgdir/usr/share/licenses/$pkgname/LICENSE
  chmod 644 $pkgdir/usr/lib/itcl3.4/libitclstub3.4.a
}
md5sums=('e4c97750c08ab47e960b91911fdd0132'
         'c13ebc37249cd5640284b1bed5c58bf9')
