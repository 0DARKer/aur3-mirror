#Contributor: p2k <Patrick.Schneider@uni-ulm.de>
pkgname=ocaml-cryptokit
pkgver=1.4
pkgrel=1
pkgdesc="Cryptographic primitives for OCaml"
arch=('i686' 'x86_64')
url="http://pauillac.inria.fr/~xleroy/software.html#cryptokit"
license=('LGPL')
depends=('ocaml' 'ocaml-findlib')
source=(http://forge.ocamlcore.org/frs/download.php/460/cryptokit-$pkgver.tar.gz)
md5sums=('fbec0562e9ad4cbab8a39f61a3ee66c7')

build() {
  cd $srcdir/cryptokit-$pkgver

  ocaml setup.ml -configure --prefix /usr || return 1
  ocaml setup.ml -build || return 1
}

package() {
  cd $srcdir/cryptokit-$pkgver

  mkdir -p "$pkgdir/usr/lib/ocaml/site-lib"
  OCAMLFIND_LDCONF=ignore OCAMLFIND_DESTDIR="$pkgdir/usr/lib/ocaml/site-lib" ocaml setup.ml -install
  install -D -m 644 LICENSE.txt $pkgdir/usr/share/licenses/$pkgname/LICENSE
}
