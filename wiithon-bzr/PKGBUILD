# Maintainer: Dax 'lordxadar' Marola <lord.xadar at gmail dot com>

pkgname=wiithon-bzr
pkgver=485
pkgrel=2
pkgdesc="Wiithon - WBFS Partition Manager"
arch=('i686')
url="https://launchpad.net/wiithon"
license=('GPL3')
depends=('python-sqlalchemy>=0.4' 'python>=2.5' 'unzip' 'python-lxml' 'gnome-icon-theme' 'pygtk>=2.16' 'glibc>=2.4')
makedepends=('bzr')
provides=('wiithon')
install=wiithon-bzr.install
options=('!libtool')
source=()
md5sums=()

_bzrbranch=lp:wiithon
_bzrmod=wiithon

build() {

cd ${srcdir}
msg "Connecting to the server...."

if [ ! -d ./${_bzrmod} ]; then
   bzr co ${_bzrbranch} ${_bzrmod}
else
   bzr up ${_bzrmod}
fi

if [ ! -d ${pkgdir}/usr/games ]; then
   mkdir -p ${pkgdir}/usr/games
fi

msg "BZR checkout done or server timeout"
msg "Starting make..."
cd ${srcdir}/${_bzrmod}
make || return 1
make DESTDIR=$pkgdir install || return 1
}
