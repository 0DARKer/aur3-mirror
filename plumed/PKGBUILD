# PKGBUILD template to install Espresso 
# Maintainer: Hector Martinez-Seara Monne <hseara ##[at]## gmail?com>

pkgname=plumed
pkgver=2.1.1
pkgrel=2
pkgdesc="An open source plugin for free energy calculations in molecular systems which works together with some of the most popular molecular dynamics engines."
url="http://www.plumed-code.org/"
license=("GPL")
arch=(i686 x86_64)
depends=('lapack' 'libmatheval')
optdepends=()
makedepends=()
provides=('plumed')
install=$pkgname.install
source=( https://github.com/plumed/plumed2/archive/v${pkgver}.tar.gz)
sha1sums=('34d5d0ff6cd34c213a42316a0a27ef9b889d728b')

package() {
msg2 "Create folder in /opt/plumed"
mkdir -p ${pkgdir}/opt/plumed
msg2 "Copy all extracted files to /opt/plumed"
cp -R ${srcdir}/plumed2-${pkgver}/* ${pkgdir}/opt/plumed
#  export PLUMED_PREFIX=${pkgdir}/usr/
#  make install
#  msg2 "Correcting paths"

  #remake symlinks
#  cd ${pkgdir}/usr/bin/
#  rm plumed
#  ln -s ../lib/plumed/src/lib/plumed plumed
#  rm plumed-mklib
#  ln -s ..//lib/plumed/src/lib/plumed-mklib plumed-mklib
#  rm plumed-newcv
#  ln -s ../lib/plumed/src/lib/plumed-newcv plumed-newcv
#  rm plumed-patch
#  ln -s ..//lib/plumed/src/lib/plumed-patch plumed-patch
#  cd ${pkgdir}/usr/lib/
#  rm libplumed.so
#  ln -s ../lib/plumed/src/lib/libplumed.so libplumed.so
#  rm libplumedKernel.so
#  ln -s ../lib/plumed/src/lib/libplumedKernel.so libplumedKernel.so
  
  #replace incorrect path text files
#  sed -i "s%${pkgdir}%%g" ${pkgdir}/usr/lib/plumed/src/lib/plumed-patch
#  sed -i "s%${pkgdir}%%g" ${pkgdir}/usr/lib/plumed/src/lib/Plumed.inc
#  sed -i "s%${pkgdir}%%g" ${pkgdir}/usr/lib/plumed/src/lib/Plumed.inc.shared
#  sed -i "s%${pkgdir}%%g" ${pkgdir}/usr/lib/plumed/src/lib/Plumed.inc.runtime
#  sed -i "s%${pkgdir}%%g" ${pkgdir}/usr/lib/plumed/src/lib/plumed-mklib
#  sed -i "s%${pkgdir}%%g" ${pkgdir}/usr/lib/plumed/src/lib/modulefile
#  sed -i "s%${pkgdir}%%g" ${pkgdir}/usr/lib/plumed/src/lib/Plumed.inc.static
#  sed -i "s%${pkgdir}%%g" ${pkgdir}/usr/lib/plumed/src/lib/plumed-newcv
#  sed -i "s%${pkgdir}%%g" ${pkgdir}/usr/lib/plumed/src/lib/Plumed.cmake
#  sed -i "s%${pkgdir}%%g" ${pkgdir}/usr/lib/plumed/src/lib/Plumed.cmake.static
#  sed -i "s%${pkgdir}%%g" ${pkgdir}/usr/lib/plumed/src/config/ConfigInstall.cpp
#  sed -i "s%${pkgdir}%%g" ${pkgdir}/usr/lib/plumed/src/lib/Plumed.cmake.shared
#  sed -i "s%${pkgdir}%%g" ${pkgdir}/usr/lib/plumed/src/lib/Plumed.cmake.runtime
  
  
  
 
  


  #binaries containg references to the src directory
  #/usr/lib/plumed/src/config/Config.cpp
  #/usr/lib/plumed/src/lib/plumed
  #/usr/lib/plumed/src/config/Config.o
  #/usr/lib/plumed/src/lib/plumed-shared
  #/usr/lib/plumed/src/lib/libplumedKernel.so
  #/usr/lib/plumed/src/lib/libplumed.so



 

}

