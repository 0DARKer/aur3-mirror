# Mantainer: Hubert Grzeskowiak <arch at nemesis13 dot de>

pkgname=panda3d-runtime
pkgver=1.0.0
pkgrel=1
pkgdesc='3D engine with Python bindings. Runtime and web plugin.'
url="http://www.panda3d.org"
depends=('python')
source=("http://www.panda3d.org/download/$pkgname-$pkgver/$pkgname-$pkgver.tar.gz" 'npapi.patch')
arch=('any')
license=('BSD')
md5sums=('7b1a732fd5e574904733bf54420153a1'
         'e87eebe33a3f50d95f5e7bee84687ede')

build() {
  cd $srcdir/$pkgname-$pkgver
  patch -Np0 -i $srcdir/npapi.patch || return 1
  python makepanda/makepanda.py --everything --runtime --distributor cmu || return 1
  python makepanda/installpanda.py --destdir=$pkgdir --runtime --outputdir=built_cmu_rt || return 1
  install -D -m755 $srcdir/$pkgname-$pkgver/doc/LICENSE $pkgdir/usr/share/licenses/$pkgname/LICENSE
}
