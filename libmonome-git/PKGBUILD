pkgname=libmonome-git
pkgver=20101112
pkgrel=1
pkgdesc="Makes writing applications for Monomes easy"
arch=('i686')
license=('ISC')
url=("https://github.com/monome/libmonome")
conflicts=('libmonome')
provides=('libmonome')
depends=('liblo' 'udev')

_gitname="libmonome"
_gitroot="https://github.com/monome"

build() {
	cd $srcdir
	msg "Connecting to the GIT server..."

	if [[ -d $srcdir/$_gitname ]] ; then
		cd $_gitname
		git pull origin
		msg "The local files were updated."
	else
		git clone "$_gitroot/$_gitname.git"
fi

    msg "GIT checkout done"
    msg "Starting make..."

		git clone $srcdir/$_gitname $srcdir/$_gitname-build
		cd $srcdir/$_gitname-build

		mkdir $pkgdir/usr

		./configure --prefix=$pkgdir/usr || return 1
		make || return 1
		make install PKGCONFIGDIR="$pkgdir/usr/lib/pkgconfig"|| return 1

		rm -rf $srcdir/$_gitname-build
}

			
