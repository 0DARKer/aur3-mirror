# Maintainer: Samuel Tardieu <sam@rfc1149.net>
# Contributor: Igor Yanchenko <yanchenko.igor@gmail.com>

pkgname=pygments-hg
pkgver=1101
pkgrel=1
pkgdesc="Python syntax highlighter"
arch=('any')
url="http://pygments.org/"
license=('BSD')
depends=('python2-distribute')
makedepends=('mercurial')
conflicts=("python-pygments")
provides=("python-pygments")
source=()
md5sums=()

_hgroot="http://dev.pocoo.org/hg/pygments-main"
_hgrepo="pygments"

build() {
  cd ${srcdir}

  # update the repo, else clone a new one
  if [ -d ${_hgrepo} ]; then
    cd ${_hgrepo}
    make clean
    hg pull -u
  else
    hg clone ${_hgroot}/${_hgrepo}
    cd ${_hgrepo}
  fi

  python2 setup.py install --root="$pkgdir" -O1 || return 1

  install -Dm644 external/pygments.bashcomp \
                 "$pkgdir/etc/bash_completion.d/pygments" || return 1

  install -Dm644 LICENSE "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
}

# vim:set ts=2 sw=2 et:
