# Contributor: Leonardo Ferreira Fontenelle <leonardof@gnome.org>

pkgname=virtaal
pkgver=0.6.1
pkgrel=5
pkgdesc="A tool to create program translations."
url="http://translate.sourceforge.net/wiki/virtaal/index"
arch=('any')
license=('GPL')
depends=('python2>2.5' 'gtk2>2.18' 'pygtk>2.12' 'python-lxml>2.1.4' 
    'translate-toolkit>1.7' 'python-simplejson' 'python-pycurl'
)
optdepends=('gtkspell: to enable spell checking'
    'python2-pyenchant: to enable spell checking'
    'iso-codes: to display translated language names'
    'libtranslate: to enable machine translation'
    'psyco2-svn: to speedup the application'
    'python-levenshtein: to speed up Levenshtein distance measures'
    'psycopg2: for TinyTM plugin'
)
source=("http://downloads.sourceforge.net/translate/$pkgname-$pkgver.tar.bz2")
md5sums=('5a636e1b6302cba4244a017367953227')

build() {
    sed -i -e "s|#![ ]*/usr/bin/python$|#!/usr/bin/python2|" \
        -e "s|#![ ]*/usr/bin/env python$|#!/usr/bin/env python2|" \
        $(find $srcdir -name '*.py')
    cd $srcdir/$pkgname-$pkgver
    PYTHON=python2 ./setup.py build || return 1
    PYTHON=python2 ./setup.py install --root=$pkgdir || return 1
}
