# Contributor: Johannes Sjolund <j.sjolund_AT_gmail.com>
# Contributor: Jason Taylor <jftaylor21_AT_gmail>
# Contributor: seratne
# Contributor: kozaki <kozaki_AT_guides>
# Contributor: smartcat99s <xraytux_AT_gmail>

pkgname=foldingathome-smp
pkgver=6.29
pkgrel=1
pkgdesc="Folding@Home SMP (x86_64 only) is a distributed computing project which studies protein folding, misfolding, aggregation, and related diseases."
arch=('x86_64')
url="http://folding.stanford.edu/"
license=('custom')
depends=('glibc')
backup=('etc/conf.d/foldingathome-smp')
install=foldingathome-smp.install
source=(http://www.stanford.edu/group/pandegroup/folding/release/FAH$pkgver-Linux.tgz
		foldingathome-smp.rc.d 
		foldingathome-smp.conf.d)
md5sums=('e96acd44aae5ff42a521fd8f5022c142' \
         '473a58da396372c7d93d87db0aec2bce' \
         'c929ecf1f6e20408941685fc7eb6f2ac')
sha1sums=('5eb6b40e8c6f65033f4d5b69f0e5e94b2808d603' \
          '14dd54b888676da93d1ff0c37b0e2674d9d37a3a' \
          '4cbe0d64a8adf4548d5a5a451e0df1f95d634f7a')
sha512sums=('652d6d4e44011d5672c786e504f3602629242e91ea49c87cd24ea4b3ec314fd5560fb1e2f94be52090af521b2d4821ac29ace953e4e68e99abb38257ea844e36' \
            '01ea4a990677c5ec1c2ecefdade20b94a494e1dfa6243c9659ce86813b693f7099cb7c4033126a4233f43f56425ec2f2c245ed06fd48ef65d6796a8e03da758a' \
            'a5858da968f55e5649fe1a3027c87c557af5d470984025770561d2da60290edaa1c1fce8e414aa04b93ff3dbffc7c5e93c65b25f51086a41b5f7b129f190797e')

build() {
  cd "${srcdir}"

  install -D -c -m755 fah6 "${pkgdir}/opt/fah-smp/fah6"
  install -D -c -m755 mpiexec "${pkgdir}/opt/fah-smp/mpiexec"
  install -D -c -m755 "${srcdir}/foldingathome-smp.rc.d" "${pkgdir}/etc/rc.d/foldingathome-smp"
  install -D -c -m644 "${srcdir}/foldingathome-smp.conf.d" "${pkgdir}/etc/conf.d/foldingathome-smp"

  chmod 755 ./fah6
  ./fah6 -license >COPYING
  install -D -m644 COPYING "${pkgdir}/usr/share/licenses/$pkgname/COPYING"
}
