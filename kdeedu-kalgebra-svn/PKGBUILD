# Contributor:  Adri√† Arrufat <swiftscythe@gmail.com>

pkgname=kdeedu-kalgebra-svn
_pkgname=kalgebra
pkgver=1111075
pkgrel=1
pkgdesc="A calculator with symbolic and analysis features that lets you plot 2D and 3D functions as well as to easily calculate mathematical expressions."
url="http://edu.kde.org/kalgebra/"
arch=('i686' 'x86_64')
license=('GPL' 'LGPL' 'FDL')
depends=('kdebase-runtime' 'kdelibs' 'eigen')
makedepends=('pkgconfig' 'cmake' 'automoc4' 'boost')
conflicts=('kdeedu-kalgebra')
provides=('kdeedu-kalgebra')

source=()
md5sums=()

_svntrunk=svn://anonsvn.kde.org/home/kde/trunk/KDE/kdeedu
_svnmod=kdeedu

build() {
  cd $srcdir

  if [ -d $_svnmod/$_pkgname/.svn ]; then
    (cd $_svnmod && svn up -r $pkgver)
  else
    svn co -N $_svntrunk --config-dir ./ $_svnmod
  fi

  msg "SVN checkout done or server timeout"
  msg "Starting make..."

  pushd $_svnmod
  svn up cmake
  svn up data
  svn up libkdeedu
  svn up $_pkgname
  popd

  mkdir -p build
  cd build
  cmake ../$_svnmod -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE=RELEASE
  cd $_pkgname
  make && make DESTDIR=$pkgdir install
}

