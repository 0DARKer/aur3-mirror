# Original contributor: v2punkt0 <v2punkt0@gmail.com>
# Contributor: Gilles Bedel <gillou.ray_you.are.a.bot@free.fr>
pkgname=fakeidentd
pkgver=2.5
pkgrel=2
pkgdesc="Concurrent nonforking standalone fake identd"
arch=('i686' 'x86_64')
url="http://www.guru-group.fi/~too/sw/"
license=('GPLv2')
groups=()
depends=()
makedepends=()
provides=()
conflicts=()
replaces=()
backup=(etc/conf.d/fakeidentd)
options=()
install=
source=(http://www.guru-group.fi/~too/sw/releases/identd.c
        rename_pidfile-fakeidentd-2.5.patch
        fakeidentd.rc.d fakeidentd.conf.d)
noextract=()
md5sums=('8bdeb74ae591a25de6d8e002fab0b541'
         'e322833c3a3e2662dfa78e4a3a980407'
         '3b4dca83c630fcce17a19faaf76fd7ec'
         'b0bd7a8b3d5dab034a81603206407ec8')

build() {
  cd $startdir/src/
  patch -p0 < rename_pidfile-fakeidentd-2.5.patch
  sh identd.c -s -DXXXMULTI
  install -m755 -D identd            $startdir/pkg/usr/bin/fakeidentd
  install -m755 -D fakeidentd.rc.d   $startdir/pkg/etc/rc.d/fakeidentd
  install -m644 -D fakeidentd.conf.d $startdir/pkg/etc/conf.d/fakeidentd
}
