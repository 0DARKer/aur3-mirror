# Maintainer : a-sk <askurihin at gmail dot com>

_npmname=imapnotify
pkgname=nodejs-imapnotify # All lowercase
pkgver=0.0.1
pkgrel=3
pkgdesc="Execute scripts on new messages using IDLE imap command"
arch=(any)
url="http://github.com/a-sk/node-imapnotify"
license=(MIT)
depends=('nodejs')
optdepends=()
install=$pkgname.install
source=(http://registry.npmjs.org/$_npmname/-/$_npmname-$pkgver.tgz "imapnotify@.service")
noextract=($_npmname-$pkgver.tgz)
sha1sums=(ad51fda3ede5cdada1dd08f91327a23f26f0979b 789a2e923e337ec2cd8664d5191fcffb8e0ff402)
build() {
  cd $srcdir
  local _npmdir="$pkgdir/usr/lib/node_modules/"
  mkdir -p $_npmdir
  cd $_npmdir
  PYTHON=/usr/bin/python2 npm install -g --prefix "$pkgdir/usr" $_npmname@$pkgver
  install -Dm644 "${srcdir}/imapnotify@.service" "${pkgdir}/usr/lib/systemd/system/imapnotify@.service"
}
# vim:set ts=2 sw=2 et:
