# Maintainer: tuftedocelot@fastmail.fm
# Maintainer: Tom Vincent <http://tlvince.com/contact>
pkgname=gollum
pkgver=3.0.0
pkgrel=2
pkgdesc="A simple, Git-powered wiki."
arch=('any')
url="http://github.com/gollum/gollum"
license=('MIT')
depends=('ruby' 'ruby-grit' 'ruby-github-markup'
'ruby-github-markdown' 'ruby-pygments.rb' 
'ruby-sinatra' 'ruby-mustache' 'ruby-sanitize' 
'ruby-nokogiri' 'ruby-useragent' 'ruby-stringex' 
'ruby-gollum-lib')
makedepends=('rubygems')
source=(http://rubygems.org/downloads/$pkgname-$pkgver.gem 'gollum.service')
noextract=($pkgname-$pkgver.gem)
md5sums=('5e9d56e10ea801a13dfc8e254728f338'
         'f300314ff0067271f1c1df54c7ccd20f')
install="gollum.install"

package() {
  cd "$srcdir"
  local _gemdir="$(ruby -e'puts Gem.default_dir')"
  gem install --ignore-dependencies --no-user-install -i "$pkgdir$_gemdir" -n "$pkgdir/usr/bin" $pkgname-$pkgver.gem

  install -Dm644 gollum.service "${pkgdir}"/usr/share/doc/gollum/gollum.service
}
