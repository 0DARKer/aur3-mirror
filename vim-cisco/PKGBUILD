pkgname=vim-cisco
pkgver=20130929
pkgver(){
  date +%Y%m%d
}
pkgrel=1
pkgdesc="Vim syntax highlighting for Cisco configuration files, Cisco ASA firewall, Cisco ACL"
arch=("any")
url="http://www.vim.org/"
license=("custom")
depends=("vim")
options=("emptydirs")
source=("cisco.vim::http://www.vim.org/scripts/download_script.php?src_id=20504"
        "ciscoacl.vim::http://www.vim.org/scripts/download_script.php?src_id=15316"
        "ciscoasa.tar.gz::http://www.vim.org/scripts/download_script.php?src_id=12823"
       )
md5sums=("6a552d521116d15f17cd0b481de29e95" # cisco.vim
         "09e4e1a7e5e3d1484142d7adb315d014" # ciscoacl.vim
         "7b9120e86dbdc2de707079ccb851c6e8" # ciscoasa.tar.gz
        )
sha1sums=("02a2c7acaf2cc33d69c500f171955ef4342d4bc8" # cisco.vim
          "c2adcaccf018bb644e19c168fa082474f0b97dad" # ciscoacl.vim
          "8386e7492c2d41213be2d4842282aaef13dc32a3" # ciscoasa.tar.gz
         )
prepare(){
cat << EOL > "$srcdir/ftdetect-ciscoacl.vim"
augroup filetype 
  au! BufRead,BufNewFile *.acl   set filetype=ciscoacl
augroup END
EOL
}
package() {
  sed -i "s/let b:current_syntax = \"cisco\"/let b:current_syntax = \"ciscoacl\"/g" "$srcdir/ciscoacl.vim"
  tar -xf "$srcdir/ciscoasa.tar.gz"

  install -Dm644 "$srcdir/cisco.vim"             "$pkgdir/usr/share/vim/vimfiles/syntax/cisco.vim"
  install -Dm644 "$srcdir/ciscoacl.vim"          "$pkgdir/usr/share/vim/vimfiles/syntax/ciscoacl.vim"
  install -Dm644 "$srcdir/ciscoasa.vim"          "$pkgdir/usr/share/vim/vimfiles/syntax/ciscoasa.vim"
  install -Dm644 "$srcdir/ftdetect-ciscoacl.vim" "$pkgdir/usr/share/vim/vimfiles/ftdetect/ciscoacl.vim"
} 
