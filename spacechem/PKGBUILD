# Contributor: Alex Griffin <griffin.aj@gmail.com>
pkgname=spacechem
_realname=SpaceChem
pkgver=1006
pkgrel=1
pkgdesc="SpaceChem is an obscenely addictive, design-based puzzle game about machine building and fake science."
arch=('i686' 'x86_64')
url="http://www.spacechemthegame.com/"
license=('custom')
depends=('mono' 'sdl' 'sdl_image' 'sdl_mixer' 'xclip')
install=spacechem.install

build() {
  cd "$srcdir"
  if [ ! -f "../$_realname-$pkgver.tar.gz" ]; then
    echo SpaceChem is not free, please purchase the game online first,
    echo place your SpaceChem download in "$startdir" and try again
    exit 1
  fi

  tar xzf "../$_realname-$pkgver.tar.gz"

  if [ `arch` = x86_64 ]; then
    ./make-amd64-package.sh
  fi
}

package() {
  cd "$srcdir"

  if [ `arch` = x86_64 ]; then
    ar x SpaceChem-amd64.deb
  else
    ar x SpaceChem-i386.deb
  fi

  cd "$pkgdir"
  tar xzf "$srcdir/data.tar.gz"
  mkdir -p usr/share/licenses/spacechem
  mv opt/zachtronicsindustries/spacechem/readme/* usr/share/licenses/spacechem/
  rmdir opt/zachtronicsindustries/spacechem/readme
}

