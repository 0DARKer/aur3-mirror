#Contributor:Xemertix <arch88(at)katamail(dot)com>
#based on previous pkgbuilds

pkgname=paq8o
pkgver=2
pkgrel=1
pkgdesc="PAQ8 series of archivers, resurrected by new maintainers"
url="http://cs.fit.edu/~mmahoney/compression/"
makedepends=('yasm')
arch=('i686' 'x86_64')
license=('GPL')
source=("http://cs.fit.edu/~mmahoney/compression/${pkgname}${pkgver}.zip")
md5sums=('dc976099dfe87d0307218b631cb02924')


build()
{
  cd ${srcdir}

  if [ `uname -m` == "x86_64" ]; then
    yasm paq7asm-x86_64.asm -f elf -m amd64 || 1 && g++ $CFLAGS -DUNIX ${pkgname}.cpp paq7asm-x86_64.o -o ${pkgname} || 1
  else
    yasm paq7asmsse.asm -f elf -m x86 || 1 && g++ $CFLAGS -DUNIX ${pkgname}.cpp paq7asmsse.asm.o -o ${pkgname} || 1
  fi

  install -D -m 755 ${srcdir}/${pkgname} ${pkgdir}/usr/bin/${pkgname}
}
