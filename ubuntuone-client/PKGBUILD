# Contributor: Leonid Selivanov <bravebug at gmail dot com>

pkgname=ubuntuone-client
pkgver=1.7.0
pkgrel=1
pkgdesc="Client for Ubuntu One shareing service"
arch=('i686' 'x86_64')
url="https://launchpad.net/ubuntuone-client"
license=('GPL3')
groups=('ubuntuone')
depends=('dbus-python' 'gnome-python-desktop' 'gnome-settings-daemon' 'libproxy' \
'pyinotify' 'python' 'python-configglue' 'python-notify' 'python-simplejson' \
'ubuntuone-storage-protocol>=1.4.0' 'ubuntu-sso-client>=0.99.4' 'xdg-utils')
makedepends=('intltool' 'nautilus' 'xorg-utils' 'imake')
optdepends=()
provides=('ubuntuone-client=$pkgver')
conflicts=()
replaces=()
backup=()
options=()
install=
source=(http://launchpad.net/$pkgname/trunk/$pkgver/+download/$pkgname-$pkgver.tar.gz 
python2.patch u1.diff)
noextract=()
md5sums=('04603bb0cbc97880a29c5d5640ac9c96' 'e3c55c4f551727b849819accb47bca54' '9b0aa10c51505b33a3349668fc296c1e')

build() {
  cd $srcdir/$pkgname-$pkgver
  patch -p1 -i ../python2.patch
  patch -p1 -i ../u1.diff
  ./configure --prefix=/usr --sysconfdir=/etc --localstatedir=/var ac_cv_path_PYTHON=/usr/bin/python2
  make
  make DESTDIR=$pkgdir install
}

