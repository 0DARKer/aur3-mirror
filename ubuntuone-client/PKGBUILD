# Contributor: Leonid Selivanov <bravebug at gmail dot com>

pkgname=ubuntuone-client
pkgver=2.0.0
pkgrel=1
pkgdesc="Client for Ubuntu One shareing service"
arch=('i686' 'x86_64')
url="https://launchpad.net/ubuntuone-client"
license=('GPL3')
groups=('ubuntuone')
depends=('dbus-python' 'libproxy' 'python2-pyinotify' 'python2>=2.7.1' 'python2<<2.8' \
'python-configglue' 'python-notify' 'python-simplejson' 'ubuntuone-storage-protocol>=2.0.0' \
'ubuntu-sso-client>=1.1.8' 'xdg-utils')
makedepends=('intltool' 'imake')
optdepends=('nautilus')
provides=('$pkgname=$pkgver')
conflicts=('ubuntuone-client-bzr')
replaces=()
backup=()
options=()
install=
source=(http://launchpad.net/$pkgname/trunk/$pkgver/+download/$pkgname-$pkgver.tar.gz python2.patch)
noextract=()
md5sums=('e2733da8ce76c07fdf47fa81857fc5fa' 'e5a4d36a3913867c62fa48e65357765c')

build() {
  cd $srcdir/$pkgname-$pkgver
  patch -p1 -i ../python2.patch
  ./configure --prefix=/usr --sysconfdir=/etc --localstatedir=/var ac_cv_path_PYTHON=/usr/bin/python2
  make
  make DESTDIR=$pkgdir install
}

