# Maintainer: Peter Lewis <plewis@aur.archlinux.org>
# Contributor: Andrea Scarpino <andrea@archlinux.org>
# Contributor: Panagiotis Papadopoulos <pano_90 AT gmx DOT net>
# Contributor: Emeric Letavernier <emeric.letavernier AT laposte DOT net>

_pkgname=rekonq
pkgname=$_pkgname-devel
pkgver=1.7
pkgrel=1
pkgdesc='A WebKit based web browser for KDE - unstable development snapshot'
arch=('i686' 'x86_64')
url='http://rekonq.kde.org/'
license=('GPL')
depends=('kdebase-keditbookmarks')
makedepends=('cmake' 'automoc4' 'docbook-xsl')
provides=('rekonq')
conflicts=('rekonq' 'rekonq-git')
install=${_pkgname}.install
#source=("http://downloads.sourceforge.net/${_pkgname}/${_pkgname}-${pkgver}.tar.bz2")
source=("rekonq-1.7.tar.bz2::http://quickgit.kde.org/index.php?p=scratch%2Fadjam%2Frekonq2.git&a=snapshot&h=96a7e48fb9460204cf75740ba50fc5ac5b61038b&fmt=tbz2")

build(){
  cd ${srcdir}
  mv scratch-adjam-rekonq2 ${_pkgname}-${pkgver}

  mkdir build
  cd build
  cmake ../${_pkgname}-${pkgver} \
    -DCMAKE_BUILD_TYPE=Release \
    -DCMAKE_INSTALL_PREFIX=/usr
  make
}

package() {
  cd ${srcdir}/build
  make DESTDIR=${pkgdir} install
}
sha256sums=('625e51b4797d3e108bdf35b8e2dc8b9a9a41c8260f358c147d1c80e9008e59b1')
