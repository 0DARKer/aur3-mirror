# Maintainer: Josip Ponjavic <josipponjavic at gmail dot com>
# Contributor: (epsilom) Xavier Corredor <xavier.corredor.llano (a) gmail.com>

pkgname=kdeplasma-applets-rosalauncher
_pkgname=rosa-launcher
pkgver=2.0.0~55
_pkgver=2.0.0-55
pkgrel=1
pkgdesc="ROSA Desktop Application Launcher."
arch=('i686' 'x86_64')
url="http://rosalab.ru/"
license=('GPL3')
depends=('kdebase-workspace')
makedepends=('qjson' 'cmake' 'automoc4')
source=("http://abf-downloads.rosalinux.ru/rosa2012.1/repository/SRPMS/main/updates/${_pkgname}-${_pkgver}.src.rpm")
sha256sums=('89537526c36394a5fb5fbb90ac14033c4c15c9f6ca7839297fdc64984acbcf9a')

prepare() {
  cd "${srcdir}"

  tar -xvf ${_pkgname}-${_pkgver%-*}.tar.gz
  #patch -p0 -i "${srcdir}/rosa-launcher-2.0.0-mdvbutton.patch"
}

build() {
  cd "${srcdir}"/${_pkgname}-${_pkgver%-*}
  
  if [[ -d build ]]; then
    rm -rf build
  fi
  mkdir build && cd build
  
  cmake -DCMAKE_INSTALL_PREFIX=/usr -DQT_QMAKE_EXECUTABLE=qmake-qt4 ..
}

package() {
  cd "${srcdir}"/${_pkgname}-${_pkgver%-*}/build
  
  make install DESTDIR="${pkgdir}"
}