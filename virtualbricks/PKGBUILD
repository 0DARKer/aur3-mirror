# Maintainer: max_meyer
pkgname=virtualbricks
pkgver=0.4.276
pkgrel=2
pkgdesc="An all in one virtualization solution available for the linux desktop"
arch=(any)
url="http://virtualbricks.eu/"
license=('GPL')
depends=('gnome-python-extras' 'python2' 'libglade' 'python-pygraphviz' 'python-imaging')
makedepends=()
provides=(virtualbricks)
conflicts=(virtualbricks-bzr)
#replaces=()
#backup=()
options=('!libtool' '!emptydirs')
#install=${pkgname}.install
source=(http://launchpad.net/virtualbrick/trunk/0.4/+download/virtualbricks-0.4.276.tar.bz2 patch-virtualbricks-bin.patch patch-virtualbricks-mkdir.patch)
#noextract=()
md5sums=('c2fa156bf769b8db2e6185fb3e63aa65' 
         '83d4f0cab3961a7be044a651875dcc9e'
         '002e4d6f18a06efafb949c45a7dce15a'
         ) #generate with 'makepkg -g'

PYTHON="/usr/bin/python2"

build() {
  cd "$srcdir/$pkgname-$pkgver"
  patch "setup.py" "$startdir/patch-virtualbricks-mkdir.patch"
  $PYTHON setup.py build -b $pkgdir
  sed -e "s/___VERSION___/$pkgver/g" < ./share/virtualbricks.template.glade > share/virtualbricks.glade
  patch "./main/virtualbricks" "$startdir/patch-virtualbricks-bin.patch"
}

package() {
  cd "$srcdir/$pkgname-$pkgver"
  $PYTHON setup.py install --prefix=/usr/ --root=$pkgdir/ --optimize=1
} 
