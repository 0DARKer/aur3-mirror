# Maintainer: Mauro Santos <registo.mailling@gmail.com>
pkgname=systemd-hddapm
pkgver=1.0
pkgrel=1
pkgdesc="Hard Disk APM level service for systemd"
arch=('any')
url="http://www.freedesktop.org/wiki/Software/systemd"
license=('GPL')
depends=('hdparm' 'systemd')
backup=('etc/hddapm.conf')
source=('hddapm'
        'hddapm.conf'
        'hddapm.service')
md5sums=('2e43cb3d57affc744edf74362ee8a353'
         '8dadceb17c606b900564512b742d81bc'
         '44251e62b7e5aec1689613f61992ebb6')

package() {
    # Install files
    install -Dm755 "${srcdir}/hddapm" "${pkgdir}/usr/bin/hddapm"
    install -Dm644 "${srcdir}/hddapm.service" "${pkgdir}/usr/lib/systemd/system/hddapm.service"
    install -Dm644 "${srcdir}/hddapm.conf" "${pkgdir}/etc/hddapm.conf"
    
    # Enable unit
    mkdir "${pkgdir}/usr/lib/systemd/system/basic.target.wants"
    ln -s ../hddapm.service "${pkgdir}/usr/lib/systemd/system/basic.target.wants/hddapm.service"
    
    # Take care of Suspend/Hibernate cases
    mkdir "${pkgdir}/usr/lib/systemd/system-sleep"
    ln -s "/usr/bin/hddapm" "${pkgdir}/usr/lib/systemd/system-sleep/hddapm"
}




