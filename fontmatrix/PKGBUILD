#! /bin/bash
# Maintainer: Jorge Barroso <jorge.barroso.11 at gmail dot com>
# Contributor: Michal Malek <michalm@jabster.pl>

pkgname=fontmatrix
pkgver=0.6.0
pkgrel=4
pkgdesc="Font manager for Linux"
arch=('any')
url="http://fontmatrix.be"
license=('GPL')
depends=(qt4)
makedepends=(mesa)
source=($url/archives/$pkgname-$pkgver-Source.tar.gz)
sha512sums=('20c91a17b27b1131017f3d5a264250b560b46cfa1d6939171811def530939d8e072f02c818a58e40604506a6520a30d20c27b234655329d8a16ce489e69bcf00')
if [ "${CARCH}" = "i686" ]; then
_arch=32
elif [ "${CARCH}" = "x86_64" ]; then
_arch=64
fi

build(){
  export QTDIR=/usr
	export QMAKESPEC=/usr/share/qt/mkspecs/linux-g++-$_arch

  cd "$srcdir/$pkgname-$pkgver-Source"
  mkdir build
  cd build
  cmake .. -DCMAKE_INSTALL_PREFIX=qmake4 || return 1
  make || return 1
}

package(){
  cd "$srcdir/$pkgname-$pkgver"
  make DESTDIR=$pkgdir install || return 1
}
