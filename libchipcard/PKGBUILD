pkgname=libchipcard
pkgver=5.0.0
pkgrel=2
pkgdesc="A library for easy access to chip cards via chip card readers"
arch=('i686' 'x86_64')
url="http://www.aquamaniac.de"
options=('!libtool')
license="GPL"
depends=(pcsclite gcc-libs-multilib gwenhywfar)
source=("http://www2.aquamaniac.de/sites/download/download.php?package=02&release=24&file=01&dummy=libchipcard-5.0.0.tar.gz" \
	chipcardd \
	client.c.patch \
	client_p.h.patch)

md5sums=('9e1ae41016c894be30021a7e9b820680'
         '06987e192b41ea9241a706ae632cf800'
         '8eef81b40742c93013fd763d273763dd'
         '78e10f83bc69d0c6b3eaec20a08d7881')

build() {
  cd $startdir/src/$pkgname-$pkgver
  patch -Np2 < $srcdir/client.c.patch
  patch -Np2 < $srcdir/client_p.h.patch
  ./configure --prefix=/usr --sysconfdir=/etc --localstatedir=/var
  make || return 1	
}

package() {
  cd $startdir/src/$pkgname-$pkgver
  make DESTDIR=$startdir/pkg install
  install -D -m755 ../chipcardd $startdir/pkg/etc/rc.d/chipcardd
}
