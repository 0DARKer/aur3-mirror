# Contributor: Franz Rogar <franzrogar@gmail.com>
pkgname=cr3-qt4
pkgver=20100913
pkgrel=1
pkgdesc="CoolReader FB2 (FictionBook2) e-book reader"
url="http://www.coolreader.org/crengine.htm"
license=('GPL')
arch=('i686' 'x86_64')
makedepends=('git' 'cmake')
depends=('qt')
provides=('cr3')

_gitrepo="http://git.openinkpot.org/cr3.git"

build() {
  if [ -d ${srcdir}/${pkgname} ]; then
     cd ${srcdir}/${pkgname} && git pull
  else
     git clone ${_gitrepo} ${srcdir}/${pkgname} || echo -e "Error: couldn't clone GIT repo"
  fi

  cd ${srcdir}/${pkgname}
  mkdir -p qtbuild
  cd qtbuild
  cmake -D GUI=QT -D CMAKE_BUILD_TYPE=Release -D CMAKE_INSTALL_PREFIX=/usr ..
  make || return 1
  make DESTDIR="${pkgdir}/" install || return 1
}

