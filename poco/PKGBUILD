# Maintainer: Rodrigo Grumiche Silva <grumiche at integrityit dot com dot br>
# Contributor: nozog
# Contributor: davidhjelm
# Contributor: Ray Kohler <ataraxia937 at gmail dot com>
# Contributor: Nathan Owe < ndowens04 at gmail dot com>


pkgname=poco
pkgver=1.4.2p1
pkgrel=1
pkgdesc="C++ class libraries for network-centric, portable applications,
complete edition"
arch=('i686' 'x86_64')
url="http://www.pocoproject.org/"
license=('custom:boost')
depends=('unixodbc' 'libmysqlclient' 'openssl')
makedepends=('gcc' 'make' 'unixodbc' 'libmysqlclient' 'openssl' 'chrpath')
options=()
source=(http://downloads.sourceforge.net/poco/$pkgname-$pkgver-all.tar.bz2)
#sha512sums=('d3687c7b79f9de25ad3e6415d7fdb561a0bc947097d29bc6d0c84f8267ab2db6f0c0d38648a0608d0e14dc5cf1e5ae58497a8f0ea1acc77b74207c0c7335dfd2')
md5sums=('752e5f5545377be24ee7c7b6b479fbbe')


build() {
 cd $srcdir/$pkgname-$pkgver-all
 ./configure --prefix=/usr --no-samples --no-tests
 make || return 1
}


package()
{
 cd $srcdir/$pkgname-$pkgver-all
 make DESTDIR=$pkgdir install
 install -Dm644 LICENSE $pkgdir/usr/share/licenses/$pkgname/LICENSE
 #removing rpath information from binaries
 chrpath -d $pkgdir/usr/bin/cpspc || return 1
 chrpath -d $pkgdir/usr/bin/cpspcd || return 1
 chrpath -d $pkgdir/usr/bin/f2cpspd || return 1
 chrpath -d $pkgdir/usr/bin/f2cpsp || return 1
 #removing debugging libraries
 rm $pkgdir/usr/lib/libPoco*d.so* || return 1
}
