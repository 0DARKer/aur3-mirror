# Maintainer: Valere Monseur <valere dot monseur at ymail dot com>
# Contributor: Alexander Fehr <pizzapunk gmail com>

pkgname=ktsuss
pkgver=2
pkgrel=1
pkgdesc="Graphical version of su written in C and GTK+"
arch=('i686' 'x86_64')
url="http://ktsuss.googlecode.com/svn/trunk/"
license=('BSD')
depends=('gtk2')
makedepends=('subversion')
source=()
md5sums=()

_svntrunk=http://ktsuss.googlecode.com/svn/trunk/
_svnmod=ktsuss

build() {
  cd $srcdir

  if [ -d $_svnmod/.svn ]; then
    (cd $_svnmod && svn up)
  else
    svn co $_svntrunk --config-dir ./ $_svnmod
  fi

  msg "SVN checkout done or server timeout"
  msg "Starting make..."

  cd $_svnmod

  # upstream package not ready yet
  if [ ! -x ./configure ]; then
    ./autogen.sh
  fi

  ./configure --prefix=/usr --libexecdir=/usr/lib/ktsuss
  make
}

package() {
  cd $srcdir/$_svnmod

  make DESTDIR=$pkgdir install
  install -D -m644 COPYING $pkgdir/usr/share/licenses/ktsuss/COPYING
}
