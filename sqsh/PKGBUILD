# Contributor: Tido
# Maintainer: Erik Johnson (palehose at gmail dot com)
pkgname=sqsh
pkgver=2.4
pkgrel=2
pkgdesc="Unix/Linux replacement for Sybase's isql"
url="http://www.sqsh.org/"
arch=('x86_64 i686')
license="GPL"
depends=('freetds' 'readline' 'libxaw')
source=(http://downloads.sourceforge.net/project/${pkgname}/${pkgname}/${pkgname}-${pkgver}/${pkgname}-${pkgver}.tgz
        linked_libs.patch
        readline_deprecated_cppfunction.patch)
md5sums=(0ad6cc9452d3257866ccde5f14ffa013
         4abfa0de7e356c08030d9a468fb5b17c
         d8bd09b790abc49708331609d1cc2735)

build() {
    cd "${srcdir}/${pkgname}-${pkgver}"
    patch -Np1 -i "${srcdir}/linked_libs.patch"
    patch -Np1 -i "${srcdir}/readline_deprecated_cppfunction.patch"
    export SYBASE=/usr
    ./configure --prefix=/usr --sysconfdir=/etc --with-x --with-readline
    make
}

package() {
    cd "${srcdir}/${pkgname}-${pkgver}"
    make DESTDIR="$pkgdir" install.man
    make DESTDIR="$pkgdir" install
}
