# Maintainer: D. Can Celasun <dcelasun[at]gmail[dot]com>
# Contributor: Asa Marco <marcoasa90[at]gmail[.]com>
pkgname=kupfer
pkgver=v203
pkgrel=2
pkgdesc="Launcher application written in python. Similar to Gnome-Do / Launchy"
arch=('i686' 'x86_64')
url="http://kaizer.se/wiki/kupfer/"
license=('GPL')
depends=('pyxdg' 'pygtk' 'dbus-python'  'python-keybinder' 'python-keyring' 'gtk2>=2.16' 'pygobject>=2.18' 'hicolor-icon-theme' 'shared-mime-info')
optdepends=('gnome-python-desktop: enables all plugins and gnome integration' 'python-wnck: tracks running applications (part of gnome-python-desktop, free of gnome dependencies)' 'realpath: Required for nautilus integration')
makedepends=('intltool')
source=(http://kaizer.se/publicfiles/kupfer/$pkgname-$pkgver.tar.gz
                float_integer.patch)
md5sums=('57a5bb3816f96072cd6318ad67bb0908'
         '3e5cc54e798293145bc9ca853f9de1c7')

install=kupfer.install
build() {
  cd "$srcdir/$pkgname-$pkgver" || return 1
  
  msg "Patching sources..."
  patch -Np1 < ../../float_integer.patch || return 1
  
  
  export PYTHON="/usr/bin/python2"
  sed -i 's|#![ ]*/usr/bin/env python$|#!/usr/bin/env python2|' ./waf
  sed -i -e "s|#![ ]*/usr/bin/python$|#!/usr/bin/python2|" \
  -e "s|#![ ]*/usr/bin/env python$|#!/usr/bin/env python2|" \
  $(find $srcdir/$pkgname-$pkgver -name '*.py')
  
./waf configure --prefix=/usr || return 1
./waf || return 1
./waf install -f --destdir=$pkgdir || return 1
}


