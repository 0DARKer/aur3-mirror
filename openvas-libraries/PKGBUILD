# Maintainer: Vlatko Kosturjak <kost@linux.hr>, Contributor: Mike Roberts <noodlesgc@gmail.com> - originally by: Ermak <ermak@email.it>
pkgname=openvas-libraries
pkgver=4.0.5
pkgrel=3
pkgdesc="The OpenVAS libraries"
arch=('i686' 'x86_64')
url="http://www.openvas.org/"
license=('GPL')
depends=('gnutls' 'libpcap' 'gpgme' 'cmake' 'bison')
makedepends=('pkg-config')
source=(http://wald.intevation.org/frs/download.php/872/$pkgname-$pkgver.tar.gz openvas-nowerror.patch openvas-gnutls.patch)
md5sums=('88152081a0a0d2e8dfd63538999f56ef' '47b8310bbd97b0ef491414d26ddb8f03' '14b2a7c330f647d27e9978bd7167119c')
CFLAGS="-Wno-error"

build() {
  cd "$srcdir/$pkgname-$pkgver"

  patch -p1 < "$startdir/src/openvas-nowerror.patch"
  patch -p1 < "$startdir/src/openvas-gnutls.patch"

  cmake -DCMAKE_INSTALL_PREFIX=/usr -DSYSCONFDIR=/etc -DLOCALSTATEDIR=/var .
  
  make CC=--disable-werror || return 1
  make DESTDIR="$pkgdir/" install
}

# vim:set ts=2 sw=2 et:

