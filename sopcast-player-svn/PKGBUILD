# Maintainer: archtux <antonio.arias99999@gmail.com>

pkgname=sopcast-player-svn
pkgver=277
pkgrel=1
pkgdesc='GUI front-end to p2p TV sopcast'
arch=('i686' 'x86_64')
url='http://code.google.com/p/sopcast-player/'
license=('GPL2')
depends=('gtk2' 'hicolor-icon-theme' 'pygtk' 'sopcast' 'vlc>=1.1.5')
makedepends=('gettext')
options=(!makeflags)
[ "$CARCH" == "x86_64" ] && depends=('bin32-sopcast' 'gtk2' 'hicolor-icon-theme' 'pygtk' 'vlc>=1.1.5')
install=sopcast-player.install

_svntrunk=http://sopcast-player.googlecode.com/svn/trunk 
_svnmod=sopcast-player

build() {
  cd $startdir/src

  svn co $_svntrunk --config-dir ./ -r $pkgver $_svnmod

  msg "SVN checkout done or server timeout"
  msg "Starting make..."

  cd $srcdir/sopcast-player

  # Python2 fix
  sed -i 's#PYTHON ?= $(BINDIR)/python#\02#' Makefile

  # Build
  make
  make DESTDIR=$pkgdir install
}