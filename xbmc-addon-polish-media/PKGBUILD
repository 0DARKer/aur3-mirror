# Maintainer: Tomasz "ludvick" Niedzielski <ludvick0[at]gmail[dot]com>

pkgname=xbmc-addon-polish-media
_filename=repository.smuto
pkgver=1.2.0
pkgrel=2
pkgdesc="Wtyczka dla xbmc do odbioru TVNPlayer, vod.tvp.pl, ipla.tv, niektorych polskich stacji radiowych (Moje Polskie Radio) i wiele wiecej."
url="http://code.google.com/p/smuto/"
license=('GPL3')
arch=('any')
depends=('xbmc' 'sudo')
optdepends=('xbmc-module-cryptopy')
makedepends=('unzip')

source=('http://smuto.googlecode.com/files/repository.smuto-1.2.0.zip')
md5sums=('69287bffe06385d3f315cf3a1a6617ed')

noextract=($source)

package() {
	if [ $USER != "root" ] ; then

		# prepare directories
		mkdir -pm755 $pkgdir/home/$USER/.xbmc/addons/packages
		mkdir -pm755 $pkgdir/home/$USER/.xbmc/addons/$_filename

		# installation...
		install -Dm644 $srcdir/*.zip "$pkgdir/home/$USER/.xbmc/addons/packages/"
		install -Dm644 $srcdir/$_filename/*.* "$pkgdir/home/$USER/.xbmc/addons/$_filename/"

		# set proper ownership of files & directories
		sudo chown -R $USER: "$pkgdir/home/$USER"

		# additional info
		msg ""
		msg ""
		msg "Jeżeli wystąpią problemy w odbiorze TVNPlayera,"
		msg "zainstaluj pakiet xbmc-module-cryptopy (z AUR)."
		msg ""
		msg ""

		return 0

	else

		msg ""
		msg ""
		msg "Uwaga!"
		msg ""
		msg "Nie zainstalowano $pkgname-$pkgver-$pkgrel!"
		msg ""
		msg "zainstaluj pakiet z konta zwykłego użytkownika lub"
		msg "logując się na konto roota komendą sux (nie sudo!)"
		msg ""
		msg ""

		return 1

	fi
}
