# Contributor: Flamelab <panosfilip@gmail.com>
# Fixes by: zippy

# Contributor: St√©phane Gaudreault <stephane@archlinux.org>
# Contributor: SleepyDog
# Contributor: N30N <archlinux@alunamation.com>


pkgname=glewmx-fixed
pkgver=1.5.8
pkgrel=2
pkgdesc="A cross-platform C/C++ extension loading library [fixed PKGBUILD]"
arch=("i686" "x86_64")
url="http://glew.sourceforge.net"
license=("BSD" "MIT" "GPL")
depends=("libxmu" "libxi" "mesa")
source=(http://downloads.sourceforge.net/glew/glew-${pkgver}.tgz)
sha1sums=('450946935faa20ac4950cb42ff025be2c1f7c22e')
provides=("glew=${pkgver}")
conflicts=("glew")

build() {
	cd glew-${pkgver}
	sed -i "s|lib64|lib|" config/Makefile.linux
	make GLEW_MX=1
}

package() {
	cd glew-${pkgver}
        make GLEW_DEST="${pkgdir}/usr" install
        ln -s /usr/lib/libGLEW.so.${pkgver} "${pkgdir}/usr/lib/libGLEWmx.so.${pkgver}"
        ln -s /usr/lib/libGLEW.so.${pkgver} "${pkgdir}/usr/lib/libGLEWmx.so"
        cd ${pkgdir}/usr/lib/pkgconfig && cp glew.pc glewmx.pc
        sed -i s'/glew/glewmx/g' glewmx.pc
        sed -i s'/GLEW/GLEWmx/g' glewmx.pc

}
