# Contributor: Kristof Jozsa <kjozsa@ftldev.hu>
# Contributor: made_in_nz

pkgname=visualvm
pkgver=1.3.1
pkgrel=1
pkgdesc="A Java VM monitoring and troubleshooting tool"
arch=('i686' 'x86_64')
url="https://visualvm.dev.java.net/"
license=('GPL2')
depends=('java-environment')

source=(https://visualvm.dev.java.net/files/documents/7163/152922/visualvm_131.zip \
    visualvm)
md5sums=('2da7b1b021f3d704cb657733125834ea' '0187d33fcb833ac2a5349e9bbaa0c52c')

build() {
  cd $startdir/src
  mkdir $startdir/pkg/opt
  mv visualvm_131 $startdir/pkg/opt/visualvm

  rm -f $startdir/pkg/opt/visualvm/*.txt
  rm -f $startdir/pkg/opt/visualvm/bin/*.exe
  rm -f $startdir/pkg/opt/visualvm/platform10/lib/nbexec.{dll,exe}
  rm -rf $startdir/pkg/opt/visualvm/profiler3/lib/deployed/jdk1{5,6}/{hpux*,mac,solaris*,windows*}

  mkdir -p $startdir/pkg/usr/bin/
  install -m 755 $startdir/visualvm $startdir/pkg/usr/bin/
}
