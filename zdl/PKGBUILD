# Contributor: Fincer <fincer89 at hotmail dot com>
pkgname=zdl
pkgver=3.2.2.3
pkgrel=1
pkgdesc="A feature rich Doom launcher for ZDoom and GZDoom (Recommended Beta)"
url="http://zdl.vectec.net"
arch=('i686' 'x86_64')
license=('GPL')
depends=('qt4')
makedepends=('gdb' 'make')
optdepends=('gzdoom' 'zdoom')

source=(https://github.com/qbasicer/qzdl/archive/v${pkgver}.tar.gz
        $pkgname.png
        $pkgname.desktop)
md5sums=('50e61034d288d57ab3aecbd03dcf946a'
         '8d944499d4feb5ee6cbe98f84f77dbc9'
         '6ba4cc166dc8dd1db876306f2171455b')

build() {
  cd "$srcdir/q$pkgname-${pkgver}/"
  
  export QT_SELECT=4
  ./configure --prefix=/usr --disable-updater      
  
  make
}

package() {
  mkdir -p "$pkgdir/usr/bin/"
  mkdir -p "$pkgdir/usr/share/pixmaps/"
  mkdir -p "$pkgdir/usr/share/applications/"
  install $srcdir/q$pkgname-${pkgver}/zdl "$pkgdir"/usr/bin/zdl
  install -Dm644 ../$pkgname.desktop "$pkgdir/usr/share/applications/"
  install -Dm644 ../$pkgname.png "$pkgdir/usr/share/pixmaps/"  
}
