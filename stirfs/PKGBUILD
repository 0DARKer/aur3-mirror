# Maintainer: Gaetan Bisson <bisson@archlinux.org>

pkgname=stirfs
pkgver=1.3
pkgrel=1
pkgdesc='Secure, transparent and irresistible filesystem'
url="http://www.normalesup.org/~bisson/msc/${pkgname}-${pkgver}.c"
license=('BSD')
arch=('i686' 'x86_64')
depends=('fuse' 'openssl')
source=("${url}")
sha1sums=('b8491f2c0e993c734f8e002f3edea981d0c205c2')

build() {
	cd "${srcdir}"
	cc ${CFLAGS} -lfuse -lcrypto ${LDFLAGS} -o stirfs stirfs-${pkgver}.c
}

package() {
	cd "${srcdir}"
	install -d "${pkgdir}/usr/share/licenses/${pkgname}"
	install -Dm755 "${srcdir}/${pkgname}" "${pkgdir}/usr/bin/${pkgname}"
	head -n 22 "${pkgname}-${pkgver}.c" > "${pkgdir}/usr/share/licenses/${pkgname}/COPYING"
}
