# Maintainer: Gaetan Bisson <bisson@archlinux.org>

pkgname=stirfs
pkgver=1.0
pkgrel=1
pkgdesc='The secure, transparent and irresistible filesystem'
arch=('i686' 'x86_64')
url='http://www.win.tue.nl/~gbisson/msc/stirfs.c'
license=('BSD')
depends=('fuse' 'openssl')
source=("$url")
sha1sums=('ac0fb0120e598bf5b46de6110129686265dfbfea')

build() {
	cd "$srcdir"
	cc $CFLAGS -D_FILE_OFFSET_BITS=64 -lfuse -lssl -o stirfs stirfs.c $LDFLAGS
}

package() {
	cd "$srcdir"
	install -d "$pkgdir"/usr/{bin,share/licenses/stirfs}
	install -m 755 "$srcdir"/stirfs "$pkgdir"/usr/bin/
	head -n 22 stirfs.c > "$pkgdir"/usr/share/licenses/stirfs/COPYING
}
