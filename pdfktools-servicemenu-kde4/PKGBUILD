# Maintainer: garion < garion @ mailoo.org >

pkgname=pdfktools-servicemenu-kde4
pkgver=0.1.1
pkgrel=1
pkgdesc="Tools for PDF files"
arch=('i686' 'x86_64')
url="http://kde-apps.org/content/show.php?content=137502"
license=('GPL')
depends=('kdelibs' 'ghostscript' 'perl-exiftool')
source=(http://kde-apps.org/CONTENT/content-files/137502-$pkgname-$pkgver.tar.bz2)
md5sums=('163e55d032a24de95a25338b7cc8f787')

build() {
  cd $startdir/src/$pkgname-$pkgver
}

package(){
  cd $startdir/src/$pkgname-$pkgver
  mkdir -p "${startdir}/pkg/$(kde4-config --prefix)/share/kde4/services/ServiceMenus"
  mkdir -p "${startdir}/pkg/$(kde4-config --prefix)/bin"
  mkdir -p "${startdir}/pkg/$(kde4-config --prefix)/share/locale/el/LC_MESSAGES"
  mkdir -p "${startdir}/pkg/$(kde4-config --prefix)/share/locale/fr/LC_MESSAGES"
  install -m 644 src/pdfktools.desktop ${startdir}/pkg/$(kde4-config --prefix)/share/kde4/services/ServiceMenus/
  install -m 755 src/pdfktools.sh ${startdir}/pkg/$(kde4-config --prefix)/bin/
  msg "Patch for exiftool"
  ln -s /usr/bin/perlbin/vendor/exiftool ${startdir}/pkg/usr/bin/exiftool
  msg "Translation in Greek"
  msgfmt -o pdfktools.mo po/pdfktools_el.po
  install -m 644 pdfktools.mo ${startdir}/pkg/$(kde4-config --prefix)/share/locale/el/LC_MESSAGES/
  msg "Translation in French"
  msgfmt -o pdfktools.mo po/pdfktools_fr.po
  install -m 644 pdfktools.mo ${startdir}/pkg/$(kde4-config --prefix)/share/locale/fr/LC_MESSAGES/
}
