# Maintainer: garion < garion @ mailoo.org >

pkgname=pdfktools-servicemenu-kde4
pkgver=0.1.2
pkgrel=1
pkgdesc="Tools for PDF files"
arch=('i686' 'x86_64')
url="http://kde-apps.org/content/show.php?content=137502"
license=('GPL')
depends=('kdebase-kdialog' 'ghostscript' 'perl-exiftool')
source=(http://kde-apps.org/CONTENT/content-files/137502-$pkgname-$pkgver.tar.gz)
md5sums=('4b6420042bc4c003a3e7a48d5d0819db')

build() {
  cd $srcdir/$pkgname-$pkgver
}

package(){
  cd $srcdir/$pkgname-$pkgver
  install -d "$pkgdir/$(kde4-config --prefix)/share/kde4/services/ServiceMenus"
  install -d "$pkgdir/$(kde4-config --prefix)/bin"
  install -d "$pkgdir/$(kde4-config --prefix)/share/locale/el/LC_MESSAGES"
  install -d "$pkgdir/$(kde4-config --prefix)/share/locale/fr/LC_MESSAGES"
  install -d "$pkgdir/$(kde4-config --prefix)/share/locale/hu/LC_MESSAGES"
  install -m 644 src/pdfktools.desktop $pkgdir/$(kde4-config --prefix)/share/kde4/services/ServiceMenus/
  install -m 755 src/pdfktools.sh $pkgdir/$(kde4-config --prefix)/bin/
  msg "Patch for exiftool"
  ln -s /usr/bin/perlbin/vendor/exiftool $pkgdir/usr/bin/exiftool
  msg "Translation in Greek"
  msgfmt -o pdfktools.mo po/pdfktools_el.po
  install -m 644 pdfktools.mo $pkgdir/$(kde4-config --prefix)/share/locale/el/LC_MESSAGES/
  msg "Translation in French"
  msgfmt -o pdfktools.mo po/pdfktools_fr.po
  install -m 644 pdfktools.mo $pkgdir/$(kde4-config --prefix)/share/locale/fr/LC_MESSAGES/
  msg "Translation in Hungarian"
  msgfmt -o pdfktools.mo po/pdfktools_hu.po
  install -m 644 pdfktools.mo $pkgdir/$(kde4-config --prefix)/share/locale/hu/LC_MESSAGES/
}
