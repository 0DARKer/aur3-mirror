# $Id: $
# Maintainer: Allan McRae <allan@archlinux.org>
# Contributor: Piotr Husiatynski <phusiatynski@gmail.com>

pkgname=xfce4-places-plugin
pkgver=20110125
pkgrel=1
pkgdesc="Menu with quick access to folders, documents and removable media"
arch=('i686' 'x86_64')
url="http://goodies.xfce.org/projects/panel-plugins/xfce4-places-plugin"
license=('GPL')
depends=('xfce4-panel' 'thunar' 'thunar-vfs')
makedepends=('perl-xml-simple' 'intltool' 'git' 'xfce4-dev-tools')
source=("http://bugzilla.xfce.org/attachment.cgi?id=3336")
md5sums=('b18ddc9dd2791c9525b7ef796c821081')
_gitroot="git://git.xfce.org/panel-plugins/xfce4-places-plugin"
_gitname="xfce4-places-plugin"



build()
{
    cd "$srcdir"
    msg "Connecting to GIT server...."

    if [ -d "$srcdir/$_gitname" ] ; then
	cd $_gitname && git pull origin
	msg "The local files are updated."
    else
	git clone $_gitroot
    fi

    msg "GIT checkout done or server timeout"
    msg "Starting make..."

    cd "$srcdir/$_gitname"

    patch -Np1 < ${srcdir}/attachment.cgi\?id\=3336
    ./autogen.sh
    
    #cd ${srcdir}/${pkgname}-${pkgver}
    ./configure --prefix=/usr --libexecdir=/usr/lib/xfce4
    make || return 1
    make DESTDIR=${pkgdir} install
}
