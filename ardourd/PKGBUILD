# Maintainer: SpepS <dreamspepser at yahoo dot it>

pkgname=ardourd
pkgver=0.1.7
pkgrel=1
pkgdesc="A proof-of-concept libardour-based record/playback, song, and mixer engine daemon as part of a modular audio production system."
arch=(i686 x86_64)
url="http://ayyi.org/"
license=('GPL')
depends=('jack' 'dbus-glib' 'fftw' 'gtkmm' 'taglib'
         'slv2' 'liblo' 'liblrdf' 'aubio' 'libsmf')
source=("http://ayyi.org/files/$pkgname-$pkgver.tar.bz2")
md5sums=('dd128b3fe1a9be27d2313e36fabf0aa8')

build() {
  cd "$srcdir/$pkgname-$pkgver"

  export PYTHON="python2"

  # Architecture portability fix
  sed -i "s|unsigned)sp|uintptr_t)sp|;s|0400|0600|" libs/ayyi/shm_seg.cc

  python2 waf configure --prefix=/usr
  python2 waf
}

package() {
  cd "$srcdir/$pkgname-$pkgver"

  python2 waf install --destdir="$pkgdir"
}
