# $Id$
# Maintainer: Adam Nielsen <malvineous@shikadi.net>

pkgbase=etc-update
pkgname=('etc-update')
pkgver=13723
pkgrel=4
arch=('i686' 'x86_64')
url="http://www.gentoo.org/doc/en/handbook/handbook-amd64.xml?part=3&chap=4#doc_chap2"
license=('GPL')
depends=('diffutils')
makedepends=('diffutils' 'patch' 'svn')
options=()
source=(etc-update-arch_port.patch)
md5sums=('e8433838fa7104b20f44f9340ea61b0d')

_svntrunk=svn://anonsvn.gentoo.org/portage/main/trunk/

build() {
  cd "${srcdir}"
  msg "Downloading base versions from Gentoo SVN..."

  svn export ${_svntrunk}bin/etc-update
  svn export ${_svntrunk}cnf/etc-update.conf

  msg "Applying Gentoo -> Arch conversion patch..."
  patch -i "${srcdir}/etc-update-arch_port.patch"
}

package_etc-update() {
  pkgdesc="CLI to interactively merge *.pacnew in /etc"

  cd "${srcdir}"
  install -D -m644 etc-update.conf "${pkgdir}/etc/etc-update.conf"
  install -D -m755 etc-update "${pkgdir}/usr/bin/etc-update"
}
