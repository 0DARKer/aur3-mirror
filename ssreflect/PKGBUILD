# Maintainer: Mathieu Boespflug <mboes@tweag.net>

pkgname=ssreflect
pkgver=1.3pl4
pkgrel=1
pkgdesc="A set of extensions to the scripting language of Coq."
url="http://www.msr-inria.inria.fr/Projects/math-components"
arch=('i686' 'x86_64')
license=('GPL')
depends=('coq>=8.3pl2' 'coq<8.4')
makedepends=('camlp5-transitional')
source=(http://www.msr-inria.inria.fr/Projects/math-components/$pkgname-$pkgver.tar.gz)
md5sums=('0d2190d61abe494aea7a5c329b18e8c8')

build() {
  cd $srcdir/$pkgname-$pkgver

#  patch -Np1 -i $srcdir/0001-Activated-option-Automatic-Coercions-Import.patch
  sed -i s/Stdpp/Compat/ src/ssreflect.ml

  make
  make DESTDIR=$pkgdir 'COQLIB:=$(DESTDIR)/$(shell coqtop -where)' install
}

