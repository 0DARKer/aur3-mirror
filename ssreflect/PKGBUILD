# Maintainer: Mathieu Boespflug <mboes@tweag.net>

pkgname=ssreflect
pkgver=1.3pl2
pkgrel=2
pkgdesc="A set of extensions to the scripting language of Coq."
url="http://www.msr-inria.inria.fr/Projects/math-components"
arch=('i686' 'x86_64')
license=('GPL')
depends=('coq>=8.3pl2' 'coq<8.4')
makedepends=('camlp5-transitional')
source=(http://www.msr-inria.inria.fr/Projects/math-components/$pkgname-$pkgver.tar.gz
        0001-Activated-option-Automatic-Coercions-Import.patch)
md5sums=('220592455f2076f0d50af2081b31504a'
         '9cd655a858e7bb324b8d833c190bf5bf')

build() {
  cd $srcdir/$pkgname-$pkgver

  patch -Np1 -i $srcdir/0001-Activated-option-Automatic-Coercions-Import.patch
  sed -i s/Stdpp/Compat/ src/ssreflect.ml

  make
  make DESTDIR=$pkgdir 'COQLIB:=$(DESTDIR)/$(shell coqtop -where)' install
}

