# Contributor: Artem Sereda <overmind88@gmail.com>
pkgname=flacon
pkgver=0.5.4
pkgrel=1
pkgdesc="Extracts individual tracks from one big audio file containing the \
 entire album of music and saves them as separate audio files."
arch=('i686' 'x86_64')
url="http://kde-apps.org/content/show.php/Flacon?content=113388"
license=('GPL')
depends=('python2' 'python2-qt' 'flac' 'shntool' 'hicolor-icon-theme')
optdepends=('vorbis-tools: For OGG support'
  'mac: For APE support'
  'wavpack: For WavPack support'
  'ttaenc: For TrueAudio support'
  'lame: For MP3 support'
  'mp3gain: For MP3 Replay Gain support'
  'vorbisgain: For OGG Replay Gain support')

source=(http://kde-apps.org/CONTENT/content-files/113388-$pkgname-$pkgver.tgz)
md5sums=('89963dd5f7376de597923890f04de907')

build() {
  export PYTHON=`which python2`
  cd "$srcdir/$pkgname-$pkgver"
 sed -i -e "s|#![ ]*/usr/bin/python$|#!/usr/bin/python2|" \
      -e "s|#![ ]*/usr/bin/env python$|#!/usr/bin/env python2|" \
      $(find . -name '*.py')
  cd "$srcdir/$pkgname-$pkgver"
 sed -i -e "s|#![ ]*/usr/bin/python$|#!/usr/bin/python2|" \
      -e "s|#![ ]*/usr/bin/env python$|#!/usr/bin/env python2|" misc/flacon
  sed -i s/python/python2/ Makefile
  make DESTDIR=${pkgdir} install
}