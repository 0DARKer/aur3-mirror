pkgname=node-webkit
pkgver=0.4.2
pkgrel=1
pkgdesc="node-webkit is an app runtime based on Chromium and node.js."
arch=("i686" "x86_64")
url="https://github.com/rogerwang/node-webkit"
license=("MIT")
depends=("alsa-lib" "gconf" "gtk2" "nss")
optdepends=("nodejs: npm package support")

if [ "$CARCH" = "i686" ]; then
  _arch="ia32"
  sha1sums=("81cd3d92c0eaa3357621a0dee2017ce4f52227e5")
  source=("https://s3.amazonaws.com/node-webkit/v0.4.2/node-webkit-v0.4.2-linux-ia32.tar.gz")
fi
if [ "$CARCH" = "x86_64" ]; then
  _arch="x64"
  sha1sums=("66384a3a7763b52b59be91a31edeb1fc60911a82")
  source=("https://s3.amazonaws.com/node-webkit/v0.4.2/node-webkit-v0.4.2-linux-x64.tar.gz")
fi

package() {
  mkdir -p $pkgdir/usr/{lib/node-webkit,bin}
  cp -R $srcdir/node-webkit-v$pkgver-linux-$_arch/* $pkgdir/usr/lib/node-webkit/
  ln -s "/usr/lib/node-webkit/nw" "$pkgdir/usr/bin/nw"
  [ ! -f "/usr/lib/libudev.so.0" ] && ln -s  "/usr/lib/libudev.so.1" "$pkgdir/usr/lib/libudev.so.0"
}

