pkgname=node-webkit
pkgver=0.4.1
pkgrel=1
pkgdesc="node-webkit is an app runtime based on Chromium and node.js."
arch=('i686' 'x86_64')
url="https://github.com/rogerwang/node-webkit"
license=('MIT')
depends=('alsa-lib' 'gconf' 'gtk2' 'nss')
optdepends=('nodejs: npm package support')

if [ "$CARCH" = "i686" ]; then
  _arch='ia32'
  sha1sums=('98a93209db068004524070c46023af8494361062')
elif [ "$CARCH" = "x86_64" ]; then
  _arch='x64'
  sha1sums=('1abd275bae9e57acf5f040d740700eb2e5eefbb6')
fi

source=("https://s3.amazonaws.com/node-webkit/v${pkgver}/${pkgname}-v${pkgver}-linux-${_arch}.tar.gz")

package() {
  mkdir -p $pkgdir/usr/{lib/node-webkit,bin}
  cp -R $srcdir/node-webkit-v$pkgver-linux-$_arch/* $pkgdir/usr/lib/node-webkit/
  ln -s "/usr/lib/node-webkit/nw" "$pkgdir/usr/bin/nw"
  [ ! -f "/usr/lib/libudev.so.0" ] && ln -s  "/usr/lib/libudev.so.1" "$pkgdir/usr/lib/libudev.so.0"
}


