diff --git a/plugins/migration/copytable/copytable.cpp b/plugins/migration/copytable/copytable.cpp
index b273287..5f076e6 100644
--- a/plugins/migration/copytable/copytable.cpp
+++ b/plugins/migration/copytable/copytable.cpp
@@ -1634,7 +1634,9 @@ MySQLCopyDataTarget::MySQLCopyDataTarget(const std::string &hostname, int port,
 
   mysql_init(&_mysql);
 #if defined(MYSQL_VERSION_MAJOR) && defined(MYSQL_VERSION_MINOR) && defined(MYSQL_VERSION_PATCH)
-#if MYSQL_CHECK_VERSION(5,6,6)
+#if MYSQL_CHECK_VERSION(10,0,10)
+  mysql_optionsv(&_mysql, MYSQL_OPT_CONNECT_ATTR_ADD, "program_name", app_name.c_str());
+#elif MYSQL_CHECK_VERSION(5,6,6)
   mysql_options4(&_mysql, MYSQL_OPT_CONNECT_ATTR_ADD, "program_name", app_name.c_str());
 #endif
 #endif
