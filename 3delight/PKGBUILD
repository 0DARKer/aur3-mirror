# Maintainer: Lukas Jirkovsky <l DOT jirkovsky AT gmail DOT com>
pkgname=3delight
pkgver=9.0.0
pkgrel=1
pkgdesc="Fast, high quality, RenderMan - compliant renderer"
arch=('i686' 'x86_64')
url="http://www.3delight.com/"
license=('custom')
depends=('mesa' 'libgl' 'libstdc++5' 'gtk2')
source=(http://www.3delight.com/en/uploads/packages/$pkgname-$pkgver-Linux-$CARCH.tar.gz)
md5sums=('1f625e1724e88653d74f35a7e96d8095')
[ "$CARCH" = "x86_64" ] && md5sums=('004bc59b47c17816df2035df908a8903')

build() {
  cd "$srcdir"/$pkgname-$pkgver-Linux-$CARCH
  # some sed magic
  sed "s|INSTALLDIR|/opt/3delight|1" .3delight_bash.in > .3delight_bash
  sed "s|INSTALLDIR|/opt/3delight|1" .3delight_csh.in > .3delight_csh

  mkdir -p "$pkgdir"/opt
  cp -R 3delight "$pkgdir"/opt
  install -D -m755 .3delight_bash "$pkgdir"/etc/profile.d/3delight.sh
  install -D -m755 .3delight_csh "$pkgdir"/etc/profile.d/3delight.csh

  install -D -m644 License "$pkgdir"/usr/share/licenses/$pkgname/License
}
