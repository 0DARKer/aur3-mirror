# Maintainer: stratum nine <strata@lavabit.com>
pkgname=suricata104
pkgver=1.0.4
pkgrel=1
pkgdesc="The Suricata Engine is an Open Source Next Generation Intrusion Detection and Prevention Engine."
arch=('any')
url="http://www.openinfosecfoundation.org/index.php/downloads"
license=('GPL2')
depends=('pcre' 'libnet' 'libyaml' 'libpcap' 'libcap-ng' 'zlib')
makedepends=()
source=(http://www.openinfosecfoundation.org/download/$pkgname-$pkgver.tar.gz)
install=${pkgname}.install
sha256sums=('e1b5b2303f174f46fcf60fb530583b72ccb656dda503905d8fecee58200403f3')

build() {
  cd "$srcdir/$pkgname-$pkgver"

  ./configure --prefix=/usr --sysconfdir=/etc/$pkgname
  make
}

package() {
  cd "$srcdir/$pkgname-$pkgver"

  make DESTDIR="$pkgdir/" install
  mkdir -p ${pkgdir}/etc/suricata ${pkgdir}/var/log/suricata
  mkdir -p ${pkgdir}/etc/conf.d ${pkgdir}/etc/rc.d
  cp ${startdir}/suricata.conf ${pkgdir}/etc/conf.d/suricata
  cp ${startdir}/rc.suricata ${pkgdir}/etc/rc.d/suricata
}
