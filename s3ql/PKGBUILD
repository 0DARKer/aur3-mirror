# Maintainer: Brendan MacDonell <macdonellba at gmail dot com>

pkgname=s3ql
pkgver=2.8
pkgrel=2
pkgdesc="A full-featured file system for online data storage."
arch=('i686' 'x86_64')
url="https://bitbucket.org/nikratio/s3ql/overview"
license=('GPL3')
depends=('python' 'python-apsw' 'python-crypto' 'python-dugong' 'python-llfuse>=0.40-2')
makedepends=('gcc')
source=(https://bitbucket.org/nikratio/s3ql/downloads/s3ql-$pkgver.tar.bz2)
md5sums=('b0c55bdc9333d2c65eee4bb36c879acd')

build() {
  cd $srcdir/$pkgname-$pkgver
  rm -r src/dugong
}

package() {
  cd $srcdir/$pkgname-$pkgver

  python setup.py install --root=$pkgdir --optimize=1 || exit 1

  mkdir -p $pkgdir/usr/share/doc/$pkgname
  cp doc/manual.pdf $pkgdir/usr/share/doc/$pkgname
  cp -r rst $pkgdir/usr/share/doc/$pkgname/rst
  cp -r contrib $pkgdir/usr/share/doc/$pkgname
}
