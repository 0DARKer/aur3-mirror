# Contributor: Christopher Heien <chris.h.heien@gmail.com>
# Maintainer: Christopher Heien <chris.h.heien@gmail.com>
pkgname="talend-profiler"
_altname="TalendOpenProfiler"
pkgver="4.1.2"
_build="r53616"
pkgrel=1
pkgdesc="Data profiling suite."
arch=("i686 x86_64")
url=("http://www.talend.com")
license=("GPL2")
depends=("gtk2" "glib2")
options=("!strip")
source=("http://downloads.sourceforge.net/project/talendprofiler/talendprofiler/${pkgver}/TOP-All-${_build}-V${pkgver}.zip" 
	'OpenProfiler32bit.desktop'
	'OpenProfiler64bit.desktop')
sha1sums=("052d7b03c0812fde635b7dbd4ce03f8725616735"
	  "3036142606ce0ce9ca9b97548573afc546186f3d"
	  "29e84523f2be445d3697ca9dd218c4ef225ec4b1")
build(){
	
    mkdir -p $pkgdir/opt/talend $pkgdir/usr/bin $pkgdir/usr/share/applications
    mv $srcdir/TOP-All-${_build}-V${pkgver} $pkgdir/opt/talend/$_altname
    cd $pkgdir/opt/talend/$_altname
    
    #remove all non-Linux arch
    rm -rf  *macosx* && \
    rm -rf *solaris* && \
    rm -rf *gtk-ppc* && \
    rm -rf *win32* || return 1

    ln -s /opt/talend/$_altname/$_altname-linux-gtk-x86 $pkgdir/usr/bin || return 1
    ln -s /opt/talend/$_altname/$_altname-linux-gtk-x86_64 $pkgdir/usr/bin || return 1    

    chmod +x $pkgdir/opt/talend/$_altname/$_altname-linux-gtk-x86 || return 1
    chmod +x $pkgdir/opt/talend/$_altname/$_altname-linux-gtk-x86_64 || return 1

    install --mode=0755 $srcdir/OpenProfiler32bit.desktop $pkgdir/usr/share/applications/OpenProfiler32bit.desktop || return 1
    install --mode=0755 $srcdir/OpenProfiler64bit.desktop $pkgdir/usr/share/applications/OpenProfiler64bit.desktop || return 1
}
