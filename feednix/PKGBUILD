# Maintainer: Jorge Martinez Hernandez <jorgemartinezhernandez@gmail.com>
# Contributor: Jorge Martinez Hernandez <jorgemartinezhernandez@gmail.com>

pkgname=feednix
pkgver=v1.0
pkgrel=6
pkgdesc="A simple ncurses-based console client for Feedly"

arch=('i686' 'x86_64')
url="http://feednix-jarkore.rhcloud.com/"
license=('GPL3')
depends=('ncurses' 'curl' 'jsoncpp' 'autoconf' 'automake')
optdepends=('w3m: for post preview on command line')
makedepends=('autoconf' 'automake')
conflicts=('feednix-git')
install='feednix.install'
md5sums=('a4144178f97aa1cb288886a75bca0da4')
source=('https://downloads.sourceforge.net/project/feednix/Feednix/feednix-1.0.tar.gz')

build(){
        cd Feednix
        ./autogen.sh
        ./configure
        make
}

package(){
        cd "${srcdir}/Feednix"
        make PREFIX=/usr DESTDIR="${pkgdir}" install

        if [[ ! -d "/etc/xdg/feednix" ]]; then
                install -D -m755 config.json "${pkgdir}/etc/xdg/feednix/config.json"
        fi 

        if [[ -e "$HOME/.config/feednix/config.json" ]]; then
                install -o $USER -g $USER -D -m600 config.json "${pkgdir}$HOME/.config/feednix/config.json.new"
        fi

        install -D -m644 LICENSE "${pkgdir}/usr/share/licenses/feednix/LICENSE"
        echo "Config file installed as $HOME/.config/feednix/config.json.new"
}
