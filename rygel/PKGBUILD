# Contributor: Thijs Vermeir <thijsvermeir@gmail.com>
# Contributor: Denis Zawada <deno@rootnode.net>

pkgname=rygel
pkgver=0.8.3
pkgrel=1

_majorver=`echo $pkgver|sed 's/\([0-9]\+\.[0-9]\+\)\.[0-9]\+/\1/'`

pkgdesc="Rygel is an implementation of the UPnP MediaServer V 2.0 \
         specification that is specifically designed for GNOME (Mobile). It is \
         based on GUPnP and is written (mostly) in Vala language."
arch=('i686' 'x86_64')
url="http://live.gnome.org/Rygel"
license=('GPL')
depends=('gstreamer0.10-base' 'gupnp>=0.13.4' 'gupnp-av>=0.7.0' 'libgee>=0.3.0' 'dbus-glib' 'hicolor-icon-theme' 'gupnp-dlna>=0.3.0')
makedepends=('gtk-doc' 'pkgconfig' 'intltool')
replaces=('gupnp-media-server')
options=('!libtool')
source=("http://ftp.acc.umu.se/pub/GNOME/sources/rygel/${_majorver}/${pkgname}-${pkgver}.tar.gz")
install=rygel.install

build() {
  cd $srcdir/$pkgname-$pkgver
  ./configure --prefix=/usr --sysconfdir=/etc --localstatedir=/var \
              --disable-static --enable-gst-launch-plugin --enable-tracker-plugin \
              --enable-media-export-plugin --enable-external-plugin \
              --enable-mediathek-plugin --disable-silent-rules || return 1
  make || return 1
  make DESTDIR=$pkgdir install || return 1
}
md5sums=('f29f4cffb05685adcd2928472e54e9bf')
