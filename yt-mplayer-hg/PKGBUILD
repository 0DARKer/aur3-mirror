# Contributor portix

pkgname=yt-mplayer-hg
pkgver=40
pkgrel=1
pkgdesc="yt-mplayer" 
url="http://bitbucket.org/portix/yt-mplayer" 
arch=('i686' 'x86_64')
license=('GPL')
depends=('libwebkit' 'mplayer' 'gtk2')
provides=(yt-mplayer)
conflicts=(yt-mplayer)
makedepends=('pkgconfig' 'mercurial')

hgroot="https://bitbucket.org/portix"
hgrepo="yt-mplayer"

build() {
  cd "$srcdir" 
  if [ -d "${hgrepo}" ]; then
    cd $hgrepo
    hg pull -u || test -eq 255 && return 1
  else 
    hg clone "$hgroot/$hgrepo" 
  fi

  rm -rf $srcdir/$hgrepo-build
  cp -a ${srcdir}/${hgrepo} ${srcdir}/${hgrepo}-build
  cd ${srcdir}/${hgrepo}-build
  make 
}
package() {
  cd ${srcdir}/${hgrepo}-build
  make DESTDIR=${pkgdir} install 
}
