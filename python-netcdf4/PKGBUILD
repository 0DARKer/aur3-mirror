# Contributor: abenson <adrian.benson@yahoo.co.nz>

pkgname=python-netcdf4
pkgver=0.9.3
pkgrel=1
pkgdesc="A python library for reading, manpiulating and creating netcdf files"
arch=('x86_64' 'i686')
url="http://code.google.com/p/netcdf4-python"
license=('MIT')

builddepends=('python>=2.6.4' 'netcdf>=4.1' 'hdf5>=1.8.4' 'python-numpy>=1.4.0')
depends=('python>=2.6.4' 'netcdf>=4.1' 'hdf5>=1.8.4' 'python-numpy>=1.4.0')

source=(http://netcdf4-python.googlecode.com/files/netCDF4-${pkgver}.tar.gz
        'license.txt')
#md5sums=('24cc572df54ffb37b0fe45619943b0ce'
#         'd3b89c97de68de49328b557d21de8adc')


md5sums=('b3a82af0300d0e0b136824b9a0bb2f41'
         'd3b89c97de68de49328b557d21de8adc')


build() {
    
    cd $srcdir/netCDF4-$pkgver
    
    #comment following lines if you only want netcdf3 module 
    python2 setup.py install --prefix=/usr --root=$pkgdir || return 1
    
    #install arbitrarily creates a bin dir with some netcdf conversion programs,
    # however these functions are better handle by netcdf itself. They are also 
    # installed under 
    rm -r $pkgdir/usr/bin
    
    # comment following if you only want netcdf4 module 
    # included to allow backward compatibility with the eprecated pycdf
    export NETCDF3_DIR=/usr
    python2 setup-nc3.py install --prefix=/usr --root=$pkgdir || return 1
    
    mkdir -p $pkgdir/usr/share/doc/$pkgname/{docs,examples}
    install -m644 docs/* $pkgdir/usr/share/doc/$pkgname/docs|| return 1
    install -m644 examples/* $pkgdir/usr/share/doc/$pkgname/examples || return 1
    
    mkdir -p $pkgdir/usr/share/$pkgname/{test,utils}
    install -m644 test/* $pkgdir/usr/share/$pkgname/test || return 1
    install -m644 utils/* $pkgdir/usr/share/$pkgname/utils || return 1
    
    install -Dm644 $srcdir/license.txt \
            $pkgdir/usr/share/licenses/$pkgname/license.txt || return 1
    
}
