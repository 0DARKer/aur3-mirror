# Maintainer: Tomasz Å»ok <tomasz.zok[at]gmail.com>
pkgname=pymol
pkgver=1.4b1
pkgrel=1
pkgdesc="A USER-SPONSORED molecular visualization system on an OPEN-SOURCE foundation"
arch=('i686' 'x86_64')
url="http://pymol.org/"
license=('custom:Python License (CNRI Python License)')
groups=()
depends=('glut' 'glew' 'libpng' 'tcl' 'tk' 'python2' 'freetype2' 'python-pmw')
makedepends=()
optdepends=()
provides=('pymol')
conflicts=('pymol-svn')
replaces=()
backup=()
options=()
install=
changelog=
source=("http://sourceforge.net/projects/pymol/files/pymol/1.4/pymol-v$pkgver.tar.bz2/download")
noextract=()
md5sums=(40848ecff4527685175743f095547240)

build() {
  cd "$srcdir/$pkgname"
  python2 setup.py build
}

package() {
  python_ver=$(python2 -c 'import sys; print(sys.version[:3])')
  export PYTHONPATH="$pkgdir/usr/lib/python$python_ver/site-packages"

  cd "$srcdir/$pkgname"
  python2 setup.py install --prefix=/usr --root="$pkgdir" || return 1
  python2 setup2.py install --prefix=/usr --root="$pkgdir" || return 1
  sed -i "s|$pkgdir||g" pymol
  install -D -m755 pymol "$pkgdir/usr/bin/pymol" || return 1
}

# vim:set ts=2 sw=2 et:
