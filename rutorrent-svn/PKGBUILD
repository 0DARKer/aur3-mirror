# Maintainer: skydrome <irc.freenode.net>
# Contributor: smallcms <smallcms at mail dot ru>

pkgname=rutorrent-svn
pkgver=1899
pkgrel=1
pkgdesc="Yet another web front-end for rTorrent"
arch=('any')
url="http://code.google.com/p/rutorrent/"
license=('GPL')
depends=('rtorrent' 'php>=5.3.0')
makedepends=('subversion')
provides=('rutorrent')
conflicts=('rutorrent')
install=
source=()
md5sums=()

_svntrunk=http://rutorrent.googlecode.com/svn/trunk/rutorrent/
_svnmod=rutorrent

build() {
    cd "$srcdir"
    if [ -d ${_svnmod}/.svn ]; then
        cd "$_svnmod" && svn up -r "$pkgver"
    else
        svn co "$_svntrunk" --config-dir ./ -r "$pkgver" "$_svnmod"
    fi
    msg "SVN checkout done or server timeout"
    msg "Starting make..."
    cd "$srcdir"
    mkdir -p ${pkgdir}/srv/http
}

package() {
    cp -r "$_svnmod" ${pkgdir}/srv/http
    chmod -R 755 ${pkgdir}/srv/http/${_svnmod}
}
