# Maintainer: Christian Hesse <mail@eworm.de>

pkgname=opera-rc
_ver=12.15
_rcver=1
_name="nohi"
_build=1742
pkgver="${_ver}rc${_rcver}.${_build}"
pkgrel=1
pkgdesc='A fast and secure web browser and Internet suite - release candidate'
arch=('i686' 'x86_64')
url='http://www.opera.com/browser/'
license=('custom:opera')
depends=('gcc-libs' 'libxt' 'freetype2' 'libxext' 'glib2'
         'shared-mime-info' 'hicolor-icon-theme' 'desktop-file-utils')
optdepends=('gstreamer0.10-base-plugins: HTML5 Video support'
            'gstreamer0.10-good: HTML5 Video support')
provides=('opera')
conflicts=('opera')
install=opera.install
options=(!strip !zipman)

if [[ $CARCH == i686 ]]; then
  _arch=i386
  source=(http://snapshot.opera.com/unix/${_name}_${_ver}-${_build}/opera-${_ver}-${_build}.${_arch}.linux.tar.xz)
  md5sums=('eba7b5e9e690fd1165363f87b778d8d9')
elif [[ $CARCH == x86_64 ]]; then
  _arch=$CARCH
  source=(http://snapshot.opera.com/unix/${_name}_${_ver}-${_build}/opera-${_ver}-${_build}.${_arch}.linux.tar.xz)
  md5sums=('22cd6a2d36f75a91745474f3a8222e2d')
fi

package() {
  opera-${_ver}-${_build}.${_arch}.linux/install --prefix /usr --repackage $pkgdir/usr
  install -D -m 644 $pkgdir/usr/share/opera/defaults/license.txt $pkgdir/usr/share/licenses/$pkgname/license.txt
}
