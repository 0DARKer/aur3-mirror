# Contributor: Christoph Zeiler <rabyte*gmail>

pkgname=tyrquake
pkgver=0.60
pkgrel=2
pkgdesc="A fairly conservative Quake/Quakeworld port"
arch=('i686' 'x86_64')
url="http://disenchant.net/engine.html"
license=('GPL')
depends=('libgl')
install=$pkgname.install
source=(http://disenchant.net/files/engine/$pkgname-$pkgver.tar.gz)
md5sums=('143a42538e3c98bd27e5462e8d54e9e6')

[ "$CARCH" = "i686" ] && _ASM=Y || _ASM=N

build() {
  cd $pkgname-$pkgver

  make	QBASEDIR=/usr/share/quake \
	USE_X86_ASM=$_ASM \
	OPTIMIZED_CFLAGS=N \
	STRIP=: \
	|| return 1

  mkdir -p $pkgdir/usr/{bin,share/quake}
  install -m755 tyr* $pkgdir/usr/bin/
}
