# $Id: PKGBUILD 41828 2011-03-09 12:08:16Z spupykin $
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Contributor: Anders Bergh <anders1@gmail.com>

pkgname=luasocket2-hg
pkgver=13
pkgrel=1
pkgdesc="Luasocket is the most comprehensive networking support library for the Lua language, with IPv6 support."
arch=('i686' 'x86_64')
url="http://code.matthewwild.co.uk/luasocket2-hg"
license=('MIT')

depends=(lua)
makedepends=(mercurial)
conflicts=(luasocket)
provides=('luasocket=2.0.3')

source=(lua-license.html::http://www.lua.org/copyright.html
	luasocket-arch.patch
	luasocket-unixsocket.patch)
md5sums=('516933a6a057fd6edf5e27c12f3f4f85'
	 'e6efd6a8d0eb12e162e21c45f83c9cec'
         'fd094b319c3099e09384b15d8127a066')

_hgroot=http://code.matthewwild.co.uk
_hgrepo=$pkgname

build() {
  cd "$srcdir/$_hgrepo"

  patch -p0 < $srcdir/luasocket-arch.patch
  patch -p0 < $srcdir/luasocket-unixsocket.patch

  make linux
  make DESTDIR="$pkgdir" install

  install -D -m0644 $srcdir/lua-license.html $pkgdir/usr/share/licenses/$pkgname/lua-license.html
}
