pkgname=compcache
pkgver=222
pkgrel=2
pkgdesc="Compressed virtual swap disc for Linux"
url="http://code.google.com/p/compcache/"
install=(${pkgname}.install)
license="GPL2"
arch=('i686' 'x86_64')
options=(zipman)
backup=(etc/conf.d/compcache)
makedepends=('kernel26-headers' 'mercurial')

source=(compcache.conf compcache.init)
md5sums=('0c19420ec23bd3402f3a6ccb4ed6f614'
         '39a9ad057d33670b60160fdce68e6526')

_hgroot=https://compcache.googlecode.com/hg/
_hgrepo=compcache

build() {
  cd "${srcdir}/${_hgrepo}"
  hg update default

  install -Dm 644 $srcdir/${_hgrepo}/README $pkgdir/usr/share/compcache/README
  install -Dm 755 $srcdir/${_hgrepo}/sub-projects/scripts/zram_stats $pkgdir/usr/bin/zram_stats
  install -Dm 644 $srcdir/compcache.conf $pkgdir/etc/conf.d/compcache 
  install -Dm 755 $srcdir/compcache.init $pkgdir/etc/rc.d/compcache
}
