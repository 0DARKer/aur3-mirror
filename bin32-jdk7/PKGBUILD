# Maintainer: Damian Nowak <damian.nowak@atlashost.eu>

_major='7'
_minor='71'
_build='b14'
_bit='32'
_arch='i586'
pkgname="bin${_bit}-jdk${_major}"
pkgver="${_major}u${_minor}"
pkgrel='1'
pkgdesc="Oracle Java ${_major} Development Kit (${_bit}-bit)"
arch=('x86_64')
url='http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html'
license=('unknown')
depends=('lib32-libxrender' 'lib32-libxtst' 'lib32-gtk2' 'lib32-glibc' 'lib32-libjpeg-turbo'
         'lib32-lcms2' 'lib32-nss' 'ca-certificates-java')
         #  'shared-mime-info' 'xdg-utils' 'desktop-file-utils' 'hicolor-icon-theme'
provides=("java-environment=${_major}" "java-runtime=${_major}" "java-runtime-headless=${_major}" "java-web-start=${_major}")
DLAGENTS=('http::/usr/bin/curl -fLC - --retry 3 --retry-delay 3 -O -b "oraclelicense=a"')
source=("http://download.oracle.com/otn-pub/java/jdk/${pkgver}-${_build}/jdk-${pkgver}-linux-${_arch}.tar.gz")
sha512sums=('df1c7d2e963efe1fabefe57ac1a713faa9c38dd16aa7a5797432b4599609fd214c5216b07ab2b9a3ec450dd063f73025565d262b67aca59a4de5e96e3af87227')
options=(!strip)

package() {
  cd "$srcdir"
  install -dm755 "$pkgdir/usr/lib/jvm" "$pkgdir/etc/conf.d"
  mv "jdk1.${_major}.0_${_minor}" "$pkgdir/usr/lib/jvm/$pkgname"
  echo "JAVA_HOME=\"/usr/lib/jvm/$pkgname\"" > "$pkgdir/etc/conf.d/$pkgname"
}

