# Maintainer: scorpp <keryascorpio at gmail.com>
pkgname=deadbeef-plugin-vk
pkgver=0.1
pkgrel=5
pkgdesc="DeadBeef VKontakte plugin"
url="https://github.com/scorpp/db-vk"
arch=('i686' 'x86_64')
license=('BSD')
depends=('deadbeef' 'gtk3' 'curl' 'json-glib')
makedepends=('cmake' 'git')

_git_name='db-vk'
_git_root="https://github.com/scorpp/${_git_name}"

build() {
	cd "${srcdir}"
	if [ -d ${_git_name} ]
	then
	    cd "${_git_name}" && git pull origin
	else
	    git clone "${_git_root}"
	fi
	
	mkdir -p "${srcdir}/build"
	cd "${srcdir}/build"
	cmake "${srcdir}/${_git_name}"
	make
}

package() {
	install -Dm755 "${srcdir}/build/vkontakte.so" "${pkgdir}/usr/lib/deadbeef/vkontakte.so"	
}

# vim:set ts=2 sw=2 et:
