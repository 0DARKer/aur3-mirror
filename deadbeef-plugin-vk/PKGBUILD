# Maintainer: scorpp <keryascorpio at gmail.com>
pkgname=deadbeef-plugin-vk
pkgver=0.1
pkgrel=1
pkgdesc="DeadBeef VKontakte plugin"
url="https://github.com/scorpp/db-vk"
arch=('i686')
license=('BSD')
depends=('deadbeef' 'gtk3' 'curl' 'json-glib')

_git_name='db-vk'
_git_root="https://github.com/scorpp/${_git_name}"
build() {
	cd "${srcdir}"
	if [ -d ${_git_name} ]
	then
	    cd "${_git_name}" && git pull origin
	else
	    git clone "${_git_root}"
	fi
	

	cd "${srcdir}/${_git_name}"
	gcc -c vkontakte.c -o vkontakte.so -g -std=c99 -I. \
	    `pkg-config --cflags --libs gtk+-3.0` \
	    `pkg-config --cflags --libs json-glib-1.0` \
	    `pkg-config --cflags --libs libcurl`
}

package() {
	mkdir -p "${pkgdir}/usr/lib/deadbeef/"
	install -Dm644 "${srcdir}/${_git_name}/vkontakte.so" "${pkgdir}/usr/lib/deadbeef/vkontakte.so.${pkgver}.${pkgrel}"
}

# vim:set ts=2 sw=2 et:
