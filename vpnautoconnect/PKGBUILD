# Contributor: Francois Boulogne < fboulogne at april dot org >
# Maintainer: Francois Boulogne < fboulogne at april dot org >
pkgname=vpnautoconnect
pkgver=2.0.1beta3
pkgrel=1
pkgdesc="Reconnect automatically (at startup too) a vpn create with network manager."
arch=('i686' 'x86_64')
url="http://sourceforge.net/projects/vpnautoconnect/"
license=('GPL')
depends=()
install=vpnautoconnect.install
source=(http://switch.dl.sourceforge.net/project/vpnautoconnect/vpnautoconnect-2.0.1-beta%203.tar.gz
	"vpnautoconnect")
md5sums=('efdd3afcd8782264153ddeadd2193fb9' '4bba05799d633f80911a607447af58a0')

build() {
  	cd ${srcdir}/${pkgname}-2.0.1-beta3/
	make
	
}

package(){

  	cd ${srcdir}/${pkgname}-2.0.1-beta3/

	#The makefile is durty
	#everything is installed manually
  	install -d ${pkgdir}/usr/bin/
  	install -d ${pkgdir}/etc/rc.d
	install -m 0755 lvpnc ${pkgdir}/usr/bin/
	install -m 0755 lvpncCtl ${pkgdir}/usr/bin/
	install -m 0755 lvpncConfig ${pkgdir}/usr/bin/
	install -Dm644 vpnautoconnect.cfg ${pkgdir}/etc/
	#The daemon provided upstream is for debian-like systems
	#A new write, suitable for arch, has been written
	cd ${startdir}	
	install -m 0755 vpnautoconnect ${pkgdir}/etc/rc.d

}
