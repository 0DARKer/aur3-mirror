# Contributor: Francois Boulogne < fboulogne at april dot org >
# Maintainer: Francois Boulogne < fboulogne at april dot org >
pkgname=vpnautoconnect
pkgver=2.0.4
pkgrel=1
pkgdesc="Reconnect automatically (at startup too) a vpn create with network manager."
arch=('i686' 'x86_64')
url="http://sourceforge.net/projects/vpnautoconnect/"
license=('GPL')
depends=()
install=vpnautoconnect.install
source=(http://sourceforge.net/projects/vpnautoconnect/files/${pkgname}-${pkgver}.tar.gz
	"vpnautoconnect")
md5sums=('53ad197ddc51fea33f0770813156d51b' '4fe9f28d13782f4d129a521a1b97c93d')

build() {
  	cd ${srcdir}/${pkgname}-${pkgver}/
    ./configure --prefix=$pkgdir 
    #The build scripts are made for debian-like systems
    #workaround:
    sed -i 's/install-exec-local$/#install-exec-local/' Makefile.in
    sed -i 's/\sinstall-exec-local\s//' Makefile.in
	make
}

package(){

  	cd ${srcdir}/${pkgname}-${pkgver}/
    make install 
  	install -d ${pkgdir}/etc/rc.d
	##The daemon provided upstream is for debian-like systems
	##A new write, suitable for arch, has been written
	cd ${startdir}	
	install -m 0755 vpnautoconnect ${pkgdir}/etc/rc.d

}
