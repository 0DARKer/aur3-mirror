# Maintainer: Xiao-Long Chen <chenxiaolong@cxl.epac.to>

pkgname=slapi-nis
pkgver=0.42
pkgrel=1
pkgdesc="NIS Server and Schema Compatibility plugins for Directory Server"
arch=('i686' 'x86_64')
url="http://slapi-nis.fedorahosted.org/"
license=('GPL')
depends=('389-ds-base' 'libtirpc' 'nspr' 'nss' 'openldap' 'tcp_wrappers')
options=('!libtool')
source=("https://fedorahosted.org/releases/s/l/slapi-nis/slapi-nis-${pkgver}.tar.gz")
sha512sums=('b9020c82966318366814fa5f55cf19783aee952b9362f3edda05588f593c2e34fdd66e2bf11076386b71b135361113861839ada24426e183dc1f243ab7f01027')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  ./configure \
    --prefix=/usr \
    --disable-static \
    --with-tcp-wrappers \
    --with-ldap=openldap

  make ${MAKEFLAGS}
}

check() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  # 389 needs to be running for this to work
  #make check
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  make DESTDIR="${pkgdir}/" install
}

# vim:set ts=2 sw=2 et:
