# Maintainer: Sigurd NÃ¦ss <sigurdkn@gmail.com>
pkgname=lsnes-git
pkgver=20130201
pkgrel=1
pkgdesc="A rerecording Super Nintendo emulator based on the extremely accurate Bsnes."
arch=('i686' 'x86_64')
url="http://tasvideos.org/Lsnes.html"
depends=(libsamplerate portaudio opus wxgtk lua ffmpeg boost-libs)
makedepends=(git boost)
license=('GPL')
source=('http://bsnes.googlecode.com/files/bsnes_v085-source.tar.bz2' 'lsnes.patch')
md5sums=('2419710087ba28c894e5aa1c3c41b6e7' '99e5c5c1d90db8fa8de877bf9d775164')

build() {
	cd $srcdir || exit 1
	rm -Rf lsnes
	git clone git://repo.or.cz/lsnes.git || exit 1
	cd bsnes_v085-source/bsnes || exit 1
	cat $srcdir/lsnes/bsnes-patches/v085/*.patch | patch -p1 || exit 1
	cd $srcdir/lsnes || exit 1
	ln -s $srcdir/bsnes_v085-source/bsnes . || exit 1
	patch -p1 < $srcdir/lsnes.patch || exit 1
	make -j $(grep -c ^processor /proc/cpuinfo) || exit 1
	install -D lsnes $pkgdir/usr/bin/lsnes
}
