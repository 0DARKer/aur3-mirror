# Maintainer: Kovivchak Evgen<oneonfire@gmail.com>
pkgname=zopfli-git
pkgver=20130302
pkgrel=1
pkgdesc="A new zlib (gzip, deflate) compatible compressor "
arch=('i686' 'x86_64')
url="https://code.google.com/p/zopfli/"
license=('Apache')
md5sums=() #generate with 'makepkg -g'

_gitroot=https://code.google.com/p/zopfli/
_gitname=zopfli

build() {
 cd "$srcdir"

  msg "Connecting to the zopfli git repository..."
  if [ -d "$srcdir/$_gitname" ] ; then
    cd $_gitname && git pull origin
    msg "The local files are updated."
  else
    git clone $_gitroot
  fi

  msg "GIT checkout done or server timeout"
  cd "$srcdir"
  rm -rf $_gitname-build
  git clone $_gitname $_gitname-build
  cd "$_gitname-build"
  make
}
package() {
  cd "$srcdir/$_gitname-build"
  install -m755 -D zopfli $pkgdir/usr/bin/zopfli
}
