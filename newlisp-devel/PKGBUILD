# Contributor: scrawler <scrawler@gmail.com>
# Maintainer: Stefan Husmann <stefan-husmann@t-online.de>

pkgname=newlisp-devel
_pkgname=newlisp
pkgver=10.5.7
pkgrel=7
pkgdesc="A LISP like, general purpose scripting language. Ongoing development version."
url="http://www.newlisp.org"
license=('GPL3')
arch=('x86_64' 'i686')
depends=('readline')
optdepends=('java-emnvironment: for gui server')
provides=('newlisp')
conflicts=('newlisp')
options=('docs')
source=("http://www.newlisp.org/downloads/development/inprogress/${_pkgname}-$pkgver.tgz")
md5sums=('14a96037f682d27aa79ee4163a11182a')
install=$_pkgname.install

build() {
  cd $srcdir/$_pkgname-$pkgver
  ./configure
  sed -i 's+strip newlisp++' makefile_linuxLP64_utf8 
  ( [[ $CARCH == "x86_64" ]] && make -f makefile_linuxLP64_utf8 ) || 
  ( [[ $CARCH == "i686" ]] && make -f makefile_linux_utf8 )
}

package() {
  cd $srcdir/$_pkgname-$pkgver
  install -d $pkgdir/usr/bin
  install -d $pkgdir/usr/share/man/man1
  make bindir=$pkgdir/usr/bin mandir=$pkgdir/usr/share/man \
    datadir=$pkgdir/usr/share install
  rm $pkgdir/usr/bin/$_pkgname
}
