pkgname=pmd
pkgver=4.2.5
pkgrel=1
pkgdesc="A java source code scanner for detecting possible bugs, dead code, overcomplicated expressions and more"
arch=('any')
url="http://pmd.sourceforge.net/"
license=('custom:BSD-style')
depends=('java-runtime')
makedepends=('apache-ant')
source=(http://sourceforge.net/projects/pmd/files/pmd/$pkgver/pmd-bin-$pkgver.zip
cpd pmd pmd-designer)
md5sums=('dbd3bac591d92d9138151a0397f76d24'
'118313fb5cea6d408cafc2b57a0c30c0'
'594f1dc2fb66619da9b5c5dda5f15252'
'1dedb8c639b953565ef46d9b6192eb73')

build() {
  install -d -m755 $pkgdir/usr/share/licenses/pmd
  cp $srcdir/pmd-$pkgver/etc/LICENSE.txt $pkgdir/usr/share/licenses/pmd/LICENSE

  install -d -m755 $pkgdir/usr/share/pmd
  for dir in bin docs etc lib; do
    cp -r $srcdir/pmd-$pkgver/$dir $pkgdir/usr/share/pmd
  done
  find $pkgdir/usr/share/pmd -type f -executable -exec chmod a-x '{}' +

  install -Dm755 $startdir/cpd $pkgdir/usr/bin/cpd
  install -Dm755 $startdir/pmd $pkgdir/usr/bin/pmd
  install -Dm755 $startdir/pmd-designer $pkgdir/usr/bin/pmd-designer
}

# vim:set ts=2 sw=2 et:
