#!/bin/bash

if [ $# -lt 3 ]; then
	script=`basename $0`
	echo "Usage:"
	echo "  $script <java-src-file> html|xml|text|vbhtml rulesetfile1[,rulesetfile2[,..]]"
	exit 1
fi

classpath=$CLASSPATH
for jarfile in `ls /usr/share/pmd/lib/*.jar`; do
	classpath=$classpath:$jarfile
done

FILE=$1
shift
FORMAT=$1
shift
RULESETFILES="$@"

java -Xmx512m -cp $classpath net.sourceforge.pmd.PMD $FILE $FORMAT $RULESETFILES
