# Contributor: Daniel J Griffiths <ghost1227@archlinux.us>

pkgname=beastieworker
pkgver=0.4
pkgrel=3
pkgdesc="A sokoban-like game featuring Beastie."
arch=('i686')
url="http://beastieworker.sourceforge.net"
license=('GPL')
depends=('libgl' 'sdl')
source=(http://downloads.sourceforge.net/${pkgname}/BeastieWorker-${pkgver}-Linux-2.2.x.tar.gz \
        http://downloads.sourceforge.net/${pkgname}/BeastieWorker-levels-01_50.tar.gz \
	${pkgname}.desktop)
md5sums=('bdd44549f47575957ef9d117ff952890' \
         'b787a772b0db5b0fd1d07f611787ffcc' \
	 '3df57438768813dbc0ed5fa843f51541')

build() {
	cd ${srcdir}/BeastieWorker-${pkgver}
	install -d m755 ${pkgdir}/usr/{bin,share/{${pkgname},applications}}
	cp -r * ${pkgdir}/usr/share/${pkgname}
	rm -R ${pkgdir}/usr/share/${pkgname}/levels/*
	cp -r ${srcdir}/levels/* ${pkgdir}/usr/share/${pkgname}/levels/
	echo -e "#!/bin/bash\n\ncd /usr/share/${pkgname}/\n./BeastieWorker" >${pkgdir}/usr/bin/${pkgname}
	chmod 755 ${pkgdir}/usr/bin/${pkgname}
	install -D -m644 ${srcdir}/${pkgname}.desktop ${pkgdir}/usr/share/applications/${pkgname}.desktop
}
