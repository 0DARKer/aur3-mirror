# Contributor: totoloco <totoloco at gmail dot com>

pkgname=rss2html-hg
pkgver=0
pkgrel=1
pkgdesc="Convert RSS feeds to plain text, html or token-separated strings."
arch=('i686' 'x86_64')
url="http://nopcode.org/wk.php/rss2html"
license=('GPL')
depends=('curl')
md5sums=()
provides=('rss2html')
replaces=('rss2html')
conflicts=('rss2html')

_hgroot='http://news.nopcode.org/miau/hgi'
_hgrepo='rss2html'

build() {
  cd $srcdir

  if [ -d $_hgrepo ]; then
   	cd $_hgrepo
    make clean
    hg pull -u
  else
    hg clone ${_hgroot}/${_hgrepo}
    cd $_hgrepo
  fi

  cd $srcdir/${_hgrepo}
  ./configure --prefix=/usr || return 1
  make || return 1
  make DESTDIR=$pkgdir install
  mkdir -p $pkgdir/usr/man/man1/
  make PREFIX=$pkgdir/usr BINDIR=$pkgdir/usr/bin MANDIR=$pkgdir/usr/man install
}

