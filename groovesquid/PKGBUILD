#Maintainer: defendor at riseup.net>

pkgname=groovesquid
pkgver=0.6.1
pkgrel=1
pkgdesc="A working downloader/player for GrooveShark music streaming service"
arch=('any')
url="http://groovesquid.com/"
license=("GPL")
depends=('java-runtime')
source=("http://fs1.d-h.st/download/00110/7oW/Groovesquid.jar" "http://groovesquid.com/img/squid.png" )
md5sums=('267de7babcf22b511dbd7d15a5b27852' '725d5638a52ead6d31d57639457189e7')
noextract=('Groovesquid.jar')
_downloadedname=('Groovesquid.jar')

package() {

  cd $srcdir
  mv $_downloadedname $pkgname.jar

  # make folders
  mkdir -p "${pkgdir}/opt/${pkgname}"
  mkdir -p "${pkgdir}/usr/share/applications"
  mkdir -p "${pkgdir}/usr/share/pixmaps/"

  # cp binary
  cp $pkgname.jar "${pkgdir}/opt/${pkgname}"

  # make .desktop file
  echo -e "[Desktop Entry]\nEncoding=UTF-8\nName=Groovesquid\nGenericName=Grooveshark Downloader and Streamer\nType=Application\nCategories=Audio;Music;Player;AudioVideo\nTerminal=false\nExec=java -jar /opt/${pkgname}/${pkgname}.jar" > $pkgname.desktop

  # cp .desktop file and icon
  cp $pkgname.desktop "${pkgdir}/usr/share/applications"
  cp squid.png "${pkgdir}/usr/share/pixmaps/${pkgname}.png"

}