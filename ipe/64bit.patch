diff --git a/src/ipecairo/ipethumbs.cpp b/src/ipecairo/ipethumbs.cpp
--- a/src/ipecairo/ipethumbs.cpp
+++ b/src/ipecairo/ipethumbs.cpp
@@ -58,13 +58,13 @@
 
 Buffer Thumbnail::render(const Page *page, int view)
 {
-  unsigned long *data = new unsigned long[iWidth * iHeight];
+  Buffer buffer(iWidth * iHeight * 4);
+  memset(buffer.data(), 0xff, iWidth * iHeight * 4);
 
-  for (unsigned long *p = data; p < data + iWidth * iHeight; )
-    *p++ = 0xffffffff;
   cairo_surface_t* surface =
-    cairo_image_surface_create_for_data((uchar *) data, CAIRO_FORMAT_ARGB32,
-					iWidth, iHeight, iWidth * 4);
+  cairo_image_surface_create_for_data((uchar *) buffer.data(), 
+                    CAIRO_FORMAT_ARGB32, 
+                    iWidth, iHeight, iWidth * 4);
   cairo_t *cc = cairo_create(surface);
   cairo_scale(cc, iZoom, -iZoom);
   Vector offset = iLayout->iOrigin - iLayout->paper().topLeft();
@@ -82,7 +82,7 @@
   cairo_destroy(cc);
   cairo_surface_destroy(surface);
 
-  return Buffer(((const char *) data), iWidth * iHeight * 4);
+  return buffer;
 }
 
 // --------------------------------------------------------------------
diff --git a/src/iperender/iperender.cpp b/src/iperender/iperender.cpp
--- a/src/iperender/iperender.cpp
+++ b/src/iperender/iperender.cpp
@@ -60,19 +60,16 @@
   int wid = int(bbox.width() * zoom + 1);
   int ht = int(bbox.height() * zoom + 1);
 
-  unsigned long *data = 0;
+  ipe::Buffer data;
   cairo_surface_t* surface = 0;
 
   if (fm == EPNG) {
-    data = new unsigned long[wid * ht];
-    if (transparent) {
-      for (unsigned long *p = data; p < data + wid * ht; )
-	*p++ = 0x00000000;
-    } else {
-      for (unsigned long *p = data; p < data + wid * ht; )
-	*p++ = 0xffffffff;
-    }
-    surface = cairo_image_surface_create_for_data((uchar *) data,
+    data = ipe::Buffer(wid * ht * 4);
+    if (transparent)
+      memset(data.data(), 0x00, wid * ht * 4);
+    else
+      memset(data.data(), 0xff, wid * ht * 4);
+    surface = cairo_image_surface_create_for_data((uchar *) data.data(),
 						  CAIRO_FORMAT_ARGB32,
 						  wid, ht, wid * 4);
   } else if (fm == ESVG) {
@@ -109,7 +106,6 @@
 
   cairo_destroy(cc);
   cairo_surface_destroy(surface);
-  delete [] data;
 }
 
 // --------------------------------------------------------------------
