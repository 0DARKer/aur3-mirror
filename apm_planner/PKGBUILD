# Maintainer: Tommaso Falchi Delitala <volalto86@gmail.org>
pkgname=apm_planner
pkgver=2.0.15
pkgrel=1
pkgdesc="Ground Control Station for MAVlink based autopilots (e.g. Ardupilot)"
arch=('i686' 'x86_64')
url="http://planner2.ardupilot.com"
license=('GPL3')
#source=("$pkgname"::'git+https://github.com/diydrones/apm_planner'#tag="$pkgver")
# Waiting for upstream to fix the compilation bug...
source=("$pkgname"::'git+https://github.com/volalto/apm_planner'#branch="2.0.15-fixSDL")
depends=('qt5-base' 'qt5-serialport' 'qt5-svg' 'qt5-script' 'sdl2' 'flite-full' 'qtwebkit')
makedepends=('git')
md5sums=('SKIP')

build() {
  qmake PREFIX=/usr "$srcdir/$pkgname/qgroundcontrol.pro"
  make
}

package() {
  make INSTALL_ROOT="$pkgdir" install
  install -D -m644 "$srcdir/$pkgname/license.txt" "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
}

# vim:set ts=2 sw=2 et: 
