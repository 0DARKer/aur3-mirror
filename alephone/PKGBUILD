# Maintainer: Marcin Skory <armitage at gfreedom dot org>
# Contributor: Arkham <arkham at archlinux dot us>
# Contributor: Christoph Zeiler <archNOSPAM_at_moonblade.dot.org>
# Contributor: Jacek Poplawski <jacekpoplawski__gmail>

pkgname=alephone
pkgver=20111201
pkgrel=1
pkgdesc='A free, enhanced port of the classic FPS "Marathon 2" by Bungie Software'
arch=('i686' 'x86_64')
url="http://marathon.sourceforge.net/"
license=('GPL')
depends=('sdl_ttf' 'libmad' 'libsndfile' 'libvorbis' 'mesa' 'sdl_image' \
'sdl_net' 'smpeg' 'speex' 'zziplib')
optdepends=('alephone-emr: community-made scenario' \
            'alephone-eternalx: community-made scenario' \
            'alephone-evil: community-made scenario' \
            'alephone-marathon: M1A1 data converted for AlephOne' \
            'alephone-marathon2: original data for Marathon 2: Durandal' \
            'alephone-infinity: original data for Marathon Infinity' \
            'alephone-red: community-made scenario' \
            'alephone-rubiconx: community-made scenario' \
            'alephone-tempus_irae: community-made scenario')
makedepends=('boost' 'lua>=5.1')
source=(http://downloads.sourceforge.net/marathon/AlephOne-$pkgver.tar.bz2)
md5sums=('af1a696697fad4ea38ccc5379e6c65b5')
sha1sums=('9f60aadbc2514359eafae09d13490c7fa020a519')
sha256sums=('c844b347cdba3bcfba33cf459aa94bcc7729f8865b5cfdb688da24262a918fca')
sha512sums=('9c9455cf7915e1d887cbdb172cf73c0d5b1c02daa18fe30d4ad6516903fc0de6d651863254d68df6e9332327170f4b38986aa9cb1b665353613b7bc3098540ee')

build() {
    cd $srcdir/AlephOne-$pkgver

    sed "s|PACKAGE='AlephOne'|PACKAGE='alephone'|g" -i configure

    ./configure --prefix=/usr
    make || return 1
    make DESTDIR="$pkgdir" install || return 1
}
