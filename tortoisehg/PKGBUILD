# Contributor: Bernhard Walle <bernhard@bwalle.de>
# AUR Category: devel

pkgname=tortoisehg
pkgver=2.1.2
pkgrel=1
pkgdesc="Graphical tools for Mercurial"
url="http://tortoisehg.bitbucket.org/"
license="GPL"
depends=('python2' 'mercurial>=1.9' 'python2-pyqt>=4.7' 'python2-qscintilla')
builddepends=(python2)
arch=('any')
optdepends=('python2-iniparse: ini file support'
            'python2-pygments: syntax highlighting'
            'python-nautilus: Python binding for Nautilus components')
source=("http://bitbucket.org/tortoisehg/targz/downloads/${pkgname}-${pkgver}.tar.gz")
md5sums=('0419e0c9f6b670ed048cda9a313a3748')

build() {
  cd $startdir/src/$pkgname-$pkgver
  python2 setup.py build
  mkdir -p $startdir/pkg/
  python2 setup.py build
}

package() {
  cd $startdir/src/$pkgname-$pkgver
  python2 setup.py install --prefix=/usr --root=${pkgdir}
  install -Dm 644 "contrib/mergetools.rc" "${pkgdir}/etc/mercurial/hgrc.d/thgmergetools.rc"
}
