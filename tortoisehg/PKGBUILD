## Contributor: Bernhard Walle <bernhard@bwalle.de>
# Contributor: Clovis Fabricio <arch.nosklo@0sg.net>
# Maintainer: Christopher Kroo√ü <c.krooss@gmail.com>
# AUR Category: devel

pkgname=tortoisehg
pkgver=2.9
pkgrel=1
pkgdesc="Graphical tools for Mercurial"
url="http://tortoisehg.bitbucket.org/"
license="GPL"
depends=('python2' 'mercurial>=2.7' 'python2-pyqt>=4.10' 'python2-qscintilla')
builddepends=(python2)
arch=('any')
optdepends=('python2-iniparse: ini file support'
	    'python2-pygments: syntax highlighting'
	    'python-nautilus: Python binding for Nautilus components')

source=("http://bitbucket.org/tortoisehg/targz/downloads/${pkgname}-${pkgver}.tar.gz"
	"https://bitbucket.org/tortoisehg/thg/raw/07bd2f53b15403fcf2d3e545938ce4b4daee24d7/tortoisehg/hgqt/qtapp.py")

package() {
	cd "${srcdir}/${pkgname}-${pkgver}"
	python2 setup.py install --prefix=/usr --root="${pkgdir}"
	install -Dm 644 "contrib/mergetools.rc" "${pkgdir}/etc/mercurial/hgrc.d/thgmergetools.rc"
	install -Dm 644 "contrib/tortoisehg.desktop" "${pkgdir}/usr/share/applications/tortoisehg.desktop"
	install -Dm 644 "icons/scalable/apps/thg-logo.svg" "${pkgdir}/usr/share/pixmaps/thg_logo.svg"
	install -Dm 644 "${srcdir}/qtapp.py" "${pkgdir}/usr/lib/python2.7/site-packages/tortoisehg/hgqt/qtapp.py"
}
md5sums=('dcde52246fe41e244e799143a61e696e'
         'b47aa299a8fd48f1b0b09b3cbc46e707')
