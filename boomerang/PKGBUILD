# Contributor: Josh McGee <j.s.mcgee115 at gmail.com>
# Contributor:  Matthew Bauer <mjbauer95@gmail.com>

pkgname=boomerang
pkgver=0.3
pkgrel=3
pkgdesc="A general, open source, retargetable decompiler of machine code programs"
arch=('i686' 'x86_64')
url="http://$pkgname.sourceforge.net/"
license=('custom')
source=(http://prdownloads.sourceforge.net/$pkgname/$pkgname-linux-alpha-$pkgver.tar.gz)
md5sums=('7d3a02cfc91db88a3fc7cf22fc26b000')
depends=('gc' 'qt4')
if test "$CARCH" == x86_64; then
	depends=('gc' 'lib32-qt4')
fi

build() {
	cd $srcdir/$pkgname-linux-alpha-$pkgver
	mkdir -p "${pkgdir}/opt/$pkgname"
        mv ./* "${pkgdir}/opt/$pkgname"
	mkdir -p "${pkgdir}/usr/bin"
	ln -s /opt/$pkgname/$pkgname "${pkgdir}/usr/bin/$pkgname"
	ln -s /opt/$pkgname/$pkgname-gui "${pkgdir}/usr/bin/$pkgname-gui"
	mkdir -p ${pkgdir}/usr/lib
	cp "${pkgdir}"/opt/$pkgname/lib/* "${pkgdir}/usr/lib"
	ln -s /usr/lib/libQtCore.so.4 "${pkgdir}/usr/lib/libQtCore_debug.so.4"
	ln -s /usr/lib/libQtGui.so.4 "${pkgdir}/usr/lib/libQtGui_debug.so.4"
}
