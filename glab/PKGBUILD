# Maintainer: Ilya Oshchepkov 
pkgname=glab
pkgver=2.0.0
pkgrel=1
pkgdesc="Interactive educational multipurpose package to process and analyse GNSS data"
arch=(i686 x86_64)
url="http://gage.upc.edu/drupal6/gLAB"
license=('Apache')
depends=('python2' 'python2-matplotlib' 'wxpython' 'tk')
source=($pkgname.tgz::http://gage14.upc.es/gLAB/gLAB.tgz)
noextract=($pkgname.tgz)
md5sums=('9aab34114cb19cb4c853dd80aa74289e')

build() {
    tar -xf $pkgname.tgz
    mv "$srcdir"/gLAB "$srcdir/$pkgname" 
	cd "$srcdir/$pkgname"
	make -f makefile_linux
}

package() {
	cd "$srcdir/$pkgname"
    install -dm755 "$pkgdir"/opt/"$pkgname"
    mv * "$pkgdir"/opt/"$pkgname"
    install -dm755 "$pkgdir"/usr/bin/
    ln -s /opt/"$pkgname"/gLAB_linux  "$pkgdir"/usr/bin/glab-dpc
    echo -e '#!/bin/sh\npython2' /opt/"$pkgname"/gLAB_GUI.py > "$pkgdir"/usr/bin/glab
    echo -e '#!/bin/sh\npython2' /opt/"$pkgname"/graph.py > "$pkgdir"/usr/bin/glab-dat
    chmod +x "$pkgdir"/usr/bin/glab "$pkgdir"/usr/bin/glab-dat
}
