# $Id: pkgbuild-mode.el,v 1.23 2007/10/20 16:02:14 juergen Exp $
# Maintainer: Kyle Keen <keenerd@gmail.com>
# Maintainer: Michael S. Walker <barrucadu@localhost>
pkgname=scm
pkgver=5e7
pkgrel=1
pkgdesc="An R5RS Scheme (IEEE P1178).  Written in C and runs under many OSes."
url="http://people.csail.mit.edu/jaffer/SCM"
arch=('i686' 'x86_64')
license=('LGPL')
depends=(slib)
source=(http://groups.csail.mit.edu/mac/ftpdir/scm/$pkgname-$pkgver.zip)
md5sums=('d53c0e7f11e468a40222f59a37a71edf')

build() {
  export SCHEME_LIBRARY_PATH=/usr/share/slib/

  cd "$srcdir/$pkgname"

  make scmlit
  make

  ./build > buildscript
  chmod +x buildscript
  ./buildscript

  install -D -m755 scm "$pkgdir/usr/bin/scm"

  for file in *.scm; do
    install -D -m555 $file "$pkgdir/usr/lib/$file"
  done
}
