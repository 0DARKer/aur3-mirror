# $Id: PKGBUILD 119532 2011-04-11 21:19:22Z angvp $
# Maintainer: Angel Velasquez <angvp@archlinux.org>
# Contributor: Douglas Soares de Andrade <douglas@archlinux.org>
# Contributor: Jeff 'codemac' Mickey <jeff@archlinux.org>
# Contributor: Dan McGee <dpmcgee@gmail.com>
pkgname=monotone
pkgver=1.0
pkgrel=1
pkgdesc="A modern distributed version control system, like hg, darcs, or git"
arch=('i686' 'x86_64')
url="http://www.monotone.ca"
license=('GPL')
depends=('botan' 'pcre' 'lua' 'sqlite3' 'libidn' 'zlib')
makedepends=('boost')
install=${pkgname}.install
source=(http://www.monotone.ca/downloads/${pkgver}/${pkgname}-${pkgver}.tar.bz2)
md5sums=('6a0b5d8560f08d76a950172f9ed0feff')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  ./configure --prefix=/usr --sysconfdir=/etc
  make
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  MAKEFLAGS="-j1" make DESTDIR="${pkgdir}" install
  install -Dm644 contrib/monotone.zsh_completion \
    "${pkgdir}/usr/share/zsh/site-functions/monotone"
}
