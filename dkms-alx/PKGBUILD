pkgname=dkms-alx
_pkgname=alx
pkgver=20121003
pkgrel=3
pkgdesc='DKMS-controlled Atheros alx Linux ethernet device driver'
url='http://www.linuxfoundation.org/collaborate/workgroups/networking/alx'
arch=('i686' 'x86_64')
license=('custom')
depends=('dkms')
provides=('alx' 'alx-driver' 'dkms-alx')
conflicts=('alx' 'alx-driver' 'dkms-alx')

source=('http://linuxwireless.org/download/compat-wireless-2.6/compat-wireless-2012-10-03-pc.tar.bz2'
	'dkms.conf')
md5sums=('7d541af2ae06eeaaadaba5b4fbcbfb13'
         'bae3e1063a96199e24c739d32a9916a0')

install=alx-driver.install

build() {
	cd "${srcdir}/compat-wireless-2012-10-03-pc"
	rm -rf drivers/net/wireless
	./scripts/driver-select alx
}

package() {
	cd "${srcdir}"	
	mkdir -p ${pkgdir}/usr/src/${_pkgname}-${pkgver}
	cp -RL compat-wireless-2012-10-03-pc/* ${pkgdir}/usr/src/${_pkgname}-${pkgver}
	cp -RL compat-wireless-2012-10-03-pc/.compat* ${pkgdir}/usr/src/${_pkgname}-${pkgver}
	cp -RL dkms.conf ${pkgdir}/usr/src/${_pkgname}-${pkgver}
}
