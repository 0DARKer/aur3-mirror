# Maintainer: Christian Hammacher <bmasterc gmail com>
# Contributor: Christian Hammacher <bmasterc gmail com>

pkgname=shrew-vpn-client
pkgver=2.1.7
pkgrel=0
pkgdesc="A portable VPN client for Linux with Qt GUI"
arch=('i686' 'x86_64')
url="http://www.shrew.net/"
license=('osi')
depends=('qt3' 'openssl')
makedepends=('gcc' 'flex' 'libedit' 'bison' 'cmake')
optdepends=('openldap')
conflicts=('shrew-vpn-client-alpha')
backup=('etc/iked.conf')
source=(http://www.shrew.net/download/ike/ike-$pkgver-release.tbz2)
md5sums=('bc86e101809fc750013e18480c8c1040')

build() {
  cd $srcdir/ike

  # Build the whole package
  cmake -DCMAKE_INSTALL_PREFIX=/usr -DQTGUI=YES -DETCDIR=/etc -DNATT=YES -DPATH_MAN=/usr/share
  make all
  make DESTDIR="$pkgdir/" install
  
  # Install the daemon script
  install -D -m755 $startdir/iked $pkgdir/etc/rc.d/iked

  # The configuration file is already ready for use; just rename it
  mv $pkgdir/etc/iked.conf.sample $pkgdir/etc/iked.conf

  # Copy our desktop files
  install -D -m644 $srcdir/ike/source/ikea/png/ikea.png $pkgdir/usr/share/icons/ikea.png
  install -D -m755 $startdir/ikea.desktop $pkgdir/usr/share/applications/ikea.desktop
}


