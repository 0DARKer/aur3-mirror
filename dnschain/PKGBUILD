# Maintainer Cayman Nava <caymannava at gmail dot com>
# created using npm2arch
_npmname=dnschain
_npmver=0.2.5
pkgname=dnschain
pkgver=0.2.5
pkgrel=1
pkgdesc="A blockchain-based DNS + HTTP server that fixes HTTPS security, and more!"
arch=(any)
url="https://github.com/okTurtles/dnschain"
license=('MPL')
depends=('nodejs' 'namecoin-qt')
optdepends=('bitshares: bdns support' 'go-ethereum: ethereum support')
source=(http://registry.npmjs.org/$_npmname/-/$_npmname-$_npmver.tgz)
noextract=($_npmname-$_npmver.tgz)
sha1sums=(77068cfe5df105b97f91a6d9a2281d08f0b64126)

package() {
  cd $srcdir
  local _npmdir="$pkgdir/usr/lib/node_modules/"
  mkdir -p $_npmdir
  cd $_npmdir
  npm install -g --prefix "$pkgdir/usr" $_npmname@$_npmver
  cd $_npmdir/dnschain/scripts
  sed -i 's#/usr/local/bin#/usr/bin#g' dnschain.service
  sed -i 's#/usr/local/bin/namecoind#/usr/bin/namecoin-qt#g' namecoin.service
  mkdir -p $pkgdir/usr/lib/systemd/system
  mv {dnschain,namecoin}.service $pkgdir/usr/lib/systemd/system
}
# vim:set ts=2 sw=2 et:
