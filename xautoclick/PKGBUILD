# Contributor: Mariusz Kujawski <marinespl@gmail.com>
pkgname=xautoclick
name=xautoclick
pkgver=0.30
pkgrel=1
pkgdesc="Automates repetitive mouse clicking to reduce RSI."
arch=('i686' 'x86_64')
url="http://xautoclick.sourceforge.net"
license=('GPL')
depends=('libxtst')
optdepends=('gtk: for gtk based gui'
            'gtk2: for gtk2 based gui'
            'qt3: for qt3 based gui'
            'qt: for qt4 based gui'
            'fltk: for fltk based gui')
source=(http://downloads.sourceforge.net/project/$name/$name/$name-$pkgver/$name-$pkgver.tar.gz
qt4.patch
Makefile.patch)

md5sums=('00173268a5fa00e20c5028cac0e020ea'
         '145ad6004a86215c77343cafdab1ee88'
                  '36bf8e322bbc5690c79b712161db8c45')


build() {
  cd "$srcdir/$name-$pkgver"

  patch guiqt4.cpp < ../../qt4.patch

  ./configure --prefix=$pkgdir/usr

  patch Makefile < ../../Makefile.patch
  make || return 1
  make install || return 1

  # move manpage to proper directory
  install -d ${pkgdir}/usr/share || return 1
  mv ${pkgdir}/usr/man ${pkgdir}/usr/share || return 1
}

# vim:set ts=2 sw=2 et:
