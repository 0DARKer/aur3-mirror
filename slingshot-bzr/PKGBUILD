pkgname=slingshot-bzr
pkgver=latest
pkgrel=1
pkgdesc="New version of elementary's launcher Slingshot."
arch=('i686' 'x86_64')
url="https://code.launchpad.net/~slingshot-devs/"
license=('GPL2')
depends=('libgee' 'gnome-menus' 'libzeitgeist' 'granite-bzr')
makedepends=('bzr' 'cmake')
optdepends=('wingpanel-bzr: panel to go with the Pantheon shell')
provides=(slingshot)
conflicts=(slingshot)
install=(slingshot.install)

_bzrtrunk="lp:slingshot"
_bzrmod="new-slingshot"

build() {
  cd "${srcdir}"

  msg "Connecting to the server...."

  if [ -d ${_bzrmod} ]; then
    bzr up ${_bzrmod}
    msg "The local files are updated."
  else
    bzr co ${_bzrtrunk} ${_bzrmod}
  fi

  msg "BZR checkout done or server timeout"
  msg "Starting make..."

  cd new-slingshot
  mkdir build; cd build
  cmake .. -DCMAKE_INSTALL_PREFIX=/usr
  make
  make DESTDIR="${pkgdir}" install
}
