# Maintainer: Jason Melton <jason.melton@gmail.com>
# Contributor: Jesper Henriksson>
# 2011Sep02 - Changed PKGBUILD to more closely mirror official package
pkgname=phoronix-test-suite-devel
_pkgname=phoronix-test-suite

pkgver=3.6.0m1
pkgrel=1
pkgdesc="The most comprehensive testing and benchmarking platform available for Linux"
arch=('i686' 'x86_64')
license=('gpl')
url="http://www.phoronix-test-suite.com/"
depends=('php')
optdepends=('php-gtk' 'php-curl' 'php-gd')
conflicts=('phoronix-test-suite')
provides=('phoronix-test-suite')
source=(http://www.phoronix.net/downloads/phoronix-test-suite/releases/development/phoronix-test-suite-$pkgver.tar.gz)
install=${pkgname}.install

build() {
  cd ${srcdir}/${_pkgname}

  sed -i "s#-packages.sh#-packages.sh --asdeps#" pts-core/objects/pts_external_dependencies.php
  install -d ${pkgdir}/usr/bin ${pkgdir}/usr/share/${_pkgname}
  
  sed -e "s/^export PTS_DIR=.*/export PTS_DIR=\/usr\/share\/phoronix-test-suite/g" -i phoronix-test-suite
  install -m755 ${_pkgname} ${pkgdir}/usr/bin

  rm -f ${pkgdir}/usr/share/${_pkgname}/pts/etc/scripts/package-build-*
  cp -r pts-core/ ${pkgdir}/usr/share/${_pkgname}
}

md5sums=('6a37416df544595a8b9313983f351540')
