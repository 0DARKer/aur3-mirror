# Maintainer: Anthony Cornehl <accornehl[at]gmail[dot]com>
# https://github.com/twinshadow/abs-ofed
pkgname=opensm
pkgver=3.3.12
pkgrel=2
pkgdesc="InfiniBand subnet manager and administration"
groups=('ofed')
url="http://www.openfabrics.org"
arch=('x86_64' 'i686')
license=('GPL2' 'custom:"Open Fabrics Alliance BSD"')
depends=('libibumad')
source=("http://www.openfabrics.org/downloads/management/${pkgname}-${pkgver}.tar.gz")
md5sums=('66beeccf6b16550609b37d588c0589ee')
sha512sums=('b1a1083c053d2a30b711d7ae8b1caad27af818b3af4ecad22d9b1b80cedcca2296479e9d42fb771fe0b4a121582eac993a3b596f8696b95920726d76fefba7f7')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  ./configure --prefix=/usr
  make
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  make -j1 DESTDIR="${pkgdir}" install
  rm -rf "${pkgdir}/usr/etc"
  install -Dm644 COPYING "$pkgdir/usr/share/licenses/$pkgname/COPYING"
}
