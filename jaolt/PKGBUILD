# Maintainer: Max Roder <maxroder AT web DOT de>
pkgname=jaolt
pkgver=0.5.7.1_807
pkgrel=2
pkgdesc="java auction management tool for ebay, auvito and hood"
arch=('any')
conflicts=('jaolt-svn')
url="http://code.google.com/p/jaolt/"
license=('LGPL' 'CDDL'  'APACHE' 'CCPL:by' 'custom:H2' 'custom:jdom' 'custom:jgoodies' 'custom:ebay-sdk')
depends=('java-runtime' 'sh' 'x-server')
source=(http://jaolt.googlecode.com/files/${pkgname}_0.5.7.1-noarch-807.tar.gz
		jaolt.sh
		ebay-sdk-license.txt)
noextract=()
md5sums=('beb005bb758b2dc8c05710f2441f86c5'
		'aee6a2d910ae33e768598f2d1132a3ae'
		'7726867071abce13d4c88d626f28e918')

package() {
	cd ${srcdir}/${pkgname} 
	
	# Create directories
	install -d ${pkgdir}/opt/jaolt/
	install -d ${pkgdir}/usr/share/applications/
	install -d ${pkgdir}/usr/share/pixmaps/
	
	# Delete unnecessary files
	rm -f build.xml INSTALLING jaolt lgpl.txt other.txt sun.txt changelog.txt

	# license stuff
	install -d ${pkgdir}/usr/share/licenses/jaolt
	mv h2.txt ${pkgdir}/usr/share/licenses/jaolt/LICENSE.h2
	mv jdom.txt ${pkgdir}/usr/share/licenses/jaolt/LICENSE.jdom
	mv jgoodies.txt ${pkgdir}/usr/share/licenses/jaolt/LICENSE.jgoodies
	cp license-instructions.txt ${pkgdir}/usr/share/licenses/jaolt/readme
	install -m 644 ${srcdir}/ebay-sdk-license.txt ${pkgdir}/usr/share/licenses/jaolt/LICENSE.ebay-sdk

	# Copy files
	mv jaolt.desktop ${pkgdir}/usr/share/applications/
        mv jaolt.xpm ${pkgdir}/usr/share/pixmaps/
	cp -r * ${pkgdir}/opt/jaolt/

	# Set permissions
	chmod -R 777 ${pkgdir}/opt/jaolt/data/

	# Install wrapper script
	install -Dm 755 ${srcdir}/${pkgname}.sh ${pkgdir}/usr/bin/${pkgname}
}