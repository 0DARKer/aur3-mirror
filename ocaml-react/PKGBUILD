# Maintainer: Sergei Lebedev <superbobry@gmail.com>
# Contributor: serp <serp 256 at gmail dot com>
pkgname=ocaml-react
pkgver=0.9.2
pkgrel=5
pkgdesc="An OCaml module for functional reactive programming"
arch=('i686' 'x86_64')
url="http://erratique.ch/software/react"
license=('BSD')
depends=('ocaml')
makedepends=('ocaml-findlib')
source=(http://erratique.ch/software/react/releases/react-$pkgver.tbz react.diff)
md5sums=('ecbe0fa4d7d0fd1076cce5decf7a86b7'
         'f12b2c4038808ee2396ec7b33d4161a9')

build() {
  cd $srcdir/react-$pkgver
  sh build || return 1
  sh build doc
}

package() {
  cd $srcdir/react-$pkgver
  patch -Np0 < ../react.diff

  OCAMLFIND_DESTDIR="$pkgdir/$(ocamlfind printconf destdir)"
  mkdir -p OCAMLFIND_DESTDIR
  INSTALLDIR="${OCAMLFIND_DESTDIR}/${pkgname/ocaml-/}" sh build install

  # XXX not sure we actually need to install HTML docs.
  # DOCDIR=$pkgdir/usr/share/doc/$pkgname
  # mkdir -p $DOCDIR
  # cp -r doc/* $DOCDIR
}
