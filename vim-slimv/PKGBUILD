# Maintainer: David Campbell <davekong@archlinux.us>
# Contributor: cap_sensitive (cap.sensitive@gmail.com)
# Contributor: Laszlo Papp

pkgname=vim-slimv
pkgver=0.8.3
pkgrel=2
_src_id=15665
pkgdesc="Lisp and Clojure REPL inside Vim with profiling and Hyperspec lookup, like SLIME"
arch=(i686 x86_64)
url="http://www.vim.org/scripts/script.php?script_id=2531"
license=('custom')
depends=(vim python2)
groups=('vim-plugins')
install=vimdoc.install
source=(${pkgname}-${pkgver}.zip::http://www.vim.org/scripts/download_script.php?src_id=${_src_id}
        license.txt)
md5sums=('9d4bce698ddc4086f545db79092281ac'
         'efbd5986e691ce8c876fb86e8f5961ea')

build() {
    cd $srcdir
    sed -i 's/\/usr\/bin\/env python)/\/usr\/bin\/env python2/g' ./ftplugin/slimv.py
    install -d $pkgdir/usr/share/vim/vimfiles/{doc,ftdetect,syntax,indent,ftplugin}
    install -D doc/* $pkgdir/usr/share/vim/vimfiles/doc
    install -D ftdetect/* $pkgdir/usr/share/vim/vimfiles/ftdetect
    cp -aR {ftplugin,indent,syntax} $pkgdir/usr/share/vim/vimfiles
    install -D license.txt $pkgdir/usr/share/licenses/$pkgname/license.txt
}
# vim:set ts=2 sw=2 et:
