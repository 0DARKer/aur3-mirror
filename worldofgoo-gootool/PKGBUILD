# Maintainer: Todd Partridge <toddrpartridge@gmail.com>

pkgname=worldofgoo-gootool
_pkgname=gootool
pkgver=1.0.3.441
pkgrel=2
pkgdesc="World of Goo level creator and installer"
arch=(any)
url="http://goofans.com/download/utility/$_pkgname"
license=('custom')
depends=('java-runtime')
optdepends=('worldofgoo')
conflicts=('gootool')
install="$pkgname.install"
source=(http://goofans.com/download/145/1255/gootool_$pkgver-1_all.deb)
md5sums=('31579d7bc2526e6bad07e36950b93d11')

build() {
  # Create build directory
  [ -d $pkgname-$pkgver ] || mkdir $pkgname-$pkgver

  # Extract archive
  bsdtar -xf gootool_$pkgver-1_all.deb      || return 1
  bsdtar -xf data.tar.gz -C $pkgname-$pkgver || return 1

  # Bugfix: Startup script only checks for sun jdk, ugly fix, disabling check
  cd $pkgname-$pkgver
  sed -i '24 s/^    exit 1/#    exit 1/' usr/bin/gootool
}

package() {
  # Copy program
  cd $pkgname-$pkgver
  cp -r * $pkgdir
}

