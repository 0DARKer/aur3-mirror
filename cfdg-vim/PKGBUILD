# Maintainer: epsy <epsy nospace 46 at free dot fr>

pkgname=cfdg-vim
pkgver=0.2
pkgrel=2
pkgdesc="Vim syntax files for CFDG design grammars."
arch=(i686 x86_64)
url="http://www.florianbrucker.de/index.php?p=cfdgsyntaxfile"
license=('custom:vim')
groups=('')
depends=('cfdg' 'vim' 'imagemagick')
source=(http://www.florianbrucker.de/content/cfdgsyntaxfile/cfdg.vim http://epsy46.free.fr/code/cfdg-vim-$pkgver-$pkgrel.patch)
md5sums=('9775a281a20109657445e35a9362e1e7' '42892656cb67d1007bfe3b947ed66d99')

build() {
  cd $srcdir

  patch cfdg.vim < cfdg-vim-$pkgver-$pkgrel.patch

  mkdir -p $pkgdir/usr/share/vim/ftplugin/ $pkgdir/usr/share/vim/ftdetect/
  cp -L cfdg.vim $pkgdir/usr/share/vim/ftplugin/cfdg.vim
  echo >$pkgdir/usr/share/vim/ftdetect/cfdg.vim "au BufRead,BufNewFile *.cfdg		set filetype=cfdg"
}
