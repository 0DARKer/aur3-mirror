# Contributor : wido <widomaker2k7@gmail.com>
# Contributor : Anish Bhatt <anish[removethis][at]gatech[dot]edu>

pkgname=bin32-flashplugin-beta
_licensefile='PlatformClients_PC_WWEULA_Combined_20100108_1657.pdf'
pkgver=11.0.1.60
pkgrel=1
pkgdesc='Adobe Flash Player Beta (32 bits)'
url='http://labs.adobe.com/downloads/flashplayer10-3.html'
arch=('x86_64')
source=('http://download.macromedia.com/pub/labs/flashplatformruntimes/flashplayer11/flashplayer11_b1_install_lin_32_071311.tar.gz'
        "http://www.adobe.com/products/eulas/pdfs/${_licensefile}"
        mms.cfg)
md5sums=('8816dfa0bbb4210df5a37e061834c24a'
         '94ca2aecb409abfe36494d1a7ec7591d'
         'df30781e4c9b789e2d7f6cdbd9f47d6b')
depends=('mozilla-common' 'lib32-libxt' 'lib32-gtk2' 'lib32-nss' 'lib32-curl' 'lib32-alsa-lib' 'nspluginwrapper')
optdepends=('lib32-libvdpau: GPU acceleration on Nvidia card')
conflicts=('flashplugin' 'flashplugin-prerelease32' 'flashplugin-beta' 'bin32-flashplayer-standalone')
provides=('flashplayer' 'flashplugin')
license=('custom')
install=(bin32-flashplugin-beta.install)
options=(!strip)
backup=(etc/adobe/mms.cfg)

package() {
  install -d -m755 "${pkgdir}"/usr/lib32/mozilla/plugins/
  install -m755 "${srcdir}"/libflashplayer.so "${pkgdir}"/usr/lib32/mozilla/plugins/
  install -d -m755 "${pkgdir}"/usr/share/licenses/${pkgname}/
  install -m644 "${_licensefile}" "${pkgdir}"/usr/share/licenses/${pkgname}/LICENSE.pdf
  install -d -m755 "${pkgdir}"/etc/adobe
  install -m644 "${srcdir}"/mms.cfg "${pkgdir}"/etc/adobe/mms.cfg

  # Install npwrapper:
  mkdir -p "${pkgdir}"/usr/lib/mozilla/plugins/
  touch "${pkgdir}"/usr/lib/mozilla/plugins/npwrapper.libflashplayer.so
  chmod 755 "${pkgdir}"/usr/lib/mozilla/plugins/npwrapper.libflashplayer.so
}
