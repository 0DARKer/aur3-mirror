# Maintainer: pingplug <pingplug@foxmail.com>

pkgname=mingw-w64-dlib
_pkgname=dlib
pkgver=18.9
pkgrel=2
pkgdesc="Dlib is a general purpose cross-platform C++ library designed using contract programming and modern C++ techniques. (mingw-w64)"
arch=('any')
_arch_target32=i686-w64-mingw32
_arch_target64=x86_64-w64-mingw32
url="http://www.dlib.net/"
license=('Boost Software License')
depends=('mingw-w64-crt')
optdepends=('mingw-w64-fftw: for FFTW support'
            'mingw-w64-libjpeg-turbo: for JPEG support'
            'mingw-w64-libpng: for PNG support'
            'mingw-w64-sqlite3: for sqlite support')
source=(http://jaist.dl.sourceforge.net/project/dclib/$_pkgname/v$pkgver/$_pkgname-$pkgver.tar.bz2
        dlib-18.9.patch)
md5sums=('7805ac09932dfa5e88b5c4076ea7d5e5'
         '5c94d08b46e42080edeacfd22d9df1e2')

prepare() {
    cd $srcdir
    # fix an error while build with ms resource file
    # and a linking error while build a static binary with libpng
    patch -Np0 -i dlib-18.9.patch
}

package() {
    mkdir -p $pkgdir/usr/${_arch_target32}/include
    mkdir -p $pkgdir/usr/${_arch_target64}/include
    cd "$srcdir/$_pkgname-$pkgver"
	cp -a dlib $pkgdir/usr/${_arch_target32}/include	
	cp -a dlib $pkgdir/usr/${_arch_target64}/include	
}
