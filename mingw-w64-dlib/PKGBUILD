# Maintainer: pingplug <pingplug@foxmail.com>

pkgname=mingw-w64-dlib
_pkgname=dlib
pkgver=18.7
pkgrel=1
pkgdesc="Dlib is a general purpose cross-platform C++ library designed using contract programming and modern C++ techniques. (mingw-w64)"
arch=('any')
_arch_target32=i686-w64-mingw32
_arch_target64=x86_64-w64-mingw32
url="http://www.dlib.net/"
license=('Boost Software License')
depends=('mingw-w64-crt')
optdepends=('mingw-w64-lapack: for BLAS support'
            'mingw-w64-fftw: for FFTW support'
            'mingw-w64-libjpeg-turbo: for JPEG support'
            'mingw-w64-libpng: for PNG support'
            'mingw-w64-sqlite3: for sqlite support')
source=(http://jaist.dl.sourceforge.net/project/dclib/$_pkgname/v$pkgver/$_pkgname-$pkgver.tar.bz2
        dlib-18.7.patch)
md5sums=('007ab849b8a14c9ad6af0ae111d28d50'
         '8cf6473e20bbe164a0597f490f0f0add')

prepare() {
    cd $srcdir
    # fix an error while build with ms resource file
    # and a linking error while build a static binary with libpng
    patch -Np0 -i dlib-18.7.patch
}

package() {
    mkdir -p $pkgdir/usr/${_arch_target32}/include
    mkdir -p $pkgdir/usr/${_arch_target64}/include
    cd "$srcdir/$_pkgname-$pkgver"
	cp -a dlib $pkgdir/usr/${_arch_target32}/include	
	cp -a dlib $pkgdir/usr/${_arch_target64}/include	
}
