diff -ruN dlib-18.7/dlib/cmake dlib-18.7-fixed/dlib/cmake
--- dlib-18.7/dlib/cmake	2014-04-10 06:08:36.000000000 +0800
+++ dlib-18.7-fixed/dlib/cmake	2014-04-29 22:59:12.328731477 +0800
@@ -9,7 +9,7 @@
         # By default, g++ won't warn or error if you forget to return a value in a
         # function which requires you to do so.  This option makes it give a warning
         # for doing this. 
-        add_definitions("-Wreturn-type")
+        set(${CMAKE_CXX_FLAGS} "${CMAKE_CXX_FLAGS} -Wreturn-type")
     endif()
 
     # Setup some options to allow a user to enable SSE and AVX instruction use.  
diff -ruN dlib-18.7/dlib/CMakeLists.txt dlib-18.7-fixed/dlib/CMakeLists.txt
--- dlib-18.7/dlib/CMakeLists.txt	2014-04-10 06:08:36.000000000 +0800
+++ dlib-18.7-fixed/dlib/CMakeLists.txt	2014-04-29 22:59:51.172066757 +0800
@@ -217,6 +217,7 @@
          if (PNG_FOUND)
             include_directories(${PNG_INCLUDE_DIR})
             set (dlib_needed_libraries ${dlib_needed_libraries} ${PNG_LIBRARY})
+            set (dlib_needed_libraries ${dlib_needed_libraries} ${ZLIB_LIBRARY})
          else()
             # If we can't find libpng then statically compile it in.
             include_directories(external/libpng external/zlib)
