# Maintainer:  Omid Nikta <omidnikta@gmail.com>
# Contributor: Omid Nikta <omidnikta@gmail.com>
 
pkgname=qtmind
pkgver=0.5
pkgrel=2
pkgdesc="A Mastermind Game With Built-in Solver. Included Solving Algorithms: Most Parts, Worst Case, Expected Size."
arch=('i686' 'x86_64')
url="http://omidnikta.github.io/qtmind/"
license=('GPL3')
depends=('qt4')
makedepends=('git')
provides=('qtmind')
install=qtmind.install
url="http://omidnikta.github.io/qtmind/"
_gitroot="https://github.com/omidnikta/qtmind"
_gitname="qtmind"
 

build() {
	cd $srcdir
	
	msg "Connecting to the GIT server...."
	git clone $_gitroot --single-branch master
	mv master $_gitname
	msg "Starting make..."

  if [ -d ${srcdir}/${_gitname}-build ]; then
      rm -rf ${srcdir}/${_gitname}-build
  fi

  cp -r ${srcdir}/$_gitname ${srcdir}/${_gitname}-build
  cd ${srcdir}/${_gitname}-build

  export KDE="true"
   
  qmake-qt4
  make clean
  make
}
 
package() {
  cd ${srcdir}/${pkgname}-build
 
  # binary
  install -D -m755 ${pkgname} ${pkgdir}/usr/bin/${pkgname}

  # documentation & manual
  install -d ${pkgdir}/usr/share/${pkgname}
#  install -d ${pkgdir}/usr/share/${pkgname}/translations
  cp -r translations/ ${pkgdir}/usr/share/${pkgname}/

  # icon
  install -D -m644 icons/hicolor/512x512/qtmind.png \
    ${pkgdir}/usr/share/pixmaps/qtmind.png

  # desktop
  install -D -m644 ${pkgname}.desktop \
    ${pkgdir}/usr/share/applications/${pkgname}.desktop
}
 
# vim: set ft=sh ts=2 sw=2 et:
