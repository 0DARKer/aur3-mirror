# Contributor: Andrea Scarpino <andrea@archlinux.org>

pkgname=initscripts-git
pkgver=20110418
pkgrel=1
pkgdesc="System initialization/bootup scripts"
arch=('i686' 'x86_64')
url="http://www.archlinux.org"
license=('GPL2')
groups=('base')
backup=(etc/inittab etc/rc.conf etc/rc.local etc/rc.local.shutdown etc/conf.d/wireless)
depends=('bash' 'awk' 'grep' 'coreutils' 'sed' 'udev'
         'net-tools' 'ncurses' 'kbd' 'findutils' 'sysvinit')
optdepends=('bridge-utils: Network bridging support'
            'dhcpcd: DHCP network configuration'
            'wireless_tools: Wireless networking')
makedepends=('git')
install=initscripts.install
provides=('initscripts')
conflicts=('initscripts')
source=('wireless.conf.d')
sha256sums=('0eba4250b07e0a727ef64772f5ee9027b123cbd4bb0894ba2842f545035c827f')

_gitroot="git://projects.archlinux.org/initscripts.git"
_gitname="initscripts"

package() {
  cd "$srcdir"
  msg "Connecting to GIT server...."

  if [ -d $_gitname ] ; then
    cd $_gitname && git pull origin
    msg "The local files are updated."
  else
    git clone $_gitroot $_gitname
  fi

  msg "GIT checkout done or server timeout"

  cd $_gitname
  DESTDIR=${pkgdir} ./install.sh
  install -D -m644 ${srcdir}/wireless.conf.d ${pkgdir}/etc/conf.d/wireless
}
