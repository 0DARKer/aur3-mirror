# Maintainer: Victor <vicgua@outlook.com>
pkgname=edis-c-git
pkgver=r98.4c87c39
pkgrel=2
#epoch=
pkgdesc="Lightweight C IDE"
arch=('any')
url="https://github.com/centaurialpha/ide"
license=('GPL3')
groups=()
depends=('python2>=2.7.0' 'pyqt>=4.8.0')
makedepends=('git')
#checkdepends=()
optdepends=()
provides=(edis-c)
conflicts=(edis-c)
#replaces=()
#backup=()
#options=()
#install=
#changelog=
source=('edis-c::git+https://github.com/centaurialpha/ide.git'
         archlinux.patch
         edis-c.png
         edis-c.desktop)
#noextract=()
md5sums=('SKIP'
         '7dafa9414dbbf6283ff8da52fe030f69'
         '2d81f1e54ff0f5ce1c388f686d5be333'
         'a220bd07538e499eb68f9796036fd5fb')
sha256sums=('SKIP'
            '8137fe1c736242757befd80bd671672258acc96ebf99a2d054774aa27a2e7969'
            '90e8d44125bcf2fc8397e9c9a9814da5b5af315db80c891a0d16f6a33dd503ad'
            '68df24708cb0c55ec4499c7d635037bfed0ba675189039025369b034e65abc19')
pkgver() {
  cd "$srcdir/edis-c"
  printf "r%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse --short HEAD)"
}

prepare() {
	cd "$srcdir/edis-c"
	patch -p1 -i "$srcdir/archlinux.patch"
}

build() {
	echo > /dev/null
}

# check() {
# 	No check
# }

package() {
	cd "$srcdir"
	mkdir -p "$pkgdir/opt"
	mkdir -p "$pkgdir/usr/bin"
	cp -r "edis-c" "$pkgdir/opt"
	rm -rf "$pkgdir/opt/edis-c/.git/"
	chmod -R ugo+x "$pkgdir/opt/edis-c"
	ln -s "$pkgdir/opt/edis-c/edis-c.py" "$pkgdir/usr/bin/edis-c"
	install -Dm644 "edis-c.desktop" "$pkgdir/usr/share/applications/edis-c.desktop"
	install -Dm644 "edis-c.png" "$pkgdir/usr/share/pixmaps/edis-c.png"
}
