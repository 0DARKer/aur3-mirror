# Maintainer: Alexander Rødseth <rodseth@gmail.com>
pkgname=ninja-open
pkgver=0.7
pkgrel=2
pkgdesc="A quick and dirty replacement for xdg-open"
arch=('x86_64' 'i686')
url="http://ninja-open.roboticoverlords.org/"
license=('GPL2')
optdepends=('eog' 'evince' 'file-roller' 'deluge' 'gedit' 'wine' 'chromium-browser-bin' 'smplayer' 'vlc' 'gimp')
makedepends=('go')
options=(!strip)
source=("http://ninja-open.roboticoverlords.org/$pkgname-$pkgver.xz")
md5sums=('1cc1b503bbc370e9e5da7d1d6727c7ce')

build() {
  cd "$srcdir/$pkgname-$pkgver"
  # Changes
  sed -i 's:firefox:chromium-browser:' ninja-open.old
  sed -i 's:firefox:chromium-browser:' ninja-open.go
  # There has been API changes in Go, try the new and then the old method
  make || mv -f ninja-open.old ninja-open.go && make || source /etc/profile.d/go.sh && make
}

package() {
  cd "$srcdir/$pkgname-$pkgver"
  install -Dm755 "$pkgname" "$pkgdir/usr/bin/xdg-open"
  install -Dm644 COPYING "$pkgdir/usr/share/licenses/$pkgname/COPYING"
}

# vim:set ts=2 sw=2 et:
