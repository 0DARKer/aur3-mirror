# Author: Syed Adnan Kamili <adnan.kamili@gmail.com>
# Maintainer: Marc Rozanc <marc@rozanc.fr>

pkgname=flareget
_rel=2.4
_subrel=27
pkgver=${_rel}.${_subrel}
pkgrel=4
pkgdesc="A full featured, advanced, multi-threaded, multisegment download manager and accelerator."
arch=('i686' 'x86_64')
url="http://flareget.com"
license=('custom')
depends=('glibc>=2.13' 'qt4>=4.8.1' 'libpcap>=0.9.8' 'libmetalink')
makedepends=('rpmextract')
install=${pkgname}.install

if  [ "${CARCH}" = "i686" ]; then
    _arch1="i386"
    _arch2=$_arch1
    md5sums=('28c6287b1f2da040a278c6974ef8b358')
# RPM checksum
#    md5sums=('6eb9584276bfa58109aedf2a7644d834')
elif [ "${CARCH}" = "x86_64" ]; then
    _arch1="x86_64"
    _arch2="amd64"
    md5sums=('bb1568e2c11977c5dc418226432d533a')
# RPM checksum
#    md5sums=('84a4dbe3e983905eec794a814fd15f59')
fi

source=("http://www.flareget.com/files/flareget/rpm/${_arch2}/${pkgname}_${_rel}-${_subrel}_${_arch1}(stable)_rpm.tar.gz")
#directly from the RPM
#source=("${pkgname}-${_rel}-${_subrel}.${_arch1}.rpm")

package() {
   cd $pkgdir

   # Extract RPM package
   rpmextract.sh "$srcdir/${pkgname}_${_rel}-${_subrel}_${_arch1}(stable)_rpm/${pkgname}-${_rel}-${_subrel}.${_arch1}.rpm"
#   rpmextract.sh ${srcdir}/${pkgname}-${_rel}-${_subrel}.${_arch1}.rpm

   cd $srcdir
   # License
   install -Dm644 $pkgdir/usr/share/doc/$pkgname/COPYING $pkgdir/usr/share/licenses/$pkgname/LICENSE
   rm $pkgdir/usr/share/doc/$pkgname/COPYING

}

