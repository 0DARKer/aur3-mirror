# Contributor: Florian Besser <fbesser AT gmail DOT com>
pkgname=kazam-bzr
pkgver=324
pkgrel=3
pkgdesc="A screencasting program with design in mind. Unstable branch."
arch=('i686' 'x86_64')
url="https://launchpad.net/kazam"
license=('GPL')
groups=()
depends=('python-gobject' 'pygtk' 'ffmpeg' 'gstreamer0.10' 'python-xdg' 'python-xlib' 'libmatroska' 'python-pycurl' 'libtheora')
makedepends=('bzr' 'python-distutils-extra')

install=
source=()

_bzrtrunk="lp:kazam"
_bzrmod="unstable"

build() {
  cd "$srcdir"
  msg "Connecting to Bazaar server...."

  if [ -d $_bzrmod ] ; then
    cd $_bzrmod && bzr merge
    msg "The local files are updated."
  else
    bzr branch $_bzrtrunk/$_bzrmod
  fi

  msg "Bazaar checkout done or server timeout"
  msg "Starting make..."

  rm -rf "$srcdir/$_bzrmod-build"
  cp -r "$srcdir/$_bzrmod" "$srcdir/$_bzrmod-build"
  cd "$srcdir/$_bzrmod-build"

  python setup.py build 
} 

package() {
  cd "$srcdir/$_bzrmod-build"
  python setup.py install --root $pkgdir
}

