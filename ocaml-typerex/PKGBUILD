# Maintainer: Serge Zirukin <ftrvxmtrx@gmail.com>

pkgname=ocaml-typerex
pkgver=1.0.0rc2
pkgrel=1
pkgdesc="TypeRex is a powerful development environment for OCaml."
arch=("i686" "x86_64")
url=("http://www.typerex.org/")
license=("GPLv3")
depends=("emacs" "ocaml>=3.11.2")
source=("http://www.typerex.org/pub/typerex-${pkgver}.tar.gz")
md5sums=('0622402830bc7719cfdd93213079b383')

build() {
  cd "$srcdir/${pkgname/ocaml-/}-${pkgver}"

  ./configure --prefix="${pkgdir}/usr"
  make
  sed "s|${pkgdir}[/]*|/|g" -i emacs.append
}

package() {
  cd "$srcdir/${pkgname/ocaml-/}-${pkgver}"
  extra="${pkgdir}/usr/share"

  make install
  install -d "${extra}/"{licenses,,doc}"/${pkgname}"
  install -m 0644 -t "${extra}/licenses/${pkgname}" LICENSE*
  install -m 0644 -t "${extra}/${pkgname}"          emacs.append
  install -m 0644 -t "${extra}/doc/${pkgname}"      docs/user-manual/*.pdf
}
