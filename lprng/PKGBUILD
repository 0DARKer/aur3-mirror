# Maintainer: David Raymond <raymond at kestrel dot nmt dot edu>
# Contributor: Alex Suykov <axs at ukr dot net>
# Contributor: Frank Thieme <frank at fthieme dot net>
pkgname=lprng
pkgver=3.8.C
pkgrel=1
pkgdesc="An Enhanced Printer Spooler"
arch=('i686' 'x86_64')
url="http://www.lprng.com"
license=('custom:Artistic')
depends=(openssl bash)
conflicts=(cups)
source=(http://sourceforge.net/projects/lprng/files/lprng/lprng-3.8.C.tar.gz lpd.service)
md5sums=('5901bed95e61d2bea3ba3056056af432'
         '990745083e4f627a714569dc20816b0a')

build() {
  cd "$srcdir/lprng-$pkgver"

  ./configure --prefix=/usr --sysconfdir=/etc/lprng --localstatedir=/var\
      --mandir=/usr/share/man --libexecdir=/usr/lib/lprng\
      --with-userid=daemon --with-groupid=lp\
      --enable-ssl
  make -j1 || return 1
  make -j1 MAKEPACKAGE=YES DESTDIR="$pkgdir/" install
  mkdir $pkgdir/usr/lib/systemd
  mkdir $pkgdir/usr/lib/systemd/system/
  install -D -m 0644 ../lpd.service $pkgdir/usr/lib/systemd/system/
  install -D -m 0644 COPYRIGHT $pkgdir/usr/share/licenses/lprng/COPYRIGHT
}
