pkgname=serialosc-git
pkgver=20101112
pkgrel=1
pkgdesc="serialosc is an osc router for yr monome"
arch=('i686' 'x86_64')
license=('ISC')
url=("https://github.com/monome/serialosc")
depends=('libmonome')
conflicts=('serialosc')
provides=('serialosc')

_gitname="serialosc"
_gitroot="https://github.com/monome"

build() {
	cd $srcdir
	msg "Connecting to the GIT server..."

	if [[ -d $srcdir/$_gitname ]] ; then
		cd $_gitname
		git pull origin
		msg "The local files were updated."
	else
		git clone "$_gitroot/$_gitname.git"
fi

    msg "GIT checkout done"
    msg "Starting make..."

		git clone $srcdir/$_gitname $srcdir/$_gitname-build
		cd $srcdir/$_gitname-build

		mkdir $pkgdir/usr

		./configure --prefix=$pkgdir/usr || return 1
		make || return 1
		make install PKGCONFIGDIR="$pkgdir/usr/lib/pkgconfig"|| return 1

		rm -rf $srcdir/$_gitname-build
}

