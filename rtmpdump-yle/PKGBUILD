# Maintainer: Jesse Jaara <gmail: jesse.jaara>
pkgname=rtmpdump-yle
pkgver=1.4.2
pkgrel=1
pkgdesc="Download video and audio from YLE Areena in .flv-format"
arch=("i686" "x86_64")
url="http://users.tkk.fi/~aajanki/rtmpdump-yle/index.html"
license=("GPL")
depends=("openssl" 'python2' 'json-c')
conflicts=('rtmpdump' 'rtmpdump-svn')
provides=('rtmpdump' 'rtmpdump-svn=20110512')
source=("http://users.tkk.fi/~aajanki/${pkgname}/${pkgname}-${pkgver}.tar.gz" \
	makefile.patch)

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"

  patch -p1 -i ../makefile.patch

  cd librtmp
  make			#Build librtmp
  cd ..
  
  make			#Build yle-dl
}
package() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  
  mkdir -p "${pkgdir}/usr/lib"
  
  cd librtmp
  make DESTDIR="${pkgdir}" install install_so
  cd ..
  
  make DESTDIR="${pkgdir}" install 
  sed 's|python|python2|g' -i "${pkgdir}/usr/bin/yle-dl"

  ln -s rtmpdump-yle "${pkgdir}/usr/bin/rtmpdump"
}

md5sums=('5bdbf955d3b4ddb06eaa13b326d9d80d'
         '6db091a3ae06bfc3710e21bdfd0f1bb2')
