# Maintainer: Jesse Jaara <gmail: jesse.jaara>
pkgname=rtmpdump-yle
pkgver=1.4.1
pkgrel=1
pkgdesc="Download video and audio from YLE Areena in .flv-format"
arch=("i686" "x86_64")
url="http://users.tkk.fi/~aajanki/rtmpdump-yle/index.html"
license=("GPL")
depends=("openssl" 'python2' 'json-c')
conflicts=('rtmpdump=2.3' 'rtmpdump-svn')
provides=('rtmpdump' 'rtmpdump-svn')
source=("http://users.tkk.fi/~aajanki/rtmpdump-yle/rtmpdump-yle-${pkgver}.tar.gz")

build() {
  cd "${srcdir}/$pkgname-$pkgver"
  cd librtmp
  sed 's|prefix=/usr/local|prefix=/usr|g' -i Makefile	# Fix the install dir to arch way
  sed 's|SHARED=|SHARED=yes|g' -i Makefile		# Upstream changed to static build,
  make			#Build librtmp			# but (we) want shared build
  cd ..

  sed 's|prefix=/usr/local|prefix=/usr|g' -i Makefile   # Fix the install dir to arch way
  make			#Build yle-dl
  sed 's|/usr/bin/python|/usr/bin/python2|g' -i yle-dl.py #Fix file to pint to python2
}
package() {
  cd "${srcdir}/$pkgname-$pkgver"
  mkdir -p "$pkgdir/usr/lib"
  make DESTDIR=$pkgdir/ install 
}
md5sums=('847b33a19161390d2dc568255af244d1')
