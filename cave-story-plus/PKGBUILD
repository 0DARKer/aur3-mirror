# Maintainer: Gerardo Marset <gammer1994@gmail.com>

pkgname=cave-story-plus
pkgver=3
pkgrel=2
pkgdesc="The extended version of Cave Story, a side-scrolling platformer game"
arch=('i686' 'x86_64')
url="http://www.nicalis.com/"
license=('custom')
depends=('sdl' 'mesa')
source=(CaveStoryPlus-linux.tar.gz
        $pkgname
        $pkgname.png
        $pkgname.desktop)
md5sums=('946a5a7315933728f9e4d56e8509bfc9'
         '181b6397136ebee9c0ac62d59318b5dd'
         'd73dee54b24f2ceb21a50e2c8f71da10'
         '426350078c2d76dbc42112f10cf59d35')
options=(!strip)

build() {
  cd CaveStory+

  # Create the game directory.
  mkdir -p $pkgdir/opt/$pkgname

  # Copy the data directory.
  cp -r data $pkgdir/opt/$pkgname

  # Install the binary.
  if [ "$CARCH" == "i686" ] ; then
    install -Dm755 CaveStory+ $pkgdir/opt/$pkgname
  else
    install -Dm755 CaveStory+_64 $pkgdir/opt/$pkgname/CaveStory+
  fi

  # Install the startup script.
  mkdir -p $pkgdir/usr/bin
  install -m755 $srcdir/$pkgname $pkgdir/usr/bin

  # Install icons and .desktop files.
  mkdir -p $pkgdir/usr/share/{icons,applications}
  install -m644 $startdir/$pkgname.png $pkgdir/usr/share/icons
  install -m644 $startdir/$pkgname.desktop $pkgdir/usr/share/applications
}

# vim: set sts=2 sw=2 et:
