# Maintainer: Gilles Bedel <gillou.ray.you_are_a_bot@free.fr>

# Note:
# Giving the Terminus-ja.ttf to X doesn't seems to be enough.
# So I extracted the bitmap fonts from the Terminus-ja.ttf with fontforge,
# and I generated the BDF font files. And I did many modifications to fix
# various problems. That's why I included the BDF files in the package source.

pkgname=terminus-ja-font
pkgver=20100612
pkgrel=1
pkgdesc="Japanese friendly terminal fonts, based on terminus"
arch=('any')
url="http://mix-mplus-ipa.sourceforge.jp/terminus-ja/"
license=('GPL' 'custom:IPA')
groups=()
depends=(xorg-fonts-encodings xorg-fonts-alias)
makedepends=(xorg-font-utils gzip)
optdepends=()
provides=()
conflicts=()
replaces=()
backup=()
options=()
install=terminus-ja-font.install
changelog=
source=(Terminus-ja-12.bdf.gz Terminus-ja-13.bdf.gz Terminus-ja-14.bdf.gz
        Terminus-ja-15.bdf.gz Terminus-ja-16.bdf.gz IPA.COPYING.ja)
noextract=()
md5sums=('8e410091f0f14b1a1996d7c4bce0a685'
         '612a6844a2b4d7a35166be01c256af09'
         '4512a882691ca45fa16610f7d9720fa1'
         '32527ddb5b86522e9dce18e892a43192'
         'ab6d7447e593bd6af98be3ae4882557e'
         '2002a9012eff63fefcc456dbaf78ad96')

build() {
  cd "$srcdir"

  for f in *.bdf; do
    pcf_file="${f/.bdf/.pcf}"
    bdftopcf -t "$f" -o "$pcf_file"
    gzip -f "$pcf_file"
  done
}

package() {
  cd "$srcdir"

  mkdir -p "$pkgdir/usr/share/fonts/misc/"
  for f in *.pcf.gz; do
    cp "$f" "$pkgdir/usr/share/fonts/misc/"
  done

  mkdir -p "$pkgdir/usr/share/licenses/terminus-ja-font/"
  cp IPA.COPYING.ja "$pkgdir/usr/share/licenses/terminus-ja-font/"
}

# vim:set ts=2 sw=2 et:
