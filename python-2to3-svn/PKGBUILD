# Contributor: Haoyu bai <baihaoyu@gmail.com>

pkgname=python-2to3-svn
_realname=python-2to3
pkgver=62079
pkgrel=1
pkgdesc="A refactoring tool for converting Python 2.x code to 3.0."
url="http://www.python.org/"
source=()
md5sums=()
arch=('i686' 'x86_64')
license=('custom:PSF')
depends=('python')
makedepends=('subversion')

_svnmod="2to3"
_svntrunk="http://svn.python.org/projects/sandbox/trunk/2to3"

build() {
  cd $startdir/src

  msg "Getting sources..."
  if [ -d $_svnmod/.svn ]; then
    (cd $_svnmod && svn up -r $pkgver)
  else
    svn co $_svntrunk -r $pkgver $_svnmod
    cd $_svnmod
  fi

  msg "SVN checkout done or server timeout"
  msg "Starting setup.py..."

  python setup.py install --prefix=$startdir/pkg/usr 

  # Removing .svn files
  find $startdir/pkg/ -type d -name ".svn" -exec rm -rf { } \;
  
}
