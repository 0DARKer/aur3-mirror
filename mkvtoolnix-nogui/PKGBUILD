# Maintainer: Gilles Bedel <gillou.ray_you.are.a.bot@free.fr>
# Inspired by the extra/mkvtoolnix PKGBUILD.

pkgname=mkvtoolnix-nogui
_pkgname=mkvtoolnix
pkgver=4.4.0
pkgrel=1
pkgdesc="Set of tools to create, edit and inspect Matroska files (command line)"
arch=('i686' 'x86_64')
license=('GPL')
url="http://www.bunkus.org/videotools/mkvtoolnix/index.html"
depends=('libmatroska' 'flac' 'libvorbis' 'file' 'boost-libs' 'lzo2')
makedepends=('boost' 'ruby')
conflicts=('mkvtoolnix')
replaces=('mkvtoolnix')
source=("http://www.bunkus.org/videotools/${_pkgname}/sources/${_pkgname}-${pkgver}.tar.bz2")
md5sums=('1f2ea5997066ebb65444198576e5ec4a')

build() {
    cd "${srcdir}/${_pkgname}-${pkgver}"
    ./configure --prefix=/usr --disable-gui \
        --with-boost-libdir=/usr/lib || return 1
    ./drake || return 1
}

package () {
    cd "${srcdir}/${_pkgname}-${pkgver}"
    ./drake DESTDIR="${pkgdir}" install || return 1
}
