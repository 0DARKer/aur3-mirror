diff --git a/config/environment.rb b/config/environment.rb
index 1cb5abd..8af1f9d 100644
--- a/config/environment.rb
+++ b/config/environment.rb
@@ -2,11 +2,14 @@
 
 # Uncomment below to force Rails into production mode when
 # you don't control web/app server and can't set it the proper way
-# ENV['RAILS_ENV'] ||= 'production'
+ENV['RAILS_ENV'] ||= 'production'
 
 # Specifies gem version of Rails to use when vendor/rails is not present
 RAILS_GEM_VERSION = '2.3' unless defined? RAILS_GEM_VERSION
 
+require "rubygems"
+require "bundler/setup"
+
 # Bootstrap the Rails environment, frameworks, and default configuration
 require File.join(File.dirname(__FILE__), 'boot')
 
diff --git a/config/environments/production.rb b/config/environments/production.rb
index ed9b828..e2e0181 100644
--- a/config/environments/production.rb
+++ b/config/environments/production.rb
@@ -1,5 +1,8 @@
 # Settings specified here will take precedence over those in config/environment.rb
 
+# Disable SSL to simplify deployment
+SslRequirement.disable_ssl_check = true
+
 # The production environment is meant for finished, "live" apps.
 # Code is not reloaded between requests
 config.cache_classes = true
diff --git a/data/hooks/messaging.rb b/data/hooks/messaging.rb
index 1049037..15e00e9 100644
--- a/data/hooks/messaging.rb
+++ b/data/hooks/messaging.rb
@@ -17,7 +17,9 @@
 #   You should have received a copy of the GNU Affero General Public License
 #   along with this program.  If not, see <http://www.gnu.org/licenses/>.
 #++
+ENV["BUNDLER_GEMFILE"] = File.dirname(__FILE__)+'/../../Gemfile'
 require 'rubygems'
+require 'bundler/setup'
 require 'stomp'
 require 'json'
 require 'yaml'
diff --git a/script/git-daemon b/script/git-daemon
index bd05fc2..dd90ae8 100755
--- a/script/git-daemon
+++ b/script/git-daemon
@@ -1,6 +1,8 @@
 #!/usr/bin/env ruby
+ENV["BUNDLER_GEMFILE"] = File.dirname(__FILE__)+'/../Gemfile'
 
 require 'rubygems'
+require 'bundler/setup'
 require 'daemons'
 require 'geoip'
 require 'socket'
diff --git a/script/poller b/script/poller
index 9a4ee3f..bdb6640 100755
--- a/script/poller
+++ b/script/poller
@@ -1,5 +1,6 @@
 #!/usr/bin/env ruby
 # encoding: utf-8
+ENV["BUNDLER_GEMFILE"] = File.dirname(__FILE__)+'/../Gemfile'
 
 if RUBY_VERSION < '1.9'
   $KCODE = 'u'
@@ -9,6 +10,7 @@ else
 end
 
 require 'rubygems' if RUBY_VERSION < '1.9'
+require 'bundler/setup'
 require 'daemons'
 
 APP_ROOT = File.expand_path(File.dirname(__FILE__) + '/..')
diff --git a/vendor/plugins/open_id_authentication/init.rb b/vendor/plugins/open_id_authentication/init.rb
index 808c7bd..9042b36 100644
--- a/vendor/plugins/open_id_authentication/init.rb
+++ b/vendor/plugins/open_id_authentication/init.rb
@@ -13,6 +13,7 @@ else
 end
 
 config.to_prepare do
+  require 'openid'
   OpenID::Util.logger = Rails.logger
   ActionController::Base.send :include, OpenIdAuthentication
 end
diff --git a/vendor/rails/railties/lib/rails/gem_dependency.rb b/vendor/rails/railties/lib/rails/gem_dependency.rb
index 06d830b..90e29d1 100644
--- a/vendor/rails/railties/lib/rails/gem_dependency.rb
+++ b/vendor/rails/railties/lib/rails/gem_dependency.rb
@@ -115,10 +115,10 @@ module Rails
       @spec = s
     end
 
-    def requirement
-      r = version_requirements
-      (r == Gem::Requirement.default) ? nil : r
-    end
+#    def requirement
+#      r = version_requirements
+#      (r == Gem::Requirement.default) ? nil : r
+#    end
 
     def built?
       return false unless frozen?
