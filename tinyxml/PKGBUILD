# Maintainer: Hubert Grzeskowiak <arch at nemesis13 dot de>
pkgname=tinyxml
pkgver=2.6.1
_pkgver=2_6_1
pkgrel=2
pkgdesc="A simple, small, C++ XML parser that can be easily integrated into other programs."
url='http://www.grinninglizard.com/tinyxml/'
arch=('any')
license=('zlib')
#source="http://sourceforge.net/projects/${pkgname}/files/${pkgname}/${pkgver}/${pkgname}_${_pkgver}.zip/download"
source="http://downloads.sourceforge.net/project/${pkgname}/${pkgname}/${pkgver}/${pkgname}_${_pkgver}.zip"
md5sums=('60f92af4f43364ab0c6d5b655e804bd3')

build() {
  cd $srcdir/$pkgname
  install -d $pkgdir/usr/include
  cp *.h $pkgdir/usr/include/
  sed -i.orig -e 's/\(^TINYXML_USE_STL := \)NO/\1YES/' \
              -e 's/^RELEASE_CFLAGS.*/& -fPIC/' Makefile
  make || return 1
  
  g++ -fPIC -shared -o libtinyxml.so.0.$pkgver -Wl,-soname,libtinyxml.so.0 *.o || return 1
  install -d $pkgdir/usr/lib
  install -m755 libtinyxml.so.0.$pkgver $pkgdir/usr/lib/
  cd $pkgdir/usr/lib
  ln -s libtinyxml.so.0.$pkgver libtinyxml.so.0
  ln -s libtinyxml.so.0.$pkgver libtinyxml.so
} 
