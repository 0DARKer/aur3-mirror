# Maintainer: Lucky <aur.archlinux.org [at] lucky.take0ver [dot] net>

pkgname=vzquota-git
_pkgname="${pkgname:0:7}"
pkgver=20100714
pkgrel=1
pkgdesc="OpenVZ disk quota control utility"
arch=("i686" "x86_64") 
url="http://openvz.org"
license=("GPL")
makedepends=("gcc" "git")
conflicts=("${_pkgname}")
provides=("${_pkgname}")
source=()
md5sums=()

_gitroot="git://git.openvz.org/pub/${_pkgname}"
_gitname="${_pkgname}"

build() {
  cd "${srcdir}"

  msg "Connecting to GIT server over HTTP..."
  if [[ -d "${_gitname}" ]]; then
    (cd "${_gitname}" && git pull origin)
    msg "The local repository was updated."
  else
    git clone "${_gitroot}" "${_gitname}"
    msg "The remote repository was cloned."
  fi
  msg "GIT sync done or server timeout."

  cd "${_pkgname}"
  make
  make DESTDIR="${pkgdir}" install
}
