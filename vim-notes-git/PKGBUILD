# Maintainer: Piotr Rogoża <rogoza dot piotr at gmail dot com>
# Contributor: Piotr Rogoża <rogoza dot piotr at gmail dot com>
# vim:set ts=2 sw=2 et ft=sh tw=100: expandtab

pkgname=vim-notes-git
pkgver=20130315
pkgrel=1
pkgdesc='Easy note taking in Vim '
arch=('any')
url='http://www.vim.org/scripts/script.php?script_id=3375'
license=('MIT')
groups=('vim-plugins')
depends=(python vim-misc-xolox)
conflicts=(vim-notes)
provides=(vim-notes)
install='vimdoc.install'
_gitroot='https://github.com/xolox/vim-notes.git'
_gitname='vim-notes'
build(){
  cd "$srcdir"
  msg2 "Connecting to GIT server...."

  if [ -d ${_gitname}/.git ] ; then
    cd $_gitname
    git pull origin
    msg2 "The local files are updated."
  else
    git clone $_gitroot $_gitname
    cd $_gitname
  fi
  msg2 "GIT checkout done or server timeout"
}
package(){
  cd "$srcdir"/$_gitname
  _vim_dir='/usr/share/vim/vimfiles'
  install -d "$pkgdir"/$_vim_dir

  tar -c ./ \
    --exclude .git \
    --exclude INSTALL.md \
    --exclude README.md \
    --exclude TODO.md \
    --exclude autoload/xolox/misc \
    | tar -x -C "$pkgdir"/$_vim_dir
}
