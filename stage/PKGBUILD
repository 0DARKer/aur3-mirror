# Maintainer: Renato Garcia <fgar.renato@gmail.com>
# Contributor: Yannick Poirier <contact@yannickpoirier.fr>

pkgname=stage
pkgver=3.2.2
pkgrel=1
pkgdesc="Fast and scalable robot simulator"
arch=('i686' 'x86_64')
url="http://playerstage.sourceforge.net"
license=('GPL')
depends=('fltk' 'libpng' 'player')
makedepends=('cmake')
source=("http://downloads.sourceforge.net/project/playerstage/${pkgname/s/S}/$pkgver/${pkgname/s/S}-$pkgver-Source.tar.gz")
md5sums=('ca93c7c9746354679829092640c49ec6')

build() {
  # Without this, cmake files would be installed
  mkdir "${srcdir}/${pkgname/s/S}-${pkgver}-Source/build"
  cd "${srcdir}/${pkgname/s/S}-${pkgver}-Source/build"

  cmake .. -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_SKIP_BUILD_RPATH=TRUE || return 1

  make || return 1
  make DESTDIR="${pkgdir}" install || return 1

  cp -r ../worlds ${pkgdir}/usr/share/stage
}
