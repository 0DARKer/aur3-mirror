# Maintainer: Emanuel Couto <emanuel.amaral.couto@gmail.com>
# Contributor: Chris Molozian (novabyte) <chris.molozian@gmail.com>
pkgname='gradle-1.8'
pkgver='1.8'
pkgrel=1
pkgdesc='A powerful build system for the JVM'
arch=('any')
url='http://www.gradle.org/'
license=('APACHE')
depends=('java-environment')
source=('https://services.gradle.org/distributions/gradle-1.8-bin.zip')
md5sums=('4cb542e09fb659df3a731a4bf92f4dce')

package() {
  cd "${srcdir}/${pkgname}"

  # create the necessary directory structure
  mkdir -p "${pkgdir}/usr/share/java/${pkgname}/bin"
  mkdir -p "${pkgdir}/usr/share/java/${pkgname}/lib/plugins"
  mkdir -p "${pkgdir}/usr/share/java/${pkgname}/init.d"
  mkdir -p "${pkgdir}/usr/bin"

  # copy across jar files
  install -Dm644 lib/*.jar "${pkgdir}/usr/share/java/${pkgname}/lib" || return 1
  install -Dm644 lib/plugins/*.jar "${pkgdir}/usr/share/java/${pkgname}/lib/plugins" || return 1

  # copy across supporting text documentation and scripts
  install -m644 NOTICE "${pkgdir}/usr/share/java/${pkgname}" || return 1
  install -m644 LICENSE "${pkgdir}/usr/share/java/${pkgname}" || return 1
  install -m644 *.txt "${pkgdir}/usr/share/java/${pkgname}" || return 1
  install -m644 *.html "${pkgdir}/usr/share/java/${pkgname}" || return 1
  install -m755 bin/gradle "${pkgdir}/usr/share/java/${pkgname}/bin" || return 1
  install -m644 init.d/*.* "${pkgdir}/usr/share/java/${pkgname}/init.d" || return 1

  # link gradle script to /usr/bin
  ln -s /usr/share/java/${pkgname}/bin/gradle ${pkgdir}/usr/bin/gradle-1.8
}
