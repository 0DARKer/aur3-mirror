# Contributor: Ryan Corder <ryanc@greengrey.org>

pkgname=palm-sdk
pkgver=1.4.5
pkgrel=1
pkgdesc="Unofficial package of Palm webOS SDK"
url="http://developer.palm.com/index.php"
arch=('i686' 'x86_64')
license=("unknown")
depends=('java-runtime>=6' 'virtualbox_bin=3.2.6' 'palm-novacom=1.0.56')
source=("http://cdn.downloads.palm.com/sdkdownloads/1.4.5.465/sdkBinaries/palm-sdk_1.4.5-svn307799-sdk1457-pho465_i386.deb")
noextract=()
install=('palm-sdk.install')
md5sums=('dc85db1897d0aa31e4c50130184ac508')

build() {
    cd $startdir/src
    
    ar x $startdir/palm-sdk_1.4.5-svn307799-sdk1457-pho465_i386.deb || return 1
    mkdir data || return 1

    tar zxvf $startdir/src/data.tar.gz -C $startdir/pkg || return 1

    rm -rf $startdir/pkg/usr/local || return 1
    rm -rf $startdir/pkg/usr/share || return 1

    mkdir $startdir/pkg/usr/bin || return 1
    
    ln -s /opt/PalmSDK/Current/bin/palm-emulator $startdir/pkg/usr/bin/palm-emulator || return 1
    ln -s /opt/PalmSDK/Current/bin/palm-generator $startdir/pkg/usr/bin/palm-generator || return 1
    ln -s /opt/PalmSDK/Current/bin/palm-help $startdir/pkg/usr/bin/palm-help || return 1
    ln -s /opt/PalmSDK/Current/bin/palm-inspector $startdir/pkg/usr/bin/palminspector || return 1
    ln -s /opt/PalmSDK/Current/bin/palm-install $startdir/pkg/usr/bin/palm-install || return 1
    ln -s /opt/PalmSDK/Current/bin/palm-launch $startdir/pkg/usr/bin/palm-launch || return 1
    ln -s /opt/PalmSDK/Current/bin/palm-log $startdir/pkg/usr/bin/palm-log || return 1
    ln -s /opt/PalmSDK/Current/bin/palm-package $startdir/pkg/usr/bin/palm-package || return 1
    ln -s /opt/PalmSDK/Current/bin/palm-worm $startdir/pkg/usr/bin/palm-worm || return 1    
}
