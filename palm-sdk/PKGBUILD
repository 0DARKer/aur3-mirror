# Maintainer: Thomas Wei√üschuh <thomas_weissschuh || lavabit || com>
# Contributor: Ryan Corder <ryanc@greengrey.org>

pkgname=palm-sdk
pkgver=3.0.0
_majorver=3.0.0.643
pkgrel=4
pkgdesc="WebOS SDK: emulator-image, cmd-line tools, framework, samples, etc."
url="http://developer.palm.com/index.php"
arch=('i686' 'x86_64')
license=("custom")
depends=('java-environment>=6' 'virtualbox<=4.0' 'virtualbox>=3.0')
optdepends=('palm-novacom=1.0.76' 'palm-sdk-oldimages: for support of older phones')
options=(!strip)
source=("http://cdn.downloads.palm.com/sdkdownloads/${_majorver}/sdkBinaries/palm-sdk_${pkgver}-svn486609-pho643_i386.deb"
        "palm-sdk.install")
install=('palm-sdk.install')
sha1sums=('6a97b32b6231da9b478f29487f94a5e0f1be8a39'
          '918845f54d0d86806bfc6fe74ba55bc2b78a93e2')

build() {

    cd $srcdir

    tar zxvf ${srcdir}/data.tar.gz -C $pkgdir

    rm -rf ${pkgdir}/usr/local
    rm -rf ${pkgdir}/usr/share

    mkdir ${pkgdir}/usr/bin
    mkdir -p ${pkgdir}/usr/share/licenses/${pkgname}

    ln -s /opt/PalmSDK/Current/share/documentation/legal/* ${pkgdir}/usr/share/licenses/${pkgname}

    ln -s /opt/PalmSDK/Current/bin/palm-{emulator,generate,install,launch,log,package,worm}     ${pkgdir}/usr/bin/
    ln -s /opt/PalmSDK/Current/bin/palminspector                                                ${pkgdir}/usr/bin/
    # sdl-config conflicts with binary from 'sdl'
    #ln -s /opt/PalmPDK/Current/bin/{devprofile,nova-browser,pdk-device-install,pdk-ssh-init,sdl-config} ${pkgdir}/usr/bin/
}
