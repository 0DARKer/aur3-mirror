pkgname=vim-unite-outline
pkgver=0.5.0
pkgrel=1
pkgdesc="Unite source for outlines"
arch=('any')
url="https://github.com/Shougo/unite-outline"
license=('MIT')
depends=('vim-unite')
groups=('vim-plugins')
install=vimdoc.install
source=("https://github.com/Shougo/unite-outline/archive/v$pkgver.tar.gz")
sha1sums=('dd65db9db3082d1c0dcb4ad52a03ceff06a5782b')

package() {
	cd "$srcdir/unite-outline-$pkgver"

	installpath="${pkgdir}/usr/share/vim/vimfiles"

	sed -i -e "s/vital#of('unite/vital#of('unite.vim/g" \
		autoload/unite/sources/outline/modules/ctags.vim

	install -d $installpath/autoload/unite/{filters,sources}
	install -d $installpath/autoload/unite/sources/outline/{defaults,misc,modules}
	install -Dm644 autoload/unite/filters/* $installpath/autoload/unite/filters/
	install -Dm644 autoload/unite/sources/outline.vim $installpath/autoload/unite/sources/outline.vim
	install -Dm644 autoload/unite/sources/outline/util.vim $installpath/autoload/unite/sources/outline/util.vim
	install -Dm644 autoload/unite/sources/outline/defaults/* $installpath/autoload/unite/sources/outline/defaults/
	install -Dm644 autoload/unite/sources/outline/misc/* $installpath/autoload/unite/sources/outline/misc/
	install -Dm644 autoload/unite/sources/outline/modules/* $installpath/autoload/unite/sources/outline/modules/
	install -Dm644 doc/unite-outline.txt $installpath/doc/unite-outline.txt
}
