# Contributor: Julian Pidancet <pidanc_j@epita.fr>

pkgname=tpm_keyring2
pkgver=0.1
pkgrel=1
pkgdesc="A key manager for TPM based eCryptfs keys"
depends=('trousers' 'openssl' 'swig' 'python')
makedepends=()

url="http://sourceforge.net/projects/trousers"
license="GPL"
arch=('i686')

source=(http://surfnet.dl.sourceforge.net/sourceforge/trousers/${pkgname}-${pkgver}.tar.gz \
  python-path.patch)
md5sums=('b7d72616a4bf7ad7893b13ffcba8e0a5'
         'd381db858bd8fe2738af0f1876cd1dff')

build() {
  cd ${startdir}/src/
  patch -p 0 < python-path.patch || return 1
  cd ${startdir}/src/${pkgname}-${pkgver}
  make || return 1

  install -d $startdir/pkg/usr/lib/python2.5/site-packages/
  install _tpm_keyring_util.so $startdir/pkg/usr/lib/python2.5/site-packages/
  install -m0644 tpm_keyring_util.py $startdir/pkg/usr/lib/python2.5/site-packages/
  install -d $startdir/pkg/usr/bin/
  install tpm_keyring $startdir/pkg/usr/bin/
  install -d $startdir/pkg/usr/share/fonts/TTF/
  install -m0644 sandoval.ttf $startdir/pkg/usr/share/fonts/TTF/
}

