--- server.xml.old	2008-08-13 15:58:20.000000000 +0300
+++ server.xml	2008-08-13 15:59:42.000000000 +0300
@@ -22,14 +22,16 @@
 <Server port="8005" shutdown="SHUTDOWN">
 
   <!--APR library loader. Documentation at /docs/apr.html -->
-  <Listener className="org.apache.catalina.core.AprLifecycleListener" SSLEngine="on" />
+  <Listener className="org.apache.catalina.core.AprLifecycleListener" SSLEngine="off" />
   <!--Initialize Jasper prior to webapps are loaded. Documentation at /docs/jasper-howto.html -->
   <Listener className="org.apache.catalina.core.JasperListener" />
   <!-- Prevent memory leaks due to use of particular java/javax APIs-->
   <Listener className="org.apache.catalina.core.JreMemoryLeakPreventionListener" />
   <!-- JMX Support for the Tomcat server. Documentation at /docs/non-existent.html -->
+  <!--
   <Listener className="org.apache.catalina.mbeans.ServerLifecycleListener" />
   <Listener className="org.apache.catalina.mbeans.GlobalResourcesLifecycleListener" />
+  -->
 
   <!-- Global JNDI resources
        Documentation at /docs/jndi-resources-howto.html
@@ -53,11 +55,8 @@
   <Service name="Catalina">
 
     <!--The connectors can use a shared executor, you can define one or more named thread pools-->
-    <!--
     <Executor name="tomcatThreadPool" namePrefix="catalina-exec-"
-        maxThreads="150" minSpareThreads="4"/>
-    -->
-
+        maxThreads="150" minSpareThreads="2"/>
 
     <!-- A "Connector" represents an endpoint by which requests are received
          and responses are returned. Documentation at :
@@ -67,15 +66,8 @@
          Define a non-SSL HTTP/1.1 Connector on port 8080
     -->
     <Connector port="8080" protocol="HTTP/1.1"
-               connectionTimeout="20000"
-               redirectPort="8443" />
-    <!-- A "Connector" using the shared thread pool-->
-    <!--
-    <Connector executor="tomcatThreadPool"
-               port="8080" protocol="HTTP/1.1"
-               connectionTimeout="20000"
-               redirectPort="8443" />
-    -->
+               connectionTimeout="20000" executor="tomcatThreadPool" useBodyEncodingForURI="true"/>
+
     <!-- Define a SSL HTTP/1.1 Connector on port 8443
          This connector uses the JSSE configuration, when using APR, the
          connector should be using the OpenSSL style configuration
@@ -83,11 +75,15 @@
     <!--
     <Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true"
                maxThreads="150" scheme="https" secure="true"
-               clientAuth="false" sslProtocol="TLS" />
+               clientAuth="false" sslProtocol="TLS"
+               keystoreFile="${user.home}/.keystore" keystorePass="changeit"
+               connectionTimeout="20000" executor="tomcatThreadPool" useBodyEncodingForURI="true"/>
     -->
 
     <!-- Define an AJP 1.3 Connector on port 8009 -->
+    <!--
     <Connector port="8009" protocol="AJP/1.3" redirectPort="8443" />
+    -->
 
 
     <!-- An Engine represents the entry point (within Catalina) that processes
@@ -125,9 +121,10 @@
       <!-- Define the default virtual host
            Note: XML Schema validation will not work with Xerces 2.2.
        -->
-      <Host name="localhost"  appBase="webapps"
+      <Host name="localhost" appBase="/srv/webapps"
             unpackWARs="true" autoDeploy="true"
-            xmlValidation="false" xmlNamespaceAware="false">
+            xmlValidation="false" xmlNamespaceAware="false"
+            workDir="/var/tmp/Catalina/localhost">
 
         <!-- SingleSignOn valve, share authentication between web applications
              Documentation at: /docs/config/valve.html -->
