# Maintainer: Ner0

pkgname=chromium-pepper-flash
pkgver=11.3.31.109
pkgrel=1
pkgdesc="Google Chrome's Pepper Flash plugin for Chromium"
arch=('i686' 'x86_64')
_arch="$CARCH"
[ "$CARCH" = 'i686' ] && _arch='i386'
url="http://wiki.archlinux.org/index.php/Chromium#Flash_Player"
license=('custom')
optdepends=('pulseaudio-alsa: For PulseAudio users')
makedepends=('wget')
install=pepper.install
source=('chromium.default')
md5sums=('4917876993a9e14e076204f98ab18a8f')

[ -f /usr/bin/chromium-browser ] && _DEFAULT=/etc/chromium-browser/default
[ -f /usr/bin/chromium ] && _DEFAULT=/etc/chromium/default

package() {
  wget "http://dl.google.com/dl/linux/direct/google-chrome-unstable_current_${_arch}.rpm"

  msg "Extracting Sources..."
  bsdtar -xf google-chrome-unstable_current_${_arch}.rpm opt/google/chrome/PepperFlash

  if [ ! -f "$_DEFAULT" ]; then
    install -Dm644 "$srcdir/chromium.default" "$pkgdir/$_DEFAULT"
  fi

  install -dm755 "$pkgdir/usr/lib/PepperFlash"
  for i in opt/google/chrome/PepperFlash/*; do install -m644 "$i" "$pkgdir/usr/lib/PepperFlash"; done
}
