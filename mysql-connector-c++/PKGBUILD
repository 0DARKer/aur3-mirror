#Contributor: "Arjan Gelderblom <arjan.gelderblom@game-creators.nl>"
pkgname=mysql-connector-c++
pkgver=1.0.5
pkgrel=1
pkgdesc="MySQL Connector/C++ is a MySQL database connector for C++"
arch=(i686)
url="http://dev.mysql.com/doc/refman/5.1/en/connector-cpp.html"
license=('gpl')
#groups=()
depends=('mysql-clients')
makedepends=('cmake>=2.4' 'glibc>=2.2.3')
#provides=()
#optdepends=()
#conflicts=()
#replaces=()
#backup=()
#options=()
install=
source=(http://download.softagency.net/MySQL/Downloads/Connector-C++/$pkgname-$pkgver.tar.gz)
#noextract=()
md5sums=('f0ad6655f3ea7db8df3215fa928cba03') #generate with 'makepkg -g'

build() {
  cd "$srcdir/$pkgname-$pkgver"
  
  # remove file that is included in release but should be generated by cmake
  rm cppconn/config.h
  # remove some possible old cmake cache
  rm CMakeCache.txt
  
  # patch for use with gcc-4.4
  patch -p0 < ${startdir}/mysql-connector-cpp-1.0.5-gcc44.patch

  cmake -G "Unix Makefiles" -D CMAKE_INSTALL_PREFIX=/usr .

  make clean
  make || return 1
  make DESTDIR="$pkgdir/" install
  
  install -D ANNOUNCEMENT $pkgdir/usr/share/licenses/$pkgname/ANNOUNCEMENT
  rm $pkgdir/usr/ANNOUNCEMENT
  install -D COPYING $pkgdir/usr/share/licenses/$pkgname/COPYING
  rm $pkgdir/usr/COPYING
  install -D README $pkgdir/usr/share/licenses/$pkgname/README
  rm $pkgdir/usr/README
}

# vim:set ts=2 sw=2 et:
