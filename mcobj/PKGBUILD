# Maintainer: Limao Luo <luolimao@gmail.com>

pkgname=mcobj
pkgver=0.14
pkgrel=1
pkgdesc="Exports minecraft worlds to .obj or .prt -- premade binaries"
arch=(i686 x86_64)
if [[ $CARCH == "x86_64" ]]; then
    _arch=x64
else
    _arch=x86
fi
url=https://github.com/quag/mcobj/
license=(BSD)
makedepends=(p7zip)
optdepends=(minecraft)
conflicts=($pkgname-git)
options=(!strip)
source=(https://github.com/downloads/quag/$pkgname/$pkgname-$pkgver-linux-$_arch.7z)
noextract=($pkgname-$pkgver-linux-$_arch.7z)
sha256sums=('9e9cabf7dab7f5882de9935fe82a13bd1c0d9bd5de2fd2c2dfa1f92b5859bdb3')
sha512sums=('e1b91ed95138ab85d283797653be4aee83cb8996e3d2d14149d7d0907fcf16d4e658f7fd2b574a81bb9d5b21f060fae6834866bb4f0cecd6ad5a524dca778d93')

package() {
    cd "$srcdir"
    rm -rf $pkgname-src/
    mkdir $pkgname-src/
    7z e -o$pkgname-src/ $pkgname-$pkgver-linux-$_arch.7z
    cd $pkgname-src/

    install -Dm755 mcobj "$pkgdir"/usr/share/$pkgname/$pkgname
    install -Dm644 blocks.json "$pkgdir"/usr/share/$pkgname/blocks.json

    install -d "$pkgdir"/usr/bin/
    ln -s /usr/share/mcobj/mcobj "$pkgdir"/usr/bin/mcobj
}
