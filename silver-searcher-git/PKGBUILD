# Maintainer: Limao Luo <luolimao@gmail.com>

_pkgname=silver-searcher
pkgname=$_pkgname-git
pkgver=20120914
pkgrel=1
pkgdesc="The Silver Searcher: An attempt to make something better than ack, which itself is better than grep."
arch=(any)
url="https://github.com/ggreer/the_silver_searcher"
license=(Apache)
makedepends=(git)

_gitroot="https://github.com/ggreer/the_silver_searcher.git"
_gitname="the_silver_searcher"

build() {
    cd "$srcdir"
    msg "Connecting to GIT server...."

    if [[ -d $_gitname/.git ]] ; then
        pushd $_gitname && git pull origin
        msg "The local files are updated."
        popd
    else
        git clone $_gitroot
    fi

    msg "GIT checkout done or server timeout"
    msg "Starting make..."

    rm -rf $_gitname-build/
    cp -r $_gitname/ $_gitname-build/
    cd $_gitname-build/

    ./build.sh
}

package() {
    cd "$srcdir"/$_gitname-build/
#    make DESTDIR="$pkgdir" install
}
