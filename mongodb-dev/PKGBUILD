# Maintainer: Greg White <gwhite@kupulau.com> 

pkgname=mongodb-dev
pkgver=2.8.0.rc5
_mongorel=2.8.0-rc5
pkgrel=1
pkgdesc='MongoDB - development version'
arch=('x86_64')
url='http://www.mongodb.org'
license=('AGPL3')
depends=('pcre' 'snappy' 'openssl' 'gperftools' 'libsasl' 'boost-libs')
checkdepends=('python2-pymongo')
optdepends=('libpcap: needed for mongosniff')
provides=('mongodb')
conflicts=('mongodb')
backup=('etc/mongodb.conf')
install=mongodb.install
source=("https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-2.8.0-rc5.tgz"
        'mongodb.conf' 'mongodb.service')

package() {
  install -Dm644 "$srcdir/mongodb.conf" "$pkgdir/etc/mongodb.conf"
  install -Dm644 "$srcdir/mongodb.service" "$pkgdir/usr/lib/systemd/system/mongodb.service"
  install -dm700 -o mongodb -g daemon "$pkgdir/var/lib/mongodb"
  install -dm755 -o mongodb -g daemon "$pkgdir/var/log/mongodb"

  cp -r "$srcdir/mongodb-linux-x86_64-${_mongorel}/bin" "$pkgdir/usr"
}
md5sums=('ee1db09c9d072ccc03caaa2ad773371e'
         '4839fe1d638187ca3226e8267b947318'
         '96ab4517b48974ce0e566d9746a75a4f')
