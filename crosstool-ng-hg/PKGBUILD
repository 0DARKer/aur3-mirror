# Maintainer: Serge Ziryukin <ftrvxmtrx@gmail.com>

pkgname=crosstool-ng-hg
pkgver=2265
pkgrel=2
pkgdesc="crosstool-NG aims at building toolchains."
arch=('i686' 'x86_64')
url="http://ymorin.is-a-geek.org/projects/crosstool"
license=('GPL')
depends=('bash>=3.0' 'make>=3.80' 'cvs' 'ncurses')
conflicts=('crosstool-ng')
makedepends=('mercurial')

_hgroot=http://ymorin.is-a-geek.org/hg
_hgrepo=crosstool-ng

build () {
  cd "${srcdir}"

  rm -rf ${_hgrepo}-build || return 1
  hg clone ${_hgrepo} ${_hgrepo}-build || return 2
  cd ${_hgrepo}-build || return 3

  ./configure --prefix=/usr || return 4
  make || return 5
}

package () {
  cd "${srcdir}/${_hgrepo}-build"

  DESTDIR="${pkgdir}" make install || return 1
}
