# Maintainer: Michael Duell <akurei@luamail.net>
pkgname=enigmail-64-bin
_pkg_main_ver=1.1
pkgver=${_pkg_main_ver}.2
pkgrel=4
pkgdesc="The Mozilla Thunderbird GnuPG encryption plugin for 64-bit systems. Binary version."
arch=('x86_64')
url="http://www.mozilla-enigmail.org/"
license=('MPL')
_tb_min_ver="3.1"
depends=('thunderbird>=${_tb_min_ver}' 'xulrunner>=1.9.2')
makedepends=('unzip')
provides=('enigmail')
conflicts=('enigmail' 'enigmail-cvs')
source=(http://www.mozilla-enigmail.org/download/release/${_pkg_main_ver}/enigmail-${pkgver}-linux-x86_64-gcc4.5.0.xpi)
sha512sums=('4dff2af0df0ffde3d68e046448bfff4de795e971db6088042898cd519dd3aad7560cd80332825d653c2e37140f6e7ff47d58a394fc25580d244f0084f53cc892')


build() {
  cd "$srcdir/"
  unzip -u "${srcdir}/enigmail-1.1.2-linux-x86_64-gcc4.5.0.xpi" -d "${srcdir}/enigmail"
  _emid=`grep em:id ${srcdir}/enigmail/install.rdf | head -n1 | sed 's/.*>\(.*\)<.*/\1/'`
  mkdir -p "${pkgdir}/usr/lib/thunderbird-${_tb_min_ver}/extensions/"
  mv "enigmail" "${pkgdir}/usr/lib/thunderbird-${_tb_min_ver}/extensions/${_emid}"
}


# vim:set ts=2 sw=2 et:
