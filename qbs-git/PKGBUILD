# Maintainer: Anatoliy Anischovich <lin.aaa.lin at gmail.com>
pkgname=qbs-git
conflicts=('qbs')
provides=('qbs')
pkgver=0.3.0.28
pkgrel=1
pkgdesc='A tool that helps simplify the build process'
arch=('i686' 'x86_64')
url="http://qt-project.org/wiki/qbs"
license=('LGPL2.1')
depends=('qt5-base' 'qt5-script')
makedepends=('git')

_gitname='qbs'

source=('git://gitorious.org/qt-labs/qbs.git')
md5sums=('SKIP')

build() {
  cd ${_gitname}
  qmake -r qbs.pro
  make
}

pkgver() {
  cd $_gitname
  # Use the tag of the last commit
  git describe --always | sed -r -e 's/-/./g' -e 's/v(.*)\.g.*/\1/'
}

package(){
  cd ${srcdir}/${_gitname}
  make DESTDIR="${pkgdir}/usr" INSTALL_ROOT="${pkgdir}/usr" install
}
