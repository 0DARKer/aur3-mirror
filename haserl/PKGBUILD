# Contributor: Kyle Keen <keenerd@gmail.com>
pkgname=haserl
pkgver=0.9.27
pkgrel=1
pkgdesc="Tiny dynamic CGI with your shell or Lua."
arch=('any')
url="http://haserl.sourceforge.net"
license=('GPL2')
depends=('lua' 'sh')
makedepends=()
source=(http://downloads.sourceforge.net/$pkgname/$pkgname-$pkgver.tar.gz)
md5sums=('1f692db8939858338a44e25d0190aa9e')

build() {
  cd "$srcdir"/$pkgname-$pkgver
  ./configure --enable-bash-extensions prefix="$pkgdir/usr"
  make
  #make install is too easy
  install -d "$pkgdir/usr/bin"
  install -d "$pkgdir/usr/share/man/man1"
  install -Dm644 doc/haserl.1 "$pkgdir/usr/share/man/man1/"
  gzip -f "$pkgdir/usr/share/man/man1/haserl.1"
  install -Dm755 src/haserl "$pkgdir/usr/bin/haserl-sh"

  ./configure --with-lua prefix="$pkgdir/usr" 
  make
  install -Dm755 src/haserl "$pkgdir/usr/bin/haserl-lua"

  ln -s "/usr/bin/haserl-sh" "$pkgdir/usr/bin/haserl"
}


