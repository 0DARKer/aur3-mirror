# Maintainer: Michalis Georgiou <mechmg93@gmail.comr>

pkgname=ttf-google-webfonts
pkgver=538
pkgrel=1
pkgdesc="Various truetype fonts from Google Webfonts Project"
arch=('any')
url="http://code.google.com/webfonts"
license=('various')
depends=('fontconfig' 'xorg-fonts-encodings')
conflicts=('jsmath-fonts' 'ttf-droid' 'ttf-cardo' 'ttf-anonymous-pro' 'ttf-ubuntu-font-family' 'ttf-inconsolata' 'ttf-inconsolata-g' 'ttf-oldstandard' 'ttf-andika' 'ttf-ptsans' 'ttf-pt-sans' 'otf-goudy' 'ttf-cantarell' 'ttf-chromeos-fonts')
makedepends=('mercurial')
install=ttf.install
source=()
_hgroot="https://googlefontdirectory.googlecode.com/hg/"
_hgrepo="googlefontdirectory"

build() {
        cd "$srcdir"
	msg "Connecting to Mercurial server...."
if [ -d $_hgrepo ] ; then
    cd $_hgrepo
    hg pull -u || return 1
    msg "The local files are updated."
  else
    hg clone $_hgroot $_hgrepo || return 1
  fi
        msg "Mercurial checkout done or server timeout"
        install -d $pkgdir/usr/share/fonts/TTF/ || return 1
        find $srcdir/${_hgrepo}/ -name "*.ttf" -exec install -m644 {} $pkgdir/usr/share/fonts/TTF/ \; || return 1
}
