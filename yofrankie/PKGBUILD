# Maintainer: Gadget3000 <gadget3000 at msn dot com>
# Contributer: N30N <archlinux@alunamation.com>

pkgname=yofrankie
pkgver=1.1
pkgrel=3
pkgdesc="A 3D platform game based on the bully rodent in Big Buck Bunny"
url="http://www.yofrankie.org/"
license=("CCPL")
arch=('any')
depends=('blender2.4-bin')
makedepends=('imagemagick')
conflicts=("yofrankie-demo-glsl")
source=("yofrankie.desktop" \
	"yofrankie.png" \
	"yofrankie.sh" \
	"yofrankie.blend" \
	"http://alunamation.com/archlinux/yofrankie_${pkgver/./_}b_bge.zip")
	# "http://download.blender.org/apricot/yofrankie_${pkgver/./_}b_bge.zip")
md5sums=("47f89763fdfd354822be5876a10c0260" \
	"0c80203d56bd4bbbc5f1e74c8e32a54a" \
	"01311629480aad08a2a8b76ef96d62ef" \
	"294b805de0c44317dd5a991083937da8" \
	"863924c515b483adfa5f63e8d982b5c2")

build() {
	cd ${srcdir}
	install -D -m755 yofrankie.sh ${pkgdir}/usr/bin/yofrankie
	install -D -m644 yofrankie.desktop ${pkgdir}/usr/share/applications/yofrankie.desktop
	install -D -m644 yofrankie.png ${pkgdir}/usr/share/pixmaps/yofrankie.png
	# or if you want the ugly icon...
	# install -D -m644 yofrankie_${pkgver/./_}b_bge/dist/yofrankie.png ${pkgdir}/usr/share/pixmaps/yofrankie.png
	install -D -m644 yofrankie.blend ${pkgdir}/usr/share/yofrankie/yofrankie.blend

	cd yofrankie_${pkgver/./_}b_bge
	directories=(
		"audio"
		"levels"
		"levels/level_scripts"
		"levels/menu_scripts"
		"levels/selector_scripts"
		"chars"
		"chars/frankie_scripts"
		"chars/sheep_scripts"
		"chars/textures"
		"menus"
		"effects"
		"effects/effects_scripts"
		"props"
		"hud"
		"hud/hud_scripts"
		"textures"
		"textures/credits"
		"textures/level_lighthouse"
		"textures/level_nut"
		"textures/level_nut/raw"
	)

	for ((i=0; i< ${#directories[@]}; i++)); do
	install -d ${pkgdir}/usr/share/yofrankie/${directories[i]}
	install -m644 -t ${pkgdir}/usr/share/yofrankie/${directories[i]} ${directories[i]}/*.*
	done
}
