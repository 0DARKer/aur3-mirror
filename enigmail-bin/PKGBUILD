# Maintainer: Michael DÃ¼ll <mail@akurei.me> PGP-Key: D6777412 - Fingerprint: C972 8B50 9411 BBE1 5CA5  9906 5103 71F3 D677 7412

pkgname=enigmail-bin
_pkg_main_ver=1.5
pkgver=${_pkg_main_ver}
pkgrel=1
pkgdesc="The Mozilla Thunderbird GnuPG encryption plugin for both 32 and 64 bit systems. Binary version."
arch=('i686' 'x86_64')
url="http://www.mozilla-enigmail.org/"
license=('MPL')
_tb_min_ver="17.0"
depends=("thunderbird>=${_tb_min_ver}")
makedepends=('unzip')
provides=('enigmail')
conflicts=('enigmail' 'enigmail-cvs')
replaces=('enigmail-64-bin')
options=(!strip)
install='enigmail-bin.install'
source=(http://www.mozilla-enigmail.org/download/release/${_pkg_main_ver}/enigmail-${pkgver}-tb+sm.xpi)
noextract=(enigmail-${pkgver}-sm+tb.xpi)

build() {
  cd "$srcdir/"
  unzip -qo *.xpi
  _eid=$(grep "<em:id>" install.rdf | head -n 1 |cut -f 2 -d \>|cut -f 1 -d \<)
  mkdir -p "${pkgdir}/usr/lib/thunderbird/extensions/"
  unzip -qo -d "${pkgdir}/usr/lib/thunderbird/extensions/${_eid}" *.xpi
}

sha512sums=('f9cce65a856b1b87b09d57fb54ba85ec4d2be8ce51c19e37f0154a3f66a7150898a61d2046ab2a257aac9ee40eabad511446e8ace9e4a3be8c2c5ff070d33d75')
