# Contributor: Ricardo Funke Ormieres <ricardo.funke at gmail.com>
pkgname=eclipse-classic-galileo
_pkgname=eclipse
pkgver=3.5.2
pkgrel=4
pkgdesc="An IDE for Java and other languages - Galileo Sr2"
arch=("i686" "x86_64")
url="http://www.eclipse.org/"
license=('EPL/1.1')
depends=('java-runtime')
if [ "$CARCH" = "x86_64" ]; then
source=('http://www.eclipse.org/downloads/download.php?file=/eclipse/downloads/drops/R-3.5.2-201002111343/eclipse-SDK-3.5.2-linux-gtk-x86_64.tar.gz')
md5sums=(54e2ce0660b2b1b0eb4267acf70ea66d)
else
source=('http://www.eclipse.org/downloads/download.php?file=/eclipse/downloads/drops/R-3.5.2-201002111343/eclipse-SDK-3.5.2-linux-gtk.tar.gz')
md5sums=(bde55a2354dc224cf5f26e5320e72dac)
fi
install="eclipse.install"

build() {
  cd "$srcdir"
  mkdir -p "$pkgdir/opt/"
  mv "$_pkgname" "$pkgdir/opt/" || return 1

(
cat <<EOF
[Desktop Entry]
Version=${pkgver}
Name=Eclipse Classic - Galileo
Icon=eclipse
Comment=${pkgdesc}
Exec=/opt/eclipse/eclipse
Terminal=false
Type=Application
Categories=Development
EOF
) > ${startdir}/eclipse.desktop

  mkdir -p "$pkgdir/usr/share/applications/"
  mkdir -p "$pkgdir/usr/share/pixmaps/"
  install "$startdir/eclipse.desktop" "$pkgdir/usr/share/applications/" || return 1
  install "$pkgdir/opt/eclipse/icon.xpm" "$pkgdir/usr/share/pixmaps/eclipse.xpm" || return 1
}
