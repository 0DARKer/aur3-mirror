# Maintainer: Frikilinux <frikilinux at gmail.com>

pkgname=gnome-shell-extension-appindicator-git
pkgver=37.cade51d
pkgrel=1
pkgdesc="Integrates AppIndicators into Gnome Shell"
arch=('any')
url="https://github.com/rgcjonas/gnome-shell-extension-appindicator"
license=('GPL')
depends=('gnome-shell' 'libappindicator' 'libappindicator3')
makedepends=('git')
optdepends=()
install=${pkgname%-*}.install
source=("git://github.com/rgcjonas/gnome-shell-extension-appindicator.git")
sha256sums=('SKIP')

pkgver() {
  cd "${srcdir}"/${pkgname%-*}
	echo $(git rev-list --count master).$(git rev-parse --short master)
}

build() {
  cd "${srcdir}"/${pkgname%-*}
  make
}

package() {
  cd "${srcdir}"/${pkgname%-*}

	for i in .js .json .css
		do
		find . -type f -name \*$i -exec install -Dm644 '{}' "${pkgdir}/usr/share/gnome-shell/extensions/appindicatorsupport@rgcjonas.gmail.com/{}" \;
	done
		find . -type f -name \*.xml -exec install -Dm644 '{}' "${pkgdir}/usr/share/glib-2.0/{}" \;
		find . -type f -name \*.mo -exec install -Dm644 '{}' "${pkgdir}/usr/share/{}" \;
}
