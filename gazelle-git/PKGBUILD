pkgname=gazelle-git
pkgver=0
pkgrel=1
pkgdesc="a system for building fast, reusable parsers"
arch=('i686' 'x86_64')
url="http://www.reverberate.org/gazelle/"
license=('BSD')
depends=('lua' 'graphviz')
makedepends=('lua' 'graphviz' 'asciidoc')
provides=('gazelle')
options=('!strip')
source=(gazelle.patch)
md5sums=('fca5e208ca507004ddfcdedcf4217b72')
[[ $CARCH = x86_64 ]] && export HOSTTYPE=x86_64 || export HOSTTYPE=x86_32

_gitroot="git://github.com/haberman/gazelle.git"
_gitname=gazelle

build() {
# fetch sources
    if [ -d $SRCDEST/$_gitname ] ; then
        cd $SRCDEST/$_gitname && git pull origin
    else
        cd $SRCDEST && git clone $_gitroot $_gitname
    fi
    rm -rf $srcdir/$_gitname
    cp -a $SRCDEST/$_gitname $srcdir/$_gitname
    cd $srcdir/$_gitname || return 1
# patch
    patch -p1 < $srcdir/gazelle.patch
# build
    make
    make doc
# install
    make install DESTDIR=$pkgdir
}
