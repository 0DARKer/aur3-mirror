# Contributor: Minimalist <minimalist@lavabit.com>

pkgname=perl-mongodb
pkgver=0.43
pkgrel=1
pkgdesc="MongoDB - Mongo Driver for Perl"
arch=('any')
url="http://search.cpan.org/~kristina/MongoDB-$pkgver/"
license=('PerlArtistic')
depends=('perl' 'perl-any-moose' 'perl-boolean' 'perl-class-method-modifiers' 'perl-datetime' 'perl-digest-md5' 'perl-tie-ixhash' 'perl-try-tiny' 'perl-data-types' 'perl-file-temp' 'perl-digest-md5' 'perl-json' 'perl-file-slurp')
makedepends=('perl-test-exception')
options=(!emptydirs)
source=(http://search.cpan.org/CPAN/authors/id/K/KR/KRISTINA/MongoDB-$pkgver.tar.gz)
md5sums=('e7e25e1cd92cad299935be7e7661e9b0')

build() {
  cd "$srcdir/MongoDB-$pkgver"

  # install module in vendor directories.
  PERL_MM_USE_DEFAULT=1 perl Makefile.PL INSTALLDIRS=vendor || return 1
  make || return 1
  make test || return 1
  make install DESTDIR="$pkgdir/" || return 1

}
