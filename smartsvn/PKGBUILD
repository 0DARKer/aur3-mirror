#Maintainer: Rene Peinthor <peinthor@gmail.com>
pkgname=smartsvn
pkgver=6.6.4
_pkgver=6_6_4
pkgrel=1
pkgdesc="A Subversion(SVN) GUI client written in Java"
arch=("i686" "x86_64")
url="http://www.syntevo.com/smartsvn/index.html"
license=('smartsvn')
depends=("jre")
makedepends=("links")
provides=(smartsvn=$pkgver)
source=(smartsvn.desktop)
install="smartsvn.install"
md5sums=('caf0387a86dccae88f7e4b46cf33f36b')
smartsvnmd5sum='22cca5caaffef5c6f97d8f848285e816'


extracted="$pkgname-$_pkgver"

build() {
	cd "$srcdir"
	warning "Downloading of smartsvn is a bit troublesome and uses links(text browser) as syntevo doesn't allow direct download links"
	warning "We will now start links to download smartsvn"
	warning "Please accept the license and proceed to the download page (with enter)"
	warning "Then just press enter on the 'click here' and save the file to the default location and with the default file name"
	warning "After the download finished you can quit links with 'q'"
	read -p "Press a key to start links"
	links "http://www.syntevo.com/smartsvn/download.html?file=smartsvn/smartsvn-generic-${_pkgver}.tar.gz"

	echo "${smartsvnmd5sum} *smartsvn-generic-${_pkgver}.tar.gz" | md5sum -c || error "md5sum doesn't match"

	tar xzf smartsvn-generic-${_pkgver}.tar.gz
}

package() {
	cd "$srcdir"

	install -D -m644 "${extracted}"/license.html "${pkgdir}/usr/share/licenses/${pkgname}/license.html"
	mkdir -p "${pkgdir}"/opt
	mv "${extracted}" ${pkgdir}/opt/$pkgname || return 1

	install -D -m644 smartsvn.desktop "${pkgdir}"/usr/share/applications/smartsvn.desktop
}
