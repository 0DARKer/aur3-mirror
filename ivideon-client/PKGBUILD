# Maintainer: Elovsky Valentin (evvsoft@gmail.com)
# Contributor: Shalygin Konstantin (kostya@opentech.ru)

pkgname='ivideon-client'
pkgver='5.7.0'
pkgrel='121'
pkgdesc='Ivideon Client'
arch=(i686 x86_64)
url=('http://ivideon.com/')
license=('freeware')
depends=('qt5-base' 'qt5-script' 'qt5-svg' 'openssl' 'wget' 'vlc')

if [[ "$CARCH" == 'i686' ]]; then
  source+=("http://packages.ivideon.com/ubuntu/pool/non-free/i/${pkgname}/${pkgname}_${pkgver}_i386.deb")
  sha256sums+=('ca1d35c0d6e27ae73ea46e1b584982a40240e984345c43f08efea38663368320')
fi

if [[ "$CARCH" == 'x86_64' ]]; then
  source+=("http://packages.ivideon.com/ubuntu/pool/non-free/i/${pkgname}/${pkgname}_5.7.0.121_amd64.deb")
  sha256sums+=('91d2eb23e11eb0c9e3d0348ed65140ff31d20376f4a62326e7bde87da001af7b')
fi

build() {
  cd "$srcdir"
  bsdtar xf "$srcdir/data.tar.gz"
}

package() {
  cp -dpr --no-preserve=ownership "$srcdir/usr" "$pkgdir"
  cp -dpr --no-preserve=ownership "$srcdir/opt" "$pkgdir"
}