# Maintainer: Elovsky Valentin (evvsoft@gmail.com)
# Contributor: Shalygin Konstantin (kostya@opentech.ru)

pkgname='ivideon-client'
pkgver='5.7.0'
pkgrel='123'
pkgdesc='Ivideon Client'
arch=(i686 x86_64)
url=('http://ivideon.com/')
license=('freeware')
depends=('qt5-base' 'qt5-script' 'qt5-svg' 'openssl' 'wget' 'vlc')
install='ivideon.install'
source='ivideon.install'
sha256sums='640738dc4baf89196ffd9c1740d5fc5a548b8fed40b5401734785b26d5d094d2'

if [[ "$CARCH" == 'i686' ]]; then
  source+=("http://packages.ivideon.com/ubuntu/pool/non-free/i/${pkgname}/${pkgname}_${pkgver}.${pkgrel}_i386.deb"
  "http://packages.ivideon.com/ubuntu/pool/non-free/libq/libqt5-ivideon/libqt5-ivideon_5.2.1.5_i386.deb")
  sha256sums+=('4a50133b018f0bb881522d682f5087bdc2beab6f42028979c24bd05e107ffd8f'
  'd55a4148ace2b513f6a541d25aaec5bdf54c78332011d02fd14be742b217b05f')
fi

if [[ "$CARCH" == 'x86_64' ]]; then
  source+=("http://packages.ivideon.com/ubuntu/pool/non-free/i/${pkgname}/${pkgname}_${pkgver}.${pkgrel}_amd64.deb"
  "http://packages.ivideon.com/ubuntu/pool/non-free/libq/libqt5-ivideon/libqt5-ivideon_5.2.1.5_amd64.deb")
  sha256sums+=('bc6b4fa37da3081cd2667e4571e51aa663d31ee2de5e68b7f97a0a8c37e2c703'
  '5002a7c7406e8f0bc03428410dd0e354f69547a9abd7bfb431c2a4bb097420ef')
fi

build() {
  cd "$srcdir"
  bsdtar xf "$srcdir/data.tar.gz"
  bsdtar xf "$srcdir/data.tar.xz"
}

package() {
  cp -dpr --no-preserve=ownership "$srcdir/etc" "$pkgdir"
  cp -dpr --no-preserve=ownership "$srcdir/usr" "$pkgdir"
  cp -dpr --no-preserve=ownership "$srcdir/opt" "$pkgdir"
}