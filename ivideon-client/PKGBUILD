# Maintainer: Elovsky Valentin (evvsoft@gmail.com)
# Contributor: Shalygin Konstantin (kostya@opentech.ru)

pkgname='ivideon-client'
pkgver='6.0.1'
pkgrel='114'
pkgdesc='Ivideon Client'
arch=('i686' 'x86_64')
url=('http://ivideon.com/')
license=('freeware')
depends=('qt5-base' 'qt5-script' 'qt5-svg' 'openssl' 'wget' 'vlc')
install='ivideon.install'
source=('ivideon.install' 'ivideon-client.desktop')
sha256sums=('eea7144ef39a95fac6df2e7be9140b56c396e799aa43d7a8f74bc8087561564b' 'f81feb64a211f611a7b6ad3dc5d0b57d2fdd934c3c90dc421ed9c8f5f5b55f1d')

if [[ "$CARCH" == 'i686' ]]; then
  source+=("http://packages.ivideon.com/ubuntu/pool/non-free/i/${pkgname}/${pkgname}_${pkgver}.${pkgrel}_i386.deb")
  sha256sums+=('fecfd331003e2911566c82b8172859dedf041828b3aa48a765c22f808036be10')
fi

if [[ "$CARCH" == 'x86_64' ]]; then
  source+=("http://packages.ivideon.com/ubuntu/pool/non-free/i/${pkgname}/${pkgname}_${pkgver}.${pkgrel}_amd64.deb")
  sha256sums+=('c91f3bda8de5a53ed94d14d639c6611af33aaeeeb5c6045eb685eab7082533cd')
fi

build() {
cd "$srcdir"
bsdtar xf "$srcdir/data.tar.gz"
}

package() {
cp -dpr --no-preserve=ownership "$srcdir/usr" "$pkgdir"
cp -dpr --no-preserve=ownership "$srcdir/opt" "$pkgdir"
install -Dm 644 "$srcdir/ivideon-client.desktop" "$pkgdir/usr/share/applications/ivideon-client.desktop"
}
