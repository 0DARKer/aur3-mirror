#Contributor: LinkMaster03 linkmaster032000 at gmail dot com
pkgname=supybot-git
pkgver=20100103
pkgrel=1
pkgdesc="A cross-platform IRC bot written in Python"
arch=('i686' 'x86_64')
url="http://sourceforge.net/projects/supybot/"
license=('custom')
depends=('python>=2.5')
optdepends=('python-pysqlite-legacy')
conflicts=('supybot')
makedepends=('git')
options=()
source=()
md5sums=() 

_git_tree="git://supybot.git.sourceforge.net/gitroot/supybot/supybot"
_git_name="supybot"

build() {
  cd $srcdir
  msg "Connecting to GIT server...."

  if [ -d $_git_name ] ; then
     cd $_git_name && git pull origin
     msg "The local files are updated."
  else
	git clone $_git_tree
  fi

  msg "Clone done, starting make..."

  rm -rf "$srcdir/$_git_name-build"
  cp -a "$srcdir/$_git_name" "$srcdir/${_git_name}-build"
  cd "$srcdir/$_git_name-build"

  mkdir -p $pkgdir/usr/lib/python2.6/site-packages
  mkdir -p $pkgdir/usr/bin

  python setup.py install --prefix=$pkgdir/usr || return 1

  mkdir -p $pkgdir/usr/share/licenses/supybot-git/
  install -m644 LICENSE $pkgdir/usr/share/licenses/supybot-git/ || return 1

  rm -rf $srcdir/${_git_name}-build
}
