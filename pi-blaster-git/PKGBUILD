# Maintainer: BlackICE <blackice@craft.net.br>
pkgname=pi-blaster-git
pkgver=20140630.107.bac7e6c
pkgrel=1
pkgdesc="Daemon for Raspberry Pi which provides an interface to drive multiple PWM via the GPIO pins"
arch=('any')
url="https://github.com/sarfata/pi-blaster/"
license=('MIT')
makedepends=('git')
source=("git+https://github.com/sarfata/${pkgname%-*}")
sha1sums=('SKIP')

pkgver() {
	cd "${pkgname%-*}"
	echo "$(date +%Y%m%d).$(git rev-list --count master).$(git rev-parse --short master)"
}

prepare() {
    cd "${pkgname%-*}"
    ./autogen.sh
}

build() {
    cd "${pkgname%-*}"
    ./configure
    make
}

package() {
    cd "${pkgname%-*}"
    mkdir -p "$pkgdir"/usr/bin
    install -Dm766 pi-blaster "$pkgdir"/usr/bin/pi-blaster
    #make DESTDIR="${PKGDIR}" install ## Deprecated init.d scripts
}
