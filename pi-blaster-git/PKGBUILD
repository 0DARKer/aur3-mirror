# Maintainer: BlackICE <blackice@craft.net.br>
pkgname=pi-blaster-git
pkgver=20140701.107.bac7e6c
pkgrel=2
pkgdesc="Daemon for Raspberry Pi which provides an interface to drive multiple PWM via the GPIO pins"
arch=('any')
url="https://github.com/sarfata/pi-blaster/"
license=('MIT')
makedepends=('git')
source=("git+https://github.com/sarfata/${pkgname%-*}" 
        "https://github.com/sarfata/pi-blaster/pull/26.diff")
sha1sums=('SKIP'
          'SKIP')

pkgver() {
	cd "${pkgname%-*}"
	echo "$(date +%Y%m%d).$(git rev-list --count master).$(git rev-parse --short master)"
}

prepare() {
    cd "${pkgname%-*}"
    patch -Np1 -i "$srcdir"/26.diff
    ./autogen.sh
}

build() {
    cd "${pkgname%-*}"
    ./configure
    make
}

package() {
    cd "${pkgname%-*}"
    make DESTDIR="${pkgdir}" install 
}
