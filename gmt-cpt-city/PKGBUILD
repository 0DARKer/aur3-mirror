# Contributor: abenson <adrian.m.benson@gmail.com>
# vim: ts=2 et sw=2 sts=2:

pkgname=gmt-cpt-city
pkgver=1.80
pkgrel=1
pkgdesc="GMT color palettes (*.cpt) from the cpt-city collection"
arch=('any')
url="http://soliton.vm.bytemark.co.uk/pub/cpt-city"
license=('GPL','APACHE','CCPL','custom')
makedepends=('html2text')
optdepends=('gmt: the Generic Mapping Tools')
source=(http://soliton.vm.bytemark.co.uk/pub/cpt-city/pkg/cpt-city_${pkgver}-1.tar.gz)
install=($pkgname.install)

build() {
  cd "$srcdir"/cpt-city-${pkgver}
  ./configure --prefix="$pkgdir"/usr --mandir="$pkgdir"/usr/share/man
}

package() {
  
  cd "$srcdir"/cpt-city-${pkgver}
  make install || return 1
  mkdir -p "$pkgdir"/usr/share/licenses
  mv "$pkgdir"/usr/share/doc/cpt-city/copying "$pkgdir"/usr/share/licenses/$pkgname
  rm -rf "$pkgdir"/usr/share/doc
  
  ## The following cpt collections are junk for most GMT related purposes
  ## uncomment below to remove from them from the package 
  #rm -rf "$pkgdir"/usr/share/cpt-city/{cw,colo,ds,es,go2,hult,ing,gmt,lb,ma,neota,nd,occ,pd,pj,rc,sd,fg}
  #rm -r "$pkgdir"/usr/share/licenses/$pkgname/{cw,colo,ds,es,go2,hult,ing,gmt,lb,ma,neota,nd,occ,pd,pj,rc,sd,fg}
  
  #create symlink in gmt dir
  mkdir -p "$pkgdir"/usr/share/gmt/cpt
  ln -s ../../cpt-city "$pkgdir"/usr/share/gmt/cpt/GMT_cpt-city
}
md5sums=('dc624ce8e27dddd84ab917de62f7b09e')
