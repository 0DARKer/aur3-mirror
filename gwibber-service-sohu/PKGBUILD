# Contributor: skatiger <skatiger at gmail dot com>

pkgname=gwibber-service-sohu
pkgver=0.8.1
pkgrel=1
pkgdesc='sohu service for gwibber'
arch=('i686' 'x86_64')
url='http://code.google.com/p/stardictproject'
license=('GPL')
depends=('gwibber>=3.2.0' 'python2>=2.7')
makedepends=('python-distutils-extra')
source=("http://launchpad.net/gwibber-service-sohu/trunk/${pkgver}/+download/gwibber-service-sohu-${pkgver}.tar.gz"
        'sohu')

build()
{
	cd "$srcdir/${pkgname}-$pkgver"

    patch -p1 <<EOF
diff -urN a/setup.cfg b/setup.cfg
--- a/setup.cfg 
+++ b/setup.cfg 
@@ -1,5 +1,5 @@
 [install]
-prefix = /usr
+prefix = ${pkgdir}/usr

 [build]
 i18n = True
diff -urN a/setup.py b/setup.py
--- a/setup.py
+++ b/setup.py
@@ -19,7 +19,7 @@
     ('share/gwibber/plugins/sohu/ui/icons/16x16', glob("ui/icons/16x16/*.*")),
     ('share/gwibber/plugins/sohu/ui/icons/22x22', glob("ui/icons/22x22/*.*")),
     ('share/gwibber/plugins/sohu/ui/icons/scalable', glob("ui/icons/scalable/*.*")),
-    ('share/gwibber/plugins/sohu/data', glob("data/*.*")),
+    ('share/gwibber/plugins/sohu/data', glob("data/*")),
     ],
       cmdclass = { "build" :  build_extra.build_extra,
                    "build_i18n" :  build_i18n.build_i18n,
EOF
    if [ ! -d data ]; then
        mkdir data
    fi
    cp ../sohu data/
    python2 setup.py install
}
package(){
    chmod +r ${pkgdir}/usr/share/gwibber/plugins/sohu/ui/icons/16x16/sohu.png
}

md5sums=('8611b91d15ae70598ac36f276eed626a'
         '3655ba2cbc27233ee5061ce672158dda')
