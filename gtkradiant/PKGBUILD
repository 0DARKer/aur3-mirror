# Maintainer: CasualSuperman <robert.wertman@gmail.com>
# Contributor: Davorin Učakar <davorin.ucakar@gmail.com>

pkgname=gtkradiant
pkgver=1.6.3
pkgrel=5
pkgdesc="Level editor for Doom 3, Nexuiz, Quake 4, Tremulous, Warsow etc..."
arch=('i686' 'x86_64')
conflicts=("gtkradiant-gamepack-q3-svn" "gtkradiant-gamepack-urt-svn")
url="http://icculus.org/gtkradiant"
license=("GPL" "BSD" "LGPL")
depends=("gtkglext" "libpng12")
source=("https://icculus.org/gtkradiant/downloads/1.6/GtkRadiant-1.6-Linux-$CARCH-20121007.tar.gz")

if test "$CARCH" == x86_64; then
  md5sums=('49c8b5e35e3fa148e00ef193be52d231')
else
  md5sums=('51ff52f36aefa7db1e0a90ace03dbab0')
fi

package() {
  mkdir -p $pkgdir/usr/share/gtkradiant/games
  mkdir -p $pkgdir/usr/bin

  cd "${srcdir}/GtkRadiant-1.6-Linux-$CARCH-20121007"
  cp -r * $pkgdir/usr/share/gtkradiant/

  chmod o+rwx $pkgdir/usr/share/gtkradiant/games
  chmod o+x   $pkgdir/usr/share/gtkradiant/libjpeg.so.62

  echo -e "#!/bin/bash\ncd /usr/share/gtkradiant\n./radiant.bin" > $pkgdir/usr/bin/radiant
  chmod o+rx $pkgdir/usr/bin/radiant
}
