# Contributor: Alessio "mOLOk" Bolognino <themolok@gmail.com>
pkgname=xqf-cvs
pkgver=20060712
pkgrel=1
url="http://xqf.sourceforge.net"
pkgdesc="XQF - Linux Game Browser"
license="GPLv2"
requires=('qstat-cvs')
makedepends=('cvs' 'intltool' 'gdk-pixbuf')
conflicts=('xqf')
provides=('xqf')
source=()
md5sums=()

_cvsroot=":pserver:anonymous@xqf.cvs.sourceforge.net:/cvsroot/xqf"
_cvsmod="xqf"

build() {
  cd $startdir/src
  msg "Connecting to $_cvsmod.sourceforge.net CVS server...."
  cvs -z3 -d $_cvsroot co $_cvsmod
  cd $_cvsmod
  
  ./autogen.sh --prefix=/usr

  msg "CVS checkout done or server timeout"

  cp -R $startdir/src/${_cvsmod%%/*} $startdir/src/${_cvsmod%%/*}-build
  cd $startdir/src/${_cvsmod%%/*}-build
  cd ${_cvsmod#*/}

  msg "Starting configure..."
  ./configure --prefix=/usr --enable-gtk2
  
  msg "Starting make..."
  make || return 1
  make DESTDIR=$startdir/pkg install
  rm -fr $startdir/src/${_cvsmod%%/*}-build
}
