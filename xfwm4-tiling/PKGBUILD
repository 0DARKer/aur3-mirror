# Maintainer: Denis G. <the.same.denis@gmail.com>

pkgname=xfwm4-tiling
_realname=xfwm4
pkgver=4.6.2
pkgrel=5
pkgdesc="Xfce window manager, compatible with Gnome, Gnome2, KDE2, and KDE3. Patched for tiling support."
arch=('i686' 'x86_64')
license=('GPL2')
url="http://www.xfce.org/"
groups=('xfce4')
depends=("libxfcegui4>=4.6.4" 'libwnck' 'hicolor-icon-theme')
makedepends=('pkgconfig' 'intltool')
provides=("${_realname}=${pkgver}")
conflicts=("${_realname}")
replaces=("${_realname}")
options=('!libtool')
install=${pkgname}.install
source=(http://archive.xfce.org/src/xfce/${_realname}/4.6/${_realname}-${pkgver}.tar.bz2 ${_realname}-${pkgver}-tiling-${pkgrel}.patch)

md5sums=('3e6c0c54b028b6ea60e865e55ecdf3f8'
         '8ecfa5864334c5966868ef7e392206b6')

build() {
  cd ${srcdir}/${_realname}-${pkgver}
  patch -p1 < ${srcdir}/${_realname}-${pkgver}-tiling-${pkgrel}.patch
  ./configure --prefix=/usr --sysconfdir=/etc --libexecdir=/usr/lib \
    --localstatedir=/var --disable-static \
    --enable-compositor --enable-xsync || return 1
  make || return 1
}

package() {
  cd ${srcdir}/${_realname}-${pkgver}
  make DESTDIR=${pkgdir} install || return 1
}
