# Maintainer: Mitchel Humpherys <mitch.special@gmail.com>

pkgname=python-matplotlib-git
pkgver=20110614
pkgrel=1
pkgdesc="matplotlib python library with python3 support"
url="https://github.com/matplotlib/matplotlib-py3"
arch=('any')
license=('GPL')
depends=('python3-numpy')
makedepends=('git')
conflicts=('python2-matplotlib')
provides=('python-matplotlib')
source=()
md5sums=()

_gitroot='https://github.com/matplotlib/matplotlib-py3.git'
_gitname='matplotlib-py3'

build() {
  cd "$srcdir"
  msg "Connecting to git server..."
  if [[ -d $_gitname ]]; then
	cd $_gitname && git pull origin
	msg "The local files are up-to-date"
  else
	git clone $_gitroot $_gitname --depth=1
	cd $_gitname
  fi

  python setup.py build || return 1
  # ./configure --prefix=/usr
  # make || return 1
  # make DESTDIR=$startdir/pkg install
}

package() {
  cd "$srcdir/$_gitname"
  python setup.py install --prefix=$pkgdir/usr --optimize=1
}
