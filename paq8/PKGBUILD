# Contributor: Mladen PejakoviÄ‡ <pejakm@gmail.com>
# Maintainer: Ray Kohler <ataraxia937@gmail.com>

pkgname=paq8
pkgver=p3
pkgrel=1
pkgdesc="PAQ8 series of archivers, resurrected by new maintainers"
url="http://code.google.com/p/paq8/"
makedepends=('nasm')
arch=('x86_64' 'i686')
license=('GPL')
source=("http://paq8.googlecode.com/files/${pkgname}${pkgver}.zip"
        "paq7asm.asm")
md5sums=('858af40266317dfb19a968c4dbd6e695'
         '36b02f2ed3eca8edc84be6f5885026dc')

build()
{
  if [ `uname -m` == "x86_64" ]; then
    _asmarch="elf64"
  else
    _asmarch="elf"
  fi
  cd $startdir/src
  nasm -f ${_asmarch} paq7asm.asm || 1
  g++ ${pkgname}${pkgver}.cpp -DUNIX $CFLAGS -o ${pkgname}${pkgver} paq7asm.o || 1
  install -D -m 755 $startdir/src/${pkgname}${pkgver} ${startdir}/pkg/usr/bin/${pkgname}${pkgver}
}
