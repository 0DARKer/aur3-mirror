# Maintainer: Olivier MÃ©doc <o_medoc@yahoo.fr>

pkgname=vmware-patch
pkgver=0.99
pkgrel=4
pkgdesc="Several scripts to apply patches to vmware modules (tested for vmware-player)"
arch=('i686' 'x86_64')
url="http://www.vmware.com"
license=('GPL')
depends=('patch' 'bash')
install=
source=(vmware-patch vmware-unpatch vmware-rc \
vmmon-2.6.35.diff vsock-2.6.35.diff \
vmmon-2.6.36.diff \
vmci-2.6.37.diff vmnet-2.6.37.diff  vsock-2.6.37.diff vmmon-2.6.37.diff \
vmblock-2.6.39.diff  vmmon-2.6.39.diff  vsock-2.6.39.diff vmci-2.6.39.diff vmnet-2.6.39.diff \
vmblock-3.0.diff  vmci-3.0.diff  vmmon-3.0.diff  vmnet-3.0.diff  vsock-3.0.diff)

package() {
  cd ${srcdir}

  install -D -m755 ${srcdir}/vmware-patch ${pkgdir}/usr/bin/vmware-patch
  install -D -m755 ${srcdir}/vmware-unpatch ${pkgdir}/usr/bin/vmware-unpatch
  mkdir -p ${pkgdir}/usr/lib/vmware/patches
  cp *.diff ${pkgdir}/usr/lib/vmware/patches

  # Vmware player fixes
  mkdir -p ${pkgdir}/sbin
  ln -s /bin/lsmod ${pkgdir}/sbin/lsmod

  # rc.d
  install -D -m755 ${srcdir}/vmware-rc ${pkgdir}/etc/rc.d/vmware
}

md5sums=('71b551d9e13e0c9ce354aa6b2756855c'
         '1720f19bcde7d1b06072d650c4eebf3e'
         '97518c370de3eef1a6935515eaf597e6'
         'f91cf3f46e5220a64b1cfdb07aa3257e'
         '78740f2ae60d84d7e81ef128cf10eb5d'
         'f0a138dcfb01a12b54bd4268f23fcc2b'
         '289fe3df6aa21e53f0071079800e5754'
         'f07e53526dd47a248dec7eacd54121a8'
         '0bbfdfe33dd5e14d96b9719456b0b49c'
         'a4d7bcc5a23382b0c6dd5040723b4d0b'
         '0c317d09aaed3b10de4a35a97c605f8d'
         '4b11a8f484f89ebea72b8d9ebfc1d23c'
         'a2a45aa9e9ebd311ecfd6e96f19ad674'
         'e3efe95c6f90e87bb8fe78ccceb7c4c4'
         'f2cc9e4042c43f6075207f3612d72f21'
         'd1c9773adc7ec14392f2ac7e7610afec'
         'e3efe95c6f90e87bb8fe78ccceb7c4c4'
         'a0c7691ae05516cd5325bcd14833b4d3'
         'f2cc9e4042c43f6075207f3612d72f21'
         'adb689206fe85cc0e19ac4b3e50cd656')
