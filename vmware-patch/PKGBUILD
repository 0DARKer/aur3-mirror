# Maintainer: Olivier MÃ©doc <o_medoc@yahoo.fr>

pkgname=vmware-patch
pkgver=0.99
pkgrel=2
pkgdesc="Several scripts to apply patches to vmware modules (tested for vmware-player)"
arch=('i686' 'x86_64')
url="http://www.vmware.com"
license=('GPL')
depends=('patch' 'bash')
install=
source=(vmware-patch vmware-unpatch vmware-rc vmci-2.6.37.diff   vmmon-2.6.36.diff  vmnet-2.6.37.diff  vsock-2.6.37.diff
vmmon-2.6.35.diff  vmmon-2.6.37.diff  vsock-2.6.35.diff)


package() {
  cd ${srcdir}

  install -D -m755 ${srcdir}/vmware-patch ${pkgdir}/usr/bin/vmware-patch
  install -D -m755 ${srcdir}/vmware-unpatch ${pkgdir}/usr/bin/vmware-unpatch
  mkdir -p ${pkgdir}/usr/lib/vmware/patches
  cp *.diff ${pkgdir}/usr/lib/vmware/patches

  # Vmware player fixes
  mkdir -p ${pkgdir}/sbin
  ln -s /bin/lsmod ${pkgdir}/sbin/lsmod

  # rc.d
  install -D -m755 ${srcdir}/vmware-rc ${pkgdir}/etc/rc.d/vmware
}

md5sums=('a4dac51c3aa40b5a65e1ee90384f09fa'
         'e43763009650ead94bbcc2b63b82496a'
         '97518c370de3eef1a6935515eaf597e6'
         '289fe3df6aa21e53f0071079800e5754'
         'f0a138dcfb01a12b54bd4268f23fcc2b'
         'f07e53526dd47a248dec7eacd54121a8'
         '0bbfdfe33dd5e14d96b9719456b0b49c'
         'f91cf3f46e5220a64b1cfdb07aa3257e'
         'a4d7bcc5a23382b0c6dd5040723b4d0b'
         '78740f2ae60d84d7e81ef128cf10eb5d')