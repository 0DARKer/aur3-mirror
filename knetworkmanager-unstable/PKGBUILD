# Maintainer: Gianluca Romanin (aka J_Zar) <romaninz@gmail.com>
# Original Maintainer: Zhukov Pavel <gelios@gmail.com>
pkgname=knetworkmanager-unstable
pkgver=737532
pkgrel=1
license="GPL"
arch=(i686 x86_64)
pkgdesc="A NetworkManager front-end for KDE"
url="http://en.opensuse.org/Projects/KNetworkManager"
depends=('networkmanager' 'kdelibs' 'dbus-qt3')
makedepends=('pkgconfig' 'subversion')
provides=('knetworkmanager')
conflicts=('knetworkmanager')
source=()
md5sums=()
_svnkdenetwork=svn://anonsvn.kde.org/home/kde/branches/extragear/kde3/network
_svnadmin=svn://anonsvn.kde.org/home/kde/branches/KDE/3.5/kde-common/admin
_svntrunk=svn://anonsvn.kde.org/home/kde/branches/extragear/kde3/network/knetworkmanager/
_svnmod=knetworkmanager 

build() {
	cd $startdir/src/ 
	msg "Updating SVN entries for $_svnmod ..." 
	touch ~/.subversion 
	svn co -N $_svnkdenetwork kdenetwork
	cd kdenetwork
	svn co $_svnadmin
	svn co $_svntrunk
	msg "Finished update, starting build ..."
	make -f Makefile.cvs
	./configure --prefix=/opt/kde --sysconfdir=/etc --enable-final

	source /etc/profile.d/qt.sh
	make || return 1
	make DESTDIR=$startdir/pkg/ install
}
