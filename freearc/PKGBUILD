# Maintainer: Limao Luo <luolimao+AUR@gmail.com>
# Contributor: TuxSpirit <tuxspirit@archlinux.fr>

pkgname=freearc
pkgver=0.666
_pkgname=FreeArc-$pkgver-linux-i386
pkgrel=3
pkgdesc="FreeArc archiver combines unexampled speed/compression ratio and multitude of features"
arch=(i686 x86_64)
url=http://freearc.org
license=(GPL)
depends=(lib32-curl lib32-gtk2 lib32-gmp4)
[[ $CARCH == "i686" ]] && depends=(${depends[@]/lib32-/})
options=(!emptydirs)
install=$pkgname.install
source=($url/download/$pkgver/$_pkgname.tar.bz2
    $pkgname.desktop
    freearcusercfg.sh)
sha256sums=('84b53a3151493ae40408458b19a099e65526b6a589be343e48954d8c8446a1b9'
    'ed4b5fc8ac6ac6452921eafe0bad421d12a53ca28c12046a5c8219f89b96e058'
    'da6c74e10ad2a7aa27e0712f35b3bbd8519c2dd2023f0c9ece358f44ca6eae48')
sha512sums=('bfe166d4baaf38a66b55ef88c573800ad93f145a41235673368470f2f3d2b359e1cf867e3d8d07a45365061ffe69413a72d2f277cf77376ac060fd4cf536b310'
    'f1f8a5193ccfccdfd79f4de483542f28033f90f20e42b438ac318cb71337b13ec7ec8c4484ddac290e2accc23f447f5b0355e7d8db65e6666f7b19542a2e95c5'
    '8866ca7b8c2d003efc4839fef53e1af1a2982d8a4504670066f454299430eb4b0296635d82992efd014a4de2a9350462fac0df3834d5218515bf27df74d622d6')

package() {   
    desktop-file-install $pkgname.desktop --dir "$pkgdir"/usr/share/applications/
    cd $_pkgname/
    install -d "$pkgdir"/usr/share/doc/
    mv Documentation "$pkgdir"/usr/{share/doc/$pkgname/,lib/}
    cp -r bin "$pkgdir"/usr/
    cp -r lib/* scripts Addons "$pkgdir"/usr/lib/FreeArc/
    install -Dm755 ../freearcusercfg.sh "$pkgdir"/usr/lib/FreeArc/scripts/freearcusercfg.sh

    install -d "$pkgdir"/etc/
    cp -r cfg "$pkgdir"/etc/
}  
