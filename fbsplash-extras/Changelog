
fbsplash-extras (aka initscripts-extras-fbsplash)
Advanced Fbsplash script for Arch Linux initscripts

Changelog

 2.0    Rewritten from scratch to ease maintenance
        (dropping some less important workarounds and functionality)
        Feature List
        * Initcpio hook for early splash screen
        * Supports early daemon start in initcpio (themes w/o pre-init script)
        * Supports splash stop/fadeout before X started from DAEMONS array
        * Supports Fbsplash services events (icons for services/'daemons')
        * Supports theme hook scripts
        * Provides rc.sysinit pseudo services and fine grained progress
        * Can push initscripts [BUSY] messages to the splash status line
        * Filesystem-check progress status messages (ext[234])
        * Writes initscripts [FAIL] messages into the splash textbox
        * Can switch to console on [FAIL] messages
        * Provides log file /lib/splash/cache/profile for debuging
 2.0.1  Support early sysinit splash daemon start
 2.0.2  Fix final shutdown status message when message pushing enabled
        Also trigger service failed event when 'daemon' script not executable
 2.0.3  Some corner case fixes:
        * When X start expected, only chvt to splash tty if on tty1 console
        * On non X-service shutdown, only wait for X to die if fadein requested
        * On shutdown, restore verbose-on-errors chvt after stopping X-service
        * No backgrounded services verbose-on-errors - messages go to /dev/null
        * Fix support for non-initcio systems
 2.0.4  Streamlined the fsck progress daemon code
 2.0.5  Some speedup changes:
        * Avoid /bin/pidof when sending commands to the daemon
        * Cancel obsolete status messages
        * Source theme hook scripts if available with .sh extension
        Ensure spl_cachedir not umounted meanwhile before writing fail info
 2.0.6  Reimplement correct shutdown services order
        Wait for final shutdown progress step painting
        Replace some functions by an upstream-like splash()
        Fix missing telinit 1 chvt to console after X exit
 2.0.7  Send repeated splash progress during fsck progress to avoid autoverbose
        Get chvt to splash on F2-key to work
        In initcpio mount a new tmpfs instead of using /dev itself
 2.0.8  Dropped config file, initcpio and fbcondecor parts (now in fbsplash pkg)
        Package rename: initscripts-extras-fbsplash -> fbsplash-extras
        Drop the splash when booting into single-user to allow clean mkinitcpio
 2.0.9  Some code cleanups
        Override kill_everything() introduced with initscripts>=2011.01
        until FS#10536 patch hits initscripts
        Make shutdown progress a bit more smooth
        Better support for unknown/custom scripts
        Fix usage of set shell builtin
        Added a small sleep before daemon exit to let it update the message
 2.0.10 Added splash_cache_prep_initcpio() for the fbsplash mkinitcpio hook
        Don't mess with the event device if the daemon was started in initcpio
        Respect profile parameters
 2.0.11 Send a 'repaint' command to the splash daemon after 'set message'
        This seems to be needed at least if splash type is other than bootup.
 2.0.12 Updated for initscripts 2011.04.1
 2.0.13 Updated for initscripts 2011.06.1
 2.0.14 splash_cache_prep_initcpio: Fix tmpfs umount when used in chroot
 2.0.15 Update splash_initscript_svcs_get() (also parses functions now)
 2.1    functions parsing: recognize multiple steps
 2.1.1  splash_initscript_svcs_get(): Speed up parsing using grep
 2.1.2  Speed up shutdown SIGTERM/SIGKILL (override kill_everything() again)
        Fix sysinit step counting
        Allow stat_busy/daemon steps to appear in arbitrary order
        Do sysinit step counting for each single boot instead of once in
        mkinitcpio only now that splash_initscript_svcs_get() is fast
 2.2    Use kill_everything() for counting daemons (tweaked again)
        Don't use the (long) udevadm settle timeout from rc.conf
        Stripped paths from binaries as in newer initscripts
        General simplification/refactoring
 2.2.1  Simplify shutdown daemons counting a bit more
        Simplify filesystem check progress daemon (splash_fsck_push_d)
        splash_fsck_push_d: Don't rely on catching previous stat_busy
 2.2.2  Use ck_autostart() instead of in_array()
        Support $fsckret_loop as we already do for fsckloop hooks
        Start splash directly when sourced from rc.shutdown (as with rc.sysinit)
        instead of using the shutdown_start hook to avoid confusion if custom
        hooks should mess with DAEMONS
        splash_profile(): Avoid shutdown read-only filesystem errors
# EOF #
