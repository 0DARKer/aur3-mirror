# Maintainer: Feng Wang <feng[dot]wang[at]uni-ulm[dot]de>
pkgname=scikits-cuda
pkgver=0.041
pkgrel=1
pkgdesc="Python interface to GPU-powered libraries"
arch=('i686' 'x86_64')
url="http://scikits.appspot.com/cuda"
license=('BSD')
depends=('python2' 'python2-numpy' 'python2-scipy' 'scikits-base' 'cuda' 'cula')
makedepends=('python2-distribute' 'subversion')
source=(https://pypi.python.org/packages/source/s/scikits.cuda/scikits.cuda-${pkgver}.tar.gz)
md5sums=(8ea6afa783bced0aca8713fc58667cf1)

build() {
  cd ${srcdir}/scikits.cuda-${pkgver}

  # ignores any LDFLAGS set in makepkg.conf
  unset LDFLAGS

  python2.7 ./setup.py install --root=${pkgdir}

  sed -i 's/libcula\.so/libcula_lapack\.so/g' ${pkgdir}/usr/lib/python2.7/site-packages/scikits/cuda/cula.py

  rm ${pkgdir}/usr/lib/python2.7/site-packages/scikits/__init__.py
}

