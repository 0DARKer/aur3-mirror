# Maintainer: Mijo Medvedec <mijo dot medvedec at gmail dot com>

pkgname=natrix-calc
pkgver=2.2
pkgrel=1
pkgdesc="Generic IP calculator with ability to calculate parameters of IPv4/IPv6 networks"
arch=('i686' 'x86_64')
url="http://sourceforge.net/projects/natrix/"
license=('GPL3')
depends=('qt4')
makedepends=('gendesk')
source=("http://sourceforge.net/projects/natrix/files/${pkgver}/${pkgname}_${pkgver}.zip")
md5sums=('3408f3884a8f99dda8b22cf6301e244c')
sha256sums=('c209fbe85807a56100e2f041f955934d7b16e7706de7d197f05325e00756f034')

prepare() {
	gendesk -n --pkgname "$pkgname" --pkgdesc "$pkgdesc"
}

build() {
	cd "$srcdir/$pkgname"
	qmake-qt4 Natrix.pro
	make
}

package() {
	cd "$srcdir/$pkgname"
	install -Dm 755 "$pkgname" "$pkgdir/usr/bin/$pkgname"

	install -dm 755 "$pkgdir/usr/share/$pkgname/locale"
	install -Dm 644 *.qm "$pkgdir/usr/share/$pkgname/locale"

	install -Dm 644 "$pkgname.png" "$pkgdir/usr/share/pixmaps/$pkgname.png"
	install -Dm 644 "$srcdir/$pkgname.desktop" "$pkgdir/usr/share/applications/$pkgname.desktop"

	sed -i 's/Natrix-calc/Natrix/g' "$pkgdir/usr/share/applications/$pkgname.desktop"
	sed -i 's/Office;/Network;Internet;Utility;KDE;/g' "$pkgdir/usr/share/applications/$pkgname.desktop"
}
