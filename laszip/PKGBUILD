# Maintainer: Maciej Sieczka <msieczka at sieczka dot org>
# Contributor: Maciej Sieczka <msieczka at sieczka dot org>

pkgname='laszip'
pkgver='2.1.0'
pkgrel='1'
pkgdesc='ASPRS LAS lossless compression library and tools.'
arch=('i686' 'x86_64')
url='http://www.laszip.org'
license=('LGPL')
provides=("$pkgname")
source=("http://download.osgeo.org/laszip/${pkgname}-${pkgver}.tar.gz")
md5sums=('3dfc230b3cee2197ebf88656fad18428')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  
  msg 'Configuring build...'
  ./configure --prefix='/opt' --includedir="/opt/include/${pkgname}"

  # To provide a usefull stacktrace:
  #
  # CFLAGS="-O0 -ggdb -Wall -Werror-implicit-function-declaration -fexceptions"
  # CXXFLAGS="-O0 -ggdb -Wall -Werror-implicit-function-declaration -fexceptions"
  # options=(!strip)
  # Not sure if -Werror-implicit-function-declaration -fexceptions should really go to CXXFLAGS.
  # Let me know if you know.

  msg 'Building...'
  make
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  make DESTDIR="$pkgdir" install
}
