# Maintainer: Kenneth Endfinger <kaendfinger@gmail.com>
pkgname=kenbot
pkgver=1.2
pkgrel=1
pkgdesc="A very simple to use modular IRC bot written in Java."
arch=('i686' 'x86_64')
url="http://bitbucket.org/KenBot/"
license=('GPL')
depends=('jre7-openjdk')
makedepends=('jdk7-openjdk' 'apache-ant')
source=('install')
md5sums=('2ea3c216fb0b7f8449f0225ece33210c')
install='install'

_gitrepo="https://bitbucket.org/KenBot/$pkgname.git"
_pkgbuildgit="https://bitbucket.org/KenBot/pkgbuild.git"
build() {
    if [ ! -d "kenbot/" ]
    then
      git clone $_gitrepo
      cd kenbot/
    else
      cd kenbot/
      git pull -u origin master
    fi
    ant jar
    if [ ! -d "../pkgbuild/" ]
    then
      cd ../
      git clone $_pkgbuildgit
      cd pkgbuild/
    else
      cd ../pkgbuild/
      git pull -u origin master
    fi
}

package(){
    cd kenbot/
    [ ! -d "$pkgdir/usr/share/KenBot" ] && mkdir $pkgdir/usr/share/KenBot/ -p
    [ ! -d "$pkgdir/usr/bin/" ] && mkdir $pkgdir/usr/bin/ -p
    cp dist/KenBot.jar $pkgdir/usr/share/KenBot/
    cp ../pkgbuild/script.sh $pkgdir/usr/bin/kenbot
}
