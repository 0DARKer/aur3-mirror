## xchat-svn pkgbuild
# maintainer: r4 <dru84532 (at) gmail.com>

basename=xchat
pkgname=${basename}-svn
pkgver=1439
pkgrel=1
pkgdesc="A mature GTK+ IRC client"
arch=("i686" "x86_64")
url="http://www.${basename}.org/"
license=("GPL")
depends=("gtk2>=2.10.9" "dbus-glib>=0.7.2")
makedepends=("svn" "autoconf" "automake")
optdepends=("enchant: for spell checking support" "tcl: for tcl plugin")
conflicts=("${basename}" "${basename}-cvs")
options=("!libtool")

_svntrunk=https://xchat.svn.sourceforge.net/svnroot/xchat/
_svnmod=src

build() {
    cd $startdir/

    if [ -d $_svnmod/.svn ]; then
        (cd $_svnmod && svn up)
    else
        svn co $_svntrunk $_svnmod
    fi

    msg "SVN checkout done or server timeout."
    
    cd $srcdir        
    ./autogen.sh || return 1
    touch configure
    ./configure --prefix=/usr --sysconfdir=/etc \
				--enable-openssl --enable-dbus \
				--disable-gnome --disable-textfe \
			--disable-ipv6 --enable-shm \
			--enable-spell=static || return 1
  
    make || return 1
    make DESTDIR=${pkgdir} install || return 1
}
