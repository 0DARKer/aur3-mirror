# Maintainer: Mitchell Kember <mk12360@gmail.com>
# modified from csfml-svn package

pkgname=csfml2-svn
pkgver=1530
pkgrel=1
pkgdesc="C binding for SFML 2."
arch=('i686' 'x86_64')
url=http://sfml-dev.org
license=('zlib')
makedepends=('svn')
depends=('sfml2-svn')
conflicts=('csfml')
provides=('csfml')
source=()
md5sums=()

_svntrunk=https://sfml.svn.sourceforge.net/svnroot/sfml/branches/sfml2/CSFML/
_svnmod=CSFML

build() {
  cd ${srcdir}

  if [ -d $_svnmod/.svn ]; then
    (cd $_svnmod && svn up)
  else
    svn co $_svntrunk --config-dir ./
  fi

  msg "SVN checkout done or server timeout."

  cp -r $_svnmod ${_svnmod}-build
  cd ${_svnmod}-build

  msg "Starting make."
  make || return 1
  find ./ -name ".svn" | xargs rm -Rf
  make DESTDIR=${pkgdir}/usr install || return 1

  rm -rf ${srcdir}/$_svnmod-build
}

# vim:syntax=sh
