# Maintainer: archtux <antonio.arias99999@gmail.com>

pkgname=calligra-git
pkgver=20101208
pkgrel=1
pkgdesc="A continuation of the KOffice project."
url="http://www.calligra-suite.org/"
arch=('i686' 'x86_64')
license=('FDL1.2' 'GPL2' 'LGPL')
depends=('docbook-xml' 'exiv2>=0.18' 'glew' 'graphicsmagick' 'gsl' 'kdebase-runtime' 'kdepimlibs' 'lcms' 'libwpd' 'poppler-qt' 'pstoedit' 'qca' 'qimageblitz' 'shared-mime-info' 'wv2-svn' 'xdg-utils')
makedepends=('automoc4' 'boost' 'cmake' 'eigen' 'git' 'pkgconfig')
conflicts=('koffice')

_gitroot="git://git.kde.org/calligra"
_gitname="calligra"


build() {
   cd $srcdir
   msg "Connecting to GIT server...."

   if [ -d $srcdir/$_gitname ] ; then
  	cd $_gitname && git pull origin
  	msg "The local files are updated."
   else
  	git clone $_gitroot
   fi

   msg "GIT checkout done or server timeout"
   msg "Starting make..."

   cp -r ${srcdir}/$_gitname ${srcdir}/$_gitname-build

   cd ./$_gitname-build

   cmake -DCMAKE_INSTALL_PREFIX=`kde4-config --prefix`
   make
   make DESTDIR=$pkgdir install
}