# $Id: PKGBUILD,v 1.12 2003/11/06 08:26:13 dorphell Exp $
# Maintainer: Marty_Stoopid <>
# Contributor: Marty_Stoopid <>
pkgname=mkv-extractor-gui
pkgver=4.6.9
pkgrel=3
pkgdesc="GUI for extract files from .mkv"
arch=(i686 x86_64)
url="http://hizo.fr/linux/mkv_extractor_gui"
license=('Creative Common BY-NC-SA')
#groups=()
#provides=()
depends=('mplayer' 'gtk2' 'pygtk' 'gettext' 'python-notify' 'pango' 'python2-gobject2' 'vte' 'python2' 'mkvtoolnix-cli' 'ffmpeg' 'mkclean' 'mkvalidator' 'imagemagick' 'pywebkitgtk' 'desktop-file-utils')
makedepends=('patch')
#conflicts=()
#replaces=()
#backup=()
source=(http://hizo.fr/linux/mkv_extractor_gui/MKV-Extractor-GUI_$pkgver.tar.gz
		  glade2script.patch
		  mkv-extractor-gui.desktop
		  mkv-extractor-gui.xml)
md5sums=('280b6dfb75aa3c9e9d1654d65b2ec352'
			'ac3b7f59f7fbf4228747249da0f52b28'
			'1f25449fd9e7ebd2c858c1b42a9b35e6'
			'821cc1c4856f7d1307bb16798c9a6302')
package() {
mv ${srcdir}/mkv-extractor-gui/g2sPluginMplayer ${srcdir}
mv ${srcdir}/mkv-extractor-gui/locale ${srcdir}
mv ${srcdir}/mkv-extractor-gui/* ${srcdir}
rm -R ${srcdir}/mkv-extractor-gui/
# apply some patches
patch < ../glade2script.patch

# Install the icon file
install -Dm644 ${srcdir}/mkv-extractor-gui.png "${pkgdir}/usr/share/pixmaps/mkv-extractor-gui.png"
# Install the binaries and data files
mkdir -p "${pkgdir}/opt/${pkgname}"
mv -T "${srcdir}" "${pkgdir}/opt/${pkgname}"
  
# Install the .desktop file
install -Dm644 mkv-extractor-gui.desktop "${pkgdir}/usr/share/applications/mkv-extractor-gui.desktop"

# Install the shared MIME info package
install -Dm644 mkv-extractor-gui.xml "${pkgdir}/usr/share/mime/packages/mkv-extractor-gui.xml"

rm ${pkgdir}/opt/mkv-extractor-gui/glade2script.patch
rm ${pkgdir}/opt/mkv-extractor-gui/mkv-extractor-gui.xml
rm ${pkgdir}/opt/mkv-extractor-gui/MKV-Extractor-GUI_4.6.9.tar.gz
rm ${pkgdir}/opt/mkv-extractor-gui/mkv-extractor-gui.desktop
# Change the ownership to root
chown -R root:root ${pkgdir}/*
}