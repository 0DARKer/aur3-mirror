# Maintainer: moostik <mooostik_at_gmail.com>

pkgname=geogebra42-beta
_varpkgname=geogebra
pkgver=4.1.13.0
pkgrel=1
pkgdesc="Dynamic mathematics software with interactive graphics, algebra and spreadsheet"
arch=('any')
url='http://www.geogebra.org/'
license=('custom')
# Application and source code under GPL / Language files under CCPL:by-sa
depends=('java-runtime')
#conflicts=('geogebra')
install=('geogebra42-beta.install')
source=(http://geogebra.googlecode.com/files/GeoGebra-Unixlike-Installer-${pkgver}.tar.gz
	geogebra42-beta.patch
	geogebra42-beta_desktop.patch)
noextract=('*.jar')

package() {
  cd $srcdir/${_varpkgname}-$pkgver

  # Installing application
  install -d -m755 $pkgdir/usr/share/java/$pkgname/unsigned
  install -D -m644 *.jar $pkgdir/usr/share/java/$pkgname
  install -D -m644 unsigned/*.jar $pkgdir/usr/share/java/$pkgname/unsigned
  patch -p0 < $srcdir/geogebra42-beta.patch
  patch -p0 < $srcdir/geogebra42-beta_desktop.patch
  install -d -m755 $pkgdir/usr/bin
  install -D -m755 ${_varpkgname} $pkgdir/usr/bin/$pkgname

  # Copying icons
  #for _size in "16x16" "22x22" "24x24" "32x32" "36x36" "48x48" "64x64" "72x72" "96x96" "128x128" "192x192" "256x256" "scalable"
  #do
  #  install -d -m755 $pkgdir/usr/share/icons/hicolor/${_size}/{apps,mimetypes}
  #  install -D -m644 icons/hicolor/${_size}/apps/$pkgname.* $pkgdir/usr/share/icons/hicolor/${_size}/apps
  #  install -D -m644 icons/hicolor/${_size}/mimetypes/*.* $pkgdir/usr/share/icons/hicolor/${_size}/mimetypes
  #done
  
  # Creating menu item
  install -D -m644 icons/hicolor/64x64/apps/geogebra.png $pkgdir/usr/share/pixmaps/$pkgname.png
  install -D -m644 ${_varpkgname}.desktop $pkgdir/usr/share/applications/$pkgname.desktop

  # Installing mime-type
  #install -D -m644 ${_varpkgname}.xml $pkgdir/usr/share/mime/packages/$pkgname.xml

  # Installing license
  install -D -m644 _LICENSE.txt $pkgdir/usr/share/licenses/$pkgname/LICENSE
}
md5sums=('34a79bb8be53c278cab9dd075ca93bd8'
         'ccb2b5f98131c2ee7a13dec36f1d51af'
         '22cd4b806bff51d47d18645c216aed42')
