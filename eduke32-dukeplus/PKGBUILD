# Contributor: Christoph Zeiler <archNOSPAM_at_moonblade.dot.org>

pkgname=eduke32-dukeplus
pkgver=2.21
pkgrel=2
pkgdesc="An EDuke32 mod providing optional enhancements like new options and effects"
arch=('any')
url="http://deeperthought.dukertcm.com/dp/"
license=('GPL')
depends=('eduke32>=20090313')
makedepends=('unrar' 'unzip')
source=( http://deeperthought.dukertcm.com/dp/DukePlus.rar \
	$pkgname.sh 'eduke32-dukeplus.desktop' 'dpcons.zip')

md5sums=('cb3e9bd27c9d51d67f0c6169c55bf967'
         '578dc25020e24fdf532f563df1f9aec8'
         '9f32d5cf1062e061f42566f614f86b70'
         'd3d934bfea861da2c3c9ba1739a988c0')

build() {
  unrar x -o+ -inul DukePlus.rar || return 1
  #fix
  unzip -o -q dpcons.zip -d DukePlus

#  sed '/dp.cfg/d' -i DukePlus/dpcons/DUKEPLUS.CON
  
  cd ${srcdir}
  
  mkdir -p ${pkgdir}/usr/share/eduke32
  cp -r DukePlus ${pkgdir}/usr/share/eduke32/ 
  find ${pkgdir} -type f -exec chmod 644 {} \;


  install -Dm 755 $pkgname.sh ${pkgdir}/usr/bin/${pkgname}
  install -Dm 644 $srcdir/${pkgname}.desktop $pkgdir/usr/share/applications/${pkgname}.desktop
}

# vim:set ts=2 sw=2 et:
