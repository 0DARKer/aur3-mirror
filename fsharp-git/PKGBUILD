pkgname=fsharp-git
pkgver=20110205
pkgrel=1
pkgdesc="An ML based functional language integrated with the .NET platform."
arch=('any')
url="http://msdn.microsoft.com/en-us/fsharp"
license=('APACHE')
groups=()
depends=('mono>=2.8.2')
makedepends=('git')
optdepends=()
provides=()
conflicts=()
replaces=()
backup=()
options=()
#install=
source=()
noextract=()
md5sums=()
_gitroot="git://github.com/fsharp/fsharp.git"
#_gitroot="https://github.com/pufuwozu/fsharp.git"
_gitname="fsharp"


build() 
{
  cd $srcdir

  msg "Getting source from GIT server...."
  if [[ -d $srcdir/$_gitname ]] ; then
     cd $_gitname
     git pull origin
     msg "The local files are updated..."
  else
     git clone $_gitroot
     cd $_gitname
  fi

  msg "Starting configure..."

  autoreconf

  ./configure --prefix=/usr

  make || return 1

  make DESTDIR=$pkgdir install || return 1

  # Due to naming conflicts, rename to fsharpc[2] and fsharpi[2]
  mv $pkgdir/usr/bin/fsc $pkgdir/usr/bin/fsharpc	
  mv $pkgdir/usr/bin/fsc2 $pkgdir/usr/bin/fsharpc2	
  mv $pkgdir/usr/bin/fsi $pkgdir/usr/bin/fsharpi	
  mv $pkgdir/usr/bin/fsi2 $pkgdir/usr/bin/fsharpi2	
}
