# Contributor: Anton Leontiev <bunder@t-25.ru>
pkgname=xyscan
pkgver=3.2.2
pkgrel=1
arch=('i686' 'x86_64')
pkgdesc="Tool to extract data points from graphical plots"
url="http://star.physics.yale.edu/~ullrich/xyscanDistributionPage/"
license=('GPL')
makedeps=('qt>=4.5.2')
depends=('qt>=4.5.2')
source=(http://star.physics.yale.edu/~ullrich/xyscanDistributionPage/3.22/${pkgname}-3.22-src.tar.gz
        xyscan-3.2.2-docs.patch
        xyscan.desktop)
md5sums=('a27f01135d6acaa39a8f8daa0bf898c8'
         'c3f84e8b43cfaea56b5451dbbcabfff8'
         'df34c8fe7fdad1b1faf388fefc654000')
install=xyscan.install

build() {
  cd ${srcdir}/${pkgname}
  patch -i ${srcdir}/xyscan-3.2.2-docs.patch || return 1
  qmake -o Makefile xyscan.pro || return 1
  make || return 1

  install --mode=755 -D xyscan ${pkgdir}/usr/bin/xyscan
  install --mode=755 --directory ${pkgdir}/usr/share/doc/xyscan
  install --mode=644 --target-directory=${pkgdir}/usr/share/doc/xyscan docs/*
  install --mode=644 -D images/xyscanIcon.png ${pkgdir}/usr/share/icons/hicolor/32x32/apps/xyscan.png
  if test -x /usr/bin/desktop-file-install; then
    /usr/bin/desktop-file-install --dir ${pkgdir}/usr/share/applications ${srcdir}/xyscan.desktop
  else
    install --mode=644 -D ${srcdir}/xyscan.desktop ${pkgdir}/usr/share/applications/xyscan.desktop
  fi
}
