# Contributor: Lex Black <autumn-wind at web dot de>
# Contributor: rnestler

pkgname=mathics
pkgver=0.6.0rc1
pkgrel=1
arch=('i686' 'x86_64')
pkgdesc='General-purpose online computer algebra system featuring Mathematica-compatible syntax and functions'
url='http://www.mathics.org/'
license=('GPL3')
depends=('cython2' 'python2-gmpy>=1.04' 'python2-mpmath' 'python2-django' 'python2-sympy>=0.7' 'python2-distribute')
install=mathics.install
source=("http://www.mathics.org/release/${pkgname}-${pkgver}.zip"
        "python2.patch" )
md5sums=('b08bf6abb2c31c33a6c4de7fdc6a4a2b'
         'f9359bc4e079fe63e141889f50823869')


build() {
	patch -p1 -i "$srcdir/python2.patch"
	python2 setup.py build
}

package() {
	cd "$pkgname"
	python2 setup.py install --root=${pkgdir}
	install -m 755 initialize.py "${pkgdir}/usr/lib/python2.7/site-packages/mathics_initialize.py"
	chmod +x "${pkgdir}/usr/lib/python2.7/site-packages/mathics/manage.py"
}
