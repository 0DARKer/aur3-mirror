# Contributor: Gilles CHAUVIN <gcnweb at gmail dot com>
#
# /!\ Source package is included in AUR because the home-page /!\
# /!\ doesn't exist anymore hence the weird $url below !...   /!\
#
pkgname=ifled
pkgver=0.6
pkgrel=7
pkgdesc="A program that uses the keyboard LEDs to indicate network activity"
url="http://web.archive.org/web/20011210154318/www.sudac.org/~napolium/linux/"
license=('GPL')
depends=('bash')
source=($pkgname-$pkgver.tar.bz2 ifled_init_script ifled_sysconfig ifled.patch)
arch=('i686')
install="ifled.install"
backup=('etc/sysconfig/ifled')

md5sums=('b96cd29862e73fdb7a679fbcf2e85f4e'
         'd1a6e0b672eef01b71c88441247496f5'
         'e2ee30b9f65c451a46370b1c4a1f899d'
         '69b34de4429d0c1974b4c21180267bec')

build() {
  cd $startdir/src/$pkgname-$pkgver

  # Fix: Warnings
  patch -p0 < ../ifled.patch

  make || return 1

  mkdir   -p    $startdir/pkg{/etc/{rc.d,sysconfig},/usr/sbin}
  install -m755 $startdir/src/$pkgname-$pkgver/ifled $startdir/pkg/usr/sbin/ifled
  install -m755 $startdir/src/ifled_init_script      $startdir/pkg/etc/rc.d/ifled
  install -m644 $startdir/src/ifled_sysconfig        $startdir/pkg/etc/sysconfig/ifled
}
