# Contributor: Lone_Wolf <lonewolf@xs4all.nl>
# Maintainer : Mr_Robotic_Evil <mr.robotic.evil@googlemail.com>

pkgname=fs2_open
pkgver=3_6_12
pkgrel=1
pkgdesc="An enhancement of the original Freespace 2 engine"
url="http://scp.indiegames.us"
arch=('i686' 'x86_64')
license=('custom:freespace2')
depends=('openal' 'libvorbis' 'sdl' 'mesa' 'libtheora')
makedepends=('lua')
conflicts=('fs2_open-svn')
install=fs2_open.install
source=(http://swc.fs2downloads.com/builds/${pkgname}_${pkgver}_src.tgz)
md5sums=('afcbcc42de56db0e5942e4551e5865e9')

build()
{
  msg "Starting make..."
  if [ -d $srcdir/$pkgname-build ]; then
     rm -r $srcdir/$pkgname-build
  else mkdir $srcdir/$pkgname-build
  fi
  cp -r $srcdir/${pkgname}_${pkgver}_src/* $srcdir/$pkgname-build
  cd $srcdir/$pkgname-build

  #Build
  ./autogen.sh --enable-speech --enable-inferno
  make

  #Install the license
  install -D -m644 COPYING $pkgdir/usr/share/licenses/freespace2/COPYING 

  #Install the engine (The engine is compiled to one binary..)
  install -D -m755 code/fs2_open_INF_r $pkgdir/usr/bin/fs2_open_r
  
}

# vim:set ts=2 sw=2 et:
