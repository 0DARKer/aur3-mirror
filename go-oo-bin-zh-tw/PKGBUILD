#Contributor: Medical-Wei <medicalwei@gmail.com>

pkgname=go-oo-bin-zh-tw
pkgver=3.1.0        
_subver=3.1         
_build=9399         
pkgrel=1            
pkgdesc="Go-OO Traditional Chinese Language Pack and Help"
arch=('i686' 'x86_64')                       
url="http://go-oo.org/discover/"             
license=('LGPL')                             
makedepends=('rpmextract')                   
depends=('go-oo-bin-base')                   

[ "$CARCH" = "i686" ] && _arch=i586    
[ "$CARCH" = "x86_64" ] && _arch=x86_64

source=(
  http://ftp.riken.jp/Linux/suse/projects/go-oo/stable/linux-$_arch/$_subver/ooobasis3.1-zh-TW{,-base,-binfilter,-calc,-draw,-impress,-math,-res,-writer}-$pkgver-$_build.$_arch.rpm
  http://ftp.riken.jp/Linux/suse/projects/go-oo/stable/linux-$_arch/$_subver/openoffice.org3-zh-TW-$pkgver-$_build.$_arch.rpm                                                            
)

md5sums=('a471f38d735df6ac254d0a555a004e5f'
         '3261f8c0169bea3259bc316f60fbb146'
         '853514fd4e099f1fef314c1066de1ba5'
         'debd5908a23f41d9a9bc4dc744213722'
         '06448150072456b42e7d7be76b4bb177'
         '0f4c7e00d12c01e38eb7e63e67d2fcc0'
         '36f5518b8c359d22d82194d0e5a57584'
         '6fe8b739aca2ed0e6c1309960ca40ad1'
         '0cca2f8fac3bf62f6ee19f485dabbb3a'
         'b49afa1e09d13a0648f07210866d3c77')
	
[ "$CARCH" = "x86_64" ] && \
md5sums=('c0d657503730cdfe83ac7d5849f35292'
         '9d18c008a0dfbd35c18dc99fdf3b7326'
         'bfd89a06a69fb942e84ace4898873d5b'
         '5089cad5cc469503ce4fb6c4da47305b'
         'd329b2a4743a24dbcd5570010e2db831'
         '28b32632df504e0d1d7c1377f95babdc'
         'bf53d41fe7a794baf0e2d0d390604405'
         'da55f5d5a43bfe01efe9df6ff39ebd10'
         '4d967dd66c5226db049014769a5cdc01'
         '18fb26d229d69395ce1f880702e44bee')

build() {
    #Copied from: namru <namru@gmx.net>                 

    cd $startdir/src/

    for i in $(ls *.rpm); do
        rpmextract.sh $i
    done

    #"base" install
    cp $startdir/src/opt $startdir/pkg/ -r

    ## Step 1
    cd ${pkgdir}/opt/openoffice.org || return 1
    cd basis3.1 || return 1
    ## Step 2
    cd ${pkgdir}/opt/ || return 1
    mv openoffice.org/basis3.1/ openoffice.org3/ || return 1
    cd openoffice.org3/ || return 1
    mv basis3.1 basis-link || return 1
    ## Step 3
    cd ${pkgdir}/opt/ || return 1
    rmdir ${pkgdir}/opt/openoffice.org || return 1
    mv openoffice.org3 go-oo || return 1

}

