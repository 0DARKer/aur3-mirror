# Maintainer: Thomas Dziedzic < gostrc at gmail >

pkgname=energymaster-git
pkgver=20110327
pkgrel=2
pkgdesc='Entry for Reddit Game Jam 06. Energy theme.'
arch=('i686' 'x86_64')
url='https://github.com/svenstaro/RedditGameJam'
license=('unknown')
depends=('sfml2-svn')
makedepends=('git' 'cmake' 'boost')
source=('energymaster')
md5sums=('dad73715bc440b78926caaeed4dc5deb')

_gitroot='git://github.com/thatch45/Quarters.git'
_gitname='RedditGameJam'

build() {
  if [ -d ${_gitname} ] ; then
    cd ${_gitname}
    git pull
    cd ..
  else
    git clone ${_gitroot}
  fi

  cd ${_gitname}/RGJ06

  rm -rf build
  mkdir build
  cd build

  cmake \
    -DCMAKE_BUILD_TYPE="Debug" \
    ..

  make -j3
}

package() {
  cd ${_gitname}/RGJ06

  install -d ${pkgdir}/opt/energymaster
  cp -r bin gfx snd \
    ${pkgdir}/opt/energymaster

  install -d ${pkgdir}/usr/bin
  install ${srcdir}/energymaster \
    ${pkgdir}/usr/bin
}
