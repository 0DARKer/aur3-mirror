pkgname=histo-git
pkgver=20130211
pkgrel=1
pkgdesc='Beautiful charts in the terminal for static or streaming data'
url='https://github.com/visionmedia/histo'
license=('MIT')
depends=()
makedepends=('git')
arch=('i686' 'x86_64')

_gitroot='https://github.com/visionmedia/histo.git'
_gitname='histo'

build() {
	cd "$srcdir"

	msg "Connecting to GIT server...."

	if [[ -d $_gitname ]]; then
		cd "$_gitname" && git pull origin
		msg "The local files are updated."
	else
		git clone --depth 1 "$_gitroot" "$_gitname" #shallow clone
	fi

	msg "GIT checkout done or server timeout"
	msg "Starting build..."

	rm -rf "$_gitname-build"
	cp -r "$_gitname" "$_gitname-build"
	cd "$_gitname-build"

	make
}

package() {
	cd "$srcdir/$_gitname-build"

	install -Dm755 histo "${pkgdir}/usr/bin/histo"
	install -Dm644 Readme.md "${pkgdir}/usr/share/doc/${pkgname}/Readme.md"
}
