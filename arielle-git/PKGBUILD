# Maintainer: Willy GOIFFON <willy at mailoo dot org>
pkgname=arielle-git
pkgver=2.4
pkgrel=2
pkgdesc='An IRC robot which can parse commands and interact with the channel it is connected to'
arch=('i686' 'x86_64')
url='http://gitorious.org/pndc/arielle'
license=('MIT')
depends=('libconfig')
makedepends=('git')
provides=('arielle')
_gitroot=git://gitorious.org/pndc/arielle.git
_gitname=arielle

build() {
  cd "$srcdir"
  if [ -d "$_gitname" ]; then
    cd "$_gitname" && git pull origin
  else
    git clone "$_gitroot" "$_gitname"
  fi

  cd "${srcdir}/${_gitname}"
  make
}

package() {
  cp ../arielle.conf "${srcdir}/${_gitname}/"
  cp ../arielle.service "${srcdir}/${_gitname}"

  cd "${srcdir}/${_gitname}"

  make DESTDIR="${pkgdir}" install
  install -D -m644 arielle.conf "${pkgdir}/etc/conf.d/arielle"
  install -D -m644 arielle.service "${pkgdir}/usr/lib/systemd/system/arielle.service"
}
