# Maintainer: Tom Wambold <tom5760@gmail.com>
pkgname=emane
pkgver=0.7.2
pkgrel=1
pkgdesc="Extendable Mobile Ad-hoc Network Emulator"
arch=('i686' 'x86_64')
url="http://labs.cengen.com/emane/"
license=('BSD')
install=emane.install
depends=(openssl ace perl-xml-simple perl-xml-libxml libpcap)
source=(http://labs.cengen.com/emane/download/source/$pkgver/$pkgname-$pkgver.tar.gz
        emane.conf emane.install
        emane emaneeventd emaneeventservice emanetransportd)
md5sums=('7bcb46ab013ceb49e486c37de729c63c'
         '28e57be40c37e02a80ad0890b9389098'
         '575802412ba681d0ece003e66361a14c'
         '4e7948c9bd456b7e4c6bfe77bb644589'
         '0b8dc3ebf8fd3f8f61dc35c90a6f52fd'
         '6ccf17782958c6f4997e1150f57960f6'
         'a0b03a4170bb316defc53fd8eb91a471')

build() {
  cd "$srcdir/$pkgname-$pkgver"
  #patch -p1 < ../emane-ace-headers.patch
  #autoreconf
  ./configure --prefix=/usr
  make
}

package() {
  cd "$srcdir/$pkgname-$pkgver"
  make DESTDIR="$pkgdir/" install
  #rm -r $pkgdir/usr/etc

  #sed -i "s:-L$srcdir/emane-0.6.4/libs/emanelogservice/.libs::g" $pkgdir/usr/lib/libemanexmlparser.la

  install -d $pkgdir/etc/emane
  install -D $srcdir/emane.conf $pkgdir/etc/conf.d/emane.conf
  install -D $srcdir/emane $pkgdir/etc/rc.d/emane
  install -D $srcdir/emaneeventd $pkgdir/etc/rc.d/emaneeventd
  install -D $srcdir/emaneeventservice $pkgdir/etc/rc.d/emaneeventservice
  install -D $srcdir/emanetransportd $pkgdir/etc/rc.d/emanetransportd
}

# vim:set ts=2 sw=2 et:
