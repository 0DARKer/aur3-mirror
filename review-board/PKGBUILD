# Contributor: Prurigro
# Maintainer: Prurigro

pkgname=review-board
pkgver=1.0rc2
pkgrel=3
pkgdesc="Review Board is a powerful web-based code review tool that offers developers an easy way to handle code reviews."
arch=('i686' 'x86_64')
license=('MIT')
depends=('mysql>=5.0.31' 'apache' 'setuptools' 'memcached' 'libmemcache' 'python-cmemcache' 'patch' 'django')
url="http://www.review-board.org/"
source=(http://downloads.review-board.org/releases/ReviewBoard-$pkgver.tar.gz)
md5sums=('01275bd09844bab7da6a803ac819c5a1')

build() {
	install -d ${pkgdir}/usr/lib/python2.6/site-packages/ || return 1
        pushd ${srcdir}/ReviewBoard-$pkgver || return 1
        	./setup.py build || return 1
        	./setup.py install --prefix=/usr --root=${pkgdir} || return 1
		PYTHONPATH=${pkgdir}/usr/lib/python2.6/site-packages easy_install --install-dir=${pkgdir}/usr/lib/python2.6/site-packages --no-deps --upgrade Djblets || return 1
		rm ${pkgdir}/usr/lib/python2.6/site-packages/site.py ${pkgdir}/usr/lib/python2.6/site-packages/site.pyc ${pkgdir}/usr/lib/python2.6/site-packages/easy-install.pth
        popd || return 1
}
