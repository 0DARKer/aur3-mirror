# Maintainer: Aron Asor <aronasorman at gmail.com>
# IPython2 Maintainer: Chris Brannon <chris@the-brannons.com>
# Contributor : Douglas Soares de Andrade <dsa@aur.archlinux.org>

pkgname=ipython3-git
pkgver=20101114
pkgrel=1
arch=('any')
url="http://ipython.scipy.org/"
license=('BSD')
depends=('python')
makedepends=('python2' 'git') # for setup.py
#conflicts=('ipython' 'ipython-docs')
_gitroot='git://github.com/ipython/ipython-py3k.git'
_gitname='ipython-py3k'

build() {
    true
}

package() {
  pkgdesc="An enhanced Interactive Python shell."
  depends=('python')
  optdepends=("wxpython: needed for ipythonx and ipython-wx"
              "twisted: networking-related tasks"
              "python-foolscap: for IPython's parallel computing features"
              "python-pexpect: for irunner"
              "python-nose: if you want to run IPython's test suite")

  cd "$srcdir/"

  if [[ -d $_gitname ]]; then
      (cd $_gitname && git pull origin)
  else
      git clone $_gitroot $_gitname
  fi

  cd $_gitname

  python setup.py install --prefix=/usr --root="$pkgdir" --optimize=1
  mv "$pkgdir/usr/share/doc/ipython" "$pkgdir/usr/share/doc/ipython3"

  #kluge way to make this not conflict with ipython
  cd ${pkgdir}/usr/bin
  for i in `ls -1 .`; do mv $i ${i}3; done
}
