# Maintainer: Suhaimi Ghazi

pkgname=gnome-mpv-git
pkgver=35.ec199af
pkgrel=1
pkgdesc="GNOME frontend for MPV"
arch=('i686' 'x86_64')
url="https://github.com/gnome-mpv/gnome-mpv"
license=('GPL')
depends=('mpv' 'glib2' 'gtk3')
makedepends=('git')
source=('git+https://github.com/gnome-mpv/gnome-mpv.git')
_gitname=gnome-mpv
md5sums=('SKIP')

pkgver() {
    cd "$srcdir/$_gitname"
    echo $(git rev-list --count HEAD).$(git rev-parse --short HEAD)
}

build() {
    cd "$srcdir/$_gitname"
    autoreconf -sfi
    ./configure
    make
}

package() {
    cd "$srcdir/$_gitname"
    make DESTDIR="$pkgdir" install

    install -Dm644 gnome-mpv.desktop "$pkgdir/usr/share/applications/gnome-mpv.desktop"
    install -Dm755 gnome-mpv "$pkgdir/usr/bin/gnome-mpv"
    install -Dm644 gnome-mpv.svg "$pkgdir/usr/share/pixmaps/gnome-mpv.svg"
}
