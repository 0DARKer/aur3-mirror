diff -ru medit-0.10.5.orig/cmake/modules/FindMooPython.cmake medit-0.10.5/cmake/modules/FindMooPython.cmake
--- medit-0.10.5.orig/cmake/modules/FindMooPython.cmake	2010-12-06 01:50:43.000000000 -0500
+++ medit-0.10.5/cmake/modules/FindMooPython.cmake	2010-12-06 01:50:53.000000000 -0500
@@ -1,9 +1,10 @@
 MOO_OPTION(MOO_ENABLE_PYTHON TRUE "Enable Python" HEADER TRUE)
 
-SET(PYTHON_DEV_FOUND FALSE)
+SET(PYTHON_DEV_FOUND TRUE)
 
 MACRO(MOO_GET_PYTHON_SYSCONFIG_VAR var value error)
   SET(${error} FALSE)
+  SET(${value} "/usr/include/python2.7")
   EXECUTE_PROCESS(COMMAND "${PYTHON_EXECUTABLE}" -c "import distutils.sysconfig; print distutils.sysconfig.get_config_vars('${var}')[0]"
                   RESULT_VARIABLE _moo_gpsv_result
                   OUTPUT_VARIABLE _moo_gpsv_output
@@ -12,30 +13,21 @@
   IF(_moo_gpsv_result EQUAL 0)
     SET(${value} "${_moo_gpsv_output}")
   ELSE(_moo_gpsv_result EQUAL 0)
-    SET(${error} TRUE)
+    SET(${error} FALSE)
   ENDIF(_moo_gpsv_result EQUAL 0)
 ENDMACRO(MOO_GET_PYTHON_SYSCONFIG_VAR)
 
-IF(MOO_ENABLE_PYTHON)
-  PKG_CHECK_MODULES(PYGTK pygtk-2.0)
-  IF(PYGTK_FOUND)
-    _MOO_GET_PKG_CONFIG_VARIABLE(PYGTK_DEFS_DIR defsdir pygtk-2.0)
-    _MOO_GET_PKG_CONFIG_VARIABLE(PYGTK_CODEGEN_DIR codegendir pygtk-2.0)
-    MOO_GET_PYTHON_SYSCONFIG_VAR("INCLUDEPY" _moo_fp_includepy _moo_fp_error)
-    IF(NOT _moo_fp_error)
-      MOO_GET_PYTHON_SYSCONFIG_VAR("VERSION" _moo_fp_pyversion _moo_fp_error)
-    ENDIF(NOT _moo_fp_error)
-    IF(NOT _moo_fp_error AND WIN32)
-      MOO_GET_PYTHON_SYSCONFIG_VAR("prefix" _moo_fp_pyprefix _moo_fp_error)
-    ENDIF(NOT _moo_fp_error AND WIN32)
-    IF(NOT _moo_fp_error)
-      SET(PYTHON_LIBRARIES "python${_moo_fp_pyversion}")
-      FILE(TO_CMAKE_PATH "${_moo_fp_includepy}" PYTHON_INCLUDE_DIRS)
-      FILE(TO_CMAKE_PATH "${_moo_fp_pyprefix}/libs" PYTHON_LIBRARY_DIRS)
-      SET(PYTHON_DEV_FOUND TRUE)
-    ENDIF(NOT _moo_fp_error)
-  ENDIF(PYGTK_FOUND)
-ENDIF(MOO_ENABLE_PYTHON)
+PKG_CHECK_MODULES(PYGTK pygtk-2.0)
+IF(PYGTK_FOUND)
+  _MOO_GET_PKG_CONFIG_VARIABLE(PYGTK_DEFS_DIR defsdir pygtk-2.0)
+  _MOO_GET_PKG_CONFIG_VARIABLE(PYGTK_CODEGEN_DIR codegendir pygtk-2.0)
+  MOO_GET_PYTHON_SYSCONFIG_VAR("INCLUDEPY" _moo_fp_includepy _moo_fp_error)
+  MOO_GET_PYTHON_SYSCONFIG_VAR("VERSION" _moo_fp_pyversion _moo_fp_error)
+  SET(PYTHON_LIBRARIES "python2.7")
+  FILE(TO_CMAKE_PATH "${_moo_fp_includepy}" PYTHON_INCLUDE_DIRS)
+  FILE(TO_CMAKE_PATH "${_moo_fp_pyprefix}/libs" PYTHON_LIBRARY_DIRS)
+  SET(PYTHON_DEV_FOUND TRUE)
+ENDIF(PYGTK_FOUND)
 
 MOO_DEBUG(STATUS "PYTHON_DEV_FOUND = ${PYTHON_DEV_FOUND}")
 
diff -ru medit-0.10.5.orig/cmake/moo-libs.cmake medit-0.10.5/cmake/moo-libs.cmake
--- medit-0.10.5.orig/cmake/moo-libs.cmake	2010-12-06 01:50:43.000000000 -0500
+++ medit-0.10.5/cmake/moo-libs.cmake	2010-12-06 01:56:55.000000000 -0500
@@ -48,7 +48,7 @@
 #
 # ENDMACRO(MOO_ADD_SOURCE_FILE_SET)
 
-MACRO(MOO_ADD_LIBRARY libname)
+MACRO(MOO_ADD_STATIC_LIBRARY libname)
   STRING(TOUPPER ${libname} _mal_mod)
   GET_DIRECTORY_PROPERTY(_mal_stamps MOO_STAMPS)
   GET_DIRECTORY_PROPERTY(_mal_built_sources MOO_BUILT_SOURCES)
@@ -60,10 +60,17 @@
 #     ENDIF("${_moo_source_file}" MATCHES ".*[.]c$")
 #   ENDFOREACH(_moo_source_file)
   ADD_LIBRARY(${libname} STATIC ${ARGN} ${${_mal_mod}_SOURCES} ${_mal_stamps} ${_mal_built_sources})
-ENDMACRO(MOO_ADD_LIBRARY)
+ENDMACRO(MOO_ADD_STATIC_LIBRARY)
+
+MACRO(MOO_ADD_SHARED_LIBRARY libname)
+  STRING(TOUPPER ${libname} _mal_mod)
+  GET_DIRECTORY_PROPERTY(_mal_stamps MOO_STAMPS)
+  GET_DIRECTORY_PROPERTY(_mal_built_sources MOO_BUILT_SOURCES)
+  ADD_LIBRARY(${libname} SHARED ${ARGN} ${${_mal_mod}_SOURCES} ${_mal_stamps} ${_mal_built_sources})
+ENDMACRO(MOO_ADD_SHARED_LIBRARY)
 
 MACRO(MOO_ADD_MOO_CODE_MODULE)
-  MOO_ADD_LIBRARY(${ARGN})
+  MOO_ADD_SHARED_LIBRARY(${ARGN})
   INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR} ${CMAKE_CURRENT_BINARY_DIR})
 ENDMACRO(MOO_ADD_MOO_CODE_MODULE)
 
diff -ru medit-0.10.5.orig/medit/CMakeLists.txt medit-0.10.5/medit/CMakeLists.txt
--- medit-0.10.5.orig/medit/CMakeLists.txt	2010-12-06 01:50:43.000000000 -0500
+++ medit-0.10.5/medit/CMakeLists.txt	2010-12-06 02:06:20.000000000 -0500
@@ -6,29 +6,51 @@
   ADD_DEFINITIONS(-DSRCDIR="${CMAKE_SOURCE_DIR}/medit")
 ENDIF(MOO_ENABLE_UNIT_TESTS)
 
-IF(MOO_ENABLE_PYTHON)
-  SET(moopythonlib moopython)
-ENDIF(MOO_ENABLE_PYTHON)
-
 SET(MEDIT_SOURCES mem-debug.h run-tests.h parse.h main.c)
-SET(medit_libs
+
+SET(MOOMOD_SOURCES
+  ../plugins/moopython/moo-mod.c
+  ../plugins/moopython/moopython-api.h
+  ../plugins/moopython/moopython-utils.h
+  ../plugins/moopython/moopython-utils.c
+  ../plugins/moopython/moopython-loader.h
+  ../plugins/moopython/moopython-loader.c
+  ../plugins/moopython/pygtk/mooapp-mod.c
+  ../plugins/moopython/pygtk/mooedit-mod.c
+  ../plugins/moopython/pygtk/mooutils-mod.c
+  ../plugins/moopython/pygtk/mooapp-pygtk.c
+  ../plugins/moopython/pygtk/mooedit-pygtk.c
+  ../plugins/moopython/pygtk/mooutils-pygtk.c
+  ../plugins/moopython/pygtk/moo-pygtk.c
+  ../plugins/moopython/pygtk/moo-pygtk.h
+)
+
+SET(medit_plugins
   meditplugins
-  ${moopythonlib}
+  moopython
+)
+
+SET(medit_libs
   moousertools
   mooapp
-  smclient
+  moosmclient
   mooedit
-  gtksourceview
+  moogtksourceview
   moofileview
   moolua
   mooutils
-  xdgmime
+  mooxdgmime
   moo
 )
 
 MOO_WIN32_RESOURCE(medit.rc.in medit MEDIT_SOURCES medit_libs)
 
-INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR})
+INCLUDE_DIRECTORIES(
+  ${CMAKE_SOURCE_DIR}
+  ${PYTHON_INCLUDE_DIRS}
+  ${PYGTK_INCLUDE_DIRS}
+  ${MOO_SOURCE_DIR}/plugins
+)
 
 IF(MOO_OS_LINUX)
   LIST(APPEND MOO_DEP_LIBS m dl)
@@ -39,12 +61,13 @@
 ENDIF(NOT MOO_ENABLE_UNIT_TESTS)
 
 ADD_EXECUTABLE(medit ${MEDIT_WIN32} ${MEDIT_SOURCES})
-TARGET_LINK_LIBRARIES(medit ${medit_libs} ${MOO_DEP_LIBS})
+ADD_LIBRARY(moomod SHARED ${MOOMOD_SOURCES})
+TARGET_LINK_LIBRARIES(medit ${medit_plugins} ${medit_libs} ${MOO_DEP_LIBS})
+TARGET_LINK_LIBRARIES(moomod ${medit_libs} ${MOO_DEP_LIBS})
 INSTALL(TARGETS medit DESTINATION ${BINDIR})
+INSTALL(TARGETS moomod DESTINATION ${LIBDIR}/python2.7/site-packages)
 
-IF(MOO_ENABLE_PYTHON)
-  ADD_DEPENDENCIES(medit python-plugins-ini)
-ENDIF(MOO_ENABLE_PYTHON)
+ADD_DEPENDENCIES(medit python-plugins-ini)
 
 FIND_PACKAGE(MooDesktopFile)
 MOO_INSTALL_DESKTOP_FILE(medit.desktop.in)
Only in medit-0.10.5/medit: CMakeLists.txt.orig
Only in medit-0.10.5/medit: CMakeLists.txt.rej
diff -ru medit-0.10.5.orig/moo/CMakeLists.txt medit-0.10.5/moo/CMakeLists.txt
--- medit-0.10.5.orig/moo/CMakeLists.txt	2010-12-06 01:50:42.000000000 -0500
+++ medit-0.10.5/moo/CMakeLists.txt	2010-12-06 01:50:53.000000000 -0500
@@ -41,4 +41,5 @@
   LIST(APPEND MOO_SOURCES ${CMAKE_CURRENT_BINARY_DIR}/moo.def)
 ENDIF(MSVC)
 
-MOO_ADD_LIBRARY(moo)
+MOO_ADD_SHARED_LIBRARY(moo)
+INSTALL(TARGETS moo DESTINATION ${LIBDIR})
\ No newline at end of file
diff -ru medit-0.10.5.orig/moo/mooapp/CMakeLists.txt medit-0.10.5/moo/mooapp/CMakeLists.txt
--- medit-0.10.5.orig/moo/mooapp/CMakeLists.txt	2010-12-06 01:50:42.000000000 -0500
+++ medit-0.10.5/moo/mooapp/CMakeLists.txt	2010-12-06 01:50:53.000000000 -0500
@@ -27,5 +27,5 @@
 )
 
 MOO_ADD_MOO_CODE_MODULE(mooapp)
-
+INSTALL(TARGETS mooapp DESTINATION ${LIBDIR})
 ADD_SUBDIRECTORY(smclient)
diff -ru medit-0.10.5.orig/moo/mooapp/smclient/CMakeLists.txt medit-0.10.5/moo/mooapp/smclient/CMakeLists.txt
--- medit-0.10.5.orig/moo/mooapp/smclient/CMakeLists.txt	2010-12-06 01:50:42.000000000 -0500
+++ medit-0.10.5/moo/mooapp/smclient/CMakeLists.txt	2010-12-06 01:50:53.000000000 -0500
@@ -1,4 +1,4 @@
-SET(SMCLIENT_SOURCES
+SET(MOOSMCLIENT_SOURCES
   eggsmclient.c
   eggsmclient.h
   eggsmclient-mangle.h
@@ -6,14 +6,14 @@
 )
 
 IF(WIN32)
-  LIST(APPEND SMCLIENT_SOURCES eggsmclient-win32.c)
+  LIST(APPEND MOOSMCLIENT_SOURCES eggsmclient-win32.c)
 ELSEIF(APPLE)
-  LIST(APPEND SMCLIENT_SOURCES eggsmclient-dummy.c)
+  LIST(APPEND MOOSMCLIENT_SOURCES eggsmclient-dummy.c)
 ELSE(WIN32)
   MOO_ADD_COMPILE_DEFINITIONS(-DEGG_SM_CLIENT_BACKEND_XSMP)
-  LIST(APPEND SMCLIENT_SOURCES eggsmclient-xsmp.c eggdesktopfile.h eggdesktopfile.c)
+  LIST(APPEND MOOSMCLIENT_SOURCES eggsmclient-xsmp.c eggdesktopfile.h eggdesktopfile.c)
 ENDIF(WIN32)
 
-MOO_ADD_MOO_CODE_MODULE(smclient)
-
+MOO_ADD_MOO_CODE_MODULE(moosmclient)
+INSTALL(TARGETS moosmclient DESTINATION ${LIBDIR})
 # -%- strip:true -%-
diff -ru medit-0.10.5.orig/moo/mooedit/CMakeLists.txt medit-0.10.5/moo/mooedit/CMakeLists.txt
--- medit-0.10.5.orig/moo/mooedit/CMakeLists.txt	2010-12-06 01:50:42.000000000 -0500
+++ medit-0.10.5/moo/mooedit/CMakeLists.txt	2010-12-06 01:50:53.000000000 -0500
@@ -124,6 +124,6 @@
 ADD_SUBDIRECTORY(langs)
 
 MOO_ADD_MOO_CODE_MODULE(mooedit)
-ADD_DEPENDENCIES(mooedit gtksourceview)
-
+ADD_DEPENDENCIES(mooedit moogtksourceview)
+INSTALL(TARGETS mooedit DESTINATION ${LIBDIR})
 # -%- strip:true -%-
diff -ru medit-0.10.5.orig/moo/mooedit/gtksourceview/CMakeLists.txt medit-0.10.5/moo/mooedit/gtksourceview/CMakeLists.txt
--- medit-0.10.5.orig/moo/mooedit/gtksourceview/CMakeLists.txt	2010-12-06 01:50:42.000000000 -0500
+++ medit-0.10.5/moo/mooedit/gtksourceview/CMakeLists.txt	2010-12-06 01:50:53.000000000 -0500
@@ -37,12 +37,12 @@
 
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR} ${CMAKE_CURRENT_BINARY_DIR})
 
-SET(GTKSOURCEVIEW_SOURCES
+SET(MOOGTKSOURCEVIEW_SOURCES
   gtksourceview-i18n.h
   gtksourceview-marshal.h
   gtksourceview-api.h
 )
 
-MOO_ADD_MOO_CODE_MODULE(gtksourceview)
-
+MOO_ADD_MOO_CODE_MODULE(moogtksourceview)
+INSTALL(TARGETS moogtksourceview DESTINATION ${LIBDIR})
 # -%- strip:true -%-
diff -ru medit-0.10.5.orig/moo/moofileview/CMakeLists.txt medit-0.10.5/moo/moofileview/CMakeLists.txt
--- medit-0.10.5.orig/moo/moofileview/CMakeLists.txt	2010-12-06 01:50:43.000000000 -0500
+++ medit-0.10.5/moo/moofileview/CMakeLists.txt	2010-12-06 01:50:53.000000000 -0500
@@ -42,5 +42,5 @@
 MOO_GEN_UIXML(moofileview.xml)
 
 MOO_ADD_MOO_CODE_MODULE(moofileview)
-
+INSTALL(TARGETS moofileview DESTINATION ${LIBDIR})
 # -%- strip:true -%-
diff -ru medit-0.10.5.orig/moo/moolua/CMakeLists.txt medit-0.10.5/moo/moolua/CMakeLists.txt
--- medit-0.10.5.orig/moo/moolua/CMakeLists.txt	2010-12-06 01:50:42.000000000 -0500
+++ medit-0.10.5/moo/moolua/CMakeLists.txt	2010-12-06 01:50:53.000000000 -0500
@@ -16,5 +16,5 @@
 )
 
 MOO_ADD_MOO_CODE_MODULE(moolua)
-
+INSTALL(TARGETS moolua DESTINATION ${LIBDIR})
 # -%- strip:true -%-
diff -ru medit-0.10.5.orig/moo/mooutils/CMakeLists.txt medit-0.10.5/moo/mooutils/CMakeLists.txt
--- medit-0.10.5.orig/moo/mooutils/CMakeLists.txt	2010-12-06 01:50:42.000000000 -0500
+++ medit-0.10.5/moo/mooutils/CMakeLists.txt	2010-12-06 01:50:53.000000000 -0500
@@ -209,7 +209,7 @@
 )
 
 MOO_ADD_MOO_CODE_MODULE(mooutils)
-
+INSTALL(TARGETS mooutils DESTINATION ${LIBDIR})
 ADD_SUBDIRECTORY(xdgmime)
 
 # -%- strip:true -%-
diff -ru medit-0.10.5.orig/moo/mooutils/xdgmime/CMakeLists.txt medit-0.10.5/moo/mooutils/xdgmime/CMakeLists.txt
--- medit-0.10.5.orig/moo/mooutils/xdgmime/CMakeLists.txt	2010-12-06 01:50:42.000000000 -0500
+++ medit-0.10.5/moo/mooutils/xdgmime/CMakeLists.txt	2010-12-06 01:50:53.000000000 -0500
@@ -1,4 +1,4 @@
-SET(XDGMIME_SOURCES
+SET(MOOXDGMIME_SOURCES
   xdgmimealias.c
   xdgmimealias.h
   xdgmime.c
@@ -16,6 +16,6 @@
   xdgmimeparent.h
 )
 
-MOO_ADD_MOO_CODE_MODULE(xdgmime)
-
+MOO_ADD_MOO_CODE_MODULE(mooxdgmime)
+INSTALL(TARGETS mooxdgmime DESTINATION ${LIBDIR})
 # -%- strip:true -%-
diff -ru medit-0.10.5.orig/plugins/CMakeLists.txt medit-0.10.5/plugins/CMakeLists.txt
--- medit-0.10.5.orig/plugins/CMakeLists.txt	2010-12-06 01:50:43.000000000 -0500
+++ medit-0.10.5/plugins/CMakeLists.txt	2010-12-06 01:50:53.000000000 -0500
@@ -64,10 +64,8 @@
   glade/moogrep.glade
 )
 
-MOO_ADD_LIBRARY(meditplugins)
+MOO_ADD_STATIC_LIBRARY(meditplugins)
 
-IF(MOO_ENABLE_PYTHON)
-  ADD_SUBDIRECTORY(moopython)
-ENDIF(MOO_ENABLE_PYTHON)
+ADD_SUBDIRECTORY(moopython)
 
 # -%- strip:true -%-
diff -ru medit-0.10.5.orig/plugins/moopython/CMakeLists.txt medit-0.10.5/plugins/moopython/CMakeLists.txt
--- medit-0.10.5.orig/plugins/moopython/CMakeLists.txt	2010-12-06 01:50:43.000000000 -0500
+++ medit-0.10.5/plugins/moopython/CMakeLists.txt	2010-12-06 01:50:53.000000000 -0500
@@ -161,6 +161,6 @@
 # 	$(PYGTK_CFLAGS)
 
 INCLUDE_DIRECTORIES(${MOO_SOURCE_DIR})
-MOO_ADD_LIBRARY(moopython ${MOOPYTHON_SOURCES} ${MOOPYGTK_SOURCES})
+MOO_ADD_STATIC_LIBRARY(moopython ${MOOPYTHON_SOURCES} ${MOOPYGTK_SOURCES})
 
 # -%- strip:true, indent-width:2 -%-
diff -ru medit-0.10.5.orig/plugins/usertools/CMakeLists.txt medit-0.10.5/plugins/usertools/CMakeLists.txt
--- medit-0.10.5.orig/plugins/usertools/CMakeLists.txt	2010-12-06 01:50:43.000000000 -0500
+++ medit-0.10.5/plugins/usertools/CMakeLists.txt	2010-12-06 01:50:53.000000000 -0500
@@ -43,5 +43,5 @@
 MOO_GEN_ENUMS(moousertools)
 
 MOO_ADD_MOO_CODE_MODULE(moousertools)
-
+INSTALL(TARGETS moousertools DESTINATION ${LIBDIR})
 # -%- strip:true -%-
