# Maintainer: Massimiliano Torromeo <massimiliano.torromeo@gmail.com>

pkgname=xtrabackup
pkgver=1.4
pkgrel=1
pkgdesc="A MySQL non-blocking backup solution for InnoDB and XtraDB (Percona Server) data."
arch=("i686" "x86_64")
url="http://www.percona.com/software/percona-xtrabackup/"
license=('GPL')
depends=("perl")

source=("http://www.percona.com/downloads/XtraBackup/XtraBackup-$pkgver/Linux/binary/$CARCH/$pkgname-$pkgver.tar.gz" "skip-version-check.patch")

md5sums=('52036ca91eecc54c58fdab3122b39522' 'e6c97fb9d848f40ac5eafb83fe05a2d4')
[ "$CARCH" = "x86_64" ] && md5sums=('28ceb06226ec23956a2cc78b4c948fb1' 'e6c97fb9d848f40ac5eafb83fe05a2d4')

build() {
	cd $srcdir/$pkgname-$pkgver/bin
	patch -Np0 -i $srcdir/skip-version-check.patch
	install -d $pkgdir/usr/bin
	install -m0755 tar4ibd xtrabackup $pkgdir/usr/bin/
	install -m0755 innobackupex-1.5.1 $pkgdir/usr/bin/innobackupex
}
