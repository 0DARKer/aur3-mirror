# Maintainer : Chris Heien <chris.h.heien@gmail.com>
# Contributor: Dany Martineau <dany.luc.martineau at gmail.com>

pkgname=libkface-svn
pkgver=1214864
pkgrel=1
pkgdesc="LibFace Library interface for KDE . SVN Version"
arch=('i686' 'x86_64')
url="http://www.digikam.org/"
license=('GPL')
depends=('kdelibs' 'libface-svn')
makedepends=('subversion' 'cmake' 'pkgconfig')

_svntrunk=svn://anonsvn.kde.org/home/kde/branches/extragear/graphics/digikam/extra/libkface
_svnmod=libkface

build() {
  cd ${srcdir}

  if [ -d ${_svnmod}/.svn ]; then
    (cd ${_svnmod} && svn revert -R .)
    (cd ${_svnmod} && svn -r ${pkgver} up)
  else
    svn co ${_svntrunk} --config-dir ./ -r ${pkgver} ${_svnmod}
  fi

  msg "SVN checkout done or server timeout"
  msg "Starting make..."

  cd ${srcdir}/${_svnmod}
  rm cmake/modules_opencv/FindOpenCV.cmake

  cmake -DCMAKE_INSTALL_PREFIX=/usr \
     -DCMAKE_SKIP_RPATH=ON 

  make all
  make DESTDIR=${pkgdir} install 

}
