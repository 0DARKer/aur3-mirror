# Maintainer: celmir <scribecelmir@tuxfamily.org>
pkgname=landeseternelleslinux
pkgver=1.6.2.2
pkgrel=1
pkgdesc="Fork of Eternal Lands's mmorpg for french speaking players"
arch=('i686' 'x86_64')
url="http://www.landes-eternelles.com"
license=(custom:'eternal_lands_license')
depends=('sdl_net' 'sdl_image' 'cal3d' 'mesa' 'openal' 'libxslt' 'libvorbis' )
makedepends=('make')
install='landeseternelles.install'
source=(http://landes-eternelles.com/client/Client_Sources-1.6.2.2.tar.bz2
        http://landes-eternelles.com/client/LandesEternellesLinux-1.6.2.2.tar.bz2
	http://landes-eternelles.com/el_data/Maj_septembre_2011.zip
	landeseternelles.desktop
        landeseternelles.png
)
md5sums=('57694ed594fed9c210e3ce96b69a2d3f'
'e3dc5c797ed0c70e9a34c334ceb637ac'
'ce81b78b51ec50b2232befb6dabd88d8'
'34b87dba614b242297375cec98255acf'
'410fed06fca941a95b0427c30cb697c5'
)

build() {
  cd "$srcdir/client_sources"
  make -f Makefile.linux || return 1
}

package() {
  mkdir -p $pkgdir/usr/{bin,share/{$pkgname,licenses/$pkgname,pixmaps,applications}}
  install -m644 $srcdir/landeseternelles.desktop $pkgdir/usr/share/applications/landeseternelles.desktop
  install -m644 $srcdir/landeseternelles.png $pkgdir/usr/share/pixmaps/landeseternelles.png
if [ $CARCH == "x86_64" ];then
  cd "$srcdir/client_sources"
  install -m755 le.x86_64.linux.bin $pkgdir/usr/bin/le.x86_64.linux.bin
else
  cd "$srcdir/client_sources"
  install -m755 le.x86.linux.bin $pkgdir/usr/bin/le.x86.linux.bin
fi
  cd "$srcdir"
  mv -f *.gz $srcdir/LandesEternellesLinux/maps/
  chmod 0644 $srcdir/LandesEternellesLinux/maps/*.gz
  cd "$srcdir/LandesEternellesLinux"
  rm -f *.bin icon.bmp
  mv -f Licence_logiciel_et_donnees_du_client.txt Accord_general_de_licence_LE.txt $pkgdir/usr/share/licenses/$pkgname/
  mv -f * $pkgdir/usr/share/$pkgname/
}

# vim:set ts=2 sw=2 et:
