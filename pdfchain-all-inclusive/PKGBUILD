# Maintainer: Dan Serban

pkgname=pdfchain-all-inclusive
pkgver=0.123
pkgrel=2
pkgdesc="Combo package: PDF Chain and pdftk"
depends=(gtkmm)
makedepends=(intltool)
provides=(pdftk pdftk-bin pdfchain)
conflicts=(pdftk pdftk-bin pdfchain)
license=(GPLv3)
url=http://pdfchain.sourceforge.net/
arch=(i686 x86_64)
source=("http://downloads.sourceforge.net/project/pdfchain/pdfchain-${pkgver}/PDF%20Chain%20version%20${pkgver}/pdfchain-${pkgver}.tar.gz")
md5sums=('88870ffaf28833b85d84b02da60f41a4')
_filearch=i386
[ "${CARCH}" = "x86_64" ] && _filearch=amd64
_pdftk_pkg_ver=1.44
_pdftk_deb_ver=3
_libgcj12_pkg_ver=4.6.0
_libgcj12_deb_ver=3

build()
{
  wget "http://mirrors.kernel.org/debian/pool/main/p/pdftk/pdftk_${_pdftk_pkg_ver}-${_pdftk_deb_ver}_${_filearch}.deb"
  ar -xv "pdftk_${_pdftk_pkg_ver}-${_pdftk_deb_ver}_${_filearch}.deb"
  bsdtar -xvf data.tar.gz -C "${pkgdir}"
  rm data.tar.gz
  wget "http://mirrors.kernel.org/debian/pool/main/g/gcj-4.6/libgcj12_${_libgcj12_pkg_ver}-${_libgcj12_deb_ver}_${_filearch}.deb"
  ar -xv "libgcj12_${_libgcj12_pkg_ver}-${_libgcj12_deb_ver}_${_filearch}.deb"
  bsdtar -xvf data.tar.gz
  rm data.tar.gz
  install -Dm644 usr/lib/libgcj.so.12.0.0 "${pkgdir}"/usr/lib/libgcj.so.12
  cd "pdfchain-${pkgver}"
  ./configure
  make || return 1
  make prefix="${pkgdir}"/usr install
}
