# Maintainer: mareex <marcus.behrendt.86@gmail.com>

pkgname=pidgin-whatsapp
pkgver=0.4.2
pkgrel=2
pkgdesc="Whatsapp protocol for pidgin"
arch=('any')
url="https://launchpad.net/~whatsapp-purple/+archive/ppa/"
license=('GPL')
depends=('pidgin')
makedepends=('make')
source=('http://ppa.launchpad.net/whatsapp-purple/ppa/ubuntu/pool/main/p/pidgin-whatsapp/pidgin-whatsapp_0.4-2.tar.gz')
sha256sums=('5fed75e121a2bd6111250a1b6fb9e1b3d8bf765b5105ca4814f9511bb89d0a71')

build() {
   cd $srcdir/whatsapp-purple
   make
}

package() {
  mkdir -p $pkgdir/usr/lib/purple-2/
  mkdir -p $pkgdir/usr/share/doc/pidgin-whatsapp
  mkdir -p $pkgdir/usr/share/pixmaps/pidgin/protocols/16
  mkdir -p $pkgdir/usr/share/pixmaps/pidgin/protocols/22
  mkdir -p $pkgdir/usr/share/pixmaps/pidgin/protocols/48
  install -m0755 $srcdir/whatsapp-purple/libwhatsapp.so "$pkgdir/usr/lib/purple-2/"
  install -m0644 $srcdir/whatsapp-purple/debian/copyright "$pkgdir/usr/share/doc/pidgin-whatsapp"
  install -m0644 $srcdir/whatsapp-purple/debian/changelog "$pkgdir/usr/share/doc/pidgin-whatsapp"
  install -m0644 $srcdir/whatsapp-purple/whatsapp16.png "$pkgdir/usr/share/pixmaps/pidgin/protocols/16/whatsapp.png"
  install -m0644 $srcdir/whatsapp-purple/whatsapp22.png "$pkgdir/usr/share/pixmaps/pidgin/protocols/22/whatsapp.png"
  install -m0644 $srcdir/whatsapp-purple/whatsapp48.png "$pkgdir/usr/share/pixmaps/pidgin/protocols/48/whatsapp.png"
}
