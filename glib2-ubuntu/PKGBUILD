# Maintainer: Nishant Rodrigues <nishantjr@ymail.com>
 
pkgname=glib2-ubuntu
pkgver=2.26.1
pkgrel=1
pkgdesc="Common C routines used by GTK+ 2.4 and other libs"
url="http://www.gtk.org/"
arch=(i686 x86_64)
license=("LGPL")
depends=("pcre>=8.02")
provides=("glib2=${pkgver}")
conflicts=("glib2")
makedepends=("python2")
options=('!libtool' '!docs')
source=("http://archive.ubuntu.com/ubuntu/pool/main/g/glib2.0/glib2.0_${pkgver}.orig.tar.gz"
    "http://archive.ubuntu.com/ubuntu/pool/main/g/glib2.0/glib2.0_${pkgver}-0ubuntu1.diff.gz"
        "glib2.sh"
        "glib2.csh")
md5sums=(2634337609e747fc7946517e3008d53c
         d12d73115bea22d3cb25d9c4ea09367c
     803017b365bd35dc20b092ce43b8c8c5
     90c7b830bef4baf225c2eb8b7ead0cab)

build() {
  patch -Np1 -i "${srcdir}/glib2.0_${pkgver}-0ubuntu1.diff"
  cd "${srcdir}/glib-${pkgver}"
  patch -Np1 -i "${srcdir}/debian/patches/71_gio_launch_handler.patch"
  ./configure --prefix=/usr \
      --sysconfdir=/etc \
      --with-pcre=system \
      --disable-fam
  make
  make DESTDIR="${pkgdir}" install

  install -d "${pkgdir}/etc/profile.d"
  install -m755 "${srcdir}/glib2.sh" "${pkgdir}/etc/profile.d/"
  install -m755 "${srcdir}/glib2.csh" "${pkgdir}/etc/profile.d/"
}
