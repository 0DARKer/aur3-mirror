# This is an example PKGBUILD file. Use this as a start to creating your own,
# and remove these comments. For more information, see 'man PKGBUILD'.
# NOTE: Please fill out the license field for your package! If it is unknown,
# then please put 'unknown'.

# Contributor: David Markey <david@dmarkey.com>
pkgname=tgt
pkgver=1.0.3
pkgrel=1
pkgdesc="tgt daemon and userspace tools(ISCSI Support)"
arch=('x86_64' 'i686')
url="http://stgt.sourceforge.net/"
license=('GPL')
groups=()
depends=('perl-config-general')
makedepends=()
optdepends=()
provides=()
conflicts=()
replaces=()
backup=( 'etc/tgt/targets.conf' )
options=()
install=
source=(http://stgt.sourceforge.net/releases/$pkgname-$pkgver.tar.gz)
noextract=()
#md5sums=() #generate with 'makepkg -g'
md5sums=('5a7c6b2c585c5f969c64e2c19f49f439')

build() {
  cd "$srcdir/$pkgname-$pkgver"

  make ISCSI=1 PREFIX="$pkgdir" || return 1

  make DESTDIR="$pkgdir" install
  
  mkdir -p $pkgdir/etc/rc.d

  cp scripts/initd.sample $pkgdir/etc/rc.d/tgt

  chmod 755 $pkgdir/etc/rc.d/tgt
}

# vim:set ts=2 sw=2 et:
