# Contributor: Ryan Corder <ryanc@greengrey.org>
# Maintainer: Laszlo Papp <djszapi at archlinux us>

pkgname=ckermit
pkgver=9.0.301
pkgrel=1
pkgdesc="Portable scriptable network and serial communication software"
arch=('i686' 'x86_64')
license=('custom')
depends=('ncurses')
source=(ftp://kermit.columbia.edu/kermit/archives/cku301.tar.gz)
url="http://www.columbia.edu/kermit/ck90.html"
md5sums=('59e80f909edf305933af8e0348dcc5d7')

build() {
    cd $srcdir
    chmod -R og-rwx ./

    make linux || return 1

    mkdir -m 0755 -p $pkgdir/usr/bin || return 1
    mkdir -m 0755 -p $pkgdir/usr/share/man/man1 || return 1
    mkdir -m 0755 -p $pkgdir/usr/share/licenses/$pkgname || return 1

    install -m 755 wermit $pkgdir/usr/bin/ckermit || return 1
    ln -s /usr/bin/ckermit $pkgdir/usr/bin/ckermit-sshsub
    install -m 644 ckuker.nr $pkgdir/usr//share/man/man1/ckermit.1 || return 1
    install -m 644 COPYING.TXT $pkgdir/usr/share/licenses/$pkgname/License.txt || return 1

    echo "#!/usr/bin/ckermit" > _tmp.ini
    cat ckermit.ini >> _tmp.ini
    install -m 755 _tmp.ini $pkgdir/usr/bin/ckermit.ini
}
