# Maintainer: jrobb <jon at epic sloth dot org>
#   thanks, speps!

pkgname=pumpa-git
_appname=pumpa
pkgver=097e835
pkgrel=1
pkgdesc="A simple pump.io client written in C++ and Qt, git version"
arch=('i686' 'x86_64')
url="http://gitorious.org/pumpa"
license=('GPL3')
depends=('qt5-base' 'aspell' 'tidyhtml')
install="$pkgname.install"
source=("$url/${_appname}/archive/$pkgver.tar.gz")
md5sums=('4c1dec0123bbaffbb6c700d266c542b7')

prepare() {
  cd ${_appname}-${_appname}

  # icon path fix
  sed -i 's|/.*/||' ${_appname}.desktop
}

build() {
  cd ${_appname}-${_appname}
  qmake
  make
}

package() {
  cd ${_appname}-${_appname}

  # bin
  install -Dm755 ${_appname} \
    "$pkgdir/usr/bin/${_appname}"

  # desktop file
  install -Dm644 ${_appname}.desktop \
    "$pkgdir/usr/share/applications/${_appname}.desktop"

  # icon
  install -Dm644 images/${_appname}.png \
    "$pkgdir/usr/share/pixmaps/${_appname}.png"
}
