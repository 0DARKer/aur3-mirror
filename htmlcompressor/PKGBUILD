# Maintainer: Peter A. Shevtsov <pshevtsov at severusweb dot ru>
pkgname=htmlcompressor
pkgver=1.5.2
pkgrel=1
pkgdesc="HTML compressor and minifier."
arch=(any)
url="http://code.google.com/p/htmlcompressor/"
license=('APACHE')
depends=(java-runtime)
optdepends=('yuicompressor: inline css and javascript compression'
'closure-compiler: inline javascript compression')
source=("http://${pkgname}.googlecode.com/files/${pkgname}-${pkgver}.jar")
sha256sums=('dd1a0315bd0ed74e6611c18c8e0a87b78fdd0b2eabe650eeca1f51bb0c75ce4a')

package() {
    cd $srcdir

    install -m644 -D ${pkgname}-${pkgver}.jar \
        $pkgdir/usr/share/java/$pkgname/${pkgname}.jar
    mkdir -p $pkgdir/usr/bin
    echo '#!/bin/sh
"$JAVA_HOME/bin/java" -jar /usr/share/java/htmlcompressor/htmlcompressor.jar $@' > \
        $pkgdir/usr/bin/$pkgname
    chmod +x $pkgdir/usr/bin/$pkgname
    ln -s ../closure-compiler/closure-compiler.jar \
        $pkgdir/usr/share/java/$pkgname/compiler.jar
    ln -s ../yuicompressor-2.4.2.jar \
        $pkgdir/usr/share/java/$pkgname/yuicompressor.jar
}
