# Maintainer: Thomas Jost <schnouki@schnouki.net>
pkgname=libspotify
pkgver=0.0.6
pkgrel=1
pkgdesc="C API package allowing third party developers to write applications that utilize the Spotify music streaming service"
arch=(i686 x86_64)
url="http://developer.spotify.com/en/libspotify/overview/"
license=('custom')
depends=('glibc')
source=(http://developer.spotify.com/download/libspotify/libspotify-${pkgver}-linux6-${CARCH}.tar.gz)

md5sums=('5604472191b7830225bb7cc3e3129de7')
sha1sums=('a6fe79207e34384c11cdfc5e68fd8cba1279c62a')
if [ "$CARCH" == "x86_64" ]; then
  md5sums=('6d680d953a46d391269401a08dc7d2ac')
  sha1sums=('adc9ecca25bcdf4ce10649c71662b10855fcbf50')
fi

build() {
  cd "$srcdir/$pkgname-$pkgver-linux6-$CARCH"

  make prefix="$pkgdir/usr" install

  # Install documentation
  mkdir -p $pkgdir/usr/share/man
  cp -R share/man3 $pkgdir/usr/share/man/man3
  cp -R share/doc $pkgdir/usr/share/doc

  # Correct pkgconfig file
  sed -e s:@pkg_prefix@:/usr:g \
          < lib/pkgconfig/libspotify.pc.in \
          > $pkgdir/usr/lib/pkgconfig/libspotify.pc

  # Custom license
  mkdir -p $pkgdir/usr/share/licenses/libspotify
  ln -s ../../doc/libspotify/LICENSE $pkgdir/usr/share/licenses/libspotify/LICENSE
}

# Local Variables:
# pkgbuild-update-sums-on-save: nil
# End:
