--- Makefile	2012-11-14 16:01:49.000000000 +0100
+++ Makefile-lua-5.2	2012-12-13 12:24:02.000000000 +0100
@@ -37,9 +37,9 @@
 	PKG_WNCK=libwnck-3.0
 endif
 
-LIB_CFLAGS=`pkg-config --cflags $(PKG_GTK) $(PKG_WNCK) lua5.1`
+LIB_CFLAGS=`pkg-config --cflags $(PKG_GTK) $(PKG_WNCK) lua`
 STD_LDFLAGS=
-LIBS=-lX11 `pkg-config --libs $(PKG_GTK) $(PKG_WNCK) lua5.1`
+LIBS=-lX11 `pkg-config --libs $(PKG_GTK) $(PKG_WNCK) lua`
 
 LOCAL_CFLAGS=$(STD_CFLAGS) $(DEPRECATED) $(CFLAGS) $(LIB_CFLAGS)
 LOCAL_LDFLAGS=$(LDFLAGS) $(STD_LDFLAGS)
--- src/script.c	2012-11-14 16:01:49.000000000 +0100
+++ src/script.c-lua-5.2	2012-12-13 12:19:23.000000000 +0100
@@ -62,7 +62,7 @@
 lua_State *
 init_script()
 {
-	lua_State *lua=lua_open();
+	lua_State *lua=luaL_newstate();
 	luaL_openlibs(lua);
 
 	register_cfunctions(lua);
