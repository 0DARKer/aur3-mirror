# Maintainer: Daniel MÃ¡rio <danielmario2 at gmail dot com>

pkgname=love-beta
pkgver=0.7.0
pkgrel=2
pkgdesc="An *awesome* framework you can use to make 2D games in Lua."
arch=(i686 x86_64)
url="http://love2d.org/"
license=('ZLIB')
depends=('openal' 'glibc' 'mesa' 'sdl' 'flac' 'libvorbis' 'devil' 
         'freetype2' 'lua' 'physfs' 'mpg123' 'libmodplug')
makedepends=('wget')
conflicts=(love)
source=(http://bitbucket.org/rude/love/downloads/love-0.7.0-beta-linux-src.tar.gz
        http://bitbucket.org/rude/love/raw/tip/platform/unix/app.svg
        http://bitbucket.org/rude/love/raw/tip/platform/unix/love.desktop
        http://bitbucket.org/rude/love/raw/tip/license.txt)
md5sums=('16b90f7d1e8c5edd4d39e8fa1e283125'
         'a1e19f91420cc519a683af360f5b1120'
         '8d28b93962a262f72afab5501d13a307'
         'a4890908149d91bc042b30d00c121c58')

build() {
	cd $srcdir/love-0.7.0-beta
	LDFLAGS=""
	./configure --prefix=/usr
	make
}

package() {
	cd $srcdir/love-0.7.0-beta
	
	# desktop icons
	mkdir -p $pkgdir/usr/share/pixmaps
	mkdir -p $pkgdir/usr/share/applications
	cp $srcdir/app.svg $pkgdir/usr/share/pixmaps/love.svg
	install -D -m644 $srcdir/love.desktop $pkgdir/usr/share/applications/love.desktop
	
	# license
	mkdir -p $pkgdir/usr/share/licenses/$pkgname
	cp $srcdir/license.txt $pkgdir/usr/share/licenses/$pkgname/license
	
	# binaries
	make DESTDIR=$pkgdir install
}
