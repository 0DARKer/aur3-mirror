pkgname=linux4tegra
pkgver=R12beta1
pkgrel=1
arch=(arm)
url="http://developer.nvidia.com/linux-tegra"
license=(custom)
options=(!strip)
pkgdesc="drivers and codecs for nvidia tegra platform"

platform=ventana # harmony / ventana / cardhu
source=("http://developer.nvidia.com/sites/default/files/akamai/tools/files/l4t/${platform}_Tegra-Linux-R12.beta.1.0.tbz2"
        "http://developer.nvidia.com/sites/default/files/akamai/tools/files/l4t/${platform}_Tegra-Linux-codecs-R12.beta.1.0.tbz2"
        "http://developer.nvidia.com/sites/default/files/akamai/tools/files/l4t/nvgstplayer.tbz2")

md5sums=('2184699e0adeb24e0994aaa89f285e35'
         'a8a7f6b3ce6ca8c1700282efb36281bb'
         '7a0540eec9c5703589550b2ccb1f38cb')

package() {
  tar xaf $srcdir/Linux_for_Tegra/nv_tegra/base.tgz -C $pkgdir
  tar xaf $srcdir/restricted_codecs.tbz2 -C $pkgdir
  cp $srcdir/Linux_for_Tegra/nv_tegra/x/tegra_drv.abi11.so $pkgdir/usr/lib/xorg/modules/drivers/tegra_drv.so
  cp -r $srcdir/usr $pkgdir/
  rm -rf $pkgdir/{home,usr/sbin,lib/modules}
  install -D -m644 "${srcdir}/Tegra_Software_License_Agreement-Linux_for_Tegra.pdf" "${pkgdir}/usr/share/licenses/${pkgname}/codecs_agreement.pdf"
  install -D -m644 "${srcdir}/Linux_for_Tegra/nv_tegra/LICENSE" "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
}