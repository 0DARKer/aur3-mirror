# Maintainer: Marcin Karpezo <sirmacik at gmail dot com>
pkgname=nqp
pkgver=2011.09
pkgrel=2
pkgdesc="Compiler for quickly generating PIR routines from Perl6-like code"
arch=('i686' 'x86_64')
url='https://github.com/perl6/nqp#readme'
license=(PerlArtistic)
depends=('parrot>=3.8.0')
makedepends=('perl>=5.8')
source=(https://nodeload.github.com/perl6/$pkgname/tarball/$pkgver)
md5sums=('085e13ab4823b21c77e1520df9b50a31')

build() {
    cd "$startdir"
    mv $pkgver $pkgname-$pkgver.tar.gz
    cd "$srcdir"
    mv perl6-$pkgname-7ca0668 $pkgname-$pkgver
    cd $pkgname-$pkgver

    perl Configure.pl --with-parrot=/usr/bin/parrot --prefix=/usr
    make -j1
}
package() {
    cd "$srcdir/$pkgname-$pkgver"
    make -j1 DESTDIR="$pkgdir/" install
}

