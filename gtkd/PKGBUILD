# Maintainer: Robert Welin <robert dot welin at gmail dot com> 
pkgname=gtkd
pkgver=1.5.1
pkgrel=1
pkgdesc="D binding and OO wrapper of GTK+."
arch=('i686' 'x86_64')
url="http://www.dsource.org/projects/gtkd"
license=('LGPL')
depends=('gtk2' 'gtkglext')
source=("http://www.dsource.org/projects/gtkd/browser/downloads/gtkD-${pkgver}.zip?format=raw")
md5sums=('75e6812d85a3c1a05bd2ec8fcbdc6c6d')

build(){
	/bin/true
}

package() {
    cd ${srcdir}
    find . -name "*.d" -exec sed -i "s/typedef/alias/g" '{}' \;

	cd gtkD

	make prefix=${pkgdir}/usr DESTDIR=${pkgdir} install

    mv ${pkgdir}/${pkgdir}/usr ${pkgdir}
    if [[ `echo ${pkfdir} | awk '{split($0,a,"/"); print a[1]}'` != "" ]]; then
        rm -rf ${pkgdir}/`echo ${pkgdir} | awk '{split($0,a,"/"); print a[1]}'`
    else
        if [[ `echo ${pkgdir} | awk '{split($0,a,"/"); print a[2]}'` != "" ]]; then
            rm -rf ${pkgdir}/`echo ${pkgdir} | awk '{split($0,a,"/"); print a[2]}'`
        fi
    fi
}
