# Contributor: Vishnevsky Roman <aka dot x0x01 at gmail dot com>
pkgname=sphinx
pkgver=1.10
_subver=beta
pkgrel=3
pkgdesc="Free open-source SQL full-text search engine"
arch=(i686 x86_64)
url="http://www.sphinxsearch.com"
license=('GPL')
depends=(libmysqlclient)
source=("http://sphinxsearch.com/downloads/${pkgname}-${pkgver}-${_subver}.tar.gz"
	'sphinx.conf.d'
	'sphinx.rc.d')

md5sums=('5b52ce9e93a73c66d37bc3a2402f14fa'
         '48e3e1857919d26d5104a48caffb531b'
         'd886222593c6bba891fd3ce982c90c00')

build() {
  cd ${srcdir}/${pkgname}-${pkgver}-${_subver}
  ./configure --prefix=/usr \
  --exec-prefix=/usr \
  --program-prefix=sphinx- \
  --localstatedir=/var/lib/sphinx \
  --sysconfdir=/etc/sphinx \
  --enable-id64
  make || return 1
  make DESTDIR=${startdir}/pkg install || return 1
  mkdir ${startdir}/pkg/etc/rc.d
  mkdir ${startdir}/pkg/etc/conf.d
  cp ${srcdir}/sphinx.rc.d ${startdir}/pkg/etc/rc.d/sphinx
  cp ${srcdir}/sphinx.conf.d ${startdir}/pkg/etc/conf.d/sphinx
  chmod +x ${startdir}/pkg/etc/rc.d/sphinx
}
