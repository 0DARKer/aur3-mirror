# Maintainer: Evgeniy "arcanis" Alexeev <esalexeev@gmail.com>

pkgname=food_gui
pkgver=20130115
pkgrel=2
pkgdesc=" Food_gui is a simple program-calculator written on Python2.7 with GUI interface (Qt4) "
url="https://github.com/arcan1s/food_gui"
license=("GPL")
arch=(i686 x86_64)
makedepends=('git')
optdepends=('python2: source script'
              'python2-pyqt: for GUI interface'
              'qt: for GUI interface')
install='food_gui.install'
options=('!strip')

_gitroot="git://github.com/arcan1s/food_gui.git"
_gitname="food_gui"

build() {
  if [ -d $srcdir/$_gitname ]
  then
    msg "Updating local repository"
    cd $srcdir/$_gitname && git pull
  else
    git clone $_gitroot
    cd $_gitname
  fi
}

package() {
  type_install="binary"
  # Uncomment next string if you want use script
  #type_install="script"

  if [ $type_install == "script" ]
  then
    install -D -m755 $srcdir/$_gitname/linux/food_gui.py $pkgdir/usr/bin/food_gui
  else
    install -D -m755 $srcdir/$_gitname/linux/food_gui $pkgdir/usr/bin/food_gui
  fi

  install -D -m644 $srcdir/$_gitname/linux/db_eng.dat $pkgdir/usr/lib/food_gui/db_eng.dat
  install -D -m644 $srcdir/$_gitname/linux/db_rus.dat $pkgdir/usr/lib/food_gui/db_rus.dat
  
  install -D -m644 $srcdir/$_gitname/linux/food_gui.1 $pkgdir/usr/share/man/man1/food_gui.1
}
