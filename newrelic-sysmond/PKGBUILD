# Maintainer: Preston <youremail@domain.com>
pkgname=newrelic-sysmond
pkgver=1.1.2.124
pkgrel=1
pkgdesc="system monitor services provided by newrelic"
arch=('i686' 'x86_64')
url="http://newrelic.com/"
license=('non-free')
depends=(glibc)
makedepends=(binutils)
checkdepends=()
optdepends=()
install=.install

source=("http://download.newrelic.com/server_monitor/release/$pkgname"-"$pkgver"-"linux.tar.gz")
md5sums=('9aa86faffe7ccd4a3514c9a112217b64')

build() {
  cd "$srcdir/$pkgname-$pkgver-linux"
}

package() {
  cd "$srcdir/$pkgname-$pkgver-linux" 
  mkdir -p $pkgdir/usr/sbin/
  mkdir -p $pkgdir/etc/newrelic/
  mkdir -p $pkgdir/etc/default/
  mkdir -p $pkgdir/etc/rc.d/
  mkdir -p $pkgdir/usr/share/doc/newrelic/
  if [ $CARCH == i686 ]; then
     cp -v ./daemon/nrsysmond.x86 $pkgdir/usr/sbin/nrsysmond
  else
     cp -v ./daemon/nrsysmond.x64 $pkgdir/usr/sbin/nrsysmond
  fi

  cp -v ./nrsysmond.cfg $pkgdir/etc/newrelic/
  cp -v ./scripts/nrsysmond-config $pkgdir/usr/sbin/
  cp -v ./scripts/newrelic-sysmond.default.debian $pkgdir/etc/default/newrelic-sysmond
  cp -v ./scripts/newrelic-sysmond.init.debian $pkgdir/etc/rc.d/newrelic-sysmond
  cp -v INSTALL.txt LICENSE.txt $pkgdir/usr/share/doc/newrelic/
}

