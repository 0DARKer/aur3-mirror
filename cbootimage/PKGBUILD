# Maintainer: lks <lukas dot graetz at web dot de>
pkgname=cbootimage
pkgver=1.2
pkgrel=3
pkgdesc="Tools to dump and generate boot config table on Tegra devices"
arch=('i686' 'x86_64' 'armv7h')
license=('GPL')
url="http://nv-tegra.nvidia.com/gitweb/?p=tools/cbootimage.git;a=summary"
makedepends=('automake' 'autoconf')
# commit for version 1.2
source=(cbootimage.tar.gz::"http://nv-tegra.nvidia.com/gitweb/?p=tools/cbootimage.git;a=snapshot;h=fac5875baeab1ffed58e7129137170e968d49d97")
# The md5sum of cbootimage.tar.gz is changing because the git server packs it
# with the current time.
# However md5sum of cbootimage.tar for $pkgver is static (see prepare below).
md5sums=('SKIP')

prepare() {
    cd ${startdir}
    zcat cbootimage.tar.gz > cbootimage.tar
    export source=('cbootimage.tar')
    export md5sums=('bffa915a4ab5d0d4748e742494d82488')
    check_checksums
}

build() {
    cd ${pkgname}
    autoreconf --install --symlink
    ./configure --prefix=/usr
}

package() {
    cd ${pkgname}
    make DESTDIR="${pkgdir}" install
}
