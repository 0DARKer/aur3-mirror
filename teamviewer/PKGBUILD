pkgname=teamviewer
pkgver=8.0.16485
pkgrel=1
pkgdesc="All-in-one solution for accessing PC's using the internet"
arch=('i686' 'x86_64')
url="http://www.teamviewer.com"
license="nonfree"
makedepends=('binutils')
install="teamviewer.install"


if [ $CARCH == 'i686' ]; then
  source=("teamviewer_linux-${pkgver}.deb::http://www.teamviewer.com/download/version_8x/teamviewer_linux.deb") 
  md5sums=('d6e43772cb7b4d64ff154342db8f407b')
  depends=('libsm' 'libxext' 'freetype2' 'libxtst')
elif [ $CARCH == 'x86_64' ]; then
  source=("teamviewer_linux_x64-${pkgver}.deb::http://www.teamviewer.com/download/version_8x/teamviewer_linux_x64.deb")
  md5sums=('62e9c2006f97c6576893e8962a302ff9')
  depends=('lib32-libsm' 'lib32-libxext' 'lib32-glibc' 'lib32-freetype2' 'lib32-gcc-libs' \
  'lib32-alsa-lib' 'lib32-libx11' 'lib32-libxtst' 'lib32-libxdamage' 'lib32-libxfixes' \
  'lib32-libxcb' 'lib32-libxi' 'lib32-libxau' 'lib32-libxdmcp')
fi


package() {
	cd $srcdir
	[ $CARCH == "i686" ] && ar x ${pkgname}_linux-${pkgver}*
  	[ $CARCH == "x86_64" ] && ar x ${pkgname}_linux_x64-${pkgver}*
	tar xvf data.tar.gz
	cp -R opt $pkgdir
	cp -R usr $pkgdir
	install -Dm644 "$srcdir/opt/teamviewer8/tv_bin/desktop/$pkgname-${pkgname}8.desktop" $pkgdir/usr/share/applications/$pkgname.desktop
	install -Dm644 $srcdir/opt/teamviewer8/tv_bin/script/teamviewerd.service $pkgdir/usr/lib/systemd/system/teamviewerd.service
}
