pkgname=teamviewer
pkgver=8.0.17147
pkgrel=2
pkgdesc="All-in-one solution for accessing PC's using the internet"
arch=('i686' 'x86_64')
url="http://www.teamviewer.com"
license="custom"
makedepends=('binutils')
install=teamviewer.install

if [ $CARCH == 'i686' ]; then
  source=("teamviewer_linux-${pkgver}.deb::http://www.teamviewer.com/download/teamviewer_linux.deb") 
  md5sums=('47790ed345a7b7970fc1f2ac50c97002')
  depends=('libsm' 'libxext' 'freetype2' 'libxtst')
elif [ $CARCH == 'x86_64' ]; then
  source=("teamviewer_linux_x64-${pkgver}.deb::http://www.teamviewer.com/download/teamviewer_linux_x64.deb")
  md5sums=('a252c5cbb8703eed113b51ce0fe66419')
  depends=('lib32-libsm' 'lib32-libxext' 'lib32-glibc' 'lib32-freetype2' 'lib32-gcc-libs' \
  'lib32-alsa-lib' 'lib32-libx11' 'lib32-libxtst' 'lib32-libxdamage' 'lib32-libxfixes' \
  'lib32-libxcb' 'lib32-libxi' 'lib32-libxau' 'lib32-libxdmcp')
fi


package() {
	cd $srcdir
	[ $CARCH == "i686" ] && ar x ${pkgname}_linux-${pkgver}*
  	[ $CARCH == "x86_64" ] && ar x ${pkgname}_linux_x64-${pkgver}*
	tar xvf data.tar.gz
	cp -R opt $pkgdir
	cp -R usr $pkgdir
	install -Dm644 $pkgname.desktop $pkgdir/usr/share/applications/$pkgname.desktop
	install -Dm644 $pkgdir/opt/teamviewer8/License.txt $pkgdir/usr/share/licenses/${pkgname}/License.txt
	install -Dm644 "$pkgdir/opt/teamviewer8/tv_bin/desktop/$pkgname-${pkgname}8.desktop" "$pkgdir/usr/share/applications/$pkgname.desktop"
}
