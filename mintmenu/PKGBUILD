# Contributor: Giuseppe Borzi <gborzi _AT_ ieee _DOT_ org>
# Contributor: ryooichi <ryooichi+arch AT gmail DOT com>
# Real thanks goes to jelly, mike_93 and the original creators of mintmenu, usp, slab...
# See also:
#   http://bbs.archlinux.org/viewtopic.php?id=66987
#   http://bbs.archlinux.org/viewtopic.php?id=68633
#   http://github.com/jelly/archmenu
pkgname=mintmenu
pkgver=5.1.6
pkgrel=3
pkgdesc="Linux Mint Menu for Gnome"
arch=('any')
url="http://packages.linuxmint.com/pool/main/m/mintmenu"
license=('GPL')
depends=('gnome-panel-bonobo' 'gnome-python' 'python-gnomeapplet' 'python-gnomedesktop' 'pyxdg' 'pygtk' 'archlinux-artwork' 'gnome-terminal' 'gksu' 'xdg-utils')
optdepends=('alacarte: for editing the gnome menu'
            'gtkpacman: to manage your packages'
            'mint-translations: translations files')
source=("${url}/${pkgname}_${pkgver}.tar.gz" 'arch-patch.diff' 'removescript')
install=${pkgname}.install
md5sums=('fc3c4a91baba87487c48bd522be1ec89'
         '0f8c1befd037089a331152505381d1aa'
         'bcdbc95fc35331f1f5e13a86b9d770f0')

build() {
  cd "$srcdir/${pkgname}"
  rm -f usr/lib/linuxmint/mintMenu/*.pyc usr/lib/linuxmint/mintMenu/plugins/*pyc
  patch -Np0 -i $srcdir/arch-patch.diff
  sed -i -e "s/__version__/$pkgver/" usr/lib/linuxmint/mintMenu/mintMenu.py
  cp -R usr $pkgdir/
  chmod 644 $pkgdir/usr/lib/bonobo/servers/mintMenu.server
  install -m755 $srcdir/removescript $pkgdir/usr/lib/linuxmint/mintMenu/
}
# vim:syntax=sh
