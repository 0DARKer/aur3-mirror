# Maintainer: Laszlo Papp <djszapi @ gmail at com>
# Contributor: Piotr Rogo≈ºa <rogoza dot piotr at gmail dot com>
pkgname=vim-manpageview
_pkgname=manpageview
pkgver=24e
#_scriptid=14117
pkgrel=1
pkgdesc='Viewer for manpages, gnu info,  perldoc, and php (unix/linux/cygwin)'
arch=('any')
#url="http://www.vim.org/scripts/script.php?script_id=489"
#url='http://drchip.0sites.net/astronaut/vim/index.html#MANPAGEVIEW'
url='http://www.drchip.org/astronaut/vim/index.html#MANPAGEVIEW'
license=('custom:vim')
depends=('vim-runtime' 'vim-cecutil')
groups=('vim-plugins')
install='vimdoc.install'
source=(
http://www.drchip.org/astronaut/vim/vbafiles/manpageview.vba.gz
license.txt
manpageview.vim.diff
)
build() {
    cd "$srcdir"
    _vimdir='/usr/share/vim/vimfiles'
    install -d $pkgdir/${_vimdir}
    vim -c "UseVimball $srcdir" -c "q" $_pkgname.vba

    patch -p0 < manpageview.vim.diff || return 1
    tar -c ./ \
        --exclude doc/tags \
        --exclude .VimballRecord \
        --exclude license.txt \
        --exclude manpageview.vba.gz \
        --exclude manpageview.vba \
        --exclude manpageview.vim.diff \
        --exclude autoload/manpageview.vim.orig \
        | tar -x -C $pkgdir/${_vimdir}
    install -Dm644 $srcdir/license.txt $pkgdir/usr/share/licenses/$pkgname/license.txt || return 1
    rm -f $pkgdir/${_vimdir}/plugin/cecutil.vim || return 1
}

md5sums=('bf3473f12ff33386dc1abd9656a41b4d'
         'efbd5986e691ce8c876fb86e8f5961ea'
         'b823c9917c6151c7d4106e83c76a1d2e')
