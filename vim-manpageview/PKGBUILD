# Maintainer: Laszlo Papp <djszapi @ gmail at com>
# Contributor: Piotr Rogo≈ºa <rogoza dot piotr at gmail dot com>
pkgname=vim-manpageview
_pkgname=manpageview
pkgver=24c
#_scriptid=14117
pkgrel=2
pkgdesc='Viewer for manpages, gnu info,  perldoc, and php (unix/linux/cygwin)'
arch=('any')
#url="http://www.vim.org/scripts/script.php?script_id=489"
url='http://drchip.0sites.net/astronaut/vim/index.html#MANPAGEVIEW'
license=('custom:vim')
depends=('vim-runtime' 'vim-cecutil')
groups=('vim-plugins')
install='vimdoc.install'
#source=(${pkgname}.vba.gz::http://www.vim.org/scripts/download_script.php?src_id=${_scriptid}
source=("http://drchip.0sites.net/astronaut/vim/vbafiles/${_pkgname}.vba.gz"
        license.txt)
build() {
   _vimdir='/usr/share/vim/vimfiles'
   cd $srcdir 
   install -d ${pkgdir}${_vimdir}/{doc,plugin,syntax,autoload}

   vim -c "UseVimball $srcdir" -c "q" $_pkgname.vba

    for x in doc; do
		install -Dm644 ${srcdir}/$x/* ${pkgdir}${_vimdir}/$x/ || return 1;
	done

    for x in plugin syntax autoload; do
		install -Dm644 ${srcdir}/$x/* ${pkgdir}${_vimdir}/$x/ || return 1;
	done

    install -Dm644 ${srcdir}/license.txt ${pkgdir}/usr/share/licenses/${pkgname}/license.txt || return 1
	rm -f ${pkgdir}${_vimdir}/doc/tags || return 1
   rm -f ${pkgdir}${_vimdir}/plugin/cecutil.vim || return 1
}

md5sums=('f24567be92e4d8c44e2d5f5f3e8e69d0'
         'efbd5986e691ce8c876fb86e8f5961ea')
