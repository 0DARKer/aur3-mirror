# Maintainer: Kyle Bloss <kylebloss[at]pelpix[dot]info>
# Contributor: DrZaius <lou[at]fakeoutdoorsman[dot]com>

pkgname=ffmbc
pkgver="0.7.1"
pkgrel=1
pkgdesc="FFmpeg customized for broadcast and professional usage"
arch=('i686' 'x86_64')
url="http://code.google.com/p/ffmbc/"
license=('GPL2' 'custom')
depends=('faac' 'lame' 'libass' 'x264-git' 'zlib')
makedepends=('yasm')
source=('https://s3.amazonaws.com/PelPix/AUR/ffmbc/FFmbc-0.7.1.tar.bz2')
sha1sums=('f5667ae546e0d3e487a7957106286c479188e106')

build() {
  cd "${srcdir}/FFmbc-${pkgver//_/-}"

  ./configure \
    --prefix=/usr \
    --incdir=/usr/include/ffmbc \
    --libdir=/usr/lib/ffmbc \
    --shlibdir=/usr/lib/ffmbc \
    --extra-libs=-ldl \
    --disable-ffplay \
    --disable-ffprobe \
    --enable-gpl \
    --enable-libass \
    --enable-libfaac \
    --enable-libmp3lame \
    --enable-libx264 \
    --enable-nonfree


  make
  make -i doc/ffmbc.1
  make doc/ffmbc.1
}

package() {
  cd "${srcdir}/FFmbc-${pkgver//_/-}"
  make DESTDIR="${pkgdir}" install install-man

}
