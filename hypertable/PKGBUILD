# Maintainer: Thomas Dziedzic < gostrc at gmail >

pkgname=hypertable
pkgver=0.9.3.2
pkgrel=1
pkgdesc='A high performance, scalable, distributed storage and processing system for structured and unstructured data.'
arch=('i686' 'x86_64')
url='http://hypertable.org/'
license=('GPL2')
depends=('log4cpp' 'hyperic-sigar' 'thrift' 'google-perftools' 'kfs' 'ceph' 'rrdtool')
source=("http://$pkgname.googlecode.com/files/$pkgname-$pkgver-alpha-src.tar.gz")
md5sums=('e16b3348ed61202e0c17e1679af47520')

build() { 
  if [ -d build ]; then 
    rm -r build || return 1
  fi

  mkdir build || return 1
  cd build

  export DESTDIR="${pkgdir}"

  cmake \
    -DCMAKE_BUILD_TYPE=Release \
    -DThrift_LIB=/usr/lib/libthrift.so \
    -DSIGAR_LIBRARY=/usr/lib/libsigar-x86-linux.so \
    ../$pkgname-$pkgver-alpha || return 1

  make || return 1
}

package() {
  cd build || return 1

  export DESTDIR="${pkgdir}"
  
  make install || return 1

  return 1
}
