# Maintainer: Alexander RÃ¸dseth <rodseth@gmail.com>
# Contributor: Thomas Dziedzic < gostrc at gmail >

pkgname=hypertable
pkgver=0.9.6.4
pkgrel=1
pkgdesc='High performance, scalable, distributed storage and processing system'
arch=('x86_64' 'i686')
url='http://code.google.com/p/hypertable/'
license=('GPL2')
depends=('log4cpp' 'libsigar' 'thrift' 'gperftools' 'kfs' 'rrdtool' 'ceph' 're2-hg' 'snappy' 'cronolog')
source=("http://$pkgname.googlecode.com/files/$pkgname-$pkgver-src.tar.gz")
sha256sums=('295b636e6d77be8438206bed0502da9b01a0a7ca87968dc8ad38c5cccb402a0a')

build() {
  cd "$srcdir"
  
  if [ -d build ]; then 
    rm -rf build
  fi
  mkdir build
  cd build

  export CXXFLAGS="$CXXFLAGS -fpermissive"

  cmake \
    -DCMAKE_BUILD_TYPE=Release \
    -DThrift_LIB=/usr/lib/libthrift.so \
    -DSIGAR_LIBRARY=/usr/lib/libsigar.so \
    -DCMAKE_CXX_FLAGS=" -fpermissive" \
    "../$pkgname-$pkgver"

  make -j1
}

package() {
  cd "$srcdir/build"

  make DESTDIR="$pkgdir" install
}

# vim:set ts=2 sw=2 et:
