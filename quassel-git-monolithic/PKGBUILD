# Maintainer: sxe <sxxe@gmx.de>

pkgname='quassel-git-monolithic'
pkgver=20130301
pkgrel=1
pkgdesc="A Qt4 IRC client - Monolithic Version"
url="http://quassel-irc.org"
license='GPL'
arch=('i686' 'x86_64')
depends=('qt4')
makedepends=('git')
replaces=('quassel')
source=()
md5sums=()

_gitroot="git://git.quassel-irc.org/quassel.git"
_gitname="quassel"

build() {

    cd "$srcdir"

    msg "Connecting to GIT server...."

    if [ -d ${srcdir}/$pkgname ] ; then
        cd $pkgname && git pull origin master
        msg "Local repository updated."
    else
        git clone --depth 1 $_gitroot $pkgname
    fi

    cd "$srcdir/$pkgname"

    msg "Starting build process."
    cmake . -DCMAKE_INSTALL_PREFIX=/usr -DWANT_QTCLIENT=OFF -DWANT_CORE=OFF -DWANT_MONO=ON
    make

}

package() {
    msg2 "Starting packaging."
    cd "$srcdir/$pkgname"

    make DESTDIR=$startdir/pkg/ install
}
