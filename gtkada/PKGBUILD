# Contributor: Patrick Kelly <kameo76890 at gmail dot com>
# Contributor:  Georgios  Tsalikis <aliverius somewhere near tsalikis and a net>
pkgname=gtkada
pkgver=2.18.0
pkgrel=1
pkgdesc="GtkAda is a Gtk2+ Ada binding using the OOP and other features of this programming language"
arch=('i686' 'x86_64')
url="http://libre.adacore.com/libre/tools/GtkAda/"
license=('GPL')
depends=("gcc-ada" "gtk2")
source=(http://sourceforge.net/projects/gnat-gpl/files/2011/$pkgname-gpl-$pkgver-src.tgz/download)
md5sums=('f5f9c8cb540efd4b261d4914b3410433')

#### Since there is a problem with 'make install' and it is hard coded to install to the configure prefix, 
#    but we dont want the files to be compiled with the wrong prefix, we do it twice to fool make install.

build() {
  cd $srcdir/$pkgname-gpl-$pkgver-src
  ./configure --prefix=/usr
  make -j1  # It doesn't build with -jn , n>1
  ./configure --prefix=$pkgdir/usr
  make -j1 install 

  cp $startdir/gtkada.pc $pkgdir/usr/lib/pkgconfig/ #since the hack has side-effects we fix the .pc file
}