# Contributor: Patrick Kelly <kameo76890 at gmail dot com>
# Contributor:  Georgios  Tsalikis <aliverius somewhere near tsalikis and a net>
# Contributor: Julian Leyh <julian@vgai.de>

pkgname=gtkada
pkgver=3.4.2
pkgrel=1
pkgdesc="GtkAda is a Gtk2+ binding for Ada using the OOP and other features of this programming language"
arch=('i686' 'x86_64')
url="http://libre.adacore.com/libre/tools/GtkAda/"
license=('GPL')
depends=("gcc-ada" "gtk3")
source=(http://netcologne.dl.sourceforge.net/gnuada/GNAT_GPL%20Source/2013/${pkgname}-gpl-${pkgver}-src.tgz
        destdir-fix.patch)
md5sums=('d413db9b471fbe2a5164aa3c43245cff'
         '4fee2f1951c7f6f65e6009973af482c6')

build() {
  cd "$srcdir/$pkgname-$pkgver-gpl-src"

  patch -Np0 -i "$srcdir/destdir-fix.patch"

  ./configure --prefix=/usr --with-GL=no
  make -j1  # It doesn't build with -jn where n>1
}

package() {
  cd $srcdir/$pkgname-$pkgver-gpl-src
  DESTDIR=$pkgdir make -j1 install 
}
