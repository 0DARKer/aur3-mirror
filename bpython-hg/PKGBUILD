# Contributor: Alexander Rødseth <rodseth@gmail.com>
pkgname=bpython-hg
pkgver=dev
pkgrel=1
pkgdesc="A fancy interface for the Python interpreter"
arch=('i686' 'x86_64')
url="http://www.bpython-interpreter.org/"
license=('MIT')
depends=('python' 'pygments')
makedepends=('mercurial')
provides=('bpython')
conflicts=('bpython')
_hgroot="https://bitbucket.org/bobf/bpython/"
_hgname="bpython"

build() {
  cd "$srcdir"

  msg "Connecting to mercurial server"
  if [ -d $_hgname ] ; then
    cd "$_hgname" && hg pull
    msg "Local files are updated"
  else
    hg clone "$_hgroot"
  fi
  msg "Mercurial checkout done or server timeout"

  msg "Building"
  cd "$srcdir"
  cp -r "$_hgname" "$_hgname-build"
  cd "$_hgname-build" || return 1
  python setup.py install --root=$pkgdir || return 1
  install -Dm644 LICENSE \
    "$pkgdir/usr/share/licenses/$pkgname/LICENSE" || return 1
}
# vim:set ts=2 sw=2 et:
