# Maintainer: Alfredo Ramos <alfredo dot ramos at yandex dot com>

pkgname=ultra-flat-icons
pkgver=1.2.1
pkgrel=1
pkgdesc="A simple flat icon theme, derived from Flattr icon theme."
arch=(
	"any"
)
url="http://gnome-look.org/content/show.php?content=167477"
license=(
	"CCPL:cc-by-nc-sa-4.0"
)

depends=()
optdepends=()
makedepends=()
provides=(
	"${pkgname}=${pkgver}"
)
conflicts=(
	"${pkgname}"
)
replaces=(
	"${pkgname}"
)

# Original source <https://www.dropbox.com/s/dktl70lh4lnhp0a/ultra-flat-icons.tar.gz>
source=(
	"https://www.dropbox.com/s/j052o5h3cypjyhy/${pkgname}-${pkgver}-${pkgrel}.tar.gz"
)
md5sums=(
	"7d90c4c718da7111dc304a912a96c148"
)
sha512sums=(
	"84a28d3e0ec507fbfa780a1f5db558cce27d94b64831feb2a4e21aba479897d3fc147d99b79bd351f9141f18793f3d694c46320615715ef6fb3fa6942f59aad5"
)

_iconset=UltraFlatIcons

package() {	
	# Copy icon set
	mkdir -p ${pkgdir}/usr/share/icons/${_iconset}
	cp -R ${srcdir}/${pkgname}/* ${pkgdir}/usr/share/icons/${_iconset}
	
	# Change current working directory
	cd ${pkgdir}/usr/share/icons/${_iconset}
	
	# Education category fix
	ln -fsr apps/scalable/scholar.svg categories/scalable/applications-science.svg
	
	# Multimedia category fix
	rm -f apps/scalable/applications-multimedia.svg
	ln -fsr apps/scalable/openshot.svg categories/scalable/applications-multimedia.svg
	
	# Office category fix
	ln -fsr apps/scalable/libreoffice34-startcenter.svg categories/scalable/applications-office.svg
	
	# Volume icons fix (dark theme)
	ln -fsr status/scalable\ white\ panel/audio-volume-muted-panel.svg status/scalable/audio-volume-muted.svg
	ln -fsr status/scalable\ white\ panel/audio-output-none-panel.svg status/scalable/audio-output-none.svg
	ln -fsr status/scalable\ white\ panel/audio-volume-low-panel.svg status/scalable/audio-volume-low.svg
	ln -fsr status/scalable\ white\ panel/audio-volume-medium-panel.svg status/scalable/audio-volume-medium.svg
	ln -fsr status/scalable\ white\ panel/audio-volume-high-panel.svg status/scalable/audio-volume-high.svg
	
	# Wicd icon fix
	mkdir -p ${pkgdir}/usr/share/icons/${_iconset}/extras/pixmaps/wicd
	ln -fsr apps/scalable/wicd-gtk.svg extras/pixmaps/wicd/wicd-gtk.svg
	ln -fsr apps/scalable/wicd-qt.svg extras/pixmaps/wicd/wicd-qt.svg
	
	# License
	mkdir -p ${pkgdir}/usr/share/licences/${pkgname}
	cp ${srcdir}/${pkgname}/LICENSE.txt ${pkgdir}/usr/share/licences/${pkgname}/LICENSE
}