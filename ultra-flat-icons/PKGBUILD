# Maintainer: Alfredo Ramos <alfredo dot ramos at yandex dot com>

pkgname=ultra-flat-icons
pkgver=1.2.6
pkgrel=1
pkgdesc="A simple flat icon theme, derived from Flattr icon theme."
arch=(
	"any"
)
url="http://gnome-look.org/content/show.php?content=167477"
license=(
	"CCPL:cc-by-nc-sa-4.0"
)

depends=(
	"xdg-utils"
)
optdepends=()
makedepends=()
provides=(
	"${pkgname}=${pkgver}"
)
conflicts=(
	"${pkgname}"
)
replaces=(
	"${pkgname}"
)

install=${pkgname}.install

# Original source <https://www.dropbox.com/s/dktl70lh4lnhp0a/ultra-flat-icons.tar.gz>
source=(
	"https://www.dropbox.com/s/psszn59zfahy50v/${pkgname}-${pkgver}-${pkgrel}.tar.gz"
	"${pkgname}.install"
)
sha384sums=(
	"d0c89917b43be85da45c10867f5bd57accb7f8bc4e69525a8b37072aea44373e88f6f558f7c8a1787b7126221d25fe36"
	"69f820b4209c7fa75911da3cab935bb31759b46468e7c526086e7587093d57513d515a4f5c39bf3f3f7f4dbc05f32c3d"
)
sha512sums=(
	"811b1e8b4469bc29893ac98253cd67e5adefb26f43d98697984fd616e75f0fa673ba182bbb763b54ceadb086235606498f88dc10862b52eae7360bd4d44875cd"
	"e15a9247acc85f9f0a56321a25d315048c8359e93fb00983b252dccc9df4ab049b9652ab353bf02ddc3121b02f46d0c177d53ad65ee6a7e79bc55d312c826624"
)

_iconset=UltraFlatIcons
_darktheme=false

package() {
	# Copy icon set
	mkdir -p ${pkgdir}/usr/share/icons/${_iconset}
	cp -R ${srcdir}/${pkgname}/* ${pkgdir}/usr/share/icons/${_iconset}
	
	# Change current working directory
	cd ${pkgdir}/usr/share/icons/${_iconset}
	
	# System tools category fix
	ln -fsr categories/scalable/preferences-other.svg categories/scalable/applications-system.svg
	
	# Volume icons fix (directories)
	if [[ ${_darktheme} ]]; then
		# Rename icon directory for light theme (backup)
		mv status/scalable status/scalable-light
		
		# Rename icon directory for dark theme
		mv status/scalable\ white\ panel status/scalable	
	else
		# Rename icon directory for dark theme (backup)
		mv status/scalable\ white\ panel status/scalable-dark
	fi
	
	# Volume icons fix (syslinks)
	ln -fsr status/scalable/audio-volume-muted-panel.svg status/scalable/audio-volume-muted.svg
	ln -fsr status/scalable/audio-output-none-panel.svg status/scalable/audio-output-none.svg
	ln -fsr status/scalable/audio-volume-low-panel.svg status/scalable/audio-volume-low.svg
	ln -fsr status/scalable/audio-volume-medium-panel.svg status/scalable/audio-volume-medium.svg
	ln -fsr status/scalable/audio-volume-high-panel.svg status/scalable/audio-volume-high.svg
	
	# Wicd icon fix
	mkdir -p ${pkgdir}/usr/share/icons/${_iconset}/extras/pixmaps/wicd
	ln -fsr apps/scalable/wicd.svg extras/pixmaps/wicd/wicd.svg
	ln -fsr apps/scalable/wicd-qt.svg extras/pixmaps/wicd/wicd-qt.svg
	ln -fsr apps/scalable/wicd-gtk.svg extras/pixmaps/wicd/wicd-gtk.svg
	
	# License
	mkdir -p ${pkgdir}/usr/share/licences/${pkgname}
	cp ${srcdir}/${pkgname}/LICENSE.txt ${pkgdir}/usr/share/licences/${pkgname}/LICENSE
}