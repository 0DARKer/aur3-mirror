# Contributor: Damien Guihal <dguihal@gmail.com>
pkgname=soapui
pkgver=3.5
pkgrel=1
pkgdesc="A graphical Java program for inspecting, invoking, monitoring, simulating/mocking and functional/load/compliance/surveillance testing of REST/WADL and SOAP/WSDL-based Web Services over HTTP."
arch=('i686' 'x86_64')
url="http://www.soapui.org/"
license=('LGPLv2')
groups=()
depends=('java-runtime')
makedepends=()
provides=()
conflicts=()
replaces=()
backup=()
options=()
source=(http://downloads.sourceforge.net/soapui/$pkgname-$pkgver-linux-bin.zip)
noextract=()
md5sums=('5b0d1a736f1514d354f8d400f36331c2')

build() {
  cd $startdir/src/$pkgname-$pkgver
  #Suppression des fichiers bat de chez Redmond
  #find . -name *.bat -exec rm -f {} \;
  #Correction du bug jxplorer
  find . -name soapui.sh -exec sed -i -e '/soapui.jxbrowser.disable=true/s/#//' {} \;
  mkdir -p ${pkgdir}/usr/share/soapui
  mkdir -p ${pkgdir}/usr/bin
  cp -R * ${pkgdir}/usr/share/soapui
  cd ${pkgdir}/usr/share/soapui
  ln -sf bin/starter-page.html .
  cat >${pkgdir}/usr/bin/soapui << EOC
SOAPUI_HOME=/usr/share/soapui
export SOAPUI_HOME
\${SOAPUI_HOME}/bin/soapui.sh
EOC
  chmod 0755 ${pkgdir}/usr/bin/soapui
}

# vim:set ts=2 sw=2 et:

