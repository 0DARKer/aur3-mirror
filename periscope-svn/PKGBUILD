# Maintainer (after 20/03/2010): Juan Diego Tascon
# Contributor: Denis Zawada <deno@rootnode.net>
# Contributor: Jordy van Wolferen <jordz@archlinux.us>

pkgname=periscope-svn
pkgver=115
pkgrel=1
pkgdesc="Subtitles searching module written in python. Currently support \
OpenSubtitles.org, SubtitleSource.org and Podnapisi.net"
url="http://code.google.com/p/periscope/"
arch=('i686' 'x86_64')
license=('GPL3')
depends=('beautiful-soup' 'python-notify' 'python2')
makedepends=('subversion' 'setuptools')
provides=('periscope')

source=()
md5sums=()

_svntrunk=https://periscope.googlecode.com/svn/trunk/
_svnmod=periscope

build() {
	cd ${srcdir}
	if [ -d $_svnmod/.svn ]; then
		(cd $_svnmod && svn up -r $pkgver)
	else
	svn co $_svntrunk --config-dir ./ -r $pkgver $_svnmod
	fi
	
	msg "SVN checkout done or server timeout"
	msg "Starting make..."
	
	cp -r $_svnmod $_svnmod-build
	cd $_svnmod-build/
	
	python2 ./setup.py build || return 1
	python2 ./setup.py install --root=$pkgdir || return 1
	
	rm -rf ${srcdir}/$_svnmod-build
}

