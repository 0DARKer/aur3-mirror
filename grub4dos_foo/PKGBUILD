# Maintainer:  Daniel YC Lin <dlin.tw (at) gmail.com>
# Contributor: Daniel YC Lin <dlin.tw (at) gmail.com>

pkgname=grub4dos_foo
_pkgname=grub4dos
pkgver=0.4.5b_20101219
pkgdesc="A enhanced GRUB boot loader can setting menu.lst in dos/windows/linux"
_pkgver=${pkgver/_*}  # right trim of _...
#_pkgdt=${pkgver/*_} # left trim of ..._
#_pkgdt=${_pkgdt:0:4}-${_pkgdt:4:2}-${_pkgdt:6:2}
_pkgdt=2010-12-19
pkgrel=1
arch=('i686' 'x86_64')
url="http://code.google.com/p/grub4dos-chenall/"
license=('GPL2')
install=grub4dos.install
makedepends=('unzip')
source=(README_arch.txt
        http://grub4dos-chenall.googlecode.com/files/$_pkgname-$_pkgver-$_pkgdt.zip
        http://grubutils.googlecode.com/files/unifont-2010-10-24.zip
        http://grub4dos-chenall.googlecode.com/files/arialuni_U16.zip)
md5sums=('636f6a061fb9a0e703f9030dc326e244'
         '32c51233bdd4ce6e1d99e41b2b8188e2'
         '4f9e9c1d50c5d913cde65804cf30dcd6'
         '479f066a8f84095a2cb40ac3c473430d')

build() {
  mkdir -p $pkgdir/usr/sbin
  cp $srcdir/$_pkgname-$_pkgver/bootlace.com $pkgdir/usr/sbin

  mkdir -p $pkgdir/usr/share/$_pkgname
  for n in grldr grub.exe menu.lst default ; do
    cp $srcdir$_pkgname-$_pkgver/$n $pkgdir/usr/share/$pkgname
  done

  cp $srcdir/unifont $pkgdir/usr/share/$_pkgname
  cp $srcdir/arialuni_U16.bin $pkgdir/usr/share/$_pkgname
  gzip $pkgdir/usr/share/$_pkgname/arialuni_U16.bin

  mkdir -p $pkgdir/usr/share/doc/$_pkgname
  for n in README_GRUB4DOS.txt ChangeLog_*.txt ; do
    cp $srcdir/$_pkgname-$_pkgver/$n $pkgdir/usr/share/doc/$pkgname
  done

  cp $srcdir/README_arch.txt $pkgdir/usr/share/doc/$_pkgname
}
