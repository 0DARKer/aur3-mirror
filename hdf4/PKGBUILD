# Contributor: David Scholl <djscholl@gmail.com>
pkgname=hdf4
pkgver=2.5
pkgrel=3
pkgdesc="General purpose library and file format for storing scientific data."
arch=('i686' 'x86_64')
url="http://www.hdfgroup.org/hdf4.html"
license=('custom')
depends=('zlib' 'libjpeg6')
makedepends=('gcc-libs' 'gcc-fortran' 'flex' 'bison')
conflicts=('netcdf')
source=(http://www.hdfgroup.org/ftp/HDF/HDF_Current/src/hdf-4.$pkgver.tar.gz)
md5sums=('7241a34b722d29d8561da0947c06069f')

build() {
  cd $startdir/src/hdf-4.$pkgver
  export CFLAGS=$CFLAGS" -fPIC"
  export LDFLAGS=" -l:libjpeg.so.62 "$LDFLAGS
  ./configure --prefix=/usr F77=gfortran --with-jpeg=/usr/include/libjpeg6,/usr/lib 
  make || return 1
  make prefix=$startdir/pkg/usr install || return 1
  mkdir -p $startdir/pkg/usr/share/licenses/$pkgname
  cp $startdir/src/hdf-4.$pkgver/COPYING $startdir/pkg/usr/share/licenses/$pkgname
}
