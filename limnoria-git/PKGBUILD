#Contributor: Cravix ( dr.neemous at gmail.com )

pkgname=limnoria-git
pkgver=201204012
pkgrel=1
pkgdesc="An IRC bot based on Supybot, with sqlite3 support and other features"
arch=('i686' 'x86_64')
url="https://github.com/ProgVal/Limnoria"
license=('custom')
depends=('python2>=2.6' 'python-pysqlite')
makedepends=('git')
optdepends=('python2-pyopenssl: SSL server support'
			  'twisted')
conflicts=('supybot')
provides=('supybot')

_git_tree="git://github.com/ProgVal/Limnoria.git"
_git_name="Limnoria"

build() {
  cd $srcdir
  msg "Connecting to GIT server...."

  if [ -d $_git_name ] ; then
	cd $_git_name && git pull origin
	msg "The local files are updated."
  else
	git clone $_git_tree
  fi

  msg "Clone done, starting make..."

  rm -rf "$srcdir/$_git_name-build"
  cp -a "$srcdir/$_git_name" "$srcdir/${_git_name}-build"
  cd "$srcdir/$_git_name-build"

  python2 setup.py install --prefix=$pkgdir/usr || return 1

  rm -rf $srcdir/${_git_name}-build
}
