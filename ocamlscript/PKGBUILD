# Contributor: Dwight Schauer <dschauer@gmail.com>
pkgname=ocamlscript
pkgver=2.0.2
pkgrel=1
pkgdesc="compiles scripts, i.e. one-file programs, into natively-compiled binaries, and executes them."
arch=(i686 x86_64)
url="http://martin.jambon.free.fr/ocamlscript.html"
url_="http://martin.jambon.free.fr"
license=('boost')
groups=()
depends=(ocaml)
makedepends=()
optdepends=()
provides=()
conflicts=()
replaces=()
backup=()
options=()
install=
source=(${url_}/${pkgname}-${pkgver}.tar.gz)
noextract=()

md5sums=('e3e511d7537d2c5172603efec02073ce')


build() {
  cd "${srcdir}/${pkgname}-${pkgver}"


  echo "Preparing site lib"
  install -m 755 -d "${pkgdir}/usr/lib/ocaml/site-lib" || return 1
  install -m 755 -d "${pkgdir}/usr/bin" || return 1

  echo "Patching Makefile"
  sed "s,ocamlfind install,ocamlfind install -destdir ${pkgdir}/usr/lib/ocaml/site-lib," \
	-i Makefile || return 1

  echo "Building ${pkgname}"
  make BINDIR="${pkgdir}/usr/bin" || return 1

  echo "Installing ${pkgname}"
  make BINDIR="${pkgdir}/usr/bin" install

}

# vim:set ts=2 sw=2 et:
