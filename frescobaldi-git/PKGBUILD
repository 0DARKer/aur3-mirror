# Contributor:Raphaël Doursenaud <rdoursenaud@free.fr>

pkgname=frescobaldi-git
pkgver=v2.0.12.r10.g8b88f08
pkgrel=1
pkgdesc="Frescobaldi is an advanced text editor to edit LilyPond sheet music files. Features include an integrated PDF preview and a powerful Score Wizard."
arch=('i686' 'x86_64')
url="http://www.frescobaldi.org/" 
license="GPL"
depends=('lilypond' 'python2>=2.6.0' 'qt4>=4.7' 'python2-pyqt4>=4.8.3' 'poppler' 'python2-poppler-qt' 'tango-icon-theme')
optdepends=('portmidi: MIDI playback (default engine)' 'python-pygame: MIDI playback (alternative engine)')
makedepends=('git' 'automoc4' 'cmake' 'docbook-xsl')
conflicts=('frescobaldi')
provides=('frescobaldi')
source=("$pkgname"::'git://github.com/wbsoft/frescobaldi.git')
md5sums=('SKIP')

_gitroot='https://github.com/wbsoft/frescobaldi.git'
_gitname='frescobaldi'

pkgver() {
  cd "$srcdir/$pkgname"
  git describe --long | sed -E 's/([^-]*-g)/r\1/;s/-/./g'
}

build() {
  # Already in tango-icon-theme
  rm -rf "$srcdir/$pkgname/frescobaldi_app/icons/Tango"
}

package() {
  cd "$srcdir/$pkgname"
  python2 setup.py install --root="$pkgdir/" --optimize=1
}
