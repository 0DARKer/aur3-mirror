# Maintainer: Kyle Keen <keenerd@gmail.com>

pkgname=kartograph-git
pkgver=20130203
pkgrel=1
pkgdesc="A Python library that generates SVG maps from ESRI shapefiles."
url="http://kartograph.org"
arch=('any')
license=('AGPL')
depends=('python2' 'gdal' 'python2-psycopg2' 'python2-lxml' 'python2-pyproj' 'python2-tinycss' 'shapely')
makedepends=('git')
source=()
md5sums=()
_gitroot="git://github.com/kartograph/kartograph.py.git"
_gitname="kartograph-py"
_gitname2="kartograph.py"

build() {
    cd "$srcdir"
    msg "Connecting to github..."

    if [ -d "$srcdir/$_gitname2" ] ; then
        cd "$_gitname2" && git pull origin
        msg "The local files are updated."
    else
        git clone --depth 1 $_gitroot $gitname2
    fi

    msg "GIT checkout done or server timeout"
    msg "Building..."

    cd "$srcdir/$_gitname2"

    python2 setup.py install --prefix=/usr --root="$pkgdir" --optimize=0
    find "$pkgdir/" -name '*.pyc' -delete
}

package() {
    cd "$srcdir/$_gitname2"
}
