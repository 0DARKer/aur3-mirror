# Contributor: Tom Billiet (mouse256@ulyssis.org)
# Maintainer: Kevin Cox (youarefunny - ktcox@rogers.com)
pkgname=piklab
pkgver=0.15.10
pkgrel=3
pkgdesc="IDE applications based on Microchip PIC and dsPIC microcontrollers similar to MPLAB"
url="http://piklab.sourceforge.net/"
license=('GPL')
arch=('i686' 'x86_64')
depends=('kdelibs3' 'hicolor-icon-theme')
optdepends=('gputils:	Assembeler'
            'pk2cmd:	Upload via PikKit2 programer'
            'sdcc:	Compile C Code')
install=$pkgname.install
source=("http://downloads.sourceforge.net/project/$pkgname/newest%20release/$pkgver/$pkgname-$pkgver.tar.bz2")
md5sums=('21afd675a35a991f4b33562965504e0f')

build() {
	cd "${srcdir}/$pkgname-$pkgver"
	
	export KDEDIRS=${pkgdir}/usr:/opt/kde
	cmake -D 'CMAKE_BUILD_TYPE=Release'                       \
	      -D 'CMAKE_INSTALL_PREFIX=/usr'                      \
	      -D 'QT_INCLUDE_DIR:PATH=/opt/qt/include'            \
	      -D 'QT_MOC_EXECUTABLE:FILEPATH=/opt/qt/bin/moc'     \
	      -D 'QT_UIC_EXECUTABLE:FILEPATH=/opt/qt/bin/uic'     \
	      -D 'QT_QT_LIBRARY:FILEPATH=/opt/qt/lib/libqt-mt'    \
	      .
	
	make
	make DESTDIR="${pkgdir}" install
	
	rm -rf ${pkgdir}/usr/share/doc/HTML/en/piklab/common
}

#build() {
#	cd ${srcdir}/$pkgname-$pkgver
#	export KDEDIRS=${pkgdir}/usr:/opt/kde
#	cmake . \
#	-DCMAKE_INSTALL_PREFIX=/usr \
#	-DCMAKE_BUILD_TYPE=Release
#	make
#	make install
#}
