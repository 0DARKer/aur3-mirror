diff --git a/src/core/simplefilters.c b/src/core/simplefilters.c
index 9ea2a97..738c337 100644
--- a/src/core/simplefilters.c
+++ b/src/core/simplefilters.c
@@ -1885,7 +1885,7 @@ static const VSFrameRef *VS_CC lutGetframe(int n, int activationReason, void **i

                     for (hl = 0; hl < h; hl++) {
                         for (x = 0; x < w; x++)
-                            ((uint16_t *)dstp)[x] =  lut[srcp[x]];
+                            ((uint16_t *)dstp)[x] =  lut[((uint16_t *)srcp)[x]];

                         dstp += dst_stride;
                         srcp += src_stride;
@@ -2052,7 +2052,7 @@ static const VSFrameRef *VS_CC lut2Getframe(int n, int activationReason, void **

                     for (hl = 0; hl < h; hl++) {
                         for (x = 0; x < w; x++)
-                            ((uint16_t *)dstp)[x] =  lut[(srcpy[x] << shift) + srcpx[x]];
+                            ((uint16_t *)dstp)[x] =  lut[(((uint16_t *)srcpy)[x] << shift) + ((uint16_t *)srcpx)[x]];

                         dstp += dst_stride;
                         srcpx += src_stride;
