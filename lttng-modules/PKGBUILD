# Maintainer: Markus Opitz <mastero23 at gmail dot com>

pkgname=lttng-modules
pkgver=0.19.6
pkgrel=1
pkgdesc="Kernel Modules for LTTng"
arch=('i686' 'x86_64')
url="http://lttng.org/"
license=('GPL')
depends=('kernel26-lttng')
install=$pkgname.install
source=(http://lttng.org/files/lttng/$pkgname-$pkgver.tar.bz2)
md5sums=('aa4362cc19b6a7073d14646448bff139')

_kerneldir=/lib/modules/2.6.37-lttng/build

build() {
  cd "$srcdir/$pkgname-$pkgver"
  sed -i '/depmod -a/d' Makefile
  make KERNELDIR="$_kerneldir"
}

package() {
  cd "$srcdir/$pkgname-$pkgver"
  make KERNELDIR="$_kerneldir" \
       INSTALL_MOD_PATH="$pkgdir/" \
       modules_install
}
