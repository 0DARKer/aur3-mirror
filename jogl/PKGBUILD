# Maintainer:
# Contributor: Alexander RÃ¸dseth <rodseth@gmail.com>
# Contributor: Stefan Husmann <stefan-husmann@t-online.de>
# Contributor: Simon Lipp <sloonz+aur@gmail.com>

# jogl has changed, the package should probably be called jogamp instead

pkgname=jogl
pkgver=2.0rc11
pkgrel=1
pkgdesc='OpenGL bindings for Java'
arch=('x86_64' 'i686')
url="http://jogl.dev.java.net/"
url="http://jogamp.org/"
license=('BSD')
makedepends=('p7zip')
depends=('java-runtime' 'libgl')
if [ "$CARCH" != "i686" ]; then
  source=('http://jogamp.org/deployment/v2.0-rc11/archive/Sources/jogl-v2.0-rc11.tar.7z')
  #source=('http://jogamp.org/deployment/archive/rc/v2.0-rc11/jar/jogl-all-natives-linux-amd64.jar')
	md5sums=('3353100b501cf4207ad7ba92c12efc02')
else
  #source=('http://jogamp.org/deployment/v2.0-rc11/archive/Sources/jogl-v2.0-rc11.tar.7z')
  source=('http://jogamp.org/deployment/archive/rc/v2.0-rc11/jar/jogl-all-natives-linux-i586.jar')
	md5sums=('74d131fc1c1130d09109887679dbf044')
fi
# bsdtar segfaults, so use p7zip instead
noextract=(${source[@]##*/})

package() {
  cd "$srcdir"
  7z x "$pkgname-v2.0-rc11.tar.7z"
  tar xvf "$pkgname-v2.0-rc11.tar"
  cd "$pkgname-v2.0-rc11"

  install -d "$pkgdir/usr/share/java/jogl/"
  install -d "$pkgdir/usr/share/licenses/$pkgname"
  install -d "$pkgdir/usr/lib"
  install -Dm644 jogl-*/lib/jogl.jar "$pkgdir/usr/share/java/jogl/"
  install -Dm644 jogl-*/lib/gluegen-rt.jar "$pkgdir/usr/share/java/jogl/"
  install -Dm644 jogl-*/LICENSE-JOGL-*.txt "$pkgdir/usr/share/licenses/$pkgname"
  install -Dm644 jogl-*/lib/libgluegen-rt.so "$pkgdir/usr/lib/"
  install -Dm644 jogl-*/lib/libjogl.so "$pkgdir/usr/lib/"
  install -Dm644 jogl-*/lib/libjogl_awt.so "$pkgdir/usr/lib/"
  install -Dm644 jogl-*/lib/libjogl_cg.so "$pkgdir/usr/lib/"
}

# vim:set ts=2 sw=2 et:
