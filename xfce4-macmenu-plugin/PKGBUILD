# Maintainer: AqD <aquila.deus@gmail.com>
# Contributor: lh <jarryson@gmail.com>
pkgname=xfce4-macmenu-plugin
pkgver=1.0.15
pkgrel=1
pkgdesc="Mac-style menubar plugin for xfce panel (4.4+)"
arch=(i686 x86_64)
url="http://aquila.deus.googlepages.com/"
depends=('xfce4-panel>=4.3.99.2' 'libwnck>=2.16.1')
makedepends=(pkgconfig)
options=(!LIBTOOL)
license=(LGPL)
source=(macmenu-applet.c \
        macmenu-tslist.h \
        macmenu-applet.patch \
        xfce-plugin-desktop.patch \
        $pkgname.desktop)
md5sums=('f3c02035222ffaf9cd8ba89b51b578f4' \
         '442128110d99a35da54df6fd58b8c405' \
         '9916f7d29fa0e1409afeca66bf4fe945' \
         '6a2d90e1227445a24facab58f449c6f9' \
         'ce456ab558dd1940b83a13c6067f6bc6')


build() {
  cd ${startdir}/src
  patch -NRp0 < ../macmenu-applet.patch
  patch -NRp0 < ../xfce-plugin-desktop.patch
  gcc -std=gnu99 -Wall -fno-strict-aliasing -DFOR_XFCE `pkg-config --cflags --libs libwnck-1.0 libxfce4panel-1.0` $CFLAGS $LDFLAGS -o $pkgname macmenu-applet.c || return 1
  mkdir -p ${startdir}/pkg/usr/lib//xfce4/xfce4/panel-plugins
  mkdir -p ${startdir}/pkg/usr/share/xfce4/panel-plugins
  cp -f $pkgname ${startdir}/pkg/usr/lib/xfce4/xfce4/panel-plugins/
  cp -f $pkgname.desktop ${startdir}/pkg/usr/share/xfce4/panel-plugins/
}
