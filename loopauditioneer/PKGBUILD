# Maintainer: Joermungand <joermungand at gmail dot com>

pkgname=loopauditioneer
pkgver=0.7.4
pkgrel=1
pkgdesc="Software for loop and cue handling in .wav files"
arch=('i686' 'x86_64')
url="http://loopauditioneer.sourceforge.net/"
license=('GPL3')
depends=('wxgtk2.8' 'alsa-lib')
provides=('loopauditioneer')
conflicts=('loopauditioneer')
source=("$pkgname.sh" "$pkgname.desktop")
md5sums=('1ea7cc51c813bfe8e37a7ebb15184948'
         '0e2286c155701065663461be6c1056ba')
if [[ $CARCH == 'i686' ]]; then
   source+=("${pkgname}::http://downloads.sourceforge.net/project/${pkgname}/${pkgname/loopa/LoopA}-${pkgver%.*}/${pkgname/loopa/LoopA}-${pkgver}-Linux-x86.tar.gz")
   md5sums+=('83caa7a6e00ea69956cafdc0e429a889')
elif [[ $CARCH == 'x86_64' ]]; then
   source+=("${pkgname}::http://downloads.sourceforge.net/project/${pkgname}/${pkgname/loopa/LoopA}-${pkgver%.*}/${pkgname/loopa/LoopA}-${pkgver}-Linux-amd64.tar.gz")
   md5sums+=('280affd120c2499ca5789815019e6c21')
fi

package() {
	cd "$srcdir"
	mv ${pkgname/loopa/LoopA}* "$pkgname-$pkgver"
	mkdir -p "$pkgdir/usr/bin"
	cp "$pkgname.sh" "$pkgdir/usr/bin/$pkgname"
	mkdir -p "$pkgdir/usr/share/applications"
	cp "$pkgname.desktop" "$pkgdir/usr/share/applications/"
    cd "$srcdir/$pkgname-$pkgver"
    mkdir -p "$pkgdir/opt/${pkgname}"
    cp -Rf bin "$pkgdir/opt/${pkgname}/"
    cp -Rf icons "$pkgdir/opt/${pkgname}/"
    mkdir -p "$pkgdir/usr/share/pixmaps"
    cd "$pkgdir/usr/share/pixmaps"
    ln -s "../../../opt/$pkgname/bin/icons/LoopyIcon-48.png" "${pkgname}.png"
    cd "$srcdir/$pkgname-$pkgver"
    mkdir -p "$pkgdir/usr/share/doc/${pkgname}"
    cp LICENSE.txt "$pkgdir/usr/share/doc/${pkgname}/"
    cp README.txt "$pkgdir/usr/share/doc/${pkgname}/"
}

