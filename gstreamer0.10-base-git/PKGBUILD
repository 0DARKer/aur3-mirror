# Maintainer: Thijs Vermeir <thijsvermeir@gmail.com>

_upname=gst-plugins-base
_upver=0.10.30.1
pkgname=gstreamer0.10-base-git
pkgver=20100719
pkgrel=1
pkgdesc="GStreamer Multimedia Framework Base plugin libraries"
arch=(i686 x86_64)
license=('LGPL')
depends=('gstreamer0.10-git' 'liboil>=0.3.16' 'libsm' 'libxv' 'alsa-lib>=1.0.20' 'cdparanoia>=10.2' 'libvisual' 'libvorbis>=1.2.0' 'libtheora')
optdepends=('pango')
makedepends=('pkgconfig' 'pango')
replaces=('gstreamer0.10-base' 'gstreamer0.10-alsa' 'gstreamer0.10-theora' 'gstreamer0.10-libvisual' 'gstreamer0.10-pango' 'gstreamer0.10-cdparanoia' 'gstreamer0.10-vorbis' 'gstreamer0.10-ogg')
conflicts=('gstreamer0.10-base' 'gstreamer0.10-alsa' 'gstreamer0.10-theora' 'gstreamer0.10-libvisual' 'gstreamer0.10-pango' 'gstreamer0.10-cdparanoia' 'gstreamer0.10-vorbis' 'gstreamer0.10-ogg')
provides=("gstreamer0.10-base=${_upver}" "gstreamer0.10-base-plugins=${_upver}" "gstreamer0.10-alsa=${upver}" "gstreamer0.10-theora=${upver}" "gstreamer0.10-libvisual=${upver}" "gstreamer0.10-pango=${upver}" "gstreamer0.10-cdparanoia=${upver}" "gstreamer0.10-vorbis=${upver}" "gstreamer0.10-ogg=${upver}" "gst-plugins-base=${upver}")
options=(!libtool)
url="http://gstreamer.freedesktop.org/"
source=()
md5sums=()
groups=('gstreamer')

_gitroot=git://anongit.freedesktop.org/gstreamer/${_upname}
_gitname=master

build() {
  cd "${srcdir}"
  if [ -d "${_upname}" ] ; then
    cd "${_upname}" && git pull --rebase || return 1
  else
    git clone --depth 1 "${_gitroot}" || return 1
    cd "${_upname}"
  fi
  sh autogen.sh --prefix=/usr --sysconfdir=/etc --localstatedir=/var \
    --disable-static --disable-gnome_vfs || return 1
  make || return 1
  make DESTDIR="${pkgdir}" install || return 1
}

