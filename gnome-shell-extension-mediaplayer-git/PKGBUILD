# Maintainer: Alucryd <alucryd@gmail.com>
pkgname=gnome-shell-extension-mediaplayer-git
pkgver=20110606
pkgrel=1
pkgdesc="A mediaplayer indicator for the gnome-shell."
arch=('any')
url="http://github.com/horazont/gnome-shell-extensions-mediaplayer"
source=('metadata.patch')
md5sums=('6a3aa8d92d9eb7467017473e3f197efd')
license=('GPL3')
depends=('gnome-shell')
makedepends=('git')
install=('mediaplayer.install')

_gitroot="https://github.com/horazont/gnome-shell-extensions-mediaplayer"
_gitname="gnome-shell-extension-mediaplayer"

build() {
    cd ${srcdir}
    msg "Connecting to the GIT server..."
    if [[ -d ${srcdir}/${_gitname} ]] ; then
    	cd ${_gitname}
    	git pull origin
    	msg "The local files are updated..."
    else
    	git clone ${_gitroot} ${_gitname}
        cd ${_gitname}
    fi
    msg "GIT checkout done."
    cd media@sotecware.net
    patch -i ../../metadata.patch
}

package() {
    cd "$srcdir/${_gitname}"
    mkdir -p "$pkgdir/usr/share/gnome-shell/extensions/"
    cp -R "media@sotecware.net" "$pkgdir/usr/share/gnome-shell/extensions"
}

