# Contributor: Jan Cholasta <grubber@grubber.cz>

pkgname=slade
pkgver=3.0.2
pkgrel=1
pkgdesc="SLADE3 Doom editor."
arch=('i686' 'x86_64')
url="http://slade.mancubus.net/"
license=('GPL')
depends=('bzip2' 'fluidsynth' 'freeimage' 'sfml' 'wxgtk-2.9' 'zlib')
makedepends=('cmake')
source=(http://slade.mancubus.net/files/${pkgname}_302_src.zip
        $pkgname-$pkgver-cmake.patch
        slade.desktop
        slade.png)
md5sums=('4cce3c83292ea55044b7d385bb61a907'
         '5ba0ea8add5a46e8e4fde601c3822fc5'
         '2c7337f8f918009b8633f6650a583efd'
         '85e440a64d8185fb903b1cec4f72c234')

build() {
  patch -p1 <"$srcdir"/$pkgname-$pkgver-cmake.patch

  cmake -DwxWidgets_CONFIG_EXECUTABLE=/usr/bin/wx-config-2.9 -DwxWidgets_wxrc_EXECUTABLE=/usr/bin/wxrc-2.9 .
  make
}

package() {
  install -Dm755 slade "$pkgdir"/usr/bin/slade
  install -Dm644 dist/slade.pk3 "$pkgdir"/usr/share/slade3/slade.pk3

  install -Dm644 slade.desktop "$pkgdir"/usr/share/applications/slade.desktop
  install -Dm644 slade.png "$pkgdir"/usr/share/pixmaps/slade.png
}
