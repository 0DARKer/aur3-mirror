# Maintainer: Joshua Stiefer <facedelajunk at gmail.com>
# Contributor: Michael Seiwald <michael at mseiwald.at>
# Contributor: Techlive Zheng <techlivezheng at gmail.com>

pkgname=lastpass-pocket
pkgver=2.0.2
pkgrel=1
pkgdesc="Backup and offline access for LastPass"
arch=('i686' 'x86_64')
url="https://lastpass.com"
license=('LastPass')
options=('!strip')
depends=('ca-certificates' 'openssl' 'libldap' 'libidn' 'gtk2' 'libpng12')
[ "$CARCH" = 'x86_64' ] && _64=_x64
source=("https://download.lastpass.com/pocket$_64.tar.bz2"
        'lastpass.desktop'
        'lastpass.png')
md5sums=('57d2d5329d43e9caf67792b4c025f3fe'
         '09297a72acb09a0629c7a8ba110406a4'
         'd31e3c42d3eef873cecdb8d49ee5dd6c')
[ "$_64" ] && md5sums[0]='4c53bce960e17377c4e8d26d0ee0a0c5'

build() {
  sed -i 's/libssl.so.0.9.8/libssl.so.1.0.0/g' pocket$_64
  sed -i 's/libcrypto.so.0.9.8/libcrypto.so.1.0.0/g' pocket$_64
}

package() {
  install -Dm755 pocket$_64 "$pkgdir/usr/bin/lastpass"
  install -Dm644 lastpass.png "$pkgdir/usr/share/icons/lastpass.png"
  install -Dm644 lastpass.desktop "$pkgdir/usr/share/applications/lastpass.desktop"
}