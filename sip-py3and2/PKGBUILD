# SIP for Python3 and 2.6: Installer: Arch
# Contributor: Ivo Benner <ivo.benner[at]web.de>

pkgname=sip-py3and2
realname=sip
pkgver=4.12
pkgdate=20100806
pkgrel=1
pkgdesc="A tool that makes it easy to create Python3.x and 2.x bindings 
for C and C++ libraries."
arch=('any')
url="http://www.riverbankcomputing.com/software/sip/"
license=('custom:"sip"')
provides=('sip')
depends=('python2>=2.6' 'python>=3.1')
conflicts=('sip' 'sip4')
replaces=('sip')
options=(!emptydirs)

source=(http://riverbankcomputing.com/static/Downloads/${realname}4/${realname}-${pkgver}.tar.gz)
md5sums=('8a0998fbaf34bdab2c15af3d4fa3bc0e')

build() {
  cd ${srcdir}/${realname}-${pkgver}

  python2 configure.py || return 1
  make clean
  make || return 1
  make DESTDIR=${pkgdir} install || return 1
  #chmod 644 ${pkgdir}/usr/lib/python2.6/site-packages/${realname}distutils.py

  make clean
  python3 configure.py || return 1
  make || return 1
  make DESTDIR=${pkgdir} install || return 1
  #chmod 644 ${pkgdir}/usr/lib/python3.1/site-packages/${realname}distutils.py
  
  install -m 644 -D LICENSE  ${pkgdir}/usr/share/licenses/${realname}/LICENSE
}
