# Submitter: Carlos Eduardo Moreira dos Santos (cemsbr) <cems at domain cemshost.com.br>
# Mantainer: iosonofabio Fabio Zanini <fabio.zanini@fastmail.fm>

pkgname=bzr-stats
pkgver=20110404
pkgrel=1
pkgdesc="Simple statistics plugin for Bazaar."
arch=('i686' 'x86_64')
url="http://launchpad.net/bzr-stats"
license=('GPL')
depends=('bzr')

build() {
  bzr checkout --lightweight lp:bzr-stats "${startdir}/src"

  cd "${srcdir}"

  # Replace python with python2
  for file in $(find ./ -name '*.py' -print); do
      sed -i 's_^#!.*/usr/bin/python_#!/usr/bin/python2_' $file
      sed -i 's_^#!.*/usr/bin/env.*python_#!/usr/bin/env python2_' $file
  done

  # Install
  python2 setup.py install --prefix'=/usr' --root="${startdir}/pkg"
}
