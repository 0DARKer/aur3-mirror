# Contributor: Jonathan Wiersma <archaur at jonw dot org>

pkgname=eclipse-dltk-rse
_stream="R1.0"
_buildtype="M"  # R => Released, M => Maintenance, S => Stable, I => Integration
_buildname="M200911111238"
_builddate="200911111238"
pkgver="${_stream}_${_buildname}"
pkgrel=1
pkgdesc="Mylyn support for DLTK in Eclipse"
arch=('i686' 'x86_64')
url="http://www.eclipse.org/dltk/"
license=('EPL')
depends=("eclipse-dltk-core" "eclipse-rse")
noextract=($pkgname-$pkgver.zip)

_url_path="technology/dltk/downloads/drops/${_stream:0:4}/${_buildtype}-${_buildname}-${_builddate}"
_url_file="${pkgname#eclipse-}-sdk-${_buildtype}-${_buildname}-${_builddate}.zip"
_url1="http://www.eclipse.org/downloads/download.php?file=/$_url_path/$_url_file&url="
_url2="http://eclipse.unixheads.org/$_url_path/$_url_file&mirror_id=480"
source=("$pkgname-$pkgver.zip::$_url1$_url2")
md5sums=('7c7ccadef93e43e6dc1bb6865b30168c')

build() {
	cd $srcdir || return 1
	jar xf $pkgname-$pkgver.zip || return 1
	install -dm755 $pkgdir/usr/share/eclipse/dropins/${pkgname#eclipse-}/ || return 1
	find eclipse -type f -exec install -Dm644 {} \
		$pkgdir/usr/share/eclipse/dropins/${pkgname#eclipse-}/{} \; || return 1
}
