# Contributor: domanov <_domanov_@_gmail_.com>
# Maintainer: SanskritFritz (gmail)

pkgname=logkeys
pkgver=0.1.1a
pkgrel=6
pkgdesc="Simple keylogger also supporting USB keyboards"
arch=('i686' 'x86_64')
url="http://code.google.com/p/logkeys/"
license=('GPLv3')
optdepends=('logkeys-keymap: for keymaps other than standard en_US')
install=logkeys.install
source=(http://logkeys.googlecode.com/files/$pkgname-$pkgver.tar.gz
        logkeys-stdout.patch
        logkeysd
	logkeysd.conf)

md5sums=('19362a382b65e89c66ea4c5642297589'
         'c11258ab13560081c2cdb56ccd31c6cd'
         '761bf7cf5ab6b1352420f62477bf1dd4'
         '291370dc6e18e4cc06a943d3efc170b6')
build() {
	cd "${srcdir}/${pkgname}-${pkgver}"
	patch -p1 < "${srcdir}/logkeys-stdout.patch"
	./configure --prefix=/usr
	make || return 1
}

package() {
	cd "${srcdir}/${pkgname}-${pkgver}"
	make prefix="${pkgdir}/usr" install

	install -Dm0755 "${srcdir}/logkeysd" "${pkgdir}/etc/rc.d/logkeysd"
	install -Dm0755 "${srcdir}/logkeysd.conf" "${pkgdir}/etc/conf.d/logkeysd"
}
