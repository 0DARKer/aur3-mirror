# Maintainer: Ismo Toijala <ismo.toijala@gmail.com>

pkgname=pmclib
pkgver=1.2
pkgrel=1
pkgdesc="Population Monte Carlo"
arch=('x86_64')
url="http://www2.iap.fr/users/kilbinge/CosmoPMC/"
license=('none')
depends=('gsl' 'fftw')
makedepends=('python2')
source=('http://www2.iap.fr/users/kilbinge/CosmoPMC/pmclib_v1.01.tar.gz'
        'http://www2.iap.fr/users/kilbinge/CosmoPMC/patch_pmclib_1.x_1.2.tar.gz')

prepare() {
	cd "$srcdir"
	cp patch_pmclib_1.x_1.2/{maths,mvdens,pmc,tools}.c "pmclib_v1.01/pmclib/src"
	cp patch_pmclib_1.x_1.2/{maths,mvdens}.h "pmclib_v1.01/pmclib/include"
}

build() {
	cd "$srcdir/${pkgname}_v1.01"
	python2 waf configure \
		--m64 \
		--lua_link=... \
		--lapack_link=... \
		--prefix=/usr
	python2 waf build
}

package() {
	cd "$srcdir/${pkgname}_v1.01"
	python2 waf --destdir="$pkgdir" install
}

md5sums=('da2095518601ae59ee23c2716b6729cd'
         '288e3c361c8145a5179ac84ebf72566e')
