#Maintainer: Juho Rutila <juho.rutila@gmail.com>
# Copied from mongodb
pkgname=mongodb-bin
pkgver=1.6.5
pkgrel=1
pkgdesc="A high-performance, open source, schema-free document-oriented database."
arch=('i686' 'x86_64')
url="http://www.mongodb.org"
license=('AGPL')
depends=(boost-libs spidermonkey pcre)
optdepends=('libpcap: needed for mongosniff')
provides=('mongodb')
backup=('etc/mongodb.conf')
source=("http://fastdl.mongodb.org/linux/mongodb-linux-$CARCH-${pkgver}.tgz"
        "mongodb.rc"
        "mongodb.conf")
md5sums=('0a64adafd9772b6b2d748c3b088bd895'
         'ebc707d3348c1f908166847040153620'
         '9e0ea3f96732bb7811f0b64dace56440')
[ "$CARCH" = "i686" ] &&
md5sums=('c2b8dfed2c003ddfab535f0b6dff64d2'
         'ebc707d3348c1f908166847040153620'
         '9e0ea3f96732bb7811f0b64dace56440')
install="mongodb.install"

package() {
    install -d "$pkgdir/usr/bin"
    install -D $srcdir/mongodb-linux-$CARCH-${pkgver}/bin/* $pkgdir/usr/bin 
    install -Dm 755 "$startdir/mongodb.rc" "$pkgdir/etc/rc.d/mongodb"
    install -Dm 644 "$startdir/mongodb.conf" "$pkgdir/etc/mongodb.conf"
    install -dm 700 "$pkgdir/var/state/mongodb"

    if [ -d "$pkgdir/usr/lib64" ]
    then
        mv "$pkgdir/usr/lib64" "$pkgdir/usr/lib"
    fi
}
