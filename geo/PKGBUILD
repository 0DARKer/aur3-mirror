# Maintainer: Jaroslav Lichtblau <dragonlord@aur.archlinux.org>

pkgname=geo
pkgver=110202150725
pkgrel=1
pkgdesc="Various tools for geocaching"
arch=('i686')
url="http://geo.rkkda.com/"
license=('Public Domain')
depends=('perl' 'units')
makedepends=('txt2man')
optdepends=('gpsbabel: for GPS management'
            'gpsd: for GPS management'
            'gpsdrive: for GPS management'
            'tangogps: for GPS management')
source=(http://geo.rkkda.com/$pkgname-11-02-02-15-07-25.tar.gz \
        geo-install-patch.diff)
sha256sums=('2931470a101624bc5557e41d0c89c865c15e6f117e4dc39dde4d81943c6e299a'
            'd78181a59e617d39e69342a2a305c12c8fa31a90a2ef77e171103c9af7f1694e')

build() {
  cd ${srcdir}/$pkgname

  make
}

package(){
  cd ${srcdir}/$pkgname

  patch -Np0 -i ${srcdir}/geo-install-patch.diff

  install -d ${pkgdir}/usr/bin
  make PREFIX=${pkgdir}/usr install

#more tools
  install -D -m644 ${srcdir}/$pkgname/geodetics.html \
    ${pkgdir}/usr/share/doc/$pkgname/geodetisc.html
  install -D -m644 ${srcdir}/$pkgname/greatcircle.html \
    ${pkgdir}/usr/share/doc/$pkgname/greatcircle.html

#man pages
  install -d ${pkgdir}/usr/share/man/{man1,man7}
  make PREFIX=${pkgdir}/usr MANDIR=${pkgdir}/usr/share/man install-man
}
