# Contributor: Kozec <kozec at kozec dot com>
pkgname=gnome-shell-pidgin
pkgver=0.1
pkgrel=2
pkgdesc="Plugin for the Pidgin IM providing integration with gnome-shell user status menu."
url="http://sourceforge.net/projects/gnomeshpidgin/"
depends=('pidgin' 'dbus-core' 'libpurple')
source=(
	"http://downloads.sourceforge.net/gnomeshpidgin/gnomeShellPidgin.c"
	"stuff.patch"
	"Makefile"
	)
license=('GPL')
arch=('i686' 'x86_64')
md5sums=('09c4edcd6a1ce1c7008d942862cf7562'
         'fb39cc0f268820e90dcebfe23eaaeed3'
         '57b5caaeca8d6a2c7f36e0740c278a62')

build() {
	cd "$srcdir"
	mkdir -p "build"
	cd "build"
	cp -L ../gnomeShellPidgin.c ../Makefile .
	# stuff.path - see patch file for description
	patch -Np0 -i ../stuff.patch || return 1
	make gnomeShellPidgin.so || return 1
}

package() {
	mkdir -p "$pkgdir/usr/lib/purple-2/"
	cd "$srcdir/build"
	make DESTDIR="$pkgdir" install
}
