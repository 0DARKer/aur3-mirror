# Contributor: Enrico Morelli <morelli@cerm.unifi.it>
pkgname=glaxium
pkgver=0.5
pkgrel=2
pkgdesc="OpenGL-based space-ship shoot-em-up style game"
arch=(i686)
url="http://xhosxe.free.fr/glaxium"
license=('GPL')
depends=("sdl" "sdl_mixer" "libpng" "mesa" "freeglut")
source=(http://xhosxe.free.fr/${pkgname}/${pkgname}_${pkgver}.tar.gz \
	${pkgname}-${pkgver}-rc.patch \
	${pkgname}-${pkgver}-gcc41.patch \
	${pkgname}-${pkgver}-build.patch)

md5sums=('ea6d6f8b4ebb7c73b74af64d83f45cb7'
         'ab479510f01767b032042d1d964670cd'
         '57c59919852db441f8cdd5a0c38a682f'
         '7a7880d16227c8e1c5a2173e4832b112')

build() {
  cd $startdir/src/${pkgname}_${pkgver}
  patch -Np0 -i ${startdir}/src/${pkgname}-${pkgver}-rc.patch || return 1
  patch -Np0 -i ${startdir}/src/${pkgname}-${pkgver}-gcc41.patch || return 1
  patch -Np0 -i ${startdir}/src/${pkgname}-${pkgver}-build.patch || return 1
  ./configure --prefix=/usr
  make || return 1
  install -D -m0755 ${startdir}/src/${pkgname}_${pkgver}/glaxium ${startdir}/pkg/usr/bin/glaxium
  install -d ${startdir}/pkg/usr/share/games/glaxium/
  cp -r ${startdir}/src/${pkgname}_${pkgver}/textures ${startdir}/pkg/usr/share/games/glaxium/
  cp -r ${startdir}/src/${pkgname}_${pkgver}/samples ${startdir}/pkg/usr/share/games/glaxium/
}
