# Maintainer: 3ED <krzysztof1987 _at_ gmail _dot_ com>

pkgname=vim-bash-support
pkgver=4.2
_srcid=21272
pkgrel=1
pkgdesc='BASH-IDE - Write and run BASH-scripts using menus and hotkeys. '
arch=('any')
url='http://vim.sourceforge.net/scripts/script.php?script_id=365'
license=('custom:vim')
depends=('vim-vim-support')
optdepends=('bashdb: bash debugger')
install='vimdoc.install'
source=("${pkgname}-${pkgver}.zip::http://www.vim.org/scripts/download_script.php?src_id=$_srcid")
noextract=("${pkgname}-${pkgver}-${_srcid}.zip")
sha256sums=('ef6bb7b86fd446ae33fee6aa6ca8f1d8051678cd69860700aa4c77c81860a740')

package() {
  _DESTDIR="$pkgdir"/usr/share/vim/vimfiles

  install -dm755 "${_DESTDIR}"
  bsdtar -xf ${pkgname}-${pkgver}.zip -C "${_DESTDIR}" \
    --exclude "autoload/mmtemplates/core.vim" \
    --exclude "doc/templatesupport.txt" \
    --exclude "syntax/template.vim"

  # Fix perms
  find "${_DESTDIR}" -type d -print0 | xargs -0 chmod 0755
  find "${_DESTDIR}" -type f -print0 | xargs -0 chmod 0644
}
