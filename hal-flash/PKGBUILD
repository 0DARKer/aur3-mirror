# Maintainer: Freonmonkey <freonmonkey at gmail dot com>
#
# This project provides a stub libhal that uses UDisks and meets the needs
# for playing Flash DRM content without a full HAL installation and daemon.

pkgname=hal-flash
pkgver=0.2.0rc1
pkgrel=1
pkgdesc="A libhal stub library forwarding to UDisks for flash to play DRM content"
arch=('i686' 'x86_64')
url="https://github.com/cshorler/hal-flash"
license=('GPL2') 
groups=()
depends=('udisks' 'dbus')
makedepends=('autoconf>=2.60' 'pkgconfig' 'git')
provides=('hal=0.5.15')
conflicts=('hal')
options=('')
source=("$pkgname.tar.gz"::'https://build.opensuse.org/source/devel:openSUSE:Factory/hal-flash/libhal1-flash_0.2.0rc1.tar.gz?rev=42276d0b3e0a0aae3d086ff23f6cb827')
md5sums=('4aa4d29d2e97792ff030a427256a14aa')

prepare() {
	cd "$srcdir"
	mv libhal1-flash_0.2.0rc1 "$pkgname"

	cd "$srcdir/$pkgname"

	msg "prepare(): Running autoreconf and configuring..."
	autoreconf -i >/dev/null
	./configure --prefix=/usr --enable-static=no

}

build() {
	cd "$srcdir/$pkgname"
	make
}

package() {
	# Install built files into the package
	cd "$srcdir/$pkgname"
	make PREFIX=/usr DESTDIR="${pkgdir}" install
	
	# Skip copying COPYING to LICENSE since it's just GPL2
} 

