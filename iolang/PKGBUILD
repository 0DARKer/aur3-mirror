pkgname=iolang
pkgver=2011.04.24
pkgrel=1
pkgdesc="Io is a dynamic prototype-based programming language"
arch=('i686' 'x86_64')
license=('BSD')
url="http://www.iolanguage.com/"
makedepends=('cmake>=2.8')
source=(https://download.github.com/stevedekorte-io-2010.06.06-348-g99ae483.tar.gz)
md5sums=('d7504c5fb6dbcab57cf1b3e18007837c')

build() {
  cd "${srcdir}/stevedekorte-io-99ae483"
  sed -i '34,35d' CMakeLists.txt
  sed -i '34i\  SET(CMAKE_CXX_FLAGS_DEBUGFAST "-g -O0 -ldl")\n  SET(CMAKE_C_FLAGS_DEBUGFAST "-g -O0 -ldl")' CMakeLists.txt
  sed -i '114,$d' CMakeLists.txt # remove cpack
  mkdir -p build
  cd build
  cmake -DCMAKE_INSTALL_PREFIX=${pkgdir}/usr .. || return 1
  make || return 1
  make install || return 1
  install -Dm644 ../license/bsd_license.txt ${pkgdir}/usr/share/licenses/${pkgname}/bsd_license.txt
}
