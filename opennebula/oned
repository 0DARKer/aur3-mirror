#!/bin/bash
# Description: Starts the OpenNebula service as the 'oneadmin' user

. /etc/rc.conf
. /etc/rc.d/functions

case "$1" in
        start)
                stat_busy 'Starting OpenNebula'
                su - oneadmin /usr/bin/one start && stat_done
                ;;
        stop)
                stat_busy 'Stopping OpenNebula'
                su - oneadmin /usr/bin/one stop && stat_done
                ;;
        restart)
                stat_busy 'Restarting OpenNebula'
                su - oneadmin /usr/bin/one stop
                sleep 1
                su - oneadmin /usr/bin/one start
                ;;
        *)
                echo "Usage: one {start|stop|restart}" >&2
                exit 1
                ;;
esac
exit 0
