# Maintainer: Jeremy Blawn <jblawn@gmail.com>
pkgname=sheepdog
pkgver=0.2.3
pkgrel=1
pkgdesc="Distributed storage system for QEMU/KVM"
arch=('x86_64')
url="http://www.osrg.net/sheepdog/"
license=('GPLv2')
depends=('glibc>=2.9' 'corosync' 'qemu-kvm>=0.13')
makedepends=('autoconf' 'automake' 'libtool' 'pkg-config')
source=("collie-sheepdog-6973afd.tar.gz::https://github.com/collie/sheepdog/tarball/v0.2.3")
md5sums=('00855fcc5b2815792559aa267061aa33') 

build() {
  cd "$srcdir/collie-sheepdog-6973afd"

  ./autogen.sh
  ./configure --prefix=/usr \
	      --sysconfdir=/etc \
	      --localstatedir=/var
  make
}

package() {
  cd "$srcdir/collie-sheepdog-6973afd"

  make DESTDIR="$pkgdir/" install
  mkdir "${pkgdir}/etc/rc.d"
  mv "${pkgdir}/etc/init.d/sheepdog" "${pkgdir}/etc/rc.d/sheepdog"
  rm -r "${pkgdir}/etc/init.d"
}
