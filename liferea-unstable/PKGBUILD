# Maintainer: ValHue <vhuelamo at gmail dot com>
# https://github.com/ValHue/AUR-PKGBUILDs
#
# Contributor: Matthias Maennich <arch at maennich dot net>
# Contributor: Leonid Selivanov <bravebug at gmail dot com>

_pkgname="liferea"
_pkgver=1.10-RC3
pkgname="${_pkgname}-unstable"
pkgver=1.10.RC3
pkgrel=1
pkgdesc="A desktop news aggregator for online news feeds and weblogs - Unstable"
arch=('i686' 'x86_64')
url="http://liferea.sourceforge.net/"
license=('GPL')
depends=('gconf' 'webkitgtk3' 'libnotify' 'sqlite' 'libsoup' 'libunique3' 'json-glib' 'libpeas')
makedepends=('pkgconfig' 'diffutils' 'intltool')
options=('!libtool' '!emptydirs')
provides=('liferea')
conflicts=('liferea' 'liferea-git')
install="${pkgname}.install"
source=("http://downloads.sourceforge.net/sourceforge/liferea/liferea-${_pkgver}.tar.bz2")
md5sums=('5d9621f92e88cf0eb8dbab2bc1e322db')

build() {
	cd "${srcdir}/${_pkgname}-${_pkgver}"

	./configure \
	--prefix=/usr \
	--sysconfdir=/etc \
	--localstatedir=/var \
	--disable-schemas-install

	make ${MAKEFLAGS}
}

package() {
    cd "${srcdir}/${_pkgname}-${_pkgver}"
    make DESTDIR="${pkgdir}" install

    install -d "${pkgdir}/usr/share/gconf/schemas"
    gconf-merge-schema "${pkgdir}/usr/share/gconf/schemas/${pkgname}.schemas" ${pkgdir}/etc/gconf/schemas/*.schemas
    rm -f ${pkgdir}/etc/gconf/schemas/*.schemas
}
