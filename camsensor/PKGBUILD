# Maintainer: Nicolo' Barbon <smilzoboboz@gmail.com>
pkgname=camsensor
pkgver=0.0.2
pkgrel=1
pkgdesc="calculates ambient brightness and suggests (or sets) screen's correct backlight level using a webcam"
arch=(any)
url="http://sourceforge.net/projects/camsensor/"
license=('GPLv3')
groups=()
depends=('python-pygame' 'python-imaging' 'python2-numpy')
makedepends=('python-distutils-extra' 'intltool')
optdepends=('python2-pyqt: for the screen balance feature, useless on a non graphical enviroment')
provides=('camsensor')
conflicts=()
replaces=()
backup=()
options=()
install=
changelog=
source=(http://sourceforge.net/projects/$pkgname/files/$pkgname-beta/$pkgver/$pkgname-$pkgver.tar.gz)
noextract=()
md5sums=('bfe22fc45540b590c6c0eb142de8f0cb') #generate with 'makepkg -g'

build() {
  cd "$srcdir/$pkgname"
  ./setup.py build
}

package() {
  cd "$srcdir/$pkgname"
  if [ -e /sys/class/backlight/*/brightness ]; then chmod 666 /sys/class/backlight/*/brightness
  else echo "Your configuration is currently not supported."; return 1; fi
  ./setup.py install --prefix="$pkgdir/usr/"
}