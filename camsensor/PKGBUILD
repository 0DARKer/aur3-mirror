# Maintainer: Nicol√≤ Barbon <smilzoboboz@gmail.com>
pkgname=camsensor
pkgver=0.0.1
pkgrel=6
pkgdesc="calculates ambient brightness and suggests (or sets) screen's correct backlight level using a webcam"
arch=(any)
url="http://sourceforge.net/projects/camsensor/"
license=('GPLv3')
groups=()
depends=('python2-pyqt' 'python-pygame' 'python-imaging' 'python2-numpy')
makedepends=('python-distutils-extra' 'intltool')
optdepends=()
provides=('camsensor')
conflicts=()
replaces=()
backup=()
options=()
install=
changelog=
source=(http://sourceforge.net/projects/$pkgname/files/$pkgname-beta/$pkgver/$pkgname-$pkgver.tar.gz)
noextract=()
md5sums=('9030db74837fde2c2dba10e5ff168c72') #generate with 'makepkg -g'

build() {
  cd "$srcdir/$pkgname"
  cat camsensor.py | sed 's/unicode=True/unicode=False/g' > camsensor.py.bak
  rm camsensor.py
  mv camsensor.py.bak camsensor.py
  ./setup.py build
}

package() {
  cd "$srcdir/$pkgname"
  ./setup.py install --prefix="$pkgdir/usr/"
  chmod 666 /sys/class/backlight/*/brightness
}