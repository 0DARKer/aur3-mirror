
# Put the desired install prefix HERE
_iprefix=/opt/compiz-09

pkgname=ccsm-09
pkgver=0.9.2.1
pkgrel=1
pkgdesc="Compizconfig Settings Manager in Python"
arch=('any')
url="http://compiz.org"
install="ccsm-09.install"
license=('GPL')
depends=('compiz-core-09' 'compizconfig-python-09' 'pygtk')
source=("http://releases.compiz.org/$pkgver/ccsm-${pkgver}.tar.gz")
sha1sums=('980b4b6a4a71ed048ecf777f9151559c7998ce7e')

# This is a developement version
OPTIONS=(!strip)

build()
{
	cd "ccsm-${pkgver}"
	python2 setup.py build --prefix="${_iprefix}"
	python2 setup.py install --prefix="${_iprefix}" --root="${pkgdir}"
	cat <<EOF > ccsm-09
#!/bin/bash
PREFIX="${_iprefix}"
exec env LD_LIBRARY_PATH=\$PREFIX/lib/ PYTHONPATH=\$PREFIX/lib/python2.7/site-packages \$PREFIX/bin/ccsm
EOF
	install -m755 ccsm-09 ${pkgdir}${_iprefix}/bin/
	mkdir -p "$pkgdir/usr/bin"
	ln -s "${_iprefix}/bin/ccsm-09" "$pkgdir/usr/bin/ccsm-09"
	sed -i "s|@prefix@|${_iprefix}|g" "${startdir}/${install}"
}
