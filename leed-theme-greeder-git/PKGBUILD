# Maintainer: Tetsumaki <http://goo.gl/YMBdA>

pkgname=leed-theme-greeder-git
pkgver=20130316
pkgrel=1
pkgdesc="Greeder is a theme inspired by Google Reader for Leed."
arch=('any')
url="https://github.com/shimmerproject/Greybird"
license=('CC by-nc-sa')
depends=('leed-svn')
makedepends=('git')

_gitroot="git://github.com/tmos/greeder.git"
_gitname=greeder
_gitbranch=master

build() {
	if [ ! -d "${_gitname}" ]; then
		git clone -b ${_gitbranch} --depth 1 ${_gitroot} ${_gitname}
	else
		cd "${_gitname}"
		git reset --hard
		git pull origin
		git clean -dfx
	fi

	msg "GIT checkout done."
}

package() {
	install -dm755 "${pkgdir}/usr/share/webapps/leed/templates/${_gitname}/"
	cd "${srcdir}/${_gitname}"
	cp -rf * "${pkgdir}/usr/share/webapps/leed/templates/${_gitname}/"
	cd "${pkgdir}/usr/share/webapps/leed/templates/${_gitname}/"
	rm -rf {.git,.gitattributes,.gitignore,LICENCE,README}
	chmod -R 755 *
}
