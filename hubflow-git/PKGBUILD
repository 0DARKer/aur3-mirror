# Maintainer: Mateusz Loskot <mateusz@loskot.net>
# Contributor: Mateusz Loskot <mateusz@loskot.net>
pkgname=hubflow-git
pkgver=20130322
pkgrel=1
pkgdesc="HubFlow: A Git extension to make it easy to use GitFlow with GitHub. Based on the original gitflow extension for git."
arch=('i686' 'x86_64')
url="http://github.com/datasift/gitflow"
license=('BSD')
depends=('git')

_gitroot="git://github.com/datasift/gitflow.git"
_gitname="hubflow"

build() {
  msg "Connecting to GIT server"
  if [ -d ${srcdir}/$_gitname ] ; then
    cd ${srcdir}/$_gitname && git pull origin || return 1
    msg "The local files are updated."
  else
    git clone $_gitroot $_gitname || return 1
  fi
  msg "GIT checkout done or server timeout"

  msg "Getting submodule"
  cd ${srcdir}/${_gitname}
  git submodule init
  git submodule update
  msg "Submodule checkout done or server timeout"
}

package() {
  # Instal
  cd ${srcdir}/${_gitname}
  INSTALL_INTO=${pkgdir}/usr/bin ./install.sh
  
  # Copy license over
  mkdir -p ${pkgdir}/usr/share/licenses/${pkgname}
  cp ${srcdir}/${_gitname}/LICENSE ${pkgdir}/usr/share/licenses/$pkgname/
}

# vim:set ts=2 sw=2 et:
