# Maintainer: Thomas Zervogiannis <tzervo@gmail.com>
pkgname=netgen
pkgver=4.9.13
pkgrel=2
pkgdesc="NETGEN is an automatic 3d tetrahedral mesh generator"
url="http://www.hpfem.jku.at/netgen/"
depends=('mesa' 'tk' 'opencascade' 'libjpeg' 'ffmpeg' 'tk-togl-legacy-netgen')
makedepends=('make' 'libtool' 'gcc' 'sed')
arch=('i686' 'x86_64')
conflicts=()
provides=()
license=('LGPL')
source=(http://downloads.sourceforge.net/netgen-mesher/${pkgname}-${pkgver}.tar.gz netgen)
options=('docs')

build() {
  cd "${pkgname}-${pkgver}"

  CXXFLAGS="-D__STDC_CONSTANT_MACROS" ./configure --prefix=/usr --enable-occ -with-occ=/opt/opencascade --with-gnu-ld --enable-nglib --enable-jpeglib --enable-ffmpeg --datadir=/usr/share || return 1
  make || return 1
  make DESTDIR="${pkgdir}" install || return 1
  install -D -m644 "${srcdir}/${pkgname}-${pkgver}/doc/ng4.pdf" "${pkgdir}/usr/share/doc/${pkgname}/ng4.pdf" || return 1
  mv "${pkgdir}/usr/bin/netgen" "${pkgdir}/usr/bin/netgen.bin" || return 1
  install -m 755  "${srcdir}/netgen" "${pkgdir}/usr/bin/netgen" || return 1
  rm -rf "${pkgdir}/usr/lib/libnglib.la" || return 1
}
md5sums=('2d56642ca673106837bcd08ff9913d57'
         'b963a08af5414da040f337ac863b93e5')
