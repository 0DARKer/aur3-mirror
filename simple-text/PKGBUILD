# $Id$
# Maintainer: Ian Hernandez <ihernandezs@openmailbox.org>

pkgname=simple-text
pkgver=0.9.5
pkgrel=3
pkgdesc="A very simple text editor written in Vala (Still in development)"
arch=('i686' 'x86_64')
license=('GPL2')
url="https://github.com/BadWolfie/$pkgname"
depends=('gtk3' 'gtksourceview3' 'libgee' 'vte3' 'libcap' 'dconf')
makedepends=('vala' 'git')
options=('!emptydirs')
source=("$pkgname-git::git+$url.git" "$pkgname.desktop")
md5sums=('SKIP' 
        'fa36882406e5468bcd9d96db873eb2fc')
install=$pkgname.install

build() {
    cd $pkgname-git
    make
}

package() {
    cd $pkgname-git

    install -dm755 "$pkgdir/opt/$pkgname"
    install -dm755 "$pkgdir/usr/bin"
    install -dm755 "$pkgdir/usr/share/applications"
    install -dm755 "$pkgdir/usr/share/glib-2.0/schemas/"

    cp LICENSE "$pkgdir/opt/$pkgname"
    cp -r "data" "$pkgdir/opt/$pkgname"
    cp -r "style_schemes" "$pkgdir/opt/$pkgname"
    install -Dm755 "$pkgname" "$pkgdir/opt/$pkgname"

    cd $srcdir/..
    ln -s "$pkgdir/opt/$pkgname/$pkgname" "$pkgdir/usr/bin/$pkgname"
    install -Dm755 "$pkgname.desktop" "$pkgdir/usr/share/applications"
}
