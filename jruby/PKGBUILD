# Maintainer: Jan "heftig" Steffens <jan.steffens@gmail.com>
# Contributor: FaziBear <fazibear@gmail.com>

pkgname=jruby
pkgver=1.6.5.1
pkgrel=1
pkgdesc="JRuby is 100% pure-Java implementation of the Ruby programming language."
arch=(any)
url="http://www.jruby.org"
license=(CPL GPL2 LGPL2.1 custom)
depends=(java-runtime)
options=(!strip)
source=("http://$pkgname.org.s3.amazonaws.com/downloads/$pkgver/$pkgname-bin-$pkgver.tar.gz")
md5sums=('246a7aa2b7d7e6e9e8a0c2e282cbcfd0')

if false; then
makedepends=(java-environment apache-ant)
build() {
  cd "$srcdir/jruby"
  ant dist-bin
  tar -C .. -xf dist/$pkgname-bin-$pkgver.tar.gz
}
fi

package() {
  cd "$pkgdir"

  mkdir opt
  cp -r "$srcdir/jruby-$pkgver" opt/jruby

  mkdir -p usr/bin
  for _file in jirb jruby jgem jrubyc; do
    ln -s /opt/jruby/bin/$_file usr/bin/$_file
  done

  install -Dm644 "$srcdir/jruby-$pkgver/COPYING" \
    usr/share/licenses/$pkgname/COPYING
}
