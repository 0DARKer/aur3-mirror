# Maintainer: Jan "heftig" Steffens <jan.steffens@gmail.com>
# Contributor: FaziBear <fazibear@gmail.com>

pkgname=jruby
pkgver=1.5.6
pkgrel=1
pkgdesc="JRuby is 100% pure-Java implementation of the Ruby programming language."
arch=(any)
url="http://www.jruby.org"
license=(CPL GPL LGPL)
depends=(java-environment)
options=(!strip)
source=("http://$pkgname.org.s3.amazonaws.com/downloads/$pkgver/$pkgname-bin-$pkgver.tar.gz"
        jruby.sh)

build() {
  cd "$pkgdir"

  mkdir opt
  mv "$srcdir/$pkgname-$pkgver" opt/jruby
  install -D -m755 "$srcdir/jruby.sh" etc/profile.d/jruby.sh

  cd opt/jruby/bin
  eval '
    shopt -s extglob
    rm *.@(bat|exe|dll) # Remove Windows files
    rename "" j [^j_.]* # Prefix with j
  '
}

md5sums=('94033a36517645b7a7ec781a3507c654'
         'a29e92de5b503fe9c237c27bde56359a')
