# Maintainer: BxS <bxsbxs at gmail dot com>

pkgname=microchip-mplabc32_bin
pkgver=2.01
pkgrel=2
pkgdesc="C compiler for PIC32"
arch=(i686 x86_64)
url='http://www.microchip.com/stellent/idcplg?IdcService=SS_GET_PAGE&nodeId=2615&dDocName=en532454'
license=(custom)
[ $CARCH = x86_64 ] && depends=(lib32-glibc)
provides=(mplabc32)
conflicts=(mplabc32)
options=(!strip docs libtool emptydirs !zipman)
install=microchip-mplabc32_bin.install
instdir=/opt/microchip/mplabc32/v$pkgver
installer=mplabc32-v$pkgver-linux-installer.run
source=(http://ww1.microchip.com/downloads/mplab/X_Beta/$installer
        LICENSE)
md5sums=(9c332abcea7b3674618a65fa1d8fa33b
         cad33d6fdff4a0327ee80d81e7943196)

package() {
  echo -e "Creating the Package\n  Please wait..."

  cd $pkgdir

  mkdir -p $pkgdir$instdir

  chmod 0755 $srcdir/$installer
  $srcdir/$installer --prefix $pkgdir$instdir --edition lite --mode unattended &> /dev/null

  rm $pkgdir$instdir/Uninstall*

  install -Dm 644 $srcdir/LICENSE $pkgdir/usr/share/licenses/$pkgname/LICENSE
}
