# Maintainer: Fantix King
# Upstream Maintainer: Ethan Hall
# Contributors: Guillaume ALAUX, Daniel J Griffiths, Jason Chu, Geoffroy Carrier, Thomas Dziedzic, Dan Serban

pkgname=bin32-jre6
_major=6
_minor=45
_build=b06
pkgver=${_major}u${_minor}
pkgrel=1
pkgdesc="Oracle Java ${_major} Runtime Environment (32-bit)"
url=http://www.oracle.com/technetwork/java/javase/downloads/java-archive-downloads-javase6-419409.html
arch=('x86_64')
license=(custom)
depends=('lib32-glibc' 'lib32-libxtst')
install=jre.install
source=("http://download.oracle.com/otn-pub/java/jdk/$pkgver-$_build/jre-$pkgver-linux-i586.bin"
        'javaws-launcher'
	    'construct.sh')
md5sums=('1d8001ef61a2e3a11fe7b9eec9f08948'
         '45c15a6b4767288f2f745598455ea2bf'
         '70b34ef3d5b997e7c15b1b50053d3e37')
DLAGENTS=('http::/usr/bin/curl -LC - -b "oraclelicense=a" -O')

build()
{
  rm -rf jre1.$_major.0_$_minor
  sh jre-$pkgver-linux-i586.bin 
}

package()
{
  mkdir -p ${pkgdir}/opt/bin32-java6
  mv jre1.$_major.0_$_minor ${pkgdir}/opt/bin32-java6/jre

  mkdir -p ${pkgdir}/usr/lib/mozilla/plugins
  
  mkdir -p ${pkgdir}/usr/share/licenses/${pkgname}
  cp ${pkgdir}/opt/bin32-java6/jre/COPYRIGHT ${pkgdir}/usr/share/licenses/${pkgname}
  cp ${pkgdir}/opt/bin32-java6/jre/LICENSE ${pkgdir}/usr/share/licenses/${pkgname}
  cp ${pkgdir}/opt/bin32-java6/jre/THIRDPARTYLICENSEREADME.txt ${pkgdir}/usr/share/licenses/${pkgname}

  install javaws-launcher "${pkgdir}"/opt/bin32-java6/jre/bin/javaws-launcher
}

