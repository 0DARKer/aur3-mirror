# Maintainer: Ricardo Vieira <ricardo.vieira@tecnico.ulisboa.pt>
pkgname=budgie-desktop-git
pkgver=0.107.9bed951
pkgrel=2
epoch=
pkgdesc="Simple GTK3 desktop experience"
arch=('i686' 'x86_64')
url="http://ikeydoherty.github.io/budgie-desktop/"
license=('GPLv2')
groups=()
depends=('gtk3' 'upower' 'libwnck3' 'gnome-menus' 'gnome-settings-daemon' 'libpeas' 'mutter')
makedepends=('autoconf')
checkdepends=()
optdepends=()
provides=('budgie-desktop')
conflicts=()
replaces=()
backup=()
options=()
install=
changelog=
source=("$pkgname"::'git+https://github.com/evolve-os/budgie-desktop.git#branch=master'
		'fix-gnome-setting-path.diff')
noextract=()
md5sums=('SKIP'
		'6813fd4cc6e1ea4567c815a2591cf26d')

pkgver() {
  cd "$srcdir/$pkgname"
	echo 0.$(git rev-list --count HEAD).$(git rev-parse --short master)
}

build() {
	cd "$srcdir/$pkgname"

	git apply $srcdir/fix-gnome-setting-path.diff

	autoreconf --force --install
	./configure --prefix=/usr
	make
}

check() {
	cd "$srcdir/$pkgname"
	make -k check
}

package() {
	cd "$srcdir/$pkgname"
	make DESTDIR="$pkgdir/" install
}
