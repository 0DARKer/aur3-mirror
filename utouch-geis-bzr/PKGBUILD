pkgname=utouch-geis-bzr
pkgver=143
pkgrel=1
pkgdesc="Implementation of the GEIS (Gesture Engine Interface and Support) interface."
arch=(i686 x86_64)
url="https://launchpad.net/utouch-geis"
license=(GPL LGPL)
depends=('utouch-grail-bzr')
makedepends=('bzr')
conflicts=('utouch-geis')
provides=('utouch-geis')
groups=('unity2d-bzr')

_bzrtrunk=lp:utouch-geis
_bzrmod=utouch-geis

build() {
  cd "$srcdir"
  
  if [ -d ${_bzrmod} ]; then
    bzr up ${_bzrmod}
    msg "The local files are updated."
  else
    bzr co ${_bzrtrunk} ${_bzrmod}
  fi
  if [[ -d ${srcdir}/build ]]; then
    msg "Cleaning the previous build directory..."
    rm -rf ${srcdir}/build 
  fi
  bzr clone  $srcdir/${_bzrmod} $srcdir/build
  cd $srcdir/build
  export PYTHON="/usr/bin/python2"
  export PYTHON_CFLAGS="-I/usr/include/python2.7"
  export PYTHON_LIBS="-lpython2.7"
  ./autogen.sh
  ./configure --prefix=/usr
  make
}

package() { 
  cd ${srcdir}/build
  make DESTDIR="${pkgdir}" install
}
