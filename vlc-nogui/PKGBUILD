# Maintainer: Alexsandr Pavlov <kidoz at mail dot ru>

pkgname=vlc-nogui
_name=${pkgname%${pkgname#???}}
pkgver=2.0.0
pkgrel=1
pkgdesc="A multi-platform MPEG, VCD/DVD, and DivX player"
arch=('i686' 'x86_64')
url="http://www.videolan.org/vlc/"
license=('GPL')
depends=('a52dec' 'faad2' 'fluidsynth' 'libmtp' 'libdvbpsi' 'lirc-utils'
         'libdca' 'libproxy' 'sdl_image' 'libdvdnav' 
         'lua' 'libv4l' 'libcddb' 'smbclient' 'libmatroska' 'zvbi' 
         'taglib' 'sysfsutils' 'libmpcdec' 'ffmpeg'
         'libshout' 'libmad' 'fribidi' 'libmpeg2' 'libmodplug'
         'ttf-freefont' 'libxv' 'libass' 'xdg-utils' 'libxpm')
makedepends=('alsa-lib' 'avahi' 'jack' 'live-media' 'pkgconfig' 'udev')
optdepends=('avahi: for service discovery using bonjour protocol'
            'libnotify: for notification plugin')
provides=('vlc')
conflicts=('vlc' 'vlc-plugin')
replaces=('vlc' 'vlc-plugin')
options=('!libtool')
source=(http://downloads.videolan.org/pub/videolan/${_name}/${pkgver}/${_name}-${pkgver}.tar.xz)
md5sums=('8806bff2ea9c76791123d444a92f708c')

build() {
  cd "${srcdir}/${_name}-${pkgver}"

  ./configure --prefix=/usr \
              --enable-faad \
              --enable-lirc \
              --enable-pvr \
              --enable-realrtsp \
              --disable-rpath \
              --disable-qt4 \
              --disable-skins2 \
              --disable-glx 
  make
}

package() {
  cd "${srcdir}/vlc-${pkgver}"
  
  make DESTDIR=${pkgdir}/ install

  rm -rf ${pkgdir}/usr/share/applications
  rm -rf ${pkgdir}/usr/share/apps
  rm -rf ${pkgdir}/usr/share/kde4
  rm -rf ${pkgdir}/usr/share/icons
  rm ${pkgdir}/usr/share/vlc/vlc.ico
}
