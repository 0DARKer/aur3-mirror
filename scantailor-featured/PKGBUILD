# Maintainer: Jakub Klinkovsk√Ω <kuba.klinkovsky@gmail.com>
# Contributor: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Contributor: Denis Terskov aka neurosurgeon <terskov.den@gmail.com>

pkgname=scantailor-featured
_pkgname=scantailor
pkgver=2013.05.31
pkgrel=1
pkgdesc="Interactive post-processing tool for scanned pages (featured branch)"
arch=(i686 x86_64)
url="http://sourceforge.net/projects/scantailor/files/scantailor-devel/featured/"
license="GPL"
depends=('qt4' 'libjpeg' 'zlib' 'libpng' 'libtiff' 'libxrender' 'desktop-file-utils' 'xdg-utils')
makedepends=('cmake' 'boost')
conflicts=('scantailor')
source=(http://downloads.sourceforge.net/$_pkgname/$pkgname-$pkgver.tar.gz)
md5sums=('96fae12f72bed5fcbbcbe39790b9c3df')

build() {
  cd $srcdir/$pkgname-$pkgver
  cmake \
	-DCMAKE_CXX_FLAGS="-DBOOST_NO_MEMBER_TEMPLATE_FRIENDS" \
	-DCMAKE_CXX_FLAGS_DEBUG="-DBOOST_NO_MEMBER_TEMPLATE_FRIENDS" \
	-DCMAKE_CXX_FLAGS_RELEASE="-DBOOST_NO_MEMBER_TEMPLATE_FRIENDS" \
	-DCMAKE_INSTALL_PREFIX=/usr \
	-DCMAKE_BUILD_TYPE=Release .
  make
}

package() {
  cd $srcdir/$pkgname-$pkgver
  make DESTDIR="$pkgdir" install
}
