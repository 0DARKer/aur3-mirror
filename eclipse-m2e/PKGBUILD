# Maintainer: Hugo Osvaldo Barrera <hugo@osvaldobarrera.com.ar>
# Contributor: Joel Pedraza <joel@joelpedraza.com>
# Contributor: Dieter Hsu <dieterplex@gmail.com>

pkgname=eclipse-m2e
pkgver=1.4.0
_pkgver=1.4
pkgrel=1
_builddate=20130601
_buildtime=0317
pkgdesc="Maven Integration for Eclipse"
arch=('i686' 'x86_64')
url="http://eclipse.org/m2e"
license=('EPL')
depends=('eclipse-wtp-wst')
replaces=('eclipse-m2eclipse')
_url="http://download.eclipse.org/technology/m2e/releases/${_pkgver}/${pkgver}.${_builddate}-${_buildtime}"

source=(
    "${_url}/features/org.eclipse.m2e.feature_${pkgver}.${_builddate}-${_buildtime}.jar"
    "${_url}/features/org.eclipse.m2e.logback.feature_${pkgver}.${_builddate}-${_buildtime}.jar"
    "${_url}/features/org.eclipse.m2e.sdk.feature_${pkgver}.${_builddate}-${_buildtime}.jar"
    "${_url}/plugins/com.ning.async-http-client_1.6.5.20130531-2315.jar"
    "${_url}/plugins/org.eclipse.m2e.archetype.common_${pkgver}.20130531-2315.jar"
    "${_url}/plugins/org.eclipse.m2e.core.ui_${pkgver}.${_builddate}-${_buildtime}.jar"
    "${_url}/plugins/org.eclipse.m2e.core_${pkgver}.${_builddate}-${_buildtime}.jar"
    "${_url}/plugins/org.eclipse.m2e.discovery_${pkgver}.${_builddate}-${_buildtime}.jar"
    "${_url}/plugins/org.eclipse.m2e.editor.xml_${pkgver}.${_builddate}-${_buildtime}.jar"
    "${_url}/plugins/org.eclipse.m2e.editor_${pkgver}.${_builddate}-${_buildtime}.jar"
    "${_url}/plugins/org.eclipse.m2e.jdt_${pkgver}.${_builddate}-${_buildtime}.jar"
    "${_url}/plugins/org.eclipse.m2e.launching_${pkgver}.${_builddate}-${_buildtime}.jar"
    "${_url}/plugins/org.eclipse.m2e.lifecyclemapping.defaults_${pkgver}.${_builddate}-${_buildtime}.jar"
    "${_url}/plugins/org.eclipse.m2e.logback.appender_${pkgver}.${_builddate}-${_buildtime}.jar"
    "${_url}/plugins/org.eclipse.m2e.logback.configuration_${pkgver}.${_builddate}-${_buildtime}.jar"
    "${_url}/plugins/org.eclipse.m2e.maven.indexer_${pkgver}.20130531-2315.jar"
    "${_url}/plugins/org.eclipse.m2e.maven.runtime_${pkgver}.20130531-2315.jar"
    "${_url}/plugins/org.eclipse.m2e.model.edit_${pkgver}.${_builddate}-${_buildtime}.jar"
    "${_url}/plugins/org.eclipse.m2e.refactoring_${pkgver}.${_builddate}-${_buildtime}.jar"
    "${_url}/plugins/org.eclipse.m2e.scm_${pkgver}.${_builddate}-${_buildtime}.jar"
    "${_url}/plugins/org.eclipse.m2e.tests.common_${pkgver}.${_builddate}-${_buildtime}.jar"
    "${_url}/plugins/org.jboss.netty_3.2.5.Final-20130531-2315.jar")
noextract=(
    "${_url}/features/org.eclipse.m2e.feature_${pkgver}.${_builddate}-${_buildtime}.jar"
    "${_url}/features/org.eclipse.m2e.logback.feature_${pkgver}.${_builddate}-${_buildtime}.jar"
    "${_url}/features/org.eclipse.m2e.sdk.feature_${pkgver}.${_builddate}-${_buildtime}.jar"
    "${_url}/plugins/com.ning.async-http-client_1.6.5.20130531-2315.jar"
    "${_url}/plugins/org.eclipse.m2e.archetype.common_${pkgver}.20130531-2315.jar"
    "${_url}/plugins/org.eclipse.m2e.core.ui_${pkgver}.${_builddate}-${_buildtime}.jar"
    "${_url}/plugins/org.eclipse.m2e.core_${pkgver}.${_builddate}-${_buildtime}.jar"
    "${_url}/plugins/org.eclipse.m2e.discovery_${pkgver}.${_builddate}-${_buildtime}.jar"
    "${_url}/plugins/org.eclipse.m2e.editor.xml_${pkgver}.${_builddate}-${_buildtime}.jar"
    "${_url}/plugins/org.eclipse.m2e.editor_${pkgver}.${_builddate}-${_buildtime}.jar"
    "${_url}/plugins/org.eclipse.m2e.jdt_${pkgver}.${_builddate}-${_buildtime}.jar"
    "${_url}/plugins/org.eclipse.m2e.launching_${pkgver}.${_builddate}-${_buildtime}.jar"
    "${_url}/plugins/org.eclipse.m2e.lifecyclemapping.defaults_${pkgver}.${_builddate}-${_buildtime}.jar"
    "${_url}/plugins/org.eclipse.m2e.logback.appender_${pkgver}.${_builddate}-${_buildtime}.jar"
    "${_url}/plugins/org.eclipse.m2e.logback.configuration_${pkgver}.${_builddate}-${_buildtime}.jar"
    "${_url}/plugins/org.eclipse.m2e.maven.indexer_${pkgver}.20130531-2315.jar"
    "${_url}/plugins/org.eclipse.m2e.maven.runtime_${pkgver}.20130531-2315.jar"
    "${_url}/plugins/org.eclipse.m2e.model.edit_${pkgver}.${_builddate}-${_buildtime}.jar"
    "${_url}/plugins/org.eclipse.m2e.refactoring_${pkgver}.${_builddate}-${_buildtime}.jar"
    "${_url}/plugins/org.eclipse.m2e.scm_${pkgver}.${_builddate}-${_buildtime}.jar"
    "${_url}/plugins/org.eclipse.m2e.tests.common_${pkgver}.${_builddate}-${_buildtime}.jar"
    "${_url}/plugins/org.jboss.netty_3.2.5.Final-20130531-2315.jar")

package () {
  _dest=${pkgdir}/usr/share/eclipse/dropins/m2e/eclipse
  install -dm755 ${_dest}/plugins

  for url in ${source[@]}
  do
    _file="${url##*/}"
    _type="${url%/*}"
    _type="${_type##*/}"

    if [ ${_type} == 'features' ]; then
        #install -m644 ${srcdir}/${_file} ${_dest}/features # w/ extract
        install -dm755 ${_dest}/features/${_file/.jar}
        cd ${_dest}/features/${_file/.jar}
        jar xf ${srcdir}/${_file} || return 1
    else
        install -m644 ${srcdir}/${_file} ${_dest}/plugins
    fi
  done
}

# vim:set ts=4 sw=4 et:
sha256sums=('d2379c34ab513d4b1cc1fbe6058bfd3e4b63747cbf7effc808cf501f5f0be46d'
            '9eca247e83c1d4495ac9d4590199dc57d884338b8e8c6600417b80fe73bdf42f'
            '91f0bffd0c5479d905728bce1b5be23fee69dc49542987573a9ba7aa726b7601'
            '0b04a10f5bc97ea488cd981f59834e2d7321718e2438238777b02780e7abcfb6'
            'f661d8cc790c71d28e23c72feab4c1546b4f0538736e33bac71d83c14f365e2e'
            'd0e26dd1eebe7ad2895768c044b74a539cc74a92ee74d4d440fc49252e27e6da'
            'd5b15376db649ee96c8f497a37517fa8f5bf821521e31e296ed4c7724eb830bb'
            '7388d5ef1fee2e8df0e045b007fec2cfc6ff13f7294a9d924588429a388a2722'
            '4ea77918329ca1318bcbaba4fcab466d2b261dc82ef7847c9f456fec2dba9f29'
            '12826b897d46c97d25e784508775e48e4b6d806b40443f3ac091044793366e6a'
            '3a11aba9319d43541464bb69983e4bf50e24233b6bca5959e60450a4392044e0'
            'ed80cf17d374d51a9051ea3ce2bd8dafa9ec46b2f9023a6423c310672c13b121'
            'a9e611329eedd1a6cdc7d691b38f0bf073c556f71c17ca58ad898d34d2a0d977'
            'd32470eeb85c3ce0db8c0cb405e3189384d1f4347c3ff13c22dbae0ea124dc96'
            '6dfe9f236e2a33e4d6f5c910db5f5d9ee5011811a7fa83e356b950506489d872'
            '3cdd4422ef58c1a73b3b83b9ab4b9cee40e5973e0f9e9a85e8b5acb5796cb087'
            'b0f68addb79e3f6b91116dc99d65f454360344b444e1e14a086708c4d73a98bb'
            'db5edec46347b9eac0a2968ca581db5a48531ad124dca93419cab791e4afe3e6'
            '6c74d3067620387e14b55916047c9895310b57357b239dccd9d2ce98530138b4'
            'f3c2b975d9b28e672fdcc46bfc405b33e958332151e3fbc0909ab53049223617'
            '52827d923753060795b9faa6c8bb28cbaafad074862ff3cfb30f744dd1209791'
            'b259faa793c85961c9ec6f27efe2934d341029560bd82d42363a21a9b015e10c'
)
