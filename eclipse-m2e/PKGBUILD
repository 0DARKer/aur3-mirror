# Maintainer: Joel Pedraza <joel@joelpedraza.com>
# Contributor: Dieter Hsu <dieterplex@gmail.com>

pkgname=eclipse-m2e
pkgver=1.2
_pkgver=1.2.0
pkgrel=1
_builddate=20120903
pkgdesc="Maven Integration for Eclipse"
arch=('i686' 'x86_64')
url="http://eclipse.org/m2e"
license=('EPL')
depends=('eclipse-wtp-wst')
replaces=('eclipse-m2eclipse')
_url="http://download.eclipse.org/technology/m2e/releases/${pkgver}/${_pkgver}.${_builddate}-1050"

source=(
    "${_url}/features/org.eclipse.m2e.feature_${_pkgver}.${_builddate}-1050.jar"
    "${_url}/features/org.eclipse.m2e.logback.feature_${_pkgver}.${_builddate}-1050.jar"
    "${_url}/features/org.eclipse.m2e.sdk.feature_${_pkgver}.${_builddate}-1050.jar"
    "${_url}/plugins/ch.qos.logback.classic_1.0.0.v20111214-2030.jar"
    "${_url}/plugins/ch.qos.logback.core_1.0.0.v20111214-2030.jar"
    "${_url}/plugins/ch.qos.logback.slf4j_1.0.0.v20120123-1500.jar"
    "${_url}/plugins/com.ning.async-http-client_1.6.5.${_builddate}-0645.jar"
    "${_url}/plugins/org.eclipse.m2e.archetype.common_${_pkgver}.${_builddate}-0645.jar"
    "${_url}/plugins/org.eclipse.m2e.core.ui_${_pkgver}.${_builddate}-1050.jar"
    "${_url}/plugins/org.eclipse.m2e.core_${_pkgver}.${_builddate}-1050.jar"
    "${_url}/plugins/org.eclipse.m2e.discovery_${_pkgver}.${_builddate}-1050.jar"
    "${_url}/plugins/org.eclipse.m2e.editor.xml_${_pkgver}.${_builddate}-1050.jar"
    "${_url}/plugins/org.eclipse.m2e.editor_${_pkgver}.${_builddate}-1050.jar"
    "${_url}/plugins/org.eclipse.m2e.jdt_${_pkgver}.${_builddate}-1050.jar"
    "${_url}/plugins/org.eclipse.m2e.launching_${_pkgver}.${_builddate}-1050.jar"
    "${_url}/plugins/org.eclipse.m2e.lifecyclemapping.defaults_${_pkgver}.${_builddate}-1050.jar"
    "${_url}/plugins/org.eclipse.m2e.logback.appender_${_pkgver}.${_builddate}-1050.jar"
    "${_url}/plugins/org.eclipse.m2e.logback.configuration_${_pkgver}.${_builddate}-1050.jar"
    "${_url}/plugins/org.eclipse.m2e.maven.indexer_${_pkgver}.${_builddate}-0645.jar"
    "${_url}/plugins/org.eclipse.m2e.maven.runtime_${_pkgver}.${_builddate}-0645.jar"
    "${_url}/plugins/org.eclipse.m2e.model.edit_${_pkgver}.${_builddate}-1050.jar"
    "${_url}/plugins/org.eclipse.m2e.refactoring_${_pkgver}.${_builddate}-1050.jar"
    "${_url}/plugins/org.eclipse.m2e.scm_${_pkgver}.${_builddate}-1050.jar"
    "${_url}/plugins/org.eclipse.m2e.tests.common_${_pkgver}.${_builddate}-1050.jar"
    "${_url}/plugins/org.jboss.netty_3.2.5.Final-${_builddate}-0645.jar"
    "${_url}/plugins/org.slf4j.api_1.6.4.v20120130-2120.jar")
noextract=(
    "org.eclipse.m2e.feature_${_pkgver}.${_builddate}-1050.jar"
    "org.eclipse.m2e.logback.feature_${_pkgver}.${_builddate}-1050.jar"
    "org.eclipse.m2e.sdk.feature_${_pkgver}.${_builddate}-1050.jar"
    "ch.qos.logback.classic_1.0.0.v20111214-2030.jar"
    "ch.qos.logback.core_1.0.0.v20111214-2030.jar"
    "ch.qos.logback.slf4j_1.0.0.v20111214-2030.jar"
    "com.ning.async-http-client_1.6.5.${_builddate}-0645.jar"
    "org.eclipse.m2e.archetype.common_${_pkgver}.${_builddate}-1050.jar"
    "org.eclipse.m2e.core.ui_${_pkgver}.${_builddate}-1050.jar"
    "org.eclipse.m2e.core_${_pkgver}.${_builddate}-1050.jar"
    "org.eclipse.m2e.discovery_${_pkgver}.${_builddate}-1050.jar"
    "org.eclipse.m2e.editor.xml_${_pkgver}.${_builddate}-1050.jar"
    "org.eclipse.m2e.editor_${_pkgver}.${_builddate}-1050.jar"
    "org.eclipse.m2e.jdt_${_pkgver}.${_builddate}-1050.jar"
    "org.eclipse.m2e.launching_${_pkgver}.${_builddate}-1050.jar"
    "org.eclipse.m2e.lifecyclemapping.defaults_${_pkgver}.${_builddate}-1050.jar"
    "org.eclipse.m2e.logback.appender_${_pkgver}.${_builddate}-1050.jar"
    "org.eclipse.m2e.logback.configuration_${_pkgver}.${_builddate}-1050.jar"
    "org.eclipse.m2e.maven.indexer_${_pkgver}.${_builddate}-0645.jar"
    "org.eclipse.m2e.maven.runtime_${_pkgver}.${_builddate}-0645.jar"
    "org.eclipse.m2e.model.edit_${_pkgver}.${_builddate}-1050.jar"
    "org.eclipse.m2e.refactoring_${_pkgver}.${_builddate}-1050.jar"
    "org.eclipse.m2e.scm_${_pkgver}.${_builddate}-1050.jar"
    "org.eclipse.m2e.tests.common_${_pkgver}.${_builddate}-1050.jar"
    "org.jboss.netty_3.2.5.Final-${_builddate}-0645.jar"
    "org.slf4j.api_1.6.4.v20120130-2120.jar")

build() {
  _dest=${pkgdir}/usr/share/eclipse/dropins/m2e/eclipse
  install -dm755 ${_dest}/plugins

  for url in ${source[@]}
  do 
    _file="${url##*/}"
    _type="${url%/*}"
    _type="${_type##*/}"

    if [ ${_type} == 'features' ]; then
        #install -m644 ${srcdir}/${_file} ${_dest}/features # w/ extract
        install -dm755 ${_dest}/features/${_file/.jar} 
        cd ${_dest}/features/${_file/.jar}
        jar xf ${srcdir}/${_file} || return 1
    else
        install -m644 ${srcdir}/${_file} ${_dest}/plugins
    fi
  done     
}

# vim:set ts=4 sw=4 et:
sha1sums=('b9351d60656432f503bfaa2342401cb425867869'
          '720f63bb7039da8f1bf4180130dbebebec42427d'
          'feb07de8fd8a3329cdcd7210b25111d1cc44b814'
          'e2b1f243c04fe006a73e03264ea73fca1214f3e3'
          '45caa908a797baab6d18606502250dd0cf44cf7c'
          '9dccfb9b9a4607f9c60425848089aecdeb0dc3a8'
          '64f21bd61469760560a016ae32d5e2045a706c94'
          'c96d22bc561a2d7edfc429335568a40c1eb544f5'
          'e72c3406532da492d05e379f7f661b392841e99a'
          'ffe70c435db9787b4ae8861d1bc3e2ad15ebffa5'
          '640214bb4df358ca2812206e3f0c52441ef82756'
          'a6232a37fd64cbf8c9ae7449d2219153ba4e22e3'
          '403c1cfabf76f54645d3c0ef5977c0e7e8a1dd71'
          '513eb4f0b577d76a0334ceacfa23e6d4c6db1de7'
          'f92318d9193c644826d1222aac776e3afd6cf8a6'
          'd021aaf8c7428bfb55769282e44860bf39b520d3'
          'c7f44a07383d3a5f549fd542121655195c0de696'
          '1c001ef967cd02c3fdf71fa9e3bb84bc4998f8da'
          'bd5eccf66e7144dadb13db59f029183f0620dc1a'
          'a1ff84b8271ed79bf688798c38b2e3c3c0473c13'
          '22db787469ea2d0a824bdd08aa665ea5f4fd8373'
          '62de038cb4276a92224ac0852c3fef0a4251fe65'
          '28f253f5722fc7a53a794432127fe7dedd313e4b'
          'b3f10656ce45f05434e8fdf36c38304386c7132b'
          'beb16549435fc62befa443da97b5f973b2868d79'
          '29a1e5446553a1e06703f734fa75f8aeffb9b0f5')
