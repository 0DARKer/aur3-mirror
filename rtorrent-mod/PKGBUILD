# Maintainer: karabaja4 <karabaja4 at archlinux.us>

pkgname=rtorrent-mod
pkgver=0.8.6
pkgrel=1
pkgdesc="Ncurses BitTorrent client based on libTorrent - modified interface with color support"
arch=('i686' 'x86_64')
url="http://libtorrent.rakshasa.no"
license=('GPL')
depends=('libtorrent=0.12.6' 'curl>=7.14.3' 'xmlrpc-c>=1858')
source=(http://libtorrent.rakshasa.no/downloads/rtorrent-$pkgver.tar.gz
	http://karabaja.pondi.hr/packages/rtorrent-mod/rtorrent-mod.patch)
md5sums=('b804c45c01c40312926bcea6b55bb084'
	 'db92382b7c1921beb713dca3e013f9f6')
conflicts=('rtorrent' 'rtorrent-color')

build() {
  cd "$srcdir/rtorrent-$pkgver"
  patch -p1 -i ../rtorrent-mod.patch

  CXXFLAGS="$CXXFLAGS -fno-strict-aliasing" \
    ./configure --prefix=/usr --disable-debug --with-xmlrpc-c || return 1
  make || return 1
  make DESTDIR="$pkgdir" install
}
