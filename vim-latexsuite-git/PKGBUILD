# Maintainer: Uli Armbruster <uli dot armbruster at google>

pkgname=vim-latexsuite-git
pkgver=20110216
pkgrel=1
pkgdesc="Provides a comprehensive set of tools to view, edit, and compile LaTeX documents within Vim. Also provides macros to speed up the creation of LaTeX documents."
arch=('any')
url="http://vim-latex.sourceforge.net"
license=('custom:vim')
depends=('vim')
optdepends=('python2: speeds things up')
makedepends=('git')
provides=('vim-latexsuite' 'vim-latexsuite-svn')
conflicts=('vim-latexsuite' 'vim-latexsuite-svn')
install=$pkgname.install
 
_gitroot=git://vim-latex.git.sourceforge.net/gitroot/vim-latex/vim-latex
_gitname=vim-latex
 
build() {
	cd "${srcdir}"
	msg "Connecting to GIT server...."
	
	if [ -d ${_gitname} ] ; then
		cd ${_gitname} && git pull origin
		msg "The local files are updated."
	else
		git clone ${_gitroot} ${_gitname}
	fi
	
	msg "GIT checkout done or server timeout"
}
package() {
	rm -rf "${srcdir}/${_gitname}-build"
	git clone "${srcdir}/${_gitname}" "${srcdir}/${_gitname}-build"
	cd "${srcdir}/${_gitname}-build/vimfiles"
	make PREFIX=${pkgdir}/usr VIMDIR=${pkgdir}/usr/share/vim/vimfiles install
}
