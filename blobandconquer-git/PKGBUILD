# This is an example PKGBUILD file. Use this as a start to creating your own,
# and remove these comments. For more information, see 'man PKGBUILD'.
# NOTE: Please fill out the license field for your package! If it is unknown,
# then please put 'unknown'.

# Maintainer: Kirill Omelchenko <twisted@online.ua>
pkgname=blobandconquer-git
pkgver=1.11
#uilddir=$pkgname-$pkgver
pkgrel=1
pkgdesc="Blob And Conquer is a 3D shooter with some puzzles. It is the second in the Blobwars series. The Blobs' homeworld is still littered with the alien forces and Bob once again makes it his task to lead the counter attack."
arch=('i686' 'x86_64')
url="http://sourceforge.net/projects/blobandconquer/"
license=('GPL')
depends=('sdl_image' 'sdl_mixer' 'sdl_ttf' 'mesa')
makedepends=('git')
provides=('mblobwars-episode-ii-blob-n-conquer')

_gitpath='git://blobandconquer.git.sourceforge.net/gitroot/blobandconquer/blobandconquer'
_gitname='blobandconquer'

build() {
 # tar xfvz $builddir.tar.gz
  msg "Cloning GIT..."
  cd ${srcdir}
  rm -rf ${_gitname}
  git clone ${_gitpath}
  cd ${_gitname}
  msg "Starting make..."

#A hack to make build complete (since no sound and music are provided)
  sed -e /music/d makefile > makefile.tmp
  echo "PAKDIRS = data gfx textures" > makefile
  cat makefile.tmp >> makefile

  rm -f makefile.tmp
  make
}

package() {
  msg "Packaging..."
  cd ${_gitname}
  make install DESTDIR=${pkgdir}/
  msg "Done"
}
