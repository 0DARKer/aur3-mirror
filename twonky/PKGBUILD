# Maintainer: Michael Goehler <somebody.here@gmx.de>
pkgname=twonky
pkgver=7.2.6
pkgrel=2
pkgdesc="A DLNA-compliant UPnP AV server software from PacketVideo."
arch=('x86_64')
url="http://twonky.com/"
license=('custom')
depends=('imagemagick')
optdepends=('ffmpeg: video transcoding'
            'mencoder: video transcoding')
backup=('etc/twonky.ini')
install="${pkgname}.install"
noextract=("twonky-x86-64-glibc-2.9-${pkgver}-${pkgrel}.zip")
source=("http://www.twonkyforum.com/downloads/7.2.6-2/twonky-x86-64-glibc-2.9-${pkgver}-${pkgrel}.zip"
        "twonky.service"
        "twonky.ini")

package() {
    # twonky base install
    #
    mkdir -p "${pkgdir}/usr/lib/twonky"
    unzip -q -d "${pkgdir}/usr/lib/twonky" "${srcdir}/twonky-x86-64-glibc-2.9-${pkgver}-${pkgrel}.zip"

    # twonky config file (including defaults for appdata dir)
    #
    mkdir -p "${pkgdir}/etc"
    cp "${srcdir}/twonky.ini" "${pkgdir}/etc/twonky.ini"

    # twonky appdata dir (as defined in twonky.ini)
    #
    mkdir -p "${pkgdir}/var/twonky/share/"{music,pictures,videos}

    # systemd unit file
    #
    mkdir -p "${pkgdir}/usr/lib/systemd/system"
    cp "${srcdir}/twonky.service" "${pkgdir}/usr/lib/systemd/system/twonky.service"
}

md5sums=('86d66c7f5d2633eab03d667c4158ecc2'
         '4c89bcaef67cc11f02dca29aea10de1e'
         '8b4bb58663cb81b8d1cff0cc3d6183f4')
