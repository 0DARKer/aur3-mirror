# $Id: PKGBUILD 105144 2011-01-06 20:57:13Z angvp $
# Contributor: Eric Belanger <eric@archlinux.org>
# Maintainer: Daniel J Griffiths <ghost1227@archlinux.us>

pkgname=htop-vi
pkgver=0.9
pkgrel=1
pkgdesc="Interactive process viewer patched for vi style scroll keys"
arch=('i686' 'x86_64')
url="http://htop.sourceforge.net/"
license=('GPL')
depends=('ncurses')
makedepends=('python2')
provides=('htop')
conflicts=('htop')
options=('!emptydirs')
source=(http://downloads.sourceforge.net/htop/htop-${pkgver}.tar.gz
	htop-vi.patch)
md5sums=('7c5507f35f363f3f40183a2ba3c561f8'
	 '08bae561ca1707a1029aea40a29c233e')

build() {
	cd ${srcdir}/htop-${pkgver}
	patch -p3 -i ../../htop-vi.patch
	sed -i 's|ncursesw/curses.h|curses.h|' RichString.h RichString.c configure 
	sed -i 's|python|python2|' scripts/MakeHeader.py
	./configure --prefix=/usr --enable-unicode --enable-openvz \
	    --enable-vserver 
	make 
}

package() {
	cd ${srcdir}/htop-${pkgver}
	make DESTDIR=${pkgdir} install 
}
