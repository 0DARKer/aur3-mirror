# Maintainer: Simone Sclavi 'Ito' <darkhado@gmail.com>
#
# based on the firefox-aurora PKGBUILD
pkgname=firefox-aurora-bin-it
_mypkgn=firefox-aurora
pkgdesc='Standalone web browser from mozilla.org (Italian verson from Aurora channel)'
url='http://www.mozilla.com/firefox/channel/'
pkgver=6.0a2
pkgrel=3
arch=('i686' 'x86_64')
license=('MPL' 'GPL' 'LGPL')
source=('firefox-aurora.desktop' 'firefox-aurora-safe.desktop')
sha1sums=('879ef74d3d1d558851c95a8fd2aef2a496f1a0d8'
          '4cb4e97c195d70f1e1b801829b03f5636289797f')
depends=('desktop-file-utils' 'xulrunner' 'gnome-vfs' 'java-environment')
conflicts=('firefox-aurora')
install=firefox.install

_fxsrc="firefox-${pkgver}.it.linux-${CARCH}.tar.bz2"
_fxurl="http://ftp.mozilla.org/pub/mozilla.org/firefox/nightly/latest-mozilla-aurora-l10n/${_fxsrc}"

package() {
  
    msg "Downloading..."
    wget -N ${_fxurl}
    msg "Extracting..."
    tar -jxf ${_fxsrc}
    msg "Packaging..."


  mkdir -p ${pkgdir}/usr/lib/

  cp -r firefox "${pkgdir}/usr/lib/${_mypkgn}"
  
  ln -s /usr/lib/libnotify.so ${pkgdir}/usr/lib/${_mypkgn}/libnotify.so.1
  mkdir -p ${pkgdir}/usr/bin  
  
  ln -s /usr/lib/${_mypkgn}/firefox ${pkgdir}/usr/bin/firefox-aurora
  mkdir -p $pkgdir/usr/share/{applications,pixmaps}
  install -m644 "${srcdir}"/{firefox-aurora.desktop,firefox-aurora-safe.desktop} "${pkgdir}/usr/share/applications/"
  install -m644 "${srcdir}/firefox/icons/mozicon128.png" "${pkgdir}/usr/share/pixmaps/${_mypkgn}-icon.png"
}
