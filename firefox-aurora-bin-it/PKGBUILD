# Maintainer: Simone Sclavi 'Ito' <darkhado@gmail.com>
pkgname=firefox-aurora-bin-it
_mypkgn=firefox-aurora
pkgdesc='Standalone web browser from mozilla.org (Italian verson from Aurora channel)'
url='http://www.mozilla.com/firefox/channel/'
pkgver=6.0a2
pkgrel=2
arch=('i686' 'x86_64')
license=('MPL' 'GPL' 'LGPL')
source=('firefox-aurora.desktop' 'firefox-aurora-safe.desktop'
        http://ftp.mozilla.org/pub/mozilla.org/firefox/nightly/latest-mozilla-aurora-l10n/firefox-${pkgver}.it.linux-${CARCH}.tar.bz2)
sha1sums=('879ef74d3d1d558851c95a8fd2aef2a496f1a0d8'
          '4cb4e97c195d70f1e1b801829b03f5636289797f'
          'a241097cf248a18d8f744564a97e8e6bccb57fff')
[[ "$CARCH" == "x86_64" ]] && sha1sums[2]="89b23898a6a8de3191fc683949d867de358779ab"         
depends=('desktop-file-utils' 'xulrunner' 'gnome-vfs')
conflicts=('firefox-aurora')
install=firefox.install

package() {

  mkdir -p ${pkgdir}/usr/lib/
  cp -r firefox "${pkgdir}/usr/lib/${_mypkgn}"
  
  ln -s /usr/lib/libnotify.so ${pkgdir}/usr/lib/${_mypkgn}/libnotify.so.1
  mkdir -p ${pkgdir}/usr/bin  
  
  ln -s /usr/lib/${_mypkgn}/firefox ${pkgdir}/usr/bin/firefox-aurora
  mkdir -p $pkgdir/usr/share/{applications,pixmaps}
  install -m644 "${srcdir}"/{firefox-aurora.desktop,firefox-aurora-safe.desktop} "${pkgdir}/usr/share/applications/"
  install -m644 "${srcdir}/firefox/icons/mozicon128.png" "${pkgdir}/usr/share/pixmaps/${_mypkgn}-icon.png"
}
