# Maintainer: Patryk Kowalczyk < patryk at kowalczyk dot ws>

pkgname=ocaml-libvirt
pkgver=0.6.1.2
pkgrel=1
license=('GPL')
arch=('i686' 'x86_64')
pkgdesc="Objective Caml (OCaml) bindings for libvirt"
url="http://libvirt.org/ocaml/"
depends=('ocaml')
makedepends=('ocaml-findlib')
source=("http://libvirt.org/sources/ocaml/${pkgname}-${pkgver}.tar.gz")
options=('!strip')
md5sums=('e6eb1943b2d0805566d691211bd0c151')

BUILDENV=(!fakeroot !distcc color !ccache)

OCAMLFIND_DESTDIR=$pkgdir$(ocamlfind printconf destdir)

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  ./configure --prefix=/usr
  make all opt doc 
}

package () {
  cd "${srcdir}/${pkgname}-${pkgver}"
  mkdir -p $OCAMLFIND_DESTDIR
  make OCAMLFIND_DESTDIR=$OCAMLFIND_DESTDIR install-opt
#  install -d -m 0755 "${pkgdir}/usr/share/doc/$pkgname"
  install -Dm 644 COPYING $pkgdir/usr/share/licenses/$pkgname/COPYING 
}
