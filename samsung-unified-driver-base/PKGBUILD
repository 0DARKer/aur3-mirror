# Maintainer: John Regan <saxindustries@gmail.com>

pkgname=samsung-unified-driver-base
pkgver=3.00.65
pkgrel=1
pkgdesc="Unified Linux Driver for Samsung printers and scanners.  This package provides libmfp only."
arch=(i686 x86_64)
url="http://www.samsung.com"
license=('custom:samsung')
depends=('libstdc++5')
md5sums=('21f98bd94a75ad4d2e1dcabf6efd57c0')
source=('http://downloadcenter.samsung.com/content/DR/200911/20091117165757640/UnifiedLinuxDriver_1.00.tar.gz')
install=${pkgname}.install

build() {
  mkdir -p "${pkgdir}/usr/lib"
  mkdir -p "${pkgdir}/etc/udev/rules.d/"

  if [ "$CARCH" = "x86_64" ]; then
      install -m 755 "${srcdir}/cdroot/Linux/x86_64/at_root/usr/lib64/libmfp.so.1.0.1" \
      "${pkgdir}/usr/lib/libmfp.so.1.0.1"
      install -m 755 "${srcdir}/cdroot/Linux/x86_64/at_root/opt/smfp-common/lib64/libnetsnmp.so.10.0.2" \
      "${pkgdir}/usr/lib/libnetsnmp.so.10.0.2"
  else
      install -m 755 "${srcdir}/cdroot/Linux/i386/at_root/usr/lib/libmfp.so.1.0.1" \
      "${pkgdir}/usr/lib/libmfp.so.1.0.1"
      install -m 755 "${srcdir}/cdroot/Linux/i386/at_root/opt/smfp-common/lib/libnetsnmp.so.10.0.2" \
      "${pkgdir}/usr/lib/libnetsnmp.so.10.0.2"
  fi

  #New to 3.00.65
  install -m 644 "${startdir}/extra/98_smfpautoconf.rules" "${pkgdir}/etc/udev/rules.d/98_smfpautoconf.rules"
  install -m 644 "${startdir}/extra/99_smfpautoconf.rules" "${pkgdir}/etc/udev/rules.d/99_smfpautoconf.rules"

}
