# Maintainer: Diego <cdprincipeat gmaildot com>

pkgname=solaar-git
pkgver=0.8.9.2_164_g58f598f
pkgrel=1
pkgdesc="Linux devices manager for the Logitech Unifying Receiver"
arch=("any")
url="http://pwr.github.io/Solaar/"
license=('GPL')
depends=(
      'systemd' 'python' 'python-pyudev' 'python-gobject'
      )
optdepends=(
      'gtk3: required for GUI application'
      'gobject-introspection: required for GUI application'
      'python-gobject: required for GUI application'
      )
makedepends=('git')
install=solaar.install
conflicts=('solaar')
source=('git://github.com/pwr/Solaar.git')
md5sums=('SKIP')

pkgver() {
  cd Solaar
  git describe --always | sed 's#-#_#g;s#v##'
}

package() {
  cd "$srcdir/Solaar"
  python setup.py install --root="$pkgdir/" --optimize=1
  
  # Install udev rule
#  install -d "${pkgdir}"/usr/lib/udev/rules.d/
#  install -m644 rules.d/42-logitech-unify-permissions.rules "${pkgdir}"/usr/lib/udev/rules.d/﻿42-logitech-unify-permissions.rules
  install -d "${pkgdir}"/etc/udev/rules.d/
  install -m644 rules.d/42-logitech-unify-permissions.rules "${pkgdir}"/etc/udev/rules.d/42-logitech-unify-permissions﻿.rules
}

