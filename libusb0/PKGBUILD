# Maintainer: ValdikSS <iam@valdikss.org.ru>

pkgname=libusb0
pkgver=0.1.12
pkgrel=5
pkgdesc="Library to enable user space application programs to communicate with USB devices. 0.x branch. Debian's binary."
arch=('i686' 'x86_64')
url="http://libusb.sourceforge.net/"
license=('LGPL')
depends=('sh')
provides=('libusb-compat')
#replaces=('libusb-compat')
conflicts=('libusb-compat')
_debianver='0.1-4_0.1.12-24'
source=("http://ftp.debian.org/debian/pool/main/libu/libusb/libusb-${_debianver}_i386.deb")
md5sums=('dabe27e1f1f45626195c45a1f0f3acc0')

if test "$CARCH" == x86_64; then
  source=("http://ftp.debian.org/debian/pool/main/libu/libusb/libusb-${_debianver}_amd64.deb")
  md5sums=('031d3212f1c74a9a85409bf4130e9e69')
fi

package() {
  tar axvf ${srcdir}/data.tar.xz -C ${pkgdir}/
  mkdir -p ${pkgdir}/usr/lib
  mv ${pkgdir}/lib/x86_64-linux-gnu/* ${pkgdir}/usr/lib || true
  mv ${pkgdir}/lib/i386-linux-gnu/* ${pkgdir}/usr/lib || true
  rm -rf ${pkgdir}/lib/x86_64-linux-gnu/ ${pkgdir}/lib/i386-linux-gnu/
}
