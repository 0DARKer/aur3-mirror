# Generated by Xyne::Arch::CPAN 0.07
# Contributor: John Gerritse <reaphsharc@gmail.com

pkgname=perl-perlbal
pkgver=1.76
pkgrel=1
pkgdesc="Reverse-proxy load balancer and webserver"
arch=('i686' 'x86_64')
url="http://search.cpan.org/dist/Perlbal/"
license=('unknown')
source=('http://search.cpan.org/CPAN/authors/id/D/DO/DORMANDO/Perlbal-1.76.tar.gz')
md5sums=('48c3f9501d3643c768e67fb75c7e039a')
sha256sums=('fa06483d764b2443bd8c23af34b3c2b01fc5f88b3a2edab1a4e8712b367d72e9')
depends=('perl-bsd-resource' 'perl-danga-socket>=1.44' 'perl-http-date' 'perl-http-response' 'perl-sys-syscall' 'perl-test-more' 'perl-time-hires')
makedepends=('perl-extutils-makemaker')
provides=('perl-perlbal-aio' 'perl-perlbal-backendhttp' 'perl-perlbal-cache=1.0.0' 'perl-perlbal-chunkeduploadstate' 'perl-perlbal-clienthttp' 'perl-perlbal-clienthttpbase' 'perl-perlbal-clientmanage' 'perl-perlbal-clientproxy' 'perl-perlbal-commandcontext' 'perl-perlbal-httpheaders' 'perl-perlbal-managecommand' 'perl-perlbal-plugin-accesscontrol' 'perl-perlbal-plugin-autoremoveleadingdir' 'perl-perlbal-plugin-cgilike' 'perl-perlbal-plugin-echoservice' 'perl-perlbal-plugin-highpri' 'perl-perlbal-plugin-include' 'perl-perlbal-plugin-lazycdn' 'perl-perlbal-plugin-maxcontentlength' 'perl-perlbal-plugin-notmodified' 'perl-perlbal-plugin-palimg' 'perl-perlbal-plugin-queues' 'perl-perlbal-plugin-redirect' 'perl-perlbal-plugin-stats' 'perl-perlbal-plugin-vhosts' 'perl-perlbal-plugin-vpaths' 'perl-perlbal-pool' 'perl-perlbal-reproxymanager' 'perl-perlbal-service' 'perl-perlbal-socket' 'perl-perlbal-socketssl' 'perl-perlbal-tcplistener' 'perl-perlbal-test' 'perl-perlbal-test-webclient' 'perl-perlbal-test-webserver' 'perl-perlbal-uploadlistener' 'perl-perlbal-util')
options=(!emptydirs)

build() {
  _dir=$(find $srcdir -maxdepth 2 -type f -name 'Makefile.PL')
  if [ ! -z "$_dir" ]; then
    cd $(dirname "$_dir")
    PERL_MM_USE_DEFAULT=1 perl Makefile.PL INSTALLDIRS=vendor || return 1
    make  || return 1
    make install DESTDIR="${pkgdir}" || return 1

  else
  _dir=$(find $srcdir -maxdepth 2 -type f -name 'Build.PL')
  if [ ! -z "$_dir" ]; then
    cd $(dirname "$_dir")
    PERL_MM_USE_DEFAULT=1 perl Build.PL INSTALLDIRS=vendor || return 1
    ./Build  || return 1
    ./Build install destdir=${pkgdir} || return 1

  else
    echo "error: failed to detect build method for $pkgname"
    echo "you may be able to fix this by editing the PKGBUILD"
    return 1
  fi fi

  # remove perllocal.pod and .packlist
  find ${pkgdir} -name perllocal.pod -delete
  find ${pkgdir} -name .packlist -delete
}

# vim:set ts=2 sw=2 et:
