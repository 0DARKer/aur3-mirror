83c83,86
< 	if (gps_waiting(gdata))
---
>        
>         // 10 seconds timeout, only place where
>         // logic was changed to upgrade to new gpsd
>         if (gps_waiting(gdata,10000000)) 
88c91
< 	if (gps_poll(gdata))
---
> 	if (gps_read(gdata))
131c134,136
< 	gdata = gps_open(g.gpsd_host, g.gpsd_port);
---
> 	 gdata = malloc(sizeof(struct gps_data_t));
> 
>          gps_open(g.gpsd_host, g.gpsd_port, gdata);
