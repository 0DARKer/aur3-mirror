# Maintainer: Magnus Therning <magnus@therning.org>

pkgname=ocaml-ocamlify
pkgver=0.0.1
pkgrel=3
pkgdesc="OCaml file inclusion"
arch=('i686' 'x86_64')
url="https://forge.ocamlcore.org/projects/ocamlify"
# LGPL + linking exception
license=('LGPL')
makedepends=('ocaml' 'ocaml-findlib')
source=(https://forge.ocamlcore.org/frs/download.php/379/ocamlify-${pkgver}.tar.gz
    fix-mkdir
    )
options=(!strip)
changelog=$pkgname.changelog

build() {
    cd ${srcdir}/${pkgname/ocaml-/}-${pkgver}

    patch -p3 < ../fix-mkdir

    ocaml setup.ml -configure --prefix /usr --destdir ${pkgdir}
    ocaml setup.ml -build
}

package() {
    cd ${srcdir}/${pkgname/ocaml-/}-${pkgver}

    ocaml setup.ml -install
}

sha256sums=('75f20c65b834165c98b606b03c7f28c09c03f3ebf12b69dae8ba2d2cf75836c9'
            '7d58aba86a32b96ccee21825f7ba31a0e46557b2277225d590f20bb441fae54b')
