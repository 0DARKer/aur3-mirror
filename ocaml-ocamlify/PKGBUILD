# Maintainer: Sergei Lebedev <superbobry@gmail.com>
# Contributor: Magnus Therning <magnus@therning.org>

pkgname=ocaml-ocamlify
pkgver=0.0.1
pkgrel=2
pkgdesc="include files in OCaml code"
arch=('i686' 'x86_64')
url="https://forge.ocamlcore.org/projects/ocamlify"
license=('LGPL')
depends=('ocaml')
makedepends=('ocaml-findlib')
source=(https://forge.ocamlcore.org/frs/download.php/379/ocamlify-${pkgver}.tar.gz)
sha256sums=('75f20c65b834165c98b606b03c7f28c09c03f3ebf12b69dae8ba2d2cf75836c9')
options=(!strip)
changelog=$pkgname.changelog

build() {
  cd "$srcdir/${pkgname/ocaml-/}-$pkgver"

  ocaml setup.ml -configure --prefix /usr --destdir $pkgdir
  ocaml setup.ml -build || return 1
}

package() {
  cd "$srcdir/${pkgname/ocaml-/}-$pkgver"

  export OCAMLFIND_DESTDIR=${pkgdir}$(ocamlfind printconf destdir)
  mkdir -p $OCAMLFIND_DESTDIR
  ocaml setup.ml -install
}

