# Maintainer: Liganic <liganic-aur@gmx.org>
# Contributor: Bernd Amend <berndamend@web.de>
pkgname=giteye
pkgver=1.2.1
pkgrel=1
pkgdesc="Desktop for Git by CollabNet. It works with TeamForge, CloudForge and other Git services."
arch=('x86' 'x86_64')
url="http://www.collab.net/downloads/giteye"
license=('custom')
depends=('java-environment' 'git')

if [ "$CARCH" = "x86_64" ]; then
source=('http://downloads-guests.open.collab.net/files/documents/61/7266/GitEye-1.2.1-linux.x86_64.zip' LICENSE)
sha256sums=('3a5a0ccb07d686670e728267cd9ad5cf3c43e09c550d2ec226a0ca2d6c28f025'
            '76817988d60474b3e59b09bd2f6c35018d305e639b51751747d4af15ffec631b')
else
source=('http://downloads-guests.open.collab.net/files/documents/61/7265/GitEye-1.2.1-linux.x86.zip' LICENSE)
sha256sums=('a7e23d83991954702b0312d7219800aee9345a6e0d4e4161b7beaf60913abba9'
		'76817988d60474b3e59b09bd2f6c35018d305e639b51751747d4af15ffec631b')
fi

noextract=(${source[@]##*/}) # extract nothing

package() {
	cd "$srcdir/"
	mkdir -p "$pkgdir/opt/giteye/"
	unzip ${noextract} -d "$pkgdir/opt/giteye/"
	mkdir -p "$pkgdir/usr/bin/"
	ln -s "/opt/giteye/GitEye" "$pkgdir/usr/bin/"

	install -Dm644 LICENSE "$pkgdir/usr/share/licenses/giteye/LICENSE"
}
