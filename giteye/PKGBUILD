# Maintainer: Liganic <liganic-aur@gmx.org>
# Contributor: Bernd Amend <berndamend@web.de>
pkgname=giteye
pkgver=1.2.2
pkgrel=1
pkgdesc="Desktop for Git by CollabNet. It works with TeamForge, CloudForge and other Git services."
arch=('x86' 'x86_64')
url="http://www.collab.net/downloads/giteye"
license=('custom')
depends=('java-environment' 'git')

if [ "$CARCH" = "x86_64" ]; then
source=('http://downloads-guests.open.collab.net/files/documents/61/7433/GitEye-1.2.2-linux.x86_64.zip' LICENSE)
sha256sums=('d5235cbfa72eb2ec67989bc048dfd953e5a85332961bd58e03ec30e1955d4bc8'
            '76817988d60474b3e59b09bd2f6c35018d305e639b51751747d4af15ffec631b')
else
source=('http://downloads-guests.open.collab.net/files/documents/61/7432/GitEye-1.2.2-linux.x86.zip' LICENSE)
sha256sums=('efbd4d843cc7357b74b6953205611cb39b54c16bda97fec8f695ff6a9c6918a1'
            '76817988d60474b3e59b09bd2f6c35018d305e639b51751747d4af15ffec631b')
fi

noextract=(${source[@]##*/}) # extract nothing

package() {
	cd "$srcdir/"
	mkdir -p "$pkgdir/opt/giteye/"
	unzip ${noextract} -d "$pkgdir/opt/giteye/"
	mkdir -p "$pkgdir/usr/bin/"
	ln -s "/opt/giteye/GitEye" "$pkgdir/usr/bin/"

	install -Dm644 LICENSE "$pkgdir/usr/share/licenses/giteye/LICENSE"
}

