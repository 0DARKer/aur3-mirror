# Maintainer: Liganic <liganic-aur@gmx.org>
# Contributor: Bernd Amend <berndamend@web.de>
# Contributor: Holodoc <archlinux@bananapro.de>
pkgname=giteye
pkgver=1.5.0
pkgrel=2
pkgdesc="Desktop for Git by CollabNet. It works with TeamForge, CloudForge and other Git services."
arch=('x86' 'x86_64')
url="http://www.collab.net/downloads/giteye"
license=('custom')
depends=('java-environment' 'git')

if [ "$CARCH" == "x86_64" ]; then
source=('https://downloads-guests.open.collab.net/files/documents/61/8161/GitEye-1.5.0-linux.x86_64.zip' 'LICENSE' 'giteye.desktop')
sha256sums=('e1d10debb869db7e423b5804acbe51c5f31beffd89407d21f78f6c7b56401cfb'
            '76817988d60474b3e59b09bd2f6c35018d305e639b51751747d4af15ffec631b'
            '0cc7bb016275f8aad6864882194d6d88b6dfe6ccb2e8dba978960b7bed6f9e1d')
else
source=('https://downloads-guests.open.collab.net/files/documents/61/8160/GitEye-1.5.0-linux.x86.zip' 'LICENSE' 'giteye.desktop')
sha256sums=('082f253c6153a5f06295de41ef042e5f6c24b1b5a828a6fd177a061f616823fa'
            '76817988d60474b3e59b09bd2f6c35018d305e639b51751747d4af15ffec631b'
            '0cc7bb016275f8aad6864882194d6d88b6dfe6ccb2e8dba978960b7bed6f9e1d')
fi

noextract=(${source[@]##*/}) # extract nothing

package() {
	cd "$srcdir/"
	mkdir -p "$pkgdir/opt/giteye/"
	unzip ${noextract} -d "$pkgdir/opt/giteye/"
	mkdir -p "$pkgdir/usr/bin/"
	ln -s "/opt/giteye/GitEye" "$pkgdir/usr/bin/"

	install -Dm644 LICENSE "$pkgdir/usr/share/licenses/giteye/LICENSE"
	install -Dm644 giteye.desktop "$pkgdir/usr/share/applications/giteye.desktop"
	install -Dm644 "$pkgdir/opt/giteye/icon.xpm" "$pkgdir/usr/share/pixmaps/giteye.xpm"
}
