# Maintainer: Runnytu < runnytu at gmail dot com >
 
pkgname=dkms-8192cu
pkgver=v4.0.2_9000
pkgrel=1
pkgdesc="Driver for Realtek RTL8188CUS (8188C, 8192C) chipset wireless cards"
arch=('any')
url="http://www.realtek.com.tw/"
license=('GPL')
depends=('dkms' 'linux-headers')
conflicts=("8192cu" "rt8192cu")
install=${pkgname}.install
options=(!strip)
_pkgname="8192cu"
source=("https://dl.dropboxusercontent.com/u/54784933/$_pkgname-$pkgver.tar.gz"
        "dkms.conf"
        "blacklist-dkms-8192cu.conf"
	"fix_310_proc2.patch")
               
sha256sums=('f4274f0fa31420dcf2e69789876b8764377c19f7f22ce6553d855f7376b62033'
            '22853908c2ae147399ce3847c175a25134db668d36c3141814eafcc8fddacc98'
            'c535e5f1990142355587c212e90e3fc2f1d16540eaafbc7fb7fa54581d70ff37'
			'976394ef3ee5d29023e8c1f3b56b17a6171bf42b6987256c1cda632db4bb19a4')

package() {
       
        installDir="$pkgdir/usr/src/$_pkgname-$pkgver"
       
        install -dm755 "$installDir"
        install -m644 "$srcdir/dkms.conf" "$installDir"
        install -dm755 "$pkgdir/etc/modprobe.d"
        install -m644 "$srcdir/blacklist-dkms-8192cu.conf" "$pkgdir/etc/modprobe.d/blacklist-dkms-8192cu.conf"
       
        cd "${srcdir}/${_pkgname}-${pkgver}/"

        patch -p1 -i "$srcdir/fix_310_proc2.patch"
       
        for d in `find . -type d`
        do
                install -dm755  "$installDir/$d"
        done
       
        for f in `find . -type f`
        do
                install -m644 "${srcdir}/${_pkgname}-${pkgver}/$f" "$installDir/$f"
        done
       
}
