From 4398550893f839537405c2024fdb43f580499549 Mon Sep 17 00:00:00 2001
From: rakib <rakib.mullick@gmail.com>
Date: Tue, 27 May 2014 11:10:27 +0600
Subject: [PATCH]  Avoid load tracking for deadline tasks. Currently BLD don't
 handle deadline tasks, so avoid tracking it's load.

---
 kernel/sched/core.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/kernel/sched/core.c b/kernel/sched/core.c
index 2bb0d6c..b7aecc4 100644
--- a/kernel/sched/core.c
+++ b/kernel/sched/core.c
@@ -767,7 +767,8 @@ static void enqueue_task(struct rq *rq, struct task_struct *p, int flags)
 	update_rq_clock(rq);
 	sched_info_queued(rq, p);
 	p->sched_class->enqueue_task(rq, p, flags);
-	bld_track_load_activate(rq, p);
+	if (!dl_task(p))
+		bld_track_load_activate(rq, p);
 }
 
 static void dequeue_task(struct rq *rq, struct task_struct *p, int flags)
@@ -775,7 +776,8 @@ static void dequeue_task(struct rq *rq, struct task_struct *p, int flags)
 	update_rq_clock(rq);
 	sched_info_dequeued(rq, p);
 	p->sched_class->dequeue_task(rq, p, flags);
-	bld_track_load_deactivate(rq, p);
+	if (!dl_task(p))
+		bld_track_load_deactivate(rq, p);
 }
 
 void activate_task(struct rq *rq, struct task_struct *p, int flags)
-- 
1.9.3

