# Maintainer: Arkham <arkham at archlinux dot us>
# Contributor:  TDY <tdy@gmx.com>
# Contributor: Garrett <garrett16@hotmail.it>

pkgname=shutter
pkgver=0.86.4
pkgrel=1
pkgdesc="A featureful screenshot tool (formerly gscrot)"
arch=('i686' 'x86_64')
url="http://shutter-project.org/"
license=('GPL3')
depends=('gconf-perl' 'imagemagick' 'libxml-perl' 'perl-gnome2-wnck'
         'perl-goo-canvas' 'perl-gtk2-imageview' 'perl-locale-gettext'
         'perl-net-dbus' 'perl-www-mechanize' 'perl-x11-protocol'
         'perl-xml-simple' 'perl-libwww>=5.827' 'perl-proc-processtable' 'librsvg')
optdepends=('gnome-web-photo: web screenshot support' 'bc: needed for plugins')
source=(http://$pkgname-project.org/wp-content/uploads/releases/tars/$pkgname-$pkgver.tar.gz)
md5sums=('874a4b5a113d81f4c83bc67b5a4a029a')

build() {
  cd "$srcdir/$pkgname-$pkgver"
  install -Dm755 bin/$pkgname "$pkgdir/usr/bin/$pkgname"
  cp -r share "$pkgdir/usr/"

  find "$pkgdir/usr/share" -type d -exec chmod 755 '{}' \;
  find "$pkgdir/usr/share" -type f -exec chmod 644 '{}' \;
  find "$pkgdir" -path '*plugins*' -type f ! -name '*.*' -exec chmod 755 '{}' \;
}
