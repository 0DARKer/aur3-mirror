# Maintainer:  Shanto <shanto@hotmail.com>
# Contributor: Athurg <athurg@gooth.cn>
# Contributor: Shanto <shanto@hotmail.com>

pkgname=shutter
pkgver=0.88.1
pkgrel=1
pkgdesc="A featureful screenshot tool (formerly gscrot)"
arch=('i686' 'x86_64')
url="http://shutter-project.org/"
license=('GPL3')
depends=(
	xdg-utils libxml-perl imagemagick procps librsvg gconf-perl
	perl-{xml-simple,www-mechanize,locale-gettext,x11-protocol}
	perl-{gnome2-wnck,gtk2-{imageview,unique},proc-processtable}
	perl-{proc-simple,sort-naturally,path-class,json,json-xs}
	perl-{file-{which,basedir,copy-recursive},pathtools}
	perl-{net-{dbus,dropbox-api},goo-canvas}
)
optdepends=(
	'nautilus-sendto: Send Toâ€¦ functionality in right-click and main menu'
	'perl-image-exiftool: Write orientation metadata when saving JPEG files'
	'perl-net-dbus-glib: Upload support for Ubuntu One'
	'nome-web-photo: Support for capturing websites'
	#'perl-gtk2-trayicon: Only if you using a gtk2 lower than 2.10.x'
)
source=("http://shutter-project.org/wp-content/uploads/releases/tars/$pkgname-$pkgver.tar.gz")
md5sums=('6a7875ae1d4b03f4616acb22a1b87951')

build() {
	cd "$srcdir/$pkgname-$pkgver"
	install -Dm755 bin/$pkgname "$pkgdir/usr/bin/$pkgname"
	cp -r share "$pkgdir/usr/"

	find "$pkgdir/usr/share" -type d -exec chmod 755 '{}' \;
	find "$pkgdir/usr/share" -type f -exec chmod 644 '{}' \;
	find "$pkgdir" -path '*plugins*' -type f ! -name '*.*' -exec chmod 755 '{}' \;
	find "$pkgdir" -path '*/upload_plugins/*' -type f -name '*.pm' -exec chmod 755 '{}' \;
}
