# Contributor: graysky <graysky AT archlinux dot us>
# Contributor: Chrysalis <mindaxis@gmail.com>

pkgname=mprime
pkgver=266
_filever=266
pkgrel=1
pkgdesc="A GIMPS, distributed computing project client, dedicated to finding Mersenne primes."
arch=('i686' 'x86_64')
url="http://www.mersenne.org"
license=("custom")

if [ $CARCH = "x86_64" ]; then
 depends=('curl' 'gcc-libs')
 source=(ftp://mersenne.org/gimps/$pkgname$_filever-linux64.tar.gz)
 noextract=($pkgname$_filever-linux64.tar.gz)
 sha256sums=('6f09f0a507e608e493b659940e9751612c509409a29854b262c5af966637c2c1')
else
 depends=('libcurl3' 'gcc-libs')
 source=(ftp://mersenne.org/gimps/$pkgname$_filever.tar.gz)
 noextract=($pkgname$_filever.tar.gz)
 sha256sums=('e58faf7f2f3c18856cae5d03c5fead133748fd9d4f136c0e847ac6edfb41dc91')
fi

build() {
mkdir -p ${srcdir}/${pkgname}-${_filever}-build
cd ${srcdir}/${pkgname}-${_filever}-build

if [ $CARCH = "x86_64" ]; then
bsdtar -xf ../${pkgname}${_filever}-linux64.tar.gz
else
bsdtar -xf ../${pkgname}${_filever}.tar.gz
fi

install -D -m755 mprime ${pkgdir}/usr/bin/mprime
install -D -m644 license.txt ${pkgdir}/usr/share/licenses/${pkgname}/license.txt
install -D -m644 readme.txt ${pkgdir}/usr/share/doc/${pkgname}/readme.txt
install -D -m644 stress.txt ${pkgdir}/usr/share/doc/${pkgname}/stress.txt
install -D -m644 undoc.txt ${pkgdir}/usr/share/doc/${pkgname}/undoc.txt
install -D -m644 whatsnew.txt ${pkgdir}/usr/share/doc/${pkgname}/whatsnew.txt
}
