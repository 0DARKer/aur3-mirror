# Contributor: graysky <graysky AT archlinux dot us>
# Contributor: Chrysalis <mindaxis@gmail.com>

pkgname=mprime
pkgver=25.11
_filever=2511
pkgrel=1
pkgdesc="A GIMPS, distributed computing project client, dedicated to finding Mersenne primes."
arch=('i686' 'x86_64')
url="http://www.mersenne.org"
license=("custom")

if [ "${CARCH}" = "x86_64" ]; then
depends=('curl' 'gcc-libs')
else
depends=('libcurl3' 'gcc-libs')
fi

options=('force')
source=(ftp://mersenne.org/gimps/${pkgname}${_filever}.tar.gz \
ftp://mersenne.org/gimps/${pkgname}${_filever}-linux64.tar.gz)

noextract=($pkgname$_filever.tar.gz $pkgname$_filever-linux64.tar.gz)
md5sums=('eb39048c7df43100a75c62d5712d416a' '196ba188cf3865019225112a5747b44b')

build() {
mkdir -p ${srcdir}/${pkgname}-${_filever}-build
cd ${srcdir}/${pkgname}-${_filever}-build
if [ "$CARCH" = "x86_64" ]; then
bsdtar -xf ../${pkgname}${_filever}-linux64.tar.gz
else
bsdtar -xf ../${pkgname}${_filever}.tar.gz
fi

install -D -m755 mprime ${pkgdir}/usr/bin/mprime
install -D -m644 license.txt ${pkgdir}/usr/share/licenses/${pkgname}/license.txt
install -D -m644 readme.txt ${pkgdir}/usr/share/doc/${pkgname}/readme.txt
install -D -m644 stress.txt ${pkgdir}/usr/share/doc/${pkgname}/stress.txt
install -D -m644 undoc.txt ${pkgdir}/usr/share/doc/${pkgname}/undoc.txt
install -D -m644 whatsnew.txt ${pkgdir}/usr/share/doc/${pkgname}/whatsnew.txt
}
