# Maintainer: shemz {shemz_at_gmx_dot_com}

# A not-so-elegant solution to get a custom tray icon for parcellite. 
# But heh, it works! :)

pkgname=parcellite-icon
pkgver=0.9.2
pkgrel=1
pkgdesc="Lightweight GTK+ clipboard manager, with custom status icon patch"
arch=('i686' 'x86_64')
url="http://parcellite.sourceforge.net/"
license=('GPL3')

depends=('gtk2')
makedepends=('intltool')
provides=('parcellite')
conflicts=('parcellite' 'parcellite-svn' 'parcellite-latest')
replaces=('parcellite' 'parcellite-svn' 'parcellite-latest')

source=(http://downloads.sourceforge.net/parcellite/parcellite-$pkgver.tar.gz
	main.diff
	parcellite.svg)
md5sums=('a650f6fe0fec96827b30ca3218a2b4df'
	 '8d71b4e73ff7e6257261a4a252fc23b0'
	 'b36d823d53f21dcc1f85f09818ca3ea9')

install=parcellite-icon.install

build() {
  patch -Np1 -i ${srcdir}/main.diff || return 1
 
  cd "$srcdir/parcellite-$pkgver"

  ./configure --prefix=/usr --sysconfdir=/etc || return 1
  make || return 1
  make DESTDIR="$pkgdir" install || return 1
  
  install -Dm 644 ${srcdir}/parcellite.svg \
	${pkgdir}/usr/share/pixmaps/parcellite.svg || return 1
}