# This is an example PKGBUILD file. Use this as a start to creating your own,
# and remove these comments. For more information, see 'man PKGBUILD'.
# NOTE: Please fill out the license field for your package! If it is unknown,
# then please put 'unknown'.

# Maintainer: Matthias Gabriel <gabm at live dot de>
pkgname=tlp
pkgver=0.3.0
pkgrel=1
pkgdesc="Powersaving scripts for ThinkPads(c)"
arch=('any')
url="http://thinkpad-wiki.org/TLP_-_Stromspareinstellungen_fuer_Ubuntu"
license=('GPL')
groups=()
depends=('hdparm' 'pm-utils' 'wireless_tools' 'cpufrequtils' 'rfkill')
makedepends=()
optdepends=('ethtool: deactivate Wake on LAN' 'smartmontools: enable tlp-stat to show S.M.A.R.T. values of hard disks' 'tp_smapi: for setting battery thresholds')
provides=()
conflicts=('laptop-mode-tools')
replaces=()
backup=()
options=()
install=tlp.install
changelog=
source=(https://launchpadlibrarian.net/66753199/tlp_0.3.0.orig.tar.gz)
noextract=()
md5sums=('6fe29b41c268731ec3a1bbdb25714b62')

build() {
  tar zxvf tlp_0.3.0.orig.tar.gz

  cd "$srcdir/$pkgname-$pkgver"
  msg "Patching for compatibility"
  patch -p1 < ../../arch.patch
}

package() {
  install -d "${pkgdir}"/usr/{lib,sbin,bin}
  install -d "${pkgdir}"/usr/lib/{tlp-pm,pm-utils}
  install -d "${pkgdir}"/usr/lib/pm-utils/{power.d,sleep.d}
  install -d "${pkgdir}"/etc/default
  install -d "${pkgdir}"/etc/pm/power.d
  install -d "${pkgdir}"/etc/rc.d/
  install -d "${pkgdir}"/etc/xdg/autostart


  cd "$srcdir/$pkgname-$pkgver"
  


  make DESTDIR=$pkgdir install
}
