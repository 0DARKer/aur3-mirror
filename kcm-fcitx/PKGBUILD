# Maintainer: Felix Yan <felixonmars@gmail.com>
# Contributor: poplarch <poplarch@gmail.com>

pkgname=kcm-fcitx
pkgver=0.4.0
pkgrel=2
pkgdesc="KDE Config Module for Fcitx"
arch=('i686' 'x86_64')
url="https://github.com/fcitx/kcm-fcitx"
license=('GPL')
depends=('fcitx>=4.2.5' 'kdebase-runtime')
makedepends=('cmake' 'intltool' 'automoc4')
source=(
  http://fcitx.googlecode.com/files/${pkgname}-${pkgver}.tar.xz
  http://uploads.csslayer.info/uploads/kcm-fcitx-patch/fix.patch
)
md5sums=('c54eb7ed04ecaf64e06b55acee3f30f6'
         'ec54b0d9c5ad0015741c9c436391ec1b')

build(){
    cd "$srcdir/${pkgname}-${pkgver}"
    patch -p1 -i ../fix.patch
    rm -rf build
    mkdir build
    cd build
    
    cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE=Release ..
    make
}

package ()
{
    cd "$srcdir/${pkgname}-${pkgver}/build"
    make DESTDIR=${pkgdir} install
}
