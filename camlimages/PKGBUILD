pkgname=camlimages
pkgver=4.0.1
pkgrel=1
pkgdesc="Objective Caml image processing library"
arch=(i686 x86_64)
url="http://gallium.inria.fr/camlimages"
license=('GPL2')
depends=('libpng' 'libtiff' 'libxpm' 'libungif' 'freetype2' 'libjpeg')
makedepends=('ocaml' 'omake')
#optdepends=('lablgtk' 'lablgtk2')
md5sums=('901d674126464061333b3630e68d99cc')
source=("https://bitbucket.org/camlspotter/$pkgname/get/v$pkgver.tar.gz")
sname=camlspotter-camlimages-c803efa9d5d3

build() {
  cd "$srcdir/$sname"
  omake || return 1
}

package () {
        mkdir -p "$pkgdir/$(ocamlfind printconf destdir)"
        mkdir -p "$pkgdir/$(ocamlfind printconf destdir)/stublibs"
  cd $srcdir/$sname
        OCAMLFIND_DESTDIR="$pkgdir/$(ocamlfind printconf destdir)" \
        omake install
  install -Dm 644 License.txt $pkgdir/usr/share/licenses/$pkgname/LICENSE

}


