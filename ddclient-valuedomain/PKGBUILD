# Maintainer: irgaly <irgaly@gmail.com>
pkgname=ddclient-valuedomain
pkgver=3.8.0
pkgrel=3
pkgdesc="Update dynamic DNS entries for accounts on many dynamic DNS services. Supporting VALUE-DOMAIN.com."
arch=('any')
url="http://ddclient.sourceforge.net/"
license=('GPL2')
groups=()
depends=('perl' 'perl-io-socket-ssl')
provides=('ddclient')
conflicts=('ddclient')
backup=('etc/ddclient/ddclient.conf')
source=("http://downloads.sourceforge.net/project/ddclient/ddclient/ddclient-$pkgver/ddclient-$pkgver.tar.bz2"
        "ddclient-valuedomain-$pkgver.patch"
        "ddclient.init"
        "ddclient.args")
md5sums=('6cac7a5eb1da781bfd4d98cef0b21f8e'
         '672577c5666ce0c65b434eb652939a07'
         '4fb4ca1c1e2365eedb4024f6ea19f6c7'
         'b8f39c82827776da948b76ef83544d33')

build() {
  cd "$srcdir/ddclient-$pkgver"

  patch < $srcdir/ddclient-valuedomain-$pkgver.patch
}

package() {
  cd "$srcdir/ddclient-$pkgver"

  mkdir -p $pkgdir/etc/ddclient/samples
  mkdir -p $pkgdir/var/cache/ddclient
  install -Dm644 $srcdir/ddclient.args $pkgdir/etc/conf.d/ddclient
  install -m600 sample-etc_ddclient.conf $pkgdir/etc/ddclient/ddclient.conf
  install -m644 README $pkgdir/etc/ddclient/samples/
  install -m644 sample-etc_cron.d_ddclient $pkgdir/etc/ddclient/samples/
  install -m644 sample-etc_dhclient-exit-hooks $pkgdir/etc/ddclient/samples/
  install -m644 sample-etc_dhcpc_dhcpcd-eth0.exe $pkgdir/etc/ddclient/samples/
  install -m644 sample-etc_ppp_ip-up.local $pkgdir/etc/ddclient/samples/
  install -Dm755 $srcdir/ddclient.init $pkgdir/etc/rc.d/ddclient
  install -Dm755 ddclient $pkgdir/usr/sbin/ddclient
}
