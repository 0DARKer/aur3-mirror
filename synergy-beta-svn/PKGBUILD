# Maintainer: Kerrick Staley <mail kerrickstaley com>
# Contributor: George Nassar <george@providentdata.com>
# Contributor: Jelle van der Waa <jelle vdwaa nl>
# Contributor: St√©phane Gaudreault <stephane@archlinux.org>
# Contributor: Dale Blount <dale@archlinux.org>

pkgname=synergy-beta-svn
pkgver=20120204
pkgrel=1
pkgdesc="Share a single mouse and keyboard between multiple computers"
url="http://synergy-foss.org"
arch=('i686' 'x86_64')
depends=('gcc-libs' 'libxtst' 'libxinerama' 'bash')
conflicts=('synergy' 'synergy-beta')
provides=('synergy' 'synergy-beta')
license=('GPL2')
makedepends=('libxt' 'cmake' 'python2')       # used by configure to test for libx11...
backup=('etc/synergy.conf')
source=(synergys.rc)
md5sums=('8f8c01add9bf6e3ae9f37a36ca6345b6')
# options=(!strip)  # enable this to compile debug symbols into the binaries

build() {
  svn checkout http://synergy-plus.googlecode.com/svn/branches/1.4 "$srcdir/synergy"
  cd "$srcdir/synergy"
  
  cmake  -D CMAKE_INSTALL_PREFIX=/usr .
  # cmake  -D CMAKE_INSTALL_PREFIX=/usr -D CMAKE_CXX_FLAGS='-g' .   # enable this line (and disable the previous one) to compile debug symbols into the binaries
  make
}

package() {
  cd "$srcdir/synergy"
  
  # install binary
  install -d "$pkgdir/usr/bin/"
  install -Dm755 bin/synergyc "$pkgdir/usr/bin/"
  install -Dm755 bin/synergys "$pkgdir/usr/bin/"

  # install rc.d script  and config
  install -d "$pkgdir/etc/rc.d"
  install -Dm644 doc/synergy.conf.example-basic "$pkgdir/etc/synergy.conf" # true
  install -Dm755 "$srcdir/synergys.rc" "$pkgdir/etc/rc.d/synergys" # true
}

