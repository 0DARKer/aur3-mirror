# Based on https://aur.archlinux.org/packages/canon-pixma-mx870-complete/
# Maintainer: Miroslav Koskar (http://miroslavkoskar.com/)

# === Credits ===
# Maintainer: Jeremy Sands <cto@jeremysands.com>

pkgname='canon-pixma-mx920-complete'
pkgver='3.90.2.10'
pkgrel=1
pkgdesc="Complete stand alone driver set (printing and scanning) for Canon Pixma MX920 series"
url='http://www.canon.co.uk/Support/Consumer_Products/product_ranges/printers/pixma/index.aspx'
arch=('i686' 'x86_64')
license=('custom')
if [ $CARCH = 'i686' ]; then
    depends=('lib32-libcups' 'lib32-popt' 'lib32-libpng12' 'lib32-libusb-compat' 'lib32-libtiff4')
elif [ $CARCH = 'x86_64' ]; then
    depends=('libcups' 'popt' 'libpng12' 'libusb-compat' 'libtiff4')
fi
makedepends=('deb2targz')

source=('http://gdlp01.c-wss.com/gds/0/0100005170/01/cnijfilter-mx920series-3.90-1-deb.tar.gz'
        'http://gdlp01.c-wss.com/gds/3/0100005183/01/scangearmp-mx920series-2.10-1-deb.tar.gz')
md5sums=('76e30668391521abf749c21d8a46f5fe'
         '4ea7c1909831b24f0c737d5e4b7c0034')

package() {
    cd "$srcdir/cnijfilter-mx920series-3.90-1-deb/packages/"
    install cnijfilter-common_3.90-1_amd64.deb "$pkgdir"
    install cnijfilter-mx920series_3.90-1_amd64.deb "$pkgdir"

    cd "$srcdir/scangearmp-mx920series-2.10-1-deb/packages"
    install scangearmp-common_2.10-1_amd64.deb "$pkgdir"
    install scangearmp-mx920series_2.10-1_amd64.deb "$pkgdir"

    cd "$pkgdir"

    deb2targz cnijfilter-common_3.90-1_amd64.deb
    tar -xvf cnijfilter-common_3.90-1_amd64.tar.gz
    rm cnijfilter-common_3.90-1_amd64.deb
    rm cnijfilter-common_3.90-1_amd64.tar.gz

    deb2targz cnijfilter-mx920series_3.90-1_amd64.deb
    tar -xvf cnijfilter-mx920series_3.90-1_amd64.tar.gz
    rm cnijfilter-mx920series_3.90-1_amd64.deb
    rm cnijfilter-mx920series_3.90-1_amd64.tar.gz

    deb2targz scangearmp-common_2.10-1_amd64.deb
    tar -xvf scangearmp-common_2.10-1_amd64.tar.gz
    rm scangearmp-common_2.10-1_amd64.deb
    rm scangearmp-common_2.10-1_amd64.tar.gz

    deb2targz scangearmp-mx920series_2.10-1_amd64.deb
    tar -xvf scangearmp-mx920series_2.10-1_amd64.tar.gz
    rm scangearmp-mx920series_2.10-1_amd64.deb
    rm scangearmp-mx920series_2.10-1_amd64.tar.gz
}
