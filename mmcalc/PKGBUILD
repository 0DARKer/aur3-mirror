# Contributor: Denis G. Samsonenko <d (dot) g (dot) samsonenko [at] gmail (dot) com>
# Contributor: Konstantin  A. Kovalenko <k (dot) a (dot) kovalenko [at] gmail (dot) com>
pkgname=mmcalc
pkgver=20120821
pkgrel=2
epoch=
pkgdesc="Molar Mass Calculator"
arch=('any')
url="http://www.ogion76.name/home/mmcalc"
license=('LGPL')
groups=()
depends=('perl>=5.8.9' 'gtk2-perl>=1.221' 'glib-perl>=1.222' 'perl-file-basedir>=0.03' 'perl-gtk2-ex-simple-list>=0.50' 'perl-locale-gettext>=1.05')
makedepends=('perl-locale-msgfmt>=0.15')
checkdepends=()
optdepends=()
provides=()
conflicts=()
replaces=()
backup=()
options=()
install=
changelog=
source=(http://www.ogion76.name/home/mmcalc/mmcalc-20120821.tar.gz http://www.ogion76.name/home/mmcalc/mmcalc.svg)
noextract=()
md5sums=('db1ba27df08df72acc752f2253590fad' 'dd0ee8da526bd503c75391b04b36c017')
build() {
  cd "$srcdir/$pkgname-$pkgver"
# Setting these env variables overwrites any command-line-options we don't want...
 export PERL_MM_USE_DEFAULT=1 PERL_AUTOINSTALL=--skipdeps \
   PERL_MM_OPT="INSTALLDIRS=vendor DESTDIR='$pkgdir'" \
   PERL_MB_OPT="--installdirs vendor --destdir '$pkgdir'" \
   PERL5LIB="" PERL_LOCAL_LIB_ROOT="" \
   MODULEBUILDRC=/dev/null
  /usr/bin/perl Build.PL || return 1
  /usr/bin/perl Build || return 1
  /usr/bin/perl Build install || return 1
# Copying icon
  install -D -m644 "$startdir/mmcalc.svg" "$pkgdir/usr/share/icons/hicolor/scalable/apps/mmcalc.svg"
# Creating .desktop file
  mkdir -p "$pkgdir/usr/share/applications/"
  cat > "$pkgdir/usr/share/applications/gmmcalc.desktop" <<EOF
[Desktop Entry]
Name=MMCalc
Comment=Molar Mass Calculator
Comment[ru_RU]=Калькулятор молярных масс
Exec=gmmcalc
Icon=/usr/share/icons/hicolor/scalable/apps/mmcalc.svg
Terminal=false
Type=Application
StartupNotify=true
Categories=Education;Science;Chemistry;
EOF
}
# check() {
#  cd "$srcdir/$pkgname-$pkgver"
# }
# package() {
#   cd "$srcdir/$pkgname-$pkgver"
#   /usr/bin/perl Build install destdir="$pkgdir/" installdirs=vendor
# }