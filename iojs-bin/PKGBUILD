# Maintainer: Josip Janzic <josip.janzic@gmail.com>
pkgname=iojs-bin
pkgver=1.1.0
pkgrel=1
pkgdesc="Bringing ES6 to the Node Community!"
arch=('i686' 'x86_64')
url="https://iojs.org/"
license=('MIT')
depends=('openssl')
optdepends=('python2: for node-gyp')
provides=('nodejs')
conflicts=('nodejs')
options=('!emptydirs')

_arch=x64
[[ $CARCH = i686 ]] && _arch=x86

source=("https://iojs.org/dist/v${pkgver}/iojs-v${pkgver}-linux-${_arch}.tar.xz")

sha256sums=('8223eefcaea3a0fb64f3817fe380f1be9a4177e1eee239f622fd761b97699ed6')
[[ $CARCH = i686 ]] && sha256sums[0]='b2a1a659d6b5c31adb99d94f630bea57248b85a2d500e34135699e8b1a6fffcf'

_extracted_arch=x64
[[ $CARCH = i686 ]] && _extracted_arch=ia32

package() {
	cd "iojs-v${pkgver}-linux-${_extracted_arch}"

	mkdir "$pkgdir/usr/"

	rm -rf ./share/systemtap
	mv ./{bin,include,lib,share} "$pkgdir/usr/"

	install -D -m644 LICENSE "$pkgdir"/usr/share/licenses/iojs/LICENSE
}
