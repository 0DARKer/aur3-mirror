# Maintainer: Bruno Adele <bruno.adele#jesuislibre.org>
pkgname=mochad
pkgver=0.1.15
pkgrel=1
pkgdesc="Linux TCP gateway daemon for the X10 CM15A RF (radio frequency) and the CM19A RF controller."
arch=('i686' 'x86_64')
_extramodules=extramodules-3.3-ARCH
url="http://sourceforge.net/projects/mochad/"
license=('GPL')
groups=()
depends=(libusb-compat)
makedepends=('gcc') #base-devel
optdepends=()
provides=()
conflicts=()
replaces=()
backup=()
options=()
install=
changelog=
source=(http://downloads.sourceforge.net/sourceforge/$pkgname/$pkgname-$pkgver.tar.gz)
noextract=()
sha256sums=('a329ddcd7e95c169e7e37f9d37bb1146da6617be2f7325e7b6ffd0314962036f')

build() {
	FIX=1
	cd "$srcdir/$pkgname-$pkgver"
	./configure
	make
}

package() {
	cd "$srcdir/$pkgname-$pkgver"

	install -d "$pkgdir/usr/bin"
	install -D mochad "$pkgdir/usr/bin/mochad"

	install -d "$pkgdir/etc/udev/rules.d"
	install -D udev/91-usb-x10-controllers.rules "$pkgdir/etc/udev/rules.d/91-usb-x10-controllers.rules"

	install -d "$pkgdir/etc/hotplug.d/usb"
	install -D hotplug2/20-usb-x10 "$pkgdir/etc/hotplug.d/usb/20-usb-x10"
	install -D hotplug2/mochad "$pkgdir/etc/rc.d/mochad"
}

