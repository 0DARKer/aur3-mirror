# Maintainer: Sergei Lebedev <superbobry@gmail.com>
pkgname=ocaml-cmdliner
pkgver=0.9.0
pkgrel=1
pkgdesc="An OCaml module for declarative definition of command line interfaces."
arch=('i686' 'x86_64')
url="http://erratique.ch/software/cmdliner"
license=('BSD')
depends=('ocaml')
makedepends=('ocaml-findlib')
source=(http://erratique.ch/software/cmdliner/releases/cmdliner-$pkgver.tbz)
md5sums=('97d98d96a989a7e4ba4bddb6135131e0')

build() {
  cd "$srcdir/cmdliner-$pkgver"
  sh build
  sh build doc
}

package() {
  cd "$srcdir/cmdliner-$pkgver"

  export OCAMLFIND_DESTDIR="$pkgdir/$(ocamlfind printconf destdir)"
  install -dm755 "$OCAMLFIND_DESTDIR"
  INSTALLDIR="${OCAMLFIND_DESTDIR}/${pkgname/ocaml-/}" sh build install

  install -dDm755 doc/ "$pkgdir/usr/share/doc/$pkgname/"
}
