--- config.default~	2008-08-29 01:02:26.000000000 +0600
+++ config.default	2009-11-04 22:25:56.514532123 +0500
@@ -6,16 +6,16 @@
 #BACKEND = allegro
 #BACKEND = gdi
 #BACKEND = sdl
-#BACKEND = mixer_sdl
+BACKEND = sdl
 #BACKEND = x11
 
 #COLOUR_DEPTH = 8
-#COLOUR_DEPTH = 16
+COLOUR_DEPTH = 16
 
 #OSTYPE = beos
 #OSTYPE = cygwin
 #OSTYPE = freebsd
-#OSTYPE = linux
+OSTYPE = linux
 #OSTYPE = mingw
 #OSTYPE = mac
 
@@ -25,7 +25,7 @@
 
 # Define these as empty strings, if you don't have allegro/sdl-config
 #ALLEGRO_CONFIG = allegro-config
-#SDL_CONFIG = sdl-config
+SDL_CONFIG = sdl-config
 
 #VERBOSE = 1
 
@@ -45,3 +45,6 @@
 # BIG_ENDIAN: MUST by set for PPC/Motorola byte order! (old mac, amiga)
 # STEPS16: 16 steps per tile - nicer on pak64
 FLAGS =  -DSTEPS16
+ifeq ($(shell uname -m),x86_64)
+  FLAGS += -DUSE_C
+endif
--- simmain.cc~	2009-10-17 02:48:22.000000000 +0600
+++ simmain.cc	2009-11-04 22:29:30.871179887 +0500
@@ -380,12 +380,8 @@
 #endif
 	}
 	else {
-		strcpy( umgebung_t::program_dir, argv[0] );
-#ifdef _WIN32
-		*(strrchr( umgebung_t::program_dir, '\\' )+1) = 0;
-#else
-		*(strrchr( umgebung_t::program_dir, '/' )+1) = 0;
-#endif
+		// data files are in /usr/share/simutrans
+		strcpy( umgebung_t::program_dir, "/usr/share/simutrans/" );
 		chdir( umgebung_t::program_dir );
 	}
 
--- simsys_d.cc~	2008-09-13 03:23:38.000000000 +0600
+++ simsys_d.cc	2009-11-04 22:32:13.644497258 +0500
@@ -308,11 +308,7 @@
 	}
 	return NULL;
 #else
-#ifndef __MACOS__
 	sprintf( buffer, "%s/simutrans", getenv("HOME") );
-#else
-	sprintf( buffer, "%s/Documents/simutrans", getenv("HOME") );
-#endif
 	int err = mkdir( buffer, S_IRWXU | S_IRWXG | S_IROTH | S_IXOTH );
 	if(err  &&  err!=EEXIST) {
 		// could not create directory
--- simsys_s.cc~	2009-09-28 03:34:22.000000000 +0600
+++ simsys_s.cc	2009-11-04 22:32:48.271160273 +0500
@@ -277,11 +277,7 @@
 	}
 	return NULL;
 #else
-#ifndef __MACOS__
-	sprintf( buffer, "%s/simutrans", getenv("HOME") );
-#else
-	sprintf( buffer, "%s/Documents/simutrans", getenv("HOME") );
-#endif
+	sprintf( buffer, "%s/.simutrans", getenv("HOME") );
 	int err = mkdir( buffer, S_IRWXU | S_IRWXG | S_IROTH | S_IXOTH );
 	if(err  &&  err!=EEXIST) {
 		// could not create directory
--- simtypes.h~	2008-12-02 01:21:00.000000000 +0500
+++ simtypes.h	2009-11-04 22:33:38.351154139 +0500
@@ -8,6 +8,13 @@
 #ifndef SIMTYPES_H
 #define SIMTYPES_H
 
+#include <endian.h>
+#undef LITTLE_ENDIAN //endian.h gives these definitions we don't want
+#undef BIG_ENDIAN
+#if __BYTE_ORDER == __BIG_ENDIAN
+	#define BIG_ENDIAN
+#endif
+
 #if defined _MSC_VER
 #	if _MSC_VER <= 1200
 #		error "Simutrans cannot be compiled with Visual C++ 6.0 or earlier."
