# Maintainer: Hugo Osvaldo Barrera <hugo@osvaldobarrera.com.ar>

pkgname=gapi-ocaml
pkgver=0.1.16
pkgrel=1
pkgdesc="A simple OCaml client for Google Services."
arch=("x86_64" "i686")
url="https://github.com/astrada/gapi-ocaml"
license=('MIT')
depends=('ocaml' 'ocaml-cryptokit' 'ocaml-curl' 'ocaml-extlib' 'ocaml-json-wheel' 'ocaml-xmlm' 'ocamlnet')
source=(git+ssh://git@github.com/astrada/$pkgname.git#tag=v$pkgver)
options=('!strip')
md5sums=('SKIP')


build() {
  cd $srcdir/$pkgname

  ocaml setup.ml -configure --prefix /usr --destdir $pkgdir --disable-tests
  ocaml setup.ml -build
}

package() {
  cd $srcdir/$pkgname
  export OCAMLFIND_DESTDIR="$pkgdir/$(ocamlfind printconf destdir)"
  install -dm755 "$OCAMLFIND_DESTDIR"

  ocaml setup.ml -install
}
