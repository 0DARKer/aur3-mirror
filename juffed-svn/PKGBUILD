pkgname=juffed-svn
pkgver=759
pkgrel=1
pkgdesc="A simple tabbed text editor with highlighting for many syntaxes, based on Qt 4."
arch=('i686' 'x86_64')
url="http://sourceforge.net/projects/juffed"
license=('GPL2')
makedepends=('cmake')
depends=('qt' 'qscintilla')
provides=('juffed')

_svntrunk="https://juffed.svn.sourceforge.net/svnroot/juffed/trunk/"
_svnmod="juffed"

build() {

cd $srcdir

cd $srcdir
if [ -d $_svnmod/.svn ]; then
   (cd $_svnmod && svn up)
else
   svn co $_svntrunk $_svnmod
fi

  msg "SVN checkout done or server timeout"
  msg "Starting make..."

  cp -r $_svnmod $_svnmod-build
  cd $_svnmod-build

cmake . -DCMAKE_INSTALL_PREFIX=/usr || return 1
make PREFIX=/usr || return 1
make DESTDIR=$startdir/pkg install || return 1

rm -r $srcdir/$_svnmod-build
}