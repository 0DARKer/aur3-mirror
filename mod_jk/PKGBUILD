# Contributor: Vitaliy Berdinskikh ur6lad[at]archlinux.org.ua

pkgname=mod_jk
pkgver=1.2.32
pkgrel=1
pkgdesc="The Apache Tomcat Connector"
arch=('i686' 'x86_64')
url="http://tomcat.apache.org/connectors-doc/"
license=('Apache')
depends=('java-environment' 'apache')
source=(http://www.eu.apache.org/dist//tomcat/tomcat-connectors/jk/tomcat-connectors-${pkgver}-src.tar.gz)

build() {
	mkdir -p $pkgdir/usr/lib/httpd/modules
	cd $srcdir/tomcat-connectors-${pkgver}-src/native/

	./configure \
		--prefix=/usr \
		--with-apxs=/usr/sbin/apxs \
		--sysconfdir=/etc \
		--enable-jni
	make
}

package() {
	cd $srcdir/tomcat-connectors-${pkgver}-src/native/

	install -m755 apache-2.0/mod_jk.so $pkgdir/usr/lib/httpd/modules
	install -m755 jni/jk_jnicb.so $pkgdir/usr/lib/httpd/modules
}

md5sums=('8d2a844fe70c849e35ae6b7a3cf4fdfd')
sha256sums=('512a5d4ae06fd6d6aa7ba6f177b7c9ba1c8297c676b3c33686c1ffacb83035b6')
