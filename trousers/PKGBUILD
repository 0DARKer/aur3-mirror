# Contributor : xav <xav at ethertricks dot net>
# Contributor : julian <pidanc_j at epita dot fr>

pkgname=trousers
pkgver=0.3.6
pkgrel=1
pkgdesc="An open-source TCG Software Stack implementation, created and released by IBM"
arch=('i686' 'x86_64')
url="http://sourceforge.net/projects/trousers"
license=('CPL')
depends=('openssl')
install=${pkgname}.install
source=(http://downloads.sourceforge.net/project/${pkgname}/${pkgname}/${pkgver}/${pkgname}-${pkgver}.tar.gz \
        trousers.install \
        dist-rules.patch \
        tcsd.rc.d)
md5sums=('f4609e6446099e1403e23bb671df87f4'
         '575f8019f5557d5ee4bc6c48bf5da09f'
         '32d68bccab48b2c73d67d82a9edb9c66'
         '9afe5041bfd3ef6420134377b12f9224')

build() {
	cd ${srcdir}
	patch -p 0 < dist-rules.patch || return 1

	cd ${srcdir}/${pkgname}-${pkgver}
	./configure --prefix=/usr --sysconfdir=/etc --libdir=/usr/lib --with-openssl=/usr || return 1
	make || return 1
	make DESTDIR=${pkgdir} install || return 1
	
	install -Dm755 ${startdir}/tcsd.rc.d ${pkgdir}/etc/rc.d/tcsd
}

