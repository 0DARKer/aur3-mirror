pkgname=cgal-ipelets
pkgver=3.8
pkgrel=2
ipever=7.1.0           # too bad no way to determine this automatically
_pkgid=28501
pkgdesc="Ipelets from CGAL"
arch=('i686' 'x86_64')
url="http://www.cgal.org"
source=(http://gforge.inria.fr/frs/download.php/$_pkgid/CGAL-$pkgver.tar.xz)
depends=('cgal' 'ipe')
makedepends=('cmake')
license=('GPL' 'QPL')
md5sums=('8e5cc81ff875920a008e9d1d1e743bde')

build() {
  cd $startdir/src/CGAL-$pkgver/demo/CGAL_ipelets
  cmake . -DWITH_IPE_7=ON
  make
  
  mkdir -p $startdir/pkg/usr/lib/ipe/$ipever/ipelets/
  cp $startdir/src/CGAL-$pkgver/demo/CGAL_ipelets/*.so $startdir/pkg/usr/lib/ipe/$ipever/ipelets/
  cp $startdir/src/CGAL-$pkgver/demo/CGAL_ipelets/lua/* $startdir/pkg/usr/lib/ipe/$ipever/ipelets/
}
