# Maintainer: Markus Opitz <mastero23 at gmail dot com>

pkgname=dbtoepub
pkgver=1.76.1
pkgrel=1
pkgdesc="DocBook to .epub converter"
arch=('i686' 'x86_64')
url="http://docbook.sourceforge.net/"
license=('unknown')
depends=('docbook-xsl=1.76.1' 'libxslt' 'ruby' 'zip')
source=(http://downloads.sourceforge.net/sourceforge/docbook/docbook-xsl-${pkgver}.tar.bz2
        dbtoepub.patch)
md5sums=('b5340507cb240cc7ce00632b9c40bff5'
         '359b15e780279fcd898662a4583585f0')

package() {
  cd "$srcdir/docbook-xsl-$pkgver/epub/"
  install -D -m 644 docbook.xsl \
    "$pkgdir/usr/share/xml/docbook/xsl-stylesheets-$pkgver/epub/docbook.xsl"
  
  cd bin
  patch -p1 < "$srcdir/dbtoepub.patch"
  install -D -m 644 lib/docbook.rb "$pkgdir/usr/lib/ruby/site_ruby/dbtoepub/docbook.rb"
  install -D -m 755 dbtoepub "$pkgdir/usr/bin/dbtoepub"
}
