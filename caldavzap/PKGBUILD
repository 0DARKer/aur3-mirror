# Maintainer: Derek Leach <mail@derek.name>

pkgname=caldavzap
pkgver=0.10.0.5
pkgrel=1
pkgdesc="A CalDav web client"
arch=('any')
url="http://www.inf-it.com/open-source/clients/caldavzap"
license=('AGPL3')
depends=('ed')
optdepends=('apache: Webserver to run CalDavZAP')
backup=('etc/webapps/caldavzap/config.js'
        'etc/webapps/caldavzap/apache.example.conf')
install=${pkgname}.install
source=("http://www.inf-it.com/CalDavZAP_${pkgver}.zip"
    'apache.example.conf'
    '.AURINFO')
md5sums=('c26e8f766489581a0a3e47b52d41be4d'
         'a8c674e7c81ced67260d2d0d0c983123'
         'c505b30ae1162efb690dcbb33eeb06a9')

package() {
    install -d ${pkgdir}/usr/share/webapps/
    cp -a ${srcdir}/${pkgname} ${pkgdir}/usr/share/webapps/

    install -d ${pkgdir}/etc/webapps/${pkgname}
    install -m 644 ${srcdir}/apache.example.conf ${pkgdir}/etc/webapps/${pkgname}

    mv ${pkgdir}/usr/share/webapps/${pkgname}/config.js ${pkgdir}/etc/webapps/${pkgname}/config.js
    ln -s /etc/webapps/${pkgname}/config.js ${pkgdir}/usr/share/webapps/${pkgname}/config.js
}
