# Maintainer: Derek Leach <mail@derek.name>

pkgname=caldavzap
pkgver=0.10.0.4
pkgrel=1
pkgdesc="A CalDav web client"
arch=('any')
url="http://www.inf-it.com/open-source/clients/caldavzap"
license=('GPL')
depends=('ed')
optdepends=('apache: Webserver to run CalDavZAP')
backup=('etc/webapps/caldavzap/config.js'
        'etc/webapps/caldavzap/apache.example.conf')
install=${pkgname}.install
source=("http://www.inf-it.com/CalDavZAP_${pkgver}.zip"
    'apache.example.conf'
    '.AURINFO')
md5sums=('b51ab66ba8c063cea5f257087a4e4591'
         'a8c674e7c81ced67260d2d0d0c983123'
         'c5a2a9637062cb6d77acd42352732087')

package() {
    install -d ${pkgdir}/usr/share/webapps/
    cp -a ${srcdir}/${pkgname} ${pkgdir}/usr/share/webapps/

    install -d ${pkgdir}/etc/webapps/${pkgname}
    install -m 644 ${srcdir}/apache.example.conf ${pkgdir}/etc/webapps/${pkgname}

    mv ${pkgdir}/usr/share/webapps/${pkgname}/config.js ${pkgdir}/etc/webapps/${pkgname}/config.js
    ln -s /etc/webapps/${pkgname}/config.js ${pkgdir}/usr/share/webapps/${pkgname}/config.js
}
