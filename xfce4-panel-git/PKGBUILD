# Contributor: Lex Black <autumn-wind at web dot de>
# Contributor: Silvio Knizek <killermoehre@gmx.net>
# Special Thanks to lh <jarryson@gmail.com> for the PKGBUILD
# Contributor: Xavier Devlamynck <magicrhesus@ouranos.be>

pkgname=xfce4-panel-git
pkgver=20121206
pkgrel=1
pkgdesc="Panel for the Xfce desktop environment"
arch=('i686' 'x86_64')
license=('GPL2')
url="http://git.xfce.org/xfce/xfce4-panel"
groups=('xfce4-git')
depends=('exo-git' 'garcon-git' 'libxfce4ui-git' 'libwnck' 'libsm' 'hicolor-icon-theme' 'desktop-file-utils')
#depends=('exo' 'garcon' 'libxfce4ui' 'libwnck' 'libsm' 'hicolor-icon-theme' 'desktop-file-utils')
optdepends=()
makedepends=('git' 'xfce4-dev-tools-git') #xfce4-dev-tools
provides=('xfce4-panel')
conflicts=('xfce4-panel')
source=()
md5sums=()

_gitname=xfce4-panel
_gitroot=git://git.xfce.org/xfce/xfce4-panel

build() {
	cd "${srcdir}"
	msg "Connecting to GIT server...."
	if [ -d ${_gitname} ] ; then
		cd ${_gitname} && git pull origin
		msg "The local files are updated."
	else
		git clone ${_gitroot} ${_gitname}
	fi

  	msg "GIT checkout done or server timeout"
  	msg "Starting make..."
	
	rm -rf "${srcdir}/${_gitname}-build"
	mkdir "${srcdir}/${_gitname}-build"
	git clone "${srcdir}/${_gitname}" "${srcdir}/${_gitname}-build"
	
	cd $srcdir/$_gitname-build

	./autogen.sh --prefix=/usr \
		--sysconfdir=/etc \
		--libexecdir=/usr/lib \
		--localstatedir=/var \
		--enable-gio-unix \
		--disable-static

	make
}

package() {
	cd $srcdir/$_gitname-build
	make DESTDIR=${pkgdir} install
}

# vim:set ts=2 sw=2 et:
