pkgname=amule-git
_realname=amule
pkgver=20101024
pkgrel=1
pkgdesc='An eMule-like client for the eD2k and Kademlia p2p networks ( Daemon Function )'
url='http://www.amule.org'
arch=('i686' 'x86_64')
license=('GPL')
backup=('etc/conf.d/amule.conf')
depends=('wxgtk' 'gd' 'binutils' 'geoip')
makedepends=('crypto++' 'git')
provides=('amule' 'amule-svn' 'amule-devel')
conflicts=('amule' 'amule-svn' 'amule-devel')
source=('amuled' 'amule.conf')
#http://amule.sourceforge.net/tarballs/aMule-SVN-r10080.tar.bz2)

_gitroot="git://repo.or.cz/amule.git"
_gitname="amule"

build() {
cd ${srcdir}

msg "Connecting to repo.or.cz GIT server...."
git clone $_gitroot $_gitname
msg "GIT checkout done or server timeout"
msg "Starting make..."
cd ${srcdir}/$_gitname

#cd ${srcdir}/aMule-SVN-r10080

./configure --prefix=/usr \
		--mandir=/usr/share/man \
		--enable-utf8-systray \
		--enable-cas \
		--enable-alc \
		--disable-debug \
		--disable-upnp \
		--enable-optimize \
		--enable-webserver \
		--enable-amule-daemon \
		--enable-geoip \
		--enable-amule-gui \
		--enable-fileview \
		--enable-amulecmd

make -j2 || return 1
make DESTDIR=${pkgdir} install || return 1
install -D -m644 ${srcdir}/amule.conf ${pkgdir}/etc/conf.d/amule.conf
install -D -m755 ${srcdir}/amuled ${pkgdir}/etc/rc.d/amuled
}
md5sums=('f710777ed5fa52e56f2c247fbeb4a281'
         '6652f53c665776faab107c6ba573ce26')
