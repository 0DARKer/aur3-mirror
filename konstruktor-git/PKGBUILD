# Contributor: Adri√É  Arrufat <swiftscythe@gmail.com>
# Contributor: Marcel Pfeiffer <pfeiffer.marcel@gmx.de>

pkgname=konstruktor-git
pkgver=20121201
pkgrel=1
pkgdesc="A LDraw-based virtual LEGO(r) CAD for KDE 4. git version"
arch=('i686' 'x86_64')
url="http://opendesktop.org/content/show.php?content=138138"
depends=('kdelibs' 'povray' 'ldraw-parts-library')
makedepends=('cmake' 'automoc4' 'git')
license=('GPL')

_gitroot="https://github.com/segfault87/Konstruktor.git"
_gitname="Konstruktor"

build() {
  if [ -d ${srcdir}/$_gitname ]; then
    (cd ${srcdir}/$_gitname && git pull origin)
  else
    git clone $_gitroot
  fi

  msg "git checkout done or server timeout"
  
  cd ${srcdir}/$_gitname
  mkdir build
  cd build
  cmake -DCMAKE_INSTALL_PREFIX='/usr' ..
  make || return 1
  make DESTDIR=$pkgdir install
}
