# Maintainer: Ciriaco Garcia de Celis <cgarcia at etherpilot.com>
pkgname=apache-qpid-cpp
pkgver=0.26
pkgrel=1
pkgdesc="apache qpid C++ broker and client"
arch=('i686' 'x86_64')
url="http://qpid.apache.org/index.html"
license=('APACHE')
makedepends=('util-linux' 'boost' 'python2' 'cmake')
depends=('boost>=1.50')
optdepends=()
source=("http://www.eu.apache.org/dist/qpid/$pkgver/qpid-cpp-$pkgver.tar.gz")
md5sums=('1b0a2359f42bb5dfbc45d78bfc4b789a')

build() {
  cd "${srcdir}/.."
  ln -fs /usr/bin/python2 python # hack to force python2 as default
  PATH="$(pwd):${PATH}"

  cd "${srcdir}/qpid-cpp-${pkgver}"
  mkdir -p BLD
  cd BLD
  cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/usr -DSYSCONF_INSTALL_DIR=/etc .. && make all
}

package() {
  cd "${srcdir}/qpid-cpp-${pkgver}/BLD"

  make DESTDIR="${pkgdir}/" install
}

# vim:set ts=2 sw=2 et:
