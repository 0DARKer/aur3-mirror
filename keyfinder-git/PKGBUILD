#Maintainer: Lubosz Sarnecki <lubosz@gmail.com> 

_realname=keyfinder
pkgname=$_realname-git
pkgver=234.3684c08
pkgrel=1
pkgdesc="KeyFinder is a tool for estimating the musical key of digital recordings, to aid DJs in harmonic mixing."
arch=('i686' 'x86_64')
url="http://www.ibrahimshaath.co.uk/keyfinder/"
license=('GPL3')
depends=('qt5-base' 'libsamplerate' 'libkeyfinder-git') 
makedepends=('git')
provides=($_realname)
conflicts=($_realname)

_gitname=is_KeyFinder

source=("git://github.com/ibsh/is_KeyFinder.git" "link-boost.diff")
sha256sums=("SKIP" "5716c5c790c2c5ce74d909413603707db45ff91aa10120829cbfa6e1b22e83ce")

pkgver() {
  cd $_gitname
  echo $(git rev-list --count master).$(git rev-parse --short master)
}

build() {
  cd $_gitname
  patch -p1 < ../../link-boost.diff
  qmake
  make
}

package() {
  cd $_gitname
  make INSTALL_ROOT="${pkgdir}" install
}
