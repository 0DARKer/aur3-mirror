#Contributer: Charles Cagle <ccagle8 at mail dot gatech dot edu>
pkgname=simplc
pkgver=2.1.1b2
pkgrel=1
pkgdesc="a multi-ISA assembly debugger with graphical and terminal frontends"
arch=('x86' 'x86_64')
url="http://sourceforge.net/projects/simplc/"
license=('BSD' 'GPL')
groups=()
depends=()
makedepends=()
optdepends=()
provides=()
conflicts=('lc3tools')
replaces=()
backup=()
options=()
install=
source=('http://sourceforge.net/projects/simplc/files/simplc-src/2.1.1b2/simp2.1.1b2.tar.gz/download'
        'common.h.patch'
        'simpl.desktop')
noextract=()
md5sums=('31c419db60576df42acba5f23a5987c5'
         '575ab7fb4e634f3b9823554bc19cc202'
         'ebe8d3a1b3c75313b18eb3bec84c43e9')

build() {
  cd "$srcdir/simpl-src"
  patch common.h "$srcdir/common.h.patch"
  echo "INSTALL=n" > .options
  ./config.sh
  make || return 1

  mkdir -p "$pkgdir/usr/bin"
  mkdir -p "$pkgdir/usr/share/doc/$pkgname"
  mkdir -p "$pkgdir/usr/share/licenses/$pkgname"
  mkdir -p "$pkgdir/usr/share/pixmaps"
  mkdir -p "$pkgdir/usr/share/applications"

  install simp lc3as gt16text gt16as "$pkgdir/usr/bin"
  install README.CS2110 README "$pkgdir/usr/share/doc/$pkgname"
  install LICENSE COPYING "$pkgdir/usr/share/licenses/$pkgname"
  install hi16-app-simpl.png "$pkgdir/usr/share/pixmaps/simplc_16.png"
  install "$srcdir/simpl.desktop" "$pkgdir/usr/share/applications"
}
