pkgname=libretro-shaders-git
pkgver=139.6ca9b28
pkgrel=1
pkgdesc="Common shaders for libretro"
arch=(any)
url=https://github.com/libretro/common-shaders
license=(unknown)
makedepends=(git nvidia-cg-toolkit python)
options=(!emptydirs)
source=(git://github.com/libretro/common-shaders.git
	https://github.com/Themaister/RetroArch/raw/master/tools/cg2glsl.py)
md5sums=(SKIP
	 07c2bc6482e4da8b44859cd1e44178a1)

pkgver() {
  cd "$srcdir/common-shaders"
  echo $(git rev-list --count master).$(git rev-parse --short master)
}

build() {
  cd "$srcdir"
  mkdir out
  python cg2glsl.py common-shaders out
}

package() {
  install -d "$pkgdir/usr/share/libretro/shaders"
  cp -r "$srcdir"/out/* "$pkgdir/usr/share/libretro/shaders/"
}

