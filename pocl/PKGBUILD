# Maintainer: fabien Cellier <fabien.cellier@@gmail.com>

_pkgname=pocl
pkgname=$_pkgname
#pkgname=$_pkgname-bzr
pkgver=0.7
pkgrel=1
pkgdesc="Portable OpenCL is an open-source implementation of OpenCL which can be easily adapted for new targets"
arch=(i686 x86_64)
url="https://launchpad.net/pocl"
license=('GPL')
groups=()
depends=('clang' 'libcl' 'hwloc' 'libltdl' 'opencl-headers')
makedepends=('clang' 'hwloc' 'libltdl')
provides=($_pkgname)
conflicts=($_pkgname)
install=
source=("http://pocl.sourceforge.net/downloads/${_pkgname}-${pkgver}.tar.gz")
md5sums=('e9293a0ce8f0dc1796bd43dc8349a27a') #generate with 'makepkg -g'?

build() {
  cd "$srcdir/${_pkgname}-${pkgver}"

  #
  # BUILD HERE
  #
  ./configure --enable-shared CC=gcc CXX=g++ --prefix=/usr
  make
}

package() {
  cd "$srcdir/${_pkgname}-${pkgver}"
  make DESTDIR="$pkgdir/" install
  rm -rf "$pkgdir/usr/include/CL"
  mv  "$pkgdir/usr/etc" "$pkgdir/etc"

}

# vim:set ts=2 sw=2 et:
