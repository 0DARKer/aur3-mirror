# Maintainer: hauzer <alokinpwn at gmail dot com>
pkgname=stendhal
pkgver=0.92
pkgrel=1
pkgdesc="A fully fledged free open source multiplayer online adventure game (MORPG) developed using the Arianne game system."
arch=('any')
url="http://stendhalgame.org/"
license=('GPL')
depends=('java-runtime')
makedepends=('unzip')
source=("http://sourceforge.net/projects/arianne/files/stendhal/${pkgver}/${pkgname}-FULL-${pkgver}.zip")
noextract=("${pkgname}-FULL-${pkgver}.zip")
md5sums=('b5d039d092b87307ef6368e2b73f40ec')

build() {
  unzip ${pkgname}-FULL-${pkgver}.zip -d ${srcdir}/${pkgname}
}

package() {
  mkdir -p ${pkgdir}/opt/${pkgname}
  cd ${pkgdir}/opt/${pkgname}
  cp -R ${srcdir}/${pkgname}/* ./
  chmod -R a+x ./

  mkdir -p ${pkgdir}/usr/bin
  cd ${pkgdir}/usr/bin
  echo \#\!\/bin\/bash>>${pkgname}
  echo \"\$JAVA_HOME\/bin\/java\" -jar \'\/opt\/${pkgname}\/${pkgname}-${pkgver}.jar\'>>${pkgname}
  chmod a+x ${pkgname}

  mkdir -p ${pkgdir}/usr/share/applications
  cd ${pkgdir}/usr/share/applications
  echo [Desktop Entry]>>${pkgname}.desktop
  echo Type=Application>>${pkgname}.desktop
  echo Version=1.0>>${pkgname}.desktop
  echo Name=Stendhal>>${pkgname}.desktop
  echo Comment=$pkgdesc>>${pkgname}.desktop
  echo Exec=stendhal>>${pkgname}.desktop
  echo Terminal=false>>${pkgname}.desktop
  echo Categories=Game\;Java\;>>${pkgname}.desktop
}
