# Maintainer: hauzer <alokinpwn@gmail.com>
# Contributer: Ghost1227 (ghost1227 at archlinux dot us)
pkgname=stendhal
pkgver=0.94
pkgrel=3
pkgdesc="A fully fledged free open source multiplayer online adventure game (MORPG) developed using the Arianne game system."
arch=('any')
url="http://stendhalgame.org/"
license=('GPL')
depends=('java-runtime')
makedepends=('unzip')
source=("http://sourceforge.net/projects/arianne/files/stendhal/${pkgver}/${pkgname}-FULL-${pkgver}.zip")
noextract=("${pkgname}-FULL-${pkgver}.zip")
md5sums=('6af91bcd9818648dfa1038770c0770d7')

build() {
  unzip "${srcdir}/${pkgname}-FULL-${pkgver}.zip" -d "${srcdir}/${pkgname}-${pkgver}"
}

package() {
  cat >> ${pkgname} <<EOF
#!/bin/bash
"\$JAVA_HOME/bin/java" -jar '/opt/${pkgname}/${pkgname}-${pkgver}.jar'
EOF

  cat >> ${pkgname}.desktop <<EOF
[Desktop Entry]
Type=Application
Version=1.0
Name=Stendhal
Comment=A fully fledged free open source multiplayer online adventure game (MORPG) developed using the Arianne game system.
Exec=${pkgname}
Terminal=false
Categories=Game;Java;
EOF

  install -D -m 644 "${srcdir}/${pkgname}-${pkgver}/README.txt" "${pkgdir}/opt/${pkgname}/README.txt"
  install -D -m 755 "${srcdir}/${pkgname}-${pkgver}/${pkgname}-${pkgver}.jar" "${pkgdir}/opt/${pkgname}/${pkgname}-${pkgver}.jar"

  install -D -m 644 "${srcdir}/${pkgname}-${pkgver}/doc/AUTHORS.txt" "${pkgdir}/opt/${pkgname}/doc/AUTHORS.txt"
  install -D -m 644 "${srcdir}/${pkgname}-${pkgver}/doc/BUGS.txt" "${pkgdir}/opt/${pkgname}/doc/BUGS.txt"
  install -D -m 644 "${srcdir}/${pkgname}-${pkgver}/doc/CHANGES.txt" "${pkgdir}/opt/${pkgname}/doc/CHANGES.txt"
  install -D -m 644 "${srcdir}/${pkgname}-${pkgver}/doc/LICENSE.txt" "${pkgdir}/opt/${pkgname}/doc/LICENSE.txt"

  install -D -m 644 "${srcdir}/${pkgname}-${pkgver}/lib/EasyMockLicense.html" "${pkgdir}/opt/${pkgname}/lib/EasyMockLicense.html"
  install -D -m 644 "${srcdir}/${pkgname}-${pkgver}/lib/jorbis.jar" "${pkgdir}/opt/${pkgname}/lib/jorbis.jar"
  install -D -m 644 "${srcdir}/${pkgname}-${pkgver}/lib/license-apache-2.0.txt" "${pkgdir}/opt/${pkgname}/lib/license-apache-2.0.txt"
  install -D -m 644 "${srcdir}/${pkgname}-${pkgver}/lib/license-bsd.txt" "${pkgdir}/opt/${pkgname}/lib/license-bsd.txt"
  install -D -m 644 "${srcdir}/${pkgname}-${pkgver}/lib/license-cpl.html" "${pkgdir}/opt/${pkgname}/lib/license-cpl.html"
  install -D -m 644 "${srcdir}/${pkgname}-${pkgver}/lib/license-gpl.txt" "${pkgdir}/opt/${pkgname}/lib/license-gpl.txt"
  install -D -m 644 "${srcdir}/${pkgname}-${pkgver}/lib/license-h2.html" "${pkgdir}/opt/${pkgname}/lib/license-h2.html"
  install -D -m 644 "${srcdir}/${pkgname}-${pkgver}/lib/license-lgpl.txt" "${pkgdir}/opt/${pkgname}/lib/license-lgpl.txt"
  install -D -m 644 "${srcdir}/${pkgname}-${pkgver}/lib/LICENSES.txt" "${pkgdir}/opt/${pkgname}/lib/LICENSES.txt"
  install -D -m 644 "${srcdir}/${pkgname}-${pkgver}/lib/log4j.jar" "${pkgdir}/opt/${pkgname}/lib/log4j.jar"
  install -D -m 644 "${srcdir}/${pkgname}-${pkgver}/lib/marauroa.jar" "${pkgdir}/opt/${pkgname}/lib/marauroa.jar"
  install -D -m 644 "${srcdir}/${pkgname}-${pkgver}/lib/NOTICE.txt" "${pkgdir}/opt/${pkgname}/lib/NOTICE.txt"
  install -D -m 644 "${srcdir}/${pkgname}-${pkgver}/lib/${pkgname}-data-${pkgver}.jar" "${pkgdir}/opt/${pkgname}/lib/${pkgname}-data-${pkgver}.jar"
  install -D -m 644 "${srcdir}/${pkgname}-${pkgver}/lib/${pkgname}-music-data-${pkgver}.jar" "${pkgdir}/opt/${pkgname}/lib/${pkgname}-music-data-${pkgver}.jar"
  install -D -m 644 "${srcdir}/${pkgname}-${pkgver}/lib/${pkgname}-sound-data-${pkgver}.jar" "${pkgdir}/opt/${pkgname}/lib/${pkgname}-sound-data-${pkgver}.jar"

  install -D -m 644 "${srcdir}/${pkgname}-${pkgver}/log/${pkgname}.txt" "${pkgdir}/opt/${pkgname}/log/${pkgname}.txt"

  install -D -m 755 "${srcdir}/${pkgname}" "${pkgdir}/usr/bin/${pkgname}"
  install -D -m 644 "${srcdir}/${pkgname}.desktop" "${pkgdir}/usr/share/applications/${pkgname}.desktop"
}
