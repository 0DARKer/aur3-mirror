# Maintainer: hauzer <alokinpwn@gmail.com>
# Contributer: Ghost1227 (ghost1227 at archlinux dot us)
pkgname=stendhal
pkgver=0.95
pkgrel=1
pkgdesc="A fully fledged free open source multiplayer online adventure game (MORPG) developed using the Arianne game system."
arch=('any')
url="http://stendhalgame.org/"
license=('GPL')
depends=('java-runtime')
makedepends=('unzip')
source=("http://sourceforge.net/projects/arianne/files/${pkgname}/${pkgver}/${pkgname}-${pkgver}.zip")
noextract=("${pkgname}-${pkgver}.zip")
md5sums=('5b0845f3e3805fbac51fb8c1b4f33558')

build() {
  unzip "${srcdir}/${pkgname}-${pkgver}.zip" -d "${srcdir}/${pkgname}-${pkgver}"
}

package() {
  cat > "${srcdir}/${pkgname}" <<EOF
#!/bin/bash
"\$JAVA_HOME/bin/java" -jar '/opt/${pkgname}/${pkgname}-starter.jar'
EOF

  cat > "${srcdir}/${pkgname}.desktop" <<EOF
[Desktop Entry]
Type=Application
Version=1.0
Name=Stendhal
Comment=A fully fledged free open source multiplayer online adventure game (MORPG) developed using the Arianne game system.
Exec=${pkgname}
Terminal=false
Categories=Game;Java;
EOF

  mkdir -p "${pkgdir}/opt/${pkgname}"
  cp -r "${srcdir}/${pkgname}-${pkgver}/"* "${pkgdir}/opt/${pkgname}/"
  install -D -m 755 "${srcdir}/${pkgname}" "${pkgdir}/usr/bin/${pkgname}"
  install -D -m 644 "${srcdir}/${pkgname}.desktop" "${pkgdir}/usr/share/applications/${pkgname}.desktop"
  chmod 755 "${pkgdir}/opt/${pkgname}/${pkgname}-starter.jar"
}
