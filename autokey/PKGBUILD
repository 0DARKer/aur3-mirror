# Maintainer: SpepS <dreamspepser at yahoo dot it>

pkgname=autokey
pkgver=0.71.1
pkgrel=2
pkgdesc="A text expansion/replacement and hotkey utility for Linux and X11."
arch=('any')
url="http://code.google.com/p/autokey/"
license=('GPL3')
depends=('python-xlib' 'wmctrl')
optdepends=('kdebindings-python: Qt gui'
            'python2-qscintilla: Qt gui'
            'pygtk: Gtk gui'
            'python-notify: Gtk gui'
            'python-configobj: Gtk gui'
            'pygobject: Gtk gui'
            'librsvg: Gtk gui')
conflicts=('autokey-gtk' 'autokey-qt')
install=('autokey.install')
source=("http://autokey.googlecode.com/files/${pkgname}_${pkgver}.tar.gz")
md5sums=('81cd30dfcd3b94fcab4a6a675caeb445')

build() {
  cd "$srcdir/build"

  # Fix for python2
  sed -i "s_\(env python\).*_\12_" `grep -rl "env python" .`
}

package() {
  cd "$srcdir/build"

  python2 setup.py install --prefix=/usr --root="$pkgdir/"

  install -Dm755 debian/autokey-common.init "$pkgdir/etc/rc.d/$pkgname"
}
