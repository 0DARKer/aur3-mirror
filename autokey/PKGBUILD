# Maintainer: SpepS <dreamspepser at yahoo dot it>

pkgname=autokey
pkgver=0.81.4
pkgrel=1
pkgdesc="A text expansion/replacement and hotkey utility for Linux and X11."
arch=('any')
url="http://code.google.com/p/autokey/"
license=('GPL3')
depends=('python-xlib' 'python-notify' 'python2-pyinotify' 'dbus-python'
         'python-simplejson' 'pygtksourceview2' 'wmctrl')
conflicts=('autokey-gtk' 'autokey-qt')
install="$pkgname.install"
source=("http://autokey.googlecode.com/files/${pkgname}_${pkgver}.tar.gz")
md5sums=('7807258d451fba7094dc59ba5f5c0147')

build() {
  return 0
}

package() {
  cd "$srcdir/$pkgname-$pkgver"

  python2 setup.py install --prefix=/usr --root="$pkgdir/"

  # init script
  install -Dm755 debian/autokey-common.init \
    "$pkgdir/etc/rc.d/$pkgname"

  # python2 fix
  sed -i "s_env python_&2_" \
    `grep -rl "env python" "$pkgdir"`
}
