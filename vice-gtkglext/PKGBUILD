# Contributor: grimi <grimi at poczta dot fm>

pkgname=vice-gtkglext
_pkgname=vice
pkgver=2.4
pkgrel=2
pkgdesc="A Versatile Commodore Emulator , with enabled gtkglext"
arch=('i686' 'x86_64')
license=('GPL')
url="http://vice-emu.sourceforge.net"
depends=('alsa-lib' 'gtkglext' 'gcc-libs' 'giflib' 'lame' 'libjpeg' 'libpng' 'libxrandr' 'vte')
makedepends=('pkg-config')
provides=("vice=$pkgver")
conflicts=('vice' 'vice-gnomeui' 'vice-sdl' 'vice-ethernet')
replaces=('vice')
install=${pkgname}.install
source=(http://downloads.sourceforge.net/project/vice-emu/releases/${_pkgname}-${pkgver}.tar.gz vice-no-fc-cache.patch)
md5sums=('b017647a0c159bbe43cdb81762d1c577'
         'c7ba8ff930bee0e41565f4a1d9594922')


build() {
  cd ${_pkgname}-${pkgver}

  patch -Np1 -i ../vice-no-fc-cache.patch

  ./configure --prefix=/usr --libdir=/usr/lib --enable-gnomeui --disable-ffmpeg

  make
}


package() {
  cd ${_pkgname}-${pkgver}

  make DESTDIR="${pkgdir}" VICEDIR=/usr/lib/vice install
}

