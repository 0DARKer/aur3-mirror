# Maintainer: Mohammed Chelouti <mhc23 at web dot de>
pkgname=knotter
pkgver=0.6.0
pkgrel=1
pkgdesc="An editor for Celtic knotworks with SVG export capabilities."
arch=('i686', 'x86_64')
url='https://sourceforge.net/projects/knotter/'
license=('GPL3')
depends=('qt>=4.8', 'qtwebkit')
source=("https://downloads.sourceforge.net/project/$pkgname/$pkgname-$pkgver.tar.gz"
        'knotter.desktop'
        'configure.sh.patch')
sha256sums=('c2d0876f929de69e565d6ff6441548930eb803526d5b0669460e616b6a167aac'
            'b84755438c79854accc29f18e2676d0568fcd09fece5d09aa1238ff28a771fe6'
            '87dfceab0fab3babb7bc2d36e6ba4793da262e53299162ad215758a0cf5ae73b')

build() {
    cd "$srcdir/$pkgname-$pkgver"
    patch --unified ./configure.sh "$srcdir/configure.sh.patch"
    ./configure.sh --prefix="$pkgdir/usr"
    make clean
    make
}

package() {
    cd "$srcdir/$pkgname-$pkgver"
    make install

    install -Dm644 "./img/icon.png" "$pkgdir/usr/share/icons/hicolor/64x64/apps/knotter.png"
    install -Dm644 "$srcdir/knotter.desktop" "$pkgdir/usr/share/applications/knotter.desktop"
}
