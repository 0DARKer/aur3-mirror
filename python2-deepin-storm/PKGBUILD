# Maintainer: Josip Ponjavic <josipponjavic at gmail dot com>

pkgname=python2-deepin-storm
_pkgname=python-deepin-storm
pkgver=git20131010172733~a82e58492b
_realver=0.1+${pkgver}
pkgrel=1
arch=('i686' 'x86_64')
url="https://github.com/linuxdeepin/deepin-storm"
license=('GPL3')
pkgdesc="Python download library for Linux Deepin."
depends=('python2' 'python2-gevent')
makedepends=('python2-setuptools' 'intltool')
source=("http://packages.linuxdeepin.com/deepin/pool/main/p/${_pkgname}/${_pkgname}_${_realver}.tar.gz")
sha256sums=('b9262b898e3535e683abf8168332688ba4dbe4f86ae77fa3b040307b53d7a449')

prepare() {
  cd $srcdir/${_pkgname}-${_realver}

  sed -i 's|^#!.*python$|#!/usr/bin/python2|' \
  {deepin_{storm,storm_for_1.0.x}/*.py,setup.py}
}

package() {
  cd $srcdir/${_pkgname}-${_realver}
  python2 setup.py install --root=$pkgdir
}
