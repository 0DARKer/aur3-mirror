#Maintainer:	Jesse	Jaara		<gmail.com: jesse.jaara>
#Contributor:	Aaron	Griffin		<archlinux.org: aaron>
#Contributor:	Tobias	Powalowski	<archlinux.org: tpowa>
#Contributor:	Thomas	BÃ¤chler		<archlinux.org: thomas>

pkgname=('lib32-udev')
pkgver=181
pkgrel=2
arch=('x86_64')
pkgdesc="The userspace dev tools (udev) (32-bit)"
url="http://www.kernel.org/pub/linux/utils/kernel/hotplug/udev.html"
license=('GPL')
options=(!makeflags !libtool)
depends=('lib32-glib2')
makedepends=('gcc-multilib' 'gperf' 'lib32-acl' 'lib32-kmod')
source=(ftp://ftp.kernel.org/pub/linux/utils/kernel/hotplug/udev-${pkgver}.tar.xz)
md5sums=('0d7af750702620a871b9f9b98d8ad859')

build() {
  export CC="gcc -m32"
  export PKG_CONFIG_PATH="/usr/lib32/pkgconfig"

  cd "${srcdir}/udev-${pkgver}"

  ./configure --prefix=/usr \
              --with-rootprefix= \
              --sysconfdir=/etc \
              --libdir=/usr/lib32 \
              --libexecdir=/lib32 \
	      --disable-introspection \
              --with-systemdsystemunitdir=/lib/systemd/system \
              --enable-udev_acl
  make
}
  
package() {
    cd "${srcdir}/udev-${pkgver}"

  make DESTDIR="${pkgdir}" install
  rm -rf "${pkgdir}"/{etc,lib32,lib,usr/{include,lib,bin,share}}
}
