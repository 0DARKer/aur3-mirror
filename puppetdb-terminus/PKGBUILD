# Puppetdb: Installer: Arch
# Maintainer: Niels Abspoel <aboe76 (at) Gmail (dot) com>

# RC style, reserved for later use
#pkgname=puppetdb-terminus
#_rc=8
#_pkgver=3.0.0
#pkgver=${_pkgver}_rc${_rc}

pkgname=puppetdb-terminus
pkgver=1.6.3
pkgrel=1
pkgdesc="Puppet data warehouse; it manages storage and retrieval of all platform-generated data"
arch=("any")
url="http://puppetlabs.com/projects/puppetdb/"
license=("APACHE")
depends=("puppetdb")
options=(emptydirs)
provides=("puppetdb-terminus")
conflicts=()
source=(http://yum.puppetlabs.com/fedora/f20/products/x86_64/puppetdb-terminus-${pkgver//_/-}-${pkgrel}.fc20.noarch.rpm)
md5sums=('1e74c6bae92eda9a605d06e3e418b565')

package () {
  puppet_libdir=`ruby -rrbconfig -e 'puts RbConfig::CONFIG["vendorlibdir"]'`
  
  # move rpm provided dirs to right place
  mkdir -p "$pkgdir$puppet_libdir" 
  cp -dpr --no-preserve=ownership "$srcdir/usr/share/ruby/vendor_ruby/puppet/" "$pkgdir$puppet_libdir"
}
