--- configure.ac_orig	2013-07-07 12:42:29.284908451 -0700
+++ configure.ac	2013-07-07 12:59:43.970008464 -0700
@@ -19,18 +19,20 @@
 AC_SEARCH_LIBS([cos], [m], [], [AC_MSG_ERROR([need math library])])
 
 AC_LANG_PUSH([C++])
-AC_CHECK_LIB(mmdb, MMDB_CCIF_Init, [dummy=yes],
-             AC_MSG_WARN([mmdb library not found.]))
-AC_CHECK_HEADER(mmdb/mmdb_manager.h, [dummy=yes],
-                AC_MSG_ERROR([mmdb headers not found.]))
+PKG_CHECK_MODULES(MMDB, mmdb >= 1.12)
+#AC_CHECK_LIB(mmdb, MMDB_CCIF_Init, [dummy=yes],
+#             AC_MSG_WARN([mmdb library not found.]))
+#AC_CHECK_HEADER(mmdb/mmdb_manager.h, [dummy=yes],
+#                AC_MSG_ERROR([mmdb headers not found.]))
 AC_LANG_POP([C++])
 
 if test "x$enable_ccp4" = "xyes"; then
-  AC_CHECK_LIB(ccp4c, ccp4_banner, :,
-               AC_MSG_WARN([ccp4c library not found.]))
-  AC_CHECK_HEADER(ccp4/ccp4_general.h, :,
-                  AC_MSG_ERROR([libccp4 headers not found.]))
+   PKG_CHECK_MODULES(CCP4, libccp4c > 6.3)
+  #AC_CHECK_LIB(ccp4c, ccp4_banner, :,
+  #             AC_MSG_WARN([ccp4c library not found.]))
+  #AC_CHECK_HEADER(ccp4/ccp4_general.h, :,
+  #                AC_MSG_ERROR([libccp4 headers not found.]))
 fi
 AM_CONDITIONAL([USE_LIBCCP4], [test "x$enable_ccp4" = "xyes"])
 
-AC_OUTPUT([Makefile])
+AC_OUTPUT([Makefile ssm.pc])
