# Maintainer: nblock <nblock [/at\] archlinux DOT us>
# Contributor: William DÃ­az <wdiaz [at] archlinux [dot] us>
# Contributor: Wolfgang Frisch <xororand@frexx.de>
# Contributor: Leandro Inacio <carvalho.inacio@gmail.com>

pkgname=vim-colorschemes
pkgver=20100218
pkgrel=3
pkgdesc="A collection of color schemes from vim.org"
url="http://www.vim.org/"
arch=('any')
conflicts=('vim-colorsamplerpack')
depends=('vim')
license=('vim' 'GPL2' 'public-domain' 'as-is')
groups=('vim-plugins')
source=(http://www.gtlib.gatech.edu/pub/gentoo/distfiles/colorschemes-${pkgver}.tar.bz2)
md5sums=('bc8cecbd7d222d1510bc6f15a9fecc6a')

build() {
  cd ${srcdir}/colorschemes-${pkgver}
  install -d ${pkgdir}/usr/share/vim/vim73/colors/

  # Patching color schemes
  patch -i ${srcdir}/colorschemes-${pkgver}/patches/kib_plastic.patch ${srcdir}/colorschemes-${pkgver}/colors/kib_plastic.vim
  patch -i ${srcdir}/colorschemes-${pkgver}/patches/lingodirector.vim.patch ${srcdir}/colorschemes-${pkgver}/colors/lingodirector.vim
  patch -i ${srcdir}/colorschemes-${pkgver}/patches/potts.patch ${srcdir}/colorschemes-${pkgver}/colors/potts.vim

  # Fixing line endings
  find . -name '*.vim' -exec sed -i -e 's,\r,\n,g' {} \;

  # Installing the schemes
  install -m644 colors/* ${pkgdir}/usr/share/vim/vim73/colors/

  # Deleting existing colors
  rm -rf ${pkgdir}/usr/share/vim/vim73/colors/{blue.vim,delek.vim,desert.vim,torte.vim}
}

# vim:set ts=2 sw=2 et:
