# Contributor: Jakub Schmidtke <sjakub-at-gmail.com>

pkgname=oki-400-pcl
pkgver=1
pkgrel=1
pkgdesc="CUPS drivers for OKI B4000, B400 and MB400 PCL printers"
arch=(any)
url="http://www.okidata.com/mkt/html/nf/Drivers.html"
license=('GPL')
depends=('cups' 'ghostscript' 'coreutils')
source=(ftp://ftp2.okidata.com/pub/drivers/linux/SFP/monochrome/desktop/OK400PCL.tar.gz)
md5sums=('5ad238e32fd10565769f9abdf6c9a468')

build() {
  cd ${srcdir}
  gunzip ok400pcl.ppd.gz || return 1

  sed -i 's|/usr/bin/cut|/bin/cut|' rastertookimonochrome
  sed -i 's|/usr/bin/tr|/bin/tr|' rastertookimonochrome

  mkdir -p ${pkgdir}/usr/lib/cups/filter
  mkdir -p ${pkgdir}/usr/share/cups/model

  install -m 755 ${srcdir}/rastertookimonochrome ${pkgdir}/usr/lib/cups/filter/rastertookimonochrome || return 1
  install -m 644 ${srcdir}/ok400pcl.ppd ${pkgdir}/usr/share/cups/model/ok400pcl.ppd || return 1
}
