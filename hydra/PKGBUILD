# Maintainer: pootzko <pootzko@gmail.com>
# Contributor: Jinx <jinxware@gmail.com>

pkgname=hydra
pkgver=5.9
pkgrel=1
pkgdesc="A very fast network logon cracker which support many different services."
arch=('i686' 'x86_64')
url="http://www.thc.org/thc-hydra/"
license="GPLv3"
depends=('openssl' 'postgresql-libs' 'subversion' 'apr' 'apr-util' 'libssh' 'flamerobin')
source=("http://freeworld.thc.org/releases/$pkgname-$pkgver-src.tar.gz")
md5sums=('7513f47b81517b80f055b996d96f2eac')


build() {
	mkdir -p $pkgdir/usr/bin

	cd $srcdir/$pkgname-$pkgver-src

	# Fixes some weird file-location stuff
	sed -i s/apr-0/apr-1/g configure
	sed -i s/aprutil-0/aprutil-1/g configure

	./configure --prefix=$pkgdir/usr || return 1

	# Adds some missing compiling options (caused by different hierarchy tree)
	sed -i s#gcc#'gcc `/usr/bin/apr-1-config --cppflags --cflags`'# Makefile
	sed -i 's#XIPATHS= -I/usr/include/subversion-1 -I/usr/include/subversion-1 -I/usr/include/mysql#XIPATHS= -I/usr/include/subversion-1 -I/usr/include/subversion-1 -I/usr/include/mysql -I/usr/include/apr-1#' Makefile	

	make || return 1
	make install || return 1
} 


