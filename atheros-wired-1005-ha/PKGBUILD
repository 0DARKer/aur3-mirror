# Contributor: Calimero <calimeroteknik at free dot fr>
pkgname=atheros-wired-1005-ha
pkgver=1.0.0.10
pkgrel=2
pkgdesc="Kernel module for the eeepc 1005HA ethernet card"
arch=('i686' 'x86_64')
url="http://partner.atheros.com/Drivers.aspx"
license=('GPL')
source=(AR81Family-linux-v1.0.0.10.tar.gz)
md5sums=('50af5b6ade80c2ac2915313913a7d7b9')

build() {
  cd "$srcdir"/src
#fix some bugs
  sed -i 's/#define IRQ_HANDLED/#define IRQ_HANDLED 1/' kcompat.h
  sed -i 's/#define IRQ_NONE/#define IRQ_NONE 1/' kcompat.h
#compile the module
  make || return 1
#install the module in the pkgdir (make install has doesn't support PREFIX, boo.)
  install -D -m 644 atl1e.ko $pkgdir/lib/modules/`uname -r`/kernel/drivers/net/atl1e/atl1e.ko || return 1
}
