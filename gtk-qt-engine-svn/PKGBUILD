# Contributor:  Dario Andres Rodriguez <andresbajotierra@gmail.com>
# Maintainer:  Scott Garrett <DevoidOfWindows@[nospam.]gmail.com>

pkgname=gtk-qt-engine-svn
pkgver=5
pkgrel=1
pkgdesc="Plugin that allows GTK applications to use Qt4/KDE4 widget styles. SVN Version"
arch=('i686' 'x86_64')
url="http://code.google.com/p/gtk-qt-engine/"
license=('GPL')
depends=('gtk2' 'qt' 'cairo')
makedepends=('subversion' 'cmake' 'pkgconfig' 'automoc4')
conflicts=('gtk-qt-engine' 'gtk-qt-engine-cvs')
provides=('gtk-qt-engine')
source=()
md5sums=()

_svntrunk='http://gtk-qt-engine.googlecode.com/svn/trunk/gtk-qt-engine/'
_svnmod=gtk-qt-engine-read-only

build() {

  cd $startdir/src

  msg "Retrieving sources from SVN"
  svn co $_svntrunk --config-dir ./ $_svnmod

  msg "SVN checkout done or server timeout"
  msg "Starting make..."

  cp -r $_svnmod $_svnmod-build
  cd $_svnmod-build

  cmake . -DCMAKE_INSTALL_PREFIX=/usr
  make || return 1
  make DESTDIR=$startdir/pkg/ install || return 1

  rm -rf $startdir/src/$_svnmod-build
}
