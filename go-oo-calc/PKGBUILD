#Contributor: Evgenij Vdovin <evdovin@pochta.ru>

[ -z "$_i18n" ] && _i18n=en-US
rm -rf ${srcdir}
rm -rf ${pkgdir}

pkgname=go-oo-calc
pkgver=3.0.0
_subver=3.0
_build=9358
pkgrel=1
pkgdesc="Enhanced version of OpenOffice.org, including OpenXML and SVG support, GStreamer and Mono integration and performance improvements. Calc package"
arch=('i686' 'x86_64')
url="http://go-oo.org/discover/"
license=('LGPL')
makedepends=('rpmextract')
depends=('go-oo-base' 'gtk2' 'fontconfig' 'libxtst' 'nss' 'libxaw' 'python')

[ "$CARCH" = "x86_64" ] && _arch=x86_64
[ "$CARCH" = "i686" ] && _arch=i586

source=(
	http://go-oo.mirrorbrain.org/stable/linux-${_arch}/${_subver}/ooobasis${_subver}-calc-$pkgver-${_build}.${_arch}.rpm
	http://go-oo.mirrorbrain.org/stable/linux-${_arch}/${_subver}/openoffice.org3-calc-$pkgver-${_build}.${_arch}.rpm

	http://go-oo.mirrorbrain.org/stable/linux-${_arch}/${_subver}/ooobasis${_subver}-${_i18n}-calc-$pkgver-${_build}.${_arch}.rpm
)
md5sums=()

build() {
	cd ${srcdir}
	for i in $(ls *.rpm); do
		echo " -> $i..."
		rpmextract.sh $i
	done

	mv ${srcdir}/opt ${pkgdir}/opt
	cd ${pkgdir}/opt || return 1
	mv openoffice.org/basis3.0 openoffice.org3/basis-link || return 1
	rmdir openoffice.org || return 1
	mv openoffice.org3 go-oo || return 1
	mkdir -p /opt/bin
	ln -s /opt/go-oo/program/scalc /opt/bin/scalc
}
