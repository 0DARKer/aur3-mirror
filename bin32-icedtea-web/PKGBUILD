# Maintainer: c0nd0r <gcesarmza@gmail.com>
pkgname=bin32-icedtea-web
pkgver=1.1.2
pkgrel=1
pkgdesc="Provides a Free Software 32-bit web browser plugin running applets written in the Java programming language and an implementation of Java Web Start, originally based on the NetX project, for Arch x86_64"
arch=('x86_64')
license=('custom')
url="http://www.java.net"
depends=('bin32-openjdk6' 'lib32-gtk2' )
source=(http://mirrors.kernel.org/archlinux/extra/os/i686/${pkgname:6}-$pkgver-$pkgrel-i686.pkg.tar.xz)

md5sums=('b1000a75ccbac5d1463422ccaf0d0621')

build() {
  cd ${startdir}/src
  mv usr $pkgdir
  cd $pkgdir/usr
  mv lib lib32
  rm -rf bin
  rm -rf lib32/mozilla
  rm -rf share
  cd lib32/jvm/java-6-openjdk/jre/bin
  rm *
  ln -s ../../bin/itweb-settings
  ln -s ../../bin/javaws
  mkdir -p $pkgdir/opt/mozilla/lib/plugins
  cd $pkgdir/opt/mozilla/lib/plugins
  ln -s ../../../../usr/lib32/jvm/java-6-openjdk/lib/IcedTeaPlugin.so 
}

