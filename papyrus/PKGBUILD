# Maintainer: Gustavo Castro <gustawho[at]gmail[dot]>
pkgname=papyrus
pkgver=1.0.0
pkgrel=1
pkgdesc="Papyrus is a kaqaz base note manager, focused on privacy and socials features."
url="http://aseman.co/en/products/papyrus/"
arch=(any)
license=('GPL3')
depends=('openssl' 'qt5-base' 'qt5-declarative' 'qt5-graphicaleffects' 'qt5-location' 'qt5-multimedia' 'qt5-quick1')
makedepends=('gcc' 'make')
source=("http://aseman.co/downloads/${pkgname}/1/${pkgname}-${pkgver}-src.tar.gz"
        'papyrus.desktop' 'papyrus-touch.desktop')
sha512sums=('55defa620d35aea833c1e16e5d4a68bd93a65d6d283187f59caf858a4564c1d6808df63dde56496cd3b72da29ce5484062cd03c6da3f97c726177262e4e22fd3'
            '80f4cc777f96315f8cb18e8233a7da0268e77d08f62de21746d36c80e5df650f22c25ae577ad9a8ef4a2a99680fb5f37816397747dd49f07151c27c82ba07ad6'
            '38e86acf387a8bc18c0f145c4f075f3dc0118ecd02ec3220b3f6e853095ddb72319e690c98c78ae3bf89a3eee9969ebdae3f9215a07d926039e01ff675ca67c3')

build() {
   cd "${srcdir}/Papyrus"
   mkdir build && cd build
   qmake -r ..
   make
   make clean
   rm Makefile
}

package() {
  cd "${srcdir}/Papyrus/build"
  mkdir -p "${pkgdir}/usr/bin" "${pkgdir}/usr/share/applications"
  mkdir -p "${pkgdir}/usr/share/${pkgname}" "${pkgdir}/usr/share/${pkgname}/fonts" "${pkgdir}/usr/share/${pkgname}/files/translations"
  install -m755 Papyrus "${pkgdir}/usr/share/${pkgname}/${pkgname}"
  install -m644 files/translations/* "${pkgdir}/usr/share/${pkgname}/files/translations"
  install -m644 fonts/* "${pkgdir}/usr/share/${pkgname}/fonts"
  install -m644 "${srcdir}/papyrus.desktop" "${pkgdir}/usr/share/applications"
  install -m644 "${srcdir}/papyrus-touch.desktop" "${pkgdir}/usr/share/applications"
  cp -r files/icons "${pkgdir}/usr/share/${pkgname}"
#  chmod -R 644 "${pkgdir}/usr/share/${pkgname}/icons"
  install -m644 ../files/icons/papyrus.* "${pkgdir}/usr/share/${pkgname}/icons"
  ln -s "/usr/share/${pkgname}/${pkgname}" "${pkgdir}/usr/bin/${pkgname}" 
}
