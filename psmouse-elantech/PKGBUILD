# Maintainer: Christian Hesse <mail@eworm.de>

pkgname=psmouse-elantech
pkgver=v6
pkgrel=4
_kernver=`pacman -Q linux | cut -d . -f 2 | cut -f 1 -d -`
pkgdesc="psmouse kernel module with support for elantech with multitouch"
url="http://bugs.edge.launchpad.net/ubuntu/+source/xserver-xorg-video-intel/+bug/681904"
license=("GPL")
depends=("linux>=3.${_kernver}" "linux<3.`expr ${_kernver} + 1`")
makedepends=('linux-headers')
arch=('i686' 'x86_64')
install=psmouse-elantech.install
source=(http://planet76.com/drivers/elantech/psmouse-elantech-${pkgver}.tar.bz2)

build() {
	cd ${srcdir}/${pkgname}-${pkgver}/src
  
	make -C /usr/src/linux-`uname -r`/ M=`pwd` psmouse.ko
	gzip -9 psmouse.ko
	install -D -m 0644 psmouse.ko.gz ${pkgdir}/lib/modules/`uname -r`/updates/drivers/input/mouse/psmouse.ko.gz
}

md5sums=('da111930bc3f1e21a7c63c927df67c97')
