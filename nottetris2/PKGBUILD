# Maintainer: Wido <widomaker2k7 [at] gmail [dot] com>

pkgname=nottetris2
pkgver=1
pkgrel=3
pkgdesc="Basically it's a little like tetris except with a twist."
arch=('any')
url="http://stabyourself.net/nottetris2/"
license=('CUSTOM: Freeware')
depends=('love')
makedepends=('unzip')
source=(${pkgname}.sh ${pkgname}.desktop)
_gamepkg="${pkgname}-linux.zip"

md5sums=('9083928b68efb15eaa72475abf9dafbe'
         '1b04f1d2edc1bbaafd3ebb350ff57895')

build(){
  cd $srcdir
  msg "You need a full copy of this game in order to install it"
  msg "Searching for \"${_gamepkg}\" in dir: $(readlink -f `pwd`/..)"
    pkgpath=$startdir
    if [[ ! -f "$startdir/${_gamepkg}" ]]; then
       error "Game package not found, please type absolute path to ${_gamepkg} (/home/joe):"
       read pkgpath
       if [[ ! -f "${pkgpath}/${_gamepkg}" ]]; then
           error "Unable to find game package." && return 1
       fi
    fi
  msg "Found game package, installing..."

  ln -fs ${pkgpath}/${_gamepkg} . || return 1
  unzip ${srcdir}/${_gamepkg} -d  $srcdir/${pkgname} || return 1

}
package() {
    cd $srcdir

    # Install Data
    install -D -m755 "${srcdir}/${pkgname}/Not Tetris 2.love" "${pkgdir}/usr/share/games/${pkgname}/${pkgname}.love"
    install -D -m644 "${srcdir}/${pkgname}/Not Readme.txt" "$pkgdir/usr/share/games/${pkgname}/readme"

    # Install Launcher
    install -D -m755 "${srcdir}/${pkgname}.sh" "${pkgdir}/usr/bin/${pkgname}"

    # Install Desktop
    install -D -m644 "${srcdir}/${pkgname}.desktop" \
        "${pkgdir}/usr/share/applications/${pkgname}.desktop"

}
# vim:set ts=2 sw=2 et:
