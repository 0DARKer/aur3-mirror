# Maintainer: Joe Davison <joedavison.davison@gmail.com>

pkgname=lgogdownloader
pkgver=1.0
pkgrel=1

source=(http://sites.google.com/site/gogdownloader/lgogdownloader-1.0.tar.gz)
md5sums=('6e576e0f451b907140e847a92dc4b658')

pkgdesc="LGOGDownloader is open source downloader to GOG.com for Linux users using the same API as the official GOGDownloader"
url="http://www.gog.com/en/forum/general/lgogdownloader_gogdownloader_for_linux"
arch=(i686 x86_64)
license=(WTFPL)

depends=(boost jsoncpp-fixed liboauth rhash tinyxml htmlcxx curl)


build() {
  cd "$srcdir/$pkgname-$pkgver"
    
    # fix Arch-specific include error
	# we're gonna backup api.h first just in case something explodes

    mv include/api.h include/api.h.bak
    sed '/jsoncpp/ c\\#include \<jsoncpp\/json.h\>' include/api.h.bak > include/api.h
    make release

}

package() {
	mkdir $pkgdir/bin

	# for some reason we're not in kansas anymore
  	mv $srcdir/$pkgname-$pkgver/bin/Release/$pkgname $pkgdir/bin
}
