# Maintainer: Joe Davison <joedavison.davison@gmail.com>

pkgname=lgogdownloader
pkgver=1.4
pkgrel=1
source=(http://sites.google.com/site/gogdownloader/$pkgname-$pkgver.tar.gz)
md5sums=('39b979e7e6c9c4c0be0ebf77e72a0500')
pkgdesc="An open source downloader for GOG.com games, uses the GOG.com API"
url="http://www.gog.com/en/forum/general/lgogdownloader_gogdownloader_for_linux"
arch=(i686 x86_64)
license=(WTFPL)
depends=(boost jsoncpp-fixed liboauth rhash tinyxml htmlcxx curl)

build() {
	cd "$srcdir/$pkgname-$pkgver"

	# fix Arch-specific include error
	# we're gonna backup api.h first just in case something explodes
	mv include/api.h include/api.h.bak
	sed '/jsoncpp/ c\\#include \<jsoncpp\/json.h\>' include/api.h.bak > include/api.h

	make release

}

package() {
	install -D -m 755 $srcdir/$pkgname-$pkgver/bin/Release/$pkgname \
		$pkgdir/usr/bin/lgogdownloader
}
