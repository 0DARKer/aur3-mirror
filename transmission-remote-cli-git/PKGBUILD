# Maintainer: fauno <fauno@kiwwwi.com.ar>
pkgname=transmission-remote-cli-git
pkgver=20110311
pkgrel=1
pkgdesc="Curses interface for the daemon of the BitTorrent client Transmission"
arch=('i686' 'x86_64')
url="http://github.com/fagga/transmission-remote-cli"
license=('GPL3')
depends=('python2' 'transmission-cli')
optdepends=('adns-python: Resolve IPs to host names'
            'python-geoip: Guess which country peers come from')
makedepends=('git')
provides=('transmission-remote-cli')
conflicts=('transmission-remote-cli')
install=
source=(python2.patch)

_gitroot="http://github.com/fagga/transmission-remote-cli.git"
_gitname="transmission-remote-cli"

build() {
    cd "$srcdir"
    msg "Connecting to the GIT repository..."

    if [ -d "$srcdir/$_gitname" ] ; then
        cd $_gitname && git pull origin
        msg "The local files are updated."
    else
        git clone $_gitroot
    fi

  rm -rf "$srcdir/$_gitname-build"
  git clone "$srcdir/$_gitname" "$srcdir/$_gitname-build"
  cd "$srcdir/$_gitname-build"

    msg "GIT checkout done or server timeout"
    msg "Starting make..."

    cd $srcdir/$_gitname-build

    patch -Np1 -i ${srcdir}/python2.patch

	install -d $pkgdir/usr/bin/
	install -D transmission-remote-cli.py $pkgdir/usr/bin/transmission-remote-cli

}

md5sums=('6273609fb3a7294328aeaa526b76411c')
