# Contributor: Cooper Hubbell <cooper814 at gmail dot com>

pkgname=hpt-cli
_realname=CLI-Linux
pkgver=3.3
pkgrel=090625
pkgdesc="CLI for HighPoint RocketRaid 3xxx/4xxx RAID Controllers"
arch=('x86_64')
url="http://www.highpoint-tech.com"
license=('custom')
depends=('rpmextract')
provides=('hpt-cli')
conflicts=('hpt-cli')
install=hpt-cli.install
source=(http://www.support-highpoint-tech.com/Main/HRM/Linux/$_realname-$pkgver-$pkgrel.tar.gz
	# Execution script for the RAID management daemon, not provided by HighPoint
	hptsvr)
md5sums=('c29d67c49bb624ade465ffb8681808d4'
         '3e997a7fedc8262d325caa65105c98ef')

build() {

mkdir -p "$pkgdir/"etc/rc.d/
mkdir -p "$pkgdir/"usr/share/doc/hpt/hptraidconf-"$pkgver/"
mkdir -p "$pkgdir/"usr/share/man/man1/
mkdir -p "$pkgdir/"usr/share/hpt/hptsvr-3.13.5/
mkdir "$pkgdir/"usr/bin/

cd "$srcdir/$_realname-$pkgver-$pkgrel/"rpm/
rpmextract.sh "$srcdir/$_realname-$pkgver-$pkgrel/"rpm/hptraidconf-"$pkgver"-1."$arch".rpm
rpmextract.sh "$srcdir/$_realname-$pkgver-$pkgrel/"rpm/hptsvr-3.13-5."$arch".rpm

install -m 755 "$srcdir/$_realname-$pkgver-$pkgrel/"rpm/usr/bin/* "$pkgdir/"usr/bin
install -m 755 "$srcdir/$_realname-$pkgver-$pkgrel/"rpm/usr/share/hpt/hptsvr-3.13.5/* "$pkgdir/"usr/share/hpt/hptsvr-3.13.5
install -m 755 "$srcdir/$_realname-$pkgver-$pkgrel/"rpm/usr/share/doc/hpt/hptraidconf-"$pkgver/"* "$pkgdir/"usr/share/doc/hpt/hptraidconf-"$pkgver"
install -m 755 "$srcdir/$_realname-$pkgver-$pkgrel/"rpm/usr/share/man/man1/* "$pkgdir/"usr/share/man/man1
install -m 755 "$srcdir/"hptsvr "$pkgdir/"etc/rc.d/

}
