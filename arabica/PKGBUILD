# Contributor: Andreas Baumann <abaumann at yahoo dot com>

pkgname=arabica
pkgver=2012_November
pkgrel=3
pkgdesc="An XML and HTML Processing Toolkit"
arch=('i686' 'x86_64')
url="http://www.jezuk.co.uk/cgi-bin/view/arabica"
license=('GPL')
depends=('expat')
makedepends=('xerces-c' 'libxml2' 'libxslt' 'boost')
source=(http://sourceforge.net/projects/arabica/files/arabica/November-12/arabica-2012-November.tar.bz2/download)
md5sums=('5fd3a9e68fce87f3efa742e7061f6fa5')
options=('!libtool')

package() {
  cd ${srcdir}/${pkgname}-${pkgver/_/-}

  make install DESTDIR=$pkgdir
}

build() {
  cd ${srcdir}/${pkgname}-${pkgver/_/-}

  patch -Np1 -i $srcdir/arabica-2010-November-this-ptr.patch || return 1

  # remove hardcoded rpath
  sed -i "s|\${wl}-rpath[^']*||g" configure m4/libtool.m4

  ./configure \
    --prefix=/usr

  make
}
