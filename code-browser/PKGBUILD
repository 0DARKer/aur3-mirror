# Contributor: Arto Puranen <purcher@gmail.com>

pkgname=code-browser
pkgver=3.17
pkgrel=1
pkgdesc="Code Browser is a folding text editor, designed to hierarchically structure any kind of text file and especially source code."
arch=(i686 x86_64)
url="http://code-browser.sourceforge.net/index.html"
license=('GPL')
depends=(gtk2)
options=('!makeflags')
source=(http://tibleiz.net/download/code-browser-${pkgver}-src.tar.gz
        code-browser.desktop
        cb.png)

build() {
  cd "$srcdir/$pkgname-$pkgver"

  sed -i 's|/local||' Makefile || return 1
  sed -i '/INSTALL/ s|\$(bindir)|\${pkgdir}&|' Makefile || return 1
  #sed -i '/INSTALL/ s|\$(CONFIGDIR)|\${pkgdir}/usr/share/&|' Makefile || return 1
  install -dm755 ${pkgdir}/usr/bin/ || return 1
  make || return 1
  make DESTDIR=${pkgdir} install || return 1

  install -D -m 644 ../code-browser.desktop ${pkgdir}/usr/share/applications/code-browser.desktop || return 1
  install -D -m 644 ../cb.png ${pkgdir}/usr/share/icons/hicolor/32x32/apps/cb.png || return 1
}

# vim:set ts=2 sw=2 et:
md5sums=('502d164977fddc54e9faf845d6371a64'
         '05b38d1b5cd303042aaaf50714655d83'
         '153dab5bcff69701d74ee911d80d6f83')
