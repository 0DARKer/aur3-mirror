# Maintainer: Mike Shutlar (iFSS) <mike at epinux(dot)co(dot)uk>
pkgname=pakkumans-defense
_gamepkg=pd_linux.bz2
pkgver=1
pkgrel=1
pkgdesc="Pacman with tower defense elements. Eat dots and use them to build defenses against the ghosts."
url="http://www.indiebuskers.net/"
arch=('x86_64' 'i686')
license=('unknown')
depends=('hicolor-icon-theme' 'gtk2' 'libxft' 'nss')
if [[ "${CARCH}" == "x86_64" ]]; then
  depends=('hicolor-icon-theme' 'lib32-gtk2' 'lib32-libxt' 'lib32-nss' 'lib32-curl' 'lib32-alsa-lib')
fi
source=("pakkumans-defense.desktop" "pakkumans-defense.sh")
options=(!strip)

sha512sums=('b5f805ea9ab191097fa3fbd0f1d93fedf7c3ab318ec3a50a020a6bb4f3146691fc3b449bddf2501a9fdc10d8c0f35d8fcff1cdb4cb66877ee48a0d6ca09a197a'
            '71c53b17d199aa5385229bc6c026cdb1c79774c5853072829b172c0d0101dbced407f8441821e31719411a7484eb49af91f51816d5ef87ac554fd8287999078b')
sha384sums=('15ff9d186d5211591521cd59ef080c48d9b423ff79f29a9365afba2a7c6acd423fcfeac7e7562ec62ebff98d72295651'
            'a748326c56667450881b27a9672611aecf401224a2b1778c69a51d329df54b1e6b994e0751abc8af71605e87531c1231')
sha256sums=('5fb2eb9b3826efffdac9333740a6a788a98f2ec492a389759a77f9cfa98eaa6e'
            '2fd37df5dded4ed9fbb7268fa9745681a38b77f284b684efddc5a340037c30eb')
sha1sums=('09e4276fbb5b3847d1299e0ebe3786be08b01055'
          '1d56e52630fdc7b77df13d571bca4085a38299b4')
md5sums=('a77a23ea690e8132e3fc1faffd5bd6d7'
         '7dd4dbb1f2dab3cf36a7a4b179de7ba1')

package() {
  msg "You need a full copy of this game in order to install it"
  msg "Searching for ${_gamepkg} in dir: \"$startdir\""
  pkgpath=$startdir
  if [[ ! -f "$startdir/${_gamepkg}" ]]; then
    error "Game package not found, please type absolute path to ${_gamepkg} (/home/joe):"
    read pkgpath
    if [[ ! -f "${pkgpath}/${_gamepkg}" ]]; then
      error "Unable to find game package." && return 1
    fi
  fi
  msg "Found game package, installing..."

  ln -fs "${pkgpath}/${_gamepkg}" . || return 1
  bunzip2 -k "${pkgpath}/${_gamepkg}" || return 1

  cd "${srcdir}"
  install -D -m755 pakkumans-defense.sh "${pkgdir}/usr/bin/${pkgname}"
  install -d "${pkgdir}/usr/share/games/${pkgname}"
  install -D -m755 "${pkgpath}/pd_linux" "${pkgdir}/usr/share/games/${pkgname}/pd_linux"
  install -D -m644 pakkumans-defense.desktop "${pkgdir}/usr/share/applications/pakkumans-defense.desktop"
}
  
# vim:set ts=2 sw=2