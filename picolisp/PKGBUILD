# Maintainer:  perlawk
pkgname=picolisp
_pkgname=picoLisp
pkgver=3.0.8
pkgrel=2 
pkgdesc='If some programming languages claim to be th"Swiss Army Knife of Programming", then PicoLisp may well be called the "Scalpel of Programming": Sharp, accurate, small and lightweight, but also dangerous in the hand of the inexperienced.'
url="http://picolisp.com/5000/!wiki?home"
arch=('i686' 'x86_64')
license=('GPL')
depends=()
makedepends=()
conflicts=()
replaces=()
backup=()
install=picolisp.install
source=('http://www.software-lab.de/picoLisp-3.0.8.tgz' 'http://software-lab.de/x86-64.linux.tgz')
md5sums=('c8143d0ed9ae35ad93c11f1f79593f77' '2b34b4b2c6f03c24783049503f7647f0') 

build() {
	pl=picolisp
	dstdir=$pkgdir/opt/$pl
	mkdir -p $dstdir
	if [[ `arch` == "x86_64" ]]; then
		cd $startdir/src/${_pkgname}/src64
		cp $srcdir/src64/*.s .
		common
		cp -a src $dstdir
		cd src64; make clean 
		cd ..; cp -a src64 $dstdir
	else
		cd $startdir/src/${_pkgname}/src
		common
		cd src; make clean
		cd ..; cp -a src $dstdir
	fi
}	

common() {
		make || return 1
		cd ..
		cp -a app bin doc doc64 games simul misc loc img dbg* lib* ext* $dstdir
}
