# Maintainer: Andrej Gelenberg <andrej.gelenberg@udo.edu>

pkgname=dash-git
pkgver=$(date +%Y.%m.%d.%H.%M)
pkgrel=1
pkgdesc="A POSIX compliant shell that aims to be as small as possible"
arch=('i686' 'x86_64')
url="http://gondor.apana.org.au/~herbert/dash/"
license=('BSD')
groups=('base')
depends=('glibc')
makedepends=('git')
conflicts=('dash')
provides=('dash')
_gitroot="git://git.kernel.org/pub/scm/utils/dash/dash.git"

build() {
  cd "$srcdir"
  if [ -e dash ]
  then
     cd dash
     git reset --hard
     git clean -f
     git pull
  else
     git clone "$_gitroot" dash
     cd dash
  fi

  autoreconf -is
  ./configure --prefix=/usr --mandir=/usr/share/man --exec-prefix=""
  make
}

package() {
  cd "$srcdir/dash"
  make DESTDIR="$pkgdir" install

  # license
  install -m644 -D COPYING "$pkgdir/usr/share/licenses/$pkgname/COPYING"
}
