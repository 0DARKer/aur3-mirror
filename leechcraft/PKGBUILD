# Maintainer: archtux <antonio.arias99999 at gmail.com>

pkgname=leechcraft
pkgver=0.4.97
pkgrel=1
pkgdesc="Opensource network client providing a full-featured web browser, BitTorrent client and much more."
arch=('i686' 'x86_64')
url="http://leechcraft.org"
license='GPL3'
depends=('curl' 'libtorrent-rasterbar>=0.15.0' 'phonon' 'qca' 'qca-gnupg' 'qjson' 'qross' 'qscintilla' 'qt>=4.6' 'qxmpp-leechcraft-git')
makedepends=('boost' 'cmake')
source=(http://downloads.sourceforge.net/$pkgname/$pkgname-$pkgver.tar.xz)
md5sums='eab05924d71535c054e38ce0cb6bb196'
install=$pkgname.install

build() {
  cd $srcdir/$pkgname-$pkgver/src

  cmake -DLEECHCRAFT_VERSION="$pkgver" \
        -DCMAKE_INSTALL_PREFIX=/usr \
        -DCMAKE_BUILD_TYPE=RelWithDebInfo \
        -DENABLE_PYLC:BOOL=False \
  	-DENABLE_AZOTH=TRUE \
  	-DENABLE_SECMAN=TRUE \
  	-DENABLE_LACKMAN=TRUE \
  	-DENABLE_POPISHU=TRUE \
  	-DENABLE_GMAILNOTIFIER=TRUE \
  	-DENABLE_ADVANCEDNOTIFICATIONS=TRUE \
  	-DENABLE_QROSP=TRUE \
  	-DENABLE_SYNCER=TRUE \
  	-DENABLE_OTZERKALU=TRUE \
  	-DENABLE_GLANCE=TRUE \
  	-DENABLE_TABSLIST=TRUE \
  	-DENABLE_EISKALTDCPP=TRUE

  make DESTDIR=$pkgdir install

  # Delete garbage
  rm -rf $pkgdir/usr/include
}