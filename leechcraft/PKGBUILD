pkgname=leechcraft
pkgver=0.4.85
_pkgver=0.4.85
pkgrel=1
pkgdesc="Opensource network client providing a full-featured web browser, BitTorrent client and much more."
arch=(i686 x86_64)
url="http://leechcraft.org"
license=('GPL3')
depends=('qt>=4.6' 'libtorrent-rasterbar>=0.15.0' 'phonon' 'qross' 'qjson' 'qscintilla' 'qxmpp-leechcraft-git' 'qca' 'qca-gnupg' 'curl')
makedepends=('gcc' 'make' 'cmake' 'git' 'boost')
source=(http://downloads.sourceforge.net/$pkgname/$pkgname-$_pkgver.tar.bz2)
install=$pkgname.install

build() {
  cd "$srcdir"

  rm -rf $pkgname-$_pkgver-build
  mkdir  $pkgname-$_pkgver-build
  cd     $pkgname-$_pkgver-build

  cmake $srcdir/$pkgname-$_pkgver/src \
        -DLEECHCRAFT_VERSION="$_pkgver" \
        -DCMAKE_INSTALL_PREFIX=/usr \
        -DCMAKE_BUILD_TYPE=RelWithDebInfo \
        -DENABLE_PYLC:BOOL=False \
  	-DENABLE_AZOTH=TRUE \
  	-DENABLE_SECMAN=TRUE \
  	-DENABLE_LACKMAN=TRUE \
  	-DENABLE_POPISHU=TRUE \
  	-DENABLE_GMAILNOTIFIER=TRUE \
  	-DENABLE_ADVANCEDNOTIFICATIONS=TRUE \
  	-DENABLE_QROSP=TRUE \
  	-DENABLE_SYNCER=TRUE \
#  	-DENABLE_POTORCHU=TRUE \
#  	-DENABLE_TRANSPARENTARCH=TRUE \
#  	-DENABLE_JUFFED=TRUE \
  	-DENABLE_OTZERKALU=TRUE \
  	-DENABLE_GLANCE=TRUE \
  	-DENABLE_TABSLIST=TRUE \
	-DENABLE_EISKALTDCPP=TRUE \

  make DESTDIR=$pkgdir install

  install -Dm 644 $srcdir/$pkgname-$_pkgver/src/resources/images/leechcraft.svg \
              $pkgdir/usr/share/pixmaps/leechcraft.svg


  install -Dm 644 $srcdir/$pkgname-$_pkgver/src/freedesktop/leechcraft.desktop \
              $pkgdir/usr/share/applications/leechcraft.desktop
}
md5sums=('0e7664593174ec6268b8442769698d76')
