# Contributor: Drew Desai <alerante@yahoo.com>
# Maintainer: Stefan Husmann <stefan-husmann@t-online.de>

pkgname=io-git
pkgver=20091008
pkgrel=1
pkgdesc="A small prototype-based programming language"
url="http://www.iolanguage.com"
license=('custom:BSD')
arch=('i686' 'x86_64')
makedepends=('git')
options=('!strip')
_gitroot='git://github.com/stevedekorte/io.git'
_gitname='io'
source=()
md5sums=()

build(){
	cd $srcdir
	msg "Connecting to github GIT server..."
	if [ -d $srcdir/$_gitname ] ; then
           cd $_gitname && git pull origin
           msg "The local files are updated."
    	else
		git clone $_gitroot
        	cd $_gitname
    	fi
	[ -d $srcdir/$_gitname-build ] && rm -r $srcdir/$_gitname-build
	cp -r $srcdir/io $srcdir/io-build
	cd $srcdir/io-build
	install -d $pkgdir/usr/{bin,lib,include}
	make INSTALL_PREFIX=$pkgdir/usr || return 1
	make INSTALL_PREFIX=$pkgdir/usr install || return 1
	install -Dm644 $srcdir/io/license/bsd_license.txt \
	  $pkgdir/usr/share/licenses/io-git/bsd_license.txt || return 1
}
