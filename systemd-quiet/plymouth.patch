From 6faa11140bf776cdaeb8d22d01816e6e48296971 Mon Sep 17 00:00:00 2001
From: Lennart Poettering <lennart@poettering.net>
Date: Wed, 30 Mar 2011 00:21:48 +0000
Subject: status: show status messages unconditionally if plymouth is around

---
diff --git a/src/main.c b/src/main.c
index 176a4f5..b43d8ec 100644
--- a/src/main.c
+++ b/src/main.c
@@ -1177,7 +1177,7 @@ int main(int argc, char *argv[]) {
         if (arg_running_as == MANAGER_SYSTEM && !serialization) {
                 locale_setup();
 
-                if (arg_show_status)
+                if (arg_show_status || plymouth_running())
                         status_welcome();
 
                 kmod_setup();
diff --git a/src/unit.c b/src/unit.c
index a2953a6..b684649 100644
--- a/src/unit.c
+++ b/src/unit.c
@@ -2254,7 +2254,10 @@ void unit_status_printf(Unit *u, const char *format, ...) {
         if (u->meta.manager->running_as != MANAGER_SYSTEM)
                 return;
 
-        if (!u->meta.manager->show_status)
+        /* If Plymouth is running make sure we show the status, so
+         * that there's something nice to see when people press Esc */
+
+        if (!u->meta.manager->show_status && !plymouth_running())
                 return;
 
         if (!manager_is_booting_or_shutting_down(u->meta.manager))
--
cgit v0.9.0.2-2-gbebe
