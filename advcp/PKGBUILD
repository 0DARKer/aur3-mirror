# Progress-bar for "cp" unility (by using option -g)

pkgname=advcp
pkgver=0.3
coreutilsver=8.4
pkgrel=1
pkgdesc='Progress-bar for "cp" unility (by using option -g)'
arch=('i686')
url='http://beatex.org/web/advcopy/'
license=('GPL')
makedepends=('patch')

source=("http://ftp.gnu.org/gnu/coreutils/coreutils-${coreutilsver}.tar.gz" "http://beatex.org/web/advcopy/advcpmv-${pkgver}-${coreutilsver}.patch")
md5sums=('56f549854d723d9dcebb77919019df55' '63e24f6c058dca0a750850273ba68f32')

build()
{
  cd coreutils-${coreutilsver}/
  cp ../advcpmv-${pkgver}-${coreutilsver}.patch ./

  msg "Patching..."
  patch -p1 -i advcpmv-${pkgver}-${coreutilsver}.patch

  msg "Starting make..."
  ./configure || return 1
  make || return 1

  DESTDIR="$pkgdir/usr/bin"
  mkdir -p "$DESTDIR"
  cp src/cp "$DESTDIR"
}

package()
{
    msg ""
    msg "To copy files with progressbar use '-g' option"
    msg "e.g. cp -g /path/to/file /another/path"
    msg "The new 'cp' utility has been installed into /usr/bin"
    msg "so make sure that '/usr/bin' is before '/bin' in"
    msg "you \$PATH variable"
    msg "e.g. PATH=/usr/local/bin:/usr/bin:/bin..."
    msg ""
}
