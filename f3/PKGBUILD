# Maintainer:   Lucky <archlinux@builds.lucky.li>
# Contributor:  OldShatterhand <OldShatterhand at gmx-topmail dot de>
# Author:       Michel Machado <michel at digirati dot com dot br>

pkgname=f3
pkgver=4.0
pkgrel=1
pkgdesc="Integrity test for data media, especially for recognising USB sticks and SD cards that have been tampered with. An alternative to h2testw"
url="http://oss.digirati.com.br/f3/"
license=("GPL3")
arch=("i686" "x86_64")
install=${pkgname}.install
source=("https://github.com/AltraMayor/${pkgname}/archive/v${pkgver}.tar.gz")
md5sums=("a9f7b302559beeb2f1f620c1e8abd4b6")
sha1sums=("0ee2c6fbfdccd9db5b8f2b6e6ea90d2d2c1ee2b4")

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"

  make
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"

  install -Dm755 "f3write"      "${pkgdir}/usr/bin/f3write"
  install -Dm755 "f3read"       "${pkgdir}/usr/bin/f3read"

  install -Dm755 "f3write.h2w"  "${pkgdir}/usr/bin/f3write.h2w"
  install -Dm755 "log-f3wr"     "${pkgdir}/usr/bin/log-f3wr"

  install -Dm644 "LICENSE"  "${pkgdir}/usr/share/licenses/${_pkgname}/LICENSE"
  install -Dm644 "f3read.1" "${pkgdir}/usr/share/man/man1/f3read.1"
}
