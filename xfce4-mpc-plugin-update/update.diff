Only in xfce4-mpc-plugin-0.3.5: Makefile
Only in xfce4-mpc-plugin-0.3.5: config.h
Only in xfce4-mpc-plugin-0.3.5: config.log
Only in xfce4-mpc-plugin-0.3.5: config.status
Only in xfce4-mpc-plugin-0.3.5/panel-plugin: .deps
Only in xfce4-mpc-plugin-0.3.5/panel-plugin: Makefile
Only in xfce4-mpc-plugin-0.3.5/panel-plugin: xfce4-mpc-plugin
diff -ru xfce4-mpc-plugin-0.3.5.orig/panel-plugin/xfce4-mpc-plugin.c xfce4-mpc-plugin-0.3.5/panel-plugin/xfce4-mpc-plugin.c
--- xfce4-mpc-plugin-0.3.5.orig/panel-plugin/xfce4-mpc-plugin.c	2010-05-16 06:18:41.000000000 -0400
+++ xfce4-mpc-plugin-0.3.5/panel-plugin/xfce4-mpc-plugin.c	2010-09-18 13:46:35.000000000 -0400
@@ -31,6 +31,7 @@
 #define DEFAULT_MPD_HOST "localhost"
 #define DEFAULT_MPD_PORT 6600
 #define DIALOG_ENTRY_WIDTH 20
+#define TIMEOUT 1000
 
 #include "xfce4-mpc-plugin.h"
 
@@ -74,6 +75,8 @@
    button_set_sized_image(mpc->next, "gtk-media-next-ltr", size - 3);
    button_set_sized_image(mpc->toggle, "gtk-media-pause", size - 3);
    button_set_sized_image(mpc->stop, "gtk-media-stop", size - 3);
+
+   mpc->size = size;
    return TRUE;
 }
 
@@ -572,6 +575,29 @@
    g_string_free(str, TRUE);
 }
 
+static gint
+mpc_timer(t_mpc* mpc)
+{
+   GtkWidget *image;
+
+   switch (mpd_player_get_state(mpc->mo)) {
+      case MPD_PLAYER_PLAY:
+         if (!(mpc->button_says_playing)) {
+	    button_set_sized_image(mpc->toggle, "gtk-media-pause", mpc->size - 3);
+            mpc->button_says_playing = TRUE;
+	 }
+	 break;
+      default:
+	 if (mpc->button_says_playing) {
+	    button_set_sized_image(mpc->toggle, "gtk-media-play-ltr", mpc->size - 3);
+	    mpc->button_says_playing = FALSE;
+	 }
+	 break;
+   }
+
+   return TRUE;
+}
+
 static void
 toggle(GtkWidget *widget, GdkEventButton* event, t_mpc* mpc)
 {
@@ -735,6 +761,7 @@
    mpc->toggle = new_button_with_cbk(plugin, mpc->box, G_CALLBACK(toggle), mpc);
    mpc->next = new_button_with_cbk(plugin, mpc->box, G_CALLBACK(next), mpc);
 
+   mpc->button_says_playing = TRUE;
    mpc->random = gtk_check_menu_item_new_with_label (_("Random"));
    g_signal_connect (G_OBJECT(mpc->random), "toggled", G_CALLBACK (mpc_random_toggled), mpc);
    mpc->repeat = gtk_check_menu_item_new_with_label (_("Repeat"));
@@ -816,7 +843,8 @@
 
    /* create a connection*/
    mpc->mo = mpd_new(mpc->mpd_host,mpc->mpd_port,mpc->mpd_password);
-
+  
+   g_timeout_add (TIMEOUT, (GtkFunction) mpc_timer, mpc);
    gtk_container_add (GTK_CONTAINER (plugin), mpc->frame);
    gtk_frame_set_shadow_type (GTK_FRAME (mpc->frame), ((mpc->show_frame) ? GTK_SHADOW_IN : GTK_SHADOW_NONE));
 
Only in xfce4-mpc-plugin-0.3.5/panel-plugin: xfce4-mpc-plugin.desktop
diff -ru xfce4-mpc-plugin-0.3.5.orig/panel-plugin/xfce4-mpc-plugin.h xfce4-mpc-plugin-0.3.5/panel-plugin/xfce4-mpc-plugin.h
--- xfce4-mpc-plugin-0.3.5.orig/panel-plugin/xfce4-mpc-plugin.h	2010-05-16 06:15:39.000000000 -0400
+++ xfce4-mpc-plugin-0.3.5/panel-plugin/xfce4-mpc-plugin.h	2010-09-18 13:45:32.000000000 -0400
@@ -53,6 +53,8 @@
    gchar * playlist_format;
    gboolean mpd_repeat;
    gboolean mpd_random;
+   gboolean button_says_playing;
+   gint size;
    gint nb_outputs;
    t_mpd_output ** mpd_outputs;
 } t_mpc;
Only in xfce4-mpc-plugin-0.3.5/panel-plugin: xfce4_mpc_plugin-xfce4-mpc-plugin.o
Only in xfce4-mpc-plugin-0.3.5/po: .intltool-merge-cache
Only in xfce4-mpc-plugin-0.3.5/po: Makefile
Only in xfce4-mpc-plugin-0.3.5/po: Makefile.in
Only in xfce4-mpc-plugin-0.3.5/po: POTFILES
Only in xfce4-mpc-plugin-0.3.5/po: ar.gmo
Only in xfce4-mpc-plugin-0.3.5/po: ast.gmo
Only in xfce4-mpc-plugin-0.3.5/po: ca.gmo
Only in xfce4-mpc-plugin-0.3.5/po: cs.gmo
Only in xfce4-mpc-plugin-0.3.5/po: da.gmo
Only in xfce4-mpc-plugin-0.3.5/po: de.gmo
Only in xfce4-mpc-plugin-0.3.5/po: en_GB.gmo
Only in xfce4-mpc-plugin-0.3.5/po: es.gmo
Only in xfce4-mpc-plugin-0.3.5/po: eu.gmo
Only in xfce4-mpc-plugin-0.3.5/po: fr.gmo
Only in xfce4-mpc-plugin-0.3.5/po: gl.gmo
Only in xfce4-mpc-plugin-0.3.5/po: hu.gmo
Only in xfce4-mpc-plugin-0.3.5/po: id.gmo
Only in xfce4-mpc-plugin-0.3.5/po: it.gmo
Only in xfce4-mpc-plugin-0.3.5/po: ja.gmo
Only in xfce4-mpc-plugin-0.3.5/po: lv.gmo
Only in xfce4-mpc-plugin-0.3.5/po: pl.gmo
Only in xfce4-mpc-plugin-0.3.5/po: pt.gmo
Only in xfce4-mpc-plugin-0.3.5/po: pt_BR.gmo
Only in xfce4-mpc-plugin-0.3.5/po: ru.gmo
Only in xfce4-mpc-plugin-0.3.5/po: sk.gmo
Only in xfce4-mpc-plugin-0.3.5/po: sq.gmo
Only in xfce4-mpc-plugin-0.3.5/po: stamp-it
Only in xfce4-mpc-plugin-0.3.5/po: sv.gmo
Only in xfce4-mpc-plugin-0.3.5/po: tr.gmo
Only in xfce4-mpc-plugin-0.3.5/po: uk.gmo
Only in xfce4-mpc-plugin-0.3.5/po: ur.gmo
Only in xfce4-mpc-plugin-0.3.5/po: ur_PK.gmo
Only in xfce4-mpc-plugin-0.3.5/po: zh_CN.gmo
Only in xfce4-mpc-plugin-0.3.5: stamp-h1
