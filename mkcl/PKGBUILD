# Maintainer: Alexej Magura <agm2819*gmail*>
# 
# 
pkgname=mkcl
pkgver=1.1.4
pkgrel=2
pkgdesc="ManKai Common Lisp aims to be a full implementation of the Common Lisp language in compliance with the ANSI X3J13 CL standard (includes ASDF)"
arch=('i686' 'x86_64')
url="http://common-lisp.net/project/mkcl/"
license=('LGPL')
depends=('gmp' 'bash')
provides=('common-lisp' 'cl-asdf')
source=("http://common-lisp.net/project/mkcl/releases/mkcl-1.1.4.tar.gz")
md5sums=('48614c7fbefd3f873f2d3f2f3357375b')

prepare() {
    cd "$srcdir/$pkgname-$pkgver"

    ./configure --prefix=$pkgdir/usr \
	--bindir=\${exec_prefix}/bin \
	--infodir=\${datarootdir}/info \
	--mandir=\${datarootdir}/man \
	--libdir=\${exec_prefix}/lib \
	--datarootdir=\${exec_prefix}/share
}

build() {
    cd "$srcdir/$pkgname-$pkgver"

    make
}

package() {
    cd "$srcdir/$pkgname-$pkgver"
    make DESTDIR=$pkgdir install
    install -m 644 -D "Copyright" "$pkgdir/usr/share/doc/$pkgname/Copyright"
    install -m 644 -D "LGPL"      "$pkgdir/usr/share/doc/$pkgname/GNU-LGPL"
    install -m 644 -D "LGPL.v2"   "$pkgdir/usr/share/doc/$pkgname/GNU-LGPLv2"
    cd "$pkgdir/usr/lib/$pkgname-$pkgver" 
    chmod 644 "libmkclgc.a" 
    chmod 644 "libmkclmin.a"
    chmod 644 "liblsp.a"
    chmod 644 "libmkcltop.a"
}
