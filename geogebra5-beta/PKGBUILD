# Maintainer: moostik <mooostik_at_gmail.com>

pkgname=geogebra5-beta
pkgver=4.9.13.0
pkgrel=1
pkgdesc="Dynamic mathematics software with interactive graphics (2D and 3D), algebra and spreadsheet"
arch=('any')
url="http://www.geogebra.org/"
license=('custom')
# Application and source code under GPL / Language files under CCPL
depends=('java-runtime' 'jogl' 'desktop-file-utils')
optdepends=('kde-thumbnailer-geogebra: generates thumbnails of GeoGebra files in KDE'
	    'gnome-thumbnailer-geogebra: generates thumbnails of GeoGebra files in GNOME')
install='geogebra5-beta.install'
noextract=(*.jar)
_root="http://www.geogebra.org/webstart/5.0/"
source=("${pkgname}.png"
	"${pkgname}.desktop"
	"${pkgname}.sh"
	"${_root}geogebra.jar"
	"${_root}geogebra_3d.jar"
	"${_root}geogebra_algos.jar"
	"${_root}geogebra_cas.jar"
	"${_root}geogebra_export.jar"
	"${_root}geogebra_gui.jar"
	"${_root}geogebra_javascript.jar"
	"${_root}geogebra_main.jar"
	"${_root}geogebra_properties.jar"
	"${_root}geogebra_usb.jar"
	"${_root}jlatexmath.jar"
	"${_root}jlm_cyrillic.jar"
	"${_root}jlm_greek.jar"
	"${url}download/license.txt")

package() {
  cd "${srcdir}"

  # Installing application
  install -d -m755 "${pkgdir}/usr/share/java/${pkgname}"
  install -D -m644 *.jar "${pkgdir}/usr/share/java/${pkgname}"
  install -D -m755 "${pkgname}.sh" "${pkgdir}/usr/bin/${pkgname}"

  # Creating menu item
  install -D -m644 "${pkgname}.png" "${pkgdir}/usr/share/pixmaps/${pkgname}.png"
  install -D -m644 "${pkgname}.desktop" \
    "${pkgdir}/usr/share/applications/${pkgname}.desktop"

  # Installing license
  install -D -m644 license.txt "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"

  # Needed to use the jogl package
  ln -s "/usr/share/java/jogl/gluegen-rt.jar" \
    "${pkgdir}/usr/share/java/${pkgname}/gluegen-rt.jar"
  ln -s "/usr/share/java/jogl/jogl.jar" \
    "${pkgdir}/usr/share/java/${pkgname}/jogl.jar"

  # Needed to use the jlatexmath package
#   ln -s "/usr/share/java/jlatexmath-minimal/jlatexmath-minimal.jar" \
#     "${pkgdir}/usr/share/java/${pkgname}/jlatexmath.jar"
#   ln -s "/usr/share/java/jlatexmath-minimal/jlm_greek.jar" \
#     "${pkgdir}/usr/share/java/${pkgname}/jlm_greek.jar"
#   ln -s "/usr/share/java/jlatexmath-minimal/jlm_cyrillic.jar" \
#     "${pkgdir}/usr/share/java/${pkgname}/jlm_cyrillic.jar"
}

md5sums=('e324ee3a2bb438cee625e3f29770a315'
         '9dcd074a16b1ec498c7aefd3241e73fb'
         'd7e8d83a6bf9c0ba9f6a889cfa46c551'
         '13cc2f3742ad77a45cd23ec1f6aa1788'
         '535039ab5b9cb2a34e93de587a531841'
         '2582a13183a3a9c3a5eb956108e001d7'
         '2dc2c69a6419711fb5baf81f210c1c05'
         'f3cdbc0ce4baa5af261c7037c4eebaae'
         '5702b343998c8d6ed4a7c758fa48cc6f'
         '53f66773db674fbe3bd48eba1d56543d'
         'ad7fbbc82c22d48f9a6dc495979a678c'
         '40f62c47010a0fd4c48616ce8f17406a'
         'adc7f6a5070194161b408b6411604347'
         '3a0226c472100d49743f96711df9ed4a'
         'c4069b7b23f12753d3deb8f24fa1079f'
         '12146f617ebfddebe3325d8f43d9d767'
         '39e2fbaf507a7b8db047152332d695c5')
md5sums=('e324ee3a2bb438cee625e3f29770a315'
         '9dcd074a16b1ec498c7aefd3241e73fb'
         'd7e8d83a6bf9c0ba9f6a889cfa46c551'
         'd0c66b4bdfe7bf3d081b2c15e2c85563'
         'fd7d762a5ff207de78e1b80014936914'
         '09f98a4648fa4fba69de59942def7e08'
         '7a4cb7c1b05e089bc38260ea4040b08b'
         'c04577e6d149b29053246b0eb4436b42'
         '466fbb9c7f47baeec7aa748876f3dc13'
         'd1c4078bd7d5df4b861c5b8392af7fb1'
         '2757b5273b9f244e7324dbb5499f1606'
         'e47fbaa106e9dd52d119975654f5cc6f'
         '64cc37a74eba45a5c6debf886d870b64'
         '9448b8decbf9314f1ad3302596a5cd6c'
         '53b55aa598c0f7defabace9b17850c86'
         '8ce929eee02bd748cf1e55b620459f06'
         '39e2fbaf507a7b8db047152332d695c5')
