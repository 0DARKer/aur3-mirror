# Maintainer: Felipe Hommen <felibank_at_gmail.com>
# Contributor: moostik <mooostik_at_gmail.com>

pkgname=geogebra5-beta
pkgver=4.9.117.0
pkgrel=1
pkgdesc="Dynamic mathematics software with interactive graphics (2D and 3D), algebra and spreadsheet"
arch=('i686' 'x86_64')
url="http://www.geogebra.org/"
license=('custom:GPL3 and CCPL:by-sa')
depends=('java-environment' 'desktop-file-utils' 'hicolor-icon-theme' 'libgl')
optdepends=()
conflicts=('gnome-thumbnailer-geogebra' 'kde-thumbnailer-geogebra')
install='geogebra5-beta.install'
noextract=(*.jar)
source=("http://geogebra.googlecode.com/files/GeoGebra-Linux-Installer-${pkgver}.tar.gz")

package() {
[[ "$CARCH" == "x86_64" ]] && ARCH='64'
[[ "$CARCH" == "i686" ]] && ARCH='32'
_SRC_DIR=${srcdir}/geogebra-${pkgver}
cd ${_SRC_DIR}
DEFAULT_NAME='geogebra5'
DEFAULT_VERSION='5.0 Beta'
NAME=${pkgname}
DESCRIPTION='GeoGebra 5.0 Beta'
DOCDIR=/usr/share/doc
INSTALL=${srcdir}/geogebra-${pkgver}/install-sh
PREFIX=${pkgdir}

source install-geogebra
source install-geogebra-jogl1
install -D -m 644 ${srcdir}/geogebra-${pkgver}/_LICENSE.txt "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
mv ${pkgdir}/usr/bin/${pkgname} ${pkgdir}/usr/bin/${pkgname}-jogl2
ln -s /usr/bin/${pkgname}-jogl1 ${pkgdir}/usr/bin/${pkgname} # We will use jogl1. jogl2 is in RC stage and doesn't work with some GPUs.
#source install-geogebra-mime-data                # WARNING: This conflicts with geogebra package
#source install-geogebra-no3d
#source install-geogebra-icons-oxygen             # WARNING: This conflicts with geogebra package
#source install-geogebra-mime-data-icons-oxygen   # WARNING: This conflicts with geogebra package
#source install-geogebra-thumbnail-gtk            # WARNING: This conflicts with gnome-thumbnailer-geogebra package
#source install-geogebra-thumbnail-kde            # WARNING: This conflicts with kde-thumbnailer-geogebra package. Depends on kdelibs.
}

md5sums=('8434fbb143da4a19ee6fbd22e87221e0')