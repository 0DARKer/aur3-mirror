# Maintainer:  Martin Wimpress <code@flexion.org>

_pkgbase=xulrunner
pkgname=lib32-${_pkgbase}
pkgver=27.0
pkgrel=1
pkgdesc="Mozilla Runtime Environment, 32-bit upstream build"
depends=('lib32-gtk2' 'lib32-gcc-libs' 'lib32-nss' 'lib32-libxt' 'lib32-libidl2')
arch=('x86_64')
url="https://developer.mozilla.org/en/docs/XULRunner"
license=('MPL')
groups=('lib32')
source=("http://ftp.mozilla.org/pub/mozilla.org/${_pkgbase}/releases/${pkgver}/runtimes/${_pkgbase}-${pkgver}.en-US.linux-i686.tar.bz2")
sha1sums=('31648d83c0768d475dd6b63b87a4b383ade74779')

package() {
    mkdir -p "${pkgdir}/usr/lib32/"
    cp -av ${_pkgbase} "${pkgdir}/usr/lib32/${_pkgbase}-${pkgver}"
    # add xulrunner library path to ld.so.conf
    install -d "${pkgdir}/etc/ld.so.conf.d"
    echo "/usr/lib32/${_pkgbase}-${pkgver}" > "${pkgdir}/etc/ld.so.conf.d/lib32-xulrunner.conf"
}
