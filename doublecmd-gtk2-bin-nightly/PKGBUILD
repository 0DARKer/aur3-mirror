# $Id:$
# Contributor: (sirocco AT ngs.ru)
# Maintainer: (sirocco AT ngs.ru)

pkgname=doublecmd-gtk2-bin-nightly
_pkgname=doublecmd
pkgver=0.6.0
_pkgver=0+svn5613
pkgrel=613
#_pkgsuf=~trusty
_pkgsuf=~utopic
pkgdesc="Double Commander is a cross platform open source file manager with two panels side by side. It is inspired by Total Commander and features some new ideas."
arch=('i686' 'x86_64')
url='http://doublecmd.sourceforge.net'
# https://launchpad.net/~alexx2000/+archive/doublecmd-svn
depends=('gtk2')
optdepends=('lua: scripting' 'p7zip: support for 7zip archives' 'libunrar: support for rar archives'
            'pmount: mount removable devices' 'imagemagick: speed up thumbnail view')
install="doublecmd.install"
provides=('doublecmd')
conflicts=('doublecmd-gtk2' 'doublecmd-svn')
license=('GPL2')
options=('!strip')

case ${CARCH} in
  i686)
    _bldarch='i386'
    sha1sums=('8bb2ed1f710859466a0fcdf5aa672c4b9eefbf00'
              'b6b6844bb490a68f5c82d4bc1ce97ea124fd599a'
              'b6c85a1df978c7fa30d4ec0f562d14a6c1a357bf')
    ;;
  x86_64)
    _bldarch='amd64'
    sha1sums=('8bb2ed1f710859466a0fcdf5aa672c4b9eefbf00'
              '61990bf148b4aa1dcfb0af74de44e2ab238b455e'
              '1db40752c3bac35e6c1444d55ca9e1e9918c9a28')
    ;;
esac

_url=https://launchpad.net/~alexx2000/+archive/doublecmd-svn/+files
source=(${_url}/${_pkgname}-common_${pkgver}-${_pkgver}${_pkgsuf}_all.deb
        ${_url}/${_pkgname}-gtk_${pkgver}-${_pkgver}${_pkgsuf}_${_bldarch}.deb
        ${_url}/${_pkgname}-plugins_${pkgver}-${_pkgver}${_pkgsuf}_${_bldarch}.deb)


package() {
    msg2 "Extracting files..."
    cd "$srcdir"
    ar x ${_pkgname}-gtk_${pkgver}-${_pkgver}${_pkgsuf}_${_bldarch}.deb
    tar xf data.tar.xz --exclude lintian -C $pkgdir
    rm -f data.tar.xz
    ar x ${_pkgname}-plugins_${pkgver}-${_pkgver}${_pkgsuf}_${_bldarch}.deb
    tar xf data.tar.xz --exclude lintian -C $pkgdir
    rm -f data.tar.xz
    ar x ${_pkgname}-common_${pkgver}-${_pkgver}${_pkgsuf}_all.deb
    tar xf data.tar.xz --exclude lintian -C $pkgdir
    rm -f data.tar.xz
}

