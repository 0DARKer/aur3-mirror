# Submitter: Peter Richard Lewis <plewis@aur.archlinux.org>
# Maintainer: Will Price <willprice94@gmail.com>
# Contributor: Aaron Sloman <a.sloman@cs.bham.ac.uk>

pkgname=poplog
pkgver=15.65
pkgrel=2
pkgdesc="Poplog interpreter"
arch=('i686' 'x86_64')
url="http://www.cs.bham.ac.uk/research/projects/poplog/freepoplog.html"
license=('custom:poplog')
groups=()
depends=('tcsh')
if test "$CARCH" == x86_64; then
  depends+=('lib32-libxext' 'lib32-libxt' 'lib32-openmotif' 'lib32-libxp')
elif test "$CARCH" == i686; then
  depends+=('libxext' 'libxt' 'openmotif' 'libxp')
fi
makedepends=()
checkdepends=()
optdepends=('espeak')
provides=()
conflicts=()
replaces=()
backup=()
options=()
install=
changelog=
source=(
  "http://www.cs.bham.ac.uk/research/projects/poplog/v$pkgver/AREADME.txt"
  "http://www.cs.bham.ac.uk/research/projects/poplog/v$pkgver/INSTALL_BHAM_LINUX_POPLOG"
  "http://www.cs.bham.ac.uk/research/poplog/bham-linux-poplog-v$pkgver.tar.gz"
  "http://www.cs.bham.ac.uk/research/projects/poplog/copyright.html"
)
noextract=()
sha256sums=('f8713a74b36dfc9547848db43b332822d3b5a6887b671ab59e19a17add6e071a'
            '09715cbf2bc502135174594f4f813c3346c58814fafc4e8c158b388dbf89a9fd'
            'efbeea478f53bc5837ee5ae9157981118c060d40704b6024b0d03815a5c7f17f'
            '87c8728fcad9a4a24d70ba41e1628d44bd89b36bbe0eed75e49eb7b2b52b69a9')

build() {
  # We're using pre-built binaries, and the install script links for us,
  # so there's no nothing to do here.
  return 0
}



package() {
  cd "$srcdir"
  chmod 775 INSTALL_BHAM_LINUX_POPLOG

  # Install poplog
  ./INSTALL_BHAM_LINUX_POPLOG motif "$pkgdir/usr/lib/poplog" nolinks

  cd "$pkgdir"

  ## Now install links
  mkdir -p "$pkgdir/usr/bin" "$pkgdir/usr/share/man/man1"
  ln -s "/usr/lib/poplog/current-poplog/bin/poplog.sh" "$pkgdir/usr/bin/poplog"
  ln -s "/usr/lib/poplog/current-poplog/man/man1/*" "$pkgdir/usr/share/man/man1"

  # Licence
  install -Dm644 "$srcdir/copyright.html" "$pkgdir/usr/share/licenses/poplog.html"
}

# vim:set ts=2 sw=2 et:
