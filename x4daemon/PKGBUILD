# Maintainer: Evilandi666 <evilandi.aur(at)googlemail.com>
pkgname=x4daemon
pkgver=0.3
pkgrel=1
pkgdesc="A daemon that makes it possible to use all special keys on your Sidewinder X4 keyboard."
arch=('i686' 'x86_64')
url="http://www.geekparadise.de/x4daemon/"
license=('GPL')
depends=('libusb>=1.0.8' 'bash' 'grep' 'coreutils' 'procps')
makedepends=('autoconf')
source=("http://geekparadise.de/x4daemon_download/${pkgname}-${pkgver}.tar.bz2" "${pkgname}.install")
install="${pkgname}.install"
sha256sums=('fa21d8bf4074972a78bc4c2154fc0fa93dcc2667c9af3fe60a4cc5d802ba0d59'
            '5324cd6518ea087c54e06dce2fa4215068c6e6ad49ce50ef54a91e4b70a94443')
build() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  autoconf
  ./configure --prefix=/usr
  make
}

check() {
  cd "$srcdir/$pkgname-$pkgver"
  make -k check
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"

  make DESTDIR="${pkgdir}" install

  install -D -m 755 "${srcdir}/${pkgname}-${pkgver}/src/x4daemon.init" "${pkgdir}/etc/rc.d/x4daemon"
}
