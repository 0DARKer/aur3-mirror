# Maintainer: archtux <antonio.arias99999@gmail.com>

pkgname=gmediafinder-git
pkgver=20110220
pkgrel=1
pkgdesc="Application to stream or download files from various YouTube-like sites without having flash installed."
arch=('i686' 'x86_64')
url="http://gnomefiles.org/content/show.php/Gmediafinder?content=138588"
license=('GPL2')
depends=('gstreamer0.10-ffmpeg' 'gstreamer0.10-python' 'libvisual-plugins' 'pygtk' 'python-beautifulsoup>3.2' 'python-configobj' 'python-gdata' 'python-html5lib')
makedepends=('git')
install=gmediafinder.install

_gitroot=https://github.com/smolleyes/gmediafinder.git
_gitname=gmediafinder


build() {
   cd $srcdir

   msg "Connecting to GIT server...."

   if [ -d $srcdir/$_gitname ] ; then
     cd $_gitname && git pull --rebase
   else
     git clone $_gitroot
   fi

   msg "GIT checkout done or server timeout"
   msg "Starting installation..."

   cd $srcdir/gmediafinder

   # Python2 fix
   sed -i 's_#!/usr/bin/env python_#!/usr/bin/env python2_' setup.py
   cd ./GmediaFinder
   sed -i 's_#!/usr/bin/env python_#!/usr/bin/env python2_' gmediafinder.py

   # Install
   cd ..
   python2 setup.py install --root=$pkgdir --optimize=1
}