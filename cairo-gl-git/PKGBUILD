# $Id: PKGBUILD 71210 2010-03-05 15:30:02Z jgc $
# Maintainer: Jan de Groot <jgc@archlinux.org>
# Contributor: Disfido <disfido@gmail.com>

pkgname=cairo-gl-git
pkgver=20101101
pkgrel=1
pkgdesc="Cairo vector graphics library"
arch=(i686 x86_64)
license=('LGPL' 'MPL')
url="http://cairographics.org/"
depends=('libpng>=1.4.0' 'libxrender' 'fontconfig>=2.8.0' 'pixman>=0.16.6' 'xcb-util>=0.3.6')
makedepends=('pkgconfig' 'gtk-doc' 'automake' 'autoconf' 'git')
options=('!libtool')
provides=('cairo=1.10.0' 'cairo-xcb=1.10.0')
conflicts=('cairo' 'cairo-git')
_gitroot='git://anongit.freedesktop.org/git/'
_gitname='cairo'

build() {
  if [ -d ${srcdir}/$_gitname ]; then
    cd $srcdir/$_gitname
    git pull
  else
    cd $srcdir
    git clone $_gitroot$_gitname
    cd $_gitname
  fi

  #  sed -i -e 's/libpng13/libpng14/g' configure || return 1
  ./autogen.sh --prefix=/usr --sysconfdir=/etc \
    --localstatedir=/var --enable-gl || return 1
  make || return 1
  make DESTDIR="${pkgdir}" install || return 1
}
