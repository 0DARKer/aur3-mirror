# Maintainer: Andre Wayand <aur-carddavmate@awayand.sleepmail.com>
pkgname=carddavmate
pkgver=0.5.1
pkgrel=7
pkgdesc="carddav web client"
arch=('any')
url="http://inf-it.com/"
license=('AGPL3')
optdepends=(
	'apache>=1.3.0: Web server to run webcal'
	'nginx: Web server to run webcal'
	'davical: caldav and carddav server'
)
backup=(
	"etc/httpd/conf/extra/httpd-carddavmate.conf"
	"srv/http/carddavmate/config.js"
)
install="${pkgname}.install"
changelog=ChangeLog
source=(
	"http://inf-it.com/CardDavMATE_0.5.1.zip"
	"httpd-carddavmate.conf"
	".htaccess"
	"htpasswd"
	"README.archlinux"
)

md5sums=('c78a4f8da0f43f61df8040a28b3e2540'
         '25b4490a2bbadab0af591ecb82ded2f2'
         'ed51a1a16876c7b55a837026b1823ce7'
         '12fd8a4698e4427d84e4425148550bd3'
         '15c79b66ad5f94e0e65203a9a8772732')

package() {
  cd "${srcdir}/CardDavMATE"

  install -d "${pkgdir}/srv/http"
  cp -a . "${pkgdir}/srv/http/${pkgname}"

  install -D "${srcdir}/README.archlinux" "${pkgdir}/srv/http/carddavmate/"
  install -D "${srcdir}/htpasswd" "${pkgdir}/srv/http/carddavmate/htpasswd"
  install -D "${srcdir}/htaccess" "${pkgdir}/srv/http/carddavmate/.htaccess"

  install -d "${pkgdir}/etc/httpd/conf/extra"
  install -t "${pkgdir}/etc/httpd/conf/extra" "${srcdir}/httpd-carddavmate.conf"
}
md5sums=('c78a4f8da0f43f61df8040a28b3e2540'
         '25b4490a2bbadab0af591ecb82ded2f2'
         'ed51a1a16876c7b55a837026b1823ce7'
         '12fd8a4698e4427d84e4425148550bd3'
         '861c9f6d87a4c31ba2268aa617a6fe51')
