# Maintainer: joseph28cb
# Based on https://aur.archlinux.org/packages.php?ID=51127

pkgname=vuze-extreme-mod
pkgver=4.7.0.1
pkgrel=1
pkgdesc="A modded version of vuze BitTorrent client"
arch=('i686' 'x86_64')
url="http://www.sb-innovation.de/f41/"
license=('GPL' 'custom')
depends=('java-runtime' 'gnome-vfs' 'libgnome' 'libgnomeui')
optdepends=('xulrunner: needed for browsing the vuze content')
makedepends=('libarchive')
source=(http://downloads.sourceforge.net/project/azureus/vuze/Vuze_4700/Vuze_4700_linux.tar.bz2
        http://www.sb-innovation.de/attachments/f41/11709d1317557559-vuze-extreme-mod-4-7-0-1-vpem_4701-01.zip)
noextract=(${source[1]##*/})
provides=('vuze')
conflicts=('vuze')
md5sums=('814e88e5bc0ca184e47104ea548d2897'
         'b7beb903fa146d1a9e22e20b2c0933d1')
if [ $CARCH = 'x86_64' ]; then
  source[0]="http://downloads.sourceforge.net/project/azureus/vuze/Vuze_4700/Vuze_4700_linux-x86_64.tar.bz2"
  md5sums[0]='3e2556bdcced23b2df09ee54c6055cfb'
fi

build() {
  install -dm755 "${pkgdir}/usr/share"
  cp -r vuze "${pkgdir}/usr/share"
  install -Dm755 vuze/vuze "${pkgdir}/usr/bin/vuze"
  sed -i 's%#PROGRAM_DIR="/home/username/apps/azureus"%PROGRAM_DIR="/usr/share/vuze"%' "${pkgdir}/usr/bin/vuze"
  install -Dm644 vuze/vuze.png "${pkgdir}/usr/share/pixmaps/vuze.png"
  install -Dm644 vuze/vuze.desktop  "${pkgdir}/usr/share/applications/vuze.desktop"
  bsdtar -xf $(basename ${source[1]}) -C "${pkgdir}/usr/share/vuze"
}
