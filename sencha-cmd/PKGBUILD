# Maintainer: Stephen Zhang <zsrkmyn at gmail dot com>
# Contributor: Gökhan Sarı <me@th0th.me>
pkgname=sencha-cmd
pkgver=5.0.0.160
pkgrel=1
pkgdesc="A cornerstone to build your Sencha application."
url="http://www.sencha.com/products/sencha-cmd"
arch=('x86_64' 'i686')
license=('custom')
depends=('jre7-openjdk')
optdepends=('ruby1.9: for SCSS support')

if [ "${CARCH}" = "x86_64" ]; then
  _sencha_installer=SenchaCmd-$pkgver-linux-x64.run
  md5sums=('6484aaadd579fcfd786d8a9fb7662ac1')
else
  _sencha_installer=SenchaCmd-$pkgver-linux.run
  md5sums=('e7be60a856e057bc3d63c5a70efc9e1d')
fi

source=("http://cdn.sencha.com/cmd/${pkgver}/${_sencha_installer}.zip")

build() {
  chmod +x $_sencha_installer
}

package() {
  cd "${srcdir}"
  ./$_sencha_installer --mode unattended --prefix $pkgdir/opt
  install -Dm644 "$pkgdir/opt/Sencha/Cmd/$pkgver/LICENSE" "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
  rm "$pkgdir/opt/Sencha/Cmd/$pkgver/LICENSE"
  mkdir -p $pkgdir/usr/bin/

  cat > "$pkgdir/usr/bin/sencha-cmd" <<EOF
#!/bin/sh
/opt/Sencha/Cmd/$pkgver/sencha \$@
EOF

  chmod o+x "$pkgdir/usr/bin/sencha-cmd"
}

# vim:set ts=2 sw=2 et:
