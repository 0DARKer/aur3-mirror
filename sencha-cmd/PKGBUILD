# Maintainer: Fabian 'zetaron' Stegemann <aur@zetaron.de>
pkgname=sencha-cmd
pkgver=3.1.2.342
pkgrel=2
pkgdesc="Sencha Cmd is the cornerstone to build your Sencha application. From scaffolding a new project, to minifying and deploying your application to production, Sencha Cmd provides a full set of lifecycle management features to compliment your Sencha project."
url="http://www.sencha.com/products/sencha-cmd"
arch=('x86_64' 'i686')
license=('SENCHA Cmd LICENSE v3.0')
depends=('jre7-openjdk')
optdepends=('ruby1.9: for SCSS support')
makedepends=()
conflicts=()
replaces=()
backup=()
#install='foo.install'

if [ "${CARCH}" = "x86_64" ]; then
  _sencha_installer=SenchaCmd-$pkgver-linux-x64.run
  md5sums=('d938d76c0c31585bdbf6c6e5bd363f98')
else
  _sencha_installer=SenchaCmd-$pkgver-linux.run
  md5sums=('16265ea948fb46db79d1b2aeb5f10fe9')
fi

source=("http://cdn.sencha.com/cmd/${pkgver}/${_sencha_installer}.zip")

build() {
  chmod +x $_sencha_installer
}

package() {
  cd "${srcdir}"
  ./$_sencha_installer --mode unattended --prefix $pkgdir/opt
  install -Dm644 "$pkgdir/opt/Sencha/Cmd/$pkgver/LICENSE" "$pkgdir/usr/share/licenses/$pkgname/COPYING"
  mkdir -p $pkgdir/usr/bin/
  cat > "$pkgdir/usr/bin/sencha-cmd" <<DELIM
#!/bin/sh
/opt/Sencha/Cmd/$pkgver/sencha \$@
DELIM
  chmod o+x "$pkgdir/usr/bin/sencha-cmd"
}

# vim:set ts=2 sw=2 et:
