# Maintainer: Gökhan Sarı <me@th0th.me>
pkgname=sencha-cmd
pkgver=4.0.1.45
pkgrel=1
pkgdesc="Sencha Cmd is the cornerstone to build your Sencha application. From scaffolding a new project, to minifying and deploying your application to production, Sencha Cmd provides a full set of lifecycle management features to compliment your Sencha project."
url="http://www.sencha.com/products/sencha-cmd"
arch=('x86_64' 'i686')
license=('SENCHA Cmd LICENSE v3.0')
depends=('jre7-openjdk')
optdepends=('ruby1.9: for SCSS support')

if [ "${CARCH}" = "x86_64" ]; then
  _sencha_installer=SenchaCmd-$pkgver-linux-x64.run
  md5sums=('47cd8f06f58e9d7c68606b11fd600b01')
else
  _sencha_installer=SenchaCmd-$pkgver-linux.run
  md5sums=('724aa9d9be74ffab83c1852d4dc9c087')
fi

source=("http://cdn.sencha.com/cmd/${pkgver}/${_sencha_installer}.zip")

build() {
  chmod +x $_sencha_installer
}

package() {
  cd "${srcdir}"
  ./$_sencha_installer --mode unattended --prefix $pkgdir/opt
  install -Dm644 "$pkgdir/opt/Sencha/Cmd/$pkgver/LICENSE" "$pkgdir/usr/share/licenses/$pkgname/COPYING"
  mkdir -p $pkgdir/usr/bin/
  cat > "$pkgdir/usr/bin/sencha-cmd" <<DELIM
#!/bin/sh
/opt/Sencha/Cmd/$pkgver/sencha \$@
DELIM
  chmod o+x "$pkgdir/usr/bin/sencha-cmd"
}

# vim:set ts=2 sw=2 et:
