# This is an example PKGBUILD file. Use this as a start to creating your own,
# and remove these comments. For more information, see 'man PKGBUILD'.
# NOTE: Please fill out the license field for your package! If it is unknown,
# then please put 'unknown'.

# See http://wiki.archlinux.org/index.php/Python_Package_Guidelines for more
# information on Python packaging.

# Maintainer: Your Name <youremail@domain.com>
pkgname=doc2dash
pkgver=1.2.0
pkgrel=1
pkgdesc="Convert sphynx/pydoctor documentation to docsets usable by Zeal."
arch=('any')
url="https://pypi.python.org/pypi/${pkgname}"
license=('MIT')
depends=('python-lxml' 'python-beautifulsoup4')
optdepends=('zeal-git: for viewing docsets')
options=(!emptydirs)
source=("https://pypi.python.org/packages/source/d/${pkgname}/${pkgname}-${pkgver}.tar.gz"
        'requirements.txt.diff'
        '__main__.py.diff')
md5sums=('1923485ca35090d2fac4b2e6c30048dd'
         '0b9d4168f4869b6d5ea065f69112ecc6'
         '3486ea3df77efe88f8893b0018cadf2e')

prepare() {
  cd "$srcdir/$pkgname-$pkgver"
  patch 'requirements.txt' < '../requirements.txt.diff'
  patch 'doc2dash/__main__.py' < '../__main__.py.diff'
}

package() {
  cd "$srcdir/$pkgname-$pkgver"
  python setup.py install --root="$pkgdir/" --optimize=1

  install -Dm644 'LICENSE' "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
}

# vim:set ts=2 sw=2 et:
