#Maintainer: Philip Abernethy<chais.z3r0@gmail.com>
pkgname=beatbuddy-hib
pkgver=1392141348
pkgrel=1
pkgdesc="A hand-drawn arcade game with unique music interaction."
url="http://www.threaks.com/"
arch=('i686' 'x86_64')
license=('custom:commercial')

DLAGENTS+=('hib::/usr/bin/echo "Could not find %u. Manually download it to \"$(pwd)\", or set up a hib:// DLAGENT in /etc/makepkg.conf."; exit 1')

source=("hib://Beatbuddy_linux_${pkgver}.zip")

sha512sums=('260fe08f2c2a130880ffba3d87e7b4964eddea757feb0ee9d1df287be3e28e4af73eb6c755f85438269e09cfb7b1a64759b9f3a69f4dd70efb0528bd6b0ba2b8')

PKGEXT=".pkg.tar"

package() {
	mkdir -p "$pkgdir"/{opt,usr/{bin,share/applications}}
	mv BeatbuddyLinux "$pkgdir"/opt/beatbuddy
	chmod a+x "$pkgdir"/opt/beatbuddy/Beatbuddy.x86
	echo '#!/bin/bash
cd /opt/beatbuddy
./Beatbuddy.x86' > "$pkgdir"/usr/bin/beatbuddy
	chmod a+x "$pkgdir"/usr/bin/beatbuddy
	echo "[Desktop Entry]
Type=Application
Name=Beatbuddy
GenericName=Beatbuddy
Comment=$pkgdesc
Icon=/opt/beatbuddy/Beatbuddy_Data/Resources/UnityPlayer.png
Exec=/usr/bin/beatbuddy
Categories=Game;
Path=/opt/beatbuddy" > "$pkgdir"/usr/share/applications/beatbuddy.desktop
}
