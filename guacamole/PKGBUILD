# Maintainer: Joshua Stiefer <facedelajunk@gmail.com>
pkgname=guacamole
pkgver=0.4.0
pkgrel=1
pkgdesc="An HTML5 web application that provides access to your desktop using remote desktop protocols."
arch=('any')
url="http://guacamole.sourceforge.net/"
license=('GPL3')
depends=('guacd' 'java-environment' 'tomcat6')
makedepends=('maven')
optdepends=()
provides=()
install=$pkgname.install
source=(http://sourceforge.net/projects/guacamole/files/current/source/guacamole/$pkgname-$pkgver.tar.gz
        $pkgname.install)
md5sums=('25cd1f077783ab33dddf7014648e4a18'
         'a1c133de8f6e85e0735ca532beb0812c')

build() {
  cd "$srcdir/$pkgname-$pkgver"
  /opt/maven/bin/mvn compile war:war
}

package() {
  cd "$srcdir/$pkgname-$pkgver"
  install -Dm600 $srcdir/$pkgname-$pkgver/target/guacamole-default-webapp-0.4.0.war $pkgdir/var/lib/guacamole/guacamole.war
  install -Dm755 $srcdir/$pkgname-$pkgver/doc/example/guacamole.properties $pkgdir/etc/guacamole/guacamole.properties
  install -Dm755 $srcdir/$pkgname-$pkgver/doc/example/user-mapping.xml $pkgdir/etc/guacamole/user-mapping.xml
}

# vim:set ts=2 sw=2 et:
