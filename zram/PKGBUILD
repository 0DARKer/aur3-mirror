# Maintainer: Artur 'licho' Kaleta <akaleta91@gmail.com>
pkgname=zram
pkgver=0.2
pkgrel=1
pkgdesc="zRAM based Ramdrive and Swap startup scripts."
arch=(any)
url="http://licho.ml"
license=('MIT')

source=(
  zdisk@.service
  zswap@.service
  zdisk.sh
  zswap.sh
)

md5sums=('5ee287c0fa196c29aa17a8b029e548bb'
         'db7d462684b08fe63ce01b100a127dd5'
         'acdfbb165465cf63cda95ced4b7193c8'
         '7cf2a9c3beb72ffbf65638e8833bed25')
sha1sums=('174b632b6ffc71103a57dee735b7f17139596862'
          '59fa83eb6e3c1b313b32712cde1775c70e2764ab'
          '2fa87e6d20879e0687a9a150293f875a9b315d65'
          '9556f02d719be31dee69abf60d0ce8d2388303e3')
sha256sums=('b4018aaa9b3ac192995480adfb2055dc2ea781d3afaf8e1bea947bd8ba7b864a'
            'acd39854f73ad75cac29f7e1f430141c3acf505abc8d1cf8c34dafc4cb78529a'
            '2fcd319ca6ae0661bec783643be80834baf219169ea545e1efb5a47230cd0b2f'
            'fc4e1f7f4ad420923e6c3c73b5f9022d7cbc4cc2e1b760c7d3edcf383b90755f')
sha512sums=('8e888c9c051133d250ca08857a94c871ea000e72b7df7be8290119ddf01ce7c374f3f4a98a7777b4c4276a87b692afc6c448cc5d94733398557e5ae41bd221dd'
            'a536d03dcfe06b67a469c78fe2272ae6126bdd04c3d474a73eae4af2f77a0f016366fe3b728ba1b2e83ac4f279f912e01ad5044423587a662cc1bee62102b836'
            '9bf31b232741ec594404a7ec95af6b128cf78920fbfbd17508843537584b0dc754fad1ec073c7a687831f291bb43c0d3db5ba2af0ed23c45511e171144d92394'
            '19b92b484347f9463d5a5e50fa9e35472e1dbbb90962ba7ce8e891af3e0be033e3b8c07eb169d36022f1500aa18fbb22ae01a7fc5f65c4fca59f49cc976ae3be')

build() {
	cd "$srcdir"
	echo "zram" > zram.conf
	
}

package() {
	cd "$srcdir"
  
  install -m 755 -d $pkgdir/usr/lib/systemd/system
  install -m 755 -d $pkgdir/usr/lib/modules-load.d
  install -m 755 -d $pkgdir/usr/sbin
  install -m 755 -d $pkgdir/mnt/zdisk
  install -m 755 -d $pkgdir/opt/zdisk
  
  install -m 644 -t $pkgdir/usr/lib/systemd/system *.service
  install -m 644 -t $pkgdir/usr/lib/modules-load.d zram.conf
  install -m 750 -t $pkgdir/usr/sbin *.sh
}
