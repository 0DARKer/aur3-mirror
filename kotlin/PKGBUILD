# Maintainer: Vorzard

pkgname=kotlin
pkgver=0.11.91
pkgrel=1
pkgdesc="Statically typed programming language that compiles to JVM bytecode and JavaScript"
arch=('any')
url="http://kotlinlang.org/"
license=('Apache')
depends=('java-environment')
source=("https://github.com/JetBrains/$pkgname/releases/download/build-$pkgver/$pkgname-plugin-$pkgver.zip"
	'kotlin.csh'
	'kotlin.sh'
	'kotlinc.patch')
sha512sums=('aa8235a048b2f1b96a590a8bdf3e5a954626c313aea1d90813e99ffc2b86e6bc8d261eb3119bcc98045cada54a2341dd32890ec66bede544c00fb1eae3cd5ce8'
            'c6adb1612323875ecce7529d9cc81b140fe16b6b98302c04235d226dacaa7846ea02f6428d19cec08549c62c4997ad387e6f0cec26ed4194379efa217c6a6243'
            'bb4812cd30db8790fc5608ae9622ee536aec160bd66b9b5aac2f791fe8ca0824a980757e67aa0dbacef4b076d2c9cfa64e624182d6348b9b1a83788101f31cc1'
            '1fcc1afbd12419da664f5ef9140f73c855ede450e700328f660234020b29bb9303060801facb7a3ea8d34248c7326ecd4c707bf15f1980017065c4672a71190f')
prepare() {
  cd Kotlin/kotlinc/bin
  patch -p1 -Ni $srcdir/kotlinc.patch
}

package() {
  cd Kotlin
  mkdir -p $pkgdir/usr/bin $pkgdir/usr/share/kotlin $pkgdir/usr/share/licenses/kotlin $pkgdir/etc/profile.d
  rm -r kotlinc/bin/*.bat
  cp -r -T kotlinc/license $pkgdir/usr/share/licenses/kotlin
  cp -r -T kotlinc/bin $pkgdir/usr/bin
  cp -r kotlinc/lib $pkgdir/usr/share/kotlin
  cp -r lib $pkgdir/usr/share/kotlin
  install -m755 $srcdir/kotlin.{,c}sh $pkgdir/etc/profile.d
}