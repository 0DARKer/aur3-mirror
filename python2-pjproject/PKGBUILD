# Maintainer : M0Rf30 <morf3089@gmail.com>
# Contributor: SpepS <dreamspepser at yahoo dot it>

_pkg=pjproject
pkgname=python2-$_pkg
pkgver=1.10
pkgrel=2
pkgdesc="Open source SIP stack and media stack"
arch=('i686' 'x86_64')
url="http://www.pjsip.org/"
license=('GPL')
depends=('alsa-lib' 'util-linux' 'python2')
makedepends=('e2fsprogs' 'python2-distribute')
source=("http://www.pjsip.org/release/$pkgver/pjproject-$pkgver.tar.bz2")
md5sums=('e215d0637d3422d49a63c2cde6673951')

build() {
   cd "$srcdir/$_pkg-$pkgver"
 
  [ "$CARCH" = 'x86_64' ] && \
  export CFLAGS="$CFLAGS -fPIC" && \
  export CXXFLAGS="$CXXFLAGS -fPIC"

  ./configure --prefix=/usr  
  make dep 
  make -j1

  cd pjsip-apps/src/python/
  python2 setup.py build
}

package() {
  cd "$srcdir/$_pkg-$pkgver"

  make DESTDIR="$pkgdir" install

  cd pjsip-apps/src/python/
  python2 setup.py install --root="$pkgdir"
}

# vim:set ts=2 sw=2 et:
