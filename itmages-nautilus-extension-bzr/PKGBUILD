# Contributor: Voldemar Khramtsov <harestomper@gmail.com>

pkgname=nautilus-itmages-extension-bzr
origname="itmages-nautilus-extension-dev"
pkgver=1.23
pkgrel=1
pkgdesc="Nautilus extension for uploading pictures to ITmages.ru"
arch=('i686' 'x86_64')
url="http://bazaar.launchpad.net/~itmages/itmages/itmages-nautilus-extension-dev"
license=('GPL')
groups=('graphics')
depends=('nautilus' 'itmages-service')
makedepends=("cmake" "make" "vala>=0.12" "nautilus" "pkg-config")


build() {
    cd ${srcdir}
    bzr branch lp:~itmages/itmages/${origname} || return 1
    
    cd "${srcdir}/${origname}"
    cmake CMakeLists.txt || return 1
    make || return 1
    GTKVER=`pkg-config --modversion libnautilus-extension | awk -F"." '{print $1".0"}'`
    install -D --mode=644 libnautilus-itmages.so ${pkgdir}/usr/lib/nautilus/extensions-${GTKVER}/libnautilus-itmages.so
    install -D --mode=644 pixmaps/nautilus-itmages.png ${pkgdir}/usr/share/pixmaps/nautilus-itmages.png
    install -D --mode=644 ru.gmo ${pkgdir}/usr/share/locale/ru/LC_MESSAGES/nautilus-itmages.mo
}

# vim:set ts=2 sw=2 et:

