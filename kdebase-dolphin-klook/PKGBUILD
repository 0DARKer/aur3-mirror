# $Id: PKGBUILD 155541 2012-04-04 14:13:00Z andrea $
# Contributor: Andrea Scarpino <andrea@archlinux.org>
# Contributor: Pierre Schmitz <pierre@archlinux.de>
# Maintainer: Dany Martineau <dany.luc.martineau@gmail.com>

pkgname=('kdebase-dolphin-klook')
pkgver=4.8.2
pkgrel=2
arch=('i686' 'x86_64')
pkgdesc="dolphin with klook enabled"
url='http://www.kde.org'
license=('GPL' 'LGPL' 'FDL')
groups=('kde' 'kdebase')
depends=('klook-git')
makedepends=('cmake' 'automoc4' 'tidyhtml')
source=("http://download.kde.org/stable/${pkgver}/src/kde-baseapps-${pkgver}.tar.xz" "kdebase-4.8.1-dolphin-klook.patch")
provides=(kdebase-dolphin=4.8.2)
conflicts=(kdebase-dolphin)
install=kdebase-dolphin.install
sha1sums=('13dc2e6c8639feadc9a5a334d0720a60b1e3ccb6'
          '71440ba1178bd4406268a0815bfb89783ad38aea')   
build() {
	cd ${srcdir}/kde-baseapps-4.8.2
	patch -Np1 < ../kdebase-4.8.1-dolphin-klook.patch
	cd ..
	mkdir build
	cd build
	cmake ../kde-baseapps-${pkgver} \
		-DCMAKE_BUILD_TYPE=Release \
		-DCMAKE_SKIP_RPATH=ON \
		-DCMAKE_INSTALL_PREFIX=/usr
	make
}

package() {
	cd $srcdir/build/dolphin
	make DESTDIR=$pkgdir install
	cd $srcdir/build/doc/dolphin
	make DESTDIR=$pkgdir install
}
