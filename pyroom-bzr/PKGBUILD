# Maintainer: Thomas Dziedzic < gostrc at gmail >
# Contributor: zhuqin <zhuqin83@gmail.com>
# Contributor: mentallaxative <beshimi@hotmail.com>

pkgname=pyroom-bzr
pkgver=204
pkgrel=1
pkgdesc='A Whiteroom clone full-screen text editor'
arch=('i686' 'x86_64')
url='http://www.pyroom.org/'
license=('GPL3')
depends=('pyxdg' 'pygtk')
optdepends=('python-gconf: use GNOME default fonts in PyRoom'
            'gettext: international support')
makedepends=('python' 'bzr')

_bzrtrunk='http://bazaar.launchpad.net/~pyroom-dev/pyroom/trunk'
_bzrmod='pyroom'

build() {
  msg "Connecting to the server...."

  if [ ! -d ./$_bzrmod ]; then
    bzr co $_bzrtrunk $_bzrmod -r $pkgver
  else
    bzr up $_bzrmod
  fi

  msg "BZR checkout done or server timeout"
  msg "Starting make..."

  cd $_bzrmod

  python setup.py build || return 1

  python setup.py install --root="$pkgdir" --prefix=/usr || return 1
}
