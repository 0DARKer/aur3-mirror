# Maintainer: American_Jesus <american.jesus.pt AT gmail DOT com>

pkgname=cloudpt
_pkgname=CloudPT
pkgver=0.0.37
pkgrel=2
pkgdesc="Portuguese cloud storage, file synchronization service"
url="https://cloudpt.pt/"
arch=("i686" "x86_64")
depends=('gtk2')
license=('custom')
options=('!strip' '!upx')


source=("https://cloudpt.pt/binaries/ubuntu32/$_pkgname-$pkgver.linux-i686.tar.gz"
        "cloudpt"
        "cloudpt.desktop"
        "cloudpt.png"
        "termos.txt")
md5sums=('396098250fce663f8228cbed2213b772'
         '95e8bbbd224c3649936c993ccbe26fe6'
         '102ad59883db001fbac71012ececa3d4'
         'dcaad5aaa779883389c95a80c19c47f6'
         '401f007d1a9ead170a92a0e6d0a804ce')


if [[ "$CARCH" == "x86_64" ]]; then
  depends+=('lib32-gtk2')
fi


build() {
  install -d "$pkgdir/opt"
  cp -R "$srcdir/CloudPT/$_pkgname-$pkgver.linux-i686" "$pkgdir/opt/cloudpt"

  find "$pkgdir/opt/cloudpt/" -type f -exec chmod 644 {} \;
  chmod 755 "$pkgdir/opt/cloudpt/CloudPT"

  install -d "$pkgdir/usr/bin"
  install -m755 "cloudpt" "$pkgdir/usr/bin/cloudpt"

  install -Dm644 "$srcdir/cloudpt.desktop" "$pkgdir/usr/share/applications/cloudpt.desktop"
  install -Dm644 "$srcdir/cloudpt.png" "$pkgdir/usr/share/pixmaps/cloudpt.png"
  install -Dm644 "$srcdir/termos.txt" "$pkgdir/usr/share/licenses/$pkgname/termos.txt"

}
