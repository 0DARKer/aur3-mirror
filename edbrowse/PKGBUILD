# Contributor: Chris Brannon <cmbrannon (at) cox.net>
# Contributor: joyfulgirl <joyfulgirl (at) archlinux.us>
# Contributor: Chuck Boucher <jofywyxaxukyvofa (at) tempomail.fr>
# Maintainer: aksr <aksr at t-com dot me>
pkgname=edbrowse
pkgver=3.4.10
pkgrel=1
epoch=
pkgdesc="Editor, browser, and mail client based on /bin/ed"
arch=('i686' 'x86_64')
url="http://the-brannons.com/edbrowse/"
license=('GPL' 'openssl')
groups=()
depends=('js185' 'openssl' 'pcre' 'curl>=7.17.0' 'readline')
makedepends=()
checkdepends=()
optdepends=()
provides=()
conflicts=('edbrowse-git')
replaces=()
backup=()
options=()
install=
changelog=
source=("http://the-brannons.com/$pkgname/$pkgname-$pkgver.zip")
noextract=()
md5sums=('70b72a319e41ca50665b2864ee7c1a15')
sha1sums=('b196cd81026a9c560f42d067117e80f9862aec12')

prepare() {
	cd "$srcdir/$pkgname-$pkgver/src"
    sed -i 's/jsapi.h/\/usr\/include\/js\/jsapi.h/' eb.h
}

build() {
	cd "$srcdir/$pkgname-$pkgver"
	make all
}

package() {
	cd "$srcdir/$pkgname-$pkgver/src"
    make DESTDIR="$pkgdir" prefix=/usr install

    mkdir -p $pkgdir/usr/share/{doc/$pkgname,licenses/$pkgname,man/man1}

    cd $srcdir/$pkgname-$pkgver/doc
    install -m755 setup.ebrc            "$pkgdir/usr/bin"
    install -m644 usersguide.html       "$pkgdir/usr/share/doc/edbrowse"
    install -m644 philosophy.html       "$pkgdir/usr/share/doc/edbrowse"
    install -m644 sample.ebrc           "$pkgdir/usr/share/doc/edbrowse"
    install -m644 man-edbrowse-debian.1 "$pkgdir/usr/share/man/man1/edbrowse.1"

    cd $srcdir/$pkgname-$pkgver
    install -m644 README                "$pkgdir/usr/share/doc/$pkgname/README"
    install -m644 CHANGES               "$pkgdir/usr/share/doc/$pkgname/CHANGES"
    install -m644 todo                  "$pkgdir/usr/share/doc/$pkgname/TODO"
    install -m644 COPYING               "$pkgdir/usr/share/licenses/$pkgname/COPYING"
}
