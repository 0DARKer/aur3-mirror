# Contributor: Bernhard Walle <bernhard@bwalle.de>
# AUR Category: x11
pkgname=qpamat
pkgver=0.5.3
pkgrel=1
pkgdesc="Password manager in Qt"
url="http://qpamat.berlios.de"
license="GPL"
depends=(qt)
arch=(i686 x86_64)
source=(http://download.berlios.de/qpamat/qpamat-0.5.3.tar.bz2
        qpamat-fix-gcc43
        qpamat-fix-gcc44
        qpamat-fix-spacing)
md5sums=('19b7402245e9a68ebcadf408bee2e2eb'
         'f53f182d87ec081dbdc6c659425efe6c'
         '2143a74303e0e93f49539af54689dcd8'
         '64d2fd2f072e614af1eae5f5068d30da')

build() {
  cd $startdir/src/$pkgname-$pkgver
  unset QMAKESPEC
  patch -p0 < ../qpamat-fix-gcc43
  patch -p1 < ../qpamat-fix-gcc44
  patch -p0 < ../qpamat-fix-spacing
  qmake qpamat.pro
  make
  lupdate qpamat.pro
  lrelease qpamat.pro
  mkdir -p $startdir/pkg/usr/bin
  mkdir -p $startdir/pkg/usr/share/qpamat/dicts
  mkdir -p $startdir/pkg/usr/share/qpamat/translations
  install -m 0755 bin/qpamat $startdir/pkg/usr/bin
  install -m 0644 COPYING $startdir/pkg/usr/share/qpamat
  install -m 0644 share/dicts/* $startdir/pkg/usr/share/qpamat/dicts
  install -m 0644 ts/* $startdir/pkg/usr/share/qpamat/translations
}
