From 21260bbb732d9de5540f809e1a54bde740f12a95 Mon Sep 17 00:00:00 2001
From: Laurent Aimar <fenrir@videolan.org>
Date: Tue, 7 Jun 2011 00:43:56 +0200
Subject: [PATCH] Fix ByteIOContext init on recent libavformat

Signed-off-by: Jean-Baptiste Kempf <jb@videolan.org>
(cherry picked from commit 4fc3bd15a3844e41a75760fa8e100feecea969a5)

Signed-off-by: Jean-Baptiste Kempf <jb@videolan.org>
---
 modules/demux/avformat/demux.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

diff --git a/modules/demux/avformat/demux.c b/modules/demux/avformat/demux.c
index fbb0b28..bd7c166 100644
--- a/modules/demux/avformat/demux.c
+++ b/modules/demux/avformat/demux.c
@@ -210,6 +210,9 @@ int OpenDemux( vlc_object_t *p_this )
        */
        p_sys->url.is_streamed = 1;
        p_sys->io.is_streamed = 1;
+#if defined(AVIO_SEEKABLE_NORMAL)
+       p_sys->io.seekable = 0;
+#endif
     }


--
1.7.2.5
