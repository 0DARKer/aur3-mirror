# Contributor: Andreas Baumann <abaumann at yahoo dot com>

pkgname=snowball-c
pkgver=20130224
pkgrel=1
pkgdesc="Snowball rule-based stemming algorithms"
arch=('i686' 'x86_64')
url='http://snowball.tartarus.org/'
license=('BSD')
makedepends=()
depends=()
provides=()
source=(http://snowball.tartarus.org/dist/libstemmer_c.tgz)
md5sums=('78e9d4bbb878191e3de6a7355711fa43')

build() {
  cd ${srcdir}/libstemmer_c
  make CC='gcc -fPIC' || return 1

  install -d ${pkgdir}/usr/bin || return 1 
  install ${srcdir}/libstemmer_c/stemwords ${pkgdir}/usr/bin || return 1
  install -d ${pkgdir}/usr/include || return 1
  install ${srcdir}/libstemmer_c/include/libstemmer.h ${pkgdir}/usr/include || return 1
  install -d ${pkgdir}/usr/lib || return 1
  install ${srcdir}/libstemmer_c/libstemmer.o ${pkgdir}/usr/lib/libstemmer.a || return 1

  gcc -shared -o ${pkgdir}/usr/lib/libstemmer.so -lstemmer -fpic -Wl,--whole-archive ${srcdir}/libstemmer_c/libstemmer.o -Wl,--no-whole-archive
}
