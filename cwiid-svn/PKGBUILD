#Contributor:Andrea Tarocchi <valdar@email.it> 
pkgname=cwiid-svn
#pkgver=`date +%Y%m%d`
pkgver=184
pkgrel=1
pkgdesc="Cwiid-svn is the bleeding edge version of a wiimote's driver and utility tools"
arch=(i686 x86_64)
url="http://abstrakraft.org/cwiid/"
license=('GPL')

depends=('gawk' 'bluez-libs' 'gtk2')
makedepends=('subversion')
conflicts=('cwiid')
provides=('cwiid')
install=('cwiid.install')
source=()
md5sums=('b3966beecae0de200c90523af8f3bf0e')

_svntrunk=http://abstrakraft.org/cwiid/svn/trunk/
_svnmod=cwiid

build() {
  cd $startdir/src

  svn co $_svntrunk --config-dir ./ -r $pkgver $_svnmod
  #svn co $_svntrunk --config-dir ./ $_svnmod

  msg "SVN checkout done or server timeout"
  msg "Starting make..."

  cp -r $_svnmod $_svnmod-build
  cd $_svnmod-build
  
  autoreconf
  
  ./configure --prefix=/usr --disable-ldconfig --sysconfdir=/etc
  make

  install -d $startdir/pkg/usr/bin
  install -d $startdir/pkg/etc
  install -d $startdir/pkg/usr/lib
  install -d $startdir/pkg/usr/include

  make prefix=$startdir/pkg/usr sysconfdir=$startdir/pkg/etc install

  install -D -m644 ./wminput/README $pkgdir/usr/share/doc/cwiid-svn/wminput

  rm -rf $startdir/src/$_svnmod-build
}
