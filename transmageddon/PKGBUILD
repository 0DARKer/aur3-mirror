# Contributor: Federico Chiacchiaretta <federico.chia@gmail.com>

pkgname=transmageddon
pkgver=0.16
pkgrel=2
pkgdesc="Transmageddon is a video transcoder for Linux and Unix systems built using GStreamer"
arch=('i686' 'x86_64')
url="http://www.linuxrising.org/transmageddon/"
license=('GPL')
depends=('gstreamer0.10-python' 'pygtk' 'pygobject' 'librsvg')
makedepends=('intltool')
optdepends=('gstreamer0.10-plugins: additional codecs')
source=(http://www.linuxrising.org/transmageddon/files/$pkgname-$pkgver.tar.bz2
	python2_fix.patch)
md5sums=('11d530878d7fec48c1bdd3221a194464'
         '1f8d3d86ab10220e49a99fd3c2b533b9')

build() {
  cd "$srcdir/$pkgname-$pkgver"

  # Patch executable for python2 compatibility
  patch -Np0 -i ${srcdir}/python2_fix.patch  

  ./configure --prefix=/usr --sysconfdir=/etc --localedir=/usr/share/locale
  make || return 1
  make DESTDIR="$pkgdir/" install
}
