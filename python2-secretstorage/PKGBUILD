# Maintainer: Patrice Peterson <runiq at archlinux dot us>
# Contributor: JonnyJD <arch@JonnyJD.net>

pkgname=python2-secretstorage
pkgver=1.1.0
pkgrel=2
pkgdesc="Securely store passwords and other private data using the SecretService DBus API"
arch=('any')
url="https://pypi.python.org/pypi/SecretStorage"
license=('BSD')
depends=('python2-dbus')
source=("$pkgname-$pkgver.tar.gz"::https://pypi.python.org/packages/source/S/SecretStorage/SecretStorage-${pkgver}.tar.gz
        "tests_dbus_fix.diff")
md5sums=('c7bfb4ebd312aa64b0e2005b809a21d3'
         'c710bbd739af25cff46e722e1b9b8a9d')

prepare() {
  cd SecretStorage-$pkgver
  patch -Np0 < ../tests_dbus_fix.diff
}

package() {
	cd SecretStorage-$pkgver
        python2 setup.py install --root="$pkgdir/" --optimize=1
	install -Dm644 LICENSE "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
}
