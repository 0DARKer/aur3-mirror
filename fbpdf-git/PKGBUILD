# Maintainer: Sara <sara @ archlinux dot us>
pkgname=fbpdf-git
pkgver=20110207
pkgrel=1
pkgdesc="A small framebuffer pdf viewer based on MuPDF."
arch=(i686 x86_64)
url="http://repo.or.cz/w/fbpdf.git"
license=('GPL')
depends=(mupdf) 
makedepends=(git)
provides=(fbpdf)

_gitroot=git://repo.or.cz/fbpdf.git
_gitname=fbpdf

build(){
	cd "$srcdir"
    msg "Connecting to GIT server...."
	
	if [[ -d $_gitname ]]; then
		cd "$_gitname"
		git pull origin
		msg "The local files are updated."
	else
		git clone "$_gitroot" 
		cd "$_gitname"
	fi
	msg "Checkout done or server timeout"
    msg "Starting make..."
}

package(){
    rm -rf "$srcdir/$_gitname-build"
    git clone "$srcdir/$_gitname" "$srcdir/$_gitname-build"
    cd "$srcdir/$_gitname-build"

    make
    install -D $pkgname "$pkgdir"/usr/bin/$pkgname
}
