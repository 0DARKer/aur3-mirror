# Contributor: Mildred <mildred593 at online dot fr>
# Contributor: Stefan Husmann <stefan-husmannt-online.de>
pkgname=glosstex
pkgver=0.4
pkgrel=4
pkgdesc="Prepare glossaries in LaTeX."
arch=('i686')
url="http://www.dante.de/CTAN/help/Catalogue/entries/glosstex.html"
depends=('texlive-core')
makedepends=('make' 'unzip')
install=('glosstex.install')
license=('GPL')
source=("http://www.ctan.org/get/support/$pkgname.zip" docu.patch Makefile.patch)
md5sums=('d5f90382e94fee60fcc431e827d40008' '1fba401a02aa3f3ad2cebea10cd20176'\
         '300f01b751d7f3dcae7eeb8ea1ca6459')

build() {
    cd "$startdir/src/$pkgname"
    patch Makefile ../Makefile.patch || return 1
    patch $pkgname.dtx ../docu.patch || return 1
    make || return 1
    make doc || return 1
    install -d $startdir/pkg/usr/share/texmf/tex/latex/$pkgname || return 1
    install -Dm644 $pkgname.ist \
      $startdir/pkg/usr/share/texmf/makeindex/$pkgname/$pkgname.ist || return 1
    install -Dm644 $pkgname.pdf \
      $startdir/pkg/usr/share/texmf/doc/$pkgname/$pkgname.pdf || return 1
    install -Dm755 $pkgname $startdir/pkg/usr/bin/$pkgname || return 1
    install -m 644 $pkgname.sty $pkgname.std \
      $startdir/pkg/usr/share/texmf/tex/latex/$pkgname || return 1
}
