# Maintainer: John-Michael Mulesa <jmmulesa[at]gmail[dot]com>
pkgname=rdma
pkgver=2.0
pkgrel=13
url="https://apps.fedoraproject.org/packages/rdma"
pkgdesc="User space initialization scripts for the kernel InfiniBand/iWARP drivers"
arch=('any')
license=('GPL2')
depends=('systemd')
source=("rdma-init-kernel"
        "rdma-fixup-mtrr.awk"
        "rdma.service"
        "98-rdma.rules"
        "70-persistent-ipoib.rules"
        "rdma.conf")
md5sums=('a7b0427b0e33de76491df130ddaaf2fb'
         '878c87d2fcb8e753fb4e2ea3d5fbec56'
         '5d79c0c46c3946c4262cf96644f25832'
         '1ceaa14dde69b1c08bad348785fbbc52'
         'cc45e00c6292da12fd89549db8463256'
         'a7b6f63328e67d10883670cd1d2395ae')

package() {
  install -Dm755 "${srcdir}/rdma-init-kernel" "${pkgdir}/usr/bin/rdma-init-kernel"
  install -Dm644 "${srcdir}/rdma-fixup-mtrr.awk" "${pkgdir}/usr/bin/rdma-fixup-mtrr.awk"
  install -Dm644 "${srcdir}/rdma.service" "${pkgdir}/usr/lib/systemd/system/rdma.service"
  install -Dm644 "${srcdir}/98-rdma.rules" "${pkgdir}/lib/udev/rules.d/98-rdma.rules"
  install -Dm644 "${srcdir}/70-persistent-ipoib.rules" "${pkgdir}/etc/udev/rules.d/70-persistent-ipoib.rules"
  install -Dm644 "${srcdir}/rdma.conf" "${pkgdir}/etc/rdma/rdma.conf"
}
