# Maintainer: tailinchu <use_my_id at gmail dot com>

pkgname=powerdown-git
pkgver=2013040221
pkgrel=1
pkgdesc="taylorchu's powerdown repo (git version)"
arch=('any')
url="http://github.com/taylorchu/powerdown"
license=('GPL2')
depends=('bash' 'iw' 'hdparm' 'bc')
makedepends=('git')
conflicts=('pm-utils')
provides=('pm-utils')

_gitroot="https://github.com/taylorchu/powerdown.git"
_gitname="powerdown"

build() {
    cd "$srcdir"
    msg "Connecting to GIT server..."
    if [[ -d "$_gitname" ]] ; then
        cd "$_gitname" && git pull origin
        msg "The local files are updated."
    else
        git clone --depth 1 "$_gitroot" "$_gitname"
    fi
    msg "GIT checkout done or server timeout"
    
    cd "$srcdir/$_gitname"
}

package() {
    cd "$srcdir/$_gitname"
    make PREFIX=/usr DESTDIR="$pkgdir" install
}

