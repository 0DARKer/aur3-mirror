# Maintainer: Mikael Eriksson <mikael_eriksson@miffe.org>

pkgname=osare
pkgver=010
pkgrel=2
pkgdesc="open source action roleplaying game"
arch=('i686' 'x86_64')
url="http://clintbellanger.net/rpg/"
license=('GPL')
depends=('sdl' 'sdl_image' 'sdl_mixer')
source=(http://osare.googlecode.com/files/osare_src_v$pkgver.zip)
md5sums=('e7a28051d11680c60072b89ef941ac28')

build() {
  cd $srcdir/osare_src_v$pkgver/src
  g++ *.cpp -o osare.bin -I/usr/include/SDL -lSDL -lSDL_image -lSDL_mixer || return 1
  install -m755 -d $pkgdir/usr/{bin,share/osare/saves}
  install -m755 osare.bin $pkgdir/usr/bin
  cd $srcdir/osare_src_v$pkgver/resources
  #find -name '.DS_Store' -exec rm {} \;
  cp -r * $pkgdir/usr/share/osare
cat > $pkgdir/usr/bin/osare << EOF
#!/bin/sh
cd /usr/share/osare
exec osare.bin
EOF
  chmod +x $pkgdir/usr/bin/osare
  chmod 775 $pkgdir/usr/share/osare/saves
  chown root:games $pkgdir/usr/share/osare/saves
}

# vim:set ts=2 sw=2 et:
