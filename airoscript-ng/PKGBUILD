# Maintainer: Max Roder <maxroder@web.de>
# Contributor: Lex Rivera <x-demon@x-demon.org>

pkgname=airoscript-ng
pkgver=1.2rc3
pkgrel=1
pkgdesc="A gui mainly for aircrack-ng. Automates cracking of WEP and WPA"
arch=('any')
url="http://code.google.com/p/airoscript/"
license=('GPL2')
depends=('aircrack-ng')
makedepends=()
optdepends=('mdk' 'digenpy')
conflicts=('airoscript-svn')
source=(http://airoscript.googlecode.com/files/$pkgname-1.2-3.tar.gz)
md5sums=('fe2601e41a44c59e68be2a0e09392926')
options=('!makeflags');

build() {
  cd $srcdir/${pkgname}-1.2

  # Remove broken install parts
  msg2 "Patching files"
  sed -i '/install-docs \\/ d' Makefile-Linux
  sed -i '/install-locale \\/ d' Makefile-Linux
  sed -i '/install-desktop \\/ d' Makefile-Linux

  # Finally make...
  make DESTDIR=$pkgdir prefix=usr picdir=$pkgdir/usr/share/pixmaps/ appdir=$pkgdir/usr/share/applications/  || return 1

  # Patch config - replace "usr/local" by "usr"
  sed -i 's/usr\/local/usr/g' ${pkgdir}/etc/airoscript-ng_advanced.conf

  # Clean up
  rm -rf ${pkgdir}/usr/share/locale
}
