# Maintainer: Stefan Husmann <stefan-husmann@t-online.de>

pkgname=octave-unstable
pkgver=3.3.54
pkgrel=1 
pkgdesc="A high-level language, primarily intended for numerical computations."
url="http://www.octave.org"
arch=('i686' 'x86_64')
license=('GPL')
depends=('fftw>=3.2.2' 'fltk' 'hdf5' 'glpk' 'pcre' 'curl' 'lapack' 'qhull' 'graphicsmagick>=1.3.6' 'arpack' 'qrupdate')
makedepends=('mercurial' 'texinfo' 'gcc-fortran')
optdepends=('texinfo: for help-support in octave'
            'gnuplot: alternative plotting')
conflicts=('octave' 'octave3' 'octave-suitsparse' 'octave-hg')
provides=('octave')
install=octave.install
source=("ftp://alpha.gnu.org/gnu/octave/octave-$pkgver.tar.bz2" configure.patch)
md5sums=('3443b2b48b0e7d17a272d80faf3bebee'
         '2dd7f614318c54ebc103e55172da6c34')

build() {
  cd $srcdir/octave-$pkgver
  patch -p1 < $srcdir/configure.patch
  ./configure \
    --prefix=/usr \
    --libexecdir=/usr/lib \
    --enable-shared \
    --disable-static
  make
  make DESTDIR=${pkgdir} install
  install -D -m644 \
    ${pkgdir}/usr/share/applications/www.octave.org-octave.desktop \
    ${pkgdir}/usr/share/applications/octave.desktop
} 
